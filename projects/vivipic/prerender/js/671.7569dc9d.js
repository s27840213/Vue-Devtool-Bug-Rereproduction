"use strict";(self["webpackChunknueditor"]=self["webpackChunknueditor"]||[]).push([[671],{98671:function(e,t,i){i.r(t),i.d(t,{default:function(){return ae}});var s=i(29651),n=i(819),o=i(41463);const l={class:"list"},c={class:"list-title__text text-gray-1"},r={class:"list-content"},a={key:0},h={key:0,class:"list-content-items__theme-item"},d=["src","onClick"],m={class:"body-XS text-gray-1"},g=["src","onClick"],p={class:"body-XS text-gray-1"},u={key:0,class:"body-XXS text-gray-3"},f=["onClick"],v=["src"];function _(e,t,_,y,w,b){const k=(0,s.up)("router-link"),D=(0,s.up)("svg-icon"),$=(0,s.up)("btn-new-design"),x=(0,s.up)("design-item"),S=(0,s.up)("pro-item");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",{class:(0,n.C_)(["list-title",e.isMobile?"text-H6":"text-H5"])},[(0,s._)("span",c,(0,n.zw)(e.title),1),"theme"!==e.type?((0,s.wg)(),(0,s.j4)(k,{key:0,class:(0,n.C_)(["list-title__more text-gray-2",e.inBrowserMode?"body-MD":"body-SM"]),to:e.moreLink},{default:(0,s.w5)((()=>[(0,s._)("span",null,(0,n.zw)(e.$t("NN0082")),1)])),_:1},8,["class","to"])):(0,s.kq)("",!0)],2),(0,s._)("div",r,[(0,s.Wm)(o.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[e.prevIcon?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"list-content__lefticon",onClick:t[0]||(t[0]=t=>e.scroll(!1))},[(0,s.Wm)(D,{iconName:"chevron-left",iconWidth:"25px",iconColor:"gray-3"})])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(o.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[e.nextIcon?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"list-content__righticon",onClick:t[1]||(t[1]=t=>e.scroll(!0))},[(0,s.Wm)(D,{iconName:"chevron-right",iconWidth:"25px",iconColor:"gray-3"})])):(0,s.kq)("",!0)])),_:1}),(0,s._)("div",{class:"list-content-items",style:(0,n.j5)(e.itemContainerStyles),onScrollPassive:t[3]||(t[3]=(...t)=>e.updateIcon&&e.updateIcon(...t)),ref:"items"},[e.isLoading?((0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(D,{iconName:"loading",iconWidth:"50px",iconColor:"gray-3"})])):"theme"===e.type?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[e.$isTouchDevice()?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",h,[(0,s.Wm)($,null,{default:(0,s.w5)((t=>[(0,s._)("img",{class:"list-content-items__theme-item-new pointer",src:i(43378),onClick:t.openPopup},null,8,d),(0,s._)("span",m,(0,n.zw)(e.$t("NN0023")),1)])),_:1})])),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.themeData,(i=>((0,s.wg)(),(0,s.iD)("div",{class:"list-content-items__theme-item",key:i.id},[(0,s.Wm)(k,{to:e.themeRouteInfo(i)},{default:(0,s.w5)((()=>[(0,s._)("img",{class:"list-content-items__theme-item-preset",src:i.url.replace("v2","v3"),onError:t[2]||(t[2]=(...t)=>e.imgOnerror&&e.imgOnerror(...t)),onClick:t=>e.openProductPageNotification(i)},null,40,g)])),_:2},1032,["to"]),(0,s._)("span",p,(0,n.zw)(i.title),1),e.$isTouchDevice()?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",u,(0,n.zw)(i.description),1))])))),128))],64)):"mydesign"===e.type?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:2},(0,s.Ko)(e.mydesignData,(e=>((0,s.wg)(),(0,s.j4)(x,{class:"list-content-items__mydesign-item",key:e.id,config:e},null,8,["config"])))),128)):"template"===e.type?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:3},(0,s.Ko)(e.templateData,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"list-content-items__template-item",key:t.id,onClick:i=>e.clickTemplate(t)},[(0,s._)("img",{loading:"lazy",src:`https://template.vivipic.com/template/${t.match_cover.id}/${e.prevSize(t.match_cover)}?ver=${t.ver}`,style:(0,n.j5)(e.templateImgStyle(t.match_cover))},null,12,v),1===t.plan?((0,s.wg)(),(0,s.j4)(S,{key:0})):(0,s.kq)("",!0)],8,f)))),128)):(0,s.kq)("",!0)],36)])])}const y={class:"design-item"},w={class:"design-item__block pointer"},b=["src"],k={class:"design-item__controller"},D={class:"design-item__name"},$={class:"design-item__name__container"},x=["title"];function S(e,t,i,l,c,r){return(0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("div",w,[(0,s._)("div",{class:"design-item__img-container",style:(0,n.j5)(e.containerStyles())},[e.previewCheckReady?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"design-item__thumbnail",style:(0,n.j5)(e.imageStyles()),src:e.appliedUrl},null,12,b)):(0,s.kq)("",!0)],4),(0,s._)("div",k,[(0,s._)("div",{class:"design-item__controller-content",onClick:t[0]||(t[0]=(0,o.iM)(((...t)=>e.handleClick&&e.handleClick(...t)),["self"]))})])]),(0,s._)("div",D,[(0,s._)("div",$,[(0,s._)("span",{title:e.config.name},(0,n.zw)(""===e.config.name?`${e.$t("NN0079")}`:e.config.name),9,x)])])])}var T=i(20951),I=i(3162),P=i(98824),N=i(10298),C=i.n(N),O=i(38058),Z=Object.defineProperty,j=Object.defineProperties,M=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,H=(e,t,i)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,R=(e,t)=>{for(var i in t||(t={}))z.call(t,i)&&H(e,i,t[i]);if(W)for(var i of W(t))L.call(t,i)&&H(e,i,t[i]);return e},q=(e,t)=>j(e,M(t)),E=(0,s.aZ)({emits:[],props:{config:{type:Object,required:!0}},data(){return{imgWidth:10,imgHeight:10,previewCheckReady:!1,previewPlaceholder:i(67263)}},directives:{clickOutside:C().directive},created(){this.checkImageSize()},watch:{"config.asset_index":{handler:function(){this.$nextTick((()=>{this.checkImageSize()}))},deep:!0}},computed:{aspectRatio(){return this.config.width/this.config.height},configPreview(){return T.ZP.getDesignPreview(this.config.id,1,this.config.ver,this.config.signedUrl)},appliedUrl(){return""!==this.config.thumbnail?this.config.thumbnail:this.previewPlaceholder}},methods:q(R({},(0,O.OI)({setDesignThumbnail:"design/UPDATE_setDesignThumbnail"})),{containerStyles(){return this.aspectRatio<1.2&&this.aspectRatio>.83?{padding:"26px"}:{padding:"17px"}},imageStyles(){return this.aspectRatio>1?{width:"100%",height:"auto",border:"1px solid #DEDEDE"}:{width:"auto",height:"100%",border:"1px solid #DEDEDE"}},handleClick(){this.$isTouchDevice()&&1===this.config.group_type?P.Z.setModalInfo(`${this.$t("NN0808")}`,[],{msg:`${this.$t("NN0358")}`,class:"btn-blue-mid",action:()=>!1}):T.ZP.setDesign(this.config)},checkImageSize(){this.previewCheckReady=!1,this.config.polling?(this.previewCheckReady=!0,this.setDesignThumbnail({asset_index:this.config.asset_index,thumbnail:this.previewPlaceholder}),this.pollingStep()):I.Z.getImageSize(this.configPreview,150,150,!1).then((e=>{const{width:t,height:i,exists:s}=e;this.imgWidth=t,this.imgHeight=i,this.previewCheckReady=!0,this.setDesignThumbnail({asset_index:this.config.asset_index,thumbnail:s?this.configPreview:this.previewPlaceholder})}))},pollingStep(e=0){const t=e>14?2e3:1e3;I.Z.getImageSize(T.ZP.getDesignPreview(this.config.id,2,void 0,this.config.signedUrl),this.imgWidth,this.imgHeight,!1).then((i=>{const{width:s,height:n,exists:o}=i;this.imgWidth=s,this.imgHeight=n,o?this.setDesignThumbnail({asset_index:this.config.asset_index,thumbnail:this.configPreview}):e<35&&setTimeout((()=>{this.pollingStep(e+1)}),t)}))}})}),B=i(53372);const A=(0,B.Z)(E,[["render",S],["__scopeId","data-v-42784e74"],["__file","DesignItem.vue"]]);var U=A,X=i(9897),Y=i(63788),K=i(58559),G=i(47147),Q=i(8295),F=i(4821),V=Object.defineProperty,J=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,ne=(e,t,i)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,oe=(e,t)=>{for(var i in t||(t={}))ie.call(t,i)&&ne(e,i,t[i]);if(te)for(var i of te(t))se.call(t,i)&&ne(e,i,t[i]);return e},le=(e,t)=>J(e,ee(t)),ce=(0,s.aZ)({emits:[],name:"ScrollList",components:{DesignItem:U,ProItem:Y.Z,BtnNewDesign:X.Z},props:{type:{type:String,required:!0},theme:{type:String},gridMode:{type:Boolean,default:!1},shuffle:{type:Boolean,default:!1}},data(){return{prevIcon:!1,nextIcon:!1,isLoading:!0,title:"",moreLink:"",fallbackSrc:i(75230),themeData:[],templateData:[]}},computed:le(oe(oe({},(0,O.rn)({isMobile:"isMobile"})),(0,O.Se)({mydesignData:"design/getAllDesigns",inBrowserMode:"webView/getInBrowserMode",_newTemplateShownMode:"getNewTemplateShownMode"})),{itemContainerStyles(){return this.gridMode?{display:"grid",gridAutoColumns:this.$isTouchDevice()?"72px":"96px",columnGap:this.$isTouchDevice()?"8px":"24px",gridAutoFlow:"column",gridTemplateRows:"1fr"}:{}}}),created(){switch(this.type){case"theme":F.Z.checkThemeState().then((()=>{this.themeData=F.Z.themesMainHidden,this.isLoading=!1})),this.title=this.$t("NN0154");break;case"mydesign":this.fetchAllDesigns().then((()=>{this.isLoading=!1})),this.title=this.$t("NN0080"),this.moreLink="/mydesign";break;case"template":Promise.all([this.getTamplate({keyword:"group::0;;order_by::popular",theme:this.theme,shuffle:!0===this.shuffle?1:0,cache:!0}).then((e=>{this.templateData=e.data.content[0].list})),F.Z.checkThemeState().then((()=>{this.themeData=F.Z.themesMainHidden}))]).then((()=>{this.isLoading=!1})),this.title=F.Z.getThemeTitleById(this.theme),this.moreLink=`/templates?themes=${this.theme}`;break}this.delayInit()},methods:le(oe({},(0,O.nv)({getTamplate:"homeTemplate/getTagContent",fetchAllDesigns:"design/fetchAllDesigns"})),{imgOnerror(e){e.target.src=this.fallbackSrc},delayInit(e=10){const t=this.$refs.items;t&&t.scrollWidth!==t.offsetWidth?this.updateIcon():e>0&&setTimeout((()=>{this.delayInit(e-1)}),1e3)},updateIcon(){const e=this.$refs.items;this.prevIcon=e.scrollLeft>0,this.nextIcon=e.scrollLeft<e.scrollWidth-e.offsetWidth},scroll(e){const t=this.$refs.items;t.scrollLeft+=t.offsetWidth/2*(e?1:-1)},templateUrl(e){var t;const i=this.themeData.find((t=>t.id.toString()===e.match_cover.theme_id));return this.$router.resolve({name:"Editor",query:oe({type:"7"===this.theme?"product-page-template":"new-design-template",design_id:"7"===this.theme?e.group_id:e.match_cover.id,themeId:e.content_ids[0].themes.join(","),width:String(e.match_cover.width),height:String(e.match_cover.height),unit:null!=(t=null==i?void 0:i.unit)?t:"px"},"px"!==(null==i?void 0:i.unit)&&void 0!==(null==i?void 0:i.bleed)?{bleeds:T.ZP.convertBleedsToQuery(i.bleed)}:{})}).href},clickTemplate(e){if(this.$isTouchDevice()&&"7"===this.theme)return void P.Z.setModalInfo(`${this.$t("NN0808")}`,[],{msg:`${this.$t("NN0358")}`,class:"btn-blue-mid",action:()=>!1});const t=Q.Z.iAssetTemplate2Template(e,4);K.Z.checkProTemplate(t)&&G.Z.openOrGoto(this.templateUrl(e))},templateImgStyle(e){if(this._newTemplateShownMode){const t=e.width/e.height,i=t>=1,s=160;let n=i?s:s/t,o=i?s*t:s;return this.$isTouchDevice()&&(n*=2/3,o*=2/3),{height:`${n}px`,width:`${o}px`}}{let t="3"===this.theme?284:"7"===this.theme?320:160;this.$isTouchDevice()&&(t*=2/3);const i=e.width/e.height;return{height:`${t}px`,width:t*i+"px"}}},prevSize(e){const t=e.width/e.height;return t>1.7?"prev_4x":"prev_2x"},themeRouteInfo(e){if(this.$isTouchDevice()&&7===e.id)return"";{const t="px"!==e.unit?`&bleeds=${T.ZP.convertBleedsToQuery(e.bleed)}`:"";return`/editor?type=new-design-size&themeId=${e.id}&width=${e.width}&height=${e.height}&unit=${e.unit}${t}`}},openProductPageNotification(e){this.$isTouchDevice()&&7===e.id&&P.Z.setModalInfo(`${this.$t("NN0808")}`,[],{msg:`${this.$t("NN0358")}`,class:"btn-blue-mid",action:()=>!1})}})});const re=(0,B.Z)(ce,[["render",_],["__scopeId","data-v-7892a691"],["__file","ScrollList.vue"]]);var ae=re},67263:function(e,t,i){e.exports=i.p+"703b0459b40ce8a8.svg"},43378:function(e,t,i){e.exports=i.p+"1cf1ebbbc8f78417.svg"}}]);
//# sourceMappingURL=671.7569dc9d.js.map