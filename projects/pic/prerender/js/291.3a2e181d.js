"use strict";(self["webpackChunknueditor"]=self["webpackChunknueditor"]||[]).push([[291],{92291:function(e,t,l){l.r(t),l.d(t,{default:function(){return W}});var a=l(29651),r=l(819);const s={class:"template-waterfall__wrapper"},o={class:"template-waterfall"},n=["onClick","onMouseenter","onMouseleave"],i=["src"],c={key:3,class:"template-waterfall__column__template__theme"},p={key:4,class:"template-waterfall__column__template__multi"},u={key:0},d={key:2,class:"template-waterfall__scroll-space"};function m(e,t,l,m,h,g){const _=(0,a.up)("scrollable-template-preview"),y=(0,a.up)("pro-item"),v=(0,a.up)("svg-icon"),w=(0,a.up)("observer-sentinel");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.waterfallTemplates,((t,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"template-waterfall__column",key:l},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"template-waterfall__column__template",key:t.id,style:(0,r.j5)(e.templateStyles(t.aspect_ratio)),onClick:l=>e.handleClickWaterfall(t),onMouseenter:l=>e.handleMouseEnter(t.group_id),onMouseleave:l=>e.handleMouseLeave(t.group_id)},[e.checkMouseEntered(t.group_id,t.group_type)&&e.useScrollablePreview?((0,a.wg)(),(0,a.j4)(_,{key:0,contentIds:t.content_ids},null,8,["contentIds"])):((0,a.wg)(),(0,a.iD)("img",{key:1,class:"template-waterfall__column__template__img",src:t.url,loading:"lazy"},null,8,i)),1===t.plan?((0,a.wg)(),(0,a.j4)(y,{key:2})):(0,a.kq)("",!0),1!==t.group_type?((0,a.wg)(),(0,a.iD)("div",c,(0,r.zw)(e.getThemeTitle(t.theme_id)),1)):(0,a.kq)("",!0),t.content_ids.length>1?((0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(v,{iconName:"multiple-file",iconWidth:"24px",iconColor:"gray-7"})])):(0,a.kq)("",!0)],44,n)))),128))])))),128))]),e.isTemplateReady?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",u,[(0,a.Wm)(v,{iconName:"loading",iconWidth:"24px",iconColor:"gray-2"})])),e.isTemplateReady&&e.hasNextPage?((0,a.wg)(),(0,a.j4)(w,{key:1,onCallback:e.handleLoadMore},null,8,["onCallback"])):(0,a.kq)("",!0),e.useScrollSpace?((0,a.wg)(),(0,a.iD)("div",d)):(0,a.kq)("",!0)])}var h=l(51543),g=l(63788);const _=["src"];function y(e,t,l,s,o,n){return(0,a.wg)(),(0,a.iD)("div",{class:"scrollable-template-preview",ref:"box",onMousemove:t[0]||(t[0]=(...t)=>e.changeMouseX&&e.changeMouseX(...t))},[(0,a._)("div",{class:"scrollable-template-preview__images",ref:"container",style:(0,r.j5)(e.scrollStyles())},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.imageUrls,(e=>((0,a.wg)(),(0,a.iD)("img",{key:e,src:e},null,8,_)))),128))],4),(0,a._)("div",{class:"scrollable-template-preview__bar",style:(0,r.j5)(e.barStyles())},[(0,a._)("div",{class:"scrollable-template-preview__bar-progress",style:(0,r.j5)(e.progressStyles())},null,4)],4)],544)}var v=l(50543),w=l(8295);const f=5,b=2*f;var k=(0,a.aZ)({emits:[],props:{contentIds:{type:Array,required:!0}},computed:{typedContentIds(){return this.contentIds},imageUrls(){return this.typedContentIds.map((e=>w.Z.getPrevUrl(e)))},totalHeight(){return this.typedContentIds.reduce(((e,t)=>e+t.height),0)},effectiveHeight(){const e=this.typedContentIds.length;return this.totalHeight-this.typedContentIds[e-1].height}},data(){return{mouseX:0}},methods:{scrollStyles(){return{transform:`translateY(-${this.scaledHeight()*this.mouseX/100}px)`}},barStyles(){return{width:100-b+"%",left:`${f}%`}},progressStyles(){return{width:`${this.mouseX}%`}},scaledHeight(){const e=this.$refs.container;if(e){const t=e.getBoundingClientRect().height,l=t/this.totalHeight;return this.effectiveHeight*l}return 0},changeMouseX(e){const t=this.$refs.box,l=v.Z.getMouseRelPoint(e,t),a=t.getBoundingClientRect().width,r=a*(100-b)/100,s=l.x-a*f/100,o=s/r*100;this.mouseX=Math.max(Math.min(o,100),0)}}}),M=l(53372);const S=(0,M.Z)(k,[["render",y],["__scopeId","data-v-bbad2a7a"],["__file","ScrollableTemplatePreview.vue"]]);var I=S,T=l(38058),C=Object.defineProperty,D=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,q=(e,t,l)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,x=(e,t)=>{for(var l in t||(t={}))P.call(t,l)&&q(e,l,t[l]);if(D)for(var l of D(t))j.call(t,l)&&q(e,l,t[l]);return e},H=(0,a.aZ)({props:{waterfallTemplates:{type:Array,required:!0},isTemplateReady:{type:Boolean,required:!0},useScrollablePreview:{type:Boolean,default:!0},useScrollSpace:{type:Boolean,default:!1},themes:{type:Array,required:!0}},data(){return{mouseInTemplate:""}},components:{ScrollableTemplatePreview:I,ObserverSentinel:h.Z,ProItem:g.Z},computed:x({},(0,T.Se)("templates",{hasNextPage:"hasNextPage"})),methods:{templateStyles(e){return{paddingTop:100*e+"%"}},getThemeTitle(e){const t=this.themes.find((t=>t.id.toString()===e));return t?t.title:`${this.$t("NN0258")}`},handleLoadMore(){this.$emit("loadMore")},handleClickWaterfall(e){this.$emit("clickWaterfall",e)},handleMouseEnter(e){this.mouseInTemplate=e},handleMouseLeave(e){this.mouseInTemplate===e&&(this.mouseInTemplate="")},checkMouseEntered(e,t){return this.mouseInTemplate===e&&1===t}}});const $=(0,M.Z)(H,[["render",m],["__scopeId","data-v-a3059928"],["__file","TemplateWaterfall.vue"]]);var W=$}}]);
//# sourceMappingURL=291.3a2e181d.js.map