"use strict";(self["webpackChunknueditor"]=self["webpackChunknueditor"]||[]).push([[817],{45320:function(e,t,i){var s=i(29651),n=Object.defineProperty,o=(e,t,i)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,l=(e,t,i)=>(o(e,"symbol"!==typeof t?t+"":t,i),i);class r{constructor(){l(this,"showHint"),l(this,"timerId"),l(this,"currHint"),this.showHint=!1,this.timerId=-1,this.currHint="default hint"}openHint(e,t){this.showHint=!0,this.currHint=t,this.showHintUnderTarget(e)}closeHint(){this.showHint=!1}bind(e,t,i=300){e.addEventListener("mouseenter",(()=>{this.timerId=window.setTimeout((()=>{this.openHint(e,t)}),i)})),e.addEventListener("mouseleave",(()=>{this.closeHint(),clearTimeout(this.timerId)}))}unbind(e,t,i=300){e.removeEventListener("mouseenter",(()=>{this.timerId=window.setTimeout((()=>{this.openHint(e,t)}),i)})),e.removeEventListener("mouseleave",(()=>{clearTimeout(this.timerId)})),clearTimeout(this.timerId),this.closeHint()}showHintUnderTarget(e){(0,s.Y3)((()=>{const t=document.querySelector(".hint"),[i,s]=[t.offsetWidth,t.offsetHeight],[n,o]=[window.innerWidth||document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight],{left:l,bottom:r,width:a,height:d}=null==e?void 0:e.getBoundingClientRect();let c=0,h=0;const g=l,m=r;l+i>n&&(c=l+i-n),r+s>o&&(h=r+s-o),t.style.transform=`translate3d(${g-(i-a)/2-c}px, ${m-h+5}px,0)`}))}}t["Z"]=new r},29817:function(e,t,i){i.r(t),i.d(t,{default:function(){return hc}});var s=i(29651);const n={class:"my-design"};function o(e,t,i,o,l,r){const a=(0,s.up)("my-design-mobile"),d=(0,s.up)("my-design-pc");return(0,s.wg)(),(0,s.iD)("div",n,[e.isMobile>0?((0,s.wg)(),(0,s.j4)(a,{key:0,view:e.view},null,8,["view"])):(0,s.kq)("",!0),e.isMobile<0?((0,s.wg)(),(0,s.j4)(d,{key:1,view:e.view},null,8,["view"])):(0,s.kq)("",!0)])}var l=i(41463),r=i(819);const a=e=>((0,s.dD)("data-v-009736c5"),e=e(),(0,s.Cn)(),e),d={class:"my-design-pc"},c={class:"my-design-pc__content"},h={class:"my-design-pc__design-view"},g={key:0,class:"my-design-pc__multi"},m={class:"my-design-pc__multi__container"},u={class:"my-design-pc__multi__number"},p={class:"my-design-pc__multi__actions relative"},f=["src"],v={key:0,class:"my-design-pc__info__text"},_={key:0,class:"my-design-pc__message"},y={class:"my-design-pc__message__text"},w={key:0,class:"my-design-pc__message"},b={class:"my-design-pc__message__text"},D={key:0,class:"my-design-pc__message"},N={class:"my-design-pc__message__text"},F={key:0,class:"my-design-pc__message"},k={class:"my-design-pc__message__text"},M={class:"my-design-pc__change-folder__container scrollbar-gray-thin"},S={class:"my-design-pc__change-folder__header"},C={class:"my-design-pc__change-folder__title"},I=a((()=>(0,s._)("div",{class:"my-design-pc__change-folder__hr"},null,-1))),O={class:"my-design-pc__change-folder__folders"},P={class:"my-design-pc__change-folder__footer"},x={class:"my-design-pc__change-folder__buttons"},T={class:"delete-all-message__img"},E=["src"],$={class:"delete-all-message__text"},j={class:"delete-all-message__buttons"},L={class:"delete-folder-message__img"},Z=["src"],W={class:"delete-folder-message__text"},A={class:"first-line"},B={class:"delete-folder-message__buttons"},q={class:"delete-forever-message__img"},z=["src"],H={class:"delete-forever-message__text"},U={class:"delete-forever-message__description"},R={class:"delete-forever-message__buttons"},V={key:0,class:"dim-background"};function K(e,t,n,o,a,K){const G=(0,s.up)("nu-header"),Q=(0,s.up)("sidebar"),Y=(0,s.up)("i18n-t"),X=(0,s.up)("svg-icon"),J=(0,s.up)("structure-folder"),ee=(0,s.up)("nubtn"),te=(0,s.Q2)("header-border"),ie=(0,s.Q2)("click-outside");return(0,s.wg)(),(0,s.iD)("div",d,[(0,s.wy)((0,s.Wm)(G,null,null,512),[[te,!0]]),(0,s._)("div",c,[(0,s.Wm)(Q,{onDeleteItem:e.handleDeleteItem,onDeleteFolder:e.handleDeleteFolder,onDeleteAll:e.deleteAll,onMoveItem:e.handleMoveItem},null,8,["onDeleteItem","onDeleteFolder","onDeleteAll","onMoveItem"]),(0,s._)("section",h,[(0,s.Wm)(l.uT,{name:"slide-down-fade"},{default:(0,s.w5)((()=>[e.isMultiSelected?((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",m,[(0,s._)("div",u,[(0,s.Wm)(Y,{keypath:"NN0254",tag:"span"},{selectedNum:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.selectedNum),1)])),_:1})]),(0,s._)("div",p,["trash-design-view"!==e.mydesignView?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"my-design-pc__multi__icon",ref:"tgFav",onClick:t[0]||(t[0]=(...t)=>e.toggleAllFavorite&&e.toggleAllFavorite(...t))},[(0,s.Wm)(X,{iconName:"heart",iconWidth:"21px",iconColor:"gray-2"})],512)):(0,s.kq)("",!0),"favorite-design-view"!==e.mydesignView&&"trash-design-view"!==e.mydesignView?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"my-design-pc__multi__icon",ref:"mvFolder",onClick:t[1]||(t[1]=t=>e.isMoveToFolderPanelOpen=!0)},[(0,s.Wm)(X,{iconName:"folder",iconWidth:"21px",iconColor:"gray-2"})],512)):(0,s.kq)("",!0),"trash-design-view"!==e.mydesignView?((0,s.wg)(),(0,s.iD)("div",{key:2,class:"my-design-pc__multi__icon",ref:"delDesign",onMouseenter:t[2]||(t[2]=t=>e.handleFavDelMouseOver(!0)),onMouseleave:t[3]||(t[3]=t=>e.handleFavDelMouseOver(!1)),onClick:t[4]||(t[4]=(...t)=>e.deleteAll&&e.deleteAll(...t))},[(0,s.Wm)(X,{iconName:"trash",iconWidth:"21px",iconColor:"gray-2"})],544)):(0,s.kq)("",!0),(0,s.Wm)(l.uT,{name:"slide-fade-img"},{default:(0,s.w5)((()=>[e.isFavDelMouseOver?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"my-design-pc__info__arrow",src:i(64244)},null,8,f)):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(l.uT,{name:"slide-fade-text"},{default:(0,s.w5)((()=>[e.isFavDelMouseOver?((0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0243")),1)])):(0,s.kq)("",!0)])),_:1}),"trash-design-view"===e.mydesignView?((0,s.wg)(),(0,s.iD)("div",{key:3,class:"my-design-pc__multi__icon",ref:"recover",onClick:t[5]||(t[5]=(...t)=>e.recoverAll&&e.recoverAll(...t))},[(0,s.Wm)(X,{iconName:"reduction",iconWidth:"21px",iconColor:"gray-2"})],512)):(0,s.kq)("",!0),"trash-design-view"===e.mydesignView?((0,s.wg)(),(0,s.iD)("div",{key:4,class:"my-design-pc__multi__icon",ref:"delForever",onClick:t[6]||(t[6]=(...t)=>e.deleteAllForever&&e.deleteAllForever(...t))},[(0,s.Wm)(X,{iconName:"trash",iconWidth:"21px",iconColor:"gray-2"})],512)):(0,s.kq)("",!0)]),(0,s._)("div",{class:"my-design-pc__multi__close",onClick:t[7]||(t[7]=(...t)=>e.handleClearSelection&&e.handleClearSelection(...t))},[(0,s.Wm)(X,{iconName:"close-large",iconWidth:"11px",iconHeight:"13px",iconColor:"gray-2"})])])])):(0,s.kq)("",!0)])),_:1}),""!==e.currLocation?((0,s.wg)(),(0,s.j4)((0,s.LL)(e.mydesignView),{key:0,class:"design-view",onDeleteItem:e.handleDeleteItem,onClearSelection:e.handleClearSelection,onRecoverItem:e.handleRecoverItem,onDeleteFolder:e.handleDeleteFolder,onMoveItem:e.handleMoveItem,onDeleteForever:e.handleDeleteForever,onDeleteFolderForever:e.handleDeleteFolderForever,onMoveDesignToFolder:e.handleMoveDesignToFolder,onDownloadDesign:e.handleDownloadDesign},null,40,["onDeleteItem","onClearSelection","onRecoverItem","onDeleteFolder","onMoveItem","onDeleteForever","onDeleteFolderForever","onMoveDesignToFolder","onDownloadDesign"])):(0,s.kq)("",!0),(0,s._)("div",{class:"my-design-pc__message-stack",style:(0,r.j5)(e.stackStyles())},[(0,s.Wm)(l.uT,{name:"slide-fade"},{default:(0,s.w5)((()=>[e.isShowDeleteMessage?((0,s.wg)(),(0,s.iD)("div",_,[(0,s._)("div",{class:"my-design-pc__message__img",style:(0,r.j5)(e.messageImageStyles(e.deletedQueue[0]))},null,4),(0,s._)("div",y,[(0,s.Wm)(Y,{keypath:"NN0250",tag:"span"},{item:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.messageItemName(e.deletedQueue[0])),1)])),folder:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0189")),1)])),_:1})]),(0,s._)("div",{class:"my-design-pc__message__button",onClick:t[8]||(t[8]=(...t)=>e.recover&&e.recover(...t))},[(0,s._)("span",null,(0,r.zw)(e.$t("NN0119")),1)])])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(l.uT,{name:"slide-fade"},{default:(0,s.w5)((()=>[e.isShowRecoverMessage?((0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",b,[(0,s.Wm)(Y,{keypath:"NN0250",tag:"span"},{item:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.messageItemName(e.recoveredQueue[0])),1)])),folder:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.messageDestName(e.recoveredQueue[0])),1)])),_:1})])])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(l.uT,{name:"slide-fade"},{default:(0,s.w5)((()=>[e.isShowMoveMessage?((0,s.wg)(),(0,s.iD)("div",D,[(0,s._)("div",{class:"my-design-pc__message__img",style:(0,r.j5)(e.messageImageStyles(e.movedQueue[0]))},null,4),(0,s._)("div",N,[(0,s.Wm)(Y,{keypath:"NN0250",tag:"span"},{item:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.messageItemName(e.movedQueue[0])),1)])),folder:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.messageDestName(e.movedQueue[0])),1)])),_:1})])])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(l.uT,{name:"slide-fade"},{default:(0,s.w5)((()=>[e.isErrorShowing?((0,s.wg)(),(0,s.iD)("div",F,[(0,s._)("div",k,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0242")),1)])])):(0,s.kq)("",!0)])),_:1})],4),e.isMoveToFolderPanelOpen?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,r.C_)(["my-design-pc__change-folder",{centered:e.isMovingSingleToFolder}])},[(0,s._)("div",M,[(0,s._)("div",S,[(0,s._)("div",C,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0206")),1)]),I]),(0,s._)("div",O,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.realFolders,(e=>((0,s.wg)(),(0,s.j4)(J,{key:e.id,folder:e,parents:[],level:0},null,8,["folder"])))),128))]),(0,s._)("div",P,[(0,s._)("div",x,[(0,s.Wm)(ee,{theme:"secondary",onClick:t[9]||(t[9]=t=>e.isMoveToFolderPanelOpen=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0203")),1)])),_:1}),(0,s.Wm)(ee,{disabled:""===e.moveToFolderSelectInfo,onClick:e.handleMoveToFolder},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0206")),1)])),_:1},8,["disabled","onClick"])])])])],2)),[[ie,()=>{e.isMoveToFolderPanelOpen=!1}]]):(0,s.kq)("",!0)])]),(0,s.Wm)(l.uT,{name:"scale-fade"},{default:(0,s.w5)((()=>["delete-all"===e.confirmMessage?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"dim-background",onClick:t[12]||(t[12]=(...t)=>e.closeConfirmMessage&&e.closeConfirmMessage(...t))},[(0,s._)("div",{class:"delete-all-message",onClick:t[11]||(t[11]=(0,l.iM)((()=>{}),["stop"]))},[(0,s._)("div",T,[(0,s._)("img",{src:i(32876),width:"55",height:"57"},null,8,E)]),(0,s._)("div",$,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0244")),1)]),(0,s._)("div",j,[(0,s.Wm)(ee,{theme:"secondary",onClick:(0,l.iM)(e.closeConfirmMessage,["stop"])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0203")),1)])),_:1},8,["onClick"]),(0,s.Wm)(ee,{theme:"danger",onClick:t[10]||(t[10]=(0,l.iM)((t=>e.confirmAction(e.deleteAllConfirmed)),["stop"]))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0034")),1)])),_:1})])])])):"delete-folder"===e.confirmMessage?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"dim-background",onClick:t[15]||(t[15]=(...t)=>e.closeConfirmMessage&&e.closeConfirmMessage(...t))},[(0,s._)("div",{class:"delete-folder-message",onClick:t[14]||(t[14]=(0,l.iM)((()=>{}),["stop"]))},[(0,s._)("div",L,[(0,s._)("img",{src:i(32876),width:"76",height:"79"},null,8,Z)]),(0,s._)("div",null,[(0,s._)("div",W,[(0,s._)("span",A,(0,r.zw)(e.$t("NN0245")),1),(0,s._)("span",null,(0,r.zw)(e.$t("NN0246")),1)]),(0,s._)("div",B,[(0,s.Wm)(ee,{theme:"secondary",onClick:(0,l.iM)(e.closeConfirmMessage,["stop"])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0203")),1)])),_:1},8,["onClick"]),(0,s.Wm)(ee,{theme:"danger",onClick:t[13]||(t[13]=(0,l.iM)((t=>e.confirmAction((()=>e.deleteFolder(e.pathedFolderBuffer)))),["stop"]))},{default:(0,s.w5)((()=>[(0,s._)("span",null,(0,r.zw)(e.$t("NN0034")),1)])),_:1})])])])])):"delete-forever"===e.confirmMessage?((0,s.wg)(),(0,s.iD)("div",{key:2,class:"dim-background",onClick:t[18]||(t[18]=(...t)=>e.closeConfirmMessage&&e.closeConfirmMessage(...t))},[(0,s._)("div",{class:"delete-forever-message",onClick:t[17]||(t[17]=(0,l.iM)((()=>{}),["stop"]))},[(0,s._)("div",q,[(0,s._)("img",{src:i(32876),width:"55",height:"57"},null,8,z)]),(0,s._)("div",H,[(0,s._)("span",null,(0,r.zw)(e.$tc("NN0202",e.isMultiSelected?2:1)),1)]),(0,s._)("div",U,[(0,s._)("span",null,(0,r.zw)(e.$tc("NN0201",e.isMultiSelected?2:1)),1)]),(0,s._)("div",R,[(0,s.Wm)(ee,{theme:"secondary",onClick:(0,l.iM)(e.closeConfirmMessage,["stop"])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0203")),1)])),_:1},8,["onClick"]),(0,s.Wm)(ee,{theme:"danger",onClick:t[16]||(t[16]=(0,l.iM)((t=>e.confirmAction(e.deleteForeverConfirmed)),["stop"]))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0200")),1)])),_:1})])])])):(0,s.kq)("",!0)])),_:1}),e.isMoveToFolderPanelOpen&&e.isMovingSingleToFolder?((0,s.wg)(),(0,s.iD)("div",V)):(0,s.kq)("",!0)])}const G=e=>((0,s.dD)("data-v-16822e30"),e=e(),(0,s.Cn)(),e),Q={class:"all-design-view"},Y={class:"all-design-view__toolbar"},X={class:"all-design-view__folder-name"},J=G((()=>(0,s._)("div",{class:"horizontal-rule"},null,-1)));function ee(e,t,i,n,o,l){const a=(0,s.up)("disk-warning"),d=(0,s.up)("btn-new-design"),c=(0,s.up)("design-gallery");return(0,s.wg)(),(0,s.iD)("div",Q,[(0,s.Wm)(a,{class:"warning",size:"small"}),(0,s._)("div",Y,[(0,s._)("div",X,(0,r.zw)(e.$t("NN0187")),1),(0,s.Wm)(d)]),J,(0,s.Wm)(c,{noHeader:!0,menuItems:e.menuItems,allDesigns:e.allDesigns,selectedNum:e.selectedNum,onMenuAction:e.handleDesignMenuAction,onLoadMore:e.handleLoadMore},null,8,["menuItems","allDesigns","selectedNum","onMenuAction","onLoadMore"])])}const te={key:0,class:"design-gallery"},ie={key:0,class:"design-gallery__header"},se={class:"design-gallery__title"},ne={key:1,class:"design-gallery__designs"},oe=["onClick"],le={class:"design-menu-item__icon"},re={class:"design-menu-item__text"},ae={key:0,class:"design-menu-item__right"},de={key:2,class:"design-gallery__loading"};function ce(e,t,i,n,o,l){const a=(0,s.up)("svg-icon"),d=(0,s.up)("design-item"),c=(0,s.up)("observer-sentinel");return e.allDesigns.length>0||e.isDesignsLoading?((0,s.wg)(),(0,s.iD)("div",te,[!e.noHeader&&e.allDesigns.length>0?((0,s.wg)(),(0,s.iD)("div",ie,[(0,s._)("div",{class:"design-gallery__expand-icon-container",onClick:t[0]||(t[0]=(...t)=>e.toggleExpansion&&e.toggleExpansion(...t))},[(0,s.Wm)(a,{style:(0,r.j5)(e.expansionIconStyles()),iconName:"caret-down",iconWidth:"10px",iconHeight:"5px",iconColor:"gray-2"},null,8,["style"])]),(0,s._)("div",se,[(0,s._)("span",null,(0,r.zw)(e.$tc("NN0252",2)),1)])])):(0,s.kq)("",!0),e.isExpanded?((0,s.wg)(),(0,s.iD)("div",ne,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.allDesigns,((t,i)=>((0,s.wg)(),(0,s.j4)(d,{key:t.asset_index,index:i,config:t,favorable:!e.limitFunctions,undraggable:e.limitFunctions,nameIneditable:e.limitFunctions,unenterable:e.limitFunctions,isSelected:e.checkSelected(t.asset_index.toString()),isAnySelected:e.isAnySelected,isMultiSelected:e.isMultiSelected,menuItemNum:e.menuItemSlots.length,onLike:i=>e.toggleFavorite(t),onSelect:i=>e.selectDesign(t),onDeselect:i=>e.deselectDesign(t),onMetaSelect:t=>e.metaSelectDesign(i)},(0,s.Nv)({_:2},[(0,s.Ko)(e.menuItemSlots,(i=>({name:i.name,fn:(0,s.w5)((()=>[(0,s._)("div",{class:"design-menu-item",onClick:s=>e.handleDesignMenuAction(i.icon,t)},[(0,s._)("div",le,[(0,s.Wm)(a,{iconName:i.icon,iconWidth:"10px",iconColor:"gray-2"},null,8,["iconName"])]),(0,s._)("div",re,[(0,s._)("span",null,(0,r.zw)(i.text),1)]),i.extendable?((0,s.wg)(),(0,s.iD)("div",ae,[(0,s.Wm)(a,{iconName:"chevron-right",iconWidth:"10px",iconColor:"gray-2"})])):(0,s.kq)("",!0)],8,oe)]))})))]),1032,["index","config","favorable","undraggable","nameIneditable","unenterable","isSelected","isAnySelected","isMultiSelected","menuItemNum","onLike","onSelect","onDeselect","onMetaSelect"])))),128))])):(0,s.kq)("",!0),e.isExpanded&&e.isDesignsLoading?((0,s.wg)(),(0,s.iD)("div",de,[(0,s.Wm)(a,{iconName:"loading",iconWidth:"50px",iconColor:"gray-3"})])):(0,s.kq)("",!0),!e.isDesignsLoading&&e.designsPageIndex>=0?((0,s.wg)(),(0,s.j4)(c,{key:3,onCallback:e.handleLoadMore},null,8,["onCallback"])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)}var he=i(51543);const ge={class:"design-item"},me=["draggable"],ue={class:"design-item__img-container"},pe=["src"],fe=["src"],ve={class:"design-item__controller"},_e={key:3,class:"design-item__menu"},ye={key:5,class:"design-item__index"},we={key:0,class:"design-item__name__container design-item__name__container-editor"},be={class:"pen-container"},De={key:1,class:"design-item__name__container"},Ne=["title"],Fe={class:"design-item__size"},ke={class:"relative"},Me=["src"];function Se(e,t,i,n,o,a){const d=(0,s.up)("image-carousel"),c=(0,s.up)("svg-icon"),h=(0,s.Q2)("click-outside");return(0,s.wg)(),(0,s.iD)("div",ge,[(0,s._)("div",{class:"design-item__block pointer",style:(0,r.j5)(e.blockStyles()),draggable:!e.undraggable&&!e.isTempDesign,onDragstart:t[5]||(t[5]=(...t)=>e.handleDragStart&&e.handleDragStart(...t)),onDrag:t[6]||(t[6]=(...t)=>e.handleDragging&&e.handleDragging(...t)),onDragend:t[7]||(t[7]=(...t)=>e.handleDragEnd&&e.handleDragEnd(...t)),onMouseenter:t[8]||(t[8]=(...t)=>e.handleMouseEnter&&e.handleMouseEnter(...t)),onMouseleave:t[9]||(t[9]=(...t)=>e.handleMouseLeave&&e.handleMouseLeave(...t))},[(0,s._)("div",ue,[e.showCarousel?((0,s.wg)(),(0,s.j4)(d,{key:0,imgs:e.pageImages,onChange:e.handleCarouselIdx},{default:(0,s.w5)((({url:t})=>[(0,s._)("img",{class:"design-item__thumbnail",draggable:"false",style:(0,r.j5)(e.imageStyles()),src:t},null,12,pe)])),_:1},8,["imgs","onChange"])):(0,s.kq)("",!0),!e.showCarousel&&e.previewCheckReady?((0,s.wg)(),(0,s.iD)("img",{key:1,class:"design-item__thumbnail",ref:"thumbnail",draggable:"false",src:e.appliedUrl},null,8,fe)):(0,s.kq)("",!0)]),(0,s._)("div",ve,[(0,s._)("div",{class:"design-item__controller-content",onClick:t[4]||(t[4]=(0,l.iM)(((...t)=>e.handleClick&&e.handleClick(...t)),["self"]))},[e.isSelected?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"design-item__checkbox-checked",onClick:t[0]||(t[0]=(0,l.iM)(((...t)=>e.emitDeselect&&e.emitDeselect(...t)),["stop"]))},[(0,s.Wm)(c,{iconName:"done",iconWidth:"20px",iconHeight:"20px",iconColor:"white"})])):(0,s.kq)("",!0),e.isSelected||!e.isMouseOver&&!e.isAnySelected?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:1,class:"design-item__checkbox",onClick:t[1]||(t[1]=(0,l.iM)(((...t)=>e.emitSelect&&e.emitSelect(...t)),["stop"]))})),e.isMouseOver&&!e.isMultiSelected?((0,s.wg)(),(0,s.iD)("div",{key:2,class:"design-item__more",onClick:t[2]||(t[2]=(0,l.iM)((t=>e.toggleMenu()),["stop"]))},[(0,s.Wm)(c,{iconName:"more_vertical",iconWidth:"24px",iconColor:"gray-2"})])):(0,s.kq)("",!0),e.menuItems.length>0&&e.isMenuOpen&&e.isMouseOver?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",_e,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.menuItems,((t,i)=>(0,s.WI)(e.$slots,`i${i}`,{},(()=>[(0,s.Uk)((0,r.zw)(i),1)]),!0))),256))])),[[h,e.closeMenu]]):(0,s.kq)("",!0),e.favorable&&!e.isMultiSelected?((0,s.wg)(),(0,s.iD)("div",{key:4,class:"design-item__favorite",onClick:t[3]||(t[3]=(0,l.iM)(((...t)=>e.emitLike&&e.emitLike(...t)),["stop"]))},[e.isMouseOver&&!e.config.favorite?((0,s.wg)(),(0,s.j4)(c,{key:0,iconName:"favorites",iconWidth:"20px",iconColor:"white"})):(0,s.kq)("",!0),e.isMouseOver&&e.config.favorite?((0,s.wg)(),(0,s.j4)(c,{key:1,iconName:"favorites-fill",iconWidth:"20px",iconColor:"white"})):(0,s.kq)("",!0),!e.isMouseOver&&e.config.favorite?((0,s.wg)(),(0,s.j4)(c,{key:2,iconName:"favorites-fill",iconWidth:"20px",iconColor:"gray-4"})):(0,s.kq)("",!0)])):(0,s.kq)("",!0),e.isMouseOver?((0,s.wg)(),(0,s.iD)("span",ye,(0,r.zw)(e.carouselIdx+1)+"/"+(0,r.zw)(e.config.pageNum),1)):(0,s.kq)("",!0)])])],44,me),(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"design-item__name",onMouseenter:t[13]||(t[13]=(...t)=>e.handleNameMouseEnter&&e.handleNameMouseEnter(...t)),onMouseleave:t[14]||(t[14]=(...t)=>e.handleNameMouseLeave&&e.handleNameMouseLeave(...t)),onClick:t[15]||(t[15]=(...t)=>e.handleNameClick&&e.handleNameClick(...t))},[e.isNameEditing?((0,s.wg)(),(0,s.iD)("div",we,[(0,s.wy)((0,s._)("input",{ref:"name","onUpdate:modelValue":t[10]||(t[10]=t=>e.editableName=t),onChange:t[11]||(t[11]=(...t)=>e.handleNameEditEnd&&e.handleNameEditEnd(...t)),onKeyup:t[12]||(t[12]=(...t)=>e.checkNameEnter&&e.checkNameEnter(...t))},null,544),[[l.nr,e.editableName]]),(0,s._)("div",be,[(0,s.Wm)(c,{iconName:"pen",iconWidth:"13px",iconColor:"gray-3"})])])):((0,s.wg)(),(0,s.iD)("div",De,[e.isNameMouseOver?((0,s.wg)(),(0,s.j4)(c,{key:0,iconName:"pen",iconWidth:"13px",iconColor:"gray-3",style:{color:"transparent"}})):(0,s.kq)("",!0),(0,s._)("span",{title:e.config.name},(0,r.zw)(e.config.name),9,Ne),e.isNameMouseOver?((0,s.wg)(),(0,s.j4)(c,{key:1,iconName:"pen",iconWidth:"13px",iconColor:"gray-3"})):(0,s.kq)("",!0)]))],32)),[[h,e.handleNameEditEnd]]),(0,s._)("div",Fe,[(0,s._)("span",null,(0,r.zw)(`${e.sizeToShow.width} x ${e.sizeToShow.height} ${e.sizeToShow.unit}`),1)]),(0,s._)("div",{class:"dragged-thumbnail",style:(0,r.j5)(e.draggedImageContainerStyles())},[(0,s._)("div",ke,[(0,s._)("img",{src:e.appliedUrl,style:(0,r.j5)(e.draggedImageStyles())},null,12,Me),e.isMultiSelected&&e.isSelected?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"dragged-thumbnail__stack",style:(0,r.j5)(e.draggedImageStackStyles())},null,4)):(0,s.kq)("",!0)])],4)])}var Ce=i(83608),Ie=i(20951),Oe=i(3162),Pe=i(98824),xe=i(46921),Te=i(10298),Ee=i.n(Te),$e=i(60410),je=i(38058),Le=Object.defineProperty,Ze=Object.defineProperties,We=Object.getOwnPropertyDescriptors,Ae=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,ze=(e,t,i)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,He=(e,t)=>{for(var i in t||(t={}))Be.call(t,i)&&ze(e,i,t[i]);if(Ae)for(var i of Ae(t))qe.call(t,i)&&ze(e,i,t[i]);return e},Ue=(e,t)=>Ze(e,We(t)),Re=(0,s.aZ)({components:{ImageCarousel:Ce.Z},props:{config:{type:Object,required:!0},menuItemNum:{type:Number,required:!0},favorable:{type:Boolean,required:!0},undraggable:{type:Boolean,required:!0},nameIneditable:{type:Boolean,required:!0},unenterable:{type:Boolean,required:!0},isAnySelected:{type:Boolean,required:!0},isSelected:{type:Boolean,required:!0},isMultiSelected:{type:Boolean,required:!0}},emits:["metaSelect","deselect","select","like","metaSelect"],data(){return{isDragged:!1,isMouseOver:!1,isNameMouseOver:!1,isNameEditing:!1,isMenuOpen:!1,editableName:"",draggedImageCoordinate:{x:0,y:0},imgWidth:150,imgHeight:150,previewCheckReady:!1,previewPlaceholder:i(67263),showCarousel:!1,carouselIdx:0,waitTimer:0,renderedWidth:150,renderedHeight:150,pageImages:[]}},directives:{clickOutside:Ee().directive},created(){this.checkImageSize()},watch:{"config.asset_index":{handler:function(){this.$nextTick((()=>{this.isDragged=!1,this.checkImageSize()}))}}},computed:Ue(He({},(0,je.Se)("design",{folders:"getFolders"})),{menuItems(){var e;return Array(null!=(e=this.menuItemNum)?e:0)},configPreview(){return Ie.ZP.getDesignPreview(this.config.id,2,this.config.ver,this.config.signedUrl)},appliedUrl(){return""!==this.config.thumbnail?this.config.thumbnail:this.previewPlaceholder},isTempDesign(){var e;return(null!=(e=this.config.id)?e:"").endsWith("_new")},sizeToShow(){var e;const t="px"===this.config.unit?0:xe.cB;return{width:(0,$e.round)(this.config.width,t),height:(0,$e.round)(this.config.height,t),unit:null!=(e=this.config.unit)?e:"px"}}}),methods:Ue(He({},(0,je.OI)("design",{setDraggingDesign:"SET_draggingDesign",setDesignThumbnail:"UPDATE_setDesignThumbnail"})),{blockStyles(){return this.isMouseOver||this.isSelected?{"background-color":"#474a5780"}:{}},imageStyles(){return{width:`${this.renderedWidth}px`,height:`${this.renderedHeight}px`}},draggedImageContainerStyles(){return this.isDragged?{left:`${this.draggedImageCoordinate.x}px`,top:`${this.draggedImageCoordinate.y}px`,display:"block"}:{}},draggedImageStyles(){return this.isDragged&&this.config.thumbnail===this.previewPlaceholder?{width:"300px",height:"300px"}:{}},draggedImageStackStyles(){return this.isDragged?{width:`${this.imgWidth}px`,height:`${this.imgHeight}px`}:{}},handleDragStart(e){const t=e.target;t.style.opacity="0",this.setDraggingDesign(this.config),e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",document.addEventListener("dragover",this.preventDefaultDragOver,!1))},handleDragging(e){this.isDragged=!0;const t=e.target;t.style.opacity="1",this.draggedImageCoordinate={x:e.pageX,y:e.pageY}},handleDragEnd(){this.isDragged=!1,this.setDraggingDesign(void 0),document.removeEventListener("dragover",this.preventDefaultDragOver,!1)},preventDefaultDragOver(e){e.preventDefault()},handleMouseEnter(){if(this.isTempDesign)return;const e=this.$refs.thumbnail;e&&(this.isMouseOver=!0,1!==this.config.pageNum&&(this.waitTimer=window.setTimeout((()=>{this.isMouseOver&&(this.showCarousel=!0,this.renderedWidth=e.width,this.renderedHeight=e.height,this.config.polling&&this.multiPollingStep())}),100)))},handleMouseLeave(){this.isMouseOver=!1,this.isMenuOpen=!1,this.showCarousel=!1,window.clearTimeout(this.waitTimer)},handleNameMouseEnter(){this.nameIneditable||(this.isNameMouseOver=!0)},handleNameMouseLeave(){this.nameIneditable||(this.isNameMouseOver=!1)},handleNameClick(){this.nameIneditable||(this.editableName=this.config.name,this.isNameEditing=!0,this.$nextTick((()=>{const e=this.$refs.name;e.focus()})))},handleNameEditEnd(){this.isNameEditing=!1,this.isNameMouseOver=!1,""!==this.editableName&&this.editableName!==this.config.name&&Ie.ZP.setDesignName(this.config,this.editableName)},handleClick(e){if(this.isAnySelected)return e.shiftKey?void this.$emit("metaSelect"):void this.$emit(this.isSelected?"deselect":"select");this.unenterable||this.isTempDesign||(this.$isTouchDevice()&&1===this.config.group_type?Pe.Z.setModalInfo(`${this.$t("NN0808")}`,[],{msg:`${this.$t("NN0358")}`,class:"btn-blue-mid",action:()=>!1}):Ie.ZP.setDesign(this.config))},handleCarouselIdx(e){this.carouselIdx=e},checkNameEnter(e){"Enter"===e.key&&this.editableName===this.config.name&&this.handleNameEditEnd()},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},closeMenu(){this.isMenuOpen=!1},emitLike(){this.$emit("like")},emitSelect(e){e.shiftKey?this.$emit("metaSelect"):this.$emit("select")},emitDeselect(e){e.shiftKey?this.$emit("metaSelect"):this.$emit("deselect")},checkImageSize(){if(this.previewCheckReady=!1,this.config.polling)this.pageImages=Array(this.config.pageNum).fill(this.previewPlaceholder),this.previewCheckReady=!0,this.setDesignThumbnail({asset_index:this.config.asset_index,thumbnail:this.previewPlaceholder}),this.pollingStep();else{if(this.isTempDesign)return;this.pageImages=Ie.ZP.getDesignPreviews(this.config.pageNum,this.config.id,2,this.config.ver,this.config.signedUrl),Oe.Z.getImageSize(this.configPreview,this.imgWidth,this.imgHeight,!1).then((e=>{const{width:t,height:i,exists:s}=e;this.imgWidth=t,this.imgHeight=i,this.previewCheckReady=!0,this.setDesignThumbnail({asset_index:this.config.asset_index,thumbnail:s?this.configPreview:this.previewPlaceholder})}))}},pollingStep(e=0){const t=e>14?2e3:1e3;this.isTempDesign||Oe.Z.getImageSize(Ie.ZP.getDesignPreview(this.config.id,2,void 0,this.config.signedUrl),this.imgWidth,this.imgHeight,!1).then((i=>{const{width:s,height:n,exists:o}=i;this.imgWidth=s,this.imgHeight=n,o?this.setDesignThumbnail({asset_index:this.config.asset_index,thumbnail:this.configPreview}):e<35&&setTimeout((()=>{this.pollingStep(e+1)}),t)}))},multiPollingStep(){for(let e=0;e<this.config.pageNum;e++)this.pagePollingStep(e)},pagePollingStep(e,t=0){if(this.pageImages[e]!==this.previewPlaceholder)return;if(this.isTempDesign)return;const i=t>14?2e3:1e3;Oe.Z.getImageSize(Ie.ZP.getDesignPreview(this.config.id,2,void 0,this.config.signedUrl,e),0,0,!1).then((s=>{s.exists?this.pageImages[e]=Ie.ZP.getDesignPreview(this.config.id,2,this.config.ver,this.config.signedUrl,e):t<35&&setTimeout((()=>{this.pagePollingStep(e,t+1)}),i)}))}})}),Ve=i(53372);const Ke=(0,Ve.Z)(Re,[["render",Se],["__scopeId","data-v-1b2ae96a"],["__file","DesignItem.vue"]]);var Ge=Ke,Qe=Object.defineProperty,Ye=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,it=(e,t,i)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,st=(e,t)=>{for(var i in t||(t={}))et.call(t,i)&&it(e,i,t[i]);if(Je)for(var i of Je(t))tt.call(t,i)&&it(e,i,t[i]);return e},nt=(e,t)=>Ye(e,Xe(t)),ot=(0,s.aZ)({components:{DesignItem:Ge,ObserverSentinel:he.Z},data(){return{isExpanded:!0}},props:{menuItems:{type:Array,required:!0},allDesigns:{type:Array,required:!0},selectedNum:{type:Number,required:!0},limitFunctions:{type:Boolean,default:!1},useDelete:{type:Boolean,default:!1},noHeader:{type:Boolean,default:!1}},emits:["menuAction","loadMore"],computed:nt(st({},(0,je.Se)("design",{favoriteDesigns:"getFavoriteDesigns",selectedDesigns:"getSelectedDesigns",isDesignsLoading:"getIsDesignsLoading",designsPageIndex:"getDesignsPageIndex"})),{menuItemSlots(){return this.menuItems.map(((e,t)=>st({name:`i${t}`},e)))},isAnySelected(){return this.selectedNum>0},isMultiSelected(){return this.selectedNum>1}}),methods:nt(st({},(0,je.OI)("design",{addToSelection:"UPDATE_addToSelection",removeFromSelection:"UPDATE_removeFromSelection",addToFavorite:"UPDATE_addToFavorite",removeFromFavorite:"UPDATE_removeFromFavorite",metaSelect:"UPDATE_metaSelect"})),{checkSelected(e){return!!this.selectedDesigns[e]},expansionIconStyles(){return this.isExpanded?{}:{transform:"rotate(-90deg)"}},toggleExpansion(){this.isExpanded=!this.isExpanded},handleDesignMenuAction(e,t){this.useDelete&&"trash"===e&&(e="delete"),Ie.ZP.dispatchDesignMenuAction(e,t,(e=>{e&&(0,Ie.T$)().includes(e.event)&&this.$emit("menuAction",e)}))},handleLoadMore(){this.$emit("loadMore")},toggleFavorite(e){e.favorite?Ie.ZP.removeFromFavorite(e):Ie.ZP.addToFavorite(e)},selectDesign(e){this.addToSelection(e)},deselectDesign(e){this.removeFromSelection(e)},metaSelectDesign(e){this.metaSelect({designs:this.allDesigns,index:e})}})});const lt=(0,Ve.Z)(ot,[["render",ce],["__scopeId","data-v-1fb6f92c"],["__file","DesignGallery.vue"]]);var rt=lt,at=i(9897),dt=i(97738),ct=Object.defineProperty,ht=Object.defineProperties,gt=Object.getOwnPropertyDescriptors,mt=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,ft=(e,t,i)=>t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,vt=(e,t)=>{for(var i in t||(t={}))ut.call(t,i)&&ft(e,i,t[i]);if(mt)for(var i of mt(t))pt.call(t,i)&&ft(e,i,t[i]);return e},_t=(e,t)=>ht(e,gt(t)),yt=(0,s.aZ)({emits:["clearSelection",...(0,Ie.T$)()],components:{DesignGallery:rt,DiskWarning:dt.Z,BtnNewDesign:at.Z},mounted(){Ie.ZP.fetchDesigns(this.fetchAllDesigns)},data(){return{menuItems:Ie.ZP.makeNormalMenuItems()}},watch:{allDesigns(){this.$emit("clearSelection")}},computed:_t(vt({},(0,je.Se)("design",{selectedDesigns:"getSelectedDesigns",allDesigns:"getAllDesigns"})),{selectedNum(){return Object.keys(this.selectedDesigns).length}}),methods:_t(vt({},(0,je.nv)("design",{fetchAllDesigns:"fetchAllDesigns",fetchMoreAllDesigns:"fetchMoreAllDesigns"})),{handleDesignMenuAction(e){const{event:t,payload:i}=e;this.$emit(t,i)},handleLoadMore(){Ie.ZP.fetchDesigns(this.fetchMoreAllDesigns,!1)}})});const wt=(0,Ve.Z)(yt,[["render",ee],["__scopeId","data-v-16822e30"],["__file","AllDesignView.vue"]]);var bt=wt;const Dt=e=>((0,s.dD)("data-v-fc9e9cea"),e=e(),(0,s.Cn)(),e),Nt={class:"favorite-design-view"},Ft={class:"favorite-design-view__folder-name"},kt=Dt((()=>(0,s._)("div",{class:"horizontal-rule"},null,-1)));function Mt(e,t,i,n,o,l){const a=(0,s.up)("design-gallery");return(0,s.wg)(),(0,s.iD)("div",Nt,[(0,s._)("div",Ft,(0,r.zw)(e.$t("NN0188")),1),kt,(0,s.Wm)(a,{noHeader:!0,menuItems:e.menuItems,allDesigns:e.allDesigns,selectedNum:e.selectedNum,onMenuAction:e.handleDesignMenuAction,onLoadMore:e.handleLoadMore},null,8,["menuItems","allDesigns","selectedNum","onMenuAction","onLoadMore"])])}var St=Object.defineProperty,Ct=Object.defineProperties,It=Object.getOwnPropertyDescriptors,Ot=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable,Tt=(e,t,i)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Et=(e,t)=>{for(var i in t||(t={}))Pt.call(t,i)&&Tt(e,i,t[i]);if(Ot)for(var i of Ot(t))xt.call(t,i)&&Tt(e,i,t[i]);return e},$t=(e,t)=>Ct(e,It(t)),jt=(0,s.aZ)({emits:["clearSelection",...(0,Ie.T$)()],components:{DesignGallery:rt},mounted(){Ie.ZP.fetchDesigns(this.fetchFavoriteDesigns)},data(){return{menuItems:Ie.ZP.makeFavoriteMenuItems()}},watch:{allDesigns(){this.$emit("clearSelection")}},computed:$t(Et({},(0,je.Se)("design",{selectedDesigns:"getSelectedDesigns",allDesigns:"getAllDesigns"})),{selectedNum(){return Object.keys(this.selectedDesigns).length}}),methods:$t(Et({},(0,je.nv)("design",{fetchFavoriteDesigns:"fetchFavoriteDesigns",fetchMoreFavoriteDesigns:"fetchMoreFavoriteDesigns"})),{handleDesignMenuAction(e){const{event:t,payload:i}=e;this.$emit(t,i)},handleLoadMore(){Ie.ZP.fetchDesigns(this.fetchMoreFavoriteDesigns,!1)}})});const Lt=(0,Ve.Z)(jt,[["render",Mt],["__scopeId","data-v-fc9e9cea"],["__file","FavoriteDesignView.vue"]]);var Zt=Lt;const Wt=e=>((0,s.dD)("data-v-24d73eec"),e=e(),(0,s.Cn)(),e),At={class:"folder-design-view"},Bt={class:"folder-design-view__folder-name"},qt={key:0,class:"input-container"},zt={class:"pen-container"},Ht=["title"],Ut={key:0,class:"folder-design-view__folder-name-hint-text"},Rt={class:"folder-design-view__toolbar"},Vt={class:"folder-design-view__path"},Kt=["onClick"],Gt=Wt((()=>(0,s._)("span",{class:"folder-design-view__path__text"},(0,r.zw)(" > "),-1))),Qt=Wt((()=>(0,s._)("span",{class:"folder-design-view__path__text"},(0,r.zw)(" "),-1))),Yt=["title"],Xt={class:"folder-design-view__actions"},Jt={class:"folder-design-view__more__icon",ref:"more"},ei={class:"folder-design-view__more__menu__title"},ti=["title"],ii={class:"folder-design-view__more__menu__text"},si=Wt((()=>(0,s._)("div",{class:"folder-design-view__more__menu__divider"},null,-1))),ni={class:"folder-design-view__more__menu__actions"},oi={class:"more-menu-icon"},li={class:"more-menu-text"},ri={class:"more-menu-icon"},ai={class:"more-menu-text"},di={class:"header-sort"},ci=["onClick"],hi={class:"sort-menu-icon"},gi={class:"sort-menu-text"},mi={key:0,class:"sort-menu-right"},ui=Wt((()=>(0,s._)("div",{class:"horizontal-rule"},null,-1))),pi={key:0,class:"folder-design-view__empty"},fi=["src"],vi={class:"folder-design-view__empty__text"};function _i(e,t,n,o,a,d){const c=(0,s.up)("svg-icon"),h=(0,s.up)("btn-new-design"),g=(0,s.up)("folder-gallery"),m=(0,s.up)("design-gallery"),u=(0,s.Q2)("click-outside");return(0,s.wg)(),(0,s.iD)("div",At,[(0,s._)("div",Bt,[(0,s._)("span",null,[e.isFolderNameEditing?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",qt,[(0,s.wy)((0,s._)("input",{ref:"folderName","onUpdate:modelValue":t[0]||(t[0]=t=>e.editableFolderName=t),onChange:t[1]||(t[1]=(...t)=>e.handleFolderNameEditEnd&&e.handleFolderNameEditEnd(...t)),onKeyup:t[2]||(t[2]=(...t)=>e.checkFolderNameEnter&&e.checkFolderNameEnter(...t))},null,544),[[l.nr,e.editableFolderName]]),(0,s._)("div",zt,[(0,s.Wm)(c,{iconName:"pen",iconWidth:"20px",iconColor:"gray-3"})])])),[[u,e.handleFolderNameEditEnd]]):((0,s.wg)(),(0,s.iD)("button",{key:1,onMouseenter:t[3]||(t[3]=(...t)=>e.handleFolderNameMouseEnter&&e.handleFolderNameMouseEnter(...t)),onMouseleave:t[4]||(t[4]=(...t)=>e.handleFolderNameMouseLeave&&e.handleFolderNameMouseLeave(...t)),onClick:t[5]||(t[5]=(...t)=>e.handleFolderNameClick&&e.handleFolderNameClick(...t))},[(0,s._)("span",{title:e.folderName},(0,r.zw)(e.folderName),9,Ht),(0,s.Wm)(c,{iconName:"pen",iconWidth:"20px",iconColor:"gray-3"})],32)),(0,s.Wm)(l.uT,{name:"fade"},{default:(0,s.w5)((()=>[e.isShowHint?((0,s.wg)(),(0,s.j4)(c,{key:0,class:"folder-design-view__folder-name-hint-arrow",iconName:"arrow-up",iconWidth:"13.76px",iconHeight:"9.79px",iconColor:"red-1"})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(l.uT,{name:"fade"},{default:(0,s.w5)((()=>[e.isShowHint?((0,s.wg)(),(0,s.iD)("div",Ut,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0226")),1)])):(0,s.kq)("",!0)])),_:1})])]),(0,s._)("div",Rt,[(0,s._)("div",Vt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.shownParents,((t,i)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[(0,s._)("span",{class:"folder-design-view__path__node",style:(0,r.j5)(e.nodeStyles(!1)),onClick:t=>e.goToParent(i+1)},(0,r.zw)(t+" "),13,Kt),Gt,Qt],64)))),128)),(0,s._)("span",{class:"folder-design-view__path__node",style:(0,r.j5)(e.nodeStyles(!0)),title:e.folderName},(0,r.zw)(e.folderName),13,Yt)]),(0,s._)("div",Xt,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"folder-design-view__more",onClick:t[9]||(t[9]=(...t)=>e.toggleFolderMenu&&e.toggleFolderMenu(...t))},[(0,s._)("div",Jt,[(0,s.Wm)(c,{class:"header-icon",iconName:"more_vertical",iconWidth:"18px",iconColor:"gray-2"})],512),e.isFolderMenuOpen?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"folder-design-view__more__menu",onClick:t[8]||(t[8]=(0,l.iM)((()=>{}),["stop"]))},[(0,s._)("div",ei,[(0,s._)("span",{title:e.folderName},(0,r.zw)(e.folderName),9,ti)]),(0,s._)("div",ii,[(0,s._)("span",null,(0,r.zw)(`${e.$t("NN0196",{name:e.folder?e.folder.author:""})} | ${e.$t("NN0197",{num:e.itemCount})}`),1)]),si,(0,s._)("div",ni,[(0,s._)("div",{onClick:t[6]||(t[6]=(...t)=>e.handleFolderNameClick&&e.handleFolderNameClick(...t))},[(0,s._)("div",oi,[(0,s.Wm)(c,{iconName:"pen",iconWidth:"15px",iconColor:"gray-2"})]),(0,s._)("div",li,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0198")),1)])]),(0,s._)("div",{onClick:t[7]||(t[7]=(...t)=>e.handleDeleteFolder&&e.handleDeleteFolder(...t))},[(0,s._)("div",ri,[(0,s.Wm)(c,{iconName:"trash",iconWidth:"15px",iconColor:"gray-2"})]),(0,s._)("div",ai,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0199")),1)])])])])):(0,s.kq)("",!0)])),[[u,e.closeFolderMenu]]),(0,s._)("div",{class:"folder-design-view__new-folder",ref:"newFolder",style:(0,r.j5)(e.newFolderStyles()),onClick:t[10]||(t[10]=(...t)=>e.handleNewFolder&&e.handleNewFolder(...t))},[(0,s.Wm)(c,{class:"header-icon",iconName:"folder_plus",iconWidth:"18px",iconColor:e.isMaxLevelReached?"gray-3":"gray-2"},null,8,["iconColor"])],4),(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"folder-design-view__sort-by",onClick:t[12]||(t[12]=(...t)=>e.toggleSortMenu&&e.toggleSortMenu(...t))},[(0,s.Wm)(c,{class:"header-sort",iconName:"sequence",iconWidth:"18px",iconColor:"gray-2"}),(0,s._)("span",di,(0,r.zw)(e.$t("NN0191")),1),e.isSortMenuOpen?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"folder-design-view__sort-by__menu",onClick:t[11]||(t[11]=(0,l.iM)((()=>{}),["stop"]))},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.sortMenuItems,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.text,onClick:i=>e.handleSortByClick(t.payload)},[(0,s._)("div",hi,[(0,s.Wm)(c,{iconName:t.icon,iconWidth:"15px",iconColor:"gray-2",style:(0,r.j5)(t.style)},null,8,["iconName","style"])]),(0,s._)("div",gi,[(0,s._)("span",null,(0,r.zw)(t.text),1)]),e.checkSortSelected(t.payload)?((0,s.wg)(),(0,s.iD)("div",mi,[(0,s.Wm)(c,{iconName:"done",iconWidth:"15px",iconColor:"gray-2"})])):(0,s.kq)("",!0)],8,ci)))),128))])):(0,s.kq)("",!0)])),[[u,e.closeSortMenu]]),(0,s.Wm)(h)])]),ui,(0,s.Wm)(g,{path:e.path,menuItems:[],allFolders:e.allFolders,selectedNum:e.selectedNum,onMenuAction:e.handleMenuAction,onMoveItem:e.handleMoveItem},null,8,["path","allFolders","selectedNum","onMenuAction","onMoveItem"]),(0,s.Wm)(m,{menuItems:e.menuItems,allDesigns:e.allDesigns,selectedNum:e.selectedNum,onMenuAction:e.handleMenuAction,onLoadMore:e.handleLoadMore},null,8,["menuItems","allDesigns","selectedNum","onMenuAction","onLoadMore"]),!e.isEmpty||e.isDesignsLoading||e.isFoldersLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",pi,[(0,s._)("img",{class:"folder-design-view__empty__img",src:i(648)},null,8,fi),(0,s._)("span",vi,(0,r.zw)(e.$t("NN0239")),1)]))])}const yi={key:0,class:"folder-gallery"},wi={key:0,class:"folder-gallery__header"},bi={class:"folder-gallery__title"},Di={key:1,class:"folder-gallery__folders"},Ni=["onClick"],Fi={class:"folder-menu-item__icon"},ki={class:"folder-menu-item__text"},Mi={key:0,class:"folder-menu-item__right"},Si={key:2,class:"folder-gallery__loading"};function Ci(e,t,i,n,o,l){const a=(0,s.up)("svg-icon"),d=(0,s.up)("folder-item");return e.allFolders.length>0||e.isFoldersLoading?((0,s.wg)(),(0,s.iD)("div",yi,[e.allFolders.length>0?((0,s.wg)(),(0,s.iD)("div",wi,[(0,s._)("div",{class:"folder-gallery__expand-icon-container",onClick:t[0]||(t[0]=(...t)=>e.toggleExpansion&&e.toggleExpansion(...t))},[(0,s.Wm)(a,{style:(0,r.j5)(e.expansionIconStyles()),iconName:"caret-down",iconWidth:"10px",iconHeight:"5px",iconColor:"gray-2"},null,8,["style"])]),(0,s._)("div",bi,[(0,s._)("span",null,(0,r.zw)(e.$tc("NN0253",2)),1)])])):(0,s.kq)("",!0),e.isExpanded?((0,s.wg)(),(0,s.iD)("div",Di,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.allFolders,((t,i)=>((0,s.wg)(),(0,s.j4)(d,{key:t.id,path:e.path,config:t,index:i,onGoto:i=>e.handleGotoFolder(t.id),undraggable:e.limitFunctions,undroppable:e.limitFunctions,nameIneditable:e.limitFunctions,isSelected:e.checkFolderSelected(t.id),isAnySelected:e.isAnySelected,menuItemNum:e.menuItemSlots.length,onMoveItem:e.handleMoveItem,onSelect:i=>e.selectFolder(t),onDeselect:i=>e.deselectFolder(t),onMetaSelectFolder:t=>e.metaSelectFolder(i)},(0,s.Nv)({_:2},[(0,s.Ko)(e.menuItemSlots,(i=>({name:i.name,fn:(0,s.w5)((()=>[(0,s._)("div",{class:"folder-menu-item",onClick:s=>e.handleFolderMenuAction(i.icon,t)},[(0,s._)("div",Fi,[(0,s.Wm)(a,{iconName:i.icon,iconWidth:"10px",iconColor:"gray-2"},null,8,["iconName"])]),(0,s._)("div",ki,[(0,s._)("span",null,(0,r.zw)(i.text),1)]),i.extendable?((0,s.wg)(),(0,s.iD)("div",Mi,[(0,s.Wm)(a,{iconName:"chevron-right",iconWidth:"10px",iconColor:"gray-2"})])):(0,s.kq)("",!0)],8,Ni)]))})))]),1032,["path","config","index","onGoto","undraggable","undroppable","nameIneditable","isSelected","isAnySelected","menuItemNum","onMoveItem","onSelect","onDeselect","onMetaSelectFolder"])))),128))])):(0,s.kq)("",!0),e.isExpanded&&e.isFoldersLoading?((0,s.wg)(),(0,s.iD)("div",Si,[(0,s.Wm)(a,{iconName:"loading",iconWidth:"50px",iconColor:"gray-3"})])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)}const Ii={class:"folder-item"},Oi=["draggable"],Pi={class:"folder-item__controller"},xi={class:"folder-item__controller-content"},Ti={key:3,class:"folder-item__menu"},Ei=["folderid"],$i=["title"],ji={class:"dragged-folder__icon"},Li={class:"dragged-folder__name"};function Zi(e,t,i,n,o,a){const d=(0,s.up)("svg-icon"),c=(0,s.Q2)("click-outside");return(0,s.wg)(),(0,s.iD)("div",Ii,[(0,s._)("div",(0,s.dG)({class:["folder-item__block",e.isMouseOver?"block-over":"block"],style:{cursor:e.isTempFolder?"not-allowed":""},draggable:!e.undraggable&&!e.isTempFolder,onDragstart:t[3]||(t[3]=(...t)=>e.handleDragStart&&e.handleDragStart(...t)),onDrag:t[4]||(t[4]=(...t)=>e.handleDragging&&e.handleDragging(...t)),onDragend:t[5]||(t[5]=(...t)=>e.handleDragEnd&&e.handleDragEnd(...t))},(0,s.mx)(e.undroppable||e.isTempFolder?{}:{dragenter:e.handleDragEnter,dragleave:e.handleDragLeave},!0),{onMouseenter:t[6]||(t[6]=(...t)=>e.handleMouseEnter&&e.handleMouseEnter(...t)),onMouseleave:t[7]||(t[7]=(...t)=>e.handleMouseLeave&&e.handleMouseLeave(...t)),onDragover:t[8]||(t[8]=(0,l.iM)((()=>{}),["prevent"])),onDrop:t[9]||(t[9]=(...t)=>e.handleDrop&&e.handleDrop(...t)),onClick:t[10]||(t[10]=(...t)=>e.emitGoto&&e.emitGoto(...t))}),[(0,s.Wm)(d,{style:{"pointer-events":"none"},iconName:"folder",iconWidth:"24px",iconColor:"gray-2"}),(0,s._)("div",Pi,[(0,s._)("div",xi,[e.isSelected?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"folder-item__checkbox-checked",onClick:t[0]||(t[0]=(0,l.iM)(((...t)=>e.emitDeselect&&e.emitDeselect(...t)),["stop"]))},[(0,s.Wm)(d,{iconName:"done",iconWidth:"10px",iconHeight:"8px",iconColor:"white"})])):(0,s.kq)("",!0),e.menuItems.length>0&&!e.isSelected&&(e.isMouseOver||e.isAnySelected)?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"folder-item__checkbox",onClick:t[1]||(t[1]=(0,l.iM)(((...t)=>e.emitSelect&&e.emitSelect(...t)),["stop"]))})):(0,s.kq)("",!0),e.menuItems.length>0&&e.isMouseOver?((0,s.wg)(),(0,s.iD)("div",{key:2,class:"folder-item__more",onClick:t[2]||(t[2]=(0,l.iM)((t=>e.toggleMenu()),["stop"]))},[(0,s.Wm)(d,{iconName:"more_vertical",iconWidth:"24px",iconColor:"gray-2"})])):(0,s.kq)("",!0),e.menuItems.length>0&&e.isMenuOpen&&e.isMouseOver?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",Ti,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.menuItems,((t,i)=>(0,s.WI)(e.$slots,`i${i}`,{},(()=>[(0,s.Uk)((0,r.zw)(i),1)]),!0))),256))])),[[c,e.closeMenu]]):(0,s.kq)("",!0)])])],16,Oi),(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"folder-item__name",ref:"nameblock",folderid:e.config.id},[e.isNameEditing?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:0,ref:"name","onUpdate:modelValue":t[11]||(t[11]=t=>e.editableName=t),onChange:t[12]||(t[12]=(...t)=>e.handleNameEditEnd&&e.handleNameEditEnd(...t)),onKeyup:t[13]||(t[13]=(...t)=>e.checkNameEnter&&e.checkNameEnter(...t))},null,544)),[[l.nr,e.editableName]]):((0,s.wg)(),(0,s.iD)("span",{key:1,title:e.config.name,onDblclick:t[14]||(t[14]=(...t)=>e.handleNameEditStart&&e.handleNameEditStart(...t)),onContextmenu:t[15]||(t[15]=(0,l.iM)(((...t)=>e.handleNameEditStart&&e.handleNameEditStart(...t)),["right","stop","prevent"]))},(0,r.zw)(e.config.name),41,$i))],8,Ei)),[[c,()=>{e.isNameEditing&&e.handleNameEditEnd()}]]),(0,s.Wm)(l.uT,{name:"fade"},{default:(0,s.w5)((()=>[e.isShowHint?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"folder-item__name-hint",style:(0,r.j5)(e.hintStyles())},[(0,s._)("span",null,(0,r.zw)(e.$t("NN0226")),1)],4)):(0,s.kq)("",!0)])),_:1}),(0,s._)("div",{class:"dragged-folder",style:(0,r.j5)(e.draggedFolderStyles())},[(0,s._)("div",null,[(0,s._)("div",ji,[(0,s.Wm)(d,{style:{"pointer-events":"none"},iconName:"folder",iconWidth:"24px",iconColor:"gray-2"})]),(0,s._)("div",Li,[(0,s._)("span",null,(0,r.zw)(e.config.name),1)])])],4)])}var Wi=Object.defineProperty,Ai=Object.defineProperties,Bi=Object.getOwnPropertyDescriptors,qi=Object.getOwnPropertySymbols,zi=Object.prototype.hasOwnProperty,Hi=Object.prototype.propertyIsEnumerable,Ui=(e,t,i)=>t in e?Wi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ri=(e,t)=>{for(var i in t||(t={}))zi.call(t,i)&&Ui(e,i,t[i]);if(qi)for(var i of qi(t))Hi.call(t,i)&&Ui(e,i,t[i]);return e},Vi=(e,t)=>Ai(e,Bi(t)),Ki=(0,s.aZ)({props:{path:{type:Array,required:!0},config:{type:Object,required:!0},menuItemNum:{type:Number,required:!0},undraggable:{type:Boolean,required:!0},undroppable:{type:Boolean,required:!0},nameIneditable:{type:Boolean,required:!0},isAnySelected:{type:Boolean,required:!0},isSelected:{type:Boolean,required:!0}},directives:{clickOutside:Ee().directive},emits:["metaSelectFolder","deselect","select","goto","moveItem"],data(){return{isDragged:!1,isMouseOver:!1,isNameEditing:!1,isMenuOpen:!1,editableName:"",isShowHint:!1,messageTimer:-1,draggedFolderCoordinate:{x:0,y:0},lastOnId:""}},computed:Vi(Ri({},(0,je.Se)("design",{draggingType:"getDraggingType",draggingDesign:"getDraggingDesign",draggingFolder:"getDraggingFolder",selectedDesigns:"getSelectedDesigns"})),{selectedNum(){return Object.keys(this.selectedDesigns).length},isMultiSelected(){return this.selectedNum>1},menuItems(){var e;return Array(null!=(e=this.menuItemNum)?e:0)},isTempFolder(){return this.config.id.endsWith("_new")}}),watch:{"config.name":{handler:function(e){this.editableName=e}},"config.id":function(e){Ie.ZP.off(`edit-folder-${this.lastOnId}`),this.lastOnId=e,Ie.ZP.on(`edit-folder-${e}`,(()=>{this.handleNameEditStart()}))}},mounted(){this.lastOnId=this.config.id,Ie.ZP.on(`edit-folder-${this.config.id}`,(()=>{this.handleNameEditStart()}))},unmounted(){Ie.ZP.off(this.lastOnId)},methods:Vi(Ri({},(0,je.OI)("design",{setDraggingFolder:"SET_draggingFolder",removeFolder:"UPDATE_removeFolder",deleteFolder:"UPDATE_deleteFolder"})),{emitGoto(e){if(this.isAnySelected)return e.shiftKey?void this.$emit("metaSelectFolder"):void this.$emit(this.isSelected?"deselect":"select");this.isTempFolder||this.$emit("goto")},draggedFolderStyles(){return this.isDragged?{left:`${this.draggedFolderCoordinate.x}px`,top:`${this.draggedFolderCoordinate.y}px`,display:"block"}:{}},hintStyles(){const e=this.$refs.nameblock;if(e){const t=e.getBoundingClientRect();return{top:`${t.top+t.height+10}px`,left:`${t.left+t.width/2}px`}}return{top:"0",left:"0"}},handleDragStart(e){const t=e.target;t.style.opacity="0",this.setDraggingFolder({parents:this.path,folder:this.config}),e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",document.addEventListener("dragover",this.preventDefaultDragOver,!1))},handleDragging(e){this.isDragged=!0;const t=e.target;t.style.opacity="1",this.draggedFolderCoordinate={x:e.pageX,y:e.pageY}},handleDragEnd(){this.isDragged=!1,this.setDraggingFolder(void 0),document.removeEventListener("dragover",this.preventDefaultDragOver,!1)},preventDefaultDragOver(e){e.preventDefault()},handleDragEnter(){this.folderUndroppable()||this.handleMouseEnter()},handleDragLeave(){this.folderUndroppable()||this.handleMouseLeave()},handleMouseEnter(){this.isTempFolder||(this.isMouseOver=!0)},handleMouseLeave(){this.isMouseOver=!1,this.isMenuOpen=!1},handleDrop(){if(this.isMouseOver=!1,this.folderUndroppable()||this.undroppable||this.isDragged)return;const e=Ie.ZP.appendPath(this.path,this.config);if("design"===this.draggingType){const t=this.draggingDesign;if(!t)return;this.isMultiSelected&&this.selectedDesigns[t.asset_index.toString()]?(Ie.ZP.moveAll(Object.values(this.selectedDesigns),e),this.$emit("moveItem",{type:"multi",data:t,dest:this.config.name})):(Ie.ZP.move(t,e),this.$emit("moveItem",{type:"design",data:t,dest:this.config.name}))}else if("folder"===this.draggingType){if(!this.draggingFolder)return;if(Ie.ZP.isParentOrEqual(this.draggingFolder,{parents:this.path,folder:this.config}))return;Ie.ZP.moveFolder(this.draggingFolder,e).then((()=>{this.$emit("moveItem",{type:"folder",data:this.draggingFolder.folder,dest:this.config.name})}))}},handleNameEditStart(){this.nameIneditable||(this.editableName=this.config.name,this.isNameEditing=!0,this.$nextTick((()=>{const e=this.$refs.name;e.focus()})))},handleNameEditEnd(){if(this.isNameEditing=!1,this.config.id.endsWith("_new"))""===this.editableName?(this.removeFolder({parents:this.path,folder:this.config}),this.deleteFolder(this.config)):Ie.ZP.createFolder(this.path,this.config,this.editableName);else{if(""===this.editableName||this.editableName===this.config.name)return;this.checkNameLength(),Ie.ZP.setFolderName(this.config,this.editableName,this.path)}},checkNameEnter(e){"Enter"===e.key&&this.editableName===this.config.name&&this.handleNameEditEnd(),this.checkNameLength()},checkNameLength(){this.editableName.length>64&&(this.editableName=this.editableName.substring(0,64),this.messageTimer&&clearTimeout(this.messageTimer),this.isShowHint=!0,this.messageTimer=window.setTimeout((()=>{this.isShowHint=!1,this.messageTimer=-1}),3e3))},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},closeMenu(){this.isMenuOpen=!1},emitSelect(e){e.shiftKey?this.$emit("metaSelectFolder"):this.$emit("select")},emitDeselect(e){e.shiftKey?this.$emit("metaSelectFolder"):this.$emit("deselect")},folderUndroppable(){return Ie.ZP.isMaxLevelReached(this.path.length-1)&&this.draggingFolder||this.isTempFolder}})});const Gi=(0,Ve.Z)(Ki,[["render",Zi],["__scopeId","data-v-b1c679e8"],["__file","FolderItem.vue"]]);var Qi=Gi,Yi=Object.defineProperty,Xi=Object.defineProperties,Ji=Object.getOwnPropertyDescriptors,es=Object.getOwnPropertySymbols,ts=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable,ss=(e,t,i)=>t in e?Yi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ns=(e,t)=>{for(var i in t||(t={}))ts.call(t,i)&&ss(e,i,t[i]);if(es)for(var i of es(t))is.call(t,i)&&ss(e,i,t[i]);return e},os=(e,t)=>Xi(e,Ji(t)),ls=(0,s.aZ)({components:{FolderItem:Qi},data(){return{isExpanded:!0}},props:{path:{type:Array,default:[]},menuItems:{type:Array,required:!0},allFolders:{type:Array,required:!0},selectedNum:{type:Number,required:!0},limitFunctions:{type:Boolean,default:!1},useDelete:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1}},emits:["menuAction","moveItem"],computed:os(ns({},(0,je.Se)("design",{currLocation:"getCurrLocation",selectedFolders:"getSelectedFolders",isFoldersLoading:"getIsFoldersLoading"})),{menuItemSlots(){return this.menuItems.map(((e,t)=>ns({name:`i${t}`},e)))},isAnySelected(){return this.selectedNum>0&&this.selectable}}),methods:os(ns({},(0,je.OI)("design",{setExpand:"SET_expand",setCurrLocation:"SET_currLocation",addFolderToSelection:"UPDATE_addFolderToSelection",removeFolderFromSelection:"UPDATE_removeFolderFromSelection",metaSelectFolder_:"UPDATE_metaSelectFolder"})),{expansionIconStyles(){return this.isExpanded?{}:{transform:"rotate(-90deg)"}},handleFolderMenuAction(e,t){this.useDelete&&"trash"===e&&(e="delete"),Ie.ZP.dispatchFolderMenuAction(e,t,(e=>{e&&(0,Ie.vg)().includes(e.event)&&this.$emit("menuAction",e)}))},handleMoveItem(e){this.$emit("moveItem",e)},handleGotoFolder(e){"t"!==this.currLocation&&(this.setCurrLocation(`${this.currLocation}/${e}`),this.setExpand({path:this.path,isExpanded:!0}))},toggleExpansion(){this.isExpanded=!this.isExpanded},checkFolderSelected(e){return!!this.selectedFolders[e]&&this.selectable},selectFolder(e){this.selectable&&this.addFolderToSelection(e)},deselectFolder(e){this.selectable&&this.removeFolderFromSelection(e)},metaSelectFolder(e){this.selectable&&this.metaSelectFolder_({folders:this.allFolders,index:e})}})});const rs=(0,Ve.Z)(ls,[["render",Ci],["__scopeId","data-v-1ed74d9b"],["__file","FolderGallery.vue"]]);var as=rs,ds=i(45320),cs=Object.defineProperty,hs=Object.defineProperties,gs=Object.getOwnPropertyDescriptors,ms=Object.getOwnPropertySymbols,us=Object.prototype.hasOwnProperty,ps=Object.prototype.propertyIsEnumerable,fs=(e,t,i)=>t in e?cs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,vs=(e,t)=>{for(var i in t||(t={}))us.call(t,i)&&fs(e,i,t[i]);if(ms)for(var i of ms(t))ps.call(t,i)&&fs(e,i,t[i]);return e},_s=(e,t)=>hs(e,gs(t)),ys=(e,t,i)=>new Promise(((s,n)=>{var o=e=>{try{r(i.next(e))}catch(t){n(t)}},l=e=>{try{r(i.throw(e))}catch(t){n(t)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,l);r((i=i.apply(e,t)).next())})),ws=(0,s.aZ)({emits:["clearSelection","moveItem","deleteFolder",...(0,Ie.T$)()],mounted(){ds.Z.bind(this.$refs.more,`${this.$t("NN0225")}`,500),ds.Z.bind(this.$refs.newFolder,`${this.$t("NN0190")}`,500),this.refreshItems(),this.refreshItemCount(),window.addEventListener("resize",this.handleResize)},unmounted(){window.removeEventListener("resize",this.handleResize)},components:{FolderGallery:as,DesignGallery:rt,BtnNewDesign:at.Z},data(){return{isFolderNameMouseOver:!1,isFolderNameEditing:!1,editableFolderName:"",isShowHint:!1,messageTimer:-1,menuItems:Ie.ZP.makeNormalMenuItems(),isFolderMenuOpen:!1,isSortMenuOpen:!1,windowWidth:window.innerWidth,sortMenuItems:[{icon:"chevron-duo-left",style:"transform: rotate(-90deg)",text:`${this.$t("NN0192")}`,payload:["name",!1]},{icon:"chevron-duo-left",style:"transform: rotate(90deg)",text:`${this.$t("NN0193")}`,payload:["name",!0]},{icon:"clock",style:"",text:`${this.$t("NN0194")}`,payload:["update",!0]},{icon:"clock",style:"",text:`${this.$t("NN0195")}`,payload:["update",!1]}]}},directives:{clickOutside:Ee().directive},watch:{allDesigns(){this.$emit("clearSelection")},currLocation(e){this.isFolderNameMouseOver=!1,this.isFolderNameEditing=!1,this.isFolderMenuOpen=!1,e.startsWith("f:")&&(this.refreshItems(),this.refreshItemCount())}},computed:_s(vs({},(0,je.Se)("design",{currLocation:"getCurrLocation",folders:"getFolders",selectedDesigns:"getSelectedDesigns",allDesigns:"getAllDesigns",allFolders:"getAllFolders",sortByField:"getSortByField",sortByDescending:"getSortByDescending",isDesignsLoading:"getIsDesignsLoading",isFoldersLoading:"getIsFoldersLoading",itemCount:"getItemCount"})),{path(){return Ie.ZP.makePath(this.currLocation)},folder(){return Ie.ZP.search(this.folders,this.path)},parents(){const e=this.path;return e.slice(0,e.length-1)},shownParents(){const e=Ie.ZP.getFolderNames(this.folders,this.parents);return e.slice(1)},folderName(){var e,t;return null!=(t=null==(e=this.folder)?void 0:e.name)?t:"..."},selectedNum(){return Object.keys(this.selectedDesigns).length},isEmpty(){return this.allFolders.length+this.allDesigns.length===0},isMaxLevelReached(){return Ie.ZP.isMaxLevelReached(this.parents.length-1)}}),methods:_s(vs(vs({},(0,je.nv)("design",{fetchFolderDesigns:"fetchFolderDesigns",fetchFolderFolders:"fetchFolderFolders",fetchItemCount:"fetchItemCount",fetchMoreFolderDesigns:"fetchMoreFolderDesigns"})),(0,je.OI)("design",{setCurrLocation:"SET_currLocation",setSortByField:"SET_sortByField",setSortByDescending:"SET_sortByDescending"})),{newFolderStyles(){return this.isMaxLevelReached?{pointerEvents:"none"}:{}},nodeStyles(e){const t=(this.windowWidth-570)/(this.parents.length+2);return{maxWidth:`${e?2*t:t}px`}},goToParent(e){const t=this.parents.slice(0,e+1);this.setCurrLocation(`f:${t.join("/")}`)},handleFolderNameMouseEnter(){this.isFolderNameMouseOver=!0},handleFolderNameMouseLeave(){this.isFolderNameMouseOver=!1},handleFolderNameClick(){this.editableFolderName=this.folderName,this.isFolderNameEditing=!0,this.isFolderMenuOpen=!1,this.$nextTick((()=>{const e=this.$refs.folderName;e.focus()}))},handleFolderNameEditEnd(){this.isFolderNameEditing=!1,this.isFolderNameMouseOver=!1,""!==this.editableFolderName&&this.editableFolderName!==this.folderName&&(this.checkNameLength(),Ie.ZP.setFolderName(this.folder,this.editableFolderName,this.parents))},handleMenuAction(e){const{event:t,payload:i}=e;this.$emit(t,i)},handleDeleteFolder(){this.$emit("deleteFolder",{pathedFolder:{parents:this.parents,folder:this.folder},empty:this.isEmpty})},handleNewFolder(){const e=Ie.ZP.addNewFolder(this.path,!0);this.$nextTick((()=>{Ie.ZP.emit(`edit-folder-${e}`)}))},handleSortByClick(e){this.setSortByField(e[0]),this.setSortByDescending(e[1]),this.refreshItems()},handleMoveItem(e){this.$emit("moveItem",e)},handleLoadMore(){Ie.ZP.fetchDesigns((()=>ys(this,null,(function*(){yield this.fetchMoreFolderDesigns({path:this.path.slice(1).join(",")})}))),!1)},handleResize(){this.windowWidth=window.innerWidth},checkFolderNameEnter(e){"Enter"===e.key&&this.editableFolderName===this.folderName&&this.handleFolderNameEditEnd(),this.checkNameLength()},checkNameLength(){this.editableFolderName.length>64&&(this.editableFolderName=this.editableFolderName.substring(0,64),this.messageTimer&&clearTimeout(this.messageTimer),this.isShowHint=!0,this.messageTimer=window.setTimeout((()=>{this.isShowHint=!1,this.messageTimer=-1}),3e3))},checkSortSelected(e){return this.sortByField===e[0]&&this.sortByDescending===e[1]},toggleFolderMenu(){this.isFolderMenuOpen=!this.isFolderMenuOpen},toggleSortMenu(){this.isSortMenuOpen=!this.isSortMenuOpen},closeFolderMenu(){this.isFolderMenuOpen=!1},closeSortMenu(){this.isSortMenuOpen=!1},refreshDesigns(){Ie.ZP.fetchDesigns((()=>ys(this,null,(function*(){yield this.fetchFolderDesigns({path:this.path.slice(1).join(",")})}))))},refreshFolders(){Ie.ZP.fetchFolders((()=>ys(this,null,(function*(){yield this.fetchFolderFolders({path:this.path.slice(1).join(",")})}))))},refreshItemCount(){this.fetchItemCount({path:this.path.slice(1).join(",")})},refreshItems(){this.refreshDesigns(),this.refreshFolders()}})});const bs=(0,Ve.Z)(ws,[["render",_i],["__scopeId","data-v-24d73eec"],["__file","FolderDesignView.vue"]]);var Ds=bs;const Ns=e=>((0,s.dD)("data-v-2cbdbf73"),e=e(),(0,s.Cn)(),e),Fs={class:"trash-design-view"},ks={class:"trash-design-view__title"},Ms={class:"trash-design-view__folder-name"},Ss=["src"],Cs={key:0,class:"trash-design-view__info__text"},Is=Ns((()=>(0,s._)("div",{class:"horizontal-rule"},null,-1)));function Os(e,t,n,o,a,d){const c=(0,s.up)("svg-icon"),h=(0,s.up)("folder-gallery"),g=(0,s.up)("design-gallery"),m=(0,s.Q2)("click-outside");return(0,s.wg)(),(0,s.iD)("div",Fs,[(0,s._)("div",ks,[(0,s._)("div",Ms,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0189")),1)]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"trash-design-view__info",onClick:t[0]||(t[0]=t=>e.toggleInfo())},[(0,s.Wm)(c,{iconName:"info",iconWidth:"16px",iconColor:"bu"}),(0,s.Wm)(l.uT,{name:"slide-fade-img"},{default:(0,s.w5)((()=>[e.isInfoOpen?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"trash-design-view__info__arrow",src:i(64244)},null,8,Ss)):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(l.uT,{name:"slide-fade-text"},{default:(0,s.w5)((()=>[e.isInfoOpen?((0,s.wg)(),(0,s.iD)("div",Cs,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0241")),1)])):(0,s.kq)("",!0)])),_:1})])),[[m,e.closeInfo]])]),Is,(0,s.Wm)(h,{menuItems:e.menuItems,allFolders:e.allFolders,selectedNum:e.selectedNum,limitFunctions:!0,useDelete:!0,selectable:!0,onMenuAction:e.handleMenuAction,onMoveItem:e.handleMoveItem},null,8,["menuItems","allFolders","selectedNum","onMenuAction","onMoveItem"]),(0,s.Wm)(g,{menuItems:e.menuItems,allDesigns:e.allDesigns,selectedNum:e.selectedNum,limitFunctions:!0,useDelete:!0,onMenuAction:e.handleMenuAction,onLoadMore:e.handleLoadMore},null,8,["menuItems","allDesigns","selectedNum","onMenuAction","onLoadMore"])])}var Ps=Object.defineProperty,xs=Object.defineProperties,Ts=Object.getOwnPropertyDescriptors,Es=Object.getOwnPropertySymbols,$s=Object.prototype.hasOwnProperty,js=Object.prototype.propertyIsEnumerable,Ls=(e,t,i)=>t in e?Ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Zs=(e,t)=>{for(var i in t||(t={}))$s.call(t,i)&&Ls(e,i,t[i]);if(Es)for(var i of Es(t))js.call(t,i)&&Ls(e,i,t[i]);return e},Ws=(e,t)=>xs(e,Ts(t)),As=(0,s.aZ)({emits:["clearSelection","moveItem",...(0,Ie.T$)(),...(0,Ie.vg)()],components:{FolderGallery:as,DesignGallery:rt},mounted(){Ie.ZP.fetchDesigns(this.fetchTrashDesigns),Ie.ZP.fetchFolders(this.fetchTrashFolders)},data(){return{isInfoOpen:!1,menuItems:Ie.ZP.makeTrashMenuItems()}},watch:{allDesigns(){this.$emit("clearSelection")},allFolders(){this.$emit("clearSelection")}},directives:{clickOutside:Ee().directive},computed:Ws(Zs({},(0,je.Se)("design",{selectedDesigns:"getSelectedDesigns",selectedFolders:"getSelectedFolders",allDesigns:"getAllDesigns",allFolders:"getAllFolders"})),{selectedNum(){return Object.keys(this.selectedDesigns).length+Object.keys(this.selectedFolders).length}}),methods:Ws(Zs({},(0,je.nv)("design",{fetchTrashDesigns:"fetchTrashDesigns",fetchTrashFolders:"fetchTrashFolders",fetchMoreTrashDesigns:"fetchMoreTrashDesigns"})),{handleMenuAction(e){const{event:t,payload:i}=e;this.$emit(t,i)},handleMoveItem(e){this.$emit("moveItem",e)},handleLoadMore(){Ie.ZP.fetchDesigns(this.fetchMoreTrashDesigns,!1)},toggleInfo(){this.isInfoOpen=!this.isInfoOpen},closeInfo(){this.isInfoOpen=!1}})});const Bs=(0,Ve.Z)(As,[["render",Os],["__scopeId","data-v-2cbdbf73"],["__file","TrashDesignView.vue"]]);var qs=Bs;const zs={class:"sidebar"},Hs={class:"nav scrollbar-gray-thin"},Us={class:"nav-container"},Rs={class:"nav-item-new-folder"},Vs={class:"nav-item-new-folder__icon"},Ks={class:"nav-item-new-folder__text"},Gs={class:"nav-item__text",style:{"pointer-events":"none"}},Qs={class:"nav-item__text"},Ys={class:"nav-item__text",style:{"pointer-events":"none"}};function Xs(e,t,i,n,o,a){const d=(0,s.up)("svg-icon"),c=(0,s.up)("sidebar-folder");return(0,s.wg)(),(0,s.iD)("div",zs,[(0,s._)("div",Hs,[(0,s._)("div",Us,[(0,s._)("div",Rs,[(0,s._)("div",{class:"nav-item-new-folder__container",onClick:t[0]||(t[0]=(...t)=>e.handleNewFolder&&e.handleNewFolder(...t))},[(0,s._)("div",Vs,[(0,s.Wm)(d,{iconName:"plus-origin",iconColor:"gray-4",iconWidth:"18px"})]),(0,s._)("div",Ks,(0,r.zw)(e.$t("NN0190")),1)])]),(0,s._)("div",{class:(0,r.C_)(["nav-item",{"bg-blue-1":"a"===e.currLocation}]),style:(0,r.j5)(e.draggedOverStyles("a")),onDragenter:t[1]||(t[1]=t=>e.handleDragEnter("a")),onDragleave:t[2]||(t[2]=t=>e.handleDragLeave("a")),onDragover:t[3]||(t[3]=(0,l.iM)((()=>{}),["prevent"])),onDrop:t[4]||(t[4]=t=>e.handleDrop("a")),onClick:t[5]||(t[5]=t=>e.handleSelection("a"))},[(0,s.Wm)(d,{iconName:"all",iconColor:"white",iconWidth:"20px",style:{"pointer-events":"none"}}),(0,s._)("div",Gs,(0,r.zw)(e.$t("NN0187")),1)],38),(0,s._)("div",{class:(0,r.C_)(["nav-item",{"bg-blue-1":"h"===e.currLocation}]),onClick:t[6]||(t[6]=t=>e.handleSelection("h"))},[(0,s.Wm)(d,{iconName:"heart",iconColor:"white",iconWidth:"20px"}),(0,s._)("div",Qs,(0,r.zw)(e.$t("NN0188")),1)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.realFolders,(t=>((0,s.wg)(),(0,s.j4)(c,{key:t.id,folder:t,level:0,parents:[e.ROOT],onMoveItem:e.handleMoveItem,onShowHint:e.handleShowHint},null,8,["folder","parents","onMoveItem","onShowHint"])))),128)),(0,s._)("div",{class:(0,r.C_)(["nav-item",{"bg-blue-1":"t"===e.currLocation}]),style:(0,r.j5)(e.draggedOverStyles("t")),onDragenter:t[7]||(t[7]=t=>e.handleDragEnter("t")),onDragleave:t[8]||(t[8]=t=>e.handleDragLeave("t")),onDragover:t[9]||(t[9]=(0,l.iM)((()=>{}),["prevent"])),onDrop:t[10]||(t[10]=t=>e.handleDrop("t")),onClick:t[11]||(t[11]=t=>e.handleSelection("t"))},[(0,s.Wm)(d,{iconName:"trash",iconColor:"white",iconWidth:"20px",style:{"pointer-events":"none"}}),(0,s._)("div",Ys,(0,r.zw)(e.$t("NN0189")),1)],38),(0,s.Wm)(l.uT,{name:"fade"},{default:(0,s.w5)((()=>[e.isShowHint?((0,s.wg)(),(0,s.j4)(d,{key:0,class:"nav-item__name-hint-arrow",style:(0,r.j5)(e.hintArrowStyles()),iconName:"arrow-up",iconWidth:"13.76px",iconHeight:"9.79px",iconColor:"red-1"},null,8,["style"])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(l.uT,{name:"fade"},{default:(0,s.w5)((()=>[e.isShowHint?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"nav-item__name-hint-text",style:(0,r.j5)(e.hintTextStyles())},[(0,s._)("span",null,(0,r.zw)(e.$t("NN0226")),1)],4)):(0,s.kq)("",!0)])),_:1})])])])}const Js=["draggable","folderid"],en={class:"nav-folder-0"};function tn(e,t,i,n,o,a){const d=(0,s.up)("svg-icon"),c=(0,s.up)("sidebar-folder",!0),h=(0,s.Q2)("click-outside");return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",{class:(0,r.C_)(["nav-folder",[`nav-folder-${e.level}`,{"bg-blue-1":e.folder.isCurrLocation}]]),style:(0,r.j5)(e.draggedOverStyles()),draggable:!e.isNameEditing&&!e.isTempFolder,folderid:e.folder.id,onDragstart:t[6]||(t[6]=(...t)=>e.handleDragStart&&e.handleDragStart(...t)),onDrag:t[7]||(t[7]=(...t)=>e.handleDragging&&e.handleDragging(...t)),onDragend:t[8]||(t[8]=(...t)=>e.handleDragEnd&&e.handleDragEnd(...t)),onDragenter:t[9]||(t[9]=(...t)=>e.handleDragEnter&&e.handleDragEnter(...t)),onDragleave:t[10]||(t[10]=(...t)=>e.handleDragLeave&&e.handleDragLeave(...t)),onDragover:t[11]||(t[11]=(0,l.iM)((()=>{}),["prevent"])),onDrop:t[12]||(t[12]=(...t)=>e.handleDrop&&e.handleDrop(...t)),onClick:t[13]||(t[13]=(...t)=>e.handleSelection&&e.handleSelection(...t)),onContextmenu:t[14]||(t[14]=(0,l.iM)(((...t)=>e.handleNameEditStart&&e.handleNameEditStart(...t)),["right","prevent"]))},[(0,s._)("div",{class:"nav-folder__expand-icon-container",onClick:t[0]||(t[0]=(0,l.iM)(((...t)=>e.toggleExpansion&&e.toggleExpansion(...t)),["stop"]))},[(0,s.Wm)(d,{class:"nav-folder__expand-icon",iconName:"chevron-down",iconColor:"white",iconWidth:"15px",style:(0,r.j5)(e.expandIconStyles())},null,8,["style"])]),(0,s.Wm)(d,{iconName:"folder",iconColor:"white",iconWidth:"20px",style:{"pointer-events":"none"}}),e.isNameEditing?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:0,ref:"name",class:(0,r.C_)(`nav-folder-${e.level}__input`),"onUpdate:modelValue":t[1]||(t[1]=t=>e.editableName=t),onChange:t[2]||(t[2]=(...t)=>e.handleNameEditEnd&&e.handleNameEditEnd(...t)),onKeyup:t[3]||(t[3]=(...t)=>e.checkNameEnter&&e.checkNameEnter(...t)),onClick:t[4]||(t[4]=(0,l.iM)((()=>{}),["stop"])),onContextmenu:t[5]||(t[5]=(0,l.iM)((()=>{}),["right","stop"]))},null,34)),[[l.nr,e.editableName],[h,e.handleNameEditEnd]]):((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,r.C_)(`nav-folder-${e.level}__text`),style:{"pointer-events":"none"}},(0,r.zw)(e.folder.name),3))],46,Js),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.checkExpand(e.realFolders),(t=>((0,s.wg)(),(0,s.j4)(c,{key:t.id,folder:t,level:e.level+1,parents:[...e.parents,e.folder.id],onMoveItem:e.handleMoveItem,onShowHint:e.handleShowHint},null,8,["folder","level","parents","onMoveItem","onShowHint"])))),128)),(0,s._)("div",{class:"dragged-folder",style:(0,r.j5)(e.draggedFolderStyles())},[(0,s._)("div",en,[(0,s.Wm)(d,{iconName:"folder",iconColor:"white",iconWidth:"20px",style:{"pointer-events":"none"}}),(0,s._)("div",{class:(0,r.C_)(`nav-folder-${e.level}__text`),style:{"pointer-events":"none"}},(0,r.zw)(e.folder.name),3)])],4)])}var sn=Object.defineProperty,nn=Object.defineProperties,on=Object.getOwnPropertyDescriptors,ln=Object.getOwnPropertySymbols,rn=Object.prototype.hasOwnProperty,an=Object.prototype.propertyIsEnumerable,dn=(e,t,i)=>t in e?sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,cn=(e,t)=>{for(var i in t||(t={}))rn.call(t,i)&&dn(e,i,t[i]);if(ln)for(var i of ln(t))an.call(t,i)&&dn(e,i,t[i]);return e},hn=(e,t)=>nn(e,on(t)),gn=(0,s.aZ)({name:"sidebar-folder",components:{},data(){return{isDragged:!1,isDraggedOver:!1,isNameEditing:!1,editableName:"",draggedFolderCoordinate:{x:0,y:0},lastOnId:""}},props:{folder:{type:Object,required:!0},parents:{type:Array,required:!0},level:{type:Number,required:!0}},emits:["moveItem","showHint"],directives:{clickOutside:Ee().directive},watch:{"folder.isExpanded":function(e){e&&this.fetchStructuralFolders({path:`${Ie.ZP.appendPath(this.parents,this.folder).slice(1).join(",")}`})},"folder.id":function(e){Ie.ZP.off(`edit-sidebar-${this.lastOnId}`),this.lastOnId=e,Ie.ZP.on(`edit-sidebar-${e}`,(()=>{this.handleNameEditStart()}))}},mounted(){this.lastOnId=this.folder.id,Ie.ZP.on(`edit-sidebar-${this.folder.id}`,(()=>{this.handleNameEditStart()}))},unmounted(){Ie.ZP.off(this.lastOnId)},computed:hn(cn({},(0,je.Se)("design",{currLocation:"getCurrLocation",draggingType:"getDraggingType",draggingDesign:"getDraggingDesign",draggingFolder:"getDraggingFolder",selectedDesigns:"getSelectedDesigns",folders:"getFolders"})),{selectedNum(){return Object.keys(this.selectedDesigns).length},isMultiSelected(){return this.selectedNum>1},realFolders(){return Ie.ZP.sortByCreateTime([...this.folder.subFolders])},isTempFolder(){return this.folder.id.endsWith("_new")}}),methods:hn(cn(cn({},(0,je.nv)("design",{fetchStructuralFolders:"fetchStructuralFolders"})),(0,je.OI)("design",{setCurrLocation:"SET_currLocation",setExpand:"SET_expand",setDraggingFolder:"SET_draggingFolder",removeFolder:"UPDATE_removeFolder"})),{expandIconStyles(){return this.folder.isExpanded?{}:{transform:"rotate(-90deg)"}},draggedOverStyles(){return{"background-color":this.isDraggedOver&&!this.folder.isCurrLocation?"rgba(78, 171, 230, 0.3)":"",cursor:this.isTempFolder?"not-allowed":""}},draggedFolderStyles(){return this.isDragged?{left:`${this.draggedFolderCoordinate.x}px`,top:`${this.draggedFolderCoordinate.y}px`,display:"block"}:{}},handleDragStart(e){const t=e.target;t.style.opacity="0",this.setDraggingFolder({parents:this.parents,folder:this.folder}),e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",document.addEventListener("dragover",this.preventDefaultDragOver,!1))},handleDragging(e){this.isDragged=!0;const t=e.target;t.style.opacity="1",this.draggedFolderCoordinate={x:e.pageX,y:e.pageY}},handleDragEnd(){this.isDragged=!1,this.setDraggingFolder(void 0),document.removeEventListener("dragover",this.preventDefaultDragOver,!1)},preventDefaultDragOver(e){e.preventDefault()},handleSelection(){this.isTempFolder||this.setCurrLocation(`f:${Ie.ZP.appendPath(this.parents,this.folder).join("/")}`)},handleDragEnter(){this.folderUndroppable()||(this.isDraggedOver=!0)},handleDragLeave(){this.folderUndroppable()||(this.isDraggedOver=!1)},handleDrop(){if(this.isDraggedOver=!1,this.folderUndroppable()||this.isDragged)return;const e=Ie.ZP.appendPath(this.parents,this.folder);if("design"===this.draggingType){const t=this.draggingDesign;if(!t)return;this.isMultiSelected&&this.selectedDesigns[t.asset_index.toString()]?(Ie.ZP.moveAll(Object.values(this.selectedDesigns),e),this.$emit("moveItem",{type:"multi",data:t,dest:this.folder.name})):(Ie.ZP.move(t,e),this.$emit("moveItem",{type:"design",data:t,dest:this.folder.name}))}else if("folder"===this.draggingType){if(!this.draggingFolder)return;if(Ie.ZP.isParentOrEqual(this.draggingFolder,{parents:this.parents,folder:this.folder}))return;Ie.ZP.moveFolder(this.draggingFolder,e).then((()=>{this.draggingFolder.folder.isCurrLocation&&this.setCurrLocation(`f:${Ie.ZP.appendPath(e,this.draggingFolder.folder).join("/")}`),this.$emit("moveItem",{type:"folder",data:this.draggingFolder.folder,dest:this.folder.name})}))}},handleMoveItem(e){this.$emit("moveItem",e)},handleNameEditStart(){this.editableName=this.folder.name,this.isNameEditing=!0,this.$nextTick((()=>{const e=this.$refs.name,t=document.querySelector(".nav");t&&t.click(),e.focus()}))},handleNameEditEnd(){if(this.isNameEditing=!1,this.isTempFolder)""===this.editableName?this.removeFolder({parents:this.parents,folder:this.folder}):Ie.ZP.createFolder(this.parents,this.folder,this.editableName);else{if(""===this.editableName||this.editableName===this.folder.name)return;this.checkNameLength(),Ie.ZP.setFolderName(this.folder,this.editableName,this.parents)}},handleShowHint(e){this.$emit("showHint",e)},checkNameEnter(e){"Enter"===e.key&&this.editableName===this.folder.name&&this.handleNameEditEnd(),this.checkNameLength()},checkNameLength(){this.editableName.length>64&&(this.editableName=this.editableName.substring(0,64),this.$emit("showHint",this.folder.id))},toggleExpansion(){this.setExpand({path:Ie.ZP.appendPath(this.parents,this.folder),isExpanded:!this.folder.isExpanded})},checkExpand(e){return this.folder.isExpanded?Ie.ZP.sortByCreateTime([...e]):[]},folderUndroppable(){return Ie.ZP.isMaxLevelReached(this.level)&&this.draggingFolder||this.isTempFolder}})});const mn=(0,Ve.Z)(gn,[["render",tn],["__scopeId","data-v-52f6a32c"],["__file","SidebarFolder.vue"]]);var un=mn,pn=Object.defineProperty,fn=Object.defineProperties,vn=Object.getOwnPropertyDescriptors,_n=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,wn=Object.prototype.propertyIsEnumerable,bn=(e,t,i)=>t in e?pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Dn=(e,t)=>{for(var i in t||(t={}))yn.call(t,i)&&bn(e,i,t[i]);if(_n)for(var i of _n(t))wn.call(t,i)&&bn(e,i,t[i]);return e},Nn=(e,t)=>fn(e,vn(t)),Fn=(0,s.aZ)({components:{SidebarFolder:un},data(){return{ROOT:Ie.ZP.ROOT,isShowHint:!1,messageTimer:-1,hintTopBase:0,isAllDraggedOver:!1,isTrashDraggedOver:!1}},emits:["moveItem","deleteAll","deleteFolder","deleteItem"],computed:Nn(Dn({},(0,je.Se)("design",{currLocation:"getCurrLocation",draggingType:"getDraggingType",draggingDesign:"getDraggingDesign",draggingFolder:"getDraggingFolder",selectedDesigns:"getSelectedDesigns",folders:"getFolders"})),{selectedNum(){return Object.keys(this.selectedDesigns).length},isMultiSelected(){return this.selectedNum>1},realFolders(){return this.folders.length>0?Ie.ZP.sortByCreateTime([...this.folders[0].subFolders]):[]}}),methods:Nn(Dn({},(0,je.OI)("design",{setCurrLocation:"SET_currLocation"})),{draggedOverStyles(e){switch(e){case"a":return this.isAllDraggedOver&&"a"!==this.currLocation?{"background-color":"rgba(78, 171, 230, 0.3)"}:{};case"t":return this.isTrashDraggedOver&&"t"!==this.currLocation?{"background-color":"rgba(78, 171, 230, 0.3)"}:{}}},hintArrowStyles(){return{top:`${this.hintTopBase+2}px`}},hintTextStyles(){return{top:`${this.hintTopBase+8}px`}},handleSelection(e){this.setCurrLocation(e)},handleDragEnter(e){switch(e){case"a":this.isAllDraggedOver=!0;break;case"t":this.isTrashDraggedOver=!0;break}},handleDragLeave(e){switch(e){case"a":this.isAllDraggedOver=!1;break;case"t":this.isTrashDraggedOver=!1;break}},handleDrop(e){const t=[this.ROOT];switch(e){case"a":if(this.isAllDraggedOver=!1,"design"===this.draggingType){const e=this.draggingDesign;if(!e)return;this.isMultiSelected&&this.selectedDesigns[e.asset_index.toString()]?(Ie.ZP.moveAll(Object.values(this.selectedDesigns),t),this.$emit("moveItem",{type:"multi",data:e,dest:Ie.ZP.ROOT_DISPLAY})):(Ie.ZP.move(e,t),this.$emit("moveItem",{type:"design",data:e,dest:Ie.ZP.ROOT_DISPLAY}))}else if("folder"===this.draggingType){if(!this.draggingFolder)return;Ie.ZP.moveFolder(this.draggingFolder,t).then((()=>{this.draggingFolder.folder.isCurrLocation&&this.setCurrLocation(`f:${this.ROOT}/${this.draggingFolder.folder.id}`),this.$emit("moveItem",{type:"folder",data:this.draggingFolder.folder,dest:Ie.ZP.ROOT_DISPLAY})}))}break;case"t":if(this.isTrashDraggedOver=!1,"design"===this.draggingType){const e=this.draggingDesign;if(!e)return;this.isMultiSelected&&this.selectedDesigns[e.asset_index.toString()]?this.$emit("deleteAll"):(Ie.ZP["delete"](e),this.$emit("deleteItem",{type:"design",data:e,dest:this.currLocation}))}else if("folder"===this.draggingType){const e=this.draggingFolder;if(!e)return;Ie.ZP.checkEmpty(e).then((t=>{this.$emit("deleteFolder",{pathedFolder:e,empty:t})}))}break}},handleMoveItem(e){this.$emit("moveItem",e)},handleShowHint(e){const t=document.querySelector(`.nav-folder[folderid="${e}"]`),i=t.getBoundingClientRect();this.hintTopBase=i.top+i.height,this.messageTimer&&clearTimeout(this.messageTimer),this.isShowHint=!0,this.messageTimer=window.setTimeout((()=>{this.isShowHint=!1,this.messageTimer=-1}),3e3)},handleNewFolder(){const e=Ie.ZP.addNewFolder([Ie.ZP.ROOT]);this.$nextTick((()=>{Ie.ZP.emit(`edit-sidebar-${e}`)}))}})});const kn=(0,Ve.Z)(Fn,[["render",Xs],["__scopeId","data-v-74955e8c"],["__file","Sidebar.vue"]]);var Mn=kn;const Sn=["title"];function Cn(e,t,i,n,o,a){const d=(0,s.up)("svg-icon"),c=(0,s.up)("structure-folder",!0);return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",{class:(0,r.C_)([`nav-folder-${e.level}`,{"bg-gray-5":e.folder.isCurrLocation}]),title:e.folder.name,onClick:t[1]||(t[1]=(...t)=>e.handleSelection&&e.handleSelection(...t))},[(0,s._)("div",{class:"nav-folder__expand-icon-container",onClick:t[0]||(t[0]=(0,l.iM)(((...t)=>e.toggleExpansion&&e.toggleExpansion(...t)),["stop"]))},[(0,s.Wm)(d,{class:"nav-folder__expand-icon",iconName:"caret-down",iconColor:"gray-2",iconWidth:"7px",iconHeight:"4px",style:(0,r.j5)(e.expandIconStyles())},null,8,["style"])]),(0,s.Wm)(d,{iconName:"folder",iconColor:"gray-2",iconWidth:"15px",style:{"pointer-events":"none"}}),(0,s._)("div",{class:(0,r.C_)(`nav-folder-${e.level}__text`),style:{"pointer-events":"none"}},[(0,s._)("span",null,(0,r.zw)(e.folder.name),1)],2)],10,Sn),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.checkExpand(e.realFolders),(t=>((0,s.wg)(),(0,s.j4)(c,{key:t.id,folder:t,level:e.level+1,parents:[...e.parents,e.folder.id]},null,8,["folder","level","parents"])))),128))])}var In=Object.defineProperty,On=Object.defineProperties,Pn=Object.getOwnPropertyDescriptors,xn=Object.getOwnPropertySymbols,Tn=Object.prototype.hasOwnProperty,En=Object.prototype.propertyIsEnumerable,$n=(e,t,i)=>t in e?In(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,jn=(e,t)=>{for(var i in t||(t={}))Tn.call(t,i)&&$n(e,i,t[i]);if(xn)for(var i of xn(t))En.call(t,i)&&$n(e,i,t[i]);return e},Ln=(e,t)=>On(e,Pn(t)),Zn=(0,s.aZ)({emits:[],name:"structure-folder",props:{folder:{type:Object,required:!0},parents:{type:Array,required:!0},level:{type:Number,required:!0}},computed:{path(){return Ie.ZP.appendPath(this.parents,this.folder)},realFolders(){return Ie.ZP.sortByCreateTime([...this.folder.subFolders])}},watch:{"folder.isExpanded":function(e){e&&this.fetchCopiedStructuralFolders({path:`${this.path.join(",")}`})}},methods:Ln(jn(jn({},(0,je.nv)("design",{fetchCopiedStructuralFolders:"fetchCopiedStructuralFolders"})),(0,je.OI)("design",{setMoveToFolderSelectInfo:"SET_moveToFolderSelectInfo",setCopiedExpand:"SET_copiedExpand"})),{expandIconStyles(){return this.folder.isExpanded?{}:{transform:"rotate(-90deg)"}},handleSelection(){this.setMoveToFolderSelectInfo(`f:${this.path.join("/")}`)},toggleExpansion(){this.setCopiedExpand({path:this.path,isExpanded:!this.folder.isExpanded})},checkExpand(e){return this.folder.isExpanded?e:[]}})});const Wn=(0,Ve.Z)(Zn,[["render",Cn],["__scopeId","data-v-23a27849"],["__file","StructureFolder.vue"]]);var An=Wn,Bn=i(35670),qn=i(52403),zn=Object.defineProperty,Hn=Object.defineProperties,Un=Object.getOwnPropertyDescriptors,Rn=Object.getOwnPropertySymbols,Vn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,Gn=(e,t,i)=>t in e?zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Qn=(e,t)=>{for(var i in t||(t={}))Vn.call(t,i)&&Gn(e,i,t[i]);if(Rn)for(var i of Rn(t))Kn.call(t,i)&&Gn(e,i,t[i]);return e},Yn=(e,t)=>Hn(e,Un(t)),Xn=(e,t,i)=>new Promise(((s,n)=>{var o=e=>{try{r(i.next(e))}catch(t){n(t)}},l=e=>{try{r(i.throw(e))}catch(t){n(t)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,l);r((i=i.apply(e,t)).next())})),Jn=(0,s.aZ)({emits:[],name:"MyDesignPC",components:{Sidebar:Mn,NuHeader:Bn.Z,AllDesignView:bt,FavoriteDesignView:Zt,TrashDesignView:qs,FolderDesignView:Ds,StructureFolder:An,PopupDownload:qn.Z},directives:{clickOutside:Ee().directive},props:{view:{type:String,required:!0}},created(){return Xn(this,null,(function*(){if(this.resetState(),this.setFolders(Ie.ZP.initializeFolders()),yield this.fetchStructuralFolders({path:"root"}),"all"===this.view)return void this.setCurrLocation("a");if("favor"===this.view)return void this.setCurrLocation("h");if("trash"===this.view)return void this.setCurrLocation("t");if("list"===this.view)return void this.setCurrLocation("a");if(!this.view)return void this.setCurrLocation("a");const e=this.view.split("&"),t=yield this.fetchFoldersAlong({pathNodes:e});t?this.setCurrLocation(`f:${Ie.ZP.ROOT}/${e.join("/")}`):this.setCurrLocation("a")}))},data(){return{deletedQueue:[],messageTimer:-1,isShowDeleteMessage:!1,recoveredQueue:[],isShowRecoverMessage:!1,movedQueue:[],isShowMoveMessage:!1,pathedFolderBuffer:void 0,designBuffer:void 0,confirmMessage:"",isFavDelMouseOver:!1,isMoveToFolderPanelOpen:!1,isMovingSingleToFolder:!1,errorMessageTimer:-1}},computed:Yn(Qn({},(0,je.Se)("design",{currLocation:"getCurrLocation",moveToFolderSelectInfo:"getMoveToFolderSelectInfo",folders:"getFolders",copiedFolders:"getCopiedFolders",selectedDesigns:"getSelectedDesigns",selectedFolders:"getSelectedFolders",isErrorShowing:"getIsErrorShowing"})),{mydesignView(){switch(this.currLocation[0]){case"a":return"all-design-view";case"h":return"favorite-design-view";case"t":return"trash-design-view";case"f":return"folder-design-view";default:return"all-design-view"}},selectedNum(){return Object.keys(this.selectedDesigns).length+Object.keys(this.selectedFolders).length},isMultiSelected(){return this.selectedNum>1},realFolders(){return Ie.ZP.sortByCreateTime([...this.copiedFolders])}}),watch:{currLocation(){this.handleClearSelection()},isMultiSelected(e){e&&this.$nextTick((()=>{"trash-design-view"===this.mydesignView?(ds.Z.bind(this.$refs.recover,`${this.$t("NN0204")}`,500),ds.Z.bind(this.$refs.delForever,`${this.$t("NN0200")}`,500)):(ds.Z.bind(this.$refs.tgFav,"favorite-design-view"===this.mydesignView?`${this.$t("NN0207")}`:`${this.$t("NN0205")}`,500),ds.Z.bind(this.$refs.delDesign,`${this.$t("NN0034")}`,500),"favorite-design-view"!==this.mydesignView&&ds.Z.bind(this.$refs.mvFolder,`${this.$t("NN0206")}`,500))}))},isMoveToFolderPanelOpen(e){e?this.snapshotFolders():(this.designBuffer=void 0,this.isMovingSingleToFolder=!1)},isErrorShowing(e){e&&(this.errorMessageTimer>0&&clearTimeout(this.errorMessageTimer),this.errorMessageTimer=window.setTimeout((()=>{this.setIsErrorShowing(!1)}),2e3))}},methods:Yn(Qn(Qn({},(0,je.nv)("design",{fetchFoldersAlong:"fetchFoldersAlong",fetchStructuralFolders:"fetchStructuralFolders"})),(0,je.OI)("design",{resetState:"UPDATE_resetState",clearSelection:"UPDATE_clearSelection",setCurrLocation:"SET_currLocation",setFolders:"SET_folders",snapshotFolders:"UPDATE_snapshotFolders",setIsErrorShowing:"SET_isErrorShowing"})),{stackStyles(){return{top:this.isMultiSelected?"82px":"27px"}},messageImageStyles(e){return"design"===e.type?{"background-image":`url(${e.data.thumbnail})`}:{display:"none"}},messageItemName(e){return"multi"===e.type?`${this.$t("NN0255")}`:"design"===e.type?`${this.$tc("NN0252",1)}`:e.data.name+" "},messageDestName(e){var t;return null!=(t=e.dest)?t:""},showMessage(e,t,i){const s=e[0];if(s){this[t]=!0;const s=window.setTimeout((()=>{this[t]=!1,setTimeout((()=>{e.shift(),this.showMessage(e,t,i)}),1e3)}),5e3);i&&(this.messageTimer=s)}},showDeleteMessage(){this.showMessage(this.deletedQueue,"isShowDeleteMessage",!0)},showRecoverMessage(){this.showMessage(this.recoveredQueue,"isShowRecoverMessage",!1)},showMoveMessage(){this.showMessage(this.movedQueue,"isShowMoveMessage",!1)},handleClearSelection(){this.isMoveToFolderPanelOpen=!1,this.$nextTick((()=>{this.clearSelection()}))},handlePushItem(e,t,i,s){s&&s(e),t.push(e),1===t.length&&i()},handleDeleteItem(e){this.handlePushItem(e,this.deletedQueue,this.showDeleteMessage)},handleRecoverItem(e){this.handlePushItem(e,this.recoveredQueue,this.showRecoverMessage,(e=>{this.checkRecoveredItemShowing(e)&&(clearTimeout(this.messageTimer),this.isShowDeleteMessage=!1,setTimeout((()=>{this.deletedQueue.shift(),this.showDeleteMessage()}),500))}))},handleMoveItem(e){this.handlePushItem(e,this.movedQueue,this.showMoveMessage)},handleDeleteFolder(e){const{pathedFolder:t,empty:i}=e;i?this.deleteFolder(t,(()=>{this.handleDeleteItem({type:"folder",data:t.folder,dest:`f:${t.parents.join("/")}`})})):(this.pathedFolderBuffer=t,this.confirmMessage="delete-folder")},handleDeleteForever(e){this.designBuffer=e,this.confirmMessage="delete-forever"},handleDeleteFolderForever(e){this.pathedFolderBuffer={parents:[],folder:e},this.confirmMessage="delete-forever"},handleFavDelMouseOver(e){this.isFavDelMouseOver=e&&"favorite-design-view"===this.mydesignView},handleMoveToFolder(){var e,t,i,s;if(""===this.moveToFolderSelectInfo)return;const n=[Ie.ZP.ROOT,...Ie.ZP.makePath(this.moveToFolderSelectInfo)];this.isMovingSingleToFolder&&this.designBuffer?(Ie.ZP.move(this.designBuffer,n),this.handleMoveItem({type:"design",data:this.designBuffer,dest:null!=(t=null==(e=Ie.ZP.search(this.copiedFolders,n.slice(1)))?void 0:e.name)?t:""}),this.designBuffer=void 0):(Ie.ZP.moveAll(Object.values(this.selectedDesigns),n),this.handleMoveItem({type:"multi",data:Object.values(this.selectedDesigns)[0],dest:null!=(s=null==(i=Ie.ZP.search(this.copiedFolders,n.slice(1)))?void 0:i.name)?s:""})),this.isMoveToFolderPanelOpen=!1},handleMoveDesignToFolder(e){this.designBuffer=e,this.isMovingSingleToFolder=!0,this.isMoveToFolderPanelOpen=!0},handleDownloadDesign(e){this.designBuffer=e,this.confirmMessage="download"},checkRecoveredItemShowing(e){const t=this.deletedQueue[0];return!!t&&(e.type===t.type&&("design"===e.type?e.data.asset_index===t.data.asset_index:"folder"===e.type&&e.data.id===t.data.id))},deleteFolder(e,t){e&&(this.pathedFolderBuffer=void 0,Ie.ZP.deleteFolder(e).then((()=>{t&&t(),this.currLocation===`f:${Ie.ZP.createPath(e).join("/")}`&&(e.parents.length>1?this.setCurrLocation(`f:${e.parents.join("/")}`):this.setCurrLocation("a"))})))},recover(){const e=this.deletedQueue[0];e&&(clearTimeout(this.messageTimer),"design"===e.type&&Ie.ZP.recover(e.data,e.dest),"folder"===e.type&&Ie.ZP.recoverFolder(e.data,e.dest),this.isShowDeleteMessage=!1,setTimeout((()=>{this.deletedQueue.shift(),this.showDeleteMessage()}),500))},toggleAllFavorite(){"favorite-design-view"===this.mydesignView?Ie.ZP.removeAllFromFavorite(Object.values(this.selectedDesigns)):Ie.ZP.addAllToFavorite(Object.values(this.selectedDesigns))},deleteAll(){this.confirmMessage="delete-all"},recoverAll(){Ie.ZP.recoverAll(Object.values(this.selectedDesigns),Object.values(this.selectedFolders)).then((e=>{""!==e&&this.handleRecoverItem({type:"multi",data:void 0,dest:e})}))},deleteAllForever(){this.confirmMessage="delete-forever"},deleteAllConfirmed(){Ie.ZP.deleteAll(Object.values(this.selectedDesigns))},deleteForeverConfirmed(){return this.designBuffer?(Ie.ZP.deleteForever(this.designBuffer),void(this.designBuffer=void 0)):this.pathedFolderBuffer?(Ie.ZP.deleteFolderForever(this.pathedFolderBuffer.folder),void(this.pathedFolderBuffer=void 0)):void(this.isMultiSelected&&Ie.ZP.deleteAllForever(Object.values(this.selectedDesigns),Object.values(this.selectedFolders)))},closeConfirmMessage(){this.confirmMessage="",this.pathedFolderBuffer=void 0,this.designBuffer=void 0},confirmAction(e){e(),this.closeConfirmMessage()}})});const eo=(0,Ve.Z)(Jn,[["render",K],["__scopeId","data-v-009736c5"],["__file","MyDesignPC.vue"]]);var to=eo;const io={class:"my-design-mobile"},so=["onClick"],no={class:"my-design-mobile__tab-button__text text-H6 text-gray-3"},oo={key:0,class:"my-design-mobile__nav-bar-wrapper"},lo={class:"my-design-mobile__nav-bar relative"},ro={class:"my-design-mobile__nav-bar__menu"},ao=["onClick"],co={class:"my-design-mobile__content relative"},ho={key:0,class:"my-design-mobile__message"},go={class:"my-design-mobile__message__icon"},mo={class:"my-design-mobile__message__text"},uo={class:"message__text"},po={class:"message__description"},fo=["innerHTML"],vo={class:"message__buttons"},_o={class:"message__text"},yo={class:"message__description"};function wo(e,t,i,n,o,a){const d=(0,s.up)("svg-icon"),c=(0,s.up)("bottom-menu"),h=(0,s.up)("nubtn");return(0,s.wg)(),(0,s.iD)("div",io,[(0,s._)("div",{class:"my-design-mobile__tab-bar",style:(0,r.j5)(e.headerStyles)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.tabButtons,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,r.C_)(["my-design-mobile__tab-button pointer",{active:t.condition(e.currLocation)}]),key:`${t.text}-${i}`,onClick:i=>e.handleGoTo(t.tab)},[(0,s._)("div",no,(0,r.zw)(t.text),1)],10,so)))),128))],4),0!==e.menuButtons.length?((0,s.wg)(),(0,s.iD)("div",oo,[(0,s._)("div",lo,[(0,s._)("div",ro,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.menuButtons,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{class:"my-design-mobile__nav-bar__menu-button pointer",key:i,onClick:()=>{!t.disabled&&t.action()}},[(0,s.Wm)(d,{iconName:t.icon,iconColor:t.disabled?"gray-4":"gray-2",iconWidth:e.renderedWidth(t),iconHeight:e.renderedHeight(t)},null,8,["iconName","iconColor","iconWidth","iconHeight"])],8,ao)))),128))])])])):(0,s.kq)("",!0),(0,s._)("div",co,[""!==e.currLocation?((0,s.wg)(),(0,s.j4)((0,s.LL)(e.mydesignView),{key:0,class:"design-view",onClearSelection:e.handleClearSelection},null,40,["onClearSelection"])):(0,s.kq)("",!0),(0,s.Wm)(l.uT,{name:"slide-fade"},{default:(0,s.w5)((()=>[e.isShowMessage?((0,s.wg)(),(0,s.iD)("div",ho,[(0,s._)("div",go,[(0,s.Wm)(d,{iconName:e.messageItemIcon(e.messageQueue[0]),iconColor:"white",iconWidth:"24px"},null,8,["iconName"])]),(0,s._)("div",mo,(0,r.zw)(e.messageItemText(e.messageQueue[0])),1)])):(0,s.kq)("",!0)])),_:1})]),""!==e.confirmMessage||""!==e.bottomMenu?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"dim-background",onClick:t[0]||(t[0]=(0,l.iM)((t=>e.setBottomMenu("")),["stop","prevent"]))})):(0,s.kq)("",!0),(0,s.Wm)(l.uT,{name:"slide-full"},{default:(0,s.w5)((()=>[""!==e.bottomMenu||e.isAnySelected?((0,s.wg)(),(0,s.j4)(c,{key:0,class:"bottom-menu",bottomMenu:e.bottomMenu,selectedNum:e.selectedNum,isAnySelected:e.isAnySelected,menuStack:e.menuStack,onClose:t[1]||(t[1]=t=>e.setBottomMenu("")),onClear:e.handleClearSelection,onMenuAction:e.handleMenuAction,onBack:e.handlePrevMenu,onPush:e.handlePushMenu},null,8,["bottomMenu","selectedNum","isAnySelected","menuStack","onClear","onMenuAction","onBack","onPush"])):(0,s.kq)("",!0)])),_:1}),""!==e.confirmMessage?((0,s.wg)(),(0,s.iD)("div",{key:2,class:"dim-background",onClick:t[4]||(t[4]=(0,l.iM)(((...t)=>e.closeConfirmMessage&&e.closeConfirmMessage(...t)),["stop"]))},[(0,s._)("div",{class:"message",onClick:t[3]||(t[3]=(0,l.iM)((()=>{}),["stop"]))},[(0,s._)("div",{class:"message__close pointer",onClick:t[2]||(t[2]=(0,l.iM)(((...t)=>e.closeConfirmMessage&&e.closeConfirmMessage(...t)),["stop"]))},[(0,s.Wm)(d,{iconName:"close",iconColor:"gray-3",iconWidth:"20px"})]),(0,s._)("div",uo,[(0,s._)("span",null,(0,r.zw)(e.getMessageText()),1)]),(0,s._)("div",po,[(0,s._)("span",{innerHTML:e.getMessageDescription()},null,8,fo)]),(0,s._)("div",vo,[(0,s.Wm)(h,{theme:"secondary",size:"sm-full",onClick:(0,l.iM)(e.closeConfirmMessage,["stop"])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0203")),1)])),_:1},8,["onClick"]),(0,s.Wm)(h,{theme:"danger",size:"sm-full",onClick:(0,l.iM)(e.confirmAction,["stop"])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0034")),1)])),_:1},8,["onClick"])])])])):(0,s.kq)("",!0),e.isErrorShowing?((0,s.wg)(),(0,s.iD)("div",{key:3,class:"dim-background",onClick:t[8]||(t[8]=(0,l.iM)(((...t)=>e.closeErrorMessage&&e.closeErrorMessage(...t)),["stop"]))},[(0,s._)("div",{class:"message",onClick:t[7]||(t[7]=(0,l.iM)((()=>{}),["stop"]))},[(0,s._)("div",{class:"message__close-minimal pointer",onClick:t[5]||(t[5]=(0,l.iM)(((...t)=>e.closeErrorMessage&&e.closeErrorMessage(...t)),["stop"]))},[(0,s.Wm)(d,{iconName:"close",iconColor:"gray-2",iconWidth:"20px"})]),(0,s._)("div",_o,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0456")),1)]),(0,s._)("div",yo,[(0,s._)("span",null,(0,r.zw)(e.$t("NN0242")),1)]),(0,s._)("div",{class:"message__ok",onClick:t[6]||(t[6]=(0,l.iM)(((...t)=>e.closeErrorMessage&&e.closeErrorMessage(...t)),["stop"]))},[(0,s._)("span",null,(0,r.zw)(e.$t("NN0563")),1)])])])):(0,s.kq)("",!0)])}const bo=e=>((0,s.dD)("data-v-6c4cbcb8"),e=e(),(0,s.Cn)(),e),Do={class:"bottom-menu__wrapper relative"},No={key:1,class:"multi-menu"},Fo={class:"multi-menu__title"},ko=bo((()=>(0,s._)("div",{class:"menu__hr"},null,-1))),Mo={class:"multi-menu__actions"},So=["onClick"],Co={key:0,class:"trash-info"},Io={key:1,class:"new-folder"},Oo={class:"new-folder__name-editor"},Po=["placeholder"],xo={key:0,class:"menu__hint in-new-folder"},To={key:2,class:"sort-menu menu"},Eo=["onClick"],$o={class:"menu__item-icon"},jo={class:"menu__item-text"},Lo={key:3,class:"design-menu menu"},Zo={class:"menu__editable-name"},Wo={key:0,class:"menu__editable-name__text menu__editable-name__text-editor"},Ao={key:1,class:"menu__editable-name__text"},Bo=["title"],qo={key:1,style:{width:"100%",height:"8px"}},zo={key:2,class:"menu__hr"},Ho={key:1,style:{"margin-top":"20px"}},Uo=["onClick"],Ro={class:"menu__item-icon"},Vo={class:"menu__item-text"},Ko={key:4,class:"folder-menu menu"},Go={class:"menu__editable-name"},Qo={key:0,class:"menu__editable-name__text menu__editable-name__text-editor"},Yo={key:1,class:"menu__editable-name__text"},Xo=["title"],Jo={key:1,class:"menu__hint in-folder-menu"},el={key:2,style:{width:"100%",height:"8px"}},tl={key:3,class:"menu__hr"},il={key:1,style:{"margin-top":"20px"}},sl=["onClick"],nl={class:"menu__item-icon"},ol={class:"menu__item-text"},ll={class:"move-folder__footer"},rl={class:"move-folder__new-folder__icon"};function al(e,t,i,n,o,a){const d=(0,s.up)("svg-icon"),c=(0,s.up)("i18n-t"),h=(0,s.up)("mobile-structure-folder");return(0,s.wg)(),(0,s.iD)("div",{class:"bottom-menu",style:(0,r.j5)(e.rootStyles)},[(0,s._)("div",Do,[e.isPrevButtonNeeded?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"bottom-menu__prev pointer",onClick:t[0]||(t[0]=(0,l.iM)(((...t)=>e.handlePrevMenu&&e.handlePrevMenu(...t)),["stop"]))},[(0,s.Wm)(d,{iconName:"chevron-left",iconColor:"gray-3",iconWidth:"20px"})])):(0,s.kq)("",!0),(0,s._)("div",{class:"bottom-menu__close pointer",onClick:t[1]||(t[1]=(0,l.iM)(((...t)=>e.handleCloseMenu&&e.handleCloseMenu(...t)),["stop"]))},[(0,s.Wm)(d,{iconName:"close",iconColor:"gray-3",iconWidth:"20px"})]),e.isAnySelected&&""===e.bottomMenu?((0,s.wg)(),(0,s.iD)("div",No,[(0,s._)("div",Fo,[(0,s.Wm)(c,{keypath:"NN0254",tag:"span"},{selectedNum:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.selectedNum),1)])),_:1})]),ko,(0,s._)("div",Mo,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.multiMenuItems,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"multi-menu__action",key:e.text,onClick:(0,l.iM)(e.action,["stop"])},[(0,s.Wm)(d,{iconName:e.icon,iconWidth:"24px",iconColor:"gray-2"},null,8,["iconName"])],8,So)))),128))])])):((0,s.wg)(),(0,s.iD)(s.HY,{key:2},["trash-info"===e.bottomMenu?((0,s.wg)(),(0,s.iD)("div",Co,(0,r.zw)(e.$t("NN0241")),1)):(0,s.kq)("",!0),"new-folder"===e.bottomMenu?((0,s.wg)(),(0,s.iD)("div",Io,[(0,s._)("div",Oo,[(0,s.wy)((0,s._)("input",{class:"new-folder__input",ref:"name",placeholder:e.$t("NN0691"),"onUpdate:modelValue":t[2]||(t[2]=t=>e.editableName=t),onChange:t[3]||(t[3]=(...t)=>e.handleNewFolder&&e.handleNewFolder(...t)),onKeyup:t[4]||(t[4]=(...t)=>e.checkNameLength&&e.checkNameLength(...t)),onFocus:t[5]||(t[5]=t=>e.isInputFocused=!0),onBlur:t[6]||(t[6]=t=>e.isInputFocused=!1)},null,40,Po),[[l.nr,e.editableName]]),e.editableName.length?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"new-folder__icon",onClick:t[7]||(t[7]=(0,l.iM)(((...t)=>e.handleClearNewFolderName&&e.handleClearNewFolderName(...t)),["stop"]))},[(0,s.Wm)(d,{iconName:"close",iconColor:"gray-3",iconWidth:"24px"})])):(0,s.kq)("",!0)]),e.isShowHint?((0,s.wg)(),(0,s.iD)("div",xo,(0,r.zw)(e.$t("NN0226")),1)):(0,s.kq)("",!0),(0,s._)("div",{class:(0,r.C_)(["new-folder__confirm",{disabled:!e.editableName.length}]),onClick:t[8]||(t[8]=(0,l.iM)(((...t)=>e.handleNewFolder&&e.handleNewFolder(...t)),["stop"]))},(0,r.zw)(e.$t("NN0190")),3)])):(0,s.kq)("",!0),"sort-menu"===e.bottomMenu?((0,s.wg)(),(0,s.iD)("div",To,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.sortMenuItems,(t=>((0,s.wg)(),(0,s.iD)("div",{class:(0,r.C_)(["menu__item pointer",{selected:e.checkSortSelected(t.payload)}]),key:t.text,onClick:(0,l.iM)((i=>e.handleSortByClick(t.payload)),["stop"])},[(0,s._)("div",$o,[(0,s.Wm)(d,{iconName:t.icon,iconWidth:"24px",iconColor:"gray-2",style:(0,r.j5)(t.style)},null,8,["iconName","style"])]),(0,s._)("div",jo,[(0,s._)("span",null,(0,r.zw)(t.text),1)])],10,Eo)))),128))])):(0,s.kq)("",!0),"design-menu"===e.bottomMenu?((0,s.wg)(),(0,s.iD)("div",Lo,["t"!==e.currLocation?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",Zo,[e.isNameEditing?((0,s.wg)(),(0,s.iD)("div",Wo,[(0,s.wy)((0,s._)("input",{ref:"name","onUpdate:modelValue":t[9]||(t[9]=t=>e.editableName=t),onChange:t[10]||(t[10]=(...t)=>e.handleNameEditEnd&&e.handleNameEditEnd(...t)),onKeyup:t[11]||(t[11]=(...t)=>e.checkNameEnter&&e.checkNameEnter(...t)),onFocus:t[12]||(t[12]=t=>e.isInputFocused=!0),onBlur:t[13]||(t[13]=t=>e.isInputFocused=!1)},null,544),[[l.nr,e.editableName]])])):((0,s.wg)(),(0,s.iD)("div",Ao,[(0,s._)("span",{title:e.designBuffer.name},(0,r.zw)(e.designBuffer.name),9,Bo)])),e.isNameEditing?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:2,class:"menu__editable-name__icon",onClick:t[14]||(t[14]=(0,l.iM)(((...t)=>e.handleNameClick&&e.handleNameClick(...t)),["stop"]))},[(0,s.Wm)(d,{iconName:"pen",iconWidth:"18px",iconColor:"gray-2"})]))]),e.isNameEditing?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:0,class:"menu__description",onClick:t[15]||(t[15]=(0,l.iM)((()=>{}),["stop","prevent"]))},(0,r.zw)(`${e.designBuffer.width} x ${e.designBuffer.height} ${e.designBuffer.unit}`),1)),e.isNameEditing?((0,s.wg)(),(0,s.iD)("div",qo)):((0,s.wg)(),(0,s.iD)("div",zo))],64)):((0,s.wg)(),(0,s.iD)("div",Ho)),e.isNameEditing?(0,s.kq)("",!0):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:2},(0,s.Ko)(e.designMenuItems,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"menu__item",key:t.text,onClick:(0,l.iM)((i=>e.handleDesignMenuAction(t.icon)),["stop"])},[(0,s._)("div",Ro,[(0,s.Wm)(d,{iconName:t.icon,iconWidth:"confirm-circle"===t.icon?"22px":"24px",iconColor:"favorites-fill"===t.icon?"gray-3":"gray-2"},null,8,["iconName","iconWidth","iconColor"])]),(0,s._)("div",Vo,[(0,s._)("span",null,(0,r.zw)(t.text),1)])],8,Uo)))),128))])):(0,s.kq)("",!0),"folder-menu"===e.bottomMenu?((0,s.wg)(),(0,s.iD)("div",Ko,["t"!==e.currLocation?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",Go,[e.isNameEditing?((0,s.wg)(),(0,s.iD)("div",Qo,[(0,s.wy)((0,s._)("input",{ref:"name","onUpdate:modelValue":t[16]||(t[16]=t=>e.editableName=t),onChange:t[17]||(t[17]=(...t)=>e.handleNameEditEnd&&e.handleNameEditEnd(...t)),onKeyup:t[18]||(t[18]=(...t)=>e.checkNameEnter&&e.checkNameEnter(...t)),onFocus:t[19]||(t[19]=t=>e.isInputFocused=!0),onBlur:t[20]||(t[20]=t=>e.isInputFocused=!1)},null,544),[[l.nr,e.editableName]])])):((0,s.wg)(),(0,s.iD)("div",Yo,[(0,s._)("span",{title:e.folderBuffer.folder.name},(0,r.zw)(e.folderBuffer.folder.name),9,Xo)])),e.isNameEditing?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:2,class:"menu__editable-name__icon",onClick:t[21]||(t[21]=(0,l.iM)(((...t)=>e.handleNameClick&&e.handleNameClick(...t)),["stop"]))},[(0,s.Wm)(d,{iconName:"pen",iconWidth:"18px",iconColor:"gray-2"})]))]),e.isNameEditing?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[e.itemCount>=0?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"menu__description",onClick:t[22]||(t[22]=(0,l.iM)((()=>{}),["stop","prevent"]))},(0,r.zw)(e.$t("NN0197",{num:e.itemCount})),1)):((0,s.wg)(),(0,s.iD)("div",{key:1,class:"menu__description",onClick:t[23]||(t[23]=(0,l.iM)((()=>{}),["stop","prevent"]))},"..."))],64)),e.isNameEditing&&e.isShowHint?((0,s.wg)(),(0,s.iD)("div",Jo,(0,r.zw)(e.$t("NN0226")),1)):(0,s.kq)("",!0),e.isNameEditing?((0,s.wg)(),(0,s.iD)("div",el)):((0,s.wg)(),(0,s.iD)("div",tl))],64)):((0,s.wg)(),(0,s.iD)("div",il)),e.isNameEditing?(0,s.kq)("",!0):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:2},(0,s.Ko)(e.folderMenuItems,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"menu__item",key:t.text,onClick:(0,l.iM)((i=>e.handleFolderMenuAction(t.icon)),["stop"])},[(0,s._)("div",nl,[(0,s.Wm)(d,{iconName:t.icon,iconWidth:"confirm-circle"===t.icon?"22px":"24px",iconColor:"gray-2"},null,8,["iconName","iconWidth"])]),(0,s._)("div",ol,[(0,s._)("span",null,(0,r.zw)(t.text),1)])],8,sl)))),128))])):(0,s.kq)("",!0),"move-folder"===e.bottomMenu?((0,s.wg)(),(0,s.iD)("div",{key:5,class:"move-folder",onClick:t[28]||(t[28]=(0,l.iM)(((...t)=>e.clearMoveToFolderSelectInfo&&e.clearMoveToFolderSelectInfo(...t)),["stop","prevent"]))},[(0,s._)("div",{class:"move-folder__folders",onClick:t[24]||(t[24]=(0,l.iM)(((...t)=>e.clearMoveToFolderSelectInfo&&e.clearMoveToFolderSelectInfo(...t)),["stop","prevent"]))},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.realFolders,(e=>((0,s.wg)(),(0,s.j4)(h,{key:e.id,folder:e,parents:[],level:0},null,8,["folder"])))),128))]),(0,s._)("div",{class:"move-folder__hr",onClick:t[25]||(t[25]=(0,l.iM)(((...t)=>e.clearMoveToFolderSelectInfo&&e.clearMoveToFolderSelectInfo(...t)),["stop","prevent"]))}),(0,s._)("div",ll,[(0,s._)("div",{class:(0,r.C_)(["move-folder__new-folder",{disabled:e.isMaxLevelReached}]),onClick:t[26]||(t[26]=(0,l.iM)(((...t)=>e.handleCreateFolder&&e.handleCreateFolder(...t)),["stop","prevent"]))},[(0,s._)("div",rl,[(0,s.Wm)(d,{iconName:"folder_plus",iconColor:e.isMaxLevelReached?"gray-4":"gray-2",iconWidth:"24px"},null,8,["iconColor"])]),(0,s._)("div",{class:(0,r.C_)(["move-folder__new-folder__text",{disabled:e.isMaxLevelReached}])},(0,r.zw)(e.$t("NN0190")),3)],2),(0,s._)("div",{class:(0,r.C_)(["move-folder__confirm",{disabled:""===e.moveToFolderSelectInfo}]),onClick:t[27]||(t[27]=(0,l.iM)(((...t)=>e.handleMoveToFolder&&e.handleMoveToFolder(...t)),["stop"]))},(0,r.zw)(e.$t("NN0206")),3)])])):(0,s.kq)("",!0)],64))])],4)}const dl=["title"];function cl(e,t,i,n,o,a){const d=(0,s.up)("svg-icon"),c=(0,s.up)("mobile-structure-folder",!0);return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",{class:(0,r.C_)([`nav-folder-${e.level}`,{"bg-blue-4":e.folder.isCurrLocation}]),title:e.folder.name,onClick:t[1]||(t[1]=(0,l.iM)(((...t)=>e.handleSelection&&e.handleSelection(...t)),["stop"]))},[(0,s.Wm)(d,{iconName:"folder",iconColor:e.isDisabled?"gray-4":"gray-2",iconWidth:"24px",style:{"pointer-events":"none"}},null,8,["iconColor"]),(0,s._)("div",{class:(0,r.C_)([`nav-folder-${e.level}__text`,{disabled:e.isDisabled}]),style:{"pointer-events":"none"}},[(0,s._)("span",null,(0,r.zw)(e.folder.name),1)],2),(0,s._)("div",{class:"nav-folder__expand-icon-container",onClick:t[0]||(t[0]=(0,l.iM)(((...t)=>e.toggleExpansion&&e.toggleExpansion(...t)),["stop"]))},[(0,s.Wm)(d,{class:"nav-folder__expand-icon",iconName:"chevron-left",iconColor:e.isDisabled?"gray-4":"gray-2",iconWidth:"24px",style:(0,r.j5)(e.expandIconStyles())},null,8,["iconColor","style"])])],10,dl),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.checkExpand(e.realFolders),(t=>((0,s.wg)(),(0,s.j4)(c,{key:t.id,folder:t,level:e.level+1,parents:[...e.parents,e.folder.id]},null,8,["folder","level","parents"])))),128))])}var hl=Object.defineProperty,gl=Object.defineProperties,ml=Object.getOwnPropertyDescriptors,ul=Object.getOwnPropertySymbols,pl=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,vl=(e,t,i)=>t in e?hl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,_l=(e,t)=>{for(var i in t||(t={}))pl.call(t,i)&&vl(e,i,t[i]);if(ul)for(var i of ul(t))fl.call(t,i)&&vl(e,i,t[i]);return e},yl=(e,t)=>gl(e,ml(t)),wl=(0,s.aZ)({emits:[],name:"mobile-structure-folder",props:{folder:{type:Object,required:!0},parents:{type:Array,required:!0},level:{type:Number,required:!0}},computed:yl(_l({},(0,je.Se)("design",{folderBuffer:"getMobileFolderBuffer"})),{isTempFolder(){return this.folder.id.endsWith("_new")},isDisabled(){return this.isTempFolder||this.folderBuffer&&(Ie.ZP.isMaxLevelReached(this.parents.length)||Ie.ZP.isParentOrEqual(this.folderBuffer,{parents:[Ie.ZP.ROOT,...this.parents],folder:this.folder}))},path(){return Ie.ZP.appendPath(this.parents,this.folder)},realFolders(){return Ie.ZP.sortByCreateTime([...this.folder.subFolders])}}),watch:{"folder.isExpanded":function(e){e&&this.fetchCopiedStructuralFolders({path:`${this.path.join(",")}`})}},methods:yl(_l(_l({},(0,je.nv)("design",{fetchCopiedStructuralFolders:"fetchCopiedStructuralFolders"})),(0,je.OI)("design",{setMoveToFolderSelectInfo:"SET_moveToFolderSelectInfo",setCopiedExpand:"SET_copiedExpand"})),{expandIconStyles(){return this.folder.isExpanded?{transform:"rotate(90deg)"}:{transform:"rotate(-90deg)"}},handleSelection(){this.isDisabled||(this.folder.isCurrLocation?this.setMoveToFolderSelectInfo(""):this.setMoveToFolderSelectInfo(`f:${this.path.join("/")}`))},toggleExpansion(){this.isDisabled||(this.folder.isExpanded||this.handleSelection(),this.setCopiedExpand({path:this.path,isExpanded:!this.folder.isExpanded}))},checkExpand(e){return this.folder.isExpanded?e:[]}})});const bl=(0,Ve.Z)(wl,[["render",cl],["__scopeId","data-v-63e345bd"],["__file","MobileStructureFolder.vue"]]);var Dl=bl,Nl=Object.defineProperty,Fl=Object.defineProperties,kl=Object.getOwnPropertyDescriptors,Ml=Object.getOwnPropertySymbols,Sl=Object.prototype.hasOwnProperty,Cl=Object.prototype.propertyIsEnumerable,Il=(e,t,i)=>t in e?Nl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ol=(e,t)=>{for(var i in t||(t={}))Sl.call(t,i)&&Il(e,i,t[i]);if(Ml)for(var i of Ml(t))Cl.call(t,i)&&Il(e,i,t[i]);return e},Pl=(e,t)=>Fl(e,kl(t));const xl=["new-folder","move-folder"];var Tl=(0,s.aZ)({components:{MobileStructureFolder:Dl},emits:["menuAction","back","clear","close","push"],data(){return{sortMenuItems:[{icon:"chevron-duo-left",style:"transform: rotate(-90deg)",text:`${this.$t("NN0192")}`,payload:["name",!1]},{icon:"chevron-duo-left",style:"transform: rotate(90deg)",text:`${this.$t("NN0193")}`,payload:["name",!0]},{icon:"clock",style:"",text:`${this.$t("NN0195")}`,payload:["update",!1]},{icon:"clock",style:"",text:`${this.$t("NN0194")}`,payload:["update",!0]}],isNameEditing:!1,editableName:"",messageTimer:-1,isShowHint:!1,isInputFocused:!1}},directives:{clickOutside:Ee().directive},props:{bottomMenu:{type:String,required:!0},selectedNum:{type:Number,required:!0},isAnySelected:{type:Boolean,required:!0},menuStack:{type:Array,required:!0}},mounted(){this.prepareForMenu(this.bottomMenu)},unmounted(){this.clearBuffers()},watch:{bottomMenu(e){this.prepareForMenu(e)}},computed:Pl(Ol(Ol({},(0,je.Se)("design",{currLocation:"getCurrLocation",copiedFolders:"getCopiedFolders",moveToFolderSelectInfo:"getMoveToFolderSelectInfo",selectedDesigns:"getSelectedDesigns",selectedFolders:"getSelectedFolders",allDesigns:"getAllDesigns",allFolders:"getAllFolders",sortByField:"getSortByField",sortByDescending:"getSortByDescending",isDesignsLoading:"getIsDesignsLoading",isFoldersLoading:"getIsFoldersLoading",itemCount:"getItemCount",designBuffer:"getMobileDesignBuffer",folderBuffer:"getMobileFolderBuffer",pathBuffer:"getMobilePathBuffer"})),(0,je.Se)({userInfo:"webView/getUserInfo"})),{rootStyles(){return this.isInputFocused?{}:{paddingBottom:`${this.userInfo.homeIndicatorHeight}px`}},designMenuItems(){switch(this.currLocation){case"a":return Ie.ZP.makeMobileNormalMenuItems(this.designBuffer.favorite,!1);case"h":return Ie.ZP.makeMobileFavoriteMenuItems();case"t":return Ie.ZP.makeMobileTrashMenuItems();default:return Ie.ZP.makeMobileNormalMenuItems(this.designBuffer.favorite,!0)}},folderMenuItems(){switch(this.currLocation){case"l":return Ie.ZP.makeMobileNormalFolderMenuItems(!1);case"t":return Ie.ZP.makeMobileTrashFolderMenuItems();default:return this.currLocation.startsWith("f")?Ie.ZP.makeMobileNormalFolderMenuItems(!0):[]}},multiMenuItems(){const e=[],t=this.currLocation.startsWith("f");return(["a","h"].includes(this.currLocation)||t)&&e.push({icon:"heart",action:()=>{"h"===this.currLocation?(Ie.ZP.removeAllFromFavorite(Object.values(this.selectedDesigns)),this.$emit("menuAction",{event:"unfavorDesign",payload:{}})):(Ie.ZP.addAllToFavorite(Object.values(this.selectedDesigns)),this.$emit("menuAction",{event:"favorDesign",payload:{}}))}}),(["a"].includes(this.currLocation)||t)&&e.push({icon:"folder",action:()=>{this.snapshotFolders(),this.setBottomMenu("move-folder")}}),["t"].includes(this.currLocation)&&e.push({icon:"undo",action:()=>{const e=Object.values(this.selectedDesigns),t=Object.values(this.selectedFolders),i=e.length,s=t.length;Ie.ZP.recoverAll(e,t),this.$emit("menuAction",{event:"recoverItem",payload:{type:i+s>1?"multi":i>0?"design":"folder"}})}}),(["a","h","t"].includes(this.currLocation)||t)&&e.push({icon:"trash",action:()=>{"t"===this.currLocation?this.$emit("menuAction",{event:"deleteAllForever"}):1===Object.values(this.selectedDesigns).length?(Ie.ZP.deleteAll(Object.values(this.selectedDesigns)),this.$emit("menuAction",{event:"deleteItem"})):this.$emit("menuAction",{event:"deleteAll"})}}),e},isPrevButtonNeeded(){return xl.includes(this.bottomMenu)},isDesignMenu(){return"design-menu"===this.bottomMenu},realFolders(){return Ie.ZP.sortByCreateTime([...this.copiedFolders])},isMaxLevelReached(){return""!==this.moveToFolderSelectInfo&&Ie.ZP.isMaxLevelReached(Ie.ZP.makePath(this.moveToFolderSelectInfo).length-1)}}),methods:Pl(Ol(Ol({},(0,je.nv)("design",{fetchItemCount:"fetchItemCount"})),(0,je.OI)("design",{setSortByField:"SET_sortByField",setSortByDescending:"SET_sortByDescending",clearBuffers:"UPDATE_clearBuffers",setBottomMenu:"SET_bottomMenu",setPathBuffer:"SET_mobilePathBuffer",snapshotFolders:"UPDATE_snapshotFolders",setMoveToFolderSelectInfo:"SET_moveToFolderSelectInfo"})),{checkSortSelected(e){return this.sortByField===e[0]&&this.sortByDescending===e[1]},prepareForMenu(e){""===e&&this.clearBuffers(),"new-folder"===e&&(this.editableName="",this.$nextTick((()=>{const e=this.$refs.name;e.focus()}))),"folder-menu"===e&&this.fetchItemCount({path:Ie.ZP.createPath(this.folderBuffer).slice(1).join(",")})},handlePrevMenu(){this.$emit("back"),this.handleClearNewFolderName()},handleCloseMenu(){this.isNameEditing?this.handleNameEditEnd():(this.$emit("clear"),this.$emit("close"))},handleSortByClick(e){this.setSortByField(e[0]),this.setSortByDescending(e[1]),Ie.ZP.emit("refresh")},handleDesignMenuAction(e){"t"===this.currLocation&&"trash"===e&&(e="delete"),Ie.ZP.dispatchDesignMenuAction(e,this.designBuffer,(t=>{t&&this.$emit("menuAction",t),"folder"!==e&&this.$emit("close")}))},handleFolderMenuAction(e){"t"===this.currLocation&&"trash"===e&&(e="delete"),Ie.ZP.dispatchMobileFolderMenuAction(e,this.folderBuffer,(t=>{t&&this.$emit("menuAction",t),"folder"!==e&&this.$emit("close")}))},checkNameEnter(e){const t=this.isDesignMenu?this.designBuffer.name:this.folderBuffer.folder.name;"Enter"!==e.key||this.editableName!==t?this.checkNameLength():this.handleNameEditEnd()},handleNameClick(){this.isDesignMenu?this.editableName=this.designBuffer.name:this.editableName=this.folderBuffer.folder.name,this.isNameEditing=!0,this.$nextTick((()=>{const e=this.$refs.name;e.focus()}))},handleNameEditEnd(){if(this.isNameEditing=!1,this.isDesignMenu){if(""===this.editableName||this.editableName===this.designBuffer.name)return;Ie.ZP.setDesignName(this.designBuffer,this.editableName)}else{if(""===this.editableName||this.editableName===this.folderBuffer.folder.name)return;this.checkNameLength(),Ie.ZP.setFolderName(this.folderBuffer.folder,this.editableName,this.folderBuffer.parents)}this.editableName=""},checkNameLength(){this.editableName.length>64&&(this.editableName=this.editableName.substring(0,64),this.messageTimer&&clearTimeout(this.messageTimer),this.isShowHint=!0,this.messageTimer=window.setTimeout((()=>{this.isShowHint=!1,this.messageTimer=-1}),3e3))},handleCreateFolder(){this.isMaxLevelReached||(this.$emit("push",this.bottomMenu),""===this.moveToFolderSelectInfo?this.setPathBuffer([Ie.ZP.ROOT]):this.setPathBuffer([Ie.ZP.ROOT,...Ie.ZP.makePath(this.moveToFolderSelectInfo)]),this.setBottomMenu("new-folder"))},handleNewFolder(){setTimeout((()=>{if(!this.editableName.length)return;const e=this.editableName;if(this.editableName="",this.menuStack.length&&"move-folder"===this.menuStack[this.menuStack.length-1]){const t=Ie.ZP.addNewFolder(this.pathBuffer,!1,e,!0),i=Ie.ZP.search(this.copiedFolders,[...this.pathBuffer,t].slice(1));i&&Ie.ZP.createFolder(this.pathBuffer,i,e)}else{const t=Ie.ZP.addNewFolder(this.pathBuffer,!0,e),i=Ie.ZP.findFolder(this.allFolders,t);i&&Ie.ZP.createFolder(this.pathBuffer,i,e)}this.$emit("back")}),500)},handleClearNewFolderName(){this.editableName=""},handleMoveToFolder(){if(""===this.moveToFolderSelectInfo)return;const e=[Ie.ZP.ROOT,...Ie.ZP.makePath(this.moveToFolderSelectInfo)];if(this.designBuffer)Ie.ZP.move(this.designBuffer,e),this.$emit("menuAction",{event:"moveItem",payload:"design"});else if(this.folderBuffer)Ie.ZP.moveFolder(this.folderBuffer,e),this.$emit("menuAction",{event:"moveItem",payload:"folder"});else{const t=Object.values(this.selectedDesigns);Ie.ZP.moveAll(t,e),this.$emit("menuAction",{event:"moveItem",payload:t.length>1?"multi":"design"}),this.$emit("clear")}this.$emit("close")},clearMoveToFolderSelectInfo(){this.setMoveToFolderSelectInfo("")}})});const El=(0,Ve.Z)(Tl,[["render",al],["__scopeId","data-v-6c4cbcb8"],["__file","BottomMenu.vue"]]);var $l=El;const jl=e=>((0,s.dD)("data-v-3eda8577"),e=e(),(0,s.Cn)(),e),Ll={key:1,class:"mobile-all-design-view"},Zl=jl((()=>(0,s._)("div",{class:"scroll-space"},null,-1)));function Wl(e,t,i,n,o,l){const r=(0,s.up)("mobile-design-empty"),a=(0,s.up)("mobile-design-gallery");return e.isEmpty&&!e.isDesignsLoading?((0,s.wg)(),(0,s.j4)(r,{key:0})):((0,s.wg)(),(0,s.iD)("div",Ll,[(0,s.Wm)(a,{noHeader:!0,allDesigns:e.allDesigns,selectedNum:e.selectedNum,onLoadMore:e.handleLoadMore},null,8,["allDesigns","selectedNum","onLoadMore"]),Zl]))}const Al={class:"mobile-design-empty"},Bl=["src"],ql=["onClick"],zl={class:"header-sort"};function Hl(e,t,n,o,l,a){const d=(0,s.up)("btn-new-design");return(0,s.wg)(),(0,s.iD)("div",Al,[(0,s._)("img",{class:"mobile-design-empty__img",src:i(648)},null,8,Bl),(0,s._)("span",null,[(0,s.WI)(e.$slots,"default",{},(()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0766")),1)]),!0)]),(0,s.Wm)(d,null,{default:(0,s.w5)((t=>[(0,s._)("button",{class:"btn-primary-sm pointer",onClick:t.openPopup},[(0,s._)("span",zl,(0,r.zw)(e.$tc("NN0072")),1)],8,ql)])),_:1})])}var Ul=(0,s.aZ)({emits:[],components:{BtnNewDesign:at.Z}});const Rl=(0,Ve.Z)(Ul,[["render",Hl],["__scopeId","data-v-a408136c"],["__file","MobileDesignEmpty.vue"]]);var Vl=Rl;const Kl=e=>((0,s.dD)("data-v-7e16d0d8"),e=e(),(0,s.Cn)(),e),Gl={class:"mobile-design-gallery"},Ql={key:0},Yl={key:0,class:"mobile-design-gallery__header"},Xl={class:"mobile-design-gallery__title"},Jl={key:1,class:"mobile-design-gallery__designs"},er=["onClick"],tr={class:"mobile-design-gallery__designs__new__name"},ir={class:"text-gray-1"},sr=Kl((()=>(0,s._)("div",{class:"mobile-design-gallery__designs__new__size"},null,-1))),nr={key:1,class:"mobile-design-gallery__loading"};function or(e,t,i,n,o,l){const a=(0,s.up)("svg-icon"),d=(0,s.up)("btn-new-design"),c=(0,s.up)("mobile-design-item"),h=(0,s.up)("observer-sentinel");return(0,s.wg)(),(0,s.iD)("div",Gl,[e.folderLength>0||e.allDesigns.length>0?((0,s.wg)(),(0,s.iD)("div",Ql,[e.noHeader?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Yl,[(0,s._)("div",Xl,[(0,s._)("span",null,(0,r.zw)(e.$tc("NN0252",2)),1)]),(0,s._)("div",{class:"mobile-design-gallery__expand-icon-container",onClick:t[0]||(t[0]=(...t)=>e.toggleExpansion&&e.toggleExpansion(...t))},[(0,s.Wm)(a,{style:(0,r.j5)(e.expansionIconStyles()),iconName:"chevron-left",iconWidth:"24px",iconColor:"gray-1"},null,8,["style"])])])),e.isExpanded?((0,s.wg)(),(0,s.iD)("div",Jl,[e.noNewDesign?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(d,{key:0,class:"mobile-design-gallery__designs__new"},{default:(0,s.w5)((t=>[(0,s._)("div",{class:"mobile-design-gallery__designs__new__icon",onClick:t.openPopup},[(0,s.Wm)(a,{iconName:"plus-origin",iconWidth:"16%",iconColor:"gray-2"})],8,er),(0,s._)("div",tr,[(0,s._)("span",ir,(0,r.zw)(e.$tc("NN0072")),1)]),sr])),_:1})),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.allDesigns,((t,i)=>((0,s.wg)(),(0,s.j4)(c,{ref_for:!0,ref:"designItems",key:t.asset_index,index:i,config:t,unenterable:e.limitFunctions,isSelected:e.checkSelected(t.asset_index.toString()),isAnySelected:e.isAnySelected,isMultiSelected:e.isMultiSelected,onSelect:i=>e.selectDesign(t),onDeselect:i=>e.deselectDesign(t)},null,8,["index","config","unenterable","isSelected","isAnySelected","isMultiSelected","onSelect","onDeselect"])))),128))])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),e.isExpanded&&e.isDesignsLoading?((0,s.wg)(),(0,s.iD)("div",nr,[(0,s.Wm)(a,{iconName:"loading",iconWidth:"32px",iconColor:"gray-3"})])):(0,s.kq)("",!0),!e.isDesignsLoading&&e.designsPageIndex>=0?((0,s.wg)(),(0,s.j4)(h,{key:2,onCallback:e.handleLoadMore},null,8,["onCallback"])):(0,s.kq)("",!0)])}const lr=["data-index"],rr={class:"mobile-design-item__block pointer"},ar={class:"mobile-design-item__img-container"},dr=["src"],cr=["src"],hr={class:"mobile-design-item__controller"},gr={class:"mobile-design-item__index"},mr={class:"mobile-design-item__name__container"},ur=["title"];function pr(e,t,i,n,o,a){const d=(0,s.up)("image-carousel"),c=(0,s.up)("svg-icon");return(0,s.wg)(),(0,s.iD)("div",{class:"mobile-design-item","data-index":e.config.asset_index},[(0,s._)("div",rr,[(0,s._)("div",ar,[e.showCarousel&&e.isInView&&e.previewCheckReady?((0,s.wg)(),(0,s.j4)(d,{key:0,imgs:e.pageImages,speed:2e3,onChange:e.handleCarouselIdx},{default:(0,s.w5)((({url:t})=>[(0,s._)("img",{class:"mobile-design-item__thumbnail",draggable:"false",style:(0,r.j5)(e.imageStyles()),src:t},null,12,dr)])),_:1},8,["imgs","onChange"])):(0,s.kq)("",!0),e.showCarousel&&e.isInView||!e.previewCheckReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("img",{key:1,class:"mobile-design-item__thumbnail",ref:"thumbnail",draggable:"false",src:e.appliedUrl},null,8,cr))]),(0,s._)("div",hr,[e.isTempDesign?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:0,class:"mobile-design-item__controller-content",onClick:t[3]||(t[3]=(0,l.iM)(((...t)=>e.handleClick&&e.handleClick(...t)),["self"]))},[e.isSelected?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"mobile-design-item__checkbox-checked",onClick:t[0]||(t[0]=(0,l.iM)(((...t)=>e.emitDeselect&&e.emitDeselect(...t)),["stop"]))},[(0,s.Wm)(c,{iconName:"done",iconWidth:"20px",iconHeight:"20px",iconColor:"white"})])):(0,s.kq)("",!0),!e.isSelected&&e.isAnySelected?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"mobile-design-item__checkbox",onClick:t[1]||(t[1]=(0,l.iM)(((...t)=>e.emitSelect&&e.emitSelect(...t)),["stop"]))})):(0,s.kq)("",!0),(0,s._)("div",{class:"mobile-design-item__more",onClick:t[2]||(t[2]=(0,l.iM)((t=>e.openMenu()),["stop"]))},[(0,s.Wm)(c,{iconName:"more_vertical",iconWidth:"24px",iconColor:"gray-2"})]),(0,s._)("span",gr,(0,r.zw)(e.carouselIdx+1)+"/"+(0,r.zw)(e.config.pageNum),1)]))])]),(0,s._)("div",{class:"mobile-design-item__name",onClick:t[4]||(t[4]=(0,l.iM)((()=>{}),["prevent","stop"]))},[(0,s._)("div",mr,[(0,s._)("span",{title:e.config.name},(0,r.zw)(e.config.name),9,ur)])]),(0,s._)("div",{class:"mobile-design-item__size",onClick:t[5]||(t[5]=(0,l.iM)((()=>{}),["prevent","stop"]))},[(0,s._)("span",null,(0,r.zw)(`${e.sizeToShow.width} x ${e.sizeToShow.height} ${e.sizeToShow.unit}`),1)])],8,lr)}var fr=Object.defineProperty,vr=Object.defineProperties,_r=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,br=Object.prototype.propertyIsEnumerable,Dr=(e,t,i)=>t in e?fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Nr=(e,t)=>{for(var i in t||(t={}))wr.call(t,i)&&Dr(e,i,t[i]);if(yr)for(var i of yr(t))br.call(t,i)&&Dr(e,i,t[i]);return e},Fr=(e,t)=>vr(e,_r(t));const kr=(0,s.aZ)({components:{ImageCarousel:Ce.Z},props:{config:{type:Object,required:!0},unenterable:{type:Boolean,required:!0},isAnySelected:{type:Boolean,required:!0},isSelected:{type:Boolean,required:!0}},emits:["select","deselect"],data(){return{imgWidth:150,imgHeight:150,previewCheckReady:!1,previewPlaceholder:i(67263),showCarousel:!1,carouselIdx:0,waitTimer:0,renderedWidth:150,renderedHeight:150,pageImages:[],isInView:!1}},directives:{clickOutside:Ee().directive},mounted(){window.addEventListener("resize",this.handleResize)},unmounted(){window.removeEventListener("resize",this.handleResize)},watch:{"config.asset_index":{handler:function(){this.showCarousel&&(this.showCarousel=!1,this.checkImageSize(this.startCarousel))}}},computed:Fr(Nr({},(0,je.Se)("design",{folders:"getFolders"})),{configPreview(){return Ie.ZP.getDesignPreview(this.config.id,2,this.config.ver,this.config.signedUrl)},appliedUrl(){return""!==this.config.thumbnail?this.config.thumbnail:this.previewPlaceholder},isTempDesign(){var e;return(null!=(e=this.config.id)?e:"").endsWith("_new")},sizeToShow(){var e;const t="px"===this.config.unit?0:xe.cB;return{width:(0,$e.round)(this.config.width,t),height:(0,$e.round)(this.config.height,t),unit:null!=(e=this.config.unit)?e:"px"}}}),methods:Fr(Nr({},(0,je.OI)("design",{clearSelection:"UPDATE_clearSelection",setBottomMenu:"SET_bottomMenu",setMobileDesignBuffer:"SET_mobileDesignBuffer",setDesignThumbnail:"UPDATE_setDesignThumbnail"})),{imageStyles(){return{width:`${this.renderedWidth}px`,height:`${this.renderedHeight}px`}},handleClick(){this.isAnySelected?this.$emit(this.isSelected?"deselect":"select"):this.unenterable||this.isTempDesign||(this.$isTouchDevice()&&1===this.config.group_type?Pe.Z.setModalInfo(`${this.$t("NN0808")}`,[],{msg:`${this.$t("NN0358")}`,class:"btn-blue-mid",action:()=>!1}):Ie.ZP.setDesign(this.config))},handleCarouselIdx(e){this.carouselIdx=e},openMenu(){this.clearSelection(),this.setMobileDesignBuffer(this.config),this.setBottomMenu("design-menu")},emitSelect(){this.$emit("select")},emitDeselect(){this.$emit("deselect")},checkImageSize(e){if(this.previewCheckReady=!1,this.config.polling)this.pageImages=Array(this.config.pageNum).fill(this.previewPlaceholder),this.previewCheckReady=!0,this.setDesignThumbnail({asset_index:this.config.asset_index,thumbnail:this.previewPlaceholder}),this.pollingStep(0,e);else{if(this.isTempDesign)return;this.pageImages=Ie.ZP.getDesignPreviews(this.config.pageNum,this.config.id,2,this.config.ver,this.config.signedUrl),Oe.Z.getImageSize(this.configPreview,this.imgWidth,this.imgHeight,!1).then((t=>{const{width:i,height:s,exists:n}=t;this.imgWidth=i,this.imgHeight=s,this.previewCheckReady=!0,this.setDesignThumbnail({asset_index:this.config.asset_index,thumbnail:n?this.configPreview:this.previewPlaceholder}),this.$nextTick((()=>{e()}))}))}},pollingStep(e=0,t){const i=e>14?2e3:1e3;this.isTempDesign||Oe.Z.getImageSize(Ie.ZP.getDesignPreview(this.config.id,2,void 0,this.config.signedUrl),this.imgWidth,this.imgHeight,!1).then((s=>{const{width:n,height:o,exists:l}=s;this.imgWidth=n,this.imgHeight=o,l?(this.setDesignThumbnail({asset_index:this.config.asset_index,thumbnail:this.configPreview}),this.$nextTick((()=>{t()}))):e<35&&setTimeout((()=>{this.pollingStep(e+1,t)}),i)}))},multiPollingStep(){for(let e=0;e<this.config.pageNum;e++)this.pagePollingStep(e)},pagePollingStep(e,t=0){if(this.pageImages[e]!==this.previewPlaceholder)return;if(this.isTempDesign)return;const i=t>14?2e3:1e3;Oe.Z.getImageSize(Ie.ZP.getDesignPreview(this.config.id,2,void 0,this.config.signedUrl,e),0,0,!1).then((s=>{s.exists?this.pageImages[e]=Ie.ZP.getDesignPreview(this.config.id,2,this.config.ver,this.config.signedUrl,e):t<35&&setTimeout((()=>{this.pagePollingStep(e,t+1)}),i)}))},startCarousel(){1!==this.config.pageNum&&(this.waitTimer=window.setInterval((()=>{const e=this.getThumbnailSize();e&&(clearInterval(this.waitTimer),this.config.polling&&this.multiPollingStep(),this.showCarousel=!0)}),100))},getThumbnailSize(){const e=this.$refs.thumbnail;return!!e&&(this.renderedWidth=e.width,this.renderedHeight=e.height,!0)},handleResize(){this.showCarousel&&(this.showCarousel=!1,this.checkImageSize(this.startCarousel))},handleEnterView(){this.isInView=!0,this.showCarousel=!1,this.checkImageSize(this.startCarousel)},handleLeaveView(){this.isInView=!1}})});var Mr=kr;const Sr=(0,Ve.Z)(Mr,[["render",pr],["__scopeId","data-v-a0142fbc"],["__file","MobileDesignItem.vue"]]);var Cr=Sr,Ir=Object.defineProperty,Or=Object.defineProperties,Pr=Object.getOwnPropertyDescriptors,xr=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,Er=Object.prototype.propertyIsEnumerable,$r=(e,t,i)=>t in e?Ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,jr=(e,t)=>{for(var i in t||(t={}))Tr.call(t,i)&&$r(e,i,t[i]);if(xr)for(var i of xr(t))Er.call(t,i)&&$r(e,i,t[i]);return e},Lr=(e,t)=>Or(e,Pr(t)),Zr=(0,s.aZ)({components:{MobileDesignItem:Cr,ObserverSentinel:he.Z,BtnNewDesign:at.Z},data(){return{isExpanded:!0,intersectionObserver:null,designItems:{}}},mounted(){const e={root:document.querySelector("body")};this.intersectionObserver=new IntersectionObserver((e=>{var t;for(const i of e){const e=null!=(t=i.target.getAttribute("data-index"))?t:"",s=this.designItems[e];s&&(i.isIntersecting?s.handleEnterView():s.handleLeaveView())}}),e),this.observeAllDesignItems()},unmounted(){this.intersectionObserver&&this.intersectionObserver.disconnect()},props:{allDesigns:{type:Array,required:!0},folderLength:{type:Number,default:0},selectedNum:{type:Number,required:!0},limitFunctions:{type:Boolean,default:!1},noHeader:{type:Boolean,default:!1},noNewDesign:Boolean},emits:["loadMore"],computed:Lr(jr({},(0,je.Se)("design",{favoriteDesigns:"getFavoriteDesigns",selectedDesigns:"getSelectedDesigns",isDesignsLoading:"getIsDesignsLoading",designsPageIndex:"getDesignsPageIndex"})),{isAnySelected(){return this.selectedNum>0},isMultiSelected(){return this.selectedNum>1}}),watch:{allDesigns(){this.$nextTick((()=>{this.observeAllDesignItems()}))}},methods:Lr(jr({},(0,je.OI)("design",{addToSelection:"UPDATE_addToSelection",removeFromSelection:"UPDATE_removeFromSelection",addToFavorite:"UPDATE_addToFavorite",removeFromFavorite:"UPDATE_removeFromFavorite",metaSelect:"UPDATE_metaSelect"})),{checkSelected(e){return!!this.selectedDesigns[e]},expansionIconStyles(){return this.isExpanded?{transform:"rotate(90deg)"}:{transform:"rotate(-90deg)"}},toggleExpansion(){this.isExpanded=!this.isExpanded},handleLoadMore(){this.$emit("loadMore")},selectDesign(e){this.addToSelection(e)},deselectDesign(e){this.removeFromSelection(e)},observeAllDesignItems(){const e=this.$refs.designItems;if(e){this.designItems={};for(const t of e)this.intersectionObserver&&this.intersectionObserver.observe(t.$el),this.designItems[t.$el.getAttribute("data-index")]=t}}})});const Wr=(0,Ve.Z)(Zr,[["render",or],["__scopeId","data-v-7e16d0d8"],["__file","MobileDesignGallery.vue"]]);var Ar=Wr,Br=Object.defineProperty,qr=Object.defineProperties,zr=Object.getOwnPropertyDescriptors,Hr=Object.getOwnPropertySymbols,Ur=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable,Vr=(e,t,i)=>t in e?Br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Kr=(e,t)=>{for(var i in t||(t={}))Ur.call(t,i)&&Vr(e,i,t[i]);if(Hr)for(var i of Hr(t))Rr.call(t,i)&&Vr(e,i,t[i]);return e},Gr=(e,t)=>qr(e,zr(t)),Qr=(0,s.aZ)({components:{MobileDesignGallery:Ar,MobileDesignEmpty:Vl},mounted(){Ie.ZP.fetchDesigns(this.fetchAllDesigns)},watch:{allDesigns(){this.$emit("clearSelection")}},computed:Gr(Kr({},(0,je.Se)("design",{selectedDesigns:"getSelectedDesigns",allDesigns:"getAllDesigns",isDesignsLoading:"getIsDesignsLoading"})),{selectedNum(){return Object.keys(this.selectedDesigns).length},isEmpty(){return 0===this.allDesigns.length}}),methods:Gr(Kr({},(0,je.nv)("design",{fetchAllDesigns:"fetchAllDesigns",fetchMoreAllDesigns:"fetchMoreAllDesigns"})),{handleLoadMore(){Ie.ZP.fetchDesigns(this.fetchMoreAllDesigns,!1)}})});const Yr=(0,Ve.Z)(Qr,[["render",Wl],["__scopeId","data-v-3eda8577"],["__file","MobileAllDesignView.vue"]]);var Xr=Yr;const Jr=e=>((0,s.dD)("data-v-46e3ba1c"),e=e(),(0,s.Cn)(),e),ea={class:"mobile-favorite-design-view"},ta=Jr((()=>(0,s._)("div",{class:"scroll-space"},null,-1)));function ia(e,t,i,n,o,l){const r=(0,s.up)("mobile-design-gallery");return(0,s.wg)(),(0,s.iD)("div",ea,[(0,s.Wm)(r,{noNewDesign:!0,noHeader:!0,allDesigns:e.allDesigns,selectedNum:e.selectedNum,onLoadMore:e.handleLoadMore},null,8,["allDesigns","selectedNum","onLoadMore"]),ta])}var sa=Object.defineProperty,na=Object.defineProperties,oa=Object.getOwnPropertyDescriptors,la=Object.getOwnPropertySymbols,ra=Object.prototype.hasOwnProperty,aa=Object.prototype.propertyIsEnumerable,da=(e,t,i)=>t in e?sa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ca=(e,t)=>{for(var i in t||(t={}))ra.call(t,i)&&da(e,i,t[i]);if(la)for(var i of la(t))aa.call(t,i)&&da(e,i,t[i]);return e},ha=(e,t)=>na(e,oa(t)),ga=(0,s.aZ)({components:{MobileDesignGallery:Ar},mounted(){Ie.ZP.fetchDesigns(this.fetchFavoriteDesigns)},watch:{allDesigns(){this.$emit("clearSelection")}},computed:ha(ca({},(0,je.Se)("design",{selectedDesigns:"getSelectedDesigns",allDesigns:"getAllDesigns"})),{selectedNum(){return Object.keys(this.selectedDesigns).length}}),methods:ha(ca({},(0,je.nv)("design",{fetchFavoriteDesigns:"fetchFavoriteDesigns",fetchMoreFavoriteDesigns:"fetchMoreFavoriteDesigns"})),{handleLoadMore(){Ie.ZP.fetchDesigns(this.fetchMoreFavoriteDesigns,!1)}})});const ma=(0,Ve.Z)(ga,[["render",ia],["__scopeId","data-v-46e3ba1c"],["__file","MobileFavoriteDesignView.vue"]]);var ua=ma;const pa=e=>((0,s.dD)("data-v-330d18d6"),e=e(),(0,s.Cn)(),e),fa={key:1,class:"mobile-folder-design-view"},va={key:0,class:"mobile-folder-design-view__hr"},_a=pa((()=>(0,s._)("div",{class:"scroll-space"},null,-1)));function ya(e,t,i,n,o,l){const a=(0,s.up)("mobile-design-empty"),d=(0,s.up)("mobile-folder-gallery"),c=(0,s.up)("mobile-design-gallery");return!e.isEmpty||e.isDesignsLoading||e.isFoldersLoading?((0,s.wg)(),(0,s.iD)("div",fa,[(0,s.Wm)(d,{path:e.path,allFolders:e.allFolders,selectedNum:0},null,8,["path","allFolders"]),e.isFolderDesignDivisionNeeded?((0,s.wg)(),(0,s.iD)("div",va)):(0,s.kq)("",!0),(0,s.Wm)(c,{folderLength:e.allFolders.length,allDesigns:e.allDesigns,selectedNum:e.selectedNum,onLoadMore:e.handleLoadMore},null,8,["folderLength","allDesigns","selectedNum","onLoadMore"]),_a])):((0,s.wg)(),(0,s.j4)(a,{key:0},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("NN0239")),1)])),_:1}))}const wa={key:0,class:"mobile-folder-gallery"},ba={key:0,class:"mobile-folder-gallery__header"},Da={class:"mobile-folder-gallery__title"},Na={key:1,class:"mobile-folder-gallery__folders"},Fa={key:2,class:"mobile-folder-gallery__loading"};function ka(e,t,i,n,o,l){const a=(0,s.up)("svg-icon"),d=(0,s.up)("mobile-folder-item");return e.allFolders.length>0||e.isFoldersLoading?((0,s.wg)(),(0,s.iD)("div",wa,[!e.noHeader&&e.allFolders.length>0?((0,s.wg)(),(0,s.iD)("div",ba,[(0,s._)("div",Da,[(0,s._)("span",null,(0,r.zw)(e.$tc("NN0253",2)),1)]),(0,s._)("div",{class:"mobile-folder-gallery__expand-icon-container",onClick:t[0]||(t[0]=(...t)=>e.toggleExpansion&&e.toggleExpansion(...t))},[(0,s.Wm)(a,{style:(0,r.j5)(e.expansionIconStyles()),iconName:"chevron-left",iconWidth:"24px",iconColor:"gray-2"},null,8,["style"])])])):(0,s.kq)("",!0),e.isExpanded?((0,s.wg)(),(0,s.iD)("div",Na,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.allFolders,((t,i)=>((0,s.wg)(),(0,s.j4)(d,{key:t.id,path:e.path,config:t,index:i,onGoto:i=>e.handleGotoFolder(t.id),isSelected:e.checkFolderSelected(t.id),isAnySelected:e.isAnySelected,onSelect:i=>e.selectFolder(t),onDeselect:i=>e.deselectFolder(t)},null,8,["path","config","index","onGoto","isSelected","isAnySelected","onSelect","onDeselect"])))),128))])):(0,s.kq)("",!0),e.isExpanded&&e.isFoldersLoading?((0,s.wg)(),(0,s.iD)("div",Fa,[(0,s.Wm)(a,{iconName:"loading",iconWidth:"32px",iconColor:"gray-3"})])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)}const Ma={class:"mobile-folder-item__body"},Sa={class:"mobile-folder-item__block"},Ca={class:"mobile-folder-item__info"},Ia={class:"mobile-folder-item__name"},Oa=["title"];function Pa(e,t,i,n,o,a){const d=(0,s.up)("svg-icon");return(0,s.wg)(),(0,s.iD)("div",{class:"mobile-folder-item",onClick:t[3]||(t[3]=(...t)=>e.emitGoto&&e.emitGoto(...t))},[(0,s._)("div",Ma,[e.isSelected?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"mobile-folder-item__checkbox-checked",onClick:t[0]||(t[0]=(0,l.iM)(((...t)=>e.emitDeselect&&e.emitDeselect(...t)),["stop"]))},[(0,s.Wm)(d,{iconName:"done",iconWidth:"20px",iconHeight:"20px",iconColor:"white"})])):(0,s.kq)("",!0),!e.isSelected&&e.isAnySelected?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"mobile-folder-item__checkbox",onClick:t[1]||(t[1]=(0,l.iM)(((...t)=>e.emitSelect&&e.emitSelect(...t)),["stop"]))})):(0,s.kq)("",!0),(0,s._)("div",Sa,[(0,s.Wm)(d,{style:{"pointer-events":"none"},iconName:"folder",iconWidth:"24px",iconColor:"gray-3"})]),(0,s._)("div",Ca,[(0,s._)("div",Ia,[(0,s._)("span",{title:e.config.name},(0,r.zw)(e.config.name),9,Oa)])])]),(0,s._)("div",{class:"mobile-folder-item__more",onClick:t[2]||(t[2]=(0,l.iM)((t=>e.openMenu()),["stop"]))},[(0,s.Wm)(d,{iconName:"more_vertical",iconWidth:"24px",iconColor:"gray-2"})])])}var xa=Object.defineProperty,Ta=Object.defineProperties,Ea=Object.getOwnPropertyDescriptors,$a=Object.getOwnPropertySymbols,ja=Object.prototype.hasOwnProperty,La=Object.prototype.propertyIsEnumerable,Za=(e,t,i)=>t in e?xa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Wa=(e,t)=>{for(var i in t||(t={}))ja.call(t,i)&&Za(e,i,t[i]);if($a)for(var i of $a(t))La.call(t,i)&&Za(e,i,t[i]);return e},Aa=(e,t)=>Ta(e,Ea(t)),Ba=(0,s.aZ)({props:{path:{type:Array,required:!0},config:{type:Object,required:!0},isAnySelected:{type:Boolean,required:!0},isSelected:{type:Boolean,required:!0}},emits:["select","deselect","goto"],computed:Aa(Wa({},(0,je.Se)("design",{selectedDesigns:"getSelectedDesigns"})),{isTempFolder(){return this.config.id.endsWith("_new")}}),methods:Aa(Wa({},(0,je.OI)("design",{clearSelection:"UPDATE_clearSelection",setBottomMenu:"SET_bottomMenu",setMobileFolderBuffer:"SET_mobileFolderBuffer"})),{emitGoto(){this.isAnySelected?this.$emit(this.isSelected?"deselect":"select"):this.isTempFolder||this.$emit("goto")},openMenu(){this.isTempFolder||(this.clearSelection(),this.setMobileFolderBuffer({parents:this.path,folder:this.config}),this.setBottomMenu("folder-menu"))},emitSelect(){this.$emit("select")},emitDeselect(){this.$emit("deselect")}})});const qa=(0,Ve.Z)(Ba,[["render",Pa],["__scopeId","data-v-1e5c49f2"],["__file","MobileFolderItem.vue"]]);var za=qa,Ha=Object.defineProperty,Ua=Object.defineProperties,Ra=Object.getOwnPropertyDescriptors,Va=Object.getOwnPropertySymbols,Ka=Object.prototype.hasOwnProperty,Ga=Object.prototype.propertyIsEnumerable,Qa=(e,t,i)=>t in e?Ha(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ya=(e,t)=>{for(var i in t||(t={}))Ka.call(t,i)&&Qa(e,i,t[i]);if(Va)for(var i of Va(t))Ga.call(t,i)&&Qa(e,i,t[i]);return e},Xa=(e,t)=>Ua(e,Ra(t)),Ja=(0,s.aZ)({emits:[],components:{MobileFolderItem:za},data(){return{isExpanded:!0}},props:{path:{type:Array,required:!0},allFolders:{type:Array,required:!0},selectedNum:{type:Number,required:!0},noHeader:{type:Boolean,default:!1}},computed:Xa(Ya({},(0,je.Se)("design",{currLocation:"getCurrLocation",selectedFolders:"getSelectedFolders",isFoldersLoading:"getIsFoldersLoading"})),{isAnySelected(){return this.selectedNum>0}}),methods:Xa(Ya({},(0,je.OI)("design",{setCurrLocation:"SET_currLocation",addFolderToSelection:"UPDATE_addFolderToSelection",removeFolderFromSelection:"UPDATE_removeFolderFromSelection"})),{expansionIconStyles(){return this.isExpanded?{transform:"rotate(90deg)"}:{transform:"rotate(-90deg)"}},handleGotoFolder(e){"t"!==this.currLocation&&("l"===this.currLocation?this.setCurrLocation(`f:${Ie.ZP.ROOT}/${e}`):this.setCurrLocation(`${this.currLocation}/${e}`))},toggleExpansion(){this.isExpanded=!this.isExpanded},checkFolderSelected(e){return!!this.selectedFolders[e]},selectFolder(e){this.addFolderToSelection(e)},deselectFolder(e){this.removeFolderFromSelection(e)}})});const ed=(0,Ve.Z)(Ja,[["render",ka],["__scopeId","data-v-1bfc4b42"],["__file","MobileFolderGallery.vue"]]);var td=ed,id=Object.defineProperty,sd=Object.defineProperties,nd=Object.getOwnPropertyDescriptors,od=Object.getOwnPropertySymbols,ld=Object.prototype.hasOwnProperty,rd=Object.prototype.propertyIsEnumerable,ad=(e,t,i)=>t in e?id(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,dd=(e,t)=>{for(var i in t||(t={}))ld.call(t,i)&&ad(e,i,t[i]);if(od)for(var i of od(t))rd.call(t,i)&&ad(e,i,t[i]);return e},cd=(e,t)=>sd(e,nd(t)),hd=(e,t,i)=>new Promise(((s,n)=>{var o=e=>{try{r(i.next(e))}catch(t){n(t)}},l=e=>{try{r(i.throw(e))}catch(t){n(t)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,l);r((i=i.apply(e,t)).next())})),gd=(0,s.aZ)({components:{MobileFolderGallery:td,MobileDesignGallery:Ar,MobileDesignEmpty:Vl},mounted(){Ie.ZP.on("refresh",this.refreshItems),this.refreshItems()},unmounted(){Ie.ZP.off("refresh")},watch:{allDesigns(){this.$emit("clearSelection")},allFolders(){this.$emit("clearSelection")},currLocation(e){e.startsWith("f:")&&this.refreshItems()}},computed:cd(dd({},(0,je.Se)("design",{currLocation:"getCurrLocation",selectedDesigns:"getSelectedDesigns",isDesignsLoading:"getIsDesignsLoading",isFoldersLoading:"getIsFoldersLoading",allDesigns:"getAllDesigns",allFolders:"getAllFolders"})),{path(){return Ie.ZP.makePath(this.currLocation)},selectedNum(){return Object.keys(this.selectedDesigns).length},isEmpty(){return this.allFolders.length+this.allDesigns.length===0},isFolderDesignDivisionNeeded(){return this.allFolders.length>0}}),methods:cd(dd({},(0,je.nv)("design",{fetchFolderFolders:"fetchFolderFolders",fetchFolderDesigns:"fetchFolderDesigns",fetchMoreFolderDesigns:"fetchMoreFolderDesigns"})),{handleLoadMore(){Ie.ZP.fetchDesigns((()=>hd(this,null,(function*(){yield this.fetchMoreFolderDesigns({path:this.path.slice(1).join(",")})}))),!1)},refreshItems(){Ie.ZP.fetchDesigns((()=>hd(this,null,(function*(){yield this.fetchFolderDesigns({path:this.path.slice(1).join(",")})})))),Ie.ZP.fetchFolders((()=>hd(this,null,(function*(){yield this.fetchFolderFolders({path:this.path.slice(1).join(",")})}))))}})});const md=(0,Ve.Z)(gd,[["render",ya],["__scopeId","data-v-330d18d6"],["__file","MobileFolderDesignView.vue"]]);var ud=md;const pd=e=>((0,s.dD)("data-v-76738290"),e=e(),(0,s.Cn)(),e),fd={class:"mobile-list-design-view"},vd=pd((()=>(0,s._)("div",{class:"scroll-space"},null,-1)));function _d(e,t,i,n,o,l){const r=(0,s.up)("mobile-folder-gallery");return(0,s.wg)(),(0,s.iD)("div",fd,[(0,s.Wm)(r,{path:[e.ROOT],noHeader:!0,allFolders:e.allFolders,selectedNum:0},null,8,["path","allFolders"]),vd])}var yd=Object.defineProperty,wd=Object.defineProperties,bd=Object.getOwnPropertyDescriptors,Dd=Object.getOwnPropertySymbols,Nd=Object.prototype.hasOwnProperty,Fd=Object.prototype.propertyIsEnumerable,kd=(e,t,i)=>t in e?yd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Md=(e,t)=>{for(var i in t||(t={}))Nd.call(t,i)&&kd(e,i,t[i]);if(Dd)for(var i of Dd(t))Fd.call(t,i)&&kd(e,i,t[i]);return e},Sd=(e,t)=>wd(e,bd(t)),Cd=(e,t,i)=>new Promise(((s,n)=>{var o=e=>{try{r(i.next(e))}catch(t){n(t)}},l=e=>{try{r(i.throw(e))}catch(t){n(t)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,l);r((i=i.apply(e,t)).next())})),Id=(0,s.aZ)({components:{MobileFolderGallery:td},data(){return{ROOT:Ie.ZP.ROOT}},mounted(){Ie.ZP.on("refresh",this.refreshItems),this.refreshItems()},unmounted(){Ie.ZP.off("refresh")},watch:{allFolders(){this.$emit("clearSelection")}},computed:Md({},(0,je.Se)("design",{allFolders:"getAllFolders"})),methods:Sd(Md({},(0,je.nv)("design",{fetchFolderFolders:"fetchFolderFolders"})),{refreshItems(){Ie.ZP.fetchFolders((()=>Cd(this,null,(function*(){yield this.fetchFolderFolders({path:"root"})}))))}})});const Od=(0,Ve.Z)(Id,[["render",_d],["__scopeId","data-v-76738290"],["__file","MobileListDesignView.vue"]]);var Pd=Od;const xd=e=>((0,s.dD)("data-v-62bbfcef"),e=e(),(0,s.Cn)(),e),Td={class:"mobile-trash-design-view"},Ed={key:0,class:"mobile-trash-design-view__hr"},$d=xd((()=>(0,s._)("div",{class:"scroll-space"},null,-1)));function jd(e,t,i,n,o,l){const r=(0,s.up)("mobile-folder-gallery"),a=(0,s.up)("mobile-design-gallery");return(0,s.wg)(),(0,s.iD)("div",Td,[(0,s.Wm)(r,{path:[],allFolders:e.allFolders,selectedNum:e.selectedNum},null,8,["allFolders","selectedNum"]),e.isFolderDesignDivisionNeeded?((0,s.wg)(),(0,s.iD)("div",Ed)):(0,s.kq)("",!0),(0,s.Wm)(a,{noNewDesign:!0,noHeader:!0,allDesigns:e.allDesigns,selectedNum:e.selectedNum,limitFunctions:!0,onLoadMore:e.handleLoadMore},null,8,["allDesigns","selectedNum","onLoadMore"]),$d])}var Ld=Object.defineProperty,Zd=Object.defineProperties,Wd=Object.getOwnPropertyDescriptors,Ad=Object.getOwnPropertySymbols,Bd=Object.prototype.hasOwnProperty,qd=Object.prototype.propertyIsEnumerable,zd=(e,t,i)=>t in e?Ld(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Hd=(e,t)=>{for(var i in t||(t={}))Bd.call(t,i)&&zd(e,i,t[i]);if(Ad)for(var i of Ad(t))qd.call(t,i)&&zd(e,i,t[i]);return e},Ud=(e,t)=>Zd(e,Wd(t)),Rd=(0,s.aZ)({components:{MobileFolderGallery:td,MobileDesignGallery:Ar},mounted(){Ie.ZP.fetchDesigns(this.fetchTrashDesigns),Ie.ZP.fetchFolders(this.fetchTrashFolders)},watch:{allDesigns(){this.$emit("clearSelection")},allFolders(){this.$emit("clearSelection")}},computed:Ud(Hd({},(0,je.Se)("design",{selectedDesigns:"getSelectedDesigns",selectedFolders:"getSelectedFolders",allDesigns:"getAllDesigns",allFolders:"getAllFolders"})),{selectedNum(){return Object.keys(this.selectedDesigns).length+Object.keys(this.selectedFolders).length},isFolderDesignDivisionNeeded(){return this.allFolders.length>0&&this.allDesigns.length>0}}),methods:Ud(Hd({},(0,je.nv)("design",{fetchTrashDesigns:"fetchTrashDesigns",fetchTrashFolders:"fetchTrashFolders",fetchMoreTrashDesigns:"fetchMoreTrashDesigns"})),{handleLoadMore(){Ie.ZP.fetchDesigns(this.fetchMoreTrashDesigns,!1)}})});const Vd=(0,Ve.Z)(Rd,[["render",jd],["__scopeId","data-v-62bbfcef"],["__file","MobileTrashDesignView.vue"]]);var Kd=Vd,Gd=i(78871),Qd=Object.defineProperty,Yd=Object.defineProperties,Xd=Object.getOwnPropertyDescriptors,Jd=Object.getOwnPropertySymbols,ec=Object.prototype.hasOwnProperty,tc=Object.prototype.propertyIsEnumerable,ic=(e,t,i)=>t in e?Qd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,sc=(e,t)=>{for(var i in t||(t={}))ec.call(t,i)&&ic(e,i,t[i]);if(Jd)for(var i of Jd(t))tc.call(t,i)&&ic(e,i,t[i]);return e},nc=(e,t)=>Yd(e,Xd(t)),oc=(e,t,i)=>new Promise(((s,n)=>{var o=e=>{try{r(i.next(e))}catch(t){n(t)}},l=e=>{try{r(i.throw(e))}catch(t){n(t)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,l);r((i=i.apply(e,t)).next())})),lc=(0,s.aZ)({emits:[],name:"MyDesignMobile",data(){return{messageQueue:[],isShowMessage:!1,pathedFolderBuffer:void 0,designBuffer:void 0,confirmMessage:"",menuStack:[],tabButtons:[{icon:"all",text:Gd.Z.capitalizeFirstWord(`${this.$t("NN0080")}`),tab:"a",condition:e=>"a"===e},{icon:"heart",text:`${this.$t("NN0188")}`,tab:"h",condition:e=>"h"===e},{icon:"folder",text:`${this.$tc("NN0253",2)}`,tab:"l",condition:e=>"l"===e||e.startsWith("f")},{icon:"trash",text:`${this.$t("NN0189")}`,tab:"t",condition:e=>"t"===e}]}},directives:{clickOutside:Ee().directive},components:{BottomMenu:$l,MobileAllDesignView:Xr,MobileFavoriteDesignView:ua,MobileListDesignView:Pd,MobileFolderDesignView:ud,MobileTrashDesignView:Kd},props:{view:{type:String}},created(){return oc(this,null,(function*(){if(this.resetState(),this.setFolders(Ie.ZP.initializeFolders()),yield this.fetchStructuralFolders({path:"root"}),"all"===this.view)return void this.setCurrLocation("a");if("favor"===this.view)return void this.setCurrLocation("h");if("trash"===this.view)return void this.setCurrLocation("t");if("list"===this.view)return void this.setCurrLocation("l");if(!this.view)return void this.setCurrLocation("a");const e=this.view.split("&"),t=yield this.fetchFoldersAlong({pathNodes:e});t?this.setCurrLocation(`f:${Ie.ZP.ROOT}/${e.join("/")}`):this.setCurrLocation("a")}))},watch:{currLocation(){this.handleClearSelection()},bottomMenu(e){""===e&&(this.menuStack=[])}},computed:nc(sc(sc({},(0,je.Se)("design",{currLocation:"getCurrLocation",moveToFolderSelectInfo:"getMoveToFolderSelectInfo",folders:"getFolders",copiedFolders:"getCopiedFolders",selectedDesigns:"getSelectedDesigns",selectedFolders:"getSelectedFolders",isErrorShowing:"getIsErrorShowing",bottomMenu:"getBottomMenu"})),(0,je.Se)({userInfo:"webView/getUserInfo"})),{selectedNum(){return Object.keys(this.selectedDesigns).length+Object.keys(this.selectedFolders).length},isAnySelected(){return this.selectedNum>0},path(){return this.currLocation.startsWith("f:")?Ie.ZP.makePath(this.currLocation):[]},menuButtons(){switch(this.currLocation){case"a":case"h":return[];case"t":return[{icon:"info-mobile",action:()=>{this.setBottomMenu("trash-info")}}];default:return[{icon:"folder_plus",disabled:Ie.ZP.isMaxLevelReached(this.path.length-2),action:()=>{this.setPathBuffer("l"===this.currLocation?[Ie.ZP.ROOT]:this.path),this.setBottomMenu("new-folder")}},{icon:"sequence",action:()=>{this.setBottomMenu("sort-menu")}}]}},mydesignView(){switch(this.currLocation[0]){case"a":return"mobile-all-design-view";case"h":return"mobile-favorite-design-view";case"t":return"mobile-trash-design-view";case"l":return"mobile-list-design-view";case"f":return"mobile-folder-design-view";default:return"mobile-all-design-view"}},headerStyles(){return{paddingTop:`${this.userInfo.statusBarHeight}px`}}}),methods:nc(sc(sc({},(0,je.nv)("design",{fetchFoldersAlong:"fetchFoldersAlong",fetchStructuralFolders:"fetchStructuralFolders"})),(0,je.OI)("design",{resetState:"UPDATE_resetState",clearSelection:"UPDATE_clearSelection",setCurrLocation:"SET_currLocation",setFolders:"SET_folders",snapshotFolders:"UPDATE_snapshotFolders",setIsErrorShowing:"SET_isErrorShowing",setBottomMenu:"SET_bottomMenu",setDesignBuffer:"SET_mobileDesignBuffer",setPathBuffer:"SET_mobilePathBuffer"})),{handleGoTo(e){this.setCurrLocation(e)},handlePushMenu(e){this.menuStack.push(e)},handlePrevMenu(){if(this.menuStack.length){const e=this.menuStack.pop();this.setBottomMenu(e)}else this.setBottomMenu("")},handleClearSelection(){this.$nextTick((()=>{this.clearSelection()}))},handleMenuAction(e){const{event:t,payload:i}=e;switch(t){case"moveItem":switch(i){case"design":this.pushItem("move-design");break;case"folder":this.pushItem("move-folder");break;case"multi":this.pushItem("move-designs");break}break;case"deleteItem":this.pushItem("delete");break;case"favorDesign":this.pushItem("favor-design");break;case"unfavorDesign":this.pushItem("unfavor-design");break;case"recoverItem":switch(i.type){case"design":this.pushItem("undo-design");break;case"folder":this.pushItem("undo-folder");break;case"multi":this.pushItem("undo-multi");break}break;case"rootDesign":this.pushItem("root-design");break;case"rootFolder":this.pushItem("root-folder");break;case"deleteForever":this.designBuffer=i,this.confirmMessage="delete-forever";break;case"deleteFolderForever":this.pathedFolderBuffer={parents:[],folder:i},this.confirmMessage="delete-forever";break;case"deleteAllForever":this.confirmMessage="delete-forever";break;case"moveDesignToFolder":this.menuStack.push(this.bottomMenu),this.snapshotFolders(),this.setBottomMenu("move-folder");break;case"deleteAll":this.confirmMessage="delete-all";break;case"deleteFolder":this.pathedFolderBuffer=i,this.confirmMessage="delete-folder";break}},pushItem(e){this.messageQueue.push({type:e}),1===this.messageQueue.length&&this.showMessage()},showMessage(){const e=this.messageQueue[0];e&&(this.isShowMessage=!0,setTimeout((()=>{this.isShowMessage=!1,setTimeout((()=>{this.messageQueue.shift(),this.showMessage()}),500)}),3e3))},messageItemIcon(e){switch(e.type){case"move-design":case"move-designs":case"move-folder":case"root-design":case"root-folder":return"folder";case"delete":return"trash";case"favor-design":return"favorites-fill";case"unfavor-design":return"favorites";case"undo-design":case"undo-folder":case"undo-multi":return"undo";default:return""}},messageItemText(e){switch(e.type){case"move-design":return`${this.$t("NN0682",{item:this.$tc("NN0252"),dest:this.$tc("NN0253").toLowerCase()})}`;case"move-designs":return`${this.$t("NN0682",{item:this.$tc("NN0252",2),dest:this.$tc("NN0253").toLowerCase()})}`;case"move-folder":return`${this.$t("NN0682",{item:this.$tc("NN0253"),dest:this.$tc("NN0253").toLowerCase()})}`;case"root-design":return`${this.$t("NN0682",{item:this.$tc("NN0252"),dest:`${this.$t("NN0080")}`.toLowerCase()})}`;case"root-folder":return`${this.$t("NN0704")}`;case"delete":return`${this.$t("NN0685")}`;case"favor-design":return`${this.$t("NN0683")}`;case"unfavor-design":return`${this.$t("NN0684")}`;case"undo-design":return`${this.$t("NN0686",{item:this.$tc("NN0252")})}`;case"undo-folder":return`${this.$t("NN0686",{item:this.$tc("NN0253")})}`;case"undo-multi":return`${this.$t("NN0686",{item:this.$tc("NN0687",2)})}`;default:return""}},getMessageText(){switch(this.confirmMessage){case"delete-forever":return`${this.$t("NN0200")}`;case"delete-all":return`${this.$t("NN0693")}`;case"delete-folder":return`${this.$t("NN0199")}`;default:return""}},getMessageDescription(){switch(this.confirmMessage){case"delete-forever":return this.selectedNum>1?`${this.$tc("NN0201",2)}`:`${this.$tc("NN0201",1)}`;case"delete-all":return`${this.$t("NN0244")}`;case"delete-folder":return`${this.$t("NN0694")}<br>${this.$t("NN0246")}`;default:return""}},deleteForeverConfirmed(){return this.designBuffer?(Ie.ZP.deleteForever(this.designBuffer),void(this.designBuffer=void 0)):this.pathedFolderBuffer?(Ie.ZP.deleteFolderForever(this.pathedFolderBuffer.folder),void(this.pathedFolderBuffer=void 0)):void(this.isAnySelected&&Ie.ZP.deleteAllForever(Object.values(this.selectedDesigns),Object.values(this.selectedFolders)))},closeConfirmMessage(){this.confirmMessage="",this.pathedFolderBuffer=void 0,this.designBuffer=void 0},closeErrorMessage(){this.setIsErrorShowing(!1)},confirmAction(){switch(this.confirmMessage){case"delete-forever":this.deleteForeverConfirmed();break;case"delete-all":Ie.ZP.deleteAll(Object.values(this.selectedDesigns));break;case"delete-folder":this.pathedFolderBuffer&&Ie.ZP.deleteFolder(this.pathedFolderBuffer);break}this.closeConfirmMessage()},renderedWidth(e){var t;return null!=(t=e.width)?t:"24px"},renderedHeight(e){var t,i;return null!=(i=null!=(t=e.height)?t:e.width)?i:"24px"}})});const rc=(0,Ve.Z)(lc,[["render",wo],["__scopeId","data-v-4c443fd6"],["__file","MyDesignMobile.vue"]]);var ac=rc,dc=(0,s.aZ)({emits:[],name:"MyDesign",data(){return{isMobile:0}},props:{view:{type:String,required:!0}},components:{MyDesignPc:to,MyDesignMobile:ac},mounted(){window.addEventListener("resize",this.handleResize),this.handleResize()},unmounted(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize(){this.isMobile=Gd.Z.getWidth()<=540?1:-1}}});const cc=(0,Ve.Z)(dc,[["render",o],["__scopeId","data-v-b3635182"],["__file","MyDesign.vue"]]);var hc=cc},32876:function(e,t,i){e.exports=i.p+"img/delete-confirm.17d8d724.png"},648:function(e,t,i){e.exports=i.p+"img/empty-folder.d4f94e70.png"},64244:function(e,t,i){e.exports=i.p+"c860cd0e90d2102c.svg"},67263:function(e,t,i){e.exports=i.p+"703b0459b40ce8a8.svg"}}]);
//# sourceMappingURL=817.41b4173e.js.map