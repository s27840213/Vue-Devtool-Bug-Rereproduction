"use strict";(self["webpackChunknueditor"]=self["webpackChunknueditor"]||[]).push([[65],{3065:function(e,i,s){s.r(i),s.d(i,{default:function(){return ne}});var t=s(29651),o=s(819),n=s(41463);const l={style:{position:"relative"}},a={class:"signup-wrapper popup-window"},r={key:0,class:"signup signup-p0"},c={class:"signup-p0__img"},d=["src"],g={class:"signup-p0__title text-center"},p={class:"text-blue-1 heading-5"},h={class:"signup-p0__desc"},u={class:"signup-p0__fb"},m=["src"],w={class:"body-2"},v={class:"signup-p0__google"},N=["src"],k={class:"body-2"},y={class:"signup-p0__mail"},_={class:"signup-p0__login"},C={class:"signup-p0__close page-close"},f={key:1,class:"signup signup-p1"},L={class:"text-blue-1"},b={class:"label-mid"},$=["placeholder"],x={key:0,class:"invalid-message"},P={class:"label-mid"},Z=["placeholder"],V={key:0,class:"invalid-message"},z={class:"label-mid"},W=["placeholder","type"],E={key:1,class:"invalid-message"},U=["href"],I=["href"],R={key:2,class:"signup signup-p2"},q={class:"text-center"},A={class:"text-blue-1 heading-5"},T={class:"body-2"},S={key:0,class:"invalid-message"},D={style:{"margin-bottom":"15px"}},M={class:"page-close"},B={key:0,class:"flex flex-between align-center",style:{height:"30px","margin-bottom":"0"}},F={key:1,class:"flex align-center text-gray-3",style:{height:"30px","margin-bottom":"0"}};function G(e,i,G,j,H,O){const J=(0,t.up)("btn"),Y=(0,t.up)("svg-icon"),K=(0,t.up)("property-bar"),Q=(0,t.up)("i18n-t"),X=(0,t.up)("nubtn"),ee=(0,t.up)("spinner");return(0,t.wg)(),(0,t.iD)("div",l,[(0,t._)("div",a,[0===e.currentPageIndex?((0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("div",c,[(0,t._)("img",{src:s(85733),style:{width:"180px",height:"133px"}},null,8,d)]),(0,t._)("div",g,[(0,t._)("span",p,(0,o.zw)(e.$t("NN0300")),1)]),(0,t._)("div",h,[(0,t._)("div",null,(0,o.zw)(e.$t("NN0301")),1),(0,t._)("div",null,(0,o.zw)(e.$t("NN0302")),1)]),e.inReviewMode?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t._)("div",u,[(0,t.Wm)(J,{onClick:i[0]||(i[0]=i=>e.onFacebookClicked()),type:"icon-mid-body"}),(0,t._)("img",{src:s(71730)},null,8,m),(0,t._)("span",w,(0,o.zw)(e.$t("NN0303",{media:"Facebook"})),1)]),(0,t._)("div",v,[(0,t.Wm)(J,{onClick:i[1]||(i[1]=i=>e.onGoogleClicked()),type:"icon-mid-body"}),(0,t._)("img",{src:s(3362)},null,8,N),(0,t._)("span",k,(0,o.zw)(e.$t("NN0303",{media:"Google"})),1)])],64)),(0,t._)("div",y,[(0,t.Wm)(J,{onClick:i[2]||(i[2]=i=>e.onEmailClicked()),type:"icon-mid-body text-white"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("NN0303",{media:e.$tc("NN0173",2)})),1)])),_:1})]),(0,t._)("div",_,[(0,t._)("span",null,(0,o.zw)(e.$t("NN0304")),1),(0,t.Wm)(J,{class:"h-link",type:"icon",onClick:i[3]||(i[3]=i=>e.onLoginClicked())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("NN0305")),1)])),_:1})]),(0,t._)("div",C,[(0,t._)("button",{onClick:i[4]||(i[4]=(...i)=>e.onCloseClicked&&e.onCloseClicked(...i))},[(0,t.Wm)(Y,{class:"pointer",iconName:"page-close",iconWidth:"15px",iconColor:"gray-3"})])])])):(0,t.kq)("",!0),1===e.currentPageIndex?((0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("div",null,[(0,t._)("button",{onClick:i[5]||(i[5]=(...i)=>e.onBackClicked&&e.onBackClicked(...i))},[(0,t.Wm)(Y,{class:"pointer",iconName:"page-back",iconWidth:"15px",iconColor:"gray-3"})]),(0,t._)("span",L,(0,o.zw)(e.$t("NN0306")),1),(0,t._)("button",{onClick:i[6]||(i[6]=(...i)=>e.onCloseClicked&&e.onCloseClicked(...i))},[(0,t.Wm)(Y,{class:"pointer",iconName:"page-close",iconWidth:"15px",iconColor:"gray-3"})])]),(0,t._)("div",null,[(0,t._)("div",null,[(0,t._)("span",b,(0,o.zw)(e.$t("NN0172")),1),(0,t.Wm)(K,{class:(0,o.C_)(["mt-5",{"input-invalid":!e.nameValid}])},{default:(0,t.w5)((()=>[(0,t.wy)((0,t._)("input",{class:"body-2 text-gray-2","onUpdate:modelValue":i[7]||(i[7]=i=>e.name=i),type:"text",name:"name",placeholder:e.$t("NN0163",{term:e.$t("NN0172")})},null,8,$),[[n.nr,e.name]])])),_:1},8,["class"]),e.nameValid?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",x,[(0,t._)("span",null,(0,o.zw)(e.$t("NN0163",{term:e.$t("NN0172")})),1)]))]),(0,t._)("div",null,[(0,t._)("span",P,(0,o.zw)(e.$tc("NN0173",1)),1),(0,t.Wm)(K,{class:(0,o.C_)(["mt-5",{"input-invalid":!e.mailValid}])},{default:(0,t.w5)((()=>[(0,t.wy)((0,t._)("input",{class:"body-2 text-gray-2","onUpdate:modelValue":i[8]||(i[8]=i=>e.email=i),type:"email",name:"email",placeholder:e.$t("NN0163",{term:e.$tc("NN0173",2)})},null,8,Z),[[n.nr,e.email]])])),_:1},8,["class"]),e.mailValid?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",V,[(0,t._)("span",null,(0,o.zw)(e.mailErrorMessage),1)]))]),(0,t._)("div",null,[(0,t._)("span",z,(0,o.zw)(e.$tc("NN0180",1)),1),(0,t.Wm)(K,{class:(0,o.C_)(["mt-5",{"input-invalid":!e.passwordValid}])},{default:(0,t.w5)((()=>[(0,t.wy)((0,t._)("input",{class:"body-2 text-gray-2","onUpdate:modelValue":i[9]||(i[9]=i=>e.password=i),placeholder:e.$t("NN0163",{term:e.$tc("NN0180",2)}),type:e.togglePeerPasswordInput},null,8,W),[[n.YZ,e.password]]),(0,t._)("button",{onClick:i[10]||(i[10]=i=>e.isPeerPassword=!e.isPeerPassword)},[(0,t.Wm)(Y,{class:"pointer",iconName:e.togglePeerPasswordIcon,iconWidth:"20px",iconColor:"gray-2"},null,8,["iconName"])])])),_:1},8,["class"]),e.emptyPassword||e.emailResponseError?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"password-hint",style:(0,o.j5)(""+(e.passwordValid&&!e.emailResponseError?"":"color: #EB5757;"))},[(0,t._)("span",null,(0,o.zw)(e.passwordHint),1)],4)):((0,t.wg)(),(0,t.iD)("div",E,[(0,t._)("div",null,[(0,t.Wm)(Y,{class:"pointer",iconName:(e.passwordLengthValid?"":"un")+"check",iconWidth:"25px",iconColor:""+(e.passwordLengthValid?"green-1":"red")},null,8,["iconName","iconColor"]),(0,t._)("span",{class:(0,o.C_)(["ml-5 mt-2",{"text-green-1":e.passwordLengthValid}])},(0,o.zw)(e.$t("NN0293",{len:8})),3)]),(0,t._)("div",null,[(0,t.Wm)(Y,{class:"pointer",iconName:(e.passwordContainEng?"":"un")+"check",iconWidth:"25px",iconColor:""+(e.passwordContainEng?"green-1":"red")},null,8,["iconName","iconColor"]),(0,t._)("span",{class:(0,o.C_)(["ml-5 mt-2",{"text-green-1":e.passwordContainEng}])},(0,o.zw)(e.$t("NN0294")),3)]),(0,t._)("div",null,[(0,t.Wm)(Y,{class:"pointer",iconName:(e.passwordContainNum?"":"un")+"check",iconWidth:"25px",iconColor:""+(e.passwordContainNum?"green-1":"red")},null,8,["iconName","iconColor"]),(0,t._)("span",{class:(0,o.C_)(["ml-5 mt-2",{"text-green-1":e.passwordContainNum}])},(0,o.zw)(e.$t("NN0295")),3)])]))])]),(0,t._)("div",null,[(0,t.Wm)(J,{class:"bg-gray-2 text-white btn-shadow",type:"primary-mid",onClick:i[11]||(i[11]=i=>e.onSignUpClicked())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$tc("NN0169",2)),1)])),_:1})]),(0,t._)("div",null,[(0,t.Wm)(Q,{keypath:"NN0307",tag:"span"},{use:(0,t.w5)((()=>[(0,t._)("a",{class:"h-link",href:e.termsPage},(0,o.zw)(e.$t("NN0162")),9,U)])),privacy:(0,t.w5)((()=>[(0,t._)("a",{class:"h-link",href:e.privacyPage},(0,o.zw)(e.$t("NN0161")),9,I)])),_:1})]),(0,t._)("div",null,[(0,t._)("span",null,(0,o.zw)(e.$t("NN0304")),1),(0,t.Wm)(J,{class:"h-link",type:"icon",onClick:i[12]||(i[12]=i=>e.onLoginClicked())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("NN0305")),1)])),_:1})])])):(0,t.kq)("",!0),2===e.currentPageIndex?((0,t.wg)(),(0,t.iD)("div",R,[(0,t._)("div",q,[(0,t._)("span",A,(0,o.zw)(e.$t("NN0284")),1)]),(0,t._)("div",null,[(0,t._)("span",T,(0,o.zw)(e.$t("NN0285",{email:e.email,time:10})),1)]),(0,t._)("div",null,[(0,t.Wm)(K,{class:(0,o.C_)({"input-invalid":!e.vcodeValid})},{default:(0,t.w5)((()=>[(0,t.wy)((0,t._)("input",{class:"body-2 text-gray-2","onUpdate:modelValue":i[13]||(i[13]=i=>e.vcode=i),type:"text",name:"vcode",placeholder:"Enter code"},null,512),[[n.nr,e.vcode]])])),_:1},8,["class"]),e.vcodeValid?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",S,[(0,t._)("span",null,(0,o.zw)(e.vcodeErrorMessage),1)]))]),(0,t._)("div",D,[(0,t.Wm)(X,{size:"mid-full",onClick:i[14]||(i[14]=i=>e.onEnterCodeDoneClicked())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$tc("NN0133",2)),1)])),_:1})]),(0,t._)("div",M,[(0,t._)("button",{onClick:i[15]||(i[15]=(...i)=>e.onCloseClicked&&e.onCloseClicked(...i))},[(0,t.Wm)(Y,{class:"pointer",iconName:"page-close",iconWidth:"15px",iconColor:"gray-3"})])]),e.resendAvailable?((0,t.wg)(),(0,t.iD)("div",B,[(0,t._)("span",null,(0,o.zw)(e.$t("NN0288")),1),(0,t.Wm)(J,{class:"text-blue-1 body-1",type:"icon",onClick:i[16]||(i[16]=i=>e.onResendClicked())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("NN0290")),1)])),_:1})])):((0,t.wg)(),(0,t.iD)("div",F,[(0,t._)("span",null,(0,o.zw)(e.leftTimeText),1)]))])):(0,t.kq)("",!0)]),e.isLoading?((0,t.wg)(),(0,t.j4)(ee,{key:0})):(0,t.kq)("",!0)])}var j=s(72869),H=s(89497),O=s(27502),J=s(99504),Y=s(37658),K=s(53074),Q=s(3665),X=s(47147),ee=s(50559),ie=(e,i,s)=>new Promise(((t,o)=>{var n=e=>{try{a(s.next(e))}catch(i){o(i)}},l=e=>{try{a(s.throw(e))}catch(i){o(i)}},a=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,l);a((s=s.apply(e,i)).next())})),se=(0,t.aZ)({emits:[],name:"SignUp",props:{redirect:{type:String,default:void 0}},data(){return{name:"",email:"",password:"",vcode:"",currentPageIndex:0,leftTime:60,leftTimeText:"",resendAvailable:!0,isSignUpClicked:!1,emailResponseError:!1,passwordHint:this.$t("NN0308"),vcodeErrorMessage:this.$t("NN0298"),isVcodeClicked:!1,isPeerPassword:!1,isRollbackByGoogleSignIn:window.location.href.indexOf("googleapi")>-1,isLoading:!1,privacyPage:"",termsPage:""}},created(){if(this.$route.query.state){const e=this.$route.query.state,i=JSON.parse(e).platform,s=JSON.parse(e).redirect;if(this.isRollbackByGoogleSignIn&&!H.Z.getters["user/isLogin"]&&"google_vivipic"===i){this.isLoading=!0;const e=this.$route.query.code,i=window.location.href.split("?")[0];this.googleLogin(e,i,s)}if(!H.Z.getters["user/isLogin"]&&"fb_vivipic"===i)if(this.isLoading=!0,this.$route.query.error)this.isLoading=!1,K.Z.setLogAndConsoleLog(`fb login error, reason: ${this.$route.query.error_reason}`),this.$router.push({query:{}});else{const e=this.$route.query.code,i=window.location.href;this.fbLogin(e,i,s)}}switch(this.currLocale){case"tw":this.privacyPage="https://blog.vivipic.com/tw/tw-privacy-policy/",this.termsPage="https://blog.vivipic.com/tw/tw-agreement/";break;case"jp":this.privacyPage="https://blog.vivipic.com/jp/jp-privacy-policy/",this.termsPage="https://blog.vivipic.com/jp/jp-terms-of-use/";break;default:this.privacyPage="https://blog.vivipic.com/us-privacy-policy/",this.termsPage="https://blog.vivipic.com/us-terms-of-use/";break}},computed:{inReviewMode(){return X.Z.inReviewMode},nameValid(){return!this.isSignUpClicked||this.name.length>0},mailValid(){return!this.isSignUpClicked||this.email.length>0&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.email)},mailErrorMessage(){return 0===this.email.length?this.$t("NN0163",{term:this.$tc("NN0173",2)}):this.$t("NN0297")},passwordLengthValid(){return this.password.length>=8},passwordContainEng(){return!!this.password.match(/.*[a-zA-Z]+.*/)},passwordContainNum(){return!!this.password.match(/.*[0-9]+.*/)},emptyPassword(){return 0===this.password.length},passwordValid(){return!this.isSignUpClicked||!!(this.passwordLengthValid&&this.passwordContainEng&&this.passwordContainNum)},togglePeerPasswordIcon(){return"eye"+(this.isPeerPassword?"-slash":"")},togglePeerPasswordInput(){return""+(this.isPeerPassword?"text":"password")},vcodeValid(){return!this.isVcodeClicked||this.vcode.length>0},currLocale(){return Y.Z.currLocale()}},methods:{fbLogin(e,i,s){return ie(this,null,(function*(){try{const{data:t}=yield j.Z.fbLogin(e,i,this.currLocale);this.handleLoginResult(t,"Facebook","fb",s)}catch(t){K.Z.setLogForError(t)}}))},googleLogin(e,i,s){return ie(this,null,(function*(){try{const{data:t}=yield j.Z.googleLogin(e,i,this.currLocale);this.handleLoginResult(t,"Google","google",s)}catch(t){K.Z.setLogForError(t)}}))},handleLoginResult(e,i,s,t){0===e.flag?(e.data.new_user&&(X.Z.inBrowserMode?O.Z.fbq("track","CompleteRegistration"):X.Z.sendAdEvent("register"),J.Z.signUp(i)),H.Z.dispatch("user/loginSetup",{data:e}),this.$router.push(this.redirect||t||"/")):(K.Z.setLogAndConsoleLog(`${s} login failed`),(0,ee.h4)({group:"error",text:e.msg})),this.isLoading=!1},onEmailClicked(){this.isLoading=!0,this.currentPageIndex=1,this.isLoading=!1},onLoginClicked(){this.redirect?this.$router.push({name:"Login",query:{redirect:this.redirect}}):this.$router.push({name:"Login"})},onBackClicked(){this.isLoading=!0,this.currentPageIndex=0,this.isLoading=!1},onCloseClicked(){K.Z.setLogAndConsoleLog("Click close icon"),this.$router.push({name:"Home"})},onSignUpClicked(){return ie(this,null,(function*(){if(this.emailResponseError=!1,this.isSignUpClicked=!0,this.isLoading=!0,!this.nameValid||!this.mailValid||!this.passwordValid)return this.isLoading=!1,void(this.passwordHint=this.$t("NN0308"));const e={uname:this.name,account:this.email,upass:this.password,locale:this.currLocale},i=yield H.Z.dispatch("user/register",e);0===i.flag?(this.currentPageIndex=2,this.isVcodeClicked=!1):(this.emailResponseError=!0,this.passwordHint=i.msg||this.$t("NN0242")),this.isLoading=!1}))},onResendClicked(){return ie(this,null,(function*(){if(K.Z.setLogAndConsoleLog("Resend Vcode"),this.isLoading=!0,0===this.email.length)return this.currentPageIndex=0,void(this.isLoading=!1);this.resendAvailable=!1,this.leftTimeText=this.$t("NN0289",{time:this.leftTime});const e={account:this.email,register:"1",vcode_only:"1",locale:this.currLocale,type:3},i=yield H.Z.dispatch("user/sendVcode",e);if(0===i.flag){this.isLoading=!1;const e=window.setInterval((()=>{this.leftTime--,this.leftTimeText=this.$t("NN0289",{time:this.leftTime}),0===this.leftTime&&(window.clearInterval(e),this.resendAvailable=!0,this.leftTimeText="",this.leftTime=60)}),1e3)}else this.currentPageIndex=0,this.isLoading=!1}))},onEnterCodeDoneClicked(){return ie(this,null,(function*(){if(this.isVcodeClicked=!0,this.isLoading=!0,0===this.email.length)return this.currentPageIndex=0,void(this.isLoading=!1);if(!this.vcodeValid)return this.vcodeErrorMessage=this.$t("NN0163",{term:this.$t("NN0286")}),void(this.isLoading=!1);const e={account:this.email,vcode:this.vcode,locale:this.currLocale,type:3},i=yield H.Z.dispatch("user/verifyVcode",e);0===i.flag?(X.Z.inBrowserMode?O.Z.fbq("track","CompleteRegistration"):X.Z.sendAdEvent("register"),K.Z.setLogAndConsoleLog("Verify Vcode and register success"),J.Z.signUp("Vivipic"),yield H.Z.dispatch("user/login",{token:i.token}),this.$router.push(this.redirect||"/"),this.currentPageIndex=0):(K.Z.setLogAndConsoleLog(`Verify Vcode failed (msg: ${i.msg})`),this.vcode="",this.vcodeErrorMessage=i.msg||this.$t("NN0242")),this.isLoading=!1}))},onFacebookClicked(){return ie(this,null,(function*(){if(K.Z.setLogAndConsoleLog("Click Facebook login"),X.Z.inBrowserMode)Q.Z.onFacebookClicked(this.redirect);else{this.isLoading=!0;const e=yield X.Z.login("Facebook",this.$i18n.locale);this.isLoading=!1,this.handleLoginResult(e,"Facebook","fb")}}))},onGoogleClicked(){return ie(this,null,(function*(){if(K.Z.setLogAndConsoleLog("Click Google login"),X.Z.inBrowserMode)Q.Z.onGoogleClicked(this.redirect);else{this.isLoading=!0;const e=yield X.Z.login("Google",this.$i18n.locale);this.isLoading=!1,this.handleLoginResult(e,"Google","google")}}))}}}),te=s(53372);const oe=(0,te.Z)(se,[["render",G],["__scopeId","data-v-5627835c"],["__file","SignUp.vue"]]);var ne=oe},71730:function(e,i,s){e.exports=s.p+"img/facebook.99863c56.png"},3362:function(e,i,s){e.exports=s.p+"img/google.4f09c2b1.png"},85733:function(e,i,s){e.exports=s.p+"53b8802f7def58ef.svg"}}]);
//# sourceMappingURL=65.564f2a4a.js.map