(function(){var e={71684:function(e,t,n){"use strict";function r(){const e=localStorage.getItem("token")||"";return e?{token:e}:{}}n.d(t,{Z:function(){return r}})},16122:function(e,t,n){"use strict";var r=n(50719);t["Z"]={getDesignInfo:(e,t,n,i,o)=>(0,r.Z)("/update-design",{method:"POST",data:{token:e,key_id:n,type:t,query:i,data:o}}),updateDesignInfo:(e,t,n,i,o)=>(0,r.Z)("/update-design",{method:"POST",data:{token:e,key_id:n,type:t,query:i,data:o}})}},90469:function(e,t,n){"use strict";var r=n(50719),i=n(47931),o=n(89497),s=n(23931),a=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(l)for(var n of l(t))d.call(t,n)&&u(e,n,t[n]);return e},p=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));t["Z"]={getToken(){return o.Z.getters["user/getToken"]},getLocale(){return s.Z.global.locale},getUserId(){return o.Z.getters["user/getUserId"]},getTeamId(){return o.Z.getters["user/getTeamId"]},getAssetIndex(e){return e.asset_index.toString()},getAssetIndices(e){return e.map((e=>this.getAssetIndex(e))).join(",")},getFolderIds(e){return e.map((e=>e.id)).join(",")},getDesign(e,t){return p(this,null,(function*(){return yield i.Z.requestWithRetry((()=>(0,r.Z)("/list-asset",{method:"POST",data:{token:this.getToken(),type:"design",team_id:e,asset_id:t}})))}))},getDesigns(e,t,n,o,s){return p(this,arguments,(function*(e,t,n,o,s,a={}){return yield i.Z.requestWithRetry((()=>(0,r.Z)("/list-asset",{method:"POST",data:g({type:"design",token:e,data:n,order_by:`${o}:${s?"desc":"asc"}`,path:t},a)})))}))},updateDesigns(e,t,n,o,s,a,l){return p(this,null,(function*(){return yield i.Z.requestWithRetry((()=>{const i={method:"POST",data:{type:"design",token:e,locale:t,team_id:n,update_type:o,target:l}};return null!=s&&(i.data.src_asset=s),null!=a&&(i.data.src_folder=a),(0,r.Z)("/update-asset",i)}))}))}}},50719:function(e,t,n){"use strict";var r=n(36830),i=n.n(r);const o={baseURL:"https://apiv2.vivipic.com/",headers:{Accept:"text/plain","Content-Type":"text/plain"}},s=i().create(o);t["Z"]=s},72625:function(e,t,n){"use strict";var r=n(50719),i=n(89497),o=n(37658),s=n(71684),a=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(l)for(var n of l(t))d.call(t,n)&&u(e,n,t[n]);return e};class p{getList(e){const t=g(g({token:e.token||"1",type:e.type,locale:e.locale||"tw",page_index:e.pageIndex,list_all:e.listAll,list_category:e.listCategory,keyword:e.keyword,font_list:e.fontList,theme:e.theme,group_id:e.groupId,cache:e.cache,platform:e.cache?window.location.host:null,ver:e.cache?i.Z.getters["user/getVerApi"]:null,all_theme:e.all_theme},1===e.shuffle&&{shuffle:e.shuffle}),i.Z.getters["user/isAdmin"]&&/app=1/.test(window.location.href)?{app:1}:{});return r.Z.request({url:"/list-design",method:"GET",params:t})}getSvg(e){return e.type="svg",this.getList(e)}getTemplate(e){return e.type="template",this.getList(e)}getText(e){return e.type="text",this.getList(e)}getBackground(e){return e.type="background",this.getList(e)}getFont(e){return e.type="font",e.fontList=2,this.getList(e)}getMarker(e){return e.type="marker",e.token="1",e.cache=!0,this.getList(e)}getLayout(e){return e.type="layout",this.getList(e)}getHashtag(e){return e.type="hashtag",e.token="1",e.cache=!0,this.getList(e)}addDesign(e,t,n={}){const i=g({token:(0,s.Z)().token,type:t,design_id:e,locale:o.Z.currLocale()},n);return i.token?r.Z.request({url:"/add-design",method:"POST",data:i}):new Promise((e=>e({flag:1})))}getTheme(e){return e.type="theme",e.locale=o.Z.currLocale(),e.token="1",e.all_theme=1,e.cache=!0,this.getList(e)}getRecentlyUsedColor(){return this.getList({token:(0,s.Z)().token||"",locale:o.Z.currLocale(),type:"color"})}addRecentlyUsedColor(e){return r.Z.request({url:"/add-design",method:"POST",data:{token:(0,s.Z)().token||"",type:"color",design_id:e,locale:o.Z.currLocale()}})}}t["Z"]=new p},72869:function(e,t,n){"use strict";var r=n(50719),i=n(23931),o=n(89497),s=n(47931),a=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(d)for(var n of d(t))g.call(t,n)&&p(e,n,t[n]);return e},m=(e,t)=>l(e,c(t)),y=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));t["Z"]={getToken(){return o.Z.getters["user/getToken"]},getLocale(){return i.Z.global.locale},getTeamId(){return o.Z.getters["user/getTeamId"]},getAllAssets:(e,t={})=>(0,r.Z)("/list-asset",{method:"POST",data:h({token:e,team_id:o.Z.getters["user/getTeamId"]},t)}),login(e,t,n){return(0,r.Z)("/login",{method:"POST",data:{token:e,account:t,password:n,locale:this.getLocale()}})},deleteAccount(){return(0,r.Z)("/delete-account",{method:"POST",data:{token:this.getToken()}})},putAssetDesign:(e,t,n,i,o)=>(0,r.Z)("/put-asset-design",{method:"POST",data:h({token:e,team_id:t,asset_id:n,type:i},void 0!==o&&{wait:o})}),deleteAssets:(e,t)=>(0,r.Z)("/delete-asset",{method:"POST",data:{token:e,key_list:t}}),updateAsset:e=>(0,r.Z)("/update-asset",{method:"POST",data:h({},e)}),groupDesign:e=>(0,r.Z)("/group-design",{method:"POST",data:h({},e)}),register:(e,t)=>(0,r.Z)("/register",{method:"POST",data:{token:e,meta:t}}),sendVcode:(e,t,n,i,o,s,a,l)=>(0,r.Z)("/send-vcode",{method:"POST",data:{uname:e,account:t,upass:n,register:i,vcode_only:o,type:s,token:a,locale:l}}),verifyVcode:(e,t,n,i,o)=>(0,r.Z)("/verify-vcode",{method:"POST",data:{account:e,vcode:t,token:n,type:i,locale:o,campaign:localStorage.getItem("campaign")||void 0}}),updateUser:(e,t,n,i,o,s,a,l,c)=>(0,r.Z)("/update-user",{method:"POST",data:{token:e,account:t,upass:n,uname:i,locale:o,subscribe:s,country:a,device:l,app:c}}),fbLogin:(e,t,n)=>(0,r.Z)("/fb-login",{method:"POST",data:{code:e,redirect_uri:t,locale:n,campaign:localStorage.getItem("campaign")||void 0}}),googleLogin:(e,t,n)=>(0,r.Z)("/google-login",{method:"POST",data:{code:e,redirect_uri:t,locale:n,campaign:localStorage.getItem("campaign")||void 0}}),updateUserViewGuide:(e,t)=>(0,r.Z)("/update-user",{method:"POST",data:{token:e,view_guide:t}}),removeBg(e,t){return y(this,null,(function*(){return yield s.Z.requestWithRetry((()=>(0,r.Z)("/remove-bg",{method:"POST",data:m(h({token:this.getToken(),locale:this.getLocale(),src_obj:e,team_id:this.getTeamId()},void 0!==t&&{aspect:t}),{debug:0})})))}))}}},23931:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r={NN0001:e=>{const{normalize:t}=e;return t(["テンプレート"])},NN0002:e=>{const{normalize:t}=e;return t(["画像"])},NN0003:e=>{const{normalize:t}=e;return t(["素材"])},NN0004:e=>{const{normalize:t}=e;return t(["背景"])},NN0005:e=>{const{normalize:t}=e;return t(["テキスト"])},NN0006:e=>{const{normalize:t}=e;return t(["アップロード"])},NN0007:e=>{const{normalize:t}=e;return t(["ブランドキット"])},NN0008:e=>{const{normalize:t}=e;return t(["ファイル"])},NN0009:e=>{const{normalize:t}=e;return t(["保存"])},NN0010:e=>{const{normalize:t}=e;return t(["ダウンロード"])},NN0011:e=>{const{normalize:t}=e;return t(["見出しを追加"])},NN0012:e=>{const{normalize:t}=e;return t(["小見出しを追加"])},NN0013:e=>{const{normalize:t}=e;return t(["本文を追加"])},NN0014:e=>{const{normalize:t}=e;return t(["アップロード"])},NN0015:e=>{const{normalize:t}=e;return t(["ロゴ"])},NN0016:e=>{const{normalize:t}=e;return t(["ロゴ画像をアップロード"])},NN0017:e=>{const{normalize:t}=e;return t(["カラー"])},NN0018:e=>{const{normalize:t}=e;return t(["カラー追加"])},NN0019:e=>{const{normalize:t}=e;return t(["テキストスタイル"])},NN0020:e=>{const{normalize:t}=e;return t(["テキストの追加"])},NN0021:e=>{const{normalize:t}=e;return t(["ページサイズ"])},NN0022:e=>{const{normalize:t}=e;return t(["サイズ変更"])},NN0023:e=>{const{normalize:t}=e;return t(["カスタムサイズ"])},NN0024:e=>{const{normalize:t}=e;return t(["最近使用した "])},NN0025:e=>{const{normalize:t}=e;return t(["よく使うサイズ"])},NN0026:e=>{const{normalize:t}=e;return t(["Instagramストーリー"])},NN0027:e=>{const{normalize:t}=e;return t(["EC商品画像"])},NN0028:e=>{const{normalize:t}=e;return t(["ECサイト用バナー"])},NN0029:e=>{const{normalize:t}=e;return t(["グループ"])},NN0030:e=>{const{normalize:t}=e;return t(["透明度"])},NN0031:e=>{const{normalize:t}=e;return t(["オブジェクトの順序"])},NN0032:e=>{const{normalize:t}=e;return t(["コピー"])},NN0033:e=>{const{normalize:t}=e;return t(["レイヤーのロックを解除する"])},NN0034:e=>{const{normalize:t}=e;return t(["削除"])},NN0035:e=>{const{normalize:t}=e;return t(["書式のコピー"])},NN0036:e=>{const{normalize:t}=e;return t(["切り取り"])},NN0037:e=>{const{normalize:t}=e;return t(["検索"])},NN0038:e=>{const{normalize:t}=e;return t(["反転"])},NN0039:e=>{const{normalize:t}=e;return t(["画像編集"])},NN0040:e=>{const{normalize:t}=e;return t(["切り取り"])},NN0041:e=>{const{normalize:t}=e;return t(["フィルター"])},NN0042:e=>{const{normalize:t}=e;return t(["調整"])},NN0043:e=>{const{normalize:t}=e;return t(["背景リムーバー"])},NN0044:e=>{const{normalize:t}=e;return t(["整列"])},NN0045:e=>{const{normalize:t}=e;return t(["オブジェクトの整列"])},NN0046:e=>{const{normalize:t}=e;return t(["左揃え"])},NN0047:e=>{const{normalize:t}=e;return t(["左右中央揃え"])},NN0048:e=>{const{normalize:t}=e;return t(["右揃え"])},NN0049:e=>{const{normalize:t}=e;return t(["上揃え"])},NN0050:e=>{const{normalize:t}=e;return t(["上下中央揃え"])},NN0051:e=>{const{normalize:t}=e;return t(["下揃え"])},NN0052:e=>{const{normalize:t}=e;return t(["反転"])},NN0053:e=>{const{normalize:t}=e;return t(["左右反転"])},NN0054:e=>{const{normalize:t}=e;return t(["上下反転"])},NN0055:e=>{const{normalize:t}=e;return t(["明るさ"])},NN0056:e=>{const{normalize:t}=e;return t(["コントラスト"])},NN0057:e=>{const{normalize:t}=e;return t(["鮮やかさ"])},NN0058:e=>{const{normalize:t}=e;return t(["カラー"])},NN0059:e=>{const{normalize:t}=e;return t(["ぼかし"])},NN0060:e=>{const{normalize:t}=e;return t(["ビネットコントロール"])},NN0061:e=>{const{normalize:t}=e;return t(["色温度"])},NN0062:e=>{const{normalize:t}=e;return t(["テキスト設定"])},NN0063:e=>{const{normalize:t}=e;return t(["距離"])},NN0064:e=>{const{normalize:t}=e;return t(["角度"])},NN0065:e=>{const{normalize:t}=e;return t(["ぼかし"])},NN0066:e=>{const{normalize:t}=e;return t(["透明度"])},NN0067:e=>{const{normalize:t}=e;return t(["カラー"])},NN0068:e=>{const{normalize:t}=e;return t(["オフセット"])},NN0069:e=>{const{normalize:t}=e;return t(["太さ"])},NN0070:e=>{const{normalize:t}=e;return t(["シェープ"])},NN0071:e=>{const{normalize:t}=e;return t(["アーチ状"])},NN0072:e=>{const{normalize:t}=e;return t(["デザインを作成"])},NN0073:e=>{const{normalize:t}=e;return t(["ルーラーを表示"])},NN0074:e=>{const{normalize:t}=e;return t(["ガイド線を非表示"])},NN0075:e=>{const{normalize:t}=e;return t(["ガイド線の削除"])},NN0076:e=>{const{normalize:t}=e;return t(["見出しを追加"])},NN0077:e=>{const{normalize:t}=e;return t(["小見出しを追加"])},NN0078:e=>{const{normalize:t}=e;return t(["本文を追加"])},NN0079:e=>{const{normalize:t}=e;return t(["名称未設定のデザイン"])},NN0080:e=>{const{normalize:t}=e;return t(["マイデザイン"])},NN0081:e=>{const{normalize:t}=e;return t(["ページに名前を付ける"])},NN0082:e=>{const{normalize:t}=e;return t(["もっと"])},NN0083:e=>{const{normalize:t}=e;return t(["すべてのテンプレート"])},NN0084:e=>{const{normalize:t}=e;return t(["スクエア"])},NN0085:e=>{const{normalize:t}=e;return t(["ラウンド "])},NN0086:e=>{const{normalize:t}=e;return t(["角丸"])},NN0087:e=>{const{normalize:t}=e;return t(["ソリッド"])},NN0088:e=>{const{normalize:t}=e;return t(["中抜き"])},NN0089:e=>{const{normalize:t}=e;return t(["プリセット"])},NN0090:e=>{const{normalize:t}=e;return t(["ブランドカラー"])},NN0091:e=>{const{normalize:t}=e;return t(["使われる色"])},NN0092:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["すべての",n(r("target")),"から検索する"])},NN0093:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("target")),"を検索する"])},NN0094:e=>{const{normalize:t}=e;return t(["キーワードを入力する"])},NN0095:e=>{const{normalize:t}=e;return t(["テキストエフェクト"])},NN0096:e=>{const{normalize:t}=e;return t(["フレームに設定する"])},NN0097:e=>{const{normalize:t}=e;return t(["背景に設定する"])},NN0098:e=>{const{normalize:t}=e;return t(["切り離す"])},NN0099:e=>{const{normalize:t}=e;return t(["テキストの色"])},NN0101:e=>{const{normalize:t}=e;return t(["太字"])},NN0102:e=>{const{normalize:t}=e;return t(["下線"])},NN0103:e=>{const{normalize:t}=e;return t(["斜体"])},NN0104:e=>{const{normalize:t}=e;return t(["縦書きテキスト"])},NN0105:e=>{const{normalize:t}=e;return t(["左揃え"])},NN0106:e=>{const{normalize:t}=e;return t(["中央揃え"])},NN0107:e=>{const{normalize:t}=e;return t(["右揃え"])},NN0108:e=>{const{normalize:t}=e;return t(["両端揃え"])},NN0109:e=>{const{normalize:t}=e;return t(["文字間隔"])},NN0110:e=>{const{normalize:t}=e;return t(["行間"])},NN0111:e=>{const{normalize:t}=e;return t(["なし"])},NN0112:e=>{const{normalize:t}=e;return t(["シャドウ"])},NN0113:e=>{const{normalize:t}=e;return t(["ドロップシャドウ"])},NN0114:e=>{const{normalize:t}=e;return t(["輪郭"])},NN0115:e=>{const{normalize:t}=e;return t(["輪郭抽出"])},NN0116:e=>{const{normalize:t}=e;return t(["ダズルシャドウ"])},NN0117:e=>{const{normalize:t}=e;return t(["変形なし"])},NN0118:e=>{const{normalize:t}=e;return t(["アーチにする"])},NN0119:e=>{const{normalize:t}=e;return t(["戻る"])},NN0120:e=>{const{normalize:t}=e;return t(["やり直す"])},NN0121:e=>{const{normalize:t}=e;return t(["ファイル形式"])},NN0122:e=>{const{normalize:t}=e;return t(["サイズ"])},NN0123:e=>{const{normalize:t}=e;return t(["倍"])},NN0124:e=>{const{normalize:t}=e;return t(["ページの選択"])},NN0125:e=>{const{normalize:t}=e;return t(["現在ページ"])},NN0126:e=>{const{normalize:t}=e;return t(["全ページ"])},NN0127:e=>{const{normalize:t}=e;return t(["範囲"])},NN0128:e=>{const{normalize:t}=e;return t(["ページ"])},NN0129:e=>{const{normalize:t}=e;return t(["設定内容を保存"])},NN0130:e=>{const{normalize:t}=e;return t(["すべて消去"])},NN0131:e=>{const{normalize:t}=e;return t(["提案"])},NN0132:e=>{const{normalize:t}=e;return t(["品質"])},NN0133:e=>{const{normalize:t}=e;return t(["完成"])},NN0134:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("num")),"ページ"])},NN0135:e=>{const{normalize:t}=e;return t(["アップロード済み"])},NN0136:e=>{const{normalize:t}=e;return t(["アップロード中"])},NN0137:e=>{const{normalize:t}=e;return t(["アップロードエラー"])},NN0138:e=>{const{normalize:t}=e;return t(["ガイド線の種類"])},NN0139:e=>{const{normalize:t}=e;return t(["ページを追加"])},NN0140:e=>{const{normalize:t}=e;return t(["ページをコピー"])},NN0141:e=>{const{normalize:t}=e;return t(["ページ削除"])},NN0142:e=>{const{normalize:t}=e;return t(["背景を設定"])},NN0143:e=>{const{normalize:t}=e;return t(["背景をロック"])},NN0144:e=>{const{normalize:t}=e;return t(["デザイン作成"])},NN0145:e=>{const{normalize:t}=e;return t(["テンプレートセンター"])},NN0146:e=>{const{normalize:t}=e;return t(["使い方完全ガイド "])},NN0147:e=>{const{normalize:t}=e;return t(["よくあるご質問"])},NN0148:e=>{const{normalize:t}=e;return t(["豊富なデザインテンプレートをご用意"])},NN0149:e=>{const{normalize:t}=e;return t(["テンプレート一覧"])},NN0150:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media"))," を投稿する"])},NN0151:e=>{const{normalize:t}=e;return t(["カバー写真"])},NN0152:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media"))," リッチメッセージ"])},NN0153:e=>{const{normalize:t}=e;return t(["EC商品画像"])},NN0154:e=>{const{normalize:t}=e;return t(["デザインを開始"])},NN0155:e=>{const{normalize:t}=e;return t(["限らない"])},NN0156:e=>{const{normalize:t}=e;return t(["使い方完全ガイド "])},NN0157:e=>{const{normalize:t}=e;return t(["ヘルプセンター"])},NN0158:e=>{const{normalize:t}=e;return t(["弊社に関する"])},NN0159:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media")),"トップ画面"])},NN0160:e=>{const{normalize:t}=e;return t(["サービス利用規約"])},NN0161:e=>{const{normalize:t}=e;return t(["プライバシーポリシー"])},NN0162:e=>{const{normalize:t}=e;return t(["サイトご利用規約"])},NN0163:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("term")),"を入力する "])},NN0164:e=>{const{normalize:t}=e;return t(["確認"])},NN0165:e=>{const{normalize:t}=e;return t(["アカウント設定"])},NN0166:e=>{const{normalize:t}=e;return t(["登録と安全性"])},NN0167:e=>{const{normalize:t}=e;return t(["ログアウト"])},NN0168:e=>{const{normalize:t}=e;return t(["ログイン"])},NN0169:e=>{const{normalize:t}=e;return t(["登録する"])},NN0170:e=>{const{normalize:t}=e;return t(["写真を削除する"])},NN0171:e=>{const{normalize:t}=e;return t(["写真を変更する"])},NN0172:e=>{const{normalize:t}=e;return t(["名前"])},NN0173:e=>{const{normalize:t}=e;return t(["メールアドレス"])},NN0174:e=>{const{normalize:t}=e;return t(["言語"])},NN0175:e=>{const{normalize:t}=e;return t(["登録者限定のお得な情報を配信しています。Vivipicからのメールマガジンの配信を希望する。"])},NN0176:e=>{const{normalize:t}=e;return t(["変更を保存する"])},NN0177:e=>{const{normalize:t}=e;return t(["Facebook、Googleアカウントを使ってVivipicに登録した場合は、該当アカウントでパスワードの再設定を行ってください。"])},NN0178:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([" ",n(r("media")),"でログイン"])},NN0179:e=>{const{normalize:t}=e;return t(["あるいは"])},NN0180:e=>{const{normalize:t}=e;return t(["パスワード"])},NN0181:e=>{const{normalize:t}=e;return t(["パスワードを忘れた場合"])},NN0182:e=>{const{normalize:t}=e;return t(["はじめてご利用の方？"])},NN0183:e=>{const{normalize:t}=e;return t(["今すぐ登録"])},NN0184:e=>{const{normalize:t}=e;return t(["送信する"])},NN0185:e=>{const{normalize:t}=e;return t(["テンプレートからお好みのデザインを選びましょう！"])},NN0186:e=>{const{normalize:t}=e;return t(["Vivipicはオンラインで使えるデザインツールで、便利に使えるテンプレートを多数用意しました。<newline>これらのテンプレートを使うと、誰でもかんたんにおしゃれで本格的なデザインができます。"])},NN0187:e=>{const{normalize:t}=e;return t(["すべてのデザイン"])},NN0188:e=>{const{normalize:t}=e;return t(["スター付き"])},NN0189:e=>{const{normalize:t}=e;return t(["ゴミ箱"])},NN0190:e=>{const{normalize:t}=e;return t(["新規フォルダ作成"])},NN0191:e=>{const{normalize:t}=e;return t(["並べ替え"])},NN0192:e=>{const{normalize:t}=e;return t(["昇順で並べ替え"])},NN0193:e=>{const{normalize:t}=e;return t(["降順で並べ替え"])},NN0194:e=>{const{normalize:t}=e;return t(["日付の降順に並べ替える"])},NN0195:e=>{const{normalize:t}=e;return t(["日付の昇順に並べ替える"])},NN0196:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("name"))," がデザインした"])},NN0197:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["項目は ",n(r("num")),"個ある"])},NN0198:e=>{const{normalize:t}=e;return t(["フォルダ名を変更"])},NN0199:e=>{const{normalize:t}=e;return t(["フォルダ削除"])},NN0200:e=>{const{normalize:t}=e;return t(["完全削除"])},NN0201:e=>{const{normalize:t}=e;return t(["完全消去でデータを復元不可能にする "])},NN0202:e=>{const{normalize:t}=e;return t(["完全に削除しますか？"])},NN0203:e=>{const{normalize:t}=e;return t(["取り消し"])},NN0204:e=>{const{normalize:t}=e;return t(["復元"])},NN0205:e=>{const{normalize:t}=e;return t(["スターを付ける"])},NN0206:e=>{const{normalize:t}=e;return t(["フォルダへ移動する"])},NN0207:e=>{const{normalize:t}=e;return t(["スターを取り消す"])},NN0208:e=>{const{normalize:t}=e;return t(["テンプレートのサイズ"])},NN0209:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["テンプレートのサイズ (",n(r("tsize")),")がページサイズ(",n(r("psize")),")と違います。どちらを選びますか？"])},NN0210:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("content"))," コピー完了"])},NN0211:e=>{const{normalize:t}=e;return t(["ページを複製"])},NN0212:e=>{const{normalize:t}=e;return t(["グループの削除"])},NN0213:e=>{const{normalize:t}=e;return t(["レイヤーをロックする"])},NN0214:e=>{const{normalize:t}=e;return t(["シェアする"])},NN0215:e=>{const{normalize:t}=e;return t(["透明背景"])},NN0216:e=>{const{normalize:t}=e;return t(["ダウンロード中"])},NN0217:e=>{const{normalize:t}=e;return t(["映像品質：高い - 透明にした背景画像を適用する"])},NN0218:e=>{const{normalize:t}=e;return t(["映像品質：普通"])},NN0219:e=>{const{normalize:t}=e;return t(["等間隔に分布"])},NN0220:e=>{const{normalize:t}=e;return t(["ピクセル"])},NN0221:e=>{const{normalize:t}=e;return t(["水平方向に分布"])},NN0222:e=>{const{normalize:t}=e;return t(["垂直方向に分布"])},NN0223:e=>{const{normalize:t}=e;return t(["プロフィール写真のアップロードに失敗しました。"])},NN0224:e=>{const{normalize:t}=e;return t(["プロフィール写真更新しました。"])},NN0225:e=>{const{normalize:t}=e;return t(["もっと見る"])},NN0226:e=>{const{normalize:t}=e;return t(["名前は64文字以内で入力してください。"])},NN0227:e=>{const{normalize:t}=e;return t(["検索ランキング"])},NN0228:e=>{const{normalize:t}=e;return t(["デザインテーマを選択"])},NN0229:e=>{const{normalize:t}=e;return t(["このテンプレートを使用する"])},NN0230:e=>{const{normalize:t}=e;return t(["貼り付け"])},NN0231:e=>{const{normalize:t}=e;return t(["最前面へ移動"])},NN0232:e=>{const{normalize:t}=e;return t(["前面へ移動"])},NN0233:e=>{const{normalize:t}=e;return t(["背面へ移動"])},NN0234:e=>{const{normalize:t}=e;return t(["最背面へ移動"])},NN0235:e=>{const{normalize:t}=e;return t(["無料で使えるデザインツール「Vivipic」です。それでは早速みていきましょう。"])},NN0236:e=>{const{normalize:t}=e;return t(["編集についてPC 版からのみご利用いただけます。"])},NN0237:e=>{const{normalize:t}=e;return t(["Vivipicの機能を使用すると、初心者でも簡単にEC向け商品画像が作れます。"])},NN0238:e=>{const{normalize:t}=e;return t(["テンプレートの中からデザインを選び、テキストを入力するだけの簡単作成。"])},NN0239:e=>{const{normalize:t}=e;return t(["このフォルダは空です"])},NN0241:e=>{const{normalize:t}=e;return t(["30日後にゴミ箱から項目を削除"])},NN0242:e=>{const{normalize:t}=e;return t(["エラーが発生しました。しばらくしてからもう一度お試しください。"])},NN0243:e=>{const{normalize:t}=e;return t(["削除と同時に元のファイルが消去されます。"])},NN0244:e=>{const{normalize:t}=e;return t(["これらのデザインを破棄しますか？"])},NN0245:e=>{const{normalize:t}=e;return t(["このフォルダの中には複数のフォルダとデザインがあります。"])},NN0246:e=>{const{normalize:t}=e;return t(["完全に削除しますか？"])},NN0247:e=>{const{normalize:t}=e;return t(["テンプレートのサイズがデザインサイズと違います。更新ボタンをクリックして下さい。"])},NN0248:e=>{const{normalize:t}=e;return t(["ネットワークエラーが発生しました。しばらくたってからやり直してください。"])},NN0249:e=>{const{normalize:t}=e;return t(["名称未設定フォルダ"])},NN0250:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("item")),"を",n(r("folder")),"に移動しました。"])},NN0251:e=>{const{normalize:t}=e;return t(["コピーを作成"])},NN0252:e=>{const{normalize:t}=e;return t(["デザイン"])},NN0253:e=>{const{normalize:t}=e;return t(["フォルダ"])},NN0254:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("selectedNum")),"を選択しました "])},NN0255:e=>{const{normalize:t}=e;return t(["複数のデザイン/フォルダ"])},NN0256:e=>{const{normalize:t}=e;return t(["一番人気"])},NN0257:e=>{const{normalize:t}=e;return t(["最新"])},NN0258:e=>{const{normalize:t}=e;return t(["タイトル未指定"])},NN0259:e=>{const{normalize:t}=e;return t(["はじめてのユーザーのあなた、おめでとうございます。"])},NN0260:e=>{const{normalize:t}=e;return t(["Vivipicエディターを使用するには、コンピューターまたはモバイル版のブラウザーを使用してください。"])},NN0261:e=>{const{normalize:t}=e;return t(["タブレット/iPad版がリリースされた際には、先行体験のお知らせをお送りします。"])},NN0262:e=>{const{normalize:t}=e;return t(["トップへ戻る"])},NN0263:e=>{const{normalize:t}=e;return t(["お好みのテンプレートを選ぶ"])},NN0264:e=>{const{normalize:t}=e;return t(["\n画面をスワイプするか、キーワード検索しても目的に合ったテンプレートを素早く見つけることができます。検索ボタンを押すと条件が一致したテンプレートがテンプレート一覧に表示されます。また、異なるサイズのデザインテンプレートを一つのファイルにまとめることができます。"])},NN0265:e=>{const{normalize:t}=e;return t(["デザインをカスタマイズする"])},NN0266:e=>{const{normalize:t}=e;return t(["写真、素材、背景や文字などは、左のタブで種類を選択し、表示されたものから選んで追加します。右側にツールバーが表示されます。デザインの変更がいつでもできます。"])},NN0267:e=>{const{normalize:t}=e;return t(["いつでもダウンロードが可能です。"])},NN0268:e=>{const{normalize:t}=e;return t(["自分のPCなどに入っている画像データをお使いの場合は、画像データを「アップロード」に直接ドラッグできます。「画像をアップロード」をクリックしてもよい。\n"])},NN0269:e=>{const{normalize:t}=e;return t(["ご自由にダウンロード"])},NN0270:e=>{const{normalize:t}=e;return t(["「ダウンロード」メニューの中からファイル形式、サイズや範囲を選んでダウンロードしましょう！"])},NN0271:e=>{const{normalize:t}=e;return t(["スキップ"])},NN0272:e=>{const{normalize:t}=e;return t(["次のステップへ"])},NN0273:e=>{const{normalize:t}=e;return t(["了解しました"])},NN0274:e=>{const{normalize:t}=e;return t(["デザインを始めよう"])},NN0275:e=>{const{normalize:t}=e;return t(["画像の背景を切り抜こう"])},NN0276:e=>{const{normalize:t}=e;return t(["目的や用途に応じて選べるテンプレート"])},NN0277:e=>{const{normalize:t}=e;return t(["直感的な操作でテンプレートを使えば、あっという間にデザインが完成します。"])},NN0278:e=>{const{normalize:t}=e;return t(["人気テンプレート"])},NN0279:e=>{const{normalize:t}=e;return t(["最新のテンプレート"])},NN0280:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media"))," アカウントで登録"])},NN0281:e=>{const{normalize:t}=e;return t(["今すぐログイン"])},NN0282:e=>{const{normalize:t}=e;return t(["メールアドレスを入力してください。<newline>パスワード変更のメールを送信します。"])},NN0283:e=>{const{normalize:t}=e;return t(["ログオン画面へ戻る"])},NN0284:e=>{const{normalize:t}=e;return t(["認証コードを発送しました。"])},NN0285:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("time"))," 分以内にメール ",n(r("email"))," に記載されているパスワードを入力いただきログインを行ってください。"])},NN0286:e=>{const{normalize:t}=e;return t(["認証コード"])},NN0287:e=>{const{normalize:t}=e;return t(["完成"])},NN0288:e=>{const{normalize:t}=e;return t(["認証コード発行用のメールが届かないのですが"])},NN0289:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("time")),"秒後に認証コードの再発行手続きをお願いします。\n"])},NN0290:e=>{const{normalize:t}=e;return t(["認証コードの再発行"])},NN0291:e=>{const{normalize:t}=e;return t(["パスワードの再設定"])},NN0292:e=>{const{normalize:t}=e;return t(["新パスワード"])},NN0293:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("len")),"文字以上のパスワードを作成してください。"])},NN0294:e=>{const{normalize:t}=e;return t(["パスワードには、英字を1つ含む必要があります。"])},NN0295:e=>{const{normalize:t}=e;return t(["パスワードには、数字を1つ含む必要があります。"])},NN0296:e=>{const{normalize:t}=e;return t(["新しいパスワードを確認してください。"])},NN0297:e=>{const{normalize:t}=e;return t(["メールアドレスとして登録できない文字列で入力されています。"])},NN0298:e=>{const{normalize:t}=e;return t(["認証コードが間違っています。"])},NN0299:e=>{const{normalize:t}=e;return t(["パスワードとパスワードを再入力に同じパスワードが入力されていません。パスワードの入力内容を確認のうえ、改めて入力をお試しください。"])},NN0300:e=>{const{normalize:t}=e;return t(["Vivipicでデザインをはじめよう"])},NN0301:e=>{const{normalize:t}=e;return t(["きっとあなたのデザイン業務のお役に立つはず。"])},NN0302:e=>{const{normalize:t}=e;return t(["無料テンプレートなので、まずは登録しましょう！"])},NN0303:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media"))," 新規会員登録"])},NN0304:e=>{const{normalize:t}=e;return t(["すでにアカウントをお持ちの方"])},NN0305:e=>{const{normalize:t}=e;return t(["ログイン"])},NN0306:e=>{const{normalize:t}=e;return t(["アカウントを作成する"])},NN0307:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["会員登録が完了すると、あなたがVivipicの ",n(r("use"))," と ",n(r("privacy"))," に同意したことになります。"])},NN0308:e=>{const{normalize:t}=e;return t(["パスワードには、英大文字・英小文字・数字それぞれを最低1文字ずつ含む必要があります。 パスワードの長さは、半角8文字以上です。"])},NN0309:e=>{const{normalize:t}=e;return t(["プロフィール画像を変更"])},NN0310:e=>{const{normalize:t}=e;return t(["パスワード変更"])},NN0311:e=>{const{normalize:t}=e;return t(["最終パスワード変更日時："])},NN0312:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("year"))," 年 ",n(r("month"))," 月 ",n(r("date"))," 日"])},NN0313:e=>{const{normalize:t}=e;return t(["変更"])},NN0314:e=>{const{normalize:t}=e;return t(["情報セキュリティ"])},NN0315:e=>{const{normalize:t}=e;return t(["すべてのデバイスからサインアウト"])},NN0316:e=>{const{normalize:t}=e;return t(["デバイスからのサインアウト"])},NN0317:e=>{const{normalize:t}=e;return t(["アカウントの削除"])},NN0318:e=>{const{normalize:t}=e;return t(["アカウントを削除すると、以前のデータが復元されないため、アカウントの引き継ぎができません。"])},NN0319:e=>{const{normalize:t}=e;return t(["高さ"])},NN0320:e=>{const{normalize:t}=e;return t(["幅"])},NN0321:e=>{const{normalize:t}=e;return t(["テンプレートレイアウト"])},NN0322:e=>{const{normalize:t}=e;return t(["自動的におすすめの<br>テンプレートレイアウト"])},NN0323:e=>{const{normalize:t}=e;return t(["アカウント登録後、完成したデザインをダウンロードすることができます。"])},NN0324:e=>{const{normalize:t}=e;return t(["すべて"])},NN0325:e=>{const{normalize:t}=e;return t(["更新されません"])},NN0326:e=>{const{normalize:t}=e;return t(["期間限定で無料！"])},NN0327:e=>{const{normalize:t}=e;return t(["テンプレートで初心者も\nプロの仕上がり"])},NN0328:e=>{const{normalize:t}=e;return t(["デザインテンプレートが豊富に用意されており、\n誰でも簡単におしゃれなデザインが作れます。"])},NN0329:e=>{const{normalize:t}=e;return t(["ECサイト向けの\nテンプレート"])},NN0330:e=>{const{normalize:t}=e;return t(["業種や用途、スタイルなどカテゴリごとに\nテンプレートを探すことができます。\n"])},NN0331:e=>{const{normalize:t}=e;return t(["WEBマーケティング力アップ"])},NN0332:e=>{const{normalize:t}=e;return t(["Vivipicを使えば、Facebook、Instagram、EC商品画像、ページ作成やリッチメッセージ画像などさまざまな用途でおしゃれデザインを作ることができます。様々なテンプレートを多数収録しています。"])},NN0333:e=>{const{normalize:t}=e;return t(["ストックフォトや画像を多数ご用意"])},NN0334:e=>{const{normalize:t}=e;return t(["Vivupicには200万点以上の商用利用可のフリー画像素材が揃っています。イラスト、背景やアイコン素材などがたくさんあります。定期的に新しいデザインが追加されるため、どんどん増えていきます。"])},NN0335:e=>{const{normalize:t}=e;return t(["元のパスワードを確認する"])},NN0336:e=>{const{normalize:t}=e;return t(["元のパスワード"])},NN0337:e=>{const{normalize:t}=e;return t(["アカウント情報を更新する前に、元のパスワードを確認してください。"])},NN0338:e=>{const{normalize:t}=e;return t(["パスワードの確認"])},NN0339:e=>{const{normalize:t}=e;return t(["削除してもよろしいですか？"])},NN0340:e=>{const{normalize:t}=e;return t(["すべての結果"])},NN0341:e=>{const{normalize:t}=e;return t(["多くのフォント"])},NN0342:e=>{const{normalize:t}=e;return t(["画面サイズに合わせる"])},NN0343:e=>{const{normalize:t}=e;return t(["全画面表示にする"])},NN0344:e=>{const{normalize:t}=e;return t(["形式を指定してページをダウンロードする"])},NN0345:e=>{const{normalize:t}=e;return t(["分割画面の高さの制限はありません"])},NN0346:e=>{const{normalize:t}=e;return t(["分割画面の高さの最大値"])},NN0347:e=>{const{normalize:t}=e;return t(["全ページをダウンロード"])},NN0348:e=>{const{normalize:t}=e;return t(["分割ダウンロード"])},NN0349:e=>{const{normalize:t}=e;return t(["ネットワーク接続エラーが発生しました。"])},NN0350:e=>{const{normalize:t}=e;return t(["アップロードする前に、まずログインしてください。"])},NN0351:e=>{const{normalize:t}=e;return t(["ネットワークエラーが発生しました。しばらくしてから操作し直してください。"])},NN0352:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["デザインを保存する場合には、",n(r("signUp")),"または",n(r("logIn")),"をしてください。"])},OG0001:e=>{const{normalize:t}=e;return t(["豊富なテンプレートを備えたグラフィックデザインソフトウェア。ECサイトのデザイン。デザインの現地化。- Vivipic"])},OG0002:e=>{const{normalize:t}=e;return t(["売れるECサイトデザイン。オンライングラフィックデザインソフトウェア。台湾発のデザインツール。ECサイト向けのテンプレートが充実。画像編集ツール。プロモーション、新商品、EC商品画像、コンテンツマーケティング、LINEリッチメッセージ、Facebook投稿、Instagram投稿、商品詳細ページにも使えるテンプレート。楽天市場、ヤフーショッピング、Amazonで使用できる商品画像を簡単に作成できます。商用利用可能なフォントやイラスト素材が無料。"])},OG0003:e=>{const{normalize:t}=e;return t(["https://template.vivipic.com/static/img/JP_vivipic.jpg"])},OG0004:e=>{const{normalize:t}=e;return t(["vivipic"])},OG0005:e=>{const{normalize:t}=e;return t(["https://vivipic.com/jp"])},OG0006:e=>{const{normalize:t}=e;return t(["https://vivipic.com/jp/templates"])},SE0001:e=>{const{normalize:t}=e;return t(["豊富なテンプレートを備えたグラフィックデザインソフトウェア。ECサイトのデザイン。デザインの現地化。- Vivipic"])},SE0002:e=>{const{normalize:t}=e;return t(["売れるECサイトデザイン。オンライングラフィックデザインソフトウェア。台湾発のデザインツール。ECサイト向けのテンプレートが充実。画像編集ツール。プロモーション、新商品、EC商品画像、コンテンツマーケティング、LINEリッチメッセージ、Facebook投稿、Instagram投稿、商品詳細ページにも使えるテンプレート。楽天市場、ヤフーショッピング、Amazonで使用できる商品画像を簡単に作成できます。商用利用可能なフォントやイラスト素材が無料。"])},SE0003:e=>{const{normalize:t}=e;return t(["ja"])},NN0353:e=>{const{normalize:t}=e;return t(["フォント"])},NN0354:e=>{const{normalize:t}=e;return t(["クリックしてデザインしよう"])},NN0355:e=>{const{normalize:t}=e;return t(["あなただけのデザインテンプレートを作れちゃいます！きっと楽しくなりますよ！"])},NN0356:e=>{const{normalize:t}=e;return t(["送料無料,新商品,コンテンツマーケティング,クリスマス"])},NN0357:e=>{const{normalize:t}=e;return t(["ファイルを保存しました。"])},NN0358:e=>{const{normalize:t}=e;return t(["確認する"])},NN0359:e=>{const{normalize:t}=e;return t(["閉じる"])},NN0360:e=>{const{normalize:t}=e;return t(["ファイルの保存に失敗しました。 "])},NN0361:e=>{const{normalize:t}=e;return t(["ガイド線の表示"])},NN0362:e=>{const{normalize:t}=e;return t(["継続利用する"])},NN0363:e=>{const{normalize:t}=e;return t(["ガイド線をロックする"])},NN0364:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["撮影者:",n(r("site")),"上の",n(r("author"))])},NN0365:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["原作者:",n(r("author"))])},NN0366:e=>{const{normalize:t}=e;return t(["タグ"])},NN0367:e=>{const{normalize:t}=e;return t(["ライセンス"])},NN0368:e=>{const{normalize:t}=e;return t(["Instagram / Facebook の投稿"])},NN0369:e=>{const{normalize:t}=e;return t(["商品詳細ページ"])},NN0370:e=>{const{normalize:t}=e;return t(["YouTubeサムネイル"])},NN0371:e=>{const{normalize:t}=e;return t(["全てのデザインを見る"])},NN0372:e=>{const{normalize:t}=e;return t(["準備はできましたか？<newline>デザインの世界に<newline>飛び込もう！"])},NN0373:e=>{const{normalize:t}=e;return t(["期間限定で無料！"])},NN0374:e=>{const{normalize:t}=e;return t(["会員登録する【無料】"])},NN0375:e=>{const{normalize:t}=e;return t(["テンプレートで初心者も<newline>プロの仕上がり"])},NN0376:e=>{const{normalize:t}=e;return t(["デザインテンプレートが豊富に用意されており、<newline>誰でも簡単におしゃれなデザインが作れます。"])},NN0377:e=>{const{normalize:t}=e;return t(["すべて見る"])},NN0378:e=>{const{normalize:t}=e;return t(["ECサイト向けの<newline>テンプレート"])},NN0379:e=>{const{normalize:t}=e;return t(["業種や用途、スタイルなどカテゴリごとに<newline>テンプレートを探すことができます。"])},NN0380:e=>{const{normalize:t}=e;return t(["WEBマーケティング力アップ"])},NN0381:e=>{const{normalize:t}=e;return t(["Facebookへの投稿、Instagramへの投稿、EC商品画像、ページ作成やリッチメッセージ画像など、<newline>様々なサイズやデザインのテンプレートが揃っています。"])},NN0382:e=>{const{normalize:t}=e;return t(["背景のロックを解除する"])},NN0383:e=>{const{normalize:t}=e;return t(["ガイト線をロック"])},NN0384:e=>{const{normalize:t}=e;return t(["ガイト線をロック解除"])},NN0385:e=>{const{normalize:t}=e;return t(["削除する"])},NN0386:e=>{const{normalize:t}=e;return t(["保留する"])},NN0387:e=>{const{normalize:t}=e;return t(["ブラシサイズ"])},NN0388:e=>{const{normalize:t}=e;return t(["元画像を表示"])},NN0389:e=>{const{normalize:t}=e;return t(["元画像を復元"])},NN0390:e=>{const{normalize:t}=e;return t(["テンプレートの中からデザインを選んで、テキストを入力するだけの簡単作成。"])},NN0391:e=>{const{normalize:t}=e;return t(["無料ではじめよう"])},NN0392:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("num"))," ページ全てを追加する"])},NN0393:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(['申し訳ございません。"',n(r("keyword")),'"に一致する',n(r("target")),"は見つかりませんでした。別のキーワードを試してみてください。"])},NN0394:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["申し訳ございません。お探しの",n(r("target")),"が見つかりませんでした。別のキーワードを試してみてください。"])},NN0395:e=>{const{normalize:t}=e;return t(["Facebook/Googleのアカウントから登録された場合、ここでパスワードの変更ができません。該当アカウントでパスワードの再設定を行ってください。"])},NN0396:e=>{const{normalize:t}=e;return t(["ブランドを追加する"])},NN0397:e=>{const{normalize:t}=e;return t(["名称未設定ロゴ"])},NN0398:e=>{const{normalize:t}=e;return t(["<html>レイアウトのチェックをすべてに設定する<html>ことをお勧めします。おそらく、より多くのテンプレートを見つけることができます。"])},NN0399:e=>{const{normalize:t}=e;return t(["ブランドロゴ"])},NN0400:e=>{const{normalize:t}=e;return t(["ブランドフォント"])},NN0401:e=>{const{normalize:t}=e;return t(["ブランドカラー"])},NN0402:e=>{const{normalize:t}=e;return t(["クリックまたはここにファイルをドラッグして、フォントをアップロードします。"])},NN0403:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["スタイル",n(r("textType")),"を追加する"])},NN0404:e=>{const{normalize:t}=e;return t(["パレットを追加する"])},NN0405:e=>{const{normalize:t}=e;return t(["名称未設定パレット"])},NN0406:e=>{const{normalize:t}=e;return t(["スポイトツールは、現時点ではデスクトップ版のChrome、Edge、Operaにしかサポートしていません。このツールをご利用の際に、上記の各ブラウザの最新バージョンをお使いください。"])},NN0407:e=>{const{normalize:t}=e;return t(["スポイトツール"])},NN0408:e=>{const{normalize:t}=e;return t(["見出し"])},NN0409:e=>{const{normalize:t}=e;return t(["小見出し"])},NN0410:e=>{const{normalize:t}=e;return t(["本文"])},NN0411:e=>{const{normalize:t}=e;return t(["クリックしてアップロード"])},NN0412:e=>{const{normalize:t}=e;return t(["または<newline>ここに写真をドラッグしてアップロード"])},NN0413:e=>{const{normalize:t}=e;return t(["ここに写真をドラッグする"])},NN0414:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("element")),"使用できるファイル形式"])},NN0415:e=>{const{normalize:t}=e;return t(["ここにファイルをドラッグする"])},NN0416:e=>{const{normalize:t}=e;return t(["写真"])},NN0417:e=>{const{normalize:t}=e;return t(["フォント"])},NN0418:e=>{const{normalize:t}=e;return t(["グロー"])},NN0419:e=>{const{normalize:t}=e;return t(["ソフトフォーカス"])},NN0420:e=>{const{normalize:t}=e;return t(["コンタクトシャドウ"])},NN0421:e=>{const{normalize:t}=e;return t(["広げて伸ばす"])},NN0422:e=>{const{normalize:t}=e;return t(["サイズ"])},NN0423:e=>{const{normalize:t}=e;return t(["横幅"])},NN0424:e=>{const{normalize:t}=e;return t(["垂直オフセット"])},NN0425:e=>{const{normalize:t}=e;return t(["水平オフセット"])},NN0426:e=>{const{normalize:t}=e;return t(["ぼかし"])},NN0427:e=>{const{normalize:t}=e;return t(["透明度"])},NN0428:e=>{const{normalize:t}=e;return t(["効果なし"])},NN0429:e=>{const{normalize:t}=e;return t(["シャドウ"])},NN0430:e=>{const{normalize:t}=e;return t(["外枠"])},NN0431:e=>{const{normalize:t}=e;return t(["距離"])},NN0432:e=>{const{normalize:t}=e;return t(["角度"])},NN0433:e=>{const{normalize:t}=e;return t(["実行してもよろしいですか？"])},NN0434:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["まもなく",n(r("itemName")),"を削除しようとしています。"])},NN0435:e=>{const{normalize:t}=e;return t(["この操作を実行すると復元することはできません。"])},NN0436:e=>{const{normalize:t}=e;return t(["現在のデザインデータに影響を与えません。"])},NN0437:e=>{const{normalize:t}=e;return t(["はい、削除します。"])},NN0438:e=>{const{normalize:t}=e;return t(["シャドー"])},NN0439:e=>{const{normalize:t}=e;return t(["ページ"])},NN0440:e=>{const{normalize:t}=e;return t(["メルマガを受け取らないようにしますか？"])},NN0441:e=>{const{normalize:t}=e;return t(["メルマガを希望されない場合、お知らせや最新情報が届かなくなります。"])},NN0442:e=>{const{normalize:t}=e;return t(["お得な定期購入のご案内"])},NN0443:e=>{const{normalize:t}=e;return t(["新デザインテンプレート追加のお知らせ"])},NN0444:e=>{const{normalize:t}=e;return t(["応用編の裏技"])},NN0445:e=>{const{normalize:t}=e;return t(["はい"])},NN0446:e=>{const{normalize:t}=e;return t(["いいえ"])},NN0447:e=>{const{normalize:t}=e;return t(["何か言いたいことはあるか？"])},NN0448:e=>{const{normalize:t}=e;return t(["Vivipicをご利用いただきありがとうございます。このプランをキャンセルされた理由をお聞かせください。お客様のフィードバックをお待ちしております。"])},NN0449:e=>{const{normalize:t}=e;return t(["メールが長いから"])},NN0450:e=>{const{normalize:t}=e;return t(["キャンペーン通知を受け取りたくない"])},NN0451:e=>{const{normalize:t}=e;return t(["配信回数が多いから"])},NN0452:e=>{const{normalize:t}=e;return t(["その他の理由"])},NN0453:e=>{const{normalize:t}=e;return t(["ご意見やご要望があれば、ご自由にご記入ください。"])},NN0454:e=>{const{normalize:t}=e;return t(["処理中"])},NN0455:e=>{const{normalize:t}=e;return t(["保存中"])},NN0456:e=>{const{normalize:t}=e;return t(["おっと！"])},NN0457:e=>{const{normalize:t}=e;return t(["エラーが発生しました⋯"])},NN0458:e=>{const{normalize:t}=e;return t(["しばらくしてからもう一度お試しください！"])},NN0459:e=>{const{normalize:t}=e;return t(["同時にすべてのデザインからも削除されます。"])},NN0460:e=>{const{normalize:t}=e;return t(["テスト"])},NN0461:e=>{const{normalize:t}=e;return t(["デザインデータのアップロードが失敗したため、もう一度クリックしてダウンロードして下さい。"])},NN0462:e=>{const{normalize:t}=e;return t(["ダウンロード中にエラーが発生したため、もう一度ダウンロードしてください。"])},NN0463:e=>{const{normalize:t}=e;return t(["アップロードされたフォント"])},NN0464:e=>{const{normalize:t}=e;return t(["<blue>Vivipic</blue>を使えば、プロ並みのデザインを気軽に作成できる。"])},NN0465:e=>{const{normalize:t}=e;return t(["デザイン制作に役立つ。Vivipicで創造性を解き放つ。"])},NN0466:e=>{const{normalize:t}=e;return t(["数万点以上のテンプレートから、<newline>インスピレーションを得よう！"])},NN0467:e=>{const{normalize:t}=e;return t(["多様なスタイルのテンプレートはプロのデザイナーによって作成された。テンプレート、素材やフォントは個人でも商用でも利用できる。"])},NN0468:e=>{const{normalize:t}=e;return t(["ビジネスに必要なテンプレートが揃っている。"])},NN0469:e=>{const{normalize:t}=e;return t(["テンプレートセンターから業種や用途に適したテンプレートを自由に選べる。"])},NN0470:e=>{const{normalize:t}=e;return t(["テンプレートセンターへ"])},NN0471:e=>{const{normalize:t}=e;return t(["充実したテンプレートバンドル"])},NN0472:e=>{const{normalize:t}=e;return t(["提供されたテンプレートのサイズに不満を感じていた。テンプレートバンドルを使用することで、さまざまなプラットフォームに合わせ、より多くのブランドの露出とトラフィックを増やす。"])},NN0473:e=>{const{normalize:t}=e;return t(["多くのサイズに対応できるサポートサービス"])},NN0474:e=>{const{normalize:t}=e;return t(["同じファイルでテンプレートの追加、サイズ変更を行うことができる。デザインのサイズが異なっても、手軽に作成や管理が行える。"])},NN0475:e=>{const{normalize:t}=e;return t(["ロジックを組み込んだテンプレート"])},NN0476:e=>{const{normalize:t}=e;return t(["商品をどうやってアピールすればいいのだろう？9つのマーケティングスライドテンプレートセットを使用することで、顧客ニーズを捉え、購入率を上げることができる。"])},NN0477:e=>{const{normalize:t}=e;return t(["もっと多くのテンプレートを探そう"])},NN0478:e=>{const{normalize:t}=e;return t(["シングルページのテンプレート"])},NN0479:e=>{const{normalize:t}=e;return t(["ページの順番を入れ替えることができる。ダウンロードしてそのまま使える。デザインが崩れることは無い。ECサイトで必要な商品画像やデザインは、簡単に作ることができる。"])},NN0480:e=>{const{normalize:t}=e;return t(["画像をアップするとAIが背景を自動的に切り抜いてくれる。"])},NN0481:e=>{const{normalize:t}=e;return t(["AI技術が搭載されるので、背景が自動的に削除されるだけではなく、ご自身で不要部分を削除することができる。"])},NN0482:e=>{const{normalize:t}=e;return t(["ブランドの一貫性を簡単に維持できる。"])},NN0483:e=>{const{normalize:t}=e;return t(["ブランドキットを使用すれば、ロゴ、フォント、色をアップロードしてブランドキットを設定し、ブランドの一貫性を保つことができる。"])},NN0484:e=>{const{normalize:t}=e;return t(["彼らの声を聞く"])},NN0485:e=>{const{normalize:t}=e;return t(["ユーザーからの口コミ"])},NN0486:e=>{const{normalize:t}=e;return t(["<blue>デザインプラットフォーム</blue>から、<newline>最高のインスピレーションを与える。"])},NN0487:e=>{const{normalize:t}=e;return t(["<blue>デザインプラットフォーム</blue>から、最高のインスピレーションを与える。"])},NN0488:e=>{const{normalize:t}=e;return t(["ニーズに応じて、自分好みのデザインを見つけることができる。"])},NN0489:e=>{const{normalize:t}=e;return t(["メインメニュー"])},NN0490:e=>{const{normalize:t}=e;return t(["入れ替え"])},NN0491:e=>{const{normalize:t}=e;return t(["エフェクト"])},NN0492:e=>{const{normalize:t}=e;return t(["サイズ"])},NN0493:e=>{const{normalize:t}=e;return t(["ロゴ"])},NN0494:e=>{const{normalize:t}=e;return t(["テキスト"])},NN0495:e=>{const{normalize:t}=e;return t(["カラー"])},NN0496:e=>{const{normalize:t}=e;return t(["トリミングする範囲を指定する"])},NN0497:e=>{const{normalize:t}=e;return t(["ブランド"])},NN0498:e=>{const{normalize:t}=e;return t(["配置"])},NN0500:e=>{const{normalize:t}=e;return t(["画像処理中です。しばらくお待ち下さい。"])},NN0501:e=>{const{normalize:t}=e;return t(["ガイド線のパターンを選択する。"])},NN0502:e=>{const{normalize:t}=e;return t(["このガイド線を削除する。"])},NN0503:e=>{const{normalize:t}=e;return t(["フォントの読み込みに1〜5分程度かかりますので、今しばらくお待ちください。"])},NN0504:e=>{const{normalize:t}=e;return t(["編集"])},NN0505:e=>{const{normalize:t}=e;return t(["<blue>Pro</blue>バージョンにアップグレードする"])},NN0506:e=>{const{normalize:t}=e;return t(["プレミアムツールやテンプレートを使用すると生産性を向上させる！"])},NN0507:e=>{const{normalize:t,plural:n}=e;return n([t(["Vivipic PRO"]),t(["<blue>Vivipic PRO<blue>"])])},NN0508:e=>{const{normalize:t}=e;return t(["早くもお得な価格でアップグレードしてお楽しみください。"])},NN0509:e=>{const{normalize:t}=e;return t(["Proプランに含まれるもの"])},NN0510:e=>{const{normalize:t}=e;return t(["プレミアム限定テンプレート"])},NN0511:e=>{const{normalize:t}=e;return t(["背景リムーバーツール"])},NN0512:e=>{const{normalize:t}=e;return t(["100GBのファイルストレージスペース"])},NN0513:e=>{const{normalize:t}=e;return t(["無制限の数のブランドキット"])},NN0514:e=>{const{normalize:t}=e;return t(["月間プラン"])},NN0515:e=>{const{normalize:t}=e;return t(["年間プラン"])},NN0516:e=>{const{normalize:t}=e;return t(["ドル/月"])},NN0517:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("day")),"日間無料体験"])},NN0518:e=>{const{normalize:t}=e;return t(["定期購入の管理"])},NN0519:e=>{const{normalize:t}=e;return t(["*価格がドルで表示される"])},NN0520:e=>{const{normalize:t}=e;return t(["基本的な機能"])},NN0521:e=>{const{normalize:t}=e;return t(["無料プラン"])},NN0522:e=>{const{normalize:t}=e;return t(["プロプラン"])},NN0523:e=>{const{normalize:t}=e;return t(["プレミアム限定テンプレート"])},NN0524:e=>{const{normalize:t}=e;return t(["無料テンプレート"])},NN0525:e=>{const{normalize:t}=e;return t(["ダウンロード回数は無制限"])},NN0526:e=>{const{normalize:t}=e;return t(["ファイルストレージ"])},NN0527:e=>{const{normalize:t}=e;return t(["無料写真素材"])},NN0528:e=>{const{normalize:t}=e;return t(["背景リムーバーツール"])},NN0529:e=>{const{normalize:t}=e;return t(["ブランドキットのツール"])},NN0530:e=>{const{normalize:t}=e;return t(["サイズ調整機能"])},NN0531:e=>{const{normalize:t}=e;return t(["多種多様なテキスト効果"])},NN0532:e=>{const{normalize:t}=e;return t(["透明PNGのダウンロード"])},NN0533:e=>{const{normalize:t}=e;return t(["よくあるご質問"])},NN0534:e=>{const{normalize:t}=e;return t(["Vivipicは無料で使用できる？"])},NN0535:e=>{const{normalize:t}=e;return t(["もちろん！テンプレートやフォントなど、各種デザイン素材が無料で使える。背景リムーバーツールを使用したい、プレミアム限定テンプレートを使用したい、そしてストレージ容量を増やしたい場合はプロプランの利用がおすすめです。"])},NN0536:e=>{const{normalize:t}=e;return t(["すでにVivipic Proプランを購入しましたが、背景リムーバーのポイントやストレージ容量を使い切った場合はどうすればよいのでしょうか？"])},NN0537:e=>{const{normalize:t}=e;return t(["毎月、PROプラン会員に切り抜きポイント（300ポイント）をご提供致します。切り抜き機能の使用頻度が高い方でも、ご満足いただけます。ご利用の月間ストレージ容量（100GB）あるいは背景リムーバーのポイント（300点）を使い切ってもっと欲しい場合は、Facebookメッセンジャー、メールのいずれかよりお願い致します。Facebook：https://facebook.com/vivipicjp/<br>メール：jp","@","vivipic.com"])},NN0538:e=>{const{normalize:t}=e;return t(["Vivipicに提案があり、質問したい場合はどうすればよいですか？"])},NN0539:e=>{const{normalize:t}=e;return t(["お問い合わせは、Facebookメッセンジャー、メールのいずれかよりお願い致します。<br>Facebook：https://facebook.com/vivipicjp/<br>メール：jp","@","vivipic.com"])},NN0540:e=>{const{normalize:t}=e;return t(["どのような支払い方法が使えますか？ "])},NN0541:e=>{const{normalize:t}=e;return t(["クレジットカードを使うことも可能です。"])},NN0542:e=>{const{normalize:t}=e;return t(["プロプランをキャンセルするにはどうすればよいですか？"])},NN0543:e=>{const{normalize:t}=e;return t(["Vivipicから購入したプランは、いつでもVivipicのアカウントページで変更できますので、ご安心ください。"])},NN0544:e=>{const{normalize:t}=e;return t(["ステップ"])},NN0545:e=>{const{normalize:t}=e;return t(["次のステップへ"])},NN0546:e=>{const{normalize:t}=e;return t(["Pro版限定機能は14日間無料でご利用頂けます。"])},NN0547:e=>{const{normalize:t}=e;return t(["有料のテンプレートを利用することで、よりスムーズなデザイン体験をお楽しみください。"])},NN0548:e=>{const{normalize:t}=e;return t(["年間一括で支払う"])},NN0549:e=>{const{normalize:t}=e;return t(["25％OFF"])},NN0550:e=>{const{normalize:t}=e;return t(["次のステップへ"])},NN0551:e=>{const{normalize:t}=e;return t(["支払情報"])},NN0552:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["実際の引き落とし日：",n(r("date"))])},NN0553:e=>{const{normalize:t}=e;return t(["当日のご請求金額"])},NN0554:e=>{const{normalize:t}=e;return t(["インボイス情報"])},NN0555:e=>{const{normalize:t}=e;return t(["メールアドレス"])},NN0556:e=>{const{normalize:t}=e;return t(["名前"])},NN0557:e=>{const{normalize:t}=e;return t(["電話番号"])},NN0558:e=>{const{normalize:t}=e;return t(["VAT登録番号"])},NN0559:e=>{const{normalize:t}=e;return t(["VAT登録番号（任意項目）"])},NN0560:e=>{const{normalize:t}=e;return t(["無料トライアルを体験する"])},NN0561:e=>{const{normalize:t}=e;return t(["Vivipic Proにアップグレードする"])},NN0562:e=>{const{normalize:t}=e;return t(["おめでとうございます。Vivipic Proを使えば、インスピレーションを得られる。プレミアムツールや有料プラン限定テンプレートが用意されているので、今すぐ体験しよう！"])},NN0563:e=>{const{normalize:t}=e;return t(["はい、了解です。"])},NN0564:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["「",n(r("period")),"」への変更"])},NN0565:e=>{const{normalize:t}=e;return t(["現在年間プランに切り替える場合は、約2カ月分をプレゼント。"])},NN0566:e=>{const{normalize:t}=e;return t(["「年間プラン」を維持したままで、おトクになる！"])},NN0567:e=>{const{normalize:t}=e;return t(["変更内容を確認する"])},NN0568:e=>{const{normalize:t}=e;return t(["クレジットカードの支払い"])},NN0569:e=>{const{normalize:t}=e;return t(["...を逃してしまう"])},NN0570:e=>{const{normalize:t}=e;return t(["プレミアム限定テンプレート"])},NN0571:e=>{const{normalize:t}=e;return t(["ストレージ容量100GB"])},NN0572:e=>{const{normalize:t}=e;return t(["背景リムーバーツール"])},NN0573:e=>{const{normalize:t}=e;return t(["ブランドキット"])},NN0574:e=>{const{normalize:t}=e;return t(["定期購入をキャンセルする"])},NN0575:e=>{const{normalize:t}=e;return t(["定期購入を続けている"])},NN0576:e=>{const{normalize:t}=e;return t(["定期解約理由を教えてください"])},NN0577:e=>{const{normalize:t}=e;return t(["たまにしかこのサービスを必要としない"])},NN0578:e=>{const{normalize:t}=e;return t(["無料プランの機能で十分"])},NN0579:e=>{const{normalize:t}=e;return t(["欲しい機能が見つからない"])},NN0580:e=>{const{normalize:t}=e;return t(["必要なテンプレートが見つからない"])},NN0581:e=>{const{normalize:t}=e;return t(["別のデザインツールに乗り換える"])},NN0582:e=>{const{normalize:t}=e;return t(["その他の理由..."])},NN0583:e=>{const{normalize:t}=e;return t(["よりスムーズなデザイン体験を提供するために今すぐブランドキットを始めましょう。"])},NN0584:e=>{const{normalize:t}=e;return t(["いただきましたご意見は、今後のサービス向上のために役立ててまいります。"])},NN0585:e=>{const{normalize:t}=e;return t(["お支払いと定期購入"])},NN0586:e=>{const{normalize:t}=e;return t(["あなたの定期購入情報"])},NN0587:e=>{const{normalize:t}=e;return t(["今すぐアップグレード"])},NN0588:e=>{const{normalize:t}=e;return t(["定期購入を継続する"])},NN0589:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["あなたが選択した",n(r("period"))])},NN0590:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["次の引き落とし日（<blue>",n(r("price")),"</blue>元）:<blue>",n(r("date")),"</blue>"])},NN0591:e=>{const{normalize:t}=e;return t(["月払いに切り替える"])},NN0592:e=>{const{normalize:t}=e;return t(["定期購入をキャンセルする"])},NN0593:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Vivipic Pro提供終了日 ：",n(r("date"))])},NN0594:e=>{const{normalize:t}=e;return t(["背景リムーバーのポイント"])},NN0595:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("date")),"まで<blue>",n(r("amount")),"</blue> 点の背景リムーバーのポイントが利用できます。"])},NN0596:e=>{const{normalize:t}=e;return t(["ファイルストレージスペース"])},NN0597:e=>{const{normalize:t}=e;return t(["ストレージ容量や背景リムーバーのポイントが足りなくなってしまった場合は、メールでお問い合わせください。メール：jp","@","vivipic.com"])},NN0598:e=>{const{normalize:t}=e;return t(["お支払い情報"])},NN0599:e=>{const{normalize:t}=e;return t(["有効期限"])},NN0600:e=>{const{normalize:t}=e;return t(["お支払い方法を変更する"])},NN0601:e=>{const{normalize:t}=e;return t(["明細書情報"])},NN0602:e=>{const{normalize:t}=e;return t(["メールアドレスをご入力ください。"])},NN0603:e=>{const{normalize:t}=e;return t(["名前"])},NN0604:e=>{const{normalize:t}=e;return t(["会社名"])},NN0605:e=>{const{normalize:t}=e;return t(["会社名をご入力ください。（任意項目）"])},NN0606:e=>{const{normalize:t}=e;return t(["住所"])},NN0607:e=>{const{normalize:t}=e;return t(["住所をご入力ください。"])},NN0608:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["住所欄",n(r("number"))])},NN0609:e=>{const{normalize:t}=e;return t(["丁目番地号"])},NN0610:e=>{const{normalize:t}=e;return t(["マンション名/部屋番号等（任意項目）"])},NN0611:e=>{const{normalize:t}=e;return t(["市区町村"])},NN0612:e=>{const{normalize:t}=e;return t(["都道府県"])},NN0613:e=>{const{normalize:t}=e;return t(["郵便番号"])},NN0614:e=>{const{normalize:t}=e;return t(["お支払履歴"])},NN0615:e=>{const{normalize:t}=e;return t(["日付"])},NN0616:e=>{const{normalize:t}=e;return t(["定期購入の履歴"])},NN0617:e=>{const{normalize:t}=e;return t(["価格"])},NN0618:e=>{const{normalize:t}=e;return t(["注"])},NN0619:e=>{const{normalize:t}=e;return t(["明細書のダウンロード　"])},NN0620:e=>{const{normalize:t}=e;return t(["お支払いに失敗した"])},NN0621:e=>{const{normalize:t}=e;return t(["支払い履歴がない"])},NN0622:e=>{const{normalize:t}=e;return t(["削除してもよろしいですか？"])},NN0623:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("paymentMethod")),"を削除してもよろしいですか？"])},NN0624:e=>{const{normalize:t}=e;return t(["お支払い方法"])},NN0625:e=>{const{normalize:t}=e;return t(["はい、削除します。"])},NN0626:e=>{const{normalize:t}=e;return t(["無効なお支払い方法です。別のお支払い方法をお試しください。"])},NN0627:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("period")),"でのお支払いに変更しました。"])},NN0628:e=>{const{normalize:t}=e;return t(["定期購入を解約しました。"])},NN0629:e=>{const{normalize:t}=e;return t(["定期購入を継続しています。"])},NN0630:e=>{const{normalize:t}=e;return t(["クレジットカード情報を更新しました。"])},NN0631:e=>{const{normalize:t}=e;return t(["クレジットカードを削除しました。"])},NN0632:e=>{const{normalize:t}=e;return t(["電話番号の入力を間違えてしまいました。"])},NN0633:e=>{const{normalize:t}=e;return t(["VAT登録番号を間違えて入力してしまいました。"])},NN0634:e=>{const{normalize:t}=e;return t(["郵便番号の入力を間違えてしまいました。"])},NN0635:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["ストレージ容量を",n(r("disk")),"%使い切りました。"])},NN0636:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Vivipic無料プランで利用できるストーレジ容量は1GBまでです。ストーレジ容量の上限を超えた場合は、図面のアップロードや新デザインの追加ができない状態となります。【",n(r("button")),"】をアップグレードすれば、100GBストレージをご利用いただけます。"])},NN0637:e=>{const{normalize:t}=e;return t(["Vivipic無料プランで利用できるストーレジ容量は1GBまでです。現在ご利用中のストレージ容量が上限に達しましたので、図面のアップロードや新デザインの追加ができない状態となります。不要なアイテムを削除して、「再計算」ボタンを押して、ストレージの使用量が再計算されます。あるいは【Vivipic PRO】をアップグレードすれば、100GBストレージをご利用いただけます。"])},NN0638:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Vivipic無料プランで利用できるストーレジ容量は1GBまでです。現在ご利用中のストレージ容量が上限に達しましたので、図面のアップロードや新デザインの追加ができない状態となります。【",n(r("button")),"】をアップグレードすれば、100GBストレージをご利用いただけます。"])},NN0639:e=>{const{normalize:t}=e;return t(["現在ご利用中のストレージ容量が上限に達しましたので、図面のアップロードや新デザインの追加ができない状態となります。不要なアイテムを削除して、「再計算」ボタンを押して、ストレージの使用量が再計算されます。あるいはメールでカスタマーサポートまでお問い合わせください。合ったプランを提案します。あなたに合った最適なコースを提案します。メール：jp","@","vivipic.com"])},NN0640:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["現在ご利用中のストレージ容量が上限に達しましたので、図面のアップロードや新デザインの追加ができない状態となります。不要なアイテムを削除して、あるいは【",n(r("button")),"】はあなたに合った最適なプランを提案します。メール：jp","@","vivipic.com"])},NN0641:e=>{const{normalize:t}=e;return t(["再計算実行"])},NN0642:e=>{const{normalize:t}=e;return t(["お問い合わせ"])},NN0643:e=>{const{normalize:t}=e;return t(["有料プラン"])},NN0644:e=>{const{normalize:t}=e;return t(["ストレージ容量が不足しています。"])},NN0645:e=>{const{normalize:t}=e;return t(["図面のサイズが大きすぎてアップロードできませんでした。"])},NN0646:e=>{const{normalize:t}=e;return t(["背景リムーバーのポイントを使い切りました。"])},NN0647:e=>{const{normalize:t}=e;return t(["背景リムーバーのポイントを使い切りました。次のお支払いの確認の後、再度ご利用可能になります。現在背景リムーバーをご希望の方は、年間プランにアップグレードして、1年分のポイントがまとめて進呈されます。あるいはカスタマーサポートまでお問い合わせください。"])},NN0648:e=>{const{normalize:t}=e;return t(["背景リムーバーのポイントを使い切りました。次のお支払いの確認の後、再度ご利用可能になります。現在背景リムーバーをご希望の方は、カスタマーサポートまでお問い合わせください。"])},NN0649:e=>{const{normalize:t}=e;return t(["設定"])},NN0650:e=>{const{normalize:t}=e;return t(["領収書をダウンロードするにはどうすればよいですか？"])},NN0651:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["領収書をダウンロードするには、",n(r("history")),"ページにアクセスしてください。"])},NN0652:e=>{const{normalize:t}=e;return t(["プロプランへ加入して、完全に自動化されたバックグラウンドリムーバーをお楽しみいただけます。手動も選択できます。"])},NN0653:e=>{const{normalize:t}=e;return t(["このテンプレート のロックを解除して、プレミアム限定テンプレート数が1,000件を超えました。"])},NN0654:e=>{const{normalize:t}=e;return t(["年間プランへのプラン変更がお得です。"])},NN0655:e=>{const{normalize:t}=e;return t(["現在のプラン"])},NN0656:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["アカウントの異常が発見されました（",n(r("status")),"）。",n(r("contactus")),"よりお問い合わせください。"])},NN0657:e=>{const{normalize:t}=e;return t(["選択済み"])},NN0658:e=>{const{normalize:t}=e;return t(["この素材のロックを解除する同時に万点以上の有料プラン限定素材を楽しめる。"])},NN0659:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("items")),"はまだありません"])},NN0660:e=>{const{normalize:t}=e;return t(["ロゴ"])},NN0661:e=>{const{normalize:t}=e;return t(["パレット"])},NN0662:e=>{const{normalize:t}=e;return t(["ボタンをクリックしてください"])},NN0663:e=>{const{normalize:t}=e;return t(["ブランドロゴをアップロード"])},NN0664:e=>{const{normalize:t}=e;return t(["ブランドカラーを作成"])},NN0665:e=>{const{normalize:t}=e;return t(["シャドウを処理中、 しばらくお待ち下さい。"])},NN0666:e=>{const{normalize:t}=e;return t(["デザインを作成"])},NN0667:e=>{const{normalize:t}=e;return t(["ソーシャルメディア "])},NN0668:e=>{const{normalize:t}=e;return t(["ECサイト "])},NN0669:e=>{const{normalize:t}=e;return t(["その他デザイン"])},NN0670:e=>{const{normalize:t}=e;return t(["デザインガイド"])},NN0671:e=>{const{normalize:t}=e;return t(["ブログ"])},NN0672:e=>{const{normalize:t}=e;return t(["学習センター"])},NN0673:e=>{const{normalize:t}=e;return t(["入門講座"])},NN0674:e=>{const{normalize:t}=e;return t(["デザインジャーナル"])},NN0675:e=>{const{normalize:t}=e;return t(["初心者向けガイド"])},NN0676:e=>{const{normalize:t}=e;return t(["デザインガイド"])},NN0677:e=>{const{normalize:t}=e;return t(["デジタルマーケティング"])},NN0678:e=>{const{normalize:t}=e;return t(["トレンドシェア"])},NN0679:e=>{const{normalize:t}=e;return t(["最近追加されたもの"])},NN0680:e=>{const{normalize:t}=e;return t(["デザインを選択する"])},NN0681:e=>{const{normalize:t}=e;return t(["ラインの太さ"])},NN0682:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("item")),"は",n(r("dest")),"に移動した"])},NN0683:e=>{const{normalize:t}=e;return t(["私のお気に入りに追加した"])},NN0684:e=>{const{normalize:t}=e;return t(["私のお気に入りから削除された"])},NN0685:e=>{const{normalize:t}=e;return t(["削除した"])},NN0686:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("item")),"を復元した"])},NN0687:e=>{const{normalize:t,plural:n}=e;return n([t(["項目"]),t(["複数の項目"])])},NN0688:e=>{const{normalize:t}=e;return t(["クリップボードにコピーした"])},NN0689:e=>{const{normalize:t}=e;return t(["マイデザインにコピーした"])},NN0690:e=>{const{normalize:t}=e;return t(["フォルダーを選択する"])},NN0691:e=>{const{normalize:t}=e;return t(["フォルダーの名前"])},NN0692:e=>{const{normalize:t}=e;return t(["フォルダーから取り出す"])},NN0693:e=>{const{normalize:t}=e;return t(["複数の項目を削除する"])},NN0694:e=>{const{normalize:t}=e;return t(["このフォルダーには複数の項目が含まれている"])},NN0695:e=>{const{normalize:t}=e;return t(["テンプレートとページはサイズが違う"])},NN0696:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["アップロードしたファイル(",n(r("file")),") のサイズが上限値 (",n(r("size")),"MB) を超えている"])},NN0697:e=>{const{normalize:t}=e;return t(["クーポンコード"])},NN0698:e=>{const{normalize:t}=e;return t(["無効なクーポンコード"])},NN0699:e=>{const{normalize:t}=e;return t(["割引"])},NN0700:e=>{const{normalize:t}=e;return t(["クーポンコードを入力"])},NN0701:e=>{const{normalize:t}=e;return t(["クーポンコードをお持ちですか？"])},NN0702:e=>{const{normalize:t}=e;return t(["クーポンコードを入力して認証を行って下さい。プロモーション情報は次のページに表示されます。"])},NN0703:e=>{const{normalize:t}=e;return t(["認証"])},NN0704:e=>{const{normalize:t}=e;return t(["フォルダーから取り出した"])},NN0705:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["アップロードしたファイルのサイズが上限値 (",n(r("size")),"MB) を超えている"])},NN0706:e=>{const{normalize:t}=e;return t(["フレームとして設定"])},NN0707:e=>{const{normalize:t}=e;return t(["背景として設定"])},NN0708:e=>{const{normalize:t}=e;return t(["背景から分離する"])},NN0709:e=>{const{normalize:t}=e;return t(["クーポンコードを入力する前に"])},NN0710:e=>{const{normalize:t}=e;return t(["まずお支払い方法をアカウントから削除してください"])},NN0711:e=>{const{normalize:t}=e;return t(["まずご利用中の定期購入をキャンセルしてください"])},NN0712:e=>{const{normalize:t}=e;return t(["フォントをアップロードする"])},NN0713:e=>{const{normalize:t}=e;return t(["ブランド名"])},NN0714:e=>{const{normalize:t}=e;return t([])},NN0715:e=>{const{normalize:t}=e;return t([])},NN0716:e=>{const{normalize:t}=e;return t([])},NN0717:e=>{const{normalize:t}=e;return t([])},NN0718:e=>{const{normalize:t}=e;return t([])},NN0719:e=>{const{normalize:t}=e;return t(["背景"])},NN0720:e=>{const{normalize:t}=e;return t(["四角"])},NN0721:e=>{const{normalize:t}=e;return t(["角丸長方形"])},NN0722:e=>{const{normalize:t}=e;return t(["正方形フレーム"])},NN0723:e=>{const{normalize:t}=e;return t(["角丸長方形フレーム"])},NN0724:e=>{const{normalize:t}=e;return t(["四角+外枠"])},NN0725:e=>{const{normalize:t}=e;return t(["角丸長方形+外枠"])},NN0726:e=>{const{normalize:t}=e;return t(["ぺたぺた"])},NN0727:e=>{const{normalize:t}=e;return t(["太い下線"])},NN0728:e=>{const{normalize:t}=e;return t(["3D"])},NN0729:e=>{const{normalize:t}=e;return t(["3D立体"])},NN0730:e=>{const{normalize:t}=e;return t(["三角"])},NN0731:e=>{const{normalize:t}=e;return t(["真ん丸"])},NN0732:e=>{const{normalize:t}=e;return t(["四角"])},NN0733:e=>{const{normalize:t}=e;return t(["外枠の太さ"])},NN0734:e=>{const{normalize:t}=e;return t(["外枠の色"])},NN0735:e=>{const{normalize:t}=e;return t(["色で塗りつぶす"])},NN0736:e=>{const{normalize:t}=e;return t(["位置"])},NN0737:e=>{const{normalize:t}=e;return t(["アウトライン"])},NN0738:e=>{const{normalize:t}=e;return t(["両端"])},NN0739:e=>{const{normalize:t}=e;return t(["上の枠線の色"])},NN0740:e=>{const{normalize:t}=e;return t(["下の枠線の色"])},NN0741:e=>{const{normalize:t}=e;return t(["雲"])},NN0742:e=>{const{normalize:t}=e;return t(["お問い合わせ"])},NN0743:e=>{const{normalize:t}=e;return t(["アプリバージョン"])},NN0744:e=>{const{normalize:t}=e;return t(["次へ"])},NN0745:e=>{const{normalize:t}=e;return t(["探索を始めよう"])},NN0746:e=>{const{normalize:t}=e;return t(["コピー＆ペーストするだけで、ストーリーズをおしゃれに！"])},NN0747:e=>{const{normalize:t}=e;return t(["話をするシーンに合わせて、スタイルを適切に選ぼう"])},NN0748:e=>{const{normalize:t}=e;return t(["風合いゆたかな素材を使い、暮らしに馴染む"])},NN0749:e=>{const{normalize:t}=e;return t(["背景オプションから紙っぽい質感やパステルカラーなどの背景を選べる。"])},NN0750:e=>{const{normalize:t}=e;return t(["Instagramを起動し、ストーリーの編集画面を開く。Vivistickerを起動して、素材を選択するか、テキストを入力します。Instagramに戻って、貼り付けられた画像を調整して完了です。"])},NN0751:e=>{const{normalize:t}=e;return t(["日本語の種類が豊富な上に、文字効果やラベルデザインが揃っているので、文字を入力するだけで、そのまま使えます。"])},NN0752:e=>{const{normalize:t}=e;return t(["素材の透明度や一部の色などをカスタマイズできるので、あなたの創造性をより豊かにすることです。"])},NN0753:e=>{const{normalize:t}=e;return t(["背景をクリックしてコピーするか、または「シェア」をクリックして、ストーリーズの背景を変更します。"])},NN0754:e=>{const{normalize:t}=e;return t(["リセット"])},NN0755:e=>{const{normalize:t}=e;return t(["スペース"])},NN0756:e=>{const{normalize:t}=e;return t(["トリミング"])},NN0757:e=>{const{normalize:t}=e;return t(["オブジェクト"])},NN0758:e=>{const{normalize:t}=e;return t(["静的"])},NN0759:e=>{const{normalize:t}=e;return t(["お気に入り"])},NN0760:e=>{const{normalize:t}=e;return t(["カテゴリー"])},NN0761:e=>{const{normalize:t}=e;return t(["キーワード"])},NN0762:e=>{const{normalize:t}=e;return t(["アイテム"])},NN0763:e=>{const{normalize:t}=e;return t(["ヒント"])},NN0764:e=>{const{normalize:t}=e;return t(["スタンプを「ダブルタップ」してお気に入りを追加または削除することができます"])},NN0765:e=>{const{normalize:t}=e;return t(["現在お気に入り素材はありません"])},NN0766:e=>{const{normalize:t}=e;return t(["デザインファイルがありません"])},NN0767:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([" ",n(r("num"))," 以上の数字を入力してください"])},NN0768:e=>{const{normalize:t}=e;return t(["「サイズ調整」機能のロックを解除することで作業時間を短縮する"])},NN0769:e=>{const{normalize:t}=e;return t(["デザインのサイズをすばやく調整する"])},NN0770:e=>{const{normalize:t}=e;return t(["PDF標準"])},NN0771:e=>{const{normalize:t}=e;return t(["PDF印刷"])},NN0772:e=>{const{normalize:t}=e;return t(["ファイルサイズ：小　デジタル用に最適"])},NN0773:e=>{const{normalize:t}=e;return t(["ファイルサイズ：大　紙印刷に最適"])},NN0774:e=>{const{normalize:t}=e;return t(["クロップマーク"])},NN0775:e=>{const{normalize:t}=e;return t(["塗り足し"])},NN0776:e=>{const{normalize:t}=e;return t(["PDFのフラット化"])},NN0777:e=>{const{normalize:t}=e;return t(["カラーモード"])},NN0778:e=>{const{normalize:t}=e;return t(["印刷の塗り足しを表示"])},NN0779:e=>{const{normalize:t}=e;return t(["印刷の塗り足しを非表示"])},NN0780:e=>{const{normalize:t}=e;return t(["塗り足しの設定"])},NN0781:e=>{const{normalize:t}=e;return t(["トップ"])},NN0782:e=>{const{normalize:t}=e;return t(["底"])},NN0783:e=>{const{normalize:t}=e;return t(["左"])},NN0784:e=>{const{normalize:t}=e;return t(["右"])},NN0785:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["サイズは ",n(r("size1"))," から ",n(r("size2"))," までとなる"])},NN0786:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["サイズは ",n(r("size"))," 以下でなければならない"])},NN0787:e=>{const{normalize:t}=e;return t(["ここをクリックしてサイズを調整する"])},NN0788:e=>{const{normalize:t}=e;return t(["デザインのサイズ上限を超えている"])},NN0789:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["ファイル内のあるページは、",n(r("size"))," ピクセルという上限を超えてしまうため、自動的にページのサイズを縮小する。印刷したい場合は、用紙サイズを設定することをおすすめ。単位はcm、mm、インチなど。ダウンロード時に、印刷に適したPDF形式を選択する。これにより、印刷品質が向上する。"])},NN0790:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("type")),"のリクエスト募集"])},NN0791:e=>{const{normalize:t}=e;return t(["https://docs.google.com/forms/d/e/1FAIpQLSdIqT5i4B3dd5Qrs-dJuGP1bAk0iqX8fmY42j-Buu3NDd5Zqw/viewform"])},NN0792:e=>{const{normalize:t}=e;return t(["素材"])},NN0793:e=>{const{normalize:t}=e;return t(["機能"])},NN0794:e=>{const{normalize:t}=e;return t(["テキストをアウトライン化する"])},NN0795:e=>{const{normalize:t}=e;return t(["フィルター"])},NN0796:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["ご希望の",n(r("type")),"がありましたら、リクエスト募集に",n(r("type")),"を提出してください。"])},NN0797:e=>{const{normalize:t}=e;return t(["中抜き/ ソリッド"])},NN0798:e=>{const{normalize:t}=e;return t(["素材カラー"])},NN0799:e=>{const{normalize:t}=e;return t(["一般的な印刷要求。"])},NN0800:e=>{const{normalize:t}=e;return t(["ピクセル画像に変換する。"])},NN0801:e=>{const{normalize:t}=e;return t(["もっと見る"])},NN0802:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/us/outlines-pdf/"])},NN0803:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/us/flattened-pdf/"])},NN0804:e=>{const{normalize:t}=e;return t(["背景がロックされた。ロックを解除してから、もう一度やり直してください。"])},NN0805:e=>{const{normalize:t}=e;return t(["印刷用に適したファイルを出力する"])},NN0806:e=>{const{normalize:t}=e;return t(["印刷用のPDFを出力する機能のロックを解除する"])},NN0807:e=>{const{normalize:t}=e;return t(["マルチ選択"])},NN0808:e=>{const{normalize:t}=e;return t(["モバイル版は商品詳細ページのテンプレートに対応していません。"])},NN0809:e=>{const{normalize:t}=e;return t(["レイヤーをコピー"])},NN0810:e=>{const{normalize:t}=e;return t(["テンプレートが見つかりません"])},NN0811:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["申し訳ありませんが「",n(r("keyword")),"」と一致する結果は見つかりませんでした。別のキーワードをお試しください。レイアウトを「すべて」にすることをお勧めします。より多くのテンプレートが見つかる可能性が高まります。より多くのテンプレートが必要な場合は、リクエストボックスに提出してください。"])},NN0812:e=>{const{normalize:t}=e;return t(["すべてのテンプレートを検索します"])},NN0813:e=>{const{normalize:t}=e;return t(["クリップボードから貼り付けました"])},NN0814:e=>{const{normalize:t}=e;return t(["水平オフセット"])},NN0815:e=>{const{normalize:t}=e;return t(["サイズ"])},NN0816:e=>{const{normalize:t}=e;return t(["カラフルリング"])},NN0817:e=>{const{normalize:t}=e;return t(["モランディリング"])},NN0818:e=>{const{normalize:t}=e;return t(["コットン雲"])},NN0819:e=>{const{normalize:t}=e;return t(["国語ノート"])},NN0820:e=>{const{normalize:t}=e;return t(["単色リング"])},NN0821:e=>{const{normalize:t}=e;return t(["赤ちゃんペンギン"])},NN0822:e=>{const{normalize:t}=e;return t(["惑星"])},NN0823:e=>{const{normalize:t}=e;return t(["ダウンロードページを選択してください"])},NN0824:e=>{const{normalize:t}=e;return t(["デザインをダウンロード中"])},NN0825:e=>{const{normalize:t}=e;return t(["しばらくお待ちください..."])},NN0826:e=>{const{normalize:t}=e;return t(["アルバムに保存されました"])},NN0827:e=>{const{normalize:t}=e;return t(["編集を続けます"])},NN0828:e=>{const{normalize:t}=e;return t(["アカウントを削除してよろしいですか？"])},NN0829:e=>{const{normalize:t}=e;return t(["確認を送信すると、アカウントは<red>永久に削除</red>されます。"])},NN0830:e=>{const{normalize:t}=e;return t(["以下の内容もすべて削除され、復元できません。"])},NN0831:e=>{const{normalize:t}=e;return t(["・あなたが作成したすべてのデザインとフォルダ"])},NN0832:e=>{const{normalize:t}=e;return t(["・アップロードしたすべての画像とメディア"])},NN0833:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["続行する場合は、「",n(r("delete")),"」と入力してください。"])},NN0834:e=>{const{normalize:t}=e;return t(["推奨ブラウザ"])},NN0835:e=>{const{normalize:t}=e;return t(["良いユーザー体験を提供するために、Google ChromeまたはMicrosoft Edgeを使用することをおすすめします。"])},NN0836:e=>{const{normalize:t}=e;return t(["Google Chromeをダウンロード"])},NN0837:e=>{const{normalize:t}=e;return t(["Microsoft Edgeをダウンロード"])},NN0838:e=>{const{normalize:t}=e;return t(["分かりました"])},NN0839:e=>{const{normalize:t}=e;return t(["現在のページを保存"])},NN0840:e=>{const{normalize:t}=e;return t(["すべてのページを保存"])},NN0841:e=>{const{normalize:t}=e;return t(["その他の形式で保存"])},NN0842:e=>{const{normalize:t}=e;return t(["デザインをもっと魅力的に—文字エフェクトとテンプレ"])},NN0843:e=>{const{normalize:t}=e;return t(["適用によって視覚効果を簡単にアップ、面白い文字エフェクト、PRO限定の文字テンプレート。"])},NN0844:e=>{const{normalize:t}=e;return t(["オリジナルの美しい背景画像"])},NN0845:e=>{const{normalize:t}=e;return t(["PRO会員限定—デザインに雰囲気を与えること、質感のある背景画像。"])},NN0846:e=>{const{normalize:t}=e;return t(["ホーム"])},NN0847:e=>{const{normalize:t}=e;return t(["カラフルハート"])},NN0848:e=>{const{normalize:t}=e;return t(["温かいハート"])},NN0849:e=>{const{normalize:t}=e;return t(["色を変えるハート"])},NN0850:e=>{const{normalize:t}=e;return t(["くまさんグミ"])},NN0851:e=>{const{normalize:t}=e;return t(["葉っぱ "])},NN0852:e=>{const{normalize:t}=e;return t(["クリームフラワー"])},NN0853:e=>{const{normalize:t}=e;return t(["カラフルフラワー"])},NN0854:e=>{const{normalize:t}=e;return t(["色を変えるフラワー"])},NN0855:e=>{const{normalize:t}=e;return t(["レトロフラワー"])},NN0856:e=>{const{normalize:t}=e;return t(["色を変えるレトロフラワー"])},NN0857:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/jp/jp-privacy-policy/"])},NN0858:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/jp/jp-terms-of-use/"])},NN0859:e=>{const{normalize:t}=e;return t(["今すぐ会員様限定テンプレと機能をご利用ください。"])},NN0860:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["問題が発生しました（",n(r("feature")),"-エラーコード#",n(r("errorCode")),"）"])},NN0861:e=>{const{normalize:t}=e;return t(["再読み込み"])},NN0862:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("item")),"をコピーする"])},NN0863:e=>{const{normalize:t}=e;return t(["デザインリンク"])},NN0864:e=>{const{normalize:t}=e;return t(["猫の手"])},NN0865:e=>{const{normalize:t}=e;return t(["パン"])},NN0866:e=>{const{normalize:t}=e;return t(["画面キャプチャーして、インスタDMまでお送りください。"])},NN0867:e=>{const{normalize:t}=e;return t(["カスタムデザイン"])},NN0868:e=>{const{normalize:t}=e;return t(["フィル"])},NN0869:e=>{const{normalize:t}=e;return t(["カスタム"])},NN0870:e=>{const{normalize:t}=e;return t(["パターン"])},NN0871:e=>{const{normalize:t}=e;return t(["カスタムイメージ"])},NN0872:e=>{const{normalize:t}=e;return t(["移動する"])},NN0873:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["「",n(r("upload")),"」またはここに写真をドロップ"])},NN0874:e=>{const{normalize:t}=e;return t(["かわいいくまちゃん"])},NN0875:e=>{const{normalize:t}=e;return t(["クマちゃんの色を変える"])},NN0876:e=>{const{normalize:t}=e;return t(["かわいい猫ちゃん"])},NN0877:e=>{const{normalize:t}=e;return t(["猫ちゃんの色を変える"])},NN0878:e=>{const{normalize:t}=e;return t(["ふわふわうさぎちゃん"])},NN0879:e=>{const{normalize:t}=e;return t(["うさぎちゃんの色を変える"])},NN0880:e=>{const{normalize:t}=e;return t(["プードル"])},NN0881:e=>{const{normalize:t}=e;return t(["プードルの色を変える"])},NN0882:e=>{const{normalize:t}=e;return t(["回る星の色を変える"])},NN0883:e=>{const{normalize:t}=e;return t(["ベビートイ"])},NN0884:e=>{const{normalize:t}=e;return t(["角の丸い吹き出し"])},NN0885:e=>{const{normalize:t}=e;return t(["三角の吹き出し"])},NN0886:e=>{const{normalize:t}=e;return t(["しっぽのずれ"])},NN0887:e=>{const{normalize:t}=e;return t(["しっぽの位置"])},NN0888:e=>{const{normalize:t}=e;return t(["移動距離"])},NN0889:e=>{const{normalize:t}=e;return t(["カメラロールに保存する"])},NN0890:e=>{const{normalize:t}=e;return t(["外枠の色"])},NN0891:e=>{const{normalize:t}=e;return t(["内側の色"])},NN0892:e=>{const{normalize:t}=e;return t(["外枠の太さ"])},NN0893:e=>{const{normalize:t}=e;return t(["内側の太さ"])},NN0894:e=>{const{normalize:t}=e;return t(["輪郭線を描く"])},NN0895:e=>{const{normalize:t}=e;return t(["マスキングテープ：無地"])},NN0896:e=>{const{normalize:t}=e;return t(["マスキングテープ：ドット柄"])},NN0897:e=>{const{normalize:t}=e;return t(["マスキングテープ：ストライプ柄"])},NN0898:e=>{const{normalize:t}=e;return t(["マスキングテープ：チェック柄"])},NN0899:e=>{const{normalize:t}=e;return t(["オーバーレイ"])},NN0900:e=>{const{normalize:t}=e;return t(["パーティ用ガーランド"])},NN0901:e=>{const{normalize:t}=e;return t(["パーティ用ガーランドの色を変える"])},NN0902:e=>{const{normalize:t}=e;return t(["イベント用ガーランド"])},NN0903:e=>{const{normalize:t}=e;return t(["イベント用ガーランドの色を変える"])},STK0001:e=>{const{normalize:t}=e;return t(["テキストの追加"])},STK0002:e=>{const{normalize:t}=e;return t(["タップしてコピーする"])},STK0003:e=>{const{normalize:t}=e;return t(["長押しして共有になる"])},STK0004:e=>{const{normalize:t}=e;return t(["保存"])},STK0005:e=>{const{normalize:t}=e;return t(["ストーリーズ"])},STK0006:e=>{const{normalize:t}=e;return t(["挿入"])},STK0007:e=>{const{normalize:t}=e;return t(["選択"])},STK0008:e=>{const{normalize:t}=e;return t(["このデザインを保存しますか？"])},STK0009:e=>{const{normalize:t}=e;return t(["保存したデザインはアプリの右上隅にある「マイデザイン」に表示されます。"])},STK0010:e=>{const{normalize:t}=e;return t(["自動的に保存されるので、二度と聞きません。"])},STK0011:e=>{const{normalize:t}=e;return t(["保存しません"])},STK0012:e=>{const{normalize:t}=e;return t(["聞かなくても、デザインを自動で保存されます。"])},STK0013:e=>{const{normalize:t}=e;return t(["デザインを削除します"])},STK0014:e=>{const{normalize:t}=e;return t(["このデザインを削除してもよろしいですか?"])},STK0015:e=>{const{normalize:t}=e;return t(["すべて選択"])},STK0016:e=>{const{normalize:t}=e;return t(["選択をすべて解除する"])},STK0017:e=>{const{normalize:t}=e;return t(["通知"])},STK0018:e=>{const{normalize:t}=e;return t(["編集領域上にコピーできるものがありません。<newline>コピーをする前に、コンテンツを追加してください。"])},STK0019:e=>{const{normalize:t}=e;return t(["分かりました！"])},STK0020:e=>{const{normalize:t}=e;return t(["現在保存されているデザインはありません"])},STK0021:e=>{const{normalize:t}=e;return t(["編集した内容を「マイデザイン」に保存できます"])},STK0022:e=>{const{normalize:t}=e;return t(["フレーム内の画像が見られません。写真を追加してからコピーしてください。"])},STK0023:e=>{const{normalize:t}=e;return t(["わかりました"])},STK0024:e=>{const{normalize:t}=e;return t(["リマインダー"])},STK0025:e=>{const{normalize:t}=e;return t(["定期購入"])},STK0026:e=>{const{normalize:t}=e;return t(["毎月払い"])},STK0027:e=>{const{normalize:t}=e;return t(["毎年払い"])},STK0028:e=>{const{normalize:t}=e;return t(["購入状況"])},STK0029:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("privacyPolicy")),"や",n(r("termOfUse")),"をご参照ください"])},STK0030:e=>{const{normalize:t}=e;return t(["プライバシーポリシー"])},STK0031:e=>{const{normalize:t}=e;return t(["利用規約"])},STK0032:e=>{const{normalize:t}=e;return t(["iOS16 インスタに貼る方法"])},STK0033:e=>{const{normalize:t}=e;return t(["iOS 16インスタの投稿方法"])},STK0034:e=>{const{normalize:t}=e;return t(["iOS16アップデート後、ストーリーズ投稿の流れは異なります。"])},STK0035:e=>{const{normalize:t}=e;return t(["チュートリアルを見る "])},STK0036:e=>{const{normalize:t}=e;return t(["リマインダーを表示しません"])},STK0037:e=>{const{normalize:t}=e;return t(["フリー素材、文字組み合わせ、背景"])},STK0038:e=>{const{normalize:t}=e;return t(["高度テキスト編集機能"])},STK0039:e=>{const{normalize:t}=e;return t(["会員限定のフレーム"])},STK0040:e=>{const{normalize:t}=e;return t(["会員限定のイラスト素材＆文字組み合わせ"])},STK0041:e=>{const{normalize:t}=e;return t(["会員限定の背景"])},STK0042:e=>{const{normalize:t}=e;return t(["Proの独自機能"])},STK0043:e=>{const{normalize:t}=e;return t(["機能"])},STK0044:e=>{const{normalize:t}=e;return t(["無料"])},STK0045:e=>{const{normalize:t}=e;return t(["購入を復元"])},STK0046:e=>{const{normalize:t}=e;return t(["無料トライアル & 購入する"])},STK0047:e=>{const{normalize:t}=e;return t(["購入する"])},STK0048:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("day")),"日間無料体験"])},STK0049:e=>{const{normalize:t}=e;return t(["オリジナル写真フレーム<newline>日常に魔法をかけてくれる"])},STK0050:e=>{const{normalize:t}=e;return t(["伝わる文字組レイアウト<newline>可愛さや美しさが爆発"])},STK0051:e=>{const{normalize:t}=e;return t(["Pro限定のスタンプ<newline>心をときめかせる"])},STK0052:e=>{const{normalize:t}=e;return t(["https://vivisticker.com/jp/プライバシーポリシー/"])},STK0053:e=>{const{normalize:t}=e;return t(["https://vivisticker.com/jp/サービス利用規約/"])},STK0054:e=>{const{normalize:t}=e;return t(["Vivisticker Proを登録いただき、ありがとうございます。プレミアムツールとコンテンツを無制限で利用でき、毎日を楽しく記録。"])},STK0055:e=>{const{normalize:t}=e;return t(["はじめよう"])},STK0056:e=>{const{normalize:t}=e;return t(["期限が切れると自動的に更新され、いつでもキャンセル可能。"])},STK0057:e=>{const{normalize:t}=e;return t(["無料体験の期間終了後に有料プランに自動移行する。"])},STK0058:e=>{const{normalize:t}=e;return t(["デフォルト絵文字"])},STK0059:e=>{const{normalize:t}=e;return t(["顔切り抜き"])},STK0060:e=>{const{normalize:t}=e;return t(["背景を削除"])},STK0061:e=>{const{normalize:t}=e;return t(["画像の背景を削除して、エフェクトを追加する。"])},STK0062:e=>{const{normalize:t}=e;return t(["人物やペット写真の背景を消して、顔だけ切り取る。"])},STK0063:e=>{const{normalize:t}=e;return t(["フィード投稿"])},STK0064:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("type")),"を作成する"])},STK0065:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["ページ全体を追加 (",n(r("num"))," ページ)"])},STK0066:e=>{const{normalize:t}=e;return t(["背景を選択"])},STK0067:e=>{const{normalize:t}=e;return t(["写真"])},STK0068:e=>{const{normalize:t}=e;return t(["空白"])},STK0069:e=>{const{normalize:t}=e;return t(["ストックフォト"])},STK0070:e=>{const{normalize:t}=e;return t(["ページ"])},STK0071:e=>{const{normalize:t}=e;return t(["美しすぎるテンプレート<newline>お悩みを吹き飛ばす"])},STK0072:e=>{const{normalize:t}=e;return t(["プレビュー"])},STK0073:e=>{const{normalize:t}=e;return t(["ページ数の上限に達した"])},STK0074:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["ページ数の上限",n(r("num")),"ページに達したため、ページをさらに追加する場合は、新しいファイルを開いてください。"])},STK0075:e=>{const{normalize:t}=e;return t(["すでに、最後のページです！<newline>新しいページを追加しますか？"])},STK0076:e=>{const{normalize:t}=e;return t(["ページを追加"])},STK0077:e=>{const{normalize:t}=e;return t(["現在のページ"])},STK0078:e=>{const{normalize:t}=e;return t(["複数のページ"])},STK0079:e=>{const{normalize:t}=e;return t(["一度にInstagramに投稿できるのは最大で10ページです。"])},STK0080:e=>{const{normalize:t}=e;return t(["アルバムに保存済み"])},STK0081:e=>{const{normalize:t}=e;return t(["読み込み中..."])},STK0082:e=>{const{normalize:t}=e;return t(["編集領域上にダウンロードできるものがありません。<newline>ダウンロードをする前に、コンテンツを追加してください。"])},STK0083:e=>{const{normalize:t}=e;return t(["最高の写真背景リムーバー<newline>ワンクリックで自動で消せる"])},STK0084:e=>{const{normalize:t}=e;return t(["マイデザイン内に保存中..."])},STK0085:e=>{const{normalize:t}=e;return t(["素材"])},STK0086:e=>{const{normalize:t}=e;return t(["写真を読み込めません-デザイン編集に使用される写真はカメラロールからすでに削除されました。"])},STK0087:e=>{const{normalize:t}=e;return t(["問題を報告しています..."])},STK0088:e=>{const{normalize:t}=e;return t(["問題を報告する"])},STK0089:e=>{const{normalize:t}=e;return t(["問題を報告"])},STK0090:e=>{const{normalize:t}=e;return t(["ご報告ありがとうございました。"])},STK0091:e=>{const{normalize:t}=e;return t(["次のフォントへ"])},STK0092:e=>{const{normalize:t}=e;return t(["次の背景へ"])},STK0093:e=>{const{normalize:t}=e;return t(["探検してみましょう"])},SKT0001:e=>{const{normalize:t}=e;return t(["編集中"])},SKT0002:e=>{const{normalize:t}=e;return t(["編集可能"])},SKT0003:e=>{const{normalize:t}=e;return t(["ユーザーの切り替えをしています..."])},SKT0004:e=>{const{normalize:t}=e;return t(["ただいまから、編集を開始することができます。"])},SKT0005:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["ただいま ",n(r("editor"))," が編集中です。"])},SKT0006:e=>{const{normalize:t}=e;return t(["ページの更新を行ってください。"])},SKT0007:e=>{const{normalize:t}=e;return t(["1時間以上時間をおいてから<br>ページの更新を行ってください。"])},SKT0008:e=>{const{normalize:t}=e;return t(["編集を開始しますか？"])},SKT0009:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("editor"))," が編集中です。ユーザーを切り替えてもよろしいですか？"])},SKT0010:e=>{const{normalize:t}=e;return t(["編集リクエスト"])},SKT0011:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("requester"))," から編集リクエストをいただきましたが、編集のアクセスを許可しますか？"])},SKT0012:e=>{const{normalize:t}=e;return t(["許可"])},SKT0013:e=>{const{normalize:t}=e;return t(["許可しない"])},SKT0014:e=>{const{normalize:t}=e;return t(["編集リクエストを送信しました。"])},SKT0015:e=>{const{normalize:t}=e;return t(["編集リクエストの承認を待っている状態なので、しばらくの間お待ち下さい..."])},SKT0016:e=>{const{normalize:t}=e;return t(["リクエストが失敗しました。"])},SKT0017:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("editor"))," が編集中です。しばらくしてからもう一度お試しください。"])},SKT0018:e=>{const{normalize:t}=e;return t(["編集を開始する"])},SKT0019:e=>{const{normalize:t}=e;return t(["このデザイン見つけられません。"])},SHR0001:e=>{const{normalize:t}=e;return t(["プレビューモード"])},SHR0002:e=>{const{normalize:t}=e;return t(["シングルページプレビュー"])},SHR0003:e=>{const{normalize:t}=e;return t(["フリップブックプレビュー"])},SHR0004:e=>{const{normalize:t}=e;return t(["ブラウザでプレビュー"])},SHR0005:e=>{const{normalize:t}=e;return t(["プレビュー"])},SHR0006:e=>{const{normalize:t}=e;return t(["デザインを共有する"])},SHR0007:e=>{const{normalize:t}=e;return t(["共同編集者は、このデザインを表示するためにVivipicアカウントが必要です。"])},SHR0008:e=>{const{normalize:t}=e;return t(["メールアドレスを入力してください…"])},SHR0009:e=>{const{normalize:t}=e;return t(["招待する"])},SHR0010:e=>{const{normalize:t}=e;return t(["閲覧できる"])},SHR0011:e=>{const{normalize:t}=e;return t(["アクセスできる"])},SHR0012:e=>{const{normalize:t}=e;return t(["リンクを知っている全員"])},SHR0013:e=>{const{normalize:t}=e;return t(["招待者のみ"])},SHR0014:e=>{const{normalize:t}=e;return t(["メールアドレスの入力に誤りがある"])},SHR0015:e=>{const{normalize:t}=e;return t(["所有者"])},SHR0016:e=>{const{normalize:t}=e;return t(["リンクをコピーする"])},SHR0017:e=>{const{normalize:t}=e;return t(["デザインを編集すると他の人を招待する"])},SHR0018:e=>{const{normalize:t}=e;return t(["閲覧だけは可能ですがデザインを編集できない"])},SHR0019:e=>{const{normalize:t}=e;return t(["削除する"])},SHR0020:e=>{const{normalize:t}=e;return t(["アクセス権が必要です"])},SHR0021:e=>{const{normalize:t}=e;return t(["デザインの所有者が共有リンクのアクセス権を変更しました。所有者からアクセス権を与えられます。あるいは、アクセス権のあるアカウントへの切り替えを行います。"])},SHR0022:e=>{const{normalize:t}=e;return t(["Created with"])},SHR0023:e=>{const{normalize:t}=e;return t(["拡大する"])},SHR0024:e=>{const{normalize:t}=e;return t(["終了"])}},i={NN0001:e=>{const{normalize:t}=e;return t(["模板"])},NN0002:e=>{const{normalize:t}=e;return t(["圖片"])},NN0003:e=>{const{normalize:t}=e;return t(["素材"])},NN0004:e=>{const{normalize:t}=e;return t(["背景"])},NN0005:e=>{const{normalize:t}=e;return t(["文字"])},NN0006:e=>{const{normalize:t}=e;return t(["上傳"])},NN0007:e=>{const{normalize:t}=e;return t(["品牌工具"])},NN0008:e=>{const{normalize:t}=e;return t(["檔案"])},NN0009:e=>{const{normalize:t}=e;return t(["儲存設計"])},NN0010:e=>{const{normalize:t,plural:n}=e;return n([t(["下載"]),t(["下　載"])])},NN0011:e=>{const{normalize:t}=e;return t(["新增主標題"])},NN0012:e=>{const{normalize:t}=e;return t(["新增副標題"])},NN0013:e=>{const{normalize:t}=e;return t(["新增內文"])},NN0014:e=>{const{normalize:t}=e;return t(["上傳圖片"])},NN0015:e=>{const{normalize:t}=e;return t(["LOGO"])},NN0016:e=>{const{normalize:t}=e;return t(["上傳 LOGO"])},NN0017:e=>{const{normalize:t}=e;return t(["顏色"])},NN0018:e=>{const{normalize:t}=e;return t(["增加新顏色"])},NN0019:e=>{const{normalize:t}=e;return t(["文字風格"])},NN0020:e=>{const{normalize:t}=e;return t(["新增文字風格"])},NN0021:e=>{const{normalize:t}=e;return t(["頁面尺寸"])},NN0022:e=>{const{normalize:t}=e;return t(["調整尺寸"])},NN0023:e=>{const{normalize:t}=e;return t(["自訂尺寸"])},NN0024:e=>{const{normalize:t}=e;return t(["最近使用"])},NN0025:e=>{const{normalize:t}=e;return t(["常用尺寸"])},NN0026:e=>{const{normalize:t}=e;return t(["IG 限時動態"])},NN0027:e=>{const{normalize:t}=e;return t(["電商-商品圖"])},NN0028:e=>{const{normalize:t}=e;return t(["電商-Banner"])},NN0029:e=>{const{normalize:t}=e;return t(["群組"])},NN0030:e=>{const{normalize:t}=e;return t(["透明度"])},NN0031:e=>{const{normalize:t}=e;return t(["圖層順序"])},NN0032:e=>{const{normalize:t}=e;return t(["複製"])},NN0033:e=>{const{normalize:t}=e;return t(["解鎖圖層"])},NN0034:e=>{const{normalize:t}=e;return t(["刪除"])},NN0035:e=>{const{normalize:t}=e;return t(["複製樣式"])},NN0036:e=>{const{normalize:t}=e;return t(["裁切"])},NN0037:e=>{const{normalize:t}=e;return t(["搜尋"])},NN0038:e=>{const{normalize:t}=e;return t(["翻轉"])},NN0039:e=>{const{normalize:t}=e;return t(["照片設定"])},NN0040:e=>{const{normalize:t}=e;return t(["裁切"])},NN0041:e=>{const{normalize:t}=e;return t(["濾鏡"])},NN0042:e=>{const{normalize:t}=e;return t(["調整"])},NN0043:e=>{const{normalize:t}=e;return t(["去背"])},NN0044:e=>{const{normalize:t,plural:n}=e;return n([t(["位置對齊"]),t(["對齊"])])},NN0045:e=>{const{normalize:t}=e;return t(["元件對齊"])},NN0046:e=>{const{normalize:t}=e;return t(["靠左"])},NN0047:e=>{const{normalize:t}=e;return t(["水平置中"])},NN0048:e=>{const{normalize:t}=e;return t(["靠右"])},NN0049:e=>{const{normalize:t}=e;return t(["靠上"])},NN0050:e=>{const{normalize:t}=e;return t(["垂直置中"])},NN0051:e=>{const{normalize:t}=e;return t(["靠下"])},NN0052:e=>{const{normalize:t}=e;return t(["翻轉"])},NN0053:e=>{const{normalize:t}=e;return t(["水平翻轉"])},NN0054:e=>{const{normalize:t}=e;return t(["垂直翻轉"])},NN0055:e=>{const{normalize:t}=e;return t(["亮度"])},NN0056:e=>{const{normalize:t}=e;return t(["對比度"])},NN0057:e=>{const{normalize:t}=e;return t(["飽和度"])},NN0058:e=>{const{normalize:t}=e;return t(["色調"])},NN0059:e=>{const{normalize:t}=e;return t(["模糊化"])},NN0060:e=>{const{normalize:t}=e;return t(["暈影"])},NN0061:e=>{const{normalize:t}=e;return t(["色溫"])},NN0062:e=>{const{normalize:t}=e;return t(["文字設定"])},NN0063:e=>{const{normalize:t}=e;return t(["距離"])},NN0064:e=>{const{normalize:t}=e;return t(["角度"])},NN0065:e=>{const{normalize:t}=e;return t(["模糊化"])},NN0066:e=>{const{normalize:t}=e;return t(["透明度"])},NN0067:e=>{const{normalize:t}=e;return t(["顏色"])},NN0068:e=>{const{normalize:t}=e;return t(["陰影大小"])},NN0069:e=>{const{normalize:t}=e;return t(["描邊粗細"])},NN0070:e=>{const{normalize:t}=e;return t(["文字形狀"])},NN0071:e=>{const{normalize:t}=e;return t(["彎曲"])},NN0072:e=>{const{normalize:t,plural:n}=e;return n([t(["建立新設計"]),t(["建 立 新 設 計"])])},NN0073:e=>{const{normalize:t}=e;return t(["顯示尺規"])},NN0074:e=>{const{normalize:t}=e;return t(["隱藏所有參考線"])},NN0075:e=>{const{normalize:t}=e;return t(["刪除所有參考線"])},NN0076:e=>{const{normalize:t}=e;return t(["新增主標題"])},NN0077:e=>{const{normalize:t}=e;return t(["新增副標題"])},NN0078:e=>{const{normalize:t}=e;return t(["新增內文"])},NN0079:e=>{const{normalize:t}=e;return t(["未命名設計"])},NN0080:e=>{const{normalize:t}=e;return t(["我的設計"])},NN0081:e=>{const{normalize:t}=e;return t(["新增頁面標題"])},NN0082:e=>{const{normalize:t}=e;return t(["更多"])},NN0083:e=>{const{normalize:t}=e;return t(["所有模板"])},NN0084:e=>{const{normalize:t}=e;return t(["方形"])},NN0085:e=>{const{normalize:t}=e;return t(["圓角"])},NN0086:e=>{const{normalize:t}=e;return t(["導圓角"])},NN0087:e=>{const{normalize:t}=e;return t(["實心"])},NN0088:e=>{const{normalize:t}=e;return t(["空心"])},NN0089:e=>{const{normalize:t}=e;return t(["預設"])},NN0090:e=>{const{normalize:t}=e;return t(["品牌"])},NN0091:e=>{const{normalize:t}=e;return t(["文件顏色"])},NN0092:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["搜尋所有",n(r("target"))])},NN0093:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["搜尋",n(r("target"))])},NN0094:e=>{const{normalize:t}=e;return t(["輸入關鍵字"])},NN0095:e=>{const{normalize:t}=e;return t(["文字特效"])},NN0096:e=>{const{normalize:t}=e;return t(["設為圖框"])},NN0097:e=>{const{normalize:t}=e;return t(["設為背景"])},NN0098:e=>{const{normalize:t}=e;return t(["分離圖框"])},NN0099:e=>{const{normalize:t}=e;return t(["文字顏色"])},NN0101:e=>{const{normalize:t}=e;return t(["粗體"])},NN0102:e=>{const{normalize:t}=e;return t(["底線"])},NN0103:e=>{const{normalize:t}=e;return t(["斜體"])},NN0104:e=>{const{normalize:t}=e;return t(["垂直文字"])},NN0105:e=>{const{normalize:t}=e;return t(["左對齊"])},NN0106:e=>{const{normalize:t}=e;return t(["文字置中"])},NN0107:e=>{const{normalize:t}=e;return t(["右對齊"])},NN0108:e=>{const{normalize:t}=e;return t(["兩端對齊"])},NN0109:e=>{const{normalize:t}=e;return t(["字間距"])},NN0110:e=>{const{normalize:t}=e;return t(["行距"])},NN0111:e=>{const{normalize:t}=e;return t(["無效果"])},NN0112:e=>{const{normalize:t}=e;return t(["陰影"])},NN0113:e=>{const{normalize:t}=e;return t(["模糊陰影"])},NN0114:e=>{const{normalize:t}=e;return t(["外框"])},NN0115:e=>{const{normalize:t}=e;return t(["外框分離"])},NN0116:e=>{const{normalize:t}=e;return t(["雙重陰影"])},NN0117:e=>{const{normalize:t}=e;return t(["無彎曲"])},NN0118:e=>{const{normalize:t}=e;return t(["彎曲"])},NN0119:e=>{const{normalize:t}=e;return t(["復原"])},NN0120:e=>{const{normalize:t}=e;return t(["重作"])},NN0121:e=>{const{normalize:t}=e;return t(["檔案類型"])},NN0122:e=>{const{normalize:t}=e;return t(["尺寸"])},NN0123:e=>{const{normalize:t}=e;return t(["倍"])},NN0124:e=>{const{normalize:t}=e;return t(["選擇頁面"])},NN0125:e=>{const{normalize:t}=e;return t(["目前頁面"])},NN0126:e=>{const{normalize:t}=e;return t(["所有頁面"])},NN0127:e=>{const{normalize:t}=e;return t(["範圍"])},NN0128:e=>{const{normalize:t}=e;return t(["頁"])},NN0129:e=>{const{normalize:t}=e;return t(["儲存以上設定"])},NN0130:e=>{const{normalize:t}=e;return t(["取消所有選取"])},NN0131:e=>{const{normalize:t}=e;return t(["建議"])},NN0132:e=>{const{normalize:t}=e;return t(["品質"])},NN0133:e=>{const{normalize:t,plural:n}=e;return n([t(["完成"]),t(["完 成"])])},NN0134:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["第 ",n(r("num"))," 頁"])},NN0135:e=>{const{normalize:t}=e;return t(["上傳成功"])},NN0136:e=>{const{normalize:t}=e;return t(["上傳中"])},NN0137:e=>{const{normalize:t}=e;return t(["上傳失敗"])},NN0138:e=>{const{normalize:t}=e;return t(["參考線板型"])},NN0139:e=>{const{normalize:t}=e;return t(["新增頁面"])},NN0140:e=>{const{normalize:t}=e;return t(["複製頁面"])},NN0141:e=>{const{normalize:t}=e;return t(["刪除頁面"])},NN0142:e=>{const{normalize:t}=e;return t(["背景設定"])},NN0143:e=>{const{normalize:t}=e;return t(["鎖定背景"])},NN0144:e=>{const{normalize:t}=e;return t(["建立設計"])},NN0145:e=>{const{normalize:t}=e;return t(["模板中心"])},NN0146:e=>{const{normalize:t}=e;return t(["使用教學"])},NN0147:e=>{const{normalize:t}=e;return t(["常見問題"])},NN0148:e=>{const{normalize:t}=e;return t(["台灣專屬設計模板等您使用！"])},NN0149:e=>{const{normalize:t}=e;return t(["瀏覽模板"])},NN0150:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media"))," 貼文"])},NN0151:e=>{const{normalize:t,interpolate:n,named:r,plural:i}=e;return i([t([n(r("media"))," 粉絲專頁封面"]),t([n(r("media"))," 粉專封面 "])])},NN0152:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media"))," 推播"])},NN0153:e=>{const{normalize:t}=e;return t(["電商商品圖"])},NN0154:e=>{const{normalize:t}=e;return t(["開始設計圖片"])},NN0155:e=>{const{normalize:t}=e;return t(["不限"])},NN0156:e=>{const{normalize:t}=e;return t(["使用教學"])},NN0157:e=>{const{normalize:t}=e;return t(["幫助中心"])},NN0158:e=>{const{normalize:t}=e;return t(["關於我們"])},NN0159:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media"))," 影片封面"])},NN0160:e=>{const{normalize:t}=e;return t(["服務條款"])},NN0161:e=>{const{normalize:t}=e;return t(["隱私權聲明"])},NN0162:e=>{const{normalize:t}=e;return t(["使用協議"])},NN0163:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["請輸入",n(r("term"))])},NN0164:e=>{const{normalize:t,plural:n}=e;return n([t(["確認"]),t(["確 認"])])},NN0165:e=>{const{normalize:t,plural:n}=e;return n([t(["帳號設定"]),t(["帳 號 設 定"])])},NN0166:e=>{const{normalize:t,plural:n}=e;return n([t(["登入與安全性"]),t(["登 入 與 安 全 性"])])},NN0167:e=>{const{normalize:t,plural:n}=e;return n([t(["登出"]),t(["登 出"])])},NN0168:e=>{const{normalize:t,plural:n}=e;return n([t(["登入"]),t(["登 入"])])},NN0169:e=>{const{normalize:t,plural:n}=e;return n([t(["註冊"]),t(["註 冊"])])},NN0170:e=>{const{normalize:t}=e;return t(["移 除 照 片"])},NN0171:e=>{const{normalize:t}=e;return t(["變 更 照 片"])},NN0172:e=>{const{normalize:t}=e;return t(["名稱"])},NN0173:e=>{const{normalize:t}=e;return t(["信箱"])},NN0174:e=>{const{normalize:t}=e;return t(["語系"])},NN0175:e=>{const{normalize:t}=e;return t(["我願意收到來自 Vivipic 的設計技巧、熱門模板、電商趨勢、促銷訊息等電子信。"])},NN0176:e=>{const{normalize:t}=e;return t(["修改並儲存"])},NN0177:e=>{const{normalize:t}=e;return t(["因採用 Google/Facebook 帳號登入，所以無法在此更改密碼，若要更改密碼，請至原平台修改。"])},NN0178:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["使用 ",n(r("media"))," 帳號登入"])},NN0179:e=>{const{normalize:t}=e;return t(["或"])},NN0180:e=>{const{normalize:t}=e;return t(["密碼"])},NN0181:e=>{const{normalize:t}=e;return t(["忘記密碼"])},NN0182:e=>{const{normalize:t}=e;return t(["初次使用？"])},NN0183:e=>{const{normalize:t}=e;return t(["立即註冊"])},NN0184:e=>{const{normalize:t}=e;return t(["送出"])},NN0185:e=>{const{normalize:t}=e;return t(["選擇一個心儀的模板著手設計吧！"])},NN0186:e=>{const{normalize:t}=e;return t(["特別設計過的電商模板能讓您簡單又快速的做出電商所需要的圖片。<newline>沒有設計底子也沒問題！只需要輕鬆點擊幾下，一張專屬於品牌的精美圖片馬上出爐！"])},NN0187:e=>{const{normalize:t}=e;return t(["我所有設計"])},NN0188:e=>{const{normalize:t}=e;return t(["我的最愛"])},NN0189:e=>{const{normalize:t}=e;return t(["垃圾桶"])},NN0190:e=>{const{normalize:t}=e;return t(["新建資料夾"])},NN0191:e=>{const{normalize:t}=e;return t(["排序方式"])},NN0192:e=>{const{normalize:t}=e;return t(["名稱 (遞增)"])},NN0193:e=>{const{normalize:t}=e;return t(["名稱 (遞減)"])},NN0194:e=>{const{normalize:t}=e;return t(["修改日期 (新到舊)"])},NN0195:e=>{const{normalize:t}=e;return t(["修改日期 (舊到新)"])},NN0196:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["由 ",n(r("name"))," 創作"])},NN0197:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("num"))," 個項目"])},NN0198:e=>{const{normalize:t}=e;return t(["重新命名"])},NN0199:e=>{const{normalize:t}=e;return t(["刪除資料夾"])},NN0200:e=>{const{normalize:t}=e;return t(["永久刪除"])},NN0201:e=>{const{normalize:t,plural:n}=e;return n([t(["將立即刪除此檔案，無法還原步驟"]),t(["將立即刪除這些檔案，無法還原步驟"])])},NN0202:e=>{const{normalize:t}=e;return t(["確定要永久刪除?"])},NN0203:e=>{const{normalize:t}=e;return t(["取消"])},NN0204:e=>{const{normalize:t}=e;return t(["還原"])},NN0205:e=>{const{normalize:t}=e;return t(["加入最愛"])},NN0206:e=>{const{normalize:t}=e;return t(["移至資料夾"])},NN0207:e=>{const{normalize:t}=e;return t(["取消最愛"])},NN0208:e=>{const{normalize:t}=e;return t(["模板尺寸"])},NN0209:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["你選擇的模板尺寸 (",n(r("tsize")),") 與頁面 (",n(r("psize")),") 不同，請問使用哪個尺寸？"])},NN0210:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("content"))," 已複製"])},NN0211:e=>{const{normalize:t}=e;return t(["複製頁面"])},NN0212:e=>{const{normalize:t}=e;return t(["取消群組"])},NN0213:e=>{const{normalize:t}=e;return t(["鎖定圖層"])},NN0214:e=>{const{normalize:t}=e;return t(["分享"])},NN0215:e=>{const{normalize:t}=e;return t(["透明背景"])},NN0216:e=>{const{normalize:t}=e;return t(["正在下載"])},NN0217:e=>{const{normalize:t}=e;return t(["品質影像：高 - 適用於透明底圖"])},NN0218:e=>{const{normalize:t}=e;return t(["品質影像：一般"])},NN0219:e=>{const{normalize:t}=e;return t(["平均分配間距"])},NN0220:e=>{const{normalize:t}=e;return t(["像素"])},NN0221:e=>{const{normalize:t}=e;return t(["水平分布"])},NN0222:e=>{const{normalize:t}=e;return t(["垂直分布"])},NN0223:e=>{const{normalize:t}=e;return t(["頭像上傳失敗"])},NN0224:e=>{const{normalize:t}=e;return t(["變更頭像成功"])},NN0225:e=>{const{normalize:t}=e;return t(["顯示更多"])},NN0226:e=>{const{normalize:t}=e;return t(["不可超過64個字元，請縮減名稱。"])},NN0227:e=>{const{normalize:t}=e;return t(["熱門搜尋"])},NN0228:e=>{const{normalize:t}=e;return t(["選擇設計主題"])},NN0229:e=>{const{normalize:t}=e;return t(["使用此模板"])},NN0230:e=>{const{normalize:t}=e;return t(["貼上"])},NN0231:e=>{const{normalize:t}=e;return t(["移至最前"])},NN0232:e=>{const{normalize:t}=e;return t(["前移"])},NN0233:e=>{const{normalize:t}=e;return t(["後移"])},NN0234:e=>{const{normalize:t}=e;return t(["移至最後"])},NN0235:e=>{const{normalize:t}=e;return t(["Vivipic 提供無數免費的專業模板，快立刻開始編輯吧！"])},NN0236:e=>{const{normalize:t}=e;return t(["僅供電腦版編輯"])},NN0237:e=>{const{normalize:t}=e;return t(["Vivipic 幫助您快速創建精美而令人印象深刻的電商圖片。"])},NN0238:e=>{const{normalize:t}=e;return t(["瀏覽我們提供的無數個免費的專業模板，並立刻開始編輯吧！"])},NN0239:e=>{const{normalize:t}=e;return t(["此資料夾是空的"])},NN0241:e=>{const{normalize:t}=e;return t(["30天後自動永久刪除。"])},NN0242:e=>{const{normalize:t}=e;return t(["發生問題，請稍後再試"])},NN0243:e=>{const{normalize:t}=e;return t(["刪除後會將原始檔案一併移除。"])},NN0244:e=>{const{normalize:t}=e;return t(["確定要刪除這些設計?"])},NN0245:e=>{const{normalize:t}=e;return t(["此資料夾含有多項設計/資料夾"])},NN0246:e=>{const{normalize:t}=e;return t(["是否要全部刪除？"])},NN0247:e=>{const{normalize:t}=e;return t(["設計尺寸與模板尺寸不相同，可點選更新"])},NN0248:e=>{const{normalize:t}=e;return t(["網路異常，請確認網路正常後再嘗試。"])},NN0249:e=>{const{normalize:t}=e;return t(["未命名資料夾"])},NN0250:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("item")),"已移至",n(r("folder"))])},NN0251:e=>{const{normalize:t}=e;return t(["建立副本"])},NN0252:e=>{const{normalize:t}=e;return t(["設計"])},NN0253:e=>{const{normalize:t}=e;return t(["資料夾"])},NN0254:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["選取 ",n(r("selectedNum"))])},NN0255:e=>{const{normalize:t}=e;return t(["多項設計/資料夾"])},NN0256:e=>{const{normalize:t}=e;return t(["最受歡迎"])},NN0257:e=>{const{normalize:t}=e;return t(["最新"])},NN0258:e=>{const{normalize:t}=e;return t(["未指定主題"])},NN0259:e=>{const{normalize:t}=e;return t(["恭喜你成為我們的首批用戶"])},NN0260:e=>{const{normalize:t}=e;return t(["請使用電腦或手機版瀏覽器開啟Vivipic編輯器。"])},NN0261:e=>{const{normalize:t}=e;return t(["平板/iPad版發布後會通知你搶先體驗！"])},NN0262:e=>{const{normalize:t}=e;return t(["回到首頁"])},NN0263:e=>{const{normalize:t}=e;return t(["選一個心儀的模板"])},NN0264:e=>{const{normalize:t}=e;return t(["用滑動頁面、關鍵字搜尋的方式尋找更多模板。按下篩選鍵後可切換搜尋不同尺寸的模板，且不同尺寸模板可以收於同一設計檔案內。"])},NN0265:e=>{const{normalize:t}=e;return t(["自訂物件"])},NN0266:e=>{const{normalize:t}=e;return t(["左側欄功能列包含圖片、元素、背景、文字皆可按一下選擇，工具列將出現在畫面右側讓您做更多更改。"])},NN0267:e=>{const{normalize:t}=e;return t(["隨心上傳"])},NN0268:e=>{const{normalize:t}=e;return t(["想要加入自己的照片也沒問題，直接將圖片拖曳到「上傳」區塊，或是點擊「上傳圖片」。"])},NN0269:e=>{const{normalize:t}=e;return t(["自由下載"])},NN0270:e=>{const{normalize:t}=e;return t(["選擇您想要的圖片格式、尺寸與範圍，即可順利下載完成！"])},NN0271:e=>{const{normalize:t}=e;return t(["略過"])},NN0272:e=>{const{normalize:t}=e;return t(["下一步"])},NN0273:e=>{const{normalize:t}=e;return t(["我瞭解了"])},NN0274:e=>{const{normalize:t}=e;return t(["開 始 製 作"])},NN0275:e=>{const{normalize:t}=e;return t(["分離背景照片"])},NN0276:e=>{const{normalize:t}=e;return t(["立即享受設計精美的電商模板"])},NN0277:e=>{const{normalize:t}=e;return t(["Vivipic 幫助您快速創建精美而令人印象深刻的電商圖片。經營電商太忙碌，讓設計成為最不必煩惱的小事。"])},NN0278:e=>{const{normalize:t}=e;return t(["熱門模板"])},NN0279:e=>{const{normalize:t}=e;return t(["最新模板"])},NN0280:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["使用 ",n(r("media"))," 帳號註冊"])},NN0281:e=>{const{normalize:t}=e;return t(["立即登入"])},NN0282:e=>{const{normalize:t}=e;return t(["別擔心，請輸入Email<newline>我們會傳送訊息給你，以協助你重設密碼。"])},NN0283:e=>{const{normalize:t}=e;return t(["返 回 登 入 頁"])},NN0284:e=>{const{normalize:t}=e;return t(["驗 證 碼 已 傳 送"])},NN0285:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["請在 ",n(r("time"))," 分鐘內輸入我們傳送到 ",n(r("email"))," 的驗證碼。"])},NN0286:e=>{const{normalize:t}=e;return t(["驗證碼"])},NN0287:e=>{const{normalize:t}=e;return t(["完 成"])},NN0288:e=>{const{normalize:t}=e;return t(["沒有收到驗證碼嗎？"])},NN0289:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("time")),"秒後可以重寄驗證碼"])},NN0290:e=>{const{normalize:t}=e;return t(["重新傳送驗證碼"])},NN0291:e=>{const{normalize:t}=e;return t(["設 定 新 密 碼"])},NN0292:e=>{const{normalize:t}=e;return t(["新密碼"])},NN0293:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["密碼長度至少",n(r("len")),"個字元"])},NN0294:e=>{const{normalize:t}=e;return t(["密碼包含英文字母"])},NN0295:e=>{const{normalize:t}=e;return t(["密碼包含數字"])},NN0296:e=>{const{normalize:t}=e;return t(["確認新密碼"])},NN0297:e=>{const{normalize:t}=e;return t(["Email 格式錯誤"])},NN0298:e=>{const{normalize:t}=e;return t(["驗證碼錯誤"])},NN0299:e=>{const{normalize:t}=e;return t(["請確認輸入的密碼是否與第一組密碼相符。"])},NN0300:e=>{const{normalize:t}=e;return t(["開始使用 Vivipic"])},NN0301:e=>{const{normalize:t}=e;return t(["在電商這條路上，讓 Vivipic 成為你的設計好助手！"])},NN0302:e=>{const{normalize:t}=e;return t(["馬上註冊，即可免費享用精美電商模板"])},NN0303:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["使用 ",n(r("media"))," 註冊"])},NN0304:e=>{const{normalize:t}=e;return t(["已是會員？"])},NN0305:e=>{const{normalize:t}=e;return t(["立即登入"])},NN0306:e=>{const{normalize:t}=e;return t(["建立您的帳號"])},NN0307:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["註冊即代表你同意 Vivipic 的 ",n(r("use"))," 與 ",n(r("privacy"))," 。"])},NN0308:e=>{const{normalize:t}=e;return t(["密碼需包含大小寫英文字母、數字８碼以上。"])},NN0309:e=>{const{normalize:t}=e;return t(["變 更 個 人 相 片"])},NN0310:e=>{const{normalize:t}=e;return t(["更改密碼"])},NN0311:e=>{const{normalize:t}=e;return t(["您上一次密碼更新日期："])},NN0312:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("year"))," 年 ",n(r("month"))," 月 ",n(r("date"))," 日"])},NN0313:e=>{const{normalize:t}=e;return t(["更 改"])},NN0314:e=>{const{normalize:t}=e;return t(["安全防護"])},NN0315:e=>{const{normalize:t}=e;return t(["從所有裝置上登出以結束所有作業階段。"])},NN0316:e=>{const{normalize:t}=e;return t(["從 裝 置 上 登 出"])},NN0317:e=>{const{normalize:t,plural:n}=e;return n([t(["刪除帳號"]),t(["刪 除 帳 號"])])},NN0318:e=>{const{normalize:t}=e;return t(["刪除帳號後，你將無法再存取任何設計或登入 Vivipic。"])},NN0319:e=>{const{normalize:t}=e;return t(["高度"])},NN0320:e=>{const{normalize:t}=e;return t(["寬度"])},NN0321:e=>{const{normalize:t}=e;return t(["模板版面"])},NN0322:e=>{const{normalize:t}=e;return t(["自動推薦模板版面"])},NN0323:e=>{const{normalize:t}=e;return t(["請登入/註冊後才能下載"])},NN0324:e=>{const{normalize:t}=e;return t(["全部"])},NN0325:e=>{const{normalize:t}=e;return t(["未曾更新"])},NN0326:e=>{const{normalize:t}=e;return t(["限時免費試用！"])},NN0327:e=>{const{normalize:t}=e;return t(["上千個專業的精美模板"])},NN0328:e=>{const{normalize:t}=e;return t(["Vivipic 提供上千個由專業設計師製作的電商模板，風格多樣且適合各種行業"])},NN0329:e=>{const{normalize:t}=e;return t(["專為瞬息萬變的電商而生"])},NN0330:e=>{const{normalize:t}=e;return t(["使用符合臺灣人口味的模板，快速製作出你心目中的電商圖片"])},NN0331:e=>{const{normalize:t}=e;return t(["LINE 行銷嘛欸通"])},NN0332:e=>{const{normalize:t}=e;return t(["不只是 Facebook 和 Instagram，包含電商商品、官網用圖，甚至是 LINE 推播圖片也一應俱全"])},NN0333:e=>{const{normalize:t}=e;return t(["提供精美素材媒體庫"])},NN0334:e=>{const{normalize:t}=e;return t(["Vivipic 擁有你在設計路上需要的必要素材。超過 200 萬張的可商用圖庫、定期新增的插圖素材、背景、圖示等等。"])},NN0335:e=>{const{normalize:t}=e;return t(["確 認 原 始 密 碼"])},NN0336:e=>{const{normalize:t}=e;return t(["原始密碼"])},NN0337:e=>{const{normalize:t}=e;return t(["更新帳號前，請確認原始密碼。"])},NN0338:e=>{const{normalize:t}=e;return t(["確 認 密 碼"])},NN0339:e=>{const{normalize:t}=e;return t(["確 定 移 除 ？"])},NN0340:e=>{const{normalize:t}=e;return t(["所有結果"])},NN0341:e=>{const{normalize:t}=e;return t(["多種字型"])},NN0342:e=>{const{normalize:t}=e;return t(["符合畫面"])},NN0343:e=>{const{normalize:t}=e;return t(["填滿畫面"])},NN0344:e=>{const{normalize:t}=e;return t(["選擇頁面下載方式"])},NN0345:e=>{const{normalize:t}=e;return t(["切片高度無限制"])},NN0346:e=>{const{normalize:t}=e;return t(["切片高度不超過："])},NN0347:e=>{const{normalize:t}=e;return t(["完整頁面下載"])},NN0348:e=>{const{normalize:t}=e;return t(["頁面切片下載"])},NN0349:e=>{const{normalize:t}=e;return t(["網路狀況異常"])},NN0350:e=>{const{normalize:t}=e;return t(["請登入後，才可上傳檔案"])},NN0351:e=>{const{normalize:t}=e;return t([" 網路狀況異常，請確認網路連線正常後再重試。"])},NN0352:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["若要儲存設計，請",n(r("signUp")),"或",n(r("logIn"))])},OG0001:e=>{const{normalize:t,plural:n}=e;return n([t(["模板素材平面設計軟體,針對台灣電商,在地化設計"]),t(["vivipic"])])},OG0002:e=>{const{normalize:t}=e;return t(["專為台灣電商設計, 模板平面設計軟體, 台灣團隊研發, 多種電商常用素材,促銷,新品,蝦皮商品圖,內容行銷,LINE/FB/IG貼文圖片,適合Shopline/momo/PChome/91App網頁的產品詳情頁,多種中文字型/插圖,皆可商用。"])},OG0003:e=>{const{normalize:t}=e;return t(["https://template.vivipic.com/static/img/TW_vivipic.jpg"])},OG0004:e=>{const{normalize:t}=e;return t(["vivipic"])},OG0005:e=>{const{normalize:t}=e;return t(["https://vivipic.com/tw"])},OG0006:e=>{const{normalize:t}=e;return t(["https://vivipic.com/tw/templates"])},SE0001:e=>{const{normalize:t,plural:n}=e;return n([t(["模板素材平面設計軟體,針對台灣電商,在地化設計"]),t(["vivipic"])])},SE0002:e=>{const{normalize:t}=e;return t(["專為台灣電商設計, 模板平面設計軟體, 台灣團隊研發, 多種電商常用素材,促銷,新品,蝦皮商品圖,內容行銷,LINE/FB/IG貼文圖片,適合Shopline/momo/PChome/91App網頁的產品詳情頁,多種中文字型/插圖,皆可商用。"])},SE0003:e=>{const{normalize:t}=e;return t(["zh"])},NN0353:e=>{const{normalize:t}=e;return t(["字型"])},NN0354:e=>{const{normalize:t}=e;return t(["點我製作"])},NN0355:e=>{const{normalize:t}=e;return t(["來設計自己第一款模板吧！肯定很有趣！"])},NN0356:e=>{const{normalize:t}=e;return t(["免運,新品,內容行銷,聖誕節"])},NN0357:e=>{const{normalize:t}=e;return t(["檔案資料已儲存"])},NN0358:e=>{const{normalize:t}=e;return t(["確認"])},NN0359:e=>{const{normalize:t}=e;return t(["關閉"])},NN0360:e=>{const{normalize:t}=e;return t(["檔案資料儲存失敗"])},NN0361:e=>{const{normalize:t}=e;return t(["顯示所有參考線"])},NN0362:e=>{const{normalize:t}=e;return t(["繼續使用"])},NN0363:e=>{const{normalize:t}=e;return t(["鎖定參考線"])},NN0364:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["攝影師:",n(r("site")),"上的",n(r("author"))])},NN0365:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["創作者:",n(r("author"))])},NN0366:e=>{const{normalize:t}=e;return t(["標籤"])},NN0367:e=>{const{normalize:t}=e;return t(["授權條款"])},NN0368:e=>{const{normalize:t}=e;return t(["FB / IG貼文"])},NN0369:e=>{const{normalize:t}=e;return t(["電商詳情頁"])},NN0370:e=>{const{normalize:t}=e;return t(["Youtube 影片封面"])},NN0371:e=>{const{normalize:t}=e;return t(["瀏覽所有模板"])},NN0372:e=>{const{normalize:t}=e;return t(["準備好創作了嗎？<newline>\n立刻開始吧！"])},NN0373:e=>{const{normalize:t}=e;return t(["限時免費試用。"])},NN0374:e=>{const{normalize:t}=e;return t(["免費註冊"])},NN0375:e=>{const{normalize:t}=e;return t(["符合台灣人口味的精美模板"])},NN0376:e=>{const{normalize:t}=e;return t(["由最 Local 的台灣設計師，打造風格多樣、能運用在各種行銷情境的電商模板。"])},NN0377:e=>{const{normalize:t}=e;return t(["探索模板"])},NN0378:e=>{const{normalize:t}=e;return t(["專為瞬息萬變的電商而生"])},NN0379:e=>{const{normalize:t}=e;return t(["無論您銷售的產品及服務類別，在 Vivipic 都能找到適合您的模板，如：服飾包包、餐飲美食、美容美妝、運動健身......"])},NN0380:e=>{const{normalize:t}=e;return t(["適用各大社群媒體、電商平台及官網"])},NN0381:e=>{const{normalize:t}=e;return t(["專為台灣電商常用版位，打造多款視覺設計。無論在 Facebook、Instagram、LINE 推播、電商平台、官方網站，專業一致的廣告圖，都能輕鬆套版搞定。"])},NN0382:e=>{const{normalize:t}=e;return t(["解鎖背景"])},NN0383:e=>{const{normalize:t}=e;return t(["鎖定參考線"])},NN0384:e=>{const{normalize:t}=e;return t(["解鎖參考線"])},NN0385:e=>{const{normalize:t}=e;return t(["清除"])},NN0386:e=>{const{normalize:t}=e;return t(["保留"])},NN0387:e=>{const{normalize:t}=e;return t(["筆刷大小"])},NN0388:e=>{const{normalize:t}=e;return t(["顯示原圖"])},NN0389:e=>{const{normalize:t}=e;return t(["恢復原圖"])},NN0390:e=>{const{normalize:t}=e;return t(["Vivipic 幫助您快速創建精美而令人印象深刻的電商圖片。<newline>瀏覽我們提供的無數個免費的專業模板，並立刻開始編輯吧！"])},NN0391:e=>{const{normalize:t}=e;return t(["開 始 免 費 製 作"])},NN0392:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["加入全部 ",n(r("num"))," 個頁面"])},NN0393:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(['抱歉，我們無法找到任何關於"',n(r("keyword")),'"的',n(r("target")),"，請您再試試看其他相關字詞。"])},NN0394:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["抱歉，我們無法找到任何",n(r("target")),"，請您再試試看其他相關字詞。"])},NN0395:e=>{const{normalize:t}=e;return t(["若採用Google/Facebook帳號登入，無法在此更改密碼。<newline>若要更改密碼，請至原平台修改。"])},NN0396:e=>{const{normalize:t}=e;return t(["新增品牌"])},NN0397:e=>{const{normalize:t}=e;return t(["未命名品牌"])},NN0398:e=>{const{normalize:t}=e;return t(["建議<html>將版面勾選設定為全部<html>，也許可找到更多模板。"])},NN0399:e=>{const{normalize:t}=e;return t(["品牌Logo"])},NN0400:e=>{const{normalize:t}=e;return t(["品牌字型"])},NN0401:e=>{const{normalize:t}=e;return t(["品牌顏色"])},NN0402:e=>{const{normalize:t}=e;return t(["點擊或拖曳檔案至此以上傳字型"])},NN0403:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["新增",n(r("textType")),"樣式"])},NN0404:e=>{const{normalize:t}=e;return t(["新增調色盤"])},NN0405:e=>{const{normalize:t}=e;return t(["未命名調色盤"])},NN0406:e=>{const{normalize:t}=e;return t(["滴管工具目前僅支援Chrome、Edge和Opera桌機版，使用者若要使用此功能，請使用支援的瀏覽器最新版本。"])},NN0407:e=>{const{normalize:t}=e;return t(["滴管工具"])},NN0408:e=>{const{normalize:t}=e;return t(["主標題"])},NN0409:e=>{const{normalize:t}=e;return t(["副標題"])},NN0410:e=>{const{normalize:t}=e;return t(["內文"])},NN0411:e=>{const{normalize:t}=e;return t(["點擊以上傳"])},NN0412:e=>{const{normalize:t}=e;return t(["或<newline>拖曳照片至此上傳"])},NN0413:e=>{const{normalize:t}=e;return t(["拖曳照片至此"])},NN0414:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["可用",n(r("element")),"檔案格式"])},NN0415:e=>{const{normalize:t}=e;return t(["拖曳檔案至此"])},NN0416:e=>{const{normalize:t}=e;return t(["照片"])},NN0417:e=>{const{normalize:t}=e;return t(["字型"])},NN0418:e=>{const{normalize:t}=e;return t(["外光暈"])},NN0419:e=>{const{normalize:t}=e;return t(["柔焦陰影"])},NN0420:e=>{const{normalize:t}=e;return t(["漂浮陰影"])},NN0421:e=>{const{normalize:t}=e;return t(["擴展"])},NN0422:e=>{const{normalize:t}=e;return t(["尺寸"])},NN0423:e=>{const{normalize:t}=e;return t(["邊寬"])},NN0424:e=>{const{normalize:t}=e;return t(["垂直位移"])},NN0425:e=>{const{normalize:t}=e;return t(["水平位移"])},NN0426:e=>{const{normalize:t}=e;return t(["模糊化"])},NN0427:e=>{const{normalize:t}=e;return t(["透明度"])},NN0428:e=>{const{normalize:t}=e;return t(["無效果"])},NN0429:e=>{const{normalize:t}=e;return t(["陰影"])},NN0430:e=>{const{normalize:t}=e;return t(["外框"])},NN0431:e=>{const{normalize:t}=e;return t(["距離"])},NN0432:e=>{const{normalize:t}=e;return t(["角度"])},NN0433:e=>{const{normalize:t}=e;return t(["您確定執行嗎？"])},NN0434:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["您即將刪除",n(r("itemName"))])},NN0435:e=>{const{normalize:t}=e;return t(["這個動作執行後無法回復。"])},NN0436:e=>{const{normalize:t}=e;return t(["現有的設計不會被影響。"])},NN0437:e=>{const{normalize:t}=e;return t(["是，確定刪除"])},NN0438:e=>{const{normalize:t}=e;return t(["陰影"])},NN0439:e=>{const{normalize:t}=e;return t(["頁"])},NN0440:e=>{const{normalize:t}=e;return t(["是否要取消訂閱電子信？"])},NN0441:e=>{const{normalize:t}=e;return t(["取消訂閱後，您將無法收到以下最新資訊："])},NN0442:e=>{const{normalize:t}=e;return t(["會員訂閱的優惠方案"])},NN0443:e=>{const{normalize:t}=e;return t(["最新模板的上架通知"])},NN0444:e=>{const{normalize:t}=e;return t(["進階功能的使用密技"])},NN0445:e=>{const{normalize:t}=e;return t(["是"])},NN0446:e=>{const{normalize:t}=e;return t(["否"])},NN0447:e=>{const{normalize:t}=e;return t(["有什麼想對我們說呢？"])},NN0448:e=>{const{normalize:t}=e;return t(["謝謝您使用Vivipic，為了提供更好的服務，想了解您取消訂閱的原因，您的建議將成為我們往前的動力："])},NN0449:e=>{const{normalize:t}=e;return t(["信件資訊量太多"])},NN0450:e=>{const{normalize:t}=e;return t(["不想收到優惠提醒"])},NN0451:e=>{const{normalize:t}=e;return t(["太常收到電子信"])},NN0452:e=>{const{normalize:t}=e;return t(["其他"])},NN0453:e=>{const{normalize:t}=e;return t(["留下您的寶貴意見"])},NN0454:e=>{const{normalize:t}=e;return t(["處理中"])},NN0455:e=>{const{normalize:t}=e;return t(["儲存中"])},NN0456:e=>{const{normalize:t}=e;return t(["糟糕！"])},NN0457:e=>{const{normalize:t}=e;return t(["發生問題⋯"])},NN0458:e=>{const{normalize:t}=e;return t(["請稍後再試！"])},NN0459:e=>{const{normalize:t}=e;return t(["會一併從所有設計內刪除。"])},NN0460:e=>{const{normalize:t}=e;return t(["測試"])},NN0461:e=>{const{normalize:t}=e;return t(["設計上傳失敗，請重新點擊下載"])},NN0462:e=>{const{normalize:t}=e;return t(["下載失敗，請重新下載"])},NN0463:e=>{const{normalize:t}=e;return t(["上傳的字型"])},NN0464:e=>{const{normalize:t}=e;return t(["有了<blue>Vivipic</blue>，你也能輕鬆產出高質感設計！"])},NN0465:e=>{const{normalize:t}=e;return t(["行銷推廣的好幫手，讓你盡情發揮創造力。"])},NN0466:e=>{const{normalize:t}=e;return t(["上萬個模板給你源源不絕的靈感"])},NN0467:e=>{const{normalize:t}=e;return t(["台灣設計師打造風格多樣的繁體中文模板，模板/素材/字型皆可個人使用及商用。"])},NN0468:e=>{const{normalize:t}=e;return t(["各種行銷活動的模板，我們都準備好了"])},NN0469:e=>{const{normalize:t}=e;return t(["模板中心可以根據產業或行銷活動，篩選出最適合的模板。"])},NN0470:e=>{const{normalize:t}=e;return t(["到模板中心逛逛"])},NN0471:e=>{const{normalize:t}=e;return t(["尺寸多元<newline>模板組合包"])},NN0472:e=>{const{normalize:t}=e;return t(["喜歡的模板卻只有一種尺寸？同風格、多尺寸的模板組合包，讓你快速做到不同平台曝光、提升流量。"])},NN0473:e=>{const{normalize:t}=e;return t(["貼心支援<newline>多尺寸編輯"])},NN0474:e=>{const{normalize:t}=e;return t(["同個檔案下能加入、編輯多種不同尺寸模板，方便製作及管理不同規格的設計。"])},NN0475:e=>{const{normalize:t}=e;return t(["獨家：<newline>結合銷售邏輯的模板"])},NN0476:e=>{const{normalize:t}=e;return t(["產品特色多卻不知如何呈現？使用行銷九宮格模板，抓住顧客的心理需求、提高下單率都是小菜一碟～"])},NN0477:e=>{const{normalize:t}=e;return t(["探索更多模板"])},NN0478:e=>{const{normalize:t}=e;return t(["首創：<newline>一頁式銷售頁模板"])},NN0479:e=>{const{normalize:t}=e;return t(["可彈性調整頁面順序，所見即所得，圖片輸出、設計不跑版，快速上架電商平台超便利。"])},NN0480:e=>{const{normalize:t}=e;return t(["一鍵上傳<newline>自動化專業去背"])},NN0481:e=>{const{normalize:t}=e;return t(["除了全自動去背，也支援手動調整想保留及清除的範圍。"])},NN0482:e=>{const{normalize:t}=e;return t(["輕鬆維持<newline>品牌視覺一致性"])},NN0483:e=>{const{normalize:t}=e;return t(["使用「品牌工具組」上傳品牌Logo、字型、色系，統一品牌所有設計的風格，加深受眾記憶點。"])},NN0484:e=>{const{normalize:t}=e;return t(["聽聽他們怎麼說？"])},NN0485:e=>{const{normalize:t}=e;return t(["來自用戶的評價"])},NN0486:e=>{const{normalize:t}=e;return t(["<blue>模板大平台</blue>給你滿滿的靈感，創意不設限！"])},NN0487:e=>{const{normalize:t}=e;return t(["<blue>模板大平台</blue>給你滿滿的靈感，創意不設限！"])},NN0488:e=>{const{normalize:t}=e;return t(["根據需求，快速篩選出最適合你的設計！"])},NN0489:e=>{const{normalize:t}=e;return t(["主選單"])},NN0490:e=>{const{normalize:t}=e;return t(["替換"])},NN0491:e=>{const{normalize:t}=e;return t(["特效"])},NN0492:e=>{const{normalize:t}=e;return t(["字型大小"])},NN0493:e=>{const{normalize:t}=e;return t(["商標"])},NN0494:e=>{const{normalize:t}=e;return t(["文字"])},NN0495:e=>{const{normalize:t}=e;return t(["顏色"])},NN0496:e=>{const{normalize:t}=e;return t(["選取裁切範圍"])},NN0497:e=>{const{normalize:t}=e;return t(["品牌"])},NN0498:e=>{const{normalize:t}=e;return t(["格式"])},NN0500:e=>{const{normalize:t}=e;return t(["圖片處理中，請稍候"])},NN0501:e=>{const{normalize:t}=e;return t(["選擇參考線板型"])},NN0502:e=>{const{normalize:t}=e;return t(["刪除此參考線"])},NN0503:e=>{const{normalize:t}=e;return t(["字型處理較費時，約需1~5分鐘，請耐心等候。"])},NN0504:e=>{const{normalize:t}=e;return t(["編輯"])},NN0505:e=>{const{normalize:t}=e;return t(["升級<blue>PRO</blue>專業版"])},NN0506:e=>{const{normalize:t}=e;return t(["使用進階版工具及優質模板，生產力UP UP!"])},NN0507:e=>{const{normalize:t,plural:n}=e;return n([t(["Vivipic PRO"]),t(["<blue>Vivipic PRO<blue>"])])},NN0508:e=>{const{normalize:t}=e;return t(["現在就以超值價格享有升級體驗。"])},NN0509:e=>{const{normalize:t}=e;return t(["PRO專業版包含"])},NN0510:e=>{const{normalize:t}=e;return t(["獨家設計付費限定模板"])},NN0511:e=>{const{normalize:t}=e;return t(["高畫質去背工具"])},NN0512:e=>{const{normalize:t}=e;return t(["100 GB 檔案儲存空間"])},NN0513:e=>{const{normalize:t}=e;return t(["不限數量的品牌管理工具"])},NN0514:e=>{const{normalize:t}=e;return t(["以月計費"])},NN0515:e=>{const{normalize:t}=e;return t(["以年計費"])},NN0516:e=>{const{normalize:t}=e;return t(["元/月"])},NN0517:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["免 費 使 用 ",n(r("day"))," 天"])},NN0518:e=>{const{normalize:t}=e;return t(["管理我的訂閱"])},NN0519:e=>{const{normalize:t}=e;return t(["*上述收費以新台幣計算"])},NN0520:e=>{const{normalize:t}=e;return t(["基本功能"])},NN0521:e=>{const{normalize:t}=e;return t(["免費版"])},NN0522:e=>{const{normalize:t}=e;return t(["PRO 專業版"])},NN0523:e=>{const{normalize:t}=e;return t(["付費限定優質模板"])},NN0524:e=>{const{normalize:t}=e;return t(["免費模板"])},NN0525:e=>{const{normalize:t}=e;return t(["無限制的檔案下載"])},NN0526:e=>{const{normalize:t}=e;return t(["檔案儲存空間"])},NN0527:e=>{const{normalize:t}=e;return t(["免費版照片及素材"])},NN0528:e=>{const{normalize:t}=e;return t(["高畫質去背工具"])},NN0529:e=>{const{normalize:t}=e;return t(["品牌管理工具"])},NN0530:e=>{const{normalize:t}=e;return t(["設計尺寸調整功能"])},NN0531:e=>{const{normalize:t}=e;return t(["多種文字特效"])},NN0532:e=>{const{normalize:t}=e;return t(["下載透明PNG檔案"])},NN0533:e=>{const{normalize:t}=e;return t(["常見問題"])},NN0534:e=>{const{normalize:t}=e;return t(["我可以免費使用Vivipic嗎？"])},NN0535:e=>{const{normalize:t}=e;return t(["當然可以！你可以免費自由使用Vivipic的模板、素材、字型。如果你想要使用高畫質去背工具、付費限定模板、更大的雲端儲存空間，就會需要升級為Pro專業版。"])},NN0536:e=>{const{normalize:t}=e;return t(["我已經購買Vivipic Pro方案，如果我的去背點數或儲存空間用完怎麼辦？"])},NN0537:e=>{const{normalize:t}=e;return t(["Pro方案提供每月300點去背點數，已可滿足去背重度使用者的需求。若當月的去背點數（300點）或者儲存空間（100 GB）已使用完畢，且你需要更多的去背點數或儲存空間，請聯繫我們FB粉專https://facebook.com/vivipictw 或 Email: tw","@","vivipic.com。"])},NN0538:e=>{const{normalize:t}=e;return t(["如果我在使用Vivipic有任何問題或想提供建議，可以怎麼做？"])},NN0539:e=>{const{normalize:t}=e;return t(["你可以私訊我們臉書粉專 https://facebook.com/vivipictw，或寄email給我們tw","@","vivipic.com。"])},NN0540:e=>{const{normalize:t}=e;return t(["你們支援哪些付款方式？"])},NN0541:e=>{const{normalize:t}=e;return t(["我們支援信用卡付款。"])},NN0542:e=>{const{normalize:t}=e;return t(["如果我想取消Vivipic Pro專業版的話，要怎麼做？"])},NN0543:e=>{const{normalize:t}=e;return t(["不用擔心，你隨時可以在帳號設定的頁面取消訂閱付費方案。"])},NN0544:e=>{const{normalize:t}=e;return t(["步驟"])},NN0545:e=>{const{normalize:t}=e;return t(["下一步"])},NN0546:e=>{const{normalize:t}=e;return t(["14天內你可以免費試用所有PRO會員專屬的功能。"])},NN0547:e=>{const{normalize:t}=e;return t(["享受付費限定的模板，及更加流暢的設計體驗。"])},NN0548:e=>{const{normalize:t}=e;return t(["，年繳一次付清"])},NN0549:e=>{const{normalize:t}=e;return t(["現省25%"])},NN0550:e=>{const{normalize:t}=e;return t(["下一步"])},NN0551:e=>{const{normalize:t}=e;return t(["付款資訊"])},NN0552:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["實際扣款日：",n(r("date"))])},NN0553:e=>{const{normalize:t}=e;return t(["今日扣款金額："])},NN0554:e=>{const{normalize:t}=e;return t(["發票資訊"])},NN0555:e=>{const{normalize:t}=e;return t(["電子郵件"])},NN0556:e=>{const{normalize:t}=e;return t(["姓名"])},NN0557:e=>{const{normalize:t}=e;return t(["電話號碼"])},NN0558:e=>{const{normalize:t}=e;return t(["統一編號"])},NN0559:e=>{const{normalize:t}=e;return t(["統一編號（選填）"])},NN0560:e=>{const{normalize:t}=e;return t(["開始免費試用"])},NN0561:e=>{const{normalize:t}=e;return t(["升級成為Vivipic Pro"])},NN0562:e=>{const{normalize:t}=e;return t(["恭喜你！Vivipic Pro將提升你的創意產能，進階版工具及付費限定模板，現在就開始體驗！"])},NN0563:e=>{const{normalize:t}=e;return t(["好的，了解"])},NN0564:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["更改為「",n(r("period")),"」"])},NN0565:e=>{const{normalize:t}=e;return t(["現在改以年計費可省26% —— 等於現省兩個月！"])},NN0566:e=>{const{normalize:t}=e;return t(["繼續保留「以年計費」省更多！"])},NN0567:e=>{const{normalize:t}=e;return t(["確認修改"])},NN0568:e=>{const{normalize:t}=e;return t(["以信用卡付款"])},NN0569:e=>{const{normalize:t}=e;return t(["你將會錯過..."])},NN0570:e=>{const{normalize:t}=e;return t(["PRO 會員模板"])},NN0571:e=>{const{normalize:t}=e;return t(["100GB 儲存容量"])},NN0572:e=>{const{normalize:t}=e;return t(["高畫質去背工具"])},NN0573:e=>{const{normalize:t}=e;return t(["品牌管理工具"])},NN0574:e=>{const{normalize:t}=e;return t(["取消訂閱"])},NN0575:e=>{const{normalize:t}=e;return t(["繼續訂閱"])},NN0576:e=>{const{normalize:t}=e;return t(["請您選擇取消訂閱的原因："])},NN0577:e=>{const{normalize:t}=e;return t(["我很少會用到付費功能。"])},NN0578:e=>{const{normalize:t}=e;return t(["我無法負擔PRO版費用。"])},NN0579:e=>{const{normalize:t}=e;return t(["我需要更多進階功能。"])},NN0580:e=>{const{normalize:t}=e;return t(["我找不到我想要的模板。"])},NN0581:e=>{const{normalize:t}=e;return t(["我使用了別的網站製作圖片。"])},NN0582:e=>{const{normalize:t}=e;return t(["其他原因"])},NN0583:e=>{const{normalize:t}=e;return t(["立即使用品牌工具，享受更流暢的設計體驗。"])},NN0584:e=>{const{normalize:t}=e;return t(["你的意見是我們進步的動力。"])},NN0585:e=>{const{normalize:t}=e;return t(["訂閱與付款"])},NN0586:e=>{const{normalize:t}=e;return t(["你的訂閱"])},NN0587:e=>{const{normalize:t}=e;return t(["升級成為Vivipic Pro"])},NN0588:e=>{const{normalize:t}=e;return t(["恢復訂閱"])},NN0589:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["你選擇的是",n(r("period")),"。"])},NN0590:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["下一次扣款日（<blue>",n(r("price")),"</blue>元）：<blue>",n(r("date")),"</blue>"])},NN0591:e=>{const{normalize:t}=e;return t(["改為以月計費"])},NN0592:e=>{const{normalize:t}=e;return t(["取消訂閱"])},NN0593:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["PRO專業版到期日：",n(r("date"))])},NN0594:e=>{const{normalize:t}=e;return t(["去背點數"])},NN0595:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("date")),"前仍有<blue>",n(r("amount")),"</blue>點去背點數"])},NN0596:e=>{const{normalize:t}=e;return t(["檔案儲存空間"])},NN0597:e=>{const{normalize:t}=e;return t(["如果你需要更多的去背點數或儲存空間，請聯繫我們tw","@","vivipic.com。"])},NN0598:e=>{const{normalize:t}=e;return t(["付款資訊"])},NN0599:e=>{const{normalize:t}=e;return t(["到期"])},NN0600:e=>{const{normalize:t}=e;return t(["變更付款方式"])},NN0601:e=>{const{normalize:t}=e;return t(["帳單資訊"])},NN0602:e=>{const{normalize:t}=e;return t(["請輸入電子郵件"])},NN0603:e=>{const{normalize:t}=e;return t(["全名"])},NN0604:e=>{const{normalize:t}=e;return t(["公司名稱"])},NN0605:e=>{const{normalize:t}=e;return t(["請輸入公司名稱（選填）"])},NN0606:e=>{const{normalize:t}=e;return t(["地址"])},NN0607:e=>{const{normalize:t}=e;return t(["請輸入地址"])},NN0608:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["第",n(r("number")),"行"])},NN0609:e=>{const{normalize:t}=e;return t(["門牌號碼、弄、巷、路街名稱"])},NN0610:e=>{const{normalize:t}=e;return t(["公寓/套房房號（選填）"])},NN0611:e=>{const{normalize:t}=e;return t(["城市"])},NN0612:e=>{const{normalize:t}=e;return t(["州"])},NN0613:e=>{const{normalize:t}=e;return t(["郵遞區號"])},NN0614:e=>{const{normalize:t}=e;return t(["付款紀錄"])},NN0615:e=>{const{normalize:t}=e;return t(["日期"])},NN0616:e=>{const{normalize:t}=e;return t(["訂閱項目"])},NN0617:e=>{const{normalize:t}=e;return t(["價格"])},NN0618:e=>{const{normalize:t}=e;return t(["備註"])},NN0619:e=>{const{normalize:t}=e;return t(["下載明細"])},NN0620:e=>{const{normalize:t}=e;return t(["扣款失敗"])},NN0621:e=>{const{normalize:t}=e;return t(["你沒有付款紀錄。"])},NN0622:e=>{const{normalize:t}=e;return t(["確定移除？"])},NN0623:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["是否要移除",n(r("paymentMethod")),"？"])},NN0624:e=>{const{normalize:t}=e;return t(["付款方式"])},NN0625:e=>{const{normalize:t}=e;return t(["是，我要移除。"])},NN0626:e=>{const{normalize:t}=e;return t(["‼️我們無法完成交易，請改用其他付款方式。"])},NN0627:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["你已成功切換為",n(r("period")),"。"])},NN0628:e=>{const{normalize:t}=e;return t(["你已成功取消訂閱。"])},NN0629:e=>{const{normalize:t}=e;return t(["你已成功保留訂閱方案。"])},NN0630:e=>{const{normalize:t}=e;return t(["你已成功更新信用卡資訊。"])},NN0631:e=>{const{normalize:t}=e;return t(["你已成功刪除信用卡。"])},NN0632:e=>{const{normalize:t}=e;return t(["不正確的手機號碼。"])},NN0633:e=>{const{normalize:t}=e;return t(["不正確的統一編號。"])},NN0634:e=>{const{normalize:t}=e;return t(["不正確的郵遞區號。"])},NN0635:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["已使用",n(r("disk")),"%儲存空間"])},NN0636:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Vivipic免費用戶擁有1GB儲存空間，當使用量已達上限，將無法再上傳圖片或新增設計。成為【",n(r("button")),"】立即擁有100GB儲存空間。"])},NN0637:e=>{const{normalize:t}=e;return t(["Vivipic免費用戶擁有1GB儲存空間，目前使用量已達上限，無法再上傳圖片或新增設計。建議刪除不必要檔案後按下【重新計算】，我們會重新計算您的儲存空間使用量。或【成為Vivipic PRO】立即擁有100GB儲存空間。"])},NN0638:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Vivipic免費用戶擁有1GB儲存空間，目前使用量已滿，無法再上傳圖片或新增設計。成為【",n(r("button")),"】立即擁有100GB存儲空間。"])},NN0639:e=>{const{normalize:t}=e;return t(["目前儲存空間使用量已達上限，無法再上傳圖片或新增設計。建議刪除不必要檔案後按下【重新計算】，我們會重新計算您的儲存空間使用量。或【聯繫客服】為您提供新的方案（tw","@","vivipic.com）。"])},NN0640:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["目前儲存空間使用量已達上限，無法再上傳圖片或新增設計。建議刪除不必要的檔案 或【",n(r("button")),"】為您提供新的方案（tw","@","vivipic.com）。"])},NN0641:e=>{const{normalize:t}=e;return t(["重新計算"])},NN0642:e=>{const{normalize:t}=e;return t(["聯繫客服"])},NN0643:e=>{const{normalize:t}=e;return t(["付費方案"])},NN0644:e=>{const{normalize:t}=e;return t(["儲存空間不足"])},NN0645:e=>{const{normalize:t}=e;return t(["上傳圖片大小超過限制"])},NN0646:e=>{const{normalize:t}=e;return t(["去背點數已使用完畢"])},NN0647:e=>{const{normalize:t}=e;return t(["去背點數已經用完，下次收費後才會有新點數可使用，若您現在需要去背，可切換為年繳付費，會一次給予整年的去背點數，或聯絡客服處理。"])},NN0648:e=>{const{normalize:t}=e;return t(["去背點數已經用完，下次收費後才會有新點數可使用，若您現在需要去背，請聯絡客服處理。"])},NN0649:e=>{const{normalize:t}=e;return t(["設定"])},NN0650:e=>{const{normalize:t}=e;return t(["發票可以報統編嗎？哪裡取得？"])},NN0651:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["發票以台灣電子發票開立，可以打統編報帳，若需發票可以到「",n(r("history")),"」下載印出。(其他國外軟體，付費使用時會被收約2%海外交易手續費，不開台灣發票、沒繳台灣稅，依規定，國稅局可要求購買人負擔20%的稅)。"])},NN0652:e=>{const{normalize:t}=e;return t(["加入Pro方案，即刻享受世界一流的自動去背效果，也能再彈性手動去背。"])},NN0653:e=>{const{normalize:t}=e;return t(["解鎖這個模板，並同時享有其他數千個付費限定優質模板。"])},NN0654:e=>{const{normalize:t}=e;return t(["改為以年計費（省更多！）"])},NN0655:e=>{const{normalize:t}=e;return t(["目前方案"])},NN0656:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["目前帳戶狀態異常（",n(r("status")),"），請",n(r("contactus")),"進一步了解情況。"])},NN0657:e=>{const{normalize:t}=e;return t(["已選取"])},NN0658:e=>{const{normalize:t}=e;return t(["解鎖這個素材，並同時享有其他上萬個付費限定精美素材。"])},NN0659:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["還沒有",n(r("items"))])},NN0660:e=>{const{normalize:t}=e;return t(["logo"])},NN0661:e=>{const{normalize:t}=e;return t(["調色盤"])},NN0662:e=>{const{normalize:t}=e;return t(["點擊此按鈕"])},NN0663:e=>{const{normalize:t}=e;return t(["以上傳品牌 logo。"])},NN0664:e=>{const{normalize:t}=e;return t(["以建立品牌顏色。"])},NN0665:e=>{const{normalize:t}=e;return t(["陰影處理中，請稍候"])},NN0666:e=>{const{normalize:t}=e;return t(["模板類型"])},NN0667:e=>{const{normalize:t}=e;return t(["社群媒體"])},NN0668:e=>{const{normalize:t}=e;return t(["電商"])},NN0669:e=>{const{normalize:t}=e;return t(["其他"])},NN0670:e=>{const{normalize:t}=e;return t(["設計指南"])},NN0671:e=>{const{normalize:t}=e;return t(["部落格"])},NN0672:e=>{const{normalize:t}=e;return t(["學習中心"])},NN0673:e=>{const{normalize:t}=e;return t(["使用教學"])},NN0674:e=>{const{normalize:t}=e;return t(["設計誌"])},NN0675:e=>{const{normalize:t}=e;return t(["新手入門"])},NN0676:e=>{const{normalize:t}=e;return t(["設計教學"])},NN0677:e=>{const{normalize:t}=e;return t(["數位行銷"])},NN0678:e=>{const{normalize:t}=e;return t(["趨勢分享"])},NN0679:e=>{const{normalize:t}=e;return t(["最近新增"])},NN0680:e=>{const{normalize:t}=e;return t(["選擇設計"])},NN0681:e=>{const{normalize:t}=e;return t(["線條粗細"])},NN0682:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("item")),"已移至",n(r("dest"))])},NN0683:e=>{const{normalize:t}=e;return t(["已加入我的最愛"])},NN0684:e=>{const{normalize:t}=e;return t(["已從我的最愛中移除"])},NN0685:e=>{const{normalize:t}=e;return t(["已刪除"])},NN0686:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("item")),"已還原"])},NN0687:e=>{const{normalize:t,plural:n}=e;return n([t(["項目"]),t(["多項項目"])])},NN0688:e=>{const{normalize:t}=e;return t(["已複製至剪貼簿"])},NN0689:e=>{const{normalize:t}=e;return t(["已複製至我的設計"])},NN0690:e=>{const{normalize:t}=e;return t(["選擇資料夾"])},NN0691:e=>{const{normalize:t}=e;return t(["資料夾名稱"])},NN0692:e=>{const{normalize:t}=e;return t(["從資料夾移出"])},NN0693:e=>{const{normalize:t}=e;return t(["刪除多項設計"])},NN0694:e=>{const{normalize:t}=e;return t(["此資料夾含有多項項目"])},NN0695:e=>{const{normalize:t}=e;return t(["模板尺寸與頁面尺寸不同"])},NN0696:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["上傳檔案 (",n(r("file")),") 大小超過限制 (",n(r("size")),"MB) 。"])},NN0697:e=>{const{normalize:t}=e;return t(["優惠碼"])},NN0698:e=>{const{normalize:t}=e;return t(["無效的優惠碼"])},NN0699:e=>{const{normalize:t}=e;return t(["省下"])},NN0700:e=>{const{normalize:t}=e;return t(["輸入優惠碼"])},NN0701:e=>{const{normalize:t}=e;return t(["有優惠碼嗎？"])},NN0702:e=>{const{normalize:t}=e;return t(["請輸入優惠碼並驗證，驗證完成後，優惠資訊會於下頁顯示。"])},NN0703:e=>{const{normalize:t}=e;return t(["驗證"])},NN0704:e=>{const{normalize:t}=e;return t(["已移出此資料夾"])},NN0705:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["上傳檔案大小超過限制 (",n(r("size")),"MB) 。"])},NN0706:e=>{const{normalize:t}=e;return t(["設為圖框"])},NN0707:e=>{const{normalize:t}=e;return t(["設為背景"])},NN0708:e=>{const{normalize:t}=e;return t(["分離背景"])},NN0709:e=>{const{normalize:t}=e;return t(["在輸入優惠碼之前.."])},NN0710:e=>{const{normalize:t}=e;return t(["請先移除付款方式。"])},NN0711:e=>{const{normalize:t}=e;return t(["請先取消訂閱。"])},NN0712:e=>{const{normalize:t}=e;return t(["上傳字型"])},NN0713:e=>{const{normalize:t}=e;return t(["品牌名稱"])},NN0714:e=>{const{normalize:t}=e;return t(["智見科技股份有限公司"])},NN0715:e=>{const{normalize:t}=e;return t(["新竹市光復路一段371號5樓之1"])},NN0716:e=>{const{normalize:t}=e;return t(["電話 03-6660127"])},NN0717:e=>{const{normalize:t}=e;return t(["統一編號 45102951"])},NN0718:e=>{const{normalize:t}=e;return t(["tw","@","vivipic.com"])},NN0719:e=>{const{normalize:t}=e;return t(["文字背景"])},NN0720:e=>{const{normalize:t}=e;return t(["方形"])},NN0721:e=>{const{normalize:t}=e;return t(["圓矩形"])},NN0722:e=>{const{normalize:t}=e;return t(["方形外框"])},NN0723:e=>{const{normalize:t}=e;return t(["圓矩外框"])},NN0724:e=>{const{normalize:t}=e;return t(["方形 + 外框"])},NN0725:e=>{const{normalize:t}=e;return t(["圓矩形 + 外框"])},NN0726:e=>{const{normalize:t}=e;return t(["黏糊糊"])},NN0727:e=>{const{normalize:t}=e;return t(["粗底線"])},NN0728:e=>{const{normalize:t}=e;return t(["立體延伸"])},NN0729:e=>{const{normalize:t}=e;return t(["3D立體"])},NN0730:e=>{const{normalize:t}=e;return t(["三角"])},NN0731:e=>{const{normalize:t}=e;return t(["圓形"])},NN0732:e=>{const{normalize:t}=e;return t(["方形"])},NN0733:e=>{const{normalize:t}=e;return t(["外框粗細"])},NN0734:e=>{const{normalize:t}=e;return t(["外框顏色"])},NN0735:e=>{const{normalize:t}=e;return t(["填滿顏色"])},NN0736:e=>{const{normalize:t}=e;return t(["垂直位移"])},NN0737:e=>{const{normalize:t}=e;return t(["加框"])},NN0738:e=>{const{normalize:t}=e;return t(["兩端"])},NN0739:e=>{const{normalize:t}=e;return t(["前外框顏色"])},NN0740:e=>{const{normalize:t}=e;return t(["後外框顏色"])},NN0741:e=>{const{normalize:t}=e;return t(["雲朵"])},NN0742:e=>{const{normalize:t}=e;return t(["私訊小盒子"])},NN0743:e=>{const{normalize:t}=e;return t(["App 版本"])},NN0744:e=>{const{normalize:t}=e;return t(["下一步"])},NN0745:e=>{const{normalize:t}=e;return t(["開始探索"])},NN0746:e=>{const{normalize:t}=e;return t(["複製貼上，做出美美的限動"])},NN0747:e=>{const{normalize:t}=e;return t(["為你想說的話，選擇合適的風格"])},NN0748:e=>{const{normalize:t}=e;return t(["用豐富的質感素材，點綴日常"])},NN0749:e=>{const{normalize:t}=e;return t(["紙質、粉彩等清新背景任選"])},NN0750:e=>{const{normalize:t}=e;return t(["開啟IG至Story編輯畫面，再到Vivisticker點擊想要的素材/文字，回到IG貼上完成排版。"])},NN0751:e=>{const{normalize:t}=e;return t(["支援多種繁中字型、文字特效、貼紙搭配，打字後即可貼上到IG。"])},NN0752:e=>{const{normalize:t}=e;return t(["素材可彈性調整透明度，部分可調整顏色，讓你盡情發揮創意。"])},NN0753:e=>{const{normalize:t}=e;return t(["點擊即可複製背景，或按下「分享」至限時動態，直接替換限動背景。"])},NN0754:e=>{const{normalize:t}=e;return t(["重置效果"])},NN0755:e=>{const{normalize:t}=e;return t(["字間距"])},NN0756:e=>{const{normalize:t}=e;return t(["照片裁切"])},NN0757:e=>{const{normalize:t}=e;return t(["圖層順序"])},NN0758:e=>{const{normalize:t}=e;return t(["靜態"])},NN0759:e=>{const{normalize:t}=e;return t(["最愛"])},NN0760:e=>{const{normalize:t}=e;return t(["分類"])},NN0761:e=>{const{normalize:t}=e;return t(["關鍵字"])},NN0762:e=>{const{normalize:t}=e;return t(["單個"])},NN0763:e=>{const{normalize:t}=e;return t(["小撇步"])},NN0764:e=>{const{normalize:t}=e;return t(["對貼紙「點兩下」可以加入最愛或從最愛中移除。"])},NN0765:e=>{const{normalize:t}=e;return t(["目前沒有收藏的素材"])},NN0766:e=>{const{normalize:t}=e;return t(["尚無設計檔案"])},NN0767:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["請輸入大於 ",n(r("num"))," 的數字"])},NN0768:e=>{const{normalize:t}=e;return t(["立即解鎖「調整尺寸」功能，讓設計過程更有效率！"])},NN0769:e=>{const{normalize:t}=e;return t(["快速調整設計尺寸"])},NN0770:e=>{const{normalize:t}=e;return t(["PDF標準"])},NN0771:e=>{const{normalize:t}=e;return t(["PDF列印"])},NN0772:e=>{const{normalize:t}=e;return t(["檔案大小：小 - 適合電子數位"])},NN0773:e=>{const{normalize:t}=e;return t(["檔案大小：高 - 適合紙本列印"])},NN0774:e=>{const{normalize:t}=e;return t(["裁切標記"])},NN0775:e=>{const{normalize:t}=e;return t(["出血"])},NN0776:e=>{const{normalize:t}=e;return t(["影像平面化"])},NN0777:e=>{const{normalize:t}=e;return t(["色彩模式"])},NN0778:e=>{const{normalize:t}=e;return t(["開啟印刷出血"])},NN0779:e=>{const{normalize:t}=e;return t(["關閉印刷出血"])},NN0780:e=>{const{normalize:t}=e;return t(["印刷出血設定"])},NN0781:e=>{const{normalize:t}=e;return t(["上"])},NN0782:e=>{const{normalize:t}=e;return t(["下"])},NN0783:e=>{const{normalize:t}=e;return t(["左"])},NN0784:e=>{const{normalize:t}=e;return t(["右"])},NN0785:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["尺寸須介於 ",n(r("size1"))," 至 ",n(r("size2"))," 之間。"])},NN0786:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["尺寸須小於 ",n(r("size")),"。"])},NN0787:e=>{const{normalize:t}=e;return t(["點我修正尺寸"])},NN0788:e=>{const{normalize:t}=e;return t(["設計尺寸超過上限"])},NN0789:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["此檔案中有頁面，像素尺寸超過上限 ",n(r("size")),"，系統會將頁面自動調小，建議您若要印刷，請設定實體尺寸，例如cm, mm, inch等，並下載時選用PDF列印格式，這樣印刷品質也會更好。"])},NN0790:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("type")),"許願池"])},NN0791:e=>{const{normalize:t}=e;return t(["https://docs.google.com/forms/d/e/1FAIpQLSd-zlI2xevIMVTT0Pa-VHx9NlohUiUiwWE223D6kf_hYUNvjg/viewform?usp=sharing"])},NN0792:e=>{const{normalize:t}=e;return t(["素材"])},NN0793:e=>{const{normalize:t}=e;return t(["功能"])},NN0794:e=>{const{normalize:t}=e;return t(["文字轉外框"])},NN0795:e=>{const{normalize:t}=e;return t(["模板篩選"])},NN0796:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["如果需要更多",n(r("type")),"，請至",n(r("type")),"許願池提出",n(r("type")),"需求。"])},NN0797:e=>{const{normalize:t}=e;return t(["空心 / 實心"])},NN0798:e=>{const{normalize:t}=e;return t(["元素顏色"])},NN0799:e=>{const{normalize:t}=e;return t(["此為印刷廠一般要求。"])},NN0800:e=>{const{normalize:t}=e;return t(["轉為點陣圖檔。"])},NN0801:e=>{const{normalize:t}=e;return t(["了解更多"])},NN0802:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/tw/pdf-outline/"])},NN0803:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/tw/pdf-flatten/"])},NN0804:e=>{const{normalize:t}=e;return t(["🔒背景已被鎖定，請解鎖後再進行操作"])},NN0805:e=>{const{normalize:t}=e;return t(["輸出高品質印刷檔案"])},NN0806:e=>{const{normalize:t}=e;return t(["立刻解鎖「輸出高品質列印檔案」功能。"])},NN0807:e=>{const{normalize:t}=e;return t(["多選"])},NN0808:e=>{const{normalize:t}=e;return t(["手機版不支援電商詳情頁模板"])},NN0809:e=>{const{normalize:t}=e;return t(["選取貼上樣式項目"])},NN0810:e=>{const{normalize:t}=e;return t(["搜尋不到模板"])},NN0811:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(['抱歉，我們無法找到任何關於"',n(r("keyword")),'"的模板，請您再試試看其他相關字詞。建議將版面設定為全部，也許可找到更多模版。如需要更多模板支援，請至模版許願池發送模板需求。'])},NN0812:e=>{const{normalize:t}=e;return t(["搜尋全部模板"])},NN0813:e=>{const{normalize:t}=e;return t(["已貼上剪貼簿內容"])},NN0814:e=>{const{normalize:t}=e;return t(["水平位移"])},NN0815:e=>{const{normalize:t}=e;return t(["大小"])},NN0816:e=>{const{normalize:t}=e;return t(["彩虹圈圈"])},NN0817:e=>{const{normalize:t}=e;return t(["莫蘭迪圈圈"])},NN0818:e=>{const{normalize:t}=e;return t(["軟綿雲朵"])},NN0819:e=>{const{normalize:t}=e;return t(["國語格子本"])},NN0820:e=>{const{normalize:t}=e;return t(["可改色圈圈"])},NN0821:e=>{const{normalize:t}=e;return t(["企鵝寶寶"])},NN0822:e=>{const{normalize:t}=e;return t(["星球"])},NN0823:e=>{const{normalize:t}=e;return t(["請選擇下載頁面"])},NN0824:e=>{const{normalize:t}=e;return t(["正在下載你的設計"])},NN0825:e=>{const{normalize:t}=e;return t(["請稍等..."])},NN0826:e=>{const{normalize:t}=e;return t(["已儲存至相簿"])},NN0827:e=>{const{normalize:t}=e;return t(["繼續編輯"])},NN0828:e=>{const{normalize:t}=e;return t(["是否確定要刪除帳號？"])},NN0829:e=>{const{normalize:t}=e;return t(["確認送出後，該帳號將<red>永久刪除</red>。"])},NN0830:e=>{const{normalize:t}=e;return t(["以下內容也將一併刪除且無法還原："])},NN0831:e=>{const{normalize:t}=e;return t(["． 您建立的所有設計與資料夾"])},NN0832:e=>{const{normalize:t}=e;return t(["． 您上傳的所有圖片與媒體"])},NN0833:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["如要繼續，請在下方輸入「",n(r("delete")),"」二字："])},NN0834:e=>{const{normalize:t}=e;return t(["瀏覽器建議"])},NN0835:e=>{const{normalize:t}=e;return t(["為了最佳的使用者體驗，我們建議您使用 Google Chrome 或者 Microsoft Edge 來進行操作。"])},NN0836:e=>{const{normalize:t}=e;return t(["下載 Google Chrome"])},NN0837:e=>{const{normalize:t}=e;return t(["下載 Mircosoft Edge"])},NN0838:e=>{const{normalize:t}=e;return t(["我了解了!"])},NN0839:e=>{const{normalize:t}=e;return t(["儲存當前頁面"])},NN0840:e=>{const{normalize:t}=e;return t(["儲存所有頁面"])},NN0841:e=>{const{normalize:t}=e;return t(["儲存其他格式"])},NN0842:e=>{const{normalize:t}=e;return t(["讓設計更吸睛—文字特效和範本"])},NN0843:e=>{const{normalize:t}=e;return t(["輕鬆套用讓設計提升視覺效果、趣味性的文字特效，及PRO限定的文字範本。"])},NN0844:e=>{const{normalize:t}=e;return t(["獨家設計的精美背景圖"])},NN0845:e=>{const{normalize:t}=e;return t(["PRO會員限定—讓設計增加氛圍感、質感的背景圖。"])},NN0846:e=>{const{normalize:t}=e;return t(["首頁"])},NN0847:e=>{const{normalize:t}=e;return t(["彩色愛心"])},NN0848:e=>{const{normalize:t}=e;return t(["暖色愛心"])},NN0849:e=>{const{normalize:t}=e;return t(["可改色愛心"])},NN0850:e=>{const{normalize:t}=e;return t(["小熊軟糖"])},NN0851:e=>{const{normalize:t}=e;return t(["葉子"])},NN0852:e=>{const{normalize:t}=e;return t(["奶油小花"])},NN0853:e=>{const{normalize:t}=e;return t(["繽紛小花"])},NN0854:e=>{const{normalize:t}=e;return t(["可改色小花"])},NN0855:e=>{const{normalize:t}=e;return t(["復古小花"])},NN0856:e=>{const{normalize:t}=e;return t(["可改色復古小花"])},NN0857:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/tw/tw-privacy-policy/"])},NN0858:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/tw/tw-agreement/"])},NN0859:e=>{const{normalize:t}=e;return t(["立即使用會員專屬模板和功能"])},NN0860:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["糟糕! 出了一點小問題。(",n(r("feature")),"-錯誤代碼#",n(r("errorCode")),")"])},NN0861:e=>{const{normalize:t}=e;return t(["重新整理"])},NN0862:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["複製",n(r("item"))])},NN0863:e=>{const{normalize:t}=e;return t(["設計連結"])},NN0864:e=>{const{normalize:t}=e;return t(["貓的手手"])},NN0865:e=>{const{normalize:t}=e;return t(["麵包"])},NN0866:e=>{const{normalize:t}=e;return t(["請截圖並私訊我們的IG。"])},NN0867:e=>{const{normalize:t}=e;return t(["自訂設計"])},NN0868:e=>{const{normalize:t}=e;return t(["文字填滿"])},NN0869:e=>{const{normalize:t}=e;return t(["客製填滿"])},NN0870:e=>{const{normalize:t}=e;return t(["圖片樣式"])},NN0871:e=>{const{normalize:t}=e;return t(["自定義圖片"])},NN0872:e=>{const{normalize:t}=e;return t(["移動"])},NN0873:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["按「",n(r("upload")),"」或拖曳照片至此"])},NN0874:e=>{const{normalize:t}=e;return t(["童趣小熊"])},NN0875:e=>{const{normalize:t}=e;return t(["可改色小熊"])},NN0876:e=>{const{normalize:t}=e;return t(["可愛貓貓"])},NN0877:e=>{const{normalize:t}=e;return t(["可改色貓貓"])},NN0878:e=>{const{normalize:t}=e;return t(["軟萌兔兔"])},NN0879:e=>{const{normalize:t}=e;return t(["可改色兔兔"])},NN0880:e=>{const{normalize:t}=e;return t(["貴賓狗"])},NN0881:e=>{const{normalize:t}=e;return t(["可改色貴賓狗"])},NN0882:e=>{const{normalize:t}=e;return t(["可改色旋轉星星"])},NN0883:e=>{const{normalize:t}=e;return t(["寶寶玩具"])},NN0884:e=>{const{normalize:t}=e;return t(["圓角對話框"])},NN0885:e=>{const{normalize:t}=e;return t(["三角對話框"])},NN0886:e=>{const{normalize:t}=e;return t(["尾巴偏移"])},NN0887:e=>{const{normalize:t}=e;return t(["尾巴位置"])},NN0888:e=>{const{normalize:t}=e;return t(["移動距離"])},NN0889:e=>{const{normalize:t}=e;return t(["儲存至相簿"])},NN0890:e=>{const{normalize:t}=e;return t(["外邊顏色"])},NN0891:e=>{const{normalize:t}=e;return t(["內邊顏色"])},NN0892:e=>{const{normalize:t}=e;return t(["外邊粗細"])},NN0893:e=>{const{normalize:t}=e;return t(["內邊粗細"])},NN0894:e=>{const{normalize:t}=e;return t(["描邊"])},NN0895:e=>{const{normalize:t}=e;return t(["紙膠帶：單色"])},NN0896:e=>{const{normalize:t}=e;return t(["紙膠帶：波點"])},NN0897:e=>{const{normalize:t}=e;return t(["紙膠帶：條紋"])},NN0898:e=>{const{normalize:t}=e;return t(["紙膠帶：格子"])},NN0899:e=>{const{normalize:t}=e;return t(["覆蓋"])},NN0900:e=>{const{normalize:t}=e;return t(["派對旗子"])},NN0901:e=>{const{normalize:t}=e;return t(["可改色派對旗子"])},NN0902:e=>{const{normalize:t}=e;return t(["活動旗子"])},NN0903:e=>{const{normalize:t}=e;return t(["可改色活動旗子"])},STK0001:e=>{const{normalize:t}=e;return t(["新增文字"])},STK0002:e=>{const{normalize:t}=e;return t(["輕按以複製"])},STK0003:e=>{const{normalize:t}=e;return t(["長按以分享"])},STK0004:e=>{const{normalize:t}=e;return t(["儲存"])},STK0005:e=>{const{normalize:t}=e;return t(["限時動態"])},STK0006:e=>{const{normalize:t}=e;return t(["插入"])},STK0007:e=>{const{normalize:t}=e;return t(["選取"])},STK0008:e=>{const{normalize:t}=e;return t(["是否要儲存設計？"])},STK0009:e=>{const{normalize:t}=e;return t(["App右上角「我的設計」資料夾中可以找到儲存的設計。"])},STK0010:e=>{const{normalize:t}=e;return t(["自動儲存，之後不要再詢問。"])},STK0011:e=>{const{normalize:t}=e;return t(["不儲存"])},STK0012:e=>{const{normalize:t}=e;return t(["自動儲存設計且不跳出詢問視窗。"])},STK0013:e=>{const{normalize:t}=e;return t(["刪除設計"])},STK0014:e=>{const{normalize:t}=e;return t(["確定要刪除此設計嗎？"])},STK0015:e=>{const{normalize:t}=e;return t(["全選"])},STK0016:e=>{const{normalize:t}=e;return t(["取消全選"])},STK0017:e=>{const{normalize:t}=e;return t(["提醒"])},STK0018:e=>{const{normalize:t}=e;return t(["編輯區內沒有可複製的內容，<newline>請新增內容後再複製。"])},STK0019:e=>{const{normalize:t}=e;return t(["了解！"])},STK0020:e=>{const{normalize:t}=e;return t(["目前沒有儲存的設計。"])},STK0021:e=>{const{normalize:t}=e;return t(["你可以儲存編輯過的內容到「我的設計」中"])},STK0022:e=>{const{normalize:t}=e;return t(["圖框內沒有加入照片，請新增照片後再複製。"])},STK0023:e=>{const{normalize:t}=e;return t(["我知道了！"])},STK0024:e=>{const{normalize:t}=e;return t(["提醒"])},STK0025:e=>{const{normalize:t}=e;return t(["訂閱功能"])},STK0026:e=>{const{normalize:t}=e;return t(["月繳"])},STK0027:e=>{const{normalize:t}=e;return t(["年繳"])},STK0028:e=>{const{normalize:t}=e;return t(["訂閱狀態"])},STK0029:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["請參閱 ",n(r("privacyPolicy"))," 及 ",n(r("termOfUse"))])},STK0030:e=>{const{normalize:t}=e;return t(["隱私權政策"])},STK0031:e=>{const{normalize:t}=e;return t(["使用條款"])},STK0032:e=>{const{normalize:t}=e;return t(["iOS 16 如何貼上到IG?"])},STK0033:e=>{const{normalize:t}=e;return t(["iOS 16 如何貼上到IG?"])},STK0034:e=>{const{normalize:t}=e;return t(["系統更新至iOS 16後，貼上到限時動態的操作流程有些不同。"])},STK0035:e=>{const{normalize:t}=e;return t(["馬上看操作教學"])},STK0036:e=>{const{normalize:t}=e;return t(["不再顯示提醒"])},STK0037:e=>{const{normalize:t}=e;return t(["免費素材、文字組合及背景圖片"])},STK0038:e=>{const{normalize:t}=e;return t(["進階文字特效"])},STK0039:e=>{const{normalize:t}=e;return t(["會員獨享圖框"])},STK0040:e=>{const{normalize:t}=e;return t(["會員獨享素材 & 文字組合"])},STK0041:e=>{const{normalize:t}=e;return t(["會員獨享背景"])},STK0042:e=>{const{normalize:t}=e;return t(["PRO專屬功能"])},STK0043:e=>{const{normalize:t}=e;return t(["功能"])},STK0044:e=>{const{normalize:t}=e;return t(["免費"])},STK0045:e=>{const{normalize:t}=e;return t(["還原訂閱項目"])},STK0046:e=>{const{normalize:t}=e;return t(["免費試用及訂閱"])},STK0047:e=>{const{normalize:t}=e;return t(["訂閱"])},STK0048:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["免費使用",n(r("day")),"天"])},STK0049:e=>{const{normalize:t}=e;return t(["讓日常變特別的獨家圖框"])},STK0050:e=>{const{normalize:t}=e;return t(["優雅、可愛的獨家文字組合"])},STK0051:e=>{const{normalize:t}=e;return t(["令人怦然心動的Pro貼紙"])},STK0052:e=>{const{normalize:t}=e;return t(["https://vivisticker.com/tw/隱私權聲明/"])},STK0053:e=>{const{normalize:t}=e;return t(["https://vivisticker.com/tw/使用協議/"])},STK0054:e=>{const{normalize:t}=e;return t(["歡迎成為PRO會員，現在你可以自由使用所有美美的素材及會員專屬功能來紀錄生活!"])},STK0055:e=>{const{normalize:t}=e;return t(["開始"])},STK0056:e=>{const{normalize:t}=e;return t(["到期即自動續費，可隨時取消。"])},STK0057:e=>{const{normalize:t}=e;return t(["訂閱將在免費試用結束後自動開始收費。"])},STK0058:e=>{const{normalize:t}=e;return t(["預設Emoji"])},STK0059:e=>{const{normalize:t}=e;return t(["頭部去背"])},STK0060:e=>{const{normalize:t}=e;return t(["照片去背"])},STK0061:e=>{const{normalize:t}=e;return t(["選一張照片，移除背景並加入特效。"])},STK0062:e=>{const{normalize:t}=e;return t(["選一張人物或寵物的照片做去背大頭貼。"])},STK0063:e=>{const{normalize:t}=e;return t(["貼文"])},STK0064:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["建立",n(r("type"))])},STK0065:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["加入所有頁面  (",n(r("num"))," 頁)"])},STK0066:e=>{const{normalize:t}=e;return t(["選擇背景"])},STK0067:e=>{const{normalize:t}=e;return t(["相片"])},STK0068:e=>{const{normalize:t}=e;return t(["空白"])},STK0069:e=>{const{normalize:t}=e;return t(["圖庫"])},STK0070:e=>{const{normalize:t}=e;return t(["頁面"])},STK0071:e=>{const{normalize:t}=e;return t(["美到讓你忘記煩惱的模版"])},STK0072:e=>{const{normalize:t}=e;return t(["預覽"])},STK0073:e=>{const{normalize:t}=e;return t(["已達頁面數量上限"])},STK0074:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["你的頁面數量已達",n(r("num")),"頁，如果要設計更多頁面，請開一個新檔案。"])},STK0075:e=>{const{normalize:t}=e;return t(["已經是最後一頁面囉!<newline>需要新增新的一頁嗎？"])},STK0076:e=>{const{normalize:t}=e;return t(["新增頁面"])},STK0077:e=>{const{normalize:t}=e;return t(["目前頁面"])},STK0078:e=>{const{normalize:t}=e;return t(["多個頁面"])},STK0079:e=>{const{normalize:t}=e;return t(["你可以勾選至多十個頁面發佈到Instagram。"])},STK0080:e=>{const{normalize:t}=e;return t(["已儲存到相簿"])},STK0081:e=>{const{normalize:t}=e;return t(["準備中..."])},STK0082:e=>{const{normalize:t}=e;return t(["編輯區內沒有可下載的內容，<newline>請新增內容後再下載。"])},STK0083:e=>{const{normalize:t}=e;return t(["結合外框等多種特效的去背工具"])},STK0084:e=>{const{normalize:t}=e;return t(["正在儲存到「我的設計」..."])},STK0085:e=>{const{normalize:t}=e;return t(["貼紙"])},STK0086:e=>{const{normalize:t}=e;return t(["無法讀取照片 - 設計中有照片已從手機相簿中被刪除。"])},STK0087:e=>{const{normalize:t}=e;return t(["回報問題中..."])},STK0088:e=>{const{normalize:t}=e;return t(["回報問題"])},STK0089:e=>{const{normalize:t}=e;return t(["問題回報"])},STK0090:e=>{const{normalize:t}=e;return t(["你的問題已回報。"])},STK0091:e=>{const{normalize:t}=e;return t(["下一個：文字使用"])},STK0092:e=>{const{normalize:t}=e;return t(["下一個：背景使用"])},STK0093:e=>{const{normalize:t}=e;return t(["開始探索！"])},SKT0001:e=>{const{normalize:t}=e;return t(["編輯中"])},SKT0002:e=>{const{normalize:t}=e;return t(["可編輯"])},SKT0003:e=>{const{normalize:t}=e;return t(["正在切換編輯者..."])},SKT0004:e=>{const{normalize:t}=e;return t(["現在您可以開始編輯了"])},SKT0005:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["現在 ",n(r("editor"))," 正在編輯"])},SKT0006:e=>{const{normalize:t}=e;return t(["請重新整理頁面"])},SKT0007:e=>{const{normalize:t}=e;return t(["您已經閒置超過一小時，<br>請重整頁面"])},SKT0008:e=>{const{normalize:t}=e;return t(["開始編輯？"])},SKT0009:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("editor"))," 正在編輯，請問是否要切換編輯者"])},SKT0010:e=>{const{normalize:t}=e;return t(["編緝請求"])},SKT0011:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("requester"))," 向您請求編輯權，請問您是否同意切換編輯者？"])},SKT0012:e=>{const{normalize:t}=e;return t(["同意"])},SKT0013:e=>{const{normalize:t}=e;return t(["不同意"])},SKT0014:e=>{const{normalize:t}=e;return t(["編輯請求已經送出"])},SKT0015:e=>{const{normalize:t}=e;return t(["等待編輯者同意，請稍候..."])},SKT0016:e=>{const{normalize:t}=e;return t(["請求失敗"])},SKT0017:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("editor"))," 正在編輯，請稍後再試"])},SKT0018:e=>{const{normalize:t}=e;return t(["開始編輯"])},SKT0019:e=>{const{normalize:t}=e;return t(["找不到該設計"])},SHR0001:e=>{const{normalize:t}=e;return t(["預覽模式"])},SHR0002:e=>{const{normalize:t}=e;return t(["單頁預覽"])},SHR0003:e=>{const{normalize:t}=e;return t(["書本預覽"])},SHR0004:e=>{const{normalize:t}=e;return t(["連頁預覽"])},SHR0005:e=>{const{normalize:t}=e;return t(["預覽"])},SHR0006:e=>{const{normalize:t}=e;return t(["分享你的設計"])},SHR0007:e=>{const{normalize:t}=e;return t(["協作者需要有 Vivipic 帳號以檢視此設計。"])},SHR0008:e=>{const{normalize:t}=e;return t(["輸入電子郵件地址..."])},SHR0009:e=>{const{normalize:t}=e;return t(["邀請"])},SHR0010:e=>{const{normalize:t}=e;return t(["可檢視"])},SHR0011:e=>{const{normalize:t}=e;return t(["可存取"])},SHR0012:e=>{const{normalize:t}=e;return t(["任何擁有連結的人"])},SHR0013:e=>{const{normalize:t}=e;return t(["只有被邀請的人"])},SHR0014:e=>{const{normalize:t}=e;return t(["您輸入的郵件地址有誤。"])},SHR0015:e=>{const{normalize:t}=e;return t(["擁有者"])},SHR0016:e=>{const{normalize:t}=e;return t(["複製連結"])},SHR0017:e=>{const{normalize:t}=e;return t(["編輯設計及邀請其他人"])},SHR0018:e=>{const{normalize:t}=e;return t(["無法編輯，只能檢視設計"])},SHR0019:e=>{const{normalize:t}=e;return t(["移除"])},SHR0020:e=>{const{normalize:t}=e;return t(["需要存取權"])},SHR0021:e=>{const{normalize:t}=e;return t(["設計擁有者已經變更了連結存取權，您可以向其請求存取權，或登入至有存取權的帳號。"])},SHR0022:e=>{const{normalize:t}=e;return t(["Created with"])},SHR0023:e=>{const{normalize:t}=e;return t(["放大"])},SHR0024:e=>{const{normalize:t}=e;return t(["離開"])}},o={NN0001:e=>{const{normalize:t,plural:n}=e;return n([t(["templates"]),t(["Templates"]),t(["template"]),t(["Template"])])},NN0002:e=>{const{normalize:t,plural:n}=e;return n([t(["photos"]),t(["Photos"])])},NN0003:e=>{const{normalize:t,plural:n}=e;return n([t(["objects"]),t(["Objects"])])},NN0004:e=>{const{normalize:t,plural:n}=e;return n([t(["backgrounds"]),t(["Background"])])},NN0005:e=>{const{normalize:t,plural:n}=e;return n([t(["texts"]),t(["Texts"]),t(["Fonts"])])},NN0006:e=>{const{normalize:t}=e;return t(["Uploads"])},NN0007:e=>{const{normalize:t}=e;return t(["Brand Kit"])},NN0008:e=>{const{normalize:t}=e;return t(["File"])},NN0009:e=>{const{normalize:t}=e;return t(["Save Design"])},NN0010:e=>{const{normalize:t}=e;return t(["Download"])},NN0011:e=>{const{normalize:t}=e;return t(["Heading"])},NN0012:e=>{const{normalize:t}=e;return t(["Subheading"])},NN0013:e=>{const{normalize:t}=e;return t(["Body"])},NN0014:e=>{const{normalize:t}=e;return t(["Upload Image"])},NN0015:e=>{const{normalize:t}=e;return t(["LOGO"])},NN0016:e=>{const{normalize:t}=e;return t(["Upload LOGO"])},NN0017:e=>{const{normalize:t}=e;return t(["Color"])},NN0018:e=>{const{normalize:t}=e;return t(["Add New Color"])},NN0019:e=>{const{normalize:t}=e;return t(["Text Styles"])},NN0020:e=>{const{normalize:t}=e;return t(["Add New Text Style"])},NN0021:e=>{const{normalize:t}=e;return t(["Current size"])},NN0022:e=>{const{normalize:t}=e;return t(["Resize"])},NN0023:e=>{const{normalize:t}=e;return t(["Custom size"])},NN0024:e=>{const{normalize:t}=e;return t(["Recently Used"])},NN0025:e=>{const{normalize:t}=e;return t(["Common Layout"])},NN0026:e=>{const{normalize:t}=e;return t(["Instagram Story"])},NN0027:e=>{const{normalize:t}=e;return t(["Product Image"])},NN0028:e=>{const{normalize:t}=e;return t(["Banner"])},NN0029:e=>{const{normalize:t}=e;return t(["Group"])},NN0030:e=>{const{normalize:t}=e;return t(["Opacity"])},NN0031:e=>{const{normalize:t}=e;return t(["Layering"])},NN0032:e=>{const{normalize:t}=e;return t(["Copy"])},NN0033:e=>{const{normalize:t}=e;return t(["Unlock"])},NN0034:e=>{const{normalize:t}=e;return t(["Delete"])},NN0035:e=>{const{normalize:t}=e;return t(["Copy Format"])},NN0036:e=>{const{normalize:t}=e;return t(["Crop"])},NN0037:e=>{const{normalize:t}=e;return t(["Search"])},NN0038:e=>{const{normalize:t}=e;return t(["Flip"])},NN0039:e=>{const{normalize:t}=e;return t(["Edit Image"])},NN0040:e=>{const{normalize:t}=e;return t(["Cropping"])},NN0041:e=>{const{normalize:t}=e;return t(["Filters"])},NN0042:e=>{const{normalize:t}=e;return t(["Adjust"])},NN0043:e=>{const{normalize:t}=e;return t(["Remove BG"])},NN0044:e=>{const{normalize:t}=e;return t(["Align"])},NN0045:e=>{const{normalize:t}=e;return t(["Align objects"])},NN0046:e=>{const{normalize:t}=e;return t(["Left"])},NN0047:e=>{const{normalize:t}=e;return t(["Center"])},NN0048:e=>{const{normalize:t}=e;return t(["Right"])},NN0049:e=>{const{normalize:t}=e;return t(["Top"])},NN0050:e=>{const{normalize:t}=e;return t(["Middle"])},NN0051:e=>{const{normalize:t}=e;return t(["Bottom"])},NN0052:e=>{const{normalize:t}=e;return t(["Flip"])},NN0053:e=>{const{normalize:t}=e;return t(["Horizontally"])},NN0054:e=>{const{normalize:t}=e;return t(["Vertically"])},NN0055:e=>{const{normalize:t}=e;return t(["Brightness"])},NN0056:e=>{const{normalize:t}=e;return t(["Contrast"])},NN0057:e=>{const{normalize:t}=e;return t(["Saturation"])},NN0058:e=>{const{normalize:t}=e;return t(["Color"])},NN0059:e=>{const{normalize:t}=e;return t(["Blur"])},NN0060:e=>{const{normalize:t}=e;return t(["Vignette"])},NN0061:e=>{const{normalize:t}=e;return t(["Warmth"])},NN0062:e=>{const{normalize:t}=e;return t(["Text Format"])},NN0063:e=>{const{normalize:t}=e;return t(["Distance"])},NN0064:e=>{const{normalize:t}=e;return t(["Angle"])},NN0065:e=>{const{normalize:t}=e;return t(["Blur"])},NN0066:e=>{const{normalize:t}=e;return t(["Opacity"])},NN0067:e=>{const{normalize:t}=e;return t(["Color"])},NN0068:e=>{const{normalize:t}=e;return t(["Intensity"])},NN0069:e=>{const{normalize:t}=e;return t(["Stroke"])},NN0070:e=>{const{normalize:t}=e;return t(["Shape"])},NN0071:e=>{const{normalize:t}=e;return t(["Curve"])},NN0072:e=>{const{normalize:t}=e;return t(["Create new design"])},NN0073:e=>{const{normalize:t}=e;return t(["Show rulers"])},NN0074:e=>{const{normalize:t}=e;return t(["Hide guides"])},NN0075:e=>{const{normalize:t}=e;return t(["Delete guides"])},NN0076:e=>{const{normalize:t}=e;return t(["Add a headline"])},NN0077:e=>{const{normalize:t}=e;return t(["Add a subhead"])},NN0078:e=>{const{normalize:t}=e;return t(["Add a body text"])},NN0079:e=>{const{normalize:t}=e;return t(["Unnamed design"])},NN0080:e=>{const{normalize:t}=e;return t(["My Designs"])},NN0081:e=>{const{normalize:t}=e;return t(["Add page name"])},NN0082:e=>{const{normalize:t}=e;return t(["More"])},NN0083:e=>{const{normalize:t}=e;return t(["All results"])},NN0084:e=>{const{normalize:t}=e;return t(["Square"])},NN0085:e=>{const{normalize:t}=e;return t(["Round"])},NN0086:e=>{const{normalize:t}=e;return t(["Round Corners"])},NN0087:e=>{const{normalize:t}=e;return t(["Solid"])},NN0088:e=>{const{normalize:t}=e;return t(["Hollow"])},NN0089:e=>{const{normalize:t}=e;return t(["Presets"])},NN0090:e=>{const{normalize:t}=e;return t(["Your Brand Colors"])},NN0091:e=>{const{normalize:t}=e;return t(["Colors Used"])},NN0092:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Search from our ",n(r("target"))])},NN0093:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Search ",n(r("target"))])},NN0094:e=>{const{normalize:t}=e;return t(["Enter your keywords..."])},NN0095:e=>{const{normalize:t}=e;return t(["Text Effects"])},NN0096:e=>{const{normalize:t}=e;return t(["Set as Frame"])},NN0097:e=>{const{normalize:t}=e;return t(["Set as Background"])},NN0098:e=>{const{normalize:t}=e;return t(["Detach it"])},NN0099:e=>{const{normalize:t}=e;return t(["Text color"])},NN0101:e=>{const{normalize:t}=e;return t(["Bold"])},NN0102:e=>{const{normalize:t}=e;return t(["Underline"])},NN0103:e=>{const{normalize:t}=e;return t(["Italic"])},NN0104:e=>{const{normalize:t}=e;return t(["Vertical text"])},NN0105:e=>{const{normalize:t}=e;return t(["Left align"])},NN0106:e=>{const{normalize:t}=e;return t(["Center align"])},NN0107:e=>{const{normalize:t}=e;return t(["Right align"])},NN0108:e=>{const{normalize:t}=e;return t(["Vertically"])},NN0109:e=>{const{normalize:t}=e;return t(["Letter spacing"])},NN0110:e=>{const{normalize:t}=e;return t(["Line spacing"])},NN0111:e=>{const{normalize:t}=e;return t(["None"])},NN0112:e=>{const{normalize:t}=e;return t(["Shadow"])},NN0113:e=>{const{normalize:t}=e;return t(["Smoky Shadow"])},NN0114:e=>{const{normalize:t}=e;return t(["Outline"])},NN0115:e=>{const{normalize:t}=e;return t(["Outline Shadow"])},NN0116:e=>{const{normalize:t}=e;return t(["Double Shadow"])},NN0117:e=>{const{normalize:t}=e;return t(["None"])},NN0118:e=>{const{normalize:t}=e;return t(["Curve"])},NN0119:e=>{const{normalize:t}=e;return t(["Undo"])},NN0120:e=>{const{normalize:t}=e;return t(["Redo"])},NN0121:e=>{const{normalize:t}=e;return t(["File format"])},NN0122:e=>{const{normalize:t}=e;return t(["Size"])},NN0123:e=>{const{normalize:t}=e;return t(["times"])},NN0124:e=>{const{normalize:t}=e;return t(["Select pages"])},NN0125:e=>{const{normalize:t}=e;return t(["Current page"])},NN0126:e=>{const{normalize:t}=e;return t(["All pages"])},NN0127:e=>{const{normalize:t}=e;return t(["Range"])},NN0128:e=>{const{normalize:t}=e;return t([])},NN0129:e=>{const{normalize:t}=e;return t(["Save download settings"])},NN0130:e=>{const{normalize:t}=e;return t(["Deselect all"])},NN0131:e=>{const{normalize:t}=e;return t(["Suggested"])},NN0132:e=>{const{normalize:t}=e;return t(["Quality"])},NN0133:e=>{const{normalize:t}=e;return t(["Save"])},NN0134:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Page ",n(r("num"))])},NN0135:e=>{const{normalize:t}=e;return t(["Upload completed"])},NN0136:e=>{const{normalize:t}=e;return t(["Uploading"])},NN0137:e=>{const{normalize:t}=e;return t(["Upload failed"])},NN0138:e=>{const{normalize:t}=e;return t(["Guide Types"])},NN0139:e=>{const{normalize:t}=e;return t(["Add page"])},NN0140:e=>{const{normalize:t}=e;return t(["Duplicate page"])},NN0141:e=>{const{normalize:t}=e;return t(["Delete page"])},NN0142:e=>{const{normalize:t}=e;return t(["Background Settings"])},NN0143:e=>{const{normalize:t}=e;return t(["Lock background"])},NN0144:e=>{const{normalize:t}=e;return t(["New Design"])},NN0145:e=>{const{normalize:t}=e;return t(["Template Center"])},NN0146:e=>{const{normalize:t}=e;return t(["Tutorials"])},NN0147:e=>{const{normalize:t}=e;return t(["FAQ"])},NN0148:e=>{const{normalize:t}=e;return t(["Create pro-looking designs <newline> for your business in a few clicks."])},NN0149:e=>{const{normalize:t}=e;return t(["Explore Templates"])},NN0150:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media"))," post"])},NN0151:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media"))," cover"])},NN0152:e=>{const{normalize:t}=e;return t([])},NN0153:e=>{const{normalize:t}=e;return t(["Product Image"])},NN0154:e=>{const{normalize:t}=e;return t(["Design for"])},NN0155:e=>{const{normalize:t}=e;return t(["Custom"])},NN0156:e=>{const{normalize:t}=e;return t(["Tips & Tutorials"])},NN0157:e=>{const{normalize:t}=e;return t(["Help Center"])},NN0158:e=>{const{normalize:t}=e;return t(["About Vivipic"])},NN0159:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("media"))," thumbnail"])},NN0160:e=>{const{normalize:t}=e;return t(["Terms of Service"])},NN0161:e=>{const{normalize:t}=e;return t(["Privacy Policy"])},NN0162:e=>{const{normalize:t}=e;return t(["Terms of Use"])},NN0163:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Enter ",n(r("term"))])},NN0164:e=>{const{normalize:t}=e;return t(["Confirm"])},NN0165:e=>{const{normalize:t}=e;return t(["Account settings"])},NN0166:e=>{const{normalize:t}=e;return t(["Login & Security"])},NN0167:e=>{const{normalize:t}=e;return t(["Log out"])},NN0168:e=>{const{normalize:t}=e;return t(["Log in"])},NN0169:e=>{const{normalize:t}=e;return t(["Sign up"])},NN0170:e=>{const{normalize:t}=e;return t(["Remove photo"])},NN0171:e=>{const{normalize:t}=e;return t(["Change photo"])},NN0172:e=>{const{normalize:t}=e;return t(["Name"])},NN0173:e=>{const{normalize:t,plural:n}=e;return n([t(["Email address"]),t(["email address"])])},NN0174:e=>{const{normalize:t}=e;return t(["Language"])},NN0175:e=>{const{normalize:t}=e;return t(["I agree to receive emails with tips about Vivipic, the most popular templates, eCommerce trends, and special offers. "])},NN0176:e=>{const{normalize:t}=e;return t(["Apply and save"])},NN0177:e=>{const{normalize:t}=e;return t(["You're logged in with a Google/Facebook account, so you'll need to change your password through Google/Facebook."])},NN0178:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Log in with ",n(r("media"))])},NN0179:e=>{const{normalize:t}=e;return t(["or"])},NN0180:e=>{const{normalize:t,plural:n}=e;return n([t(["Password"]),t(["password"])])},NN0181:e=>{const{normalize:t}=e;return t(["Forgot password"])},NN0182:e=>{const{normalize:t}=e;return t(["Don't have an account?"])},NN0183:e=>{const{normalize:t}=e;return t(["Sign up here"])},NN0184:e=>{const{normalize:t}=e;return t(["Submit"])},NN0185:e=>{const{normalize:t}=e;return t(["Get started by choosing a pro-looking template."])},NN0186:e=>{const{normalize:t}=e;return t(["Vivipic is a powerful design tool with thousands of pre-made templates designed specifically for online sellers.<newline>With Vivipic, you can create stunning posts, ads, banners, and more in minutes."])},NN0187:e=>{const{normalize:t}=e;return t(["All my designs"])},NN0188:e=>{const{normalize:t}=e;return t(["Favorites"])},NN0189:e=>{const{normalize:t}=e;return t(["Trash"])},NN0190:e=>{const{normalize:t}=e;return t(["New folder"])},NN0191:e=>{const{normalize:t}=e;return t(["Sort by"])},NN0192:e=>{const{normalize:t}=e;return t(["Name (Ascending) "])},NN0193:e=>{const{normalize:t}=e;return t(["Name (Descending)"])},NN0194:e=>{const{normalize:t}=e;return t(["Date modified (Descending)"])},NN0195:e=>{const{normalize:t}=e;return t(["Date modified (Ascending)"])},NN0196:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["By ",n(r("name"))])},NN0197:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("num"))," items"])},NN0198:e=>{const{normalize:t}=e;return t(["Rename"])},NN0199:e=>{const{normalize:t}=e;return t(["Delete folder"])},NN0200:e=>{const{normalize:t}=e;return t(["Permanently delete "])},NN0201:e=>{const{normalize:t,plural:n}=e;return n([t(["This file will be deleted immediately. You can't undo this action."]),t(["The files will be deleted immediately. You can't undo this action."])])},NN0202:e=>{const{normalize:t,plural:n}=e;return n([t(["Are you sure you want to permanently delete this file?"]),t(["Are you sure you want to permanently delete the files?"])])},NN0203:e=>{const{normalize:t}=e;return t(["Cancel"])},NN0204:e=>{const{normalize:t}=e;return t(["Undo"])},NN0205:e=>{const{normalize:t}=e;return t(["Add to favorites"])},NN0206:e=>{const{normalize:t}=e;return t(["Move to folder"])},NN0207:e=>{const{normalize:t}=e;return t(["Remove from favorites"])},NN0208:e=>{const{normalize:t}=e;return t(["Template size"])},NN0209:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["The template (",n(r("tsize")),") you select is not the same size as the current design (",n(r("psize")),"). Which size would you like to add?"])},NN0210:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("content"))," copied"])},NN0211:e=>{const{normalize:t}=e;return t(["Duplicate page"])},NN0212:e=>{const{normalize:t}=e;return t(["Ungroup"])},NN0213:e=>{const{normalize:t}=e;return t(["Lock"])},NN0214:e=>{const{normalize:t}=e;return t(["Share"])},NN0215:e=>{const{normalize:t}=e;return t(["Transparent background"])},NN0216:e=>{const{normalize:t}=e;return t(["Downloading"])},NN0217:e=>{const{normalize:t}=e;return t(["Better image quality - recommended for transparent backgrounds"])},NN0218:e=>{const{normalize:t}=e;return t(["Normal image quality"])},NN0219:e=>{const{normalize:t}=e;return t(["Distribute objects evenly"])},NN0220:e=>{const{normalize:t}=e;return t(["pixel"])},NN0221:e=>{const{normalize:t}=e;return t(["Distribute Horizontally"])},NN0222:e=>{const{normalize:t}=e;return t(["Distribute Vertically"])},NN0223:e=>{const{normalize:t}=e;return t(["Failed to upload profile image."])},NN0224:e=>{const{normalize:t}=e;return t(["Profile image updated successfully."])},NN0225:e=>{const{normalize:t}=e;return t(["See more"])},NN0226:e=>{const{normalize:t}=e;return t(["You can't use more than 64 characters. Please reduce the number of characters"])},NN0227:e=>{const{normalize:t}=e;return t(["Hot Searches"])},NN0228:e=>{const{normalize:t}=e;return t(["Choose your template size"])},NN0229:e=>{const{normalize:t}=e;return t(["Use this template"])},NN0230:e=>{const{normalize:t}=e;return t(["Paste"])},NN0231:e=>{const{normalize:t}=e;return t(["Bring to front"])},NN0232:e=>{const{normalize:t}=e;return t(["Bring forward"])},NN0233:e=>{const{normalize:t}=e;return t(["Send backward"])},NN0234:e=>{const{normalize:t}=e;return t(["Send to back"])},NN0235:e=>{const{normalize:t}=e;return t(["Vivipic offers thousands of free professional templates.<newline>Start designing right away!"])},NN0236:e=>{const{normalize:t}=e;return t(["Design editing is currently only available on PC."])},NN0237:e=>{const{normalize:t}=e;return t(["With Vivipic, you can quickly create beautiful and impressive images for your business."])},NN0238:e=>{const{normalize:t}=e;return t(["Browse through our free & professional templates and get started editing right now!"])},NN0239:e=>{const{normalize:t}=e;return t(["This folder is empty."])},NN0241:e=>{const{normalize:t}=e;return t(["Deleted permanently after 30 days."])},NN0242:e=>{const{normalize:t}=e;return t(["Something went wrong. Please try again later."])},NN0243:e=>{const{normalize:t}=e;return t(["After deleting, the original file will also be removed."])},NN0244:e=>{const{normalize:t}=e;return t(["Are you sure you want to delete these designs?"])},NN0245:e=>{const{normalize:t}=e;return t(["This file contains multiple designs/folders."])},NN0246:e=>{const{normalize:t}=e;return t(["Are you sure you want to delete all of them?"])},NN0247:e=>{const{normalize:t}=e;return t(["Template you selected is not the same size as the current page. "])},NN0248:e=>{const{normalize:t}=e;return t(["Network error. Please check your connection and try again."])},NN0249:e=>{const{normalize:t}=e;return t(["Unnamed folder"])},NN0250:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("item"))," moved to ",n(r("folder"))])},NN0251:e=>{const{normalize:t}=e;return t(["Duplicate"])},NN0252:e=>{const{normalize:t,plural:n}=e;return n([t(["Design"]),t(["Designs"])])},NN0253:e=>{const{normalize:t,plural:n}=e;return n([t(["Folder"]),t(["Folders"])])},NN0254:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("selectedNum"))," selected"])},NN0255:e=>{const{normalize:t}=e;return t(["multiple designs/folders"])},NN0256:e=>{const{normalize:t}=e;return t(["popular"])},NN0257:e=>{const{normalize:t}=e;return t(["recent"])},NN0258:e=>{const{normalize:t}=e;return t(["Undefined typed"])},NN0259:e=>{const{normalize:t}=e;return t(["Congrats! You are now on our first guest list."])},NN0260:e=>{const{normalize:t}=e;return t(["Please use a web browser on your computer or smartphone to open Vivipic editor. "])},NN0261:e=>{const{normalize:t}=e;return t(["Notification will be sent to your email once the iPad/tablet version is ready."])},NN0262:e=>{const{normalize:t}=e;return t(["Home"])},NN0263:e=>{const{normalize:t}=e;return t(["Pick a template that best suits your needs."])},NN0264:e=>{const{normalize:t}=e;return t(["Scroll through the template categories or use the search bar to look for more specific templates (e.g. fashion). Use filters to narrow your search results by selecting different design types. You can edit different sized templates in one design file."])},NN0265:e=>{const{normalize:t}=e;return t(["Customize your design"])},NN0266:e=>{const{normalize:t}=e;return t(["In the left-hand menu, you will find tabs for Photos, Objects, Backgrounds, and Texts. You can use the toolbar that appears on the right side of editor for more adjustment options."])},NN0267:e=>{const{normalize:t}=e;return t(["Upload your image"])},NN0268:e=>{const{normalize:t}=e;return t(['You can upload your own images by dropping them into  "Uploads" or clicking "Upload Image" button.'])},NN0269:e=>{const{normalize:t}=e;return t(["Instant download"])},NN0270:e=>{const{normalize:t}=e;return t(['Simply click "Download", select the file type, size, the pages you need, and you\'re done!'])},NN0271:e=>{const{normalize:t}=e;return t(["Skip"])},NN0272:e=>{const{normalize:t}=e;return t(["Next step"])},NN0273:e=>{const{normalize:t}=e;return t(["I got it."])},NN0274:e=>{const{normalize:t}=e;return t(["Get Started Now"])},NN0275:e=>{const{normalize:t}=e;return t(["Detach image from background"])},NN0276:e=>{const{normalize:t}=e;return t(["Boost design quality while saving time and money!"])},NN0277:e=>{const{normalize:t}=e;return t(["Take less time to design and more time to run your business by using Vivipic."])},NN0278:e=>{const{normalize:t}=e;return t(["Popular templates"])},NN0279:e=>{const{normalize:t}=e;return t(["Latest templates"])},NN0280:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Sigh up with ",n(r("media"))])},NN0281:e=>{const{normalize:t}=e;return t(["Log in now"])},NN0282:e=>{const{normalize:t}=e;return t(["No worries. Please enter your email address. <newline>We'll send you an email to help you reset your password."])},NN0283:e=>{const{normalize:t}=e;return t(["Return to login page"])},NN0284:e=>{const{normalize:t}=e;return t(["Verification code has been sent."])},NN0285:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Please enter the code that was sent to ",n(r("email"))," within ",n(r("time"))," mins."])},NN0286:e=>{const{normalize:t}=e;return t(["Verification code"])},NN0287:e=>{const{normalize:t}=e;return t(["Verify"])},NN0288:e=>{const{normalize:t}=e;return t(["Didn't get the code?"])},NN0289:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Resend code in ",n(r("time"))," seconds"])},NN0290:e=>{const{normalize:t}=e;return t(["Resend code"])},NN0291:e=>{const{normalize:t}=e;return t(["Reset your password"])},NN0292:e=>{const{normalize:t}=e;return t(["New password"])},NN0293:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Must be at least in ",n(r("len"))," characters in length."])},NN0294:e=>{const{normalize:t}=e;return t(["Must include at least 1 letter."])},NN0295:e=>{const{normalize:t}=e;return t(["Must include at least 1 number."])},NN0296:e=>{const{normalize:t}=e;return t(["Confirm new password"])},NN0297:e=>{const{normalize:t}=e;return t(["Invalid email format."])},NN0298:e=>{const{normalize:t}=e;return t(["Invalid code."])},NN0299:e=>{const{normalize:t}=e;return t(["Please make sure the password you have entered is the same as the first."])},NN0300:e=>{const{normalize:t}=e;return t(["Get started with Vivipic"])},NN0301:e=>{const{normalize:t}=e;return t(["With Vivipic, you can take less time to design and more time to run your business."])},NN0302:e=>{const{normalize:t}=e;return t(["Sign up today for incredibly stylish free designs"])},NN0303:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Sign up with ",n(r("media"))])},NN0304:e=>{const{normalize:t}=e;return t(["Already have an account?"])},NN0305:e=>{const{normalize:t}=e;return t(["Log in here"])},NN0306:e=>{const{normalize:t}=e;return t(["Create your account"])},NN0307:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["By signing up to Vivipic, you indicate that you've read and agree to our ",n(r("use"))," and ",n(r("privacy")),"."])},NN0308:e=>{const{normalize:t}=e;return t(["Password must have at least 8 characters that include at least 1 uppercase, 1 lowercase, and 1 number."])},NN0309:e=>{const{normalize:t}=e;return t(["Change profile image"])},NN0310:e=>{const{normalize:t}=e;return t(["Change password"])},NN0311:e=>{const{normalize:t}=e;return t(["Last update:"])},NN0312:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("month"))," / ",n(r("date"))," / ",n(r("year"))])},NN0313:e=>{const{normalize:t}=e;return t(["Change"])},NN0314:e=>{const{normalize:t}=e;return t(["Security"])},NN0315:e=>{const{normalize:t}=e;return t(["Sign out from all devices to end all sessions."])},NN0316:e=>{const{normalize:t}=e;return t(["Sign out from this device."])},NN0317:e=>{const{normalize:t}=e;return t(["Delete account"])},NN0318:e=>{const{normalize:t}=e;return t(["Once your account is deleted, you cannot access any of your designs or log into Vivipic."])},NN0319:e=>{const{normalize:t}=e;return t(["Height"])},NN0320:e=>{const{normalize:t}=e;return t(["Width"])},NN0321:e=>{const{normalize:t}=e;return t(["Template size"])},NN0322:e=>{const{normalize:t}=e;return t(["Auto recommendation"])},NN0323:e=>{const{normalize:t}=e;return t(["To download your design, Sign Up or Log In."])},NN0324:e=>{const{normalize:t}=e;return t(["All"])},NN0325:e=>{const{normalize:t}=e;return t(["never"])},NN0326:e=>{const{normalize:t}=e;return t(["Free for a limited time!"])},NN0327:e=>{const{normalize:t}=e;return t(["Thousands of free & pro-looking templates"])},NN0328:e=>{const{normalize:t}=e;return t(["We have tons of templates suitable for all industries. Choose from our diverse collection based on your business."])},NN0329:e=>{const{normalize:t}=e;return t(["Built to meet the needs of eCommerce world"])},NN0330:e=>{const{normalize:t}=e;return t(["Vivipic is designed for entrepreneurs and marketers with no design skills. With us, finding the right template and customizing it for your brand is a breeze. "])},NN0331:e=>{const{normalize:t}=e;return t(["Make your brand stand out across all platforms"])},NN0332:e=>{const{normalize:t}=e;return t(["We offer templates for Facebook, Instagram, Amazon and more. By using Vivipic, you can elevate your brand's presence and create brand consistent images across all your platforms."])},NN0333:e=>{const{normalize:t}=e;return t(["Stock libraries with everything you need"])},NN0334:e=>{const{normalize:t}=e;return t(["With over 2 billion free images for commercial use, art illustrations added regularly, backgrounds, graphics, and much more, you can create impressive designs easily."])},NN0335:e=>{const{normalize:t}=e;return t(["Enter current password"])},NN0336:e=>{const{normalize:t}=e;return t(["Current password"])},NN0337:e=>{const{normalize:t}=e;return t(["Please confirm your current password."])},NN0338:e=>{const{normalize:t}=e;return t(["Confirm"])},NN0339:e=>{const{normalize:t}=e;return t(["Are you sure?"])},NN0340:e=>{const{normalize:t}=e;return t(["All results"])},NN0341:e=>{const{normalize:t}=e;return t(["Multiple fonts"])},NN0342:e=>{const{normalize:t}=e;return t(["Fit"])},NN0343:e=>{const{normalize:t}=e;return t(["Fill"])},NN0344:e=>{const{normalize:t}=e;return t(["Types for download"])},NN0345:e=>{const{normalize:t}=e;return t(["No hieght limit per split"])},NN0346:e=>{const{normalize:t}=e;return t(["Maximum height per split"])},NN0347:e=>{const{normalize:t}=e;return t(["Full page download"])},NN0348:e=>{const{normalize:t}=e;return t(["Split download"])},NN0349:e=>{const{normalize:t}=e;return t(["Network error."])},NN0350:e=>{const{normalize:t}=e;return t(["Please log in to upload files."])},NN0351:e=>{const{normalize:t}=e;return t(["Network error. Please check your connection and try again."])},NN0352:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["To save your design, ",n(r("signUp"))," or ",n(r("logIn")),"."])},OG0001:e=>{const{normalize:t}=e;return t(["Vivipic - Free Online Design Software - Create Impressive Images For Your Brand"])},OG0002:e=>{const{normalize:t}=e;return t(["Vivipic is a free graphic design maker built for business owners and marketers with no design skills. Create professional images for your brand with our Instagram Post/Story, Facebook Post Youtube Tumbnail, Website Banner templates. Free access to millions of commercial-use fonts, images, icons, illustrations & backgrounds. "])},OG0003:e=>{const{normalize:t}=e;return t(["https://template.vivipic.com/static/img/US_vivipic.jpg"])},OG0004:e=>{const{normalize:t}=e;return t(["vivipic"])},OG0005:e=>{const{normalize:t}=e;return t(["https://vivipic.com"])},OG0006:e=>{const{normalize:t}=e;return t(["https://vivipic.com/templates"])},SE0001:e=>{const{normalize:t}=e;return t(["Vivipic - Free Online Design Software - Create Impressive Images For Your Brand "])},SE0002:e=>{const{normalize:t}=e;return t(["Vivipic is a free graphic design maker built for business owners and marketers with no design skills. Create professional images for your brand with our Instagram Post/Story, Facebook Post Youtube Tumbnail, Website Banner templates. Free access to millions of commercial-use fonts, images, icons, illustrations & backgrounds. "])},SE0003:e=>{const{normalize:t}=e;return t(["en"])},NN0353:e=>{const{normalize:t,plural:n}=e;return n([t(["font"]),t(["fonts"])])},NN0354:e=>{const{normalize:t}=e;return t(["Create design"])},NN0355:e=>{const{normalize:t}=e;return t(["Your first eye-catching content is just a few clicks away!"])},NN0356:e=>{const{normalize:t}=e;return t(["Free Shipping,New Arrivals,Content Marketing,Christmas"])},NN0357:e=>{const{normalize:t}=e;return t(["All changes saved."])},NN0358:e=>{const{normalize:t}=e;return t(["Got it"])},NN0359:e=>{const{normalize:t}=e;return t(["Close"])},NN0360:e=>{const{normalize:t}=e;return t(["Failed to save the changes you made."])},NN0361:e=>{const{normalize:t}=e;return t(["Show guides"])},NN0362:e=>{const{normalize:t}=e;return t(["Use it anyway"])},NN0363:e=>{const{normalize:t}=e;return t(["Lock guides"])},NN0364:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Photo by",n(r("author")),"on",n(r("site"))])},NN0365:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Created by",n(r("author"))])},NN0366:e=>{const{normalize:t}=e;return t(["Tag"])},NN0367:e=>{const{normalize:t}=e;return t(["\bLicense"])},NN0368:e=>{const{normalize:t}=e;return t(["Instagram / Facebook Post"])},NN0369:e=>{const{normalize:t}=e;return t(["Email Marketing"])},NN0370:e=>{const{normalize:t}=e;return t(["Youtube Thumbnail"])},NN0371:e=>{const{normalize:t}=e;return t(["Browse all templates"])},NN0372:e=>{const{normalize:t}=e;return t(["Ready to create?<newline>Try Vivipic for FREE today!"])},NN0373:e=>{const{normalize:t}=e;return t(["Free for a limited time."])},NN0374:e=>{const{normalize:t}=e;return t(["Sign up for free"])},NN0375:e=>{const{normalize:t}=e;return t(["Thousands of<newline>free & pro-looking templates"])},NN0376:e=>{const{normalize:t}=e;return t(["We have tons of templates designed for different selling categories. Select a template for the business you run or a style that resonates with your brand."])},NN0377:e=>{const{normalize:t}=e;return t(["Explore all templates"])},NN0378:e=>{const{normalize:t}=e;return t(["Meet the needs of eCommerce world"])},NN0379:e=>{const{normalize:t}=e;return t(["Vivipic is designed for entrepreneurs and marketers with no design skills. With us, finding the right template and customizing it for your brand is a breeze."])},NN0380:e=>{const{normalize:t}=e;return t(["Make your brand stand out across all platforms."])},NN0381:e=>{const{normalize:t}=e;return t(["We offer templates for Facebook, Instagram, Amazon, and more. With us, you can elevate your brand's presence and create brand-consistent images across all your platforms."])},NN0382:e=>{const{normalize:t}=e;return t(["Unlock background"])},NN0383:e=>{const{normalize:t}=e;return t(["Lock guides"])},NN0384:e=>{const{normalize:t}=e;return t(["Unlock guides"])},NN0385:e=>{const{normalize:t}=e;return t(["Erase"])},NN0386:e=>{const{normalize:t}=e;return t(["Restore"])},NN0387:e=>{const{normalize:t}=e;return t(["Brush size"])},NN0388:e=>{const{normalize:t}=e;return t(["Show original"])},NN0389:e=>{const{normalize:t}=e;return t(["Reset"])},NN0390:e=>{const{normalize:t}=e;return t(["A huge selection of free and designer-made templates are all at your fingertips."])},NN0391:e=>{const{normalize:t}=e;return t(["Get started for free"])},NN0392:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Add all pages (",n(r("num"))," pages)"])},NN0393:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Sorry, we couldn't find any ",n(r("target")),' for "',n(r("keyword")),'". Please try a different search term.'])},NN0394:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Sorry, we couldn't find any matches for ",n(r("target")),". Please try a different search term."])},NN0395:e=>{const{normalize:t}=e;return t(["If you log in with a Google/Facebook account, you cannot reset your password here. Please reset your password via Google/Facebook."])},NN0396:e=>{const{normalize:t}=e;return t(["Add New Brand"])},NN0397:e=>{const{normalize:t}=e;return t(["Untitled Brand Kit"])},NN0398:e=>{const{normalize:t}=e;return t(["Try <html>selecting all template sizes<html> to see more results."])},NN0399:e=>{const{normalize:t}=e;return t(["Brand logos"])},NN0400:e=>{const{normalize:t}=e;return t(["Text styles"])},NN0401:e=>{const{normalize:t}=e;return t(["Brand colors"])},NN0402:e=>{const{normalize:t}=e;return t(["Upload or drop a font here"])},NN0403:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Add a ",n(r("textType"))," style"])},NN0404:e=>{const{normalize:t}=e;return t(["Add a palette"])},NN0405:e=>{const{normalize:t}=e;return t(["Untitled palette"])},NN0406:e=>{const{normalize:t}=e;return t(["To use the Eyedropper tool, please switch to a supported browser (Edge, Google Chrome, Opera) on Desktop and upgrade to the latest version of it."])},NN0407:e=>{const{normalize:t}=e;return t(["Eyedropper"])},NN0408:e=>{const{normalize:t}=e;return t(["heading"])},NN0409:e=>{const{normalize:t}=e;return t(["subheading"])},NN0410:e=>{const{normalize:t}=e;return t(["body"])},NN0411:e=>{const{normalize:t}=e;return t(["Click to Upload"])},NN0412:e=>{const{normalize:t}=e;return t(["or<newline>Drag&drop photos here"])},NN0413:e=>{const{normalize:t}=e;return t(["Drag photo here"])},NN0414:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("element"))," Applicable File"])},NN0415:e=>{const{normalize:t}=e;return t(["Drag file here"])},NN0416:e=>{const{normalize:t}=e;return t(["Photo"])},NN0417:e=>{const{normalize:t}=e;return t(["Font"])},NN0418:e=>{const{normalize:t}=e;return t(["Glow"])},NN0419:e=>{const{normalize:t}=e;return t(["Color-matched Shadow"])},NN0420:e=>{const{normalize:t}=e;return t(["Contact Shadow"])},NN0421:e=>{const{normalize:t}=e;return t(["Spread"])},NN0422:e=>{const{normalize:t}=e;return t(["Size"])},NN0423:e=>{const{normalize:t}=e;return t(["Thickness"])},NN0424:e=>{const{normalize:t}=e;return t(["Vertical shift"])},NN0425:e=>{const{normalize:t}=e;return t(["Horizonal shift"])},NN0426:e=>{const{normalize:t}=e;return t(["Blur"])},NN0427:e=>{const{normalize:t}=e;return t(["Opacity"])},NN0428:e=>{const{normalize:t}=e;return t(["None"])},NN0429:e=>{const{normalize:t}=e;return t(["Shadow"])},NN0430:e=>{const{normalize:t}=e;return t(["Outline"])},NN0431:e=>{const{normalize:t}=e;return t(["Distance"])},NN0432:e=>{const{normalize:t}=e;return t(["Angle"])},NN0433:e=>{const{normalize:t}=e;return t(["Are you sure?"])},NN0434:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["You are going to delete ",n(r("itemName"))])},NN0435:e=>{const{normalize:t}=e;return t(["You cannot recover it if you change your mind."])},NN0436:e=>{const{normalize:t}=e;return t(["Existing designs will not be affected by the action."])},NN0437:e=>{const{normalize:t}=e;return t(["Yes, delete it"])},NN0438:e=>{const{normalize:t}=e;return t(["Shadow"])},NN0439:e=>{const{normalize:t,plural:n}=e;return n([t(["page"]),t(["pages"])])},NN0440:e=>{const{normalize:t}=e;return t(["Are you sure you want to unsubscribe?"])},NN0441:e=>{const{normalize:t}=e;return t(["After unsubscribing, you won't receive any of the following:"])},NN0442:e=>{const{normalize:t}=e;return t(["Discounts for premium plans"])},NN0443:e=>{const{normalize:t}=e;return t(["Updates to our template gallery"])},NN0444:e=>{const{normalize:t}=e;return t(["Tips, tricks and hidden features"])},NN0445:e=>{const{normalize:t}=e;return t(["Yes"])},NN0446:e=>{const{normalize:t}=e;return t(["No"])},NN0447:e=>{const{normalize:t}=e;return t(["What do you want us to know?"])},NN0448:e=>{const{normalize:t}=e;return t(["Thank you for using Vivipic. Your feedback will help us improve. Tell us why you decided to unsubscribe:"])},NN0449:e=>{const{normalize:t}=e;return t(["Too much information in the email"])},NN0450:e=>{const{normalize:t}=e;return t(["I'm no longer interested in your offer"])},NN0451:e=>{const{normalize:t}=e;return t(["You emailed me too frequently"])},NN0452:e=>{const{normalize:t}=e;return t(["Other"])},NN0453:e=>{const{normalize:t}=e;return t(["Leave your priceless feedback."])},NN0454:e=>{const{normalize:t}=e;return t(["Loading"])},NN0455:e=>{const{normalize:t}=e;return t(["Saving"])},NN0456:e=>{const{normalize:t}=e;return t(["Oops!"])},NN0457:e=>{const{normalize:t}=e;return t(["Something went wrong..."])},NN0458:e=>{const{normalize:t}=e;return t(["Please try again later!"])},NN0459:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("itemName"))," will also be removed from all existing designs."])},NN0460:e=>{const{normalize:t}=e;return t(["Test"])},NN0461:e=>{const{normalize:t}=e;return t(["Failed to upload design. Please try downloading the file again."])},NN0462:e=>{const{normalize:t}=e;return t(["Download failed. Please try again."])},NN0463:e=>{const{normalize:t}=e;return t(["Uploaded Font"])},NN0464:e=>{const{normalize:t}=e;return t(["Become a <blue>Pro Designer</blue> in a few clicks."])},NN0465:e=>{const{normalize:t}=e;return t(["Not only a design tool, but your best marketing partner."])},NN0466:e=>{const{normalize:t}=e;return t(["Perfect your design with thousands of beautiful templates"])},NN0467:e=>{const{normalize:t}=e;return t(["Available for personal and commercial use."])},NN0468:e=>{const{normalize:t}=e;return t(["Tailor-made templates just for your business"])},NN0469:e=>{const{normalize:t}=e;return t(["Find your ideal design fast with the filters of events and industries at Template Center."])},NN0470:e=>{const{normalize:t}=e;return t(["See Template Center"])},NN0471:e=>{const{normalize:t}=e;return t(["Template Bundle aligned across all platforms"])},NN0472:e=>{const{normalize:t}=e;return t(["Effortlessly obtain all sizes of templates from social media posts, stories, website banners and more."])},NN0473:e=>{const{normalize:t}=e;return t(["Extensible Canvas makes design process smoother"])},NN0474:e=>{const{normalize:t}=e;return t(["Users are allowed to create multiple sizes of designs in the same page, reducing repetition of switching files."])},NN0475:e=>{const{normalize:t}=e;return t(["Storytelling Templates provide hints to your marketing strategy"])},NN0476:e=>{const{normalize:t}=e;return t(["Co-developed with well-known marketing lecturers, nine image slides tell the benefits of your product in a logical way."])},NN0477:e=>{const{normalize:t}=e;return t(["Explore More"])},NN0478:e=>{const{normalize:t}=e;return t([])},NN0479:e=>{const{normalize:t}=e;return t([])},NN0480:e=>{const{normalize:t}=e;return t(["Smart Background Remover makes it easier to edit images"])},NN0481:e=>{const{normalize:t}=e;return t(["Get your image background cleared and changed automatically with the remover."])},NN0482:e=>{const{normalize:t}=e;return t(["Manage your brand identity with Brand Kit"])},NN0483:e=>{const{normalize:t}=e;return t(["This tool set allows users to add their own logos, fonts and colors, taking brand and style to the next level."])},NN0484:e=>{const{normalize:t}=e;return t(["Who loves Vivipic?"])},NN0485:e=>{const{normalize:t}=e;return t(["Recommended by marketers and influencers"])},NN0486:e=>{const{normalize:t}=e;return t(["<blue>Tailor-made templates</blue> just for your business."])},NN0487:e=>{const{normalize:t}=e;return t(["Find your ideal design fast with the filters at <blue>Template Center.</blue>"])},NN0488:e=>{const{normalize:t}=e;return t(["Find your ideal design fast with the filters at Template Center."])},NN0489:e=>{const{normalize:t}=e;return t(["Menu"])},NN0490:e=>{const{normalize:t}=e;return t(["Replace"])},NN0491:e=>{const{normalize:t}=e;return t(["Effect"])},NN0492:e=>{const{normalize:t}=e;return t(["Font size"])},NN0493:e=>{const{normalize:t}=e;return t(["Logo"])},NN0494:e=>{const{normalize:t}=e;return t(["Text"])},NN0495:e=>{const{normalize:t}=e;return t(["Color"])},NN0496:e=>{const{normalize:t}=e;return t(["Select an area to crop"])},NN0497:e=>{const{normalize:t}=e;return t(["Brands"])},NN0498:e=>{const{normalize:t}=e;return t(["Format"])},NN0500:e=>{const{normalize:t}=e;return t(["Processing.., please wait. "])},NN0501:e=>{const{normalize:t}=e;return t(["Select a guide type"])},NN0502:e=>{const{normalize:t}=e;return t(["Delete this guide"])},NN0503:e=>{const{normalize:t}=e;return t(["Uploading the font may take up to 5 mins, please wait."])},NN0504:e=>{const{normalize:t}=e;return t(["Edit"])},NN0505:e=>{const{normalize:t}=e;return t(["<blue>Design</blue> better and faster."])},NN0506:e=>{const{normalize:t}=e;return t(["Start a 14-day free trial. Cancel anytime."])},NN0507:e=>{const{normalize:t,plural:n}=e;return n([t(["Vivipic PRO"]),t(["<blue>Vivipic PRO<blue>"])])},NN0508:e=>{const{normalize:t}=e;return t(["Upgrade for more advanced tools."])},NN0509:e=>{const{normalize:t}=e;return t(["What’s included"])},NN0510:e=>{const{normalize:t}=e;return t(["Premium templates"])},NN0511:e=>{const{normalize:t}=e;return t(["Background remover"])},NN0512:e=>{const{normalize:t}=e;return t(["100 GB storage for files "])},NN0513:e=>{const{normalize:t}=e;return t(["Unlimited Brand Kits"])},NN0514:e=>{const{normalize:t}=e;return t(["monthly"])},NN0515:e=>{const{normalize:t}=e;return t(["yearly"])},NN0516:e=>{const{normalize:t}=e;return t(["/mo"])},NN0517:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("day")),"-Day Free Trial"])},NN0518:e=>{const{normalize:t}=e;return t(["Manage my subscription"])},NN0519:e=>{const{normalize:t}=e;return t(["*prices based on USD"])},NN0520:e=>{const{normalize:t}=e;return t(["Basic Features"])},NN0521:e=>{const{normalize:t}=e;return t(["Free"])},NN0522:e=>{const{normalize:t}=e;return t(["PRO"])},NN0523:e=>{const{normalize:t}=e;return t(["Premium templates"])},NN0524:e=>{const{normalize:t}=e;return t(["Free templates"])},NN0525:e=>{const{normalize:t}=e;return t(["Download without limits"])},NN0526:e=>{const{normalize:t}=e;return t(["File Storage"])},NN0527:e=>{const{normalize:t}=e;return t(["Free photos, objects, and background images"])},NN0528:e=>{const{normalize:t}=e;return t(["Background remover"])},NN0529:e=>{const{normalize:t}=e;return t(["Unlimited Brand Kits"])},NN0530:e=>{const{normalize:t}=e;return t(["Design resizing feature"])},NN0531:e=>{const{normalize:t}=e;return t(["Multiple text effects"])},NN0532:e=>{const{normalize:t}=e;return t(["Download transparent PNG"])},NN0533:e=>{const{normalize:t}=e;return t(["FAQs"])},NN0534:e=>{const{normalize:t}=e;return t(["Can I use Vivipic for free?"])},NN0535:e=>{const{normalize:t}=e;return t(["Of course! You can create designs by freely accessing all our templates, graphics, elements, and more. If you want to enjoy our high-quality background remover and additional cloud storage, you will have to upgrade to Vivipic pro."])},NN0536:e=>{const{normalize:t}=e;return t(["I have subscribed for Vivipic Pro. What could I do if I run out of background remover credits or cloud storage?"])},NN0537:e=>{const{normalize:t}=e;return t(["Pro plans offer 300 bg remover credits monthly to meet all heavy users' needs. If you have used up all your background remover credits (300 credits) or cloud storage (100 GB) and need more, please send us a DM at https://facebook.com/vivipicus or email us at service","@","vivipic.com."])},NN0538:e=>{const{normalize:t}=e;return t(["What could I do if I have questions using your tools or want to provide advices?"])},NN0539:e=>{const{normalize:t}=e;return t(["Please feel free to DM our fan page https://facebook.com/vivipicus or email us at service","@","vivipic.com."])},NN0540:e=>{const{normalize:t}=e;return t(["What payment methods do you support?"])},NN0541:e=>{const{normalize:t}=e;return t(["Major Credit Cards, such as Visa, and Mastercard are supported."])},NN0542:e=>{const{normalize:t}=e;return t(["If I change my mind, what could I do?"])},NN0543:e=>{const{normalize:t}=e;return t(["You can cancel your Vivipic pro at any time and your plan will remain active until your next renewal date."])},NN0544:e=>{const{normalize:t}=e;return t(["Step"])},NN0545:e=>{const{normalize:t}=e;return t(["Upgrade to Pro"])},NN0546:e=>{const{normalize:t}=e;return t(["Start a 14-day free trial. "])},NN0547:e=>{const{normalize:t}=e;return t(["Design better and faster."])},NN0548:e=>{const{normalize:t}=e;return t([", billed annually"])},NN0549:e=>{const{normalize:t}=e;return t(["25% off"])},NN0550:e=>{const{normalize:t}=e;return t(["Continue to payment"])},NN0551:e=>{const{normalize:t}=e;return t(["Payment Details"])},NN0552:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Due ",n(r("date"))])},NN0553:e=>{const{normalize:t}=e;return t(["Due today"])},NN0554:e=>{const{normalize:t}=e;return t(["Invoice information"])},NN0555:e=>{const{normalize:t}=e;return t(["Email address"])},NN0556:e=>{const{normalize:t}=e;return t(["Full name"])},NN0557:e=>{const{normalize:t}=e;return t(["Phone number"])},NN0558:e=>{const{normalize:t}=e;return t(["VAT number"])},NN0559:e=>{const{normalize:t}=e;return t(["VAT number (optional)"])},NN0560:e=>{const{normalize:t}=e;return t(["Enjoy your free trial"])},NN0561:e=>{const{normalize:t}=e;return t(["Upgrade to Pro"])},NN0562:e=>{const{normalize:t}=e;return t(["Congrats! Vivipic Pro opens up endless possibilities for creating visual content. Better and faster. We hope you enjoy it!"])},NN0563:e=>{const{normalize:t}=e;return t(["Okay, I got it."])},NN0564:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Switch to ",n(r("period"))," payment"])},NN0565:e=>{const{normalize:t}=e;return t(["Yearly payment get 25% off – Get 2 months for free!"])},NN0566:e=>{const{normalize:t}=e;return t(["Keep yearly payment to SAVE 25%!"])},NN0567:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Switch to ",n(r("period"))," plans"])},NN0568:e=>{const{normalize:t}=e;return t(["Pay with card"])},NN0569:e=>{const{normalize:t}=e;return t(["You‘ll miss out on..."])},NN0570:e=>{const{normalize:t}=e;return t(["Access to premium templates"])},NN0571:e=>{const{normalize:t}=e;return t(["100 GB cloud storage"])},NN0572:e=>{const{normalize:t}=e;return t(["High-quality BG remover"])},NN0573:e=>{const{normalize:t}=e;return t(["Brand Kit for asset management"])},NN0574:e=>{const{normalize:t}=e;return t(["Cancel subscription"])},NN0575:e=>{const{normalize:t}=e;return t(["Keep Vivipic PRO"])},NN0576:e=>{const{normalize:t}=e;return t(["Why are you canceling?"])},NN0577:e=>{const{normalize:t}=e;return t(["I only needed this occasionally."])},NN0578:e=>{const{normalize:t}=e;return t(["Free plan is good for me."])},NN0579:e=>{const{normalize:t}=e;return t(["I need more features."])},NN0580:e=>{const{normalize:t}=e;return t(["I can’t find templates I need."])},NN0581:e=>{const{normalize:t}=e;return t(["I found a better alternative."])},NN0582:e=>{const{normalize:t}=e;return t(["Other"])},NN0583:e=>{const{normalize:t}=e;return t(["Get instant access to Brand Kit Tool and design without limitations."])},NN0584:e=>{const{normalize:t}=e;return t(["Share your feedback to help us improve."])},NN0585:e=>{const{normalize:t}=e;return t(["Payment & billing"])},NN0586:e=>{const{normalize:t}=e;return t(["Your plan"])},NN0587:e=>{const{normalize:t}=e;return t(["Upgrade Now"])},NN0588:e=>{const{normalize:t}=e;return t(["Resume Subscription"])},NN0589:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Your current plan is billed ",n(r("period")),"."])},NN0590:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Your next payment of <blue>",n(r("price")),"</blue> will be taken on <blue>",n(r("date")),"</blue>."])},NN0591:e=>{const{normalize:t}=e;return t(["Switch to monthly"])},NN0592:e=>{const{normalize:t}=e;return t(["Cancel subscription of your PRO plan"])},NN0593:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Vivipic PRO will be cancelled on ",n(r("date")),"."])},NN0594:e=>{const{normalize:t}=e;return t(["Background remover credits"])},NN0595:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["<blue>",n(r("amount")),"</blue> credits remain by ",n(r("date"))])},NN0596:e=>{const{normalize:t}=e;return t(["File Storage"])},NN0597:e=>{const{normalize:t}=e;return t(["If you need more background remover credits or cloud storage, please contact us at service","@","vivipic.com."])},NN0598:e=>{const{normalize:t}=e;return t(["Payment details"])},NN0599:e=>{const{normalize:t}=e;return t(["Expires"])},NN0600:e=>{const{normalize:t}=e;return t(["Change payment method"])},NN0601:e=>{const{normalize:t}=e;return t(["Billing information"])},NN0602:e=>{const{normalize:t}=e;return t(["Enter your email address"])},NN0603:e=>{const{normalize:t}=e;return t(["Full name"])},NN0604:e=>{const{normalize:t}=e;return t(["Company name"])},NN0605:e=>{const{normalize:t}=e;return t(["Enter your company name(optional)"])},NN0606:e=>{const{normalize:t}=e;return t(["Address"])},NN0607:e=>{const{normalize:t}=e;return t(["Enter your address"])},NN0608:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Address line ",n(r("number"))])},NN0609:e=>{const{normalize:t}=e;return t(["Street Address"])},NN0610:e=>{const{normalize:t}=e;return t(["Apt, suite,etc.(optional)"])},NN0611:e=>{const{normalize:t}=e;return t(["City"])},NN0612:e=>{const{normalize:t}=e;return t(["State"])},NN0613:e=>{const{normalize:t}=e;return t(["Zip code"])},NN0614:e=>{const{normalize:t}=e;return t(["Billing history"])},NN0615:e=>{const{normalize:t}=e;return t(["Date"])},NN0616:e=>{const{normalize:t}=e;return t(["Description"])},NN0617:e=>{const{normalize:t}=e;return t(["Amount"])},NN0618:e=>{const{normalize:t}=e;return t(["Details"])},NN0619:e=>{const{normalize:t}=e;return t(["Download invoice"])},NN0620:e=>{const{normalize:t}=e;return t(["Payment failed"])},NN0621:e=>{const{normalize:t}=e;return t(["You don't have any billing history."])},NN0622:e=>{const{normalize:t}=e;return t(["Are you sure?"])},NN0623:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["You are about to delete your ",n(r("paymentMethod")),"."])},NN0624:e=>{const{normalize:t}=e;return t(["payment method"])},NN0625:e=>{const{normalize:t}=e;return t(["Yes,delete it."])},NN0626:e=>{const{normalize:t}=e;return t(["‼️We aren’t able to process your payment. Please change payment method."])},NN0627:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["You've successfully switched to ",n(r("period"))," payment."])},NN0628:e=>{const{normalize:t}=e;return t(["You've successfully canceled your subscription."])},NN0629:e=>{const{normalize:t}=e;return t(["You've successfully resume your subscription."])},NN0630:e=>{const{normalize:t}=e;return t(["You've successfully updated your card information."])},NN0631:e=>{const{normalize:t}=e;return t(["You've successfully deleted your card."])},NN0632:e=>{const{normalize:t}=e;return t(["Invalid phone format."])},NN0633:e=>{const{normalize:t}=e;return t(["Invalid VAT number format."])},NN0634:e=>{const{normalize:t}=e;return t(["Invalid zip format."])},NN0635:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("disk")),"% of storage used"])},NN0636:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Users on free plans have 1GB of cloud storage. If you run out of storage, you won't be able to upload images or create new designs. Now【",n(r("button")),"】to get 100GB of space."])},NN0637:e=>{const{normalize:t}=e;return t(["Users on free plans have 1GB of cloud storage. You've run out of storage and cannot upload images or create new designs. Try to delete photos or designs you no longer need, click【Recalculate】, and then we will calculate the storage space again. Or【Upgrade to Pro】to get 100GB of space."])},NN0638:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Users on free plans have 1GB of cloud storage. You've run out of storage and cannot upload images or create new designs. Now【",n(r("button")),"】to get 100GB of space."])},NN0639:e=>{const{normalize:t}=e;return t(["You've run out of storage and cannot upload images or create new designs. Try to delete photos or designs you no longer need, click【Recalculate】, and then we will calculate the storage space again. Or【Contact us】for more flexible solutions (service","@","vivipic.com)."])},NN0640:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["You've run out of storage and cannot upload images or create new designs. Try to delete photos or designs you no longer need. Or【",n(r("button")),"】for more flexible solutions (service","@","vivipic.com)."])},NN0641:e=>{const{normalize:t}=e;return t(["Recalculate"])},NN0642:e=>{const{normalize:t}=e;return t(["Contact us"])},NN0643:e=>{const{normalize:t}=e;return t(["Pricing"])},NN0644:e=>{const{normalize:t}=e;return t(["Running out of storage space"])},NN0645:e=>{const{normalize:t}=e;return t(["The image exceeds the maximum allowed size"])},NN0646:e=>{const{normalize:t}=e;return t(["Background Remover credits needed"])},NN0647:e=>{const{normalize:t}=e;return t(["You have used up all credits, no further background remover credits are available until next payment. If you need more credits, you can either switch to yearly payment or contact us."])},NN0648:e=>{const{normalize:t}=e;return t(["You have used up all credits. If you need more credits, please contact us."])},NN0649:e=>{const{normalize:t}=e;return t(["Settings"])},NN0650:e=>{const{normalize:t}=e;return t(["How to download my receipts?"])},NN0651:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Please visit the ",n(r("history"))," page to download receipts."])},NN0652:e=>{const{normalize:t}=e;return t(["Instantly access Auto Background Remover and get a precise cutout in seconds."])},NN0653:e=>{const{normalize:t}=e;return t(["Unlock this premium template and get unlimited access to over 1000+ PRO templates."])},NN0654:e=>{const{normalize:t}=e;return t(["Switch to yearly"])},NN0655:e=>{const{normalize:t}=e;return t(["Current plan"])},NN0656:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["There's a problem with your account (",n(r("status")),"), please ",n(r("contactus"))," ."])},NN0657:e=>{const{normalize:t}=e;return t(["Selected"])},NN0658:e=>{const{normalize:t}=e;return t(["Unlock this premium object and have unlimited access to PRO objects."])},NN0659:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["no ",n(r("items"))," yet"])},NN0660:e=>{const{normalize:t}=e;return t(["logos"])},NN0661:e=>{const{normalize:t}=e;return t(["color palettes"])},NN0662:e=>{const{normalize:t}=e;return t(["Click on the button"])},NN0663:e=>{const{normalize:t}=e;return t(["to upload your brand logos."])},NN0664:e=>{const{normalize:t}=e;return t(["to create your brand colors."])},NN0665:e=>{const{normalize:t}=e;return t(["Processing shadow effect.., please wait. "])},NN0666:e=>{const{normalize:t}=e;return t(["Categories"])},NN0667:e=>{const{normalize:t}=e;return t(["Social Media"])},NN0668:e=>{const{normalize:t}=e;return t(["Ecommerce"])},NN0669:e=>{const{normalize:t}=e;return t(["Other Designs"])},NN0670:e=>{const{normalize:t}=e;return t(["Resources"])},NN0671:e=>{const{normalize:t}=e;return t(["Blog"])},NN0672:e=>{const{normalize:t}=e;return t(["Support"])},NN0673:e=>{const{normalize:t}=e;return t(["Tutorial"])},NN0674:e=>{const{normalize:t}=e;return t(["Learn"])},NN0675:e=>{const{normalize:t}=e;return t(["Beginner’s Guide"])},NN0676:e=>{const{normalize:t}=e;return t(["Design"])},NN0677:e=>{const{normalize:t}=e;return t(["Digital Marketing"])},NN0678:e=>{const{normalize:t}=e;return t(["Trend"])},NN0679:e=>{const{normalize:t}=e;return t(["Recent colors"])},NN0680:e=>{const{normalize:t}=e;return t(["Select designs"])},NN0681:e=>{const{normalize:t}=e;return t(["Line width "])},NN0682:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("item"))," moved to ",n(r("dest"))])},NN0683:e=>{const{normalize:t}=e;return t(["Added to favorites"])},NN0684:e=>{const{normalize:t}=e;return t(["Removed from favorites"])},NN0685:e=>{const{normalize:t}=e;return t(["Deleted"])},NN0686:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("item"))," moved"])},NN0687:e=>{const{normalize:t,plural:n}=e;return n([t(["Item"]),t(["Items"])])},NN0688:e=>{const{normalize:t}=e;return t(["Copied to clipboard"])},NN0689:e=>{const{normalize:t}=e;return t(["Copied file to my designs"])},NN0690:e=>{const{normalize:t}=e;return t(["Select folders"])},NN0691:e=>{const{normalize:t}=e;return t(["Folder name"])},NN0692:e=>{const{normalize:t}=e;return t(["Remove from folder"])},NN0693:e=>{const{normalize:t}=e;return t(["Delete designs"])},NN0694:e=>{const{normalize:t}=e;return t(["This file contains multiple items."])},NN0695:e=>{const{normalize:t}=e;return t(["Template size doesn't match page size."])},NN0696:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["File (",n(r("file")),") exceeds the maximum allowed size (",n(r("size")),"MB)."])},NN0697:e=>{const{normalize:t}=e;return t(["Coupon code"])},NN0698:e=>{const{normalize:t}=e;return t(["Invalid coupon code"])},NN0699:e=>{const{normalize:t}=e;return t(["Save"])},NN0700:e=>{const{normalize:t}=e;return t(["Enter a coupon code here"])},NN0701:e=>{const{normalize:t}=e;return t(["Have a coupon code?"])},NN0702:e=>{const{normalize:t}=e;return t(["Enter coupon code and check for verification. Discount details will be displayed on the next page."])},NN0703:e=>{const{normalize:t}=e;return t(["Apply"])},NN0704:e=>{const{normalize:t}=e;return t(["Removed from the folder"])},NN0705:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["File exceeds the maximum allowed size (",n(r("size")),"MB)."])},NN0706:e=>{const{normalize:t}=e;return t(["Set as frame"])},NN0707:e=>{const{normalize:t}=e;return t(["Set as BG"])},NN0708:e=>{const{normalize:t}=e;return t(["Detach it"])},NN0709:e=>{const{normalize:t}=e;return t(["Before entering coupon code.."])},NN0710:e=>{const{normalize:t}=e;return t(["Please remove your payment method."])},NN0711:e=>{const{normalize:t}=e;return t(["Please cancel your subscription."])},NN0712:e=>{const{normalize:t}=e;return t(["Upload font"])},NN0713:e=>{const{normalize:t}=e;return t(["Brand name"])},NN0714:e=>{const{normalize:t}=e;return t([])},NN0715:e=>{const{normalize:t}=e;return t([])},NN0716:e=>{const{normalize:t}=e;return t([])},NN0717:e=>{const{normalize:t}=e;return t([])},NN0718:e=>{const{normalize:t}=e;return t([])},NN0719:e=>{const{normalize:t}=e;return t(["Background"])},NN0720:e=>{const{normalize:t}=e;return t(["Rectangle"])},NN0721:e=>{const{normalize:t}=e;return t(["Rounded corner"])},NN0722:e=>{const{normalize:t}=e;return t(["Rectangle border"])},NN0723:e=>{const{normalize:t}=e;return t(["Rounded corner border"])},NN0724:e=>{const{normalize:t}=e;return t(["Rectangle + Border"])},NN0725:e=>{const{normalize:t}=e;return t(["Rounded + Border"])},NN0726:e=>{const{normalize:t}=e;return t(["Gooey"])},NN0727:e=>{const{normalize:t}=e;return t(["Underline"])},NN0728:e=>{const{normalize:t}=e;return t(["3D extension"])},NN0729:e=>{const{normalize:t}=e;return t(["3D stroke"])},NN0730:e=>{const{normalize:t}=e;return t(["Triangle"])},NN0731:e=>{const{normalize:t}=e;return t(["Rounded"])},NN0732:e=>{const{normalize:t}=e;return t(["Square"])},NN0733:e=>{const{normalize:t}=e;return t(["Border weight"])},NN0734:e=>{const{normalize:t}=e;return t(["Border color"])},NN0735:e=>{const{normalize:t}=e;return t(["Fill color"])},NN0736:e=>{const{normalize:t}=e;return t(["Position"])},NN0737:e=>{const{normalize:t}=e;return t(["Outline"])},NN0738:e=>{const{normalize:t}=e;return t(["Endpoints"])},NN0739:e=>{const{normalize:t}=e;return t(["Front border color"])},NN0740:e=>{const{normalize:t}=e;return t(["Behind border color"])},NN0741:e=>{const{normalize:t}=e;return t(["Cloud"])},NN0742:e=>{const{normalize:t}=e;return t(["DM us"])},NN0743:e=>{const{normalize:t}=e;return t(["App Version"])},NN0744:e=>{const{normalize:t}=e;return t(["Next"])},NN0745:e=>{const{normalize:t}=e;return t(["Let's explore"])},NN0746:e=>{const{normalize:t}=e;return t(["Copy, Paste, Voilà!"])},NN0747:e=>{const{normalize:t}=e;return t(["Keep your stories poppin’ with texts"])},NN0748:e=>{const{normalize:t}=e;return t(["Endless options of chic stickers"])},NN0749:e=>{const{normalize:t}=e;return t(["Go wild with tons of background!"])},NN0750:e=>{const{normalize:t}=e;return t(["Copy a sticker or stylish text > Paste it to the Story editor > Ta-da!"])},NN0751:e=>{const{normalize:t}=e;return t(["Try out 1400+ fonts, apply text effects, and express yourself the way you want."])},NN0752:e=>{const{normalize:t}=e;return t(['Add an overlay or sticker to your story just by "copy & paste".'])},NN0753:e=>{const{normalize:t}=e;return t(["Copy a background with a simple tap or share it to your story."])},NN0754:e=>{const{normalize:t}=e;return t(["Reset"])},NN0755:e=>{const{normalize:t}=e;return t(["Spacing"])},NN0756:e=>{const{normalize:t}=e;return t(["Cropping"])},NN0757:e=>{const{normalize:t}=e;return t(["Layering"])},NN0758:e=>{const{normalize:t}=e;return t(["Static"])},NN0759:e=>{const{normalize:t}=e;return t(["Favorites"])},NN0760:e=>{const{normalize:t}=e;return t(["Category"])},NN0761:e=>{const{normalize:t}=e;return t(["Keyword"])},NN0762:e=>{const{normalize:t}=e;return t(["Item"])},NN0763:e=>{const{normalize:t}=e;return t(["Tips"])},NN0764:e=>{const{normalize:t}=e;return t(["Double-tap an item to add it to or remove it from favorites."])},NN0765:e=>{const{normalize:t}=e;return t(["No content in favorites"])},NN0766:e=>{const{normalize:t}=e;return t(["No saved designs."])},NN0767:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Please enter a number greater than ",n(r("num")),"."])},NN0768:e=>{const{normalize:t}=e;return t(['Upgrade to Pro to "resize" your design to fit any format.'])},NN0769:e=>{const{normalize:t}=e;return t(["Resize designs in seconds"])},NN0770:e=>{const{normalize:t}=e;return t(["PDF Standard"])},NN0771:e=>{const{normalize:t}=e;return t(["PDF Print"])},NN0772:e=>{const{normalize:t}=e;return t(["Small file, suitable for e-documents"])},NN0773:e=>{const{normalize:t}=e;return t(["Large file, suitable for high-quality printing"])},NN0774:e=>{const{normalize:t}=e;return t(["Crop marks"])},NN0775:e=>{const{normalize:t}=e;return t(["Bleed"])},NN0776:e=>{const{normalize:t}=e;return t(["Flatten PDF"])},NN0777:e=>{const{normalize:t}=e;return t(["Color mode"])},NN0778:e=>{const{normalize:t}=e;return t(["Show print bleed"])},NN0779:e=>{const{normalize:t}=e;return t(["Hide print bleed"])},NN0780:e=>{const{normalize:t}=e;return t(["Bleed settings"])},NN0781:e=>{const{normalize:t}=e;return t(["Top"])},NN0782:e=>{const{normalize:t}=e;return t(["Bottom"])},NN0783:e=>{const{normalize:t}=e;return t(["Left"])},NN0784:e=>{const{normalize:t}=e;return t(["Right"])},NN0785:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Size must be between ",n(r("size1"))," and ",n(r("size2")),"."])},NN0786:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Size must be smaller than ",n(r("size")),"."])},NN0787:e=>{const{normalize:t}=e;return t(["Fix it for me."])},NN0788:e=>{const{normalize:t}=e;return t(["Design exceeds the max allowed size."])},NN0789:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["The page(s) in this design exceed the maximum allowed size  ",n(r("size")),'. We will resize the page(s) to a smaller size automatically. If you will print out the design, please select the page size as cm/mm/inch and choose "PDF Print" when downloading for better quality.'])},NN0790:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Submit a ",n(r("type"))," request"])},NN0791:e=>{const{normalize:t}=e;return t(["https://docs.google.com/forms/d/e/1FAIpQLSdIqT5i4B3dd5Qrs-dJuGP1bAk0iqX8fmY42j-Buu3NDd5Zqw/viewform"])},NN0792:e=>{const{normalize:t,plural:n}=e;return n([t(["element"]),t(["Element"])])},NN0793:e=>{const{normalize:t,plural:n}=e;return n([t(["feature"]),t(["Feature"])])},NN0794:e=>{const{normalize:t}=e;return t(["Convert text to outlines"])},NN0795:e=>{const{normalize:t}=e;return t(["Filters"])},NN0796:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["If you need more ",n(r("type")),"s, please submit a ",n(r("type"))," request."])},NN0797:e=>{const{normalize:t}=e;return t(["Hollow / Solid"])},NN0798:e=>{const{normalize:t}=e;return t(["Object color"])},NN0799:e=>{const{normalize:t}=e;return t(["Common printing file requirement. "])},NN0800:e=>{const{normalize:t}=e;return t(["Convert into pixels. "])},NN0801:e=>{const{normalize:t}=e;return t(["Learn more"])},NN0802:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/us/outlines-pdf/"])},NN0803:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/us/flattened-pdf/"])},NN0804:e=>{const{normalize:t}=e;return t(["The background is locked. Please unlock it to take further action."])},NN0805:e=>{const{normalize:t}=e;return t(["Export file for high-quality printing"])},NN0806:e=>{const{normalize:t}=e;return t(["Unlock PDF Print feature to prepare perfect print file."])},NN0807:e=>{const{normalize:t}=e;return t(["Multi-select"])},NN0808:e=>{const{normalize:t}=e;return t(["The one-page website design editor is not supported on mobile devices."])},NN0809:e=>{const{normalize:t}=e;return t(["Select to paste format."])},NN0810:e=>{const{normalize:t}=e;return t(["Result Not Found"])},NN0811:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Sorry, we couldn't find any templates for \"",n(r("keyword")),'". Please try a different keyword or select all template types to see more results.'])},NN0812:e=>{const{normalize:t}=e;return t(["Select all template types"])},NN0813:e=>{const{normalize:t}=e;return t(["Pasted from clipboard"])},NN0814:e=>{const{normalize:t}=e;return t(["Horizontal shift"])},NN0815:e=>{const{normalize:t}=e;return t(["Size"])},NN0816:e=>{const{normalize:t}=e;return t(["Rainbow Cotton"])},NN0817:e=>{const{normalize:t}=e;return t(["Cozy Cotton"])},NN0818:e=>{const{normalize:t}=e;return t(["Cotton Candy"])},NN0819:e=>{const{normalize:t}=e;return t(["Kanji Outline"])},NN0820:e=>{const{normalize:t}=e;return t(["Color-variable"])},NN0821:e=>{const{normalize:t}=e;return t(["Penguin"])},NN0822:e=>{const{normalize:t}=e;return t(["Planet"])},NN0823:e=>{const{normalize:t}=e;return t(["Select page(s) to download"])},NN0824:e=>{const{normalize:t}=e;return t(["Downloading..."])},NN0825:e=>{const{normalize:t}=e;return t(["Please wait..."])},NN0826:e=>{const{normalize:t}=e;return t(["Saved to Camera Roll"])},NN0827:e=>{const{normalize:t}=e;return t(["Continue"])},NN0828:e=>{const{normalize:t}=e;return t(["Are you sure to delete the account?"])},NN0829:e=>{const{normalize:t}=e;return t(["Once you submit, this account will be <red>deleted permanently</red>? "])},NN0830:e=>{const{normalize:t}=e;return t(["Please note that the following will also be deleted and cannot be undone:"])},NN0831:e=>{const{normalize:t}=e;return t(["． All the designs and folders you've created"])},NN0832:e=>{const{normalize:t}=e;return t(["． All the picture and materials you've uploaded"])},NN0833:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(['To continue, please type "',n(r("delete")),'" in the follwoing field..'])},NN0834:e=>{const{normalize:t}=e;return t(["Browser Recommendation"])},NN0835:e=>{const{normalize:t}=e;return t(["For the best user experience, we suggest that you use other browsers such as Google Chrome or Microsoft Edge."])},NN0836:e=>{const{normalize:t}=e;return t(["Download Google Chrome"])},NN0837:e=>{const{normalize:t}=e;return t(["Download Microsoft Edge"])},NN0838:e=>{const{normalize:t}=e;return t(["Okay, got it!"])},NN0839:e=>{const{normalize:t}=e;return t(["Save this page"])},NN0840:e=>{const{normalize:t}=e;return t(["Save all pages"])},NN0841:e=>{const{normalize:t}=e;return t(["Save in other format"])},NN0842:e=>{const{normalize:t}=e;return t(["Text effects for attention-grabbing"])},NN0843:e=>{const{normalize:t}=e;return t(["Apply text effects to make your designs more memorable & engaging. "])},NN0844:e=>{const{normalize:t}=e;return t(["Compelling collection of BG images"])},NN0845:e=>{const{normalize:t}=e;return t(["Curated BG images to set tone & create visual impact for your design."])},NN0846:e=>{const{normalize:t}=e;return t(["Home"])},NN0847:e=>{const{normalize:t}=e;return t(["Colorful love"])},NN0848:e=>{const{normalize:t}=e;return t(["Cozy heart"])},NN0849:e=>{const{normalize:t}=e;return t(["Color-variable"])},NN0850:e=>{const{normalize:t}=e;return t(["Colorful Gummy"])},NN0851:e=>{const{normalize:t}=e;return t(["Leaves"])},NN0852:e=>{const{normalize:t}=e;return t(["Creamy floral"])},NN0853:e=>{const{normalize:t}=e;return t(["Colorful floral"])},NN0854:e=>{const{normalize:t}=e;return t(["Color-variable floral"])},NN0855:e=>{const{normalize:t}=e;return t(["Retro floral"])},NN0856:e=>{const{normalize:t}=e;return t(["Color-variable"])},NN0857:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/us-privacy-policy/"])},NN0858:e=>{const{normalize:t}=e;return t(["https://blog.vivipic.com/us-terms-of-use/"])},NN0859:e=>{const{normalize:t}=e;return t(["Want to design better and faster?"])},NN0860:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Something went wrong. (",n(r("feature")),"-error code#",n(r("errorCode")),")"])},NN0861:e=>{const{normalize:t}=e;return t(["Reload"])},NN0862:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Copy ",n(r("item"))])},NN0863:e=>{const{normalize:t}=e;return t(["Design URL"])},NN0864:e=>{const{normalize:t}=e;return t(["Skippity Paps"])},NN0865:e=>{const{normalize:t}=e;return t(["Bun"])},NN0866:e=>{const{normalize:t}=e;return t(["Please screenshot and DM us on Instagram."])},NN0867:e=>{const{normalize:t}=e;return t(["Custom Design"])},NN0868:e=>{const{normalize:t}=e;return t(["Fill"])},NN0869:e=>{const{normalize:t}=e;return t(["Custom"])},NN0870:e=>{const{normalize:t}=e;return t(["Patterns"])},NN0871:e=>{const{normalize:t}=e;return t(["Custom image"])},NN0872:e=>{const{normalize:t}=e;return t(["Move"])},NN0873:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Click ",n(r("upload"))," or Drag & drop photos here"])},NN0874:e=>{const{normalize:t}=e;return t(["Playful Bear"])},NN0875:e=>{const{normalize:t}=e;return t(["Multicolor Bear"])},NN0876:e=>{const{normalize:t}=e;return t(["Cute Kitty"])},NN0877:e=>{const{normalize:t}=e;return t(["Multicolor Kitty"])},NN0878:e=>{const{normalize:t}=e;return t(["Cute Bunny"])},NN0879:e=>{const{normalize:t}=e;return t(["Multicolor Bunny"])},NN0880:e=>{const{normalize:t}=e;return t(["Puppy"])},NN0881:e=>{const{normalize:t}=e;return t(["Multicolor Puppy"])},NN0882:e=>{const{normalize:t}=e;return t(["Multicolor Stars"])},NN0883:e=>{const{normalize:t}=e;return t(["Baby Toys"])},NN0884:e=>{const{normalize:t}=e;return t(["Playful bubble"])},NN0885:e=>{const{normalize:t}=e;return t(["Speech bubble"])},NN0886:e=>{const{normalize:t}=e;return t(["Tail shift"])},NN0887:e=>{const{normalize:t}=e;return t(["Tail position"])},NN0888:e=>{const{normalize:t}=e;return t(["Moving distance"])},NN0889:e=>{const{normalize:t}=e;return t(["Save to Camera Roll"])},NN0890:e=>{const{normalize:t}=e;return t(["Inside color"])},NN0891:e=>{const{normalize:t}=e;return t(["Outside color"])},NN0892:e=>{const{normalize:t}=e;return t(["Inside stroke"])},NN0893:e=>{const{normalize:t}=e;return t(["Outside stroke"])},NN0894:e=>{const{normalize:t}=e;return t(["Stroke"])},NN0895:e=>{const{normalize:t}=e;return t(["Single Color Washi Tape"])},NN0896:e=>{const{normalize:t}=e;return t(["Dot Washi Tape"])},NN0897:e=>{const{normalize:t}=e;return t(["Striped Washi Tape"])},NN0898:e=>{const{normalize:t}=e;return t(["Grid Washi Tape"])},NN0899:e=>{const{normalize:t}=e;return t(["Overlay"])},NN0900:e=>{const{normalize:t}=e;return t(["Birthday Flag"])},NN0901:e=>{const{normalize:t}=e;return t(["Birthday Flag 2"])},NN0902:e=>{const{normalize:t}=e;return t(["Party Flag"])},NN0903:e=>{const{normalize:t}=e;return t(["Party Flag 2"])},STK0001:e=>{const{normalize:t}=e;return t(["Add a text"])},STK0002:e=>{const{normalize:t}=e;return t(["Tap to copy"])},STK0003:e=>{const{normalize:t}=e;return t(["Press and hold to share"])},STK0004:e=>{const{normalize:t}=e;return t(["Save"])},STK0005:e=>{const{normalize:t}=e;return t(["Story"])},STK0006:e=>{const{normalize:t}=e;return t(["Insert"])},STK0007:e=>{const{normalize:t}=e;return t(["Select"])},STK0008:e=>{const{normalize:t}=e;return t(["Save this design?"])},STK0009:e=>{const{normalize:t}=e;return t(['You can find the saved design in "My designs" on the top right corner of our app.'])},STK0010:e=>{const{normalize:t}=e;return t(["Auto-save and never ask again."])},STK0011:e=>{const{normalize:t}=e;return t(["Don't save"])},STK0012:e=>{const{normalize:t}=e;return t(["Auto-save designs without asking"])},STK0013:e=>{const{normalize:t}=e;return t(["Delete design"])},STK0014:e=>{const{normalize:t}=e;return t(["Are you sure you want to delete this design?"])},STK0015:e=>{const{normalize:t}=e;return t(["Select all"])},STK0016:e=>{const{normalize:t}=e;return t(["Unselect all"])},STK0017:e=>{const{normalize:t}=e;return t(["Notification"])},STK0018:e=>{const{normalize:t}=e;return t(["No content in the editing area. <newline>Please add content before copying."])},STK0019:e=>{const{normalize:t}=e;return t(["Okay!"])},STK0020:e=>{const{normalize:t}=e;return t(["No content in my designs"])},STK0021:e=>{const{normalize:t}=e;return t(['You can save the edited designs to "My Designs".'])},STK0022:e=>{const{normalize:t}=e;return t(["No photo in the frame, please add a photo before copying."])},STK0023:e=>{const{normalize:t}=e;return t(["Okay!"])},STK0024:e=>{const{normalize:t}=e;return t(["Reminder"])},STK0025:e=>{const{normalize:t}=e;return t(["Subscription"])},STK0026:e=>{const{normalize:t}=e;return t(["Billed monthly"])},STK0027:e=>{const{normalize:t}=e;return t(["Billed yearly"])},STK0028:e=>{const{normalize:t}=e;return t(["Your plan"])},STK0029:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("privacyPolicy"))," & ",n(r("termOfUse"))])},STK0030:e=>{const{normalize:t}=e;return t(["Privacy Policy"])},STK0031:e=>{const{normalize:t}=e;return t(["Terms of Use"])},STK0032:e=>{const{normalize:t}=e;return t(["iOS16: Paste to Instagram"])},STK0033:e=>{const{normalize:t}=e;return t(["iOS 16: How to paste to Instagram? "])},STK0034:e=>{const{normalize:t}=e;return t(["After the system is updated to iOS 16, the process of pasting to Instagram story is quite different."])},STK0035:e=>{const{normalize:t}=e;return t(["Go to Tutorial "])},STK0036:e=>{const{normalize:t}=e;return t(["Never show this message again."])},STK0037:e=>{const{normalize:t}=e;return t(["Free stickers, texts, and background"])},STK0038:e=>{const{normalize:t}=e;return t(["Advanced text effects"])},STK0039:e=>{const{normalize:t}=e;return t(["Premium frames"])},STK0040:e=>{const{normalize:t}=e;return t(["Exclusive stickers & texts"])},STK0041:e=>{const{normalize:t}=e;return t(["Premium background"])},STK0042:e=>{const{normalize:t}=e;return t(["What’s included"])},STK0043:e=>{const{normalize:t}=e;return t(["Features"])},STK0044:e=>{const{normalize:t}=e;return t(["FREE"])},STK0045:e=>{const{normalize:t}=e;return t(["Restore Purchase"])},STK0046:e=>{const{normalize:t}=e;return t(["Try free & Subscribe"])},STK0047:e=>{const{normalize:t}=e;return t(["Subscribe"])},STK0048:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("day"))," Day Free Trial"])},STK0049:e=>{const{normalize:t}=e;return t(["Creative Frames"])},STK0050:e=>{const{normalize:t}=e;return t(["Premium Font Collections"])},STK0051:e=>{const{normalize:t}=e;return t(["PRO Sticker Library"])},STK0052:e=>{const{normalize:t}=e;return t(["https://vivisticker.com/us/privacy-policy/"])},STK0053:e=>{const{normalize:t}=e;return t(["https://vivisticker.com/us/terms-of-use/"])},STK0054:e=>{const{normalize:t}=e;return t(["Congrats! Vivisticker Pro opens up endless possibilities for creating visual content. Better and faster. We hope you enjoy it!"])},STK0055:e=>{const{normalize:t}=e;return t(["Get Started Now"])},STK0056:e=>{const{normalize:t}=e;return t(["Payment will auto-renew for next subscription period."])},STK0057:e=>{const{normalize:t}=e;return t(["After 3-day free trial, payment will be automatically initiated."])},STK0058:e=>{const{normalize:t}=e;return t(["Default emoji"])},STK0059:e=>{const{normalize:t}=e;return t(["Face Cutout"])},STK0060:e=>{const{normalize:t}=e;return t(["BG Remover"])},STK0061:e=>{const{normalize:t}=e;return t(["Instantly remove background from photo."])},STK0062:e=>{const{normalize:t}=e;return t(["Get a big head cutout of human or pet."])},STK0063:e=>{const{normalize:t}=e;return t(["Post"])},STK0064:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Create ",n(r("type"))])},STK0065:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Add all pages (",n(r("num"))," pages)"])},STK0066:e=>{const{normalize:t}=e;return t(["Choose a background"])},STK0067:e=>{const{normalize:t}=e;return t(["Photo"])},STK0068:e=>{const{normalize:t}=e;return t(["Blank"])},STK0069:e=>{const{normalize:t}=e;return t(["Stock"])},STK0070:e=>{const{normalize:t}=e;return t(["Pages"])},STK0071:e=>{const{normalize:t}=e;return t(["Exclusive Templates"])},STK0072:e=>{const{normalize:t}=e;return t(["Preview"])},STK0073:e=>{const{normalize:t}=e;return t(["Maximum Page Limit"])},STK0074:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Your file has reached its maximum of ",n(r("num"))," pages. To design more pages, please create a new file."])},STK0075:e=>{const{normalize:t}=e;return t(["You have reached the last page.<newline>Do you want a new page?"])},STK0076:e=>{const{normalize:t}=e;return t(["Add a new page"])},STK0077:e=>{const{normalize:t}=e;return t(["This page"])},STK0078:e=>{const{normalize:t}=e;return t(["Multi pages"])},STK0079:e=>{const{normalize:t}=e;return t(["Select up to ten pages to publish to Instagram."])},STK0080:e=>{const{normalize:t}=e;return t(["Saving to Camera Roll"])},STK0081:e=>{const{normalize:t}=e;return t(["Preparing..."])},STK0082:e=>{const{normalize:t}=e;return t(["No content in the editing area. <newline>Please add content before downloading."])},STK0083:e=>{const{normalize:t}=e;return t(["BG remover with outline & more effects"])},STK0084:e=>{const{normalize:t}=e;return t(["Saving to My designs..."])},STK0085:e=>{const{normalize:t,plural:n}=e;return n([t(["sticker"]),t(["stickers"])])},STK0086:e=>{const{normalize:t}=e;return t(["Unable to load photo - The design had a photo that has been deleted from your phone’s album."])},STK0087:e=>{const{normalize:t}=e;return t(["Problem reporting..."])},STK0088:e=>{const{normalize:t}=e;return t(["Report problem"])},STK0089:e=>{const{normalize:t}=e;return t(["Problem report"])},STK0090:e=>{const{normalize:t}=e;return t(["Your problem has been reported."])},STK0091:e=>{const{normalize:t}=e;return t(["Next to Fonts"])},STK0092:e=>{const{normalize:t}=e;return t(["Next to Backgrounds"])},STK0093:e=>{const{normalize:t}=e;return t(["Let's explore"])},SKT0001:e=>{const{normalize:t}=e;return t(["Editing"])},SKT0002:e=>{const{normalize:t}=e;return t(["Can edit"])},SKT0003:e=>{const{normalize:t}=e;return t(["Switching editor..."])},SKT0004:e=>{const{normalize:t}=e;return t(["Now you can start to edit."])},SKT0005:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Now ",n(r("editor"))," is editing."])},SKT0006:e=>{const{normalize:t}=e;return t(["Please refresh the page."])},SKT0007:e=>{const{normalize:t}=e;return t(["You have been idle for more than an hour,<br>please refresh the page."])},SKT0008:e=>{const{normalize:t}=e;return t(["Start to edit ?"])},SKT0009:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("editor"))," is currently editing the design, please confirm whether to switch editors."])},SKT0010:e=>{const{normalize:t}=e;return t(["Edit request"])},SKT0011:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("requester"))," has sent you an edit request, do you agree to switch editors?"])},SKT0012:e=>{const{normalize:t}=e;return t(["Agree"])},SKT0013:e=>{const{normalize:t}=e;return t(["Disagree"])},SKT0014:e=>{const{normalize:t}=e;return t(["Edit request has been sent."])},SKT0015:e=>{const{normalize:t}=e;return t(["Waiting for editor's permission, please wait..."])},SKT0016:e=>{const{normalize:t}=e;return t(["Request failed"])},SKT0017:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("editor"))," is currently editing the design, please try again later."])},SKT0018:e=>{const{normalize:t}=e;return t(["Start to edit"])},SKT0019:e=>{const{normalize:t}=e;return t(["Cannot find the design"])},SHR0001:e=>{const{normalize:t}=e;return t(["Present Type"])},SHR0002:e=>{const{normalize:t}=e;return t(["Single Page View"])},SHR0003:e=>{const{normalize:t}=e;return t(["Flipbook Preview"])},SHR0004:e=>{const{normalize:t}=e;return t(["Web Preview"])},SHR0005:e=>{const{normalize:t}=e;return t(["Present"])},SHR0006:e=>{const{normalize:t}=e;return t(["Share your design"])},SHR0007:e=>{const{normalize:t}=e;return t(["Collaborators need a Vivipic account to review this design."])},SHR0008:e=>{const{normalize:t}=e;return t(["Enter email address..."])},SHR0009:e=>{const{normalize:t}=e;return t(["Invite"])},SHR0010:e=>{const{normalize:t}=e;return t(["Can view"])},SHR0011:e=>{const{normalize:t}=e;return t(["Can access"])},SHR0012:e=>{const{normalize:t}=e;return t(["Anyone with the link"])},SHR0013:e=>{const{normalize:t}=e;return t(["Only people invited to this file"])},SHR0014:e=>{const{normalize:t}=e;return t(["The mail address you entered was wrong."])},SHR0015:e=>{const{normalize:t}=e;return t(["Owner"])},SHR0016:e=>{const{normalize:t}=e;return t(["Copy link"])},SHR0017:e=>{const{normalize:t}=e;return t(["Edit and share the design"])},SHR0018:e=>{const{normalize:t}=e;return t(["View the design without editing it"])},SHR0019:e=>{const{normalize:t}=e;return t(["Remove"])},SHR0020:e=>{const{normalize:t}=e;return t(["You need access"])},SHR0021:e=>{const{normalize:t}=e;return t(["The owner has changed the link access. You can ask for access, or switch to an account with access."])},SHR0022:e=>{const{normalize:t}=e;return t(["Created with"])},SHR0023:e=>{const{normalize:t}=e;return t(["Zoom in"])},SHR0024:e=>{const{normalize:t}=e;return t(["Exit"])}},s=n(54679);const a=(0,s.o)({locale:"us",fallbackLocale:"us",messages:{us:o,tw:i,jp:r},globalInjection:!0,legacy:!0,postTranslation:e=>"string"===typeof e?e.replace(/<blue>/g,'<span class="text-blue-1">').replace(/<red>/g,'<span class="text-red">').replace(/(<\/blue>|<\/red>)/g,"</span>").replace(/<newline>/g,"<br/ > "):e});var l=a},3806:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(60410);function i(e){return"object"===typeof e&&!!e&&(0,r.isEqual)((0,r.intersection)(["width","height","preview","urls"],Object.keys(e)),["width","height","preview","urls"])&&(!!e.id||!!e.assetIndex)}},28253:function(e,t,n){"use strict";n.d(t,{EE:function(){return g},KS:function(){return f},LB:function(){return h},Q:function(){return u},Sr:function(){return c},eg:function(){return a},fy:function(){return l},iX:function(){return p},lJ:function(){return d}});var r=n(6295),i=Object.defineProperty,o=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s=(e,t,n)=>(o(e,"symbol"!==typeof t?t+"":t,n),n);const a=["top","right","bottom","left"];function l(e){return e&&e.name&&["square-borderless","rounded-borderless","square-hollow","rounded-hollow","square-both","rounded-both"].includes(e.name)}function c(e){return e&&e.name&&["speech-bubble","speech-bubble-triangle"].includes(e.name)}function d(e){return e&&e.name&&"underline"===e.name}function u(e){return e&&e.name&&["gooey"].includes(e.name)}function g(e){return e&&e.name&&r.G.includes(e.name)}function p(e){return e&&!!e.name&&"none"!==e.name}function h(e){return e&&!!e.name&&!["none","custom-fill-img"].includes(e.name)}class m{constructor(){s(this,"textEffect"),s(this,"textBg"),s(this,"textShape"),s(this,"textFill"),s(this,"scale"),s(this,"writingMode")}}const y=new m,f=Object.keys(y)},865:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var r=(e=>(e["none"]="none",e["shadow"]="shadow",e["imageMatched"]="imageMatched",e["frame"]="frame",e["floating"]="floating",e["blur"]="blur",e))(r||{})},94733:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const r="1.0.8"},35319:function(e,t,n){"use strict";n.d(t,{Z:function(){return Tl}});var r=n(29651),i=n(819),o=n(41463);const s=(0,r._)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),a=(0,r._)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),l=(0,r._)("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap",rel:"stylesheet"},null,-1),c=(0,r._)("link",{href:"https://fonts.googleapis.com/css?family=Poppins:400,600,700",rel:"stylesheet",type:"text/css"},null,-1),d={class:"main-content"},u={class:"main-content__router-view"},g={class:"popup-area"},p={key:1,class:"modal-container"},h=["innerHTML"],m=["innerHTML"];function y(e,t,n,y,f,b){const v=(0,r.up)("metainfo"),w=(0,r.up)("router-view"),N=(0,r.up)("home-footer-tabs"),S=(0,r.up)("popup"),x=(0,r.up)("res-info"),P=(0,r.up)("debug-tool"),I=(0,r.up)("modal-card"),_=(0,r.up)("notifications");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(v,null,{title:(0,r.w5)((({content:t})=>[(0,r.Uk)((0,i.zw)(t?`${t}`:`${e.$t("SE0001")}`),1)])),_:1}),(0,r._)("div",{id:"app",style:(0,i.j5)(e.appStyles())},[s,a,l,c,(0,r._)("div",d,[(0,r._)("div",u,[(0,r.Wm)(w)]),e.showHomeFooterTabs?((0,r.wg)(),(0,r.j4)(N,{key:0})):(0,r.kq)("",!0)]),(0,r._)("div",g,[(0,r.Wm)(S),(0,r.wy)((0,r.Wm)(x,{info:e.currSelectedResInfo,onBlur:t[0]||(t[0]=t=>e.setCurrSelectedResInfo()),tabindex:"0"},null,8,["info"]),[[o.F8,e.currSelectedResInfo.type]])]),!e.inScreenshotPreview&&e.showAllAdminTool?((0,r.wg)(),(0,r.j4)(P,{key:0})):(0,r.kq)("",!0),e.isModalOpen?((0,r.wg)(),(0,r.iD)("div",p,[(0,r.Wm)(I)])):(0,r.kq)("",!0),(0,r.Wm)(_,{group:"copy",position:"top center",style:(0,i.j5)(e.notificationStyles()),width:"300px",max:2,duration:2e3},{body:(0,r.w5)((({item:e})=>[(0,r._)("div",{class:"notification copy",innerHTML:e.text},null,8,h)])),_:1},8,["style"]),(0,r.Wm)(_,{group:"error",position:"top center",style:(0,i.j5)(e.notificationStyles()),width:"300px",max:1,duration:5e3},{body:(0,r.w5)((({item:e})=>[(0,r._)("div",{class:"notification error",innerHTML:e.text},null,8,m)])),_:1},8,["style"])],4)],64)}const f={class:"fps"},b={key:0,class:"fps-graph"},v={class:"fps-graph__valleys"},w={class:"fps__value"},N={key:0};function S(e,t,n,o,s,a){return(0,r.wg)(),(0,r.iD)("div",f,[e.pause?((0,r.wg)(),(0,r.iD)("div",b,[((0,r.wg)(),(0,r.iD)("svg",(0,r.dG)({class:"fps-graph__svg"},e.graph.attrs,{ref:"svg"}),[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.graph.content,((e,t)=>((0,r.wg)(),(0,r.j4)((0,r.LL)(e.tag),(0,r.dG)({key:`graph-${t}`},e.attrs),null,16)))),128))],16)),(0,r._)("div",v,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.valleys,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.text,style:(0,i.j5)({color:e.color})},(0,i.zw)(e.text),5)))),128))])])):(0,r.kq)("",!0),(0,r._)("div",w,[(0,r._)("span",{onClick:t[0]||(t[0]=(...t)=>e.showGraph&&e.showGraph(...t))},"FPS: "+(0,i.zw)(e.fps),1),-1!==e.jsHeapSize?((0,r.wg)(),(0,r.iD)("span",N,"JS-Heap: "+(0,i.zw)(e.jsHeapSize)+"MB",1)):(0,r.kq)("",!0),(0,r._)("span",null,(0,i.zw)(`Current node env : ${e.currentEnv}`),1)])])}var x=n(26072),P=n(35426),I=n(60410);class _{constructor(e){this.duration=0,this.start=-1,this.text="",this.color="",this.path={},this.min=e}process(e,t,n){const r=this.start+this.duration;this.text=`min: ${this.min}, duration: ${this.duration/10}s`,this.color=["red","orange","green","purple"][t],this.path=new P.y$(new P.E9(this.start,e)),(0,I.range)(this.start,r).forEach((t=>{this.path.L(new P.E9(t,e-n[t]))})),this.path.L(new P.E9(r,e))}}var k=(0,r.aZ)({name:"DebugTool",components:{MobilePropsToggle:x.Z},data(){return{historySize:3e4,history1s:[],historyLong:[],fps:0,pause:!1,graph:{},valleys:[],jsHeapSize:0,currentEnv:"production"}},computed:{},mounted(){this.showFps()},methods:{showFps(){window.requestAnimationFrame((()=>{var e,t;const n=performance.now();while(this.history1s.length>0&&this.history1s[0]<=n-1e3)this.history1s.shift();this.history1s.push(n),this.fps=this.history1s.length;while(this.historyLong.length>0&&this.historyLong[0]<=n-this.historySize)this.historyLong.shift();this.historyLong.push(n),this.jsHeapSize=parseInt(""+(null!=(t=null==(e=performance.memory)?void 0:e.usedJSHeapSize)?t:-1e6)/1e6),this.showFps()}))},showGraph(){if(this.pause=!this.pause,!this.pause)return;const{historyLong:e}=this,t=performance.now(),n=(0,I.range)(291).reverse().map((n=>(0,I.filter)(e,(e=>t-100*n-1e3<e&&e<t-100*n)).length)),r=Math.max(...n),i=new P.y$(new P.E9(0,r));n.forEach(((e,t)=>i.L(new P.E9(t,r-e)))),i.L(new P.E9(291,r)),this.valleys=[];let o=0;while(o<n.length){const e=new _(r);while(o<n.length&&n[o]<r-10)-1===e.start&&(e.start=o),e.min=Math.min(e.min,n[o]),e.duration++,o++;e.duration>3&&(e.process(r,this.valleys.length%4,n),this.valleys.push(e)),o++}const s=this.valleys.map((e=>({tag:"path",attrs:{style:`fill: ${e.color};`,d:e.path.result()}}))),a=(0,I.range)(0,r,10).map((e=>({tag:"line",attrs:{style:"stroke: black; stroke-width: 0.3",x1:0,y1:r-e,x2:291,y2:r-e}})));this.graph={attrs:{viewBox:`0 0 291 ${r}`,width:"100%"},content:[{tag:"path",attrs:{style:"fill: #4EABE6;",d:i.result()}},...s,...a]}}}}),Z=n(53372);const C=(0,Z.Z)(k,[["render",S],["__scopeId","data-v-0b0fa1ee"],["__file","DebugTool.vue"]]);var z=C;const T=["onClick"],L=["onClick"],E=["onClick"],D=["onClick"];function O(e,t,n,o,s,a){const l=(0,r.up)("svg-icon"),c=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",{class:"footer-tabs",style:(0,i.j5)(o.footerTabsStyles)},[(0,r.Wm)(c,{to:"/",custom:""},{default:(0,r.w5)((({navigate:t,isExactActive:n})=>[(0,r._)("div",{class:"footer-tabs__item",onClick:t},[(0,r.Wm)(l,{class:"click-disabled",iconName:n?"home-tap":"home",iconColor:n?"blue-1":"gray-2",iconWidth:"22px"},null,8,["iconName","iconColor"]),(0,r._)("span",{class:(0,i.C_)(["body-XXS no-wrap click-disabled",n?"text-blue-1":"text-gray-2"])},(0,i.zw)(e.$t("NN0846")),3)],8,T)])),_:1}),(0,r.Wm)(c,{to:"/templates",custom:""},{default:(0,r.w5)((({navigate:t,isExactActive:n})=>[(0,r._)("div",{class:"footer-tabs__item",onClick:t},[(0,r.Wm)(l,{class:"click-disabled",iconName:n?"template-tap":"template",iconColor:n?"blue-1":"gray-2",iconWidth:"22px"},null,8,["iconName","iconColor"]),(0,r._)("span",{class:(0,i.C_)(["body-XXS no-wrap click-disabled",n?"text-blue-1":"text-gray-2"])},(0,i.zw)(e.$tc("NN0001",1)),3)],8,L)])),_:1}),(0,r.Wm)(o["BtnNewDesign"],{class:"footer-tabs__plus"},{default:(0,r.w5)((e=>[(0,r.Wm)(l,{iconName:"insert-cross",iconColor:"blue-1",iconWidth:"56px",onClick:e.openPopup},null,8,["onClick"])])),_:1}),(0,r.Wm)(c,{to:"/mydesign",custom:""},{default:(0,r.w5)((({navigate:t})=>[(0,r._)("div",{class:"footer-tabs__item",onClick:t},[(0,r.Wm)(l,{class:"click-disabled",iconName:"MyDesign"===o.activeRouteName?"folder-tap":"folder",iconColor:"MyDesign"===o.activeRouteName?"blue-1":"gray-2",iconWidth:"22px"},null,8,["iconName","iconColor"]),(0,r._)("span",{class:(0,i.C_)(["body-XXS no-wrap click-disabled","MyDesign"===o.activeRouteName?"text-blue-1":"text-gray-2"])},(0,i.zw)(e.$t("NN0080")),3)],8,E)])),_:1}),(0,r.Wm)(c,{to:"/settings",custom:""},{default:(0,r.w5)((({navigate:t})=>[(0,r._)("div",{class:"footer-tabs__item",onClick:t},[(0,r.Wm)(l,{class:"click-disabled",iconName:"menu",iconColor:"Settings"===o.activeRouteName?"blue-1":"gray-2",iconWidth:"22px"},null,8,["iconColor"]),(0,r._)("span",{class:(0,i.C_)(["body-XXS no-wrap click-disabled","Settings"===o.activeRouteName?"text-blue-1":"text-gray-2"])},(0,i.zw)(e.$t("NN0082")),3)],8,D)])),_:1})],4)}var M=n(9897),A=n(28339),$=n(38058),F=(0,r.aZ)({__name:"HomeFooterTabs",setup(e,{expose:t}){t();const n=(0,A.yj)(),i=(0,$.oR)(),o=(0,r.Fl)((()=>i.getters["webView/getUserInfo"])),s=(0,r.Fl)((()=>({paddingBottom:`${o.value.homeIndicatorHeight}px`}))),a=(0,r.Fl)((()=>n.name)),l={route:n,store:i,userInfo:o,footerTabsStyles:s,activeRouteName:a,BtnNewDesign:M.Z,computed:r.Fl,get useRoute(){return A.yj},get useStore(){return $.oR}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});const j=(0,Z.Z)(F,[["render",O],["__scopeId","data-v-1250d178"],["__file","HomeFooterTabs.vue"]]);var B=j;const R={class:"modal-card"},H={class:"text-H6 text-gray-2 mb-30"},U={class:"modal-card__content body-SM text-gray-2 mb-30"},W={class:"modal-card__button"},V={class:"modal-card__close"};function G(e,t,n,s,a,l){const c=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",R,[(0,r._)("div",H,[(0,r._)("span",null,(0,i.zw)(e.modalInfo.title),1)]),(0,r._)("div",U,[e.pending?(0,r.kq)("",!0):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(e.modalInfo.content,(e=>((0,r.wg)(),(0,r.iD)("span",{key:e,onKeydown:[t[0]||(t[0]=(0,o.D2)((0,o.iM)((()=>{}),["ctrl","exact","stop"]),["c"])),t[1]||(t[1]=(0,o.D2)((0,o.iM)((()=>{}),["meta","exact","stop"]),["c"]))]},(0,i.zw)(e),33)))),128)),e.pending?((0,r.wg)(),(0,r.j4)(c,{key:1,iconName:"loading",iconColor:"gray-2",iconWidth:"60px"})):(0,r.kq)("",!0)]),e.pending?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("div",W,[(0,r._)("button",{class:(0,i.C_)(["btn-primary-mid full-width",e.modalInfo.confirmButton.class]),style:(0,i.j5)(e.modalInfo.confirmButton.style),onClick:t[2]||(t[2]=t=>e.confirmAction())},(0,i.zw)(e.modalInfo.confirmButton.msg||e.$t("NN0358")),7),e.modalInfo.cancelButton.msg?((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,i.C_)(["btn-primary-mid full-width",e.modalInfo.cancelButton.class]),style:(0,i.j5)(e.modalInfo.cancelButton.style),onClick:t[3]||(t[3]=t=>e.cancelAction())},(0,i.zw)(e.modalInfo.cancelButton.msg||e.$t("NN0359")),7)):(0,r.kq)("",!0)]),(0,r._)("div",V,[(0,r.Wm)(c,{class:"pointer",iconName:"close",iconWidth:"20px",iconColor:"gray-2",onClick:t[4]||(t[4]=t=>e.closePopup())})])],64))])}var q=n(98824),K=Object.defineProperty,Y=Object.defineProperties,X=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,te=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ne=(e,t)=>{for(var n in t||(t={}))J.call(t,n)&&te(e,n,t[n]);if(Q)for(var n of Q(t))ee.call(t,n)&&te(e,n,t[n]);return e},re=(e,t)=>Y(e,X(t)),ie=(0,r.aZ)({emits:[],name:"ModalCard",computed:re(ne({},(0,$.Se)({_modalInfo:"modal/getModalInfo",pending:"modal/getIsPending"})),{modalInfo(){return this._modalInfo}}),methods:{closePopup(){q.Z.setIsModalOpen(!1),q.Z.clearModalInfo()},confirmAction(){this.modalInfo.confirmButton.action(),this.closePopup()},cancelAction(){this.modalInfo.cancelButton.action(),this.closePopup()}}});const oe=(0,Z.Z)(ie,[["render",G],["__scopeId","data-v-9dc7662c"],["__file","ModalCard.vue"]]);var se=oe;const ae={class:"res-info"},le={key:0,class:"res-info__desc"},ce=["href"],de=["href"],ue={key:1,class:"pl-5"},ge=["href"],pe={class:"px-5"},he={class:"px-5"},me={key:1,class:"res-info__tags"},ye={class:"pr-5"},fe={key:0},be=["onClick"],ve={key:2,class:"res-info__desc"},we={class:"pr-5"},Ne=["href"],Se={key:1};function xe(e,t,n,s,a,l){const c=(0,r.up)("i18n-t");return(0,r.wg)(),(0,r.iD)("div",ae,[e.info.userName||e.info.vendor?((0,r.wg)(),(0,r.iD)("strong",le,["photo"===e.info.type?((0,r.wg)(),(0,r.j4)(c,{key:0,keypath:"NN0364",tag:"span"},{author:(0,r.w5)((()=>[e.info.userLink?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"res-info__link pointer",href:e.userLink,target:"_blank",rel:"nofollow noopener noreferrer",onMousedown:t[0]||(t[0]=(0,o.iM)((()=>{}),["prevent"]))},[(0,r._)("span",null,(0,i.zw)(e.info.userName),1)],40,ce)):(0,r.kq)("",!0)])),site:(0,r.w5)((()=>[e.info.vendor&&e.vendorLink?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"res-info__link pointer",href:e.vendorLink,target:"_blank",rel:"nofollow noopener noreferrer",onMousedown:t[1]||(t[1]=(0,o.iM)((()=>{}),["prevent"]))},(0,i.zw)(e.info.vendor),41,de)):((0,r.wg)(),(0,r.iD)("span",ue,(0,i.zw)(e.info.vendor),1))])),_:1})):((0,r.wg)(),(0,r.j4)(c,{key:1,keypath:"NN0365",tag:"span"},{author:(0,r.w5)((()=>[e.info.userLink?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"res-info__link pointer",href:e.userLink,target:"_blank",rel:"nofollow noopener noreferrer",onMousedown:t[2]||(t[2]=(0,o.iM)((()=>{}),["prevent"]))},[(0,r._)("span",null,(0,i.zw)(e.info.userName),1),(0,r._)("span",null,(0,i.zw)(e.info.authorCompany?", "+e.info.authorCompany:""),1)],40,ge)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("span",pe,(0,i.zw)(" "+e.info.userName),1),(0,r._)("span",he,(0,i.zw)(e.info.authorCompany?", "+e.info.authorCompany:""),1)],64))])),_:1}))])):(0,r.kq)("",!0),e.info.tags&&e.info.tags.length?((0,r.wg)(),(0,r.iD)("div",me,[(0,r._)("span",ye,(0,i.zw)(e.$t("NN0366"))+":",1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.info.tags,((t,n)=>((0,r.wg)(),(0,r.iD)(r.HY,{key:t},[0!==n?((0,r.wg)(),(0,r.iD)("span",fe,(0,i.zw)(" "))):(0,r.kq)("",!0),(0,r._)("span",{class:"res-info__link __tag",onClick:n=>e.onTagClicked(t)},(0,i.zw)(t),9,be)],64)))),128))])):(0,r.kq)("",!0),e.info.licenseName?((0,r.wg)(),(0,r.iD)("strong",ve,[(0,r._)("span",we,(0,i.zw)(e.$t("NN0367"))+":",1),e.info.licenseLink?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"res-info__link __license pointer",href:e.info.licenseLink,target:"_blank",rel:"nofollow noopener noreferrer",onMousedown:t[3]||(t[3]=(0,o.iM)((()=>{}),["prevent"]))},(0,i.zw)(e.info.licenseName),41,Ne)):((0,r.wg)(),(0,r.iD)("span",Se,(0,i.zw)(e.info.licenseName),1))])):(0,r.kq)("",!0)])}var Pe=Object.defineProperty,Ie=Object.defineProperties,_e=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,ze=(e,t,n)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Te=(e,t)=>{for(var n in t||(t={}))Ze.call(t,n)&&ze(e,n,t[n]);if(ke)for(var n of ke(t))Ce.call(t,n)&&ze(e,n,t[n]);return e},Le=(e,t)=>Ie(e,_e(t)),Ee=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const De="unsplash";var Oe=(0,r.aZ)({emits:[],props:{info:{type:Object,required:!0}},computed:{vendorLink(){const{vendor:e}=this.info,{VUE_APP_UNSPLASH_APP_NAME:t}={NODE_ENV:"production",VUE_APP_BASE_URL:"https://apiv2.vivipic.com/",VUE_APP_I18N_FALLBACK_LOCALE:"us",VUE_APP_I18N_LOCALE:"us",VUE_APP_PEXELS_ACCESS_KEY:"563492ad6f917000010000015127aeffafd440fd8aff2407235209ec",VUE_APP_PEXELS_BASE_URL:"https://api.pexels.com/v1/",VUE_APP_SENTRY_DSN:"https://a8e90bb3d1504f749774c46a9bbe4894@o976922.ingest.sentry.io/5933371",VUE_APP_TOKEN:"eZB1CqRl52WQFAzFV3VG_dfBSs8HLu9WqYHcHYnCOeU",VUE_APP_UNSPLASH_ACCESS_KEY:"-7OObRotlL9UUXO4YspkINrFbbMEPSKkreEfWirPtX8",VUE_APP_UNSPLASH_APP_NAME:"nuDesign",VUE_APP_UNSPLASH_BASE_URL:"https://api.unsplash.com/",VUE_APP_UNSPLASH_Client_ID:"alan861117",VUE_APP_VERSION:"v0.1.11-beta",BASE_URL:"/"};switch(e){case"unsplash":return`https://unsplash.com/?utm_source=${t}&utm_medium=referral`;case"pexels":return"https://www.pexels.com/";default:return""}},userLink(){const{vendor:e,userLink:t}=this.info,{VUE_APP_UNSPLASH_APP_NAME:n}={NODE_ENV:"production",VUE_APP_BASE_URL:"https://apiv2.vivipic.com/",VUE_APP_I18N_FALLBACK_LOCALE:"us",VUE_APP_I18N_LOCALE:"us",VUE_APP_PEXELS_ACCESS_KEY:"563492ad6f917000010000015127aeffafd440fd8aff2407235209ec",VUE_APP_PEXELS_BASE_URL:"https://api.pexels.com/v1/",VUE_APP_SENTRY_DSN:"https://a8e90bb3d1504f749774c46a9bbe4894@o976922.ingest.sentry.io/5933371",VUE_APP_TOKEN:"eZB1CqRl52WQFAzFV3VG_dfBSs8HLu9WqYHcHYnCOeU",VUE_APP_UNSPLASH_ACCESS_KEY:"-7OObRotlL9UUXO4YspkINrFbbMEPSKkreEfWirPtX8",VUE_APP_UNSPLASH_APP_NAME:"nuDesign",VUE_APP_UNSPLASH_BASE_URL:"https://api.unsplash.com/",VUE_APP_UNSPLASH_Client_ID:"alan861117",VUE_APP_VERSION:"v0.1.11-beta",BASE_URL:"/"};switch(e){case"Unsplash":return`${t}?utm_source=${n}&utm_medium=referral`;default:return t}}},methods:Le(Te(Te({},(0,$.nv)("objects",["getTagContent"])),(0,$.OI)({setDropdown:"popup/SET_STATE",_setCurrSelectedResInfo:"SET_currSelectedResInfo"})),{onTagClicked(e){return Ee(this,null,(function*(){console.log(e),this._setCurrSelectedResInfo({});const t=e,{type:n}=this.info;switch(n){case"photo":yield this.$store.commit(`${De}/SET_STATE`,{keyword:t,list:[]}),this.$store.dispatch(`${De}/getPhotos`,{keyword:t});break;case"object":this.getTagContent({keyword:t});break;default:break}}))}})});const Me=(0,Z.Z)(Oe,[["render",xe],["__scopeId","data-v-4aba433a"],["__file","ResInfo.vue"]]);var Ae=Me;const $e={class:"popup bg-white"};function Fe(e,t,n,i,o,s){const a=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)("div",$e,[e.component?(0,r.wy)(((0,r.wg)(),(0,r.j4)((0,r.LL)(e.component),(0,r.dG)({key:0,updateOptions:e.sharedUpdateOptions,currPage:e.currPage},e.props,{onClose:e.close}),null,16,["updateOptions","currPage","onClose"])),[[a,e.vcoConfig]]):(0,r.kq)("",!0)])}const je={class:"popup-align bg-white"},Be={class:"popup-align__group"},Re=["onClick"],He={class:"ml-5 body-2"},Ue={key:0,class:"popup-align__hr"},We={key:1,class:"popup-align__group"},Ve=["onClick"],Ge={class:"ml-5 body-2"};function qe(e,t,n,o,s,a){const l=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",je,[(0,r._)("div",Be,[(0,r._)("div",null,[(0,r._)("span",null,(0,i.zw)(e.$t("NN0045")),1)]),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.alignDatas(),((t,n)=>((0,r.wg)(),(0,r.iD)("div",{class:"popup-align__item",key:`popup-${n}`,onClick:n=>e.MappingUtils.mappingIconAction(t.icon)},[(0,r.Wm)(l,{class:"pointer",iconName:t.icon,iconWidth:"18px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",He,(0,i.zw)(t.text),1)],8,Re)))),128))])]),e.layerNum>=3?((0,r.wg)(),(0,r.iD)("hr",Ue)):(0,r.kq)("",!0),e.layerNum>=3?((0,r.wg)(),(0,r.iD)("div",We,[(0,r._)("div",null,[(0,r._)("span",null,(0,i.zw)(e.$t("NN0219")),1)]),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.distributeDatas(),((t,n)=>((0,r.wg)(),(0,r.iD)("div",{class:"popup-align__item",key:`popup-${n}`,onClick:n=>e.MappingUtils.mappingIconAction(t.icon)},[(0,r.Wm)(l,{class:"pointer",iconName:t.icon,iconWidth:"16px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",Ge,(0,i.zw)(t.text),1)],8,Ve)))),128))])])):(0,r.kq)("",!0)])}var Ke=n(65144),Ye=Object.defineProperty,Xe=Object.defineProperties,Qe=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,nt=(e,t,n)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rt=(e,t)=>{for(var n in t||(t={}))et.call(t,n)&&nt(e,n,t[n]);if(Je)for(var n of Je(t))tt.call(t,n)&&nt(e,n,t[n]);return e},it=(e,t)=>Xe(e,Qe(t)),ot=(0,r.aZ)({emits:[],data(){return{MappingUtils:Ke.Z}},computed:it(rt({},(0,$.Se)({currSelectedInfo:"getCurrSelectedInfo"})),{layerNum(){return this.currSelectedInfo.layers.length}}),methods:{mappingIcons(e){return Ke.Z.mappingIconSet(e)},alignDatas(){const e=this.mappingIcons("align"),t=[`${this.$t("NN0046")}`,`${this.$t("NN0047")}`,`${this.$t("NN0048")}`,`${this.$t("NN0049")}`,`${this.$t("NN0050")}`,`${this.$t("NN0051")}`];return e.map(((e,n)=>({icon:e,text:t[n]})))},distributeDatas(){const e=this.mappingIcons("distribute"),t=[`${this.$t("NN0221")}`,`${this.$t("NN0222")}`];return e.map(((e,n)=>({icon:e,text:t[n]})))}}});const st=(0,Z.Z)(ot,[["render",qe],["__scopeId","data-v-191fdcdc"],["__file","PopupAlign.vue"]]);var at=st;const lt={class:"popup-window"},ct={class:"popup-del-acc"},dt={class:"popup-del-acc__title"},ut={class:"popup-del-acc__desc"},gt=["innerHTML"],pt={class:"popup-del-acc__desc--bold"},ht={class:"popup-del-acc__desc--bold"},mt={class:"popup-del-acc__buttons"};function yt(e,t,n,s,a,l){const c=(0,r.up)("svg-icon"),d=(0,r.up)("nubtn"),u=(0,r.up)("spinner"),g=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)("div",lt,[(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",ct,[(0,r.Wm)(c,{class:"popup-del-acc__close",iconName:"close",iconWidth:"20px",iconColor:"gray-2",onClick:e.closePopup},null,8,["onClick"]),(0,r._)("span",dt,(0,i.zw)(e.$t("NN0828")),1),(0,r._)("div",ut,[(0,r._)("div",{innerHTML:e.$t("NN0829")},null,8,gt),(0,r._)("div",null,(0,i.zw)(e.$t("NN0830")),1),(0,r._)("div",pt,(0,i.zw)(e.$t("NN0831")),1),(0,r._)("div",ht,(0,i.zw)(e.$t("NN0832")),1),(0,r._)("div",null,(0,i.zw)(e.$t("NN0833",{delete:e.$t("NN0034")})),1)]),(0,r.wy)((0,r._)("input",{class:"popup-del-acc__input","onUpdate:modelValue":t[0]||(t[0]=t=>e.userInput=t)},null,512),[[o.nr,e.userInput]]),(0,r._)("div",mt,[(0,r.Wm)(d,{theme:"secondary",size:"sm-full",onClick:e.closePopup},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0203")),1)])),_:1},8,["onClick"]),(0,r.Wm)(d,{theme:"danger",size:"sm-full",disabled:!e.allowDelete,onClick:e.deleteAccount},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0317")),1)])),_:1},8,["disabled","onClick"])])])),[[g,e.closePopup]]),e.loading?((0,r.wg)(),(0,r.j4)(u,{key:0})):(0,r.kq)("",!0)])}var ft=n(72869),bt=n(23931),vt=n(10298),wt=n.n(vt),Nt=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),St=(0,r.aZ)({directives:{clickOutside:wt().directive},emits:["close"],data(){return{loading:!1,userInput:""}},computed:{allowDelete(){return this.userInput===bt.Z.global.t("NN0034")}},methods:{deleteAccount(){return Nt(this,null,(function*(){this.loading=!0,yield ft.Z.deleteAccount(),window.location.href="/"}))},closePopup(){this.$emit("close")}}});const xt=(0,Z.Z)(St,[["render",yt],["__scopeId","data-v-6efe4731"],["__file","PopupDeleteAccount.vue"]]);var Pt=xt;const It=e=>((0,r.dD)("data-v-6dd1c965"),e=e(),(0,r.Cn)(),e),_t={class:"popup-file"},kt={key:0,class:"popup-file__profile"},Zt={class:"profile-text text-body-2"},Ct=It((()=>(0,r._)("hr",{class:"popup-file__hr"},null,-1))),zt=It((()=>(0,r._)("span",null,"匯入設計",-1))),Tt=[zt],Lt=It((()=>(0,r._)("span",null,"匯出設計",-1))),Et=[Lt],Dt=It((()=>(0,r._)("hr",{class:"popup-file__hr"},null,-1))),Ot={class:"popup-file__item"},Mt={class:"popup-file__item"},At={class:"text-gray-3"},$t=It((()=>(0,r._)("span",null,"AddTwentyPage",-1))),Ft=[$t],jt=It((()=>(0,r._)("span",null,"clearAllPagesContent",-1))),Bt=[jt],Rt=It((()=>(0,r._)("span",null,"clearAllPages",-1))),Ht=[Rt],Ut=It((()=>(0,r._)("span",null,"duplicatePageTwentyTimes",-1))),Wt=[Ut],Vt=It((()=>(0,r._)("span",null,"testError",-1))),Gt=[Vt],qt=It((()=>(0,r._)("span",null,"list all font 0~1000",-1))),Kt=[qt],Yt=It((()=>(0,r._)("span",null,"list all font 1000~2000",-1))),Xt=[Yt],Qt=It((()=>(0,r._)("span",null,"list all font 2000~3000",-1))),Jt=[Qt];function en(e,t,n,o,s,a){const l=(0,r.up)("avatar"),c=(0,r.up)("router-link"),d=(0,r.up)("svg-icon"),u=(0,r.up)("url");return(0,r.wg)(),(0,r.iD)("div",_t,[e.isLogin?((0,r.wg)(),(0,r.iD)("div",kt,[(0,r.Wm)(c,{class:"popup-file__option__link",to:"/settings/account",onClick:e.closePopup},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{class:"mr-10",textSize:14,avatarSize:35}),(0,r._)("div",Zt,[(0,r._)("div",null,(0,i.zw)(e.showUname),1)])])),_:1},8,["onClick"])])):(0,r.kq)("",!0),(0,r._)("div",{class:(0,i.C_)(["popup-file__item",{disabled:e.isFontLoading}]),onClick:t[0]||(t[0]=t=>e.save())},[(0,r._)("span",null,(0,i.zw)(e.$t("NN0009")),1)],2),(0,r._)("div",{class:"popup-file__item",onClick:t[1]||(t[1]=t=>e.newDesign())},[(0,r._)("span",null,(0,i.zw)(e.$tc("NN0072")),1)]),Ct,(0,r._)("div",{class:"popup-file__item",onClick:t[2]||(t[2]=t=>e.toggleBleed())},[(0,r._)("span",null,(0,i.zw)(e.hasBleed?`${e.$t("NN0779")}`:`${e.$t("NN0778")}`),1)]),(0,r._)("div",{class:"popup-file__item",onClick:t[3]||(t[3]=t=>e.togglerRuler())},[(0,r._)("span",null,(0,i.zw)(e.$t("NN0073")),1),e.isShownRuler?((0,r.wg)(),(0,r.j4)(d,{key:0,class:"pointer",iconName:"done",iconColor:"gray-2",iconWidth:"14px"})):(0,r.kq)("",!0)]),(0,r._)("div",{class:"popup-file__item",onClick:t[4]||(t[4]=t=>e.toggleGuideline())},[(0,r._)("span",null,(0,i.zw)(e.showGuideline?e.$t("NN0074"):e.$t("NN0361")),1)]),(0,r._)("div",{class:"popup-file__item",onClick:t[5]||(t[5]=t=>e.togglelockGuideline())},[(0,r._)("span",null,(0,i.zw)(e.lockGuideline?e.$t("NN0384"):e.$t("NN0383")),1)]),(0,r._)("div",{class:"popup-file__item",onClick:t[6]||(t[6]=t=>e.clearGuideline())},[(0,r._)("span",null,(0,i.zw)(e.$t("NN0075")),1)]),e.isAdmin?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("div",{class:"popup-file__item",onClick:t[7]||(t[7]=t=>e.importJSON())},Tt),(0,r._)("div",{class:"popup-file__item",onClick:t[8]||(t[8]=t=>e.exportJSON())},Et),(0,r._)("div",{class:"popup-file__item",onClick:t[9]||(t[9]=t=>e.toogleAdminView())},[(0,r._)("span",null,(0,i.zw)(e.enableAdminView?"隱藏管理員介面":"顯示管理員介面"),1)])],64)):(0,r.kq)("",!0),Dt,(0,r._)("div",Ot,[(0,r.Wm)(u,{url:e.$t("NN0791"),newTab:!0},{default:(0,r.w5)((()=>[(0,r._)("span",null,(0,i.zw)(e.$t("NN0790",{type:e.$tc("NN0793",1)})),1)])),_:1},8,["url"])]),(0,r._)("div",{class:"popup-file__item",onClick:t[10]||(t[10]=t=>e.onLogoutClicked())},[(0,r._)("span",null,(0,i.zw)(e.$tc("NN0167",2)),1)]),(0,r._)("div",Mt,[(0,r._)("span",At,"Version: "+(0,i.zw)(e.buildNumber),1)]),e.isAdmin?((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[(0,r._)("div",{class:"popup-file__item",onClick:t[11]||(t[11]=t=>e.addTwentyPage())},Ft),(0,r._)("div",{class:"popup-file__item",onClick:t[12]||(t[12]=t=>e.clearAllPagesContent())},Bt),(0,r._)("div",{class:"popup-file__item",onClick:t[13]||(t[13]=t=>e.clearAllPages())},Ht),(0,r._)("div",{class:"popup-file__item",onClick:t[14]||(t[14]=t=>e.duplicatePageTwentyTimes())},Wt),(0,r._)("div",{class:"popup-file__item",onClick:t[15]||(t[15]=t=>e.testError())},Gt),(0,r._)("div",{class:"popup-file__item",onClick:t[16]||(t[16]=t=>e.testAllFonts(0,1e3))},Kt),(0,r._)("div",{class:"popup-file__item",onClick:t[17]||(t[17]=t=>e.testAllFonts(1e3,2e3))},Xt),(0,r._)("div",{class:"popup-file__item",onClick:t[18]||(t[18]=t=>e.testAllFonts(2e3,3e3))},Jt)],64)):(0,r.kq)("",!0)])}var tn=n(18941),nn=n(46986),rn=n(89497),on=n(70118),sn=n(32905);class an{import(e){const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/json"),t.click(),t.addEventListener("change",(t=>{ln(t,e)}),!1)}export(){on.Z.deselect();const e="data:text/jsoncharset=utf-8,"+encodeURIComponent(JSON.stringify(rn.Z.getters.getPages)),t=document.createElement("a"),n="file";t.setAttribute("href",e),t.setAttribute("download",n+".json"),t.click()}exportFile(e){const t="data:text/jsoncharset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=document.createElement("a"),r="file";n.setAttribute("href",t),n.setAttribute("download",r+".json"),n.click()}importFont(e){const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept",".ttf,.ttc,.otf"),t.click(),t.addEventListener("change",e,!1)}}function ln(e,t){if(!e.target)return;const n=e.target.files[0];e.target.removeEventListener("change",ln,!1);const r=new FileReader;r.onload=e=>{const n=e.target;if(t)return void t(n.result);const r=JSON.parse(n.result),i=r.pages?r.pages:r;rn.Z.commit("SET_pages",sn.Z.newPages(i))},r.readAsText(n)}var cn=new an,dn=n(3665),un=n(53556),gn=n(89594),pn=n(77804),hn=n(52632),mn=n(80987),yn=Object.defineProperty,fn=Object.defineProperties,bn=Object.getOwnPropertyDescriptors,vn=Object.getOwnPropertySymbols,wn=Object.prototype.hasOwnProperty,Nn=Object.prototype.propertyIsEnumerable,Sn=(e,t,n)=>t in e?yn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xn=(e,t)=>{for(var n in t||(t={}))wn.call(t,n)&&Sn(e,n,t[n]);if(vn)for(var n of vn(t))Nn.call(t,n)&&Sn(e,n,t[n]);return e},Pn=(e,t)=>fn(e,bn(t)),In=(0,r.aZ)({emits:[],components:{Avatar:tn.Z,Url:nn.Z},data(){return{}},computed:Pn(xn(xn({},(0,$.rn)("user",["uname","enableAdminView"])),(0,$.Se)({isLogin:"user/isLogin",isAdmin:"user/isAdmin",account:"user/getAccount",isFontLoading:"text/getIsFontLoading",pagesLength:"getPagesLength",groupType:"getGroupType",hasBleed:"getHasBleed"})),{showGuideline(){return gn.Z.showGuideline},lockGuideline(){return gn.Z.lockGuideline},isShownRuler(){return gn.Z.showRuler},buildNumber(){const{VUE_APP_BUILD_NUMBER:e}={NODE_ENV:"production",VUE_APP_BASE_URL:"https://apiv2.vivipic.com/",VUE_APP_I18N_FALLBACK_LOCALE:"us",VUE_APP_I18N_LOCALE:"us",VUE_APP_PEXELS_ACCESS_KEY:"563492ad6f917000010000015127aeffafd440fd8aff2407235209ec",VUE_APP_PEXELS_BASE_URL:"https://api.pexels.com/v1/",VUE_APP_SENTRY_DSN:"https://a8e90bb3d1504f749774c46a9bbe4894@o976922.ingest.sentry.io/5933371",VUE_APP_TOKEN:"eZB1CqRl52WQFAzFV3VG_dfBSs8HLu9WqYHcHYnCOeU",VUE_APP_UNSPLASH_ACCESS_KEY:"-7OObRotlL9UUXO4YspkINrFbbMEPSKkreEfWirPtX8",VUE_APP_UNSPLASH_APP_NAME:"nuDesign",VUE_APP_UNSPLASH_BASE_URL:"https://api.unsplash.com/",VUE_APP_UNSPLASH_Client_ID:"alan861117",VUE_APP_VERSION:"v0.1.11-beta",BASE_URL:"/"};return e?`v.${e}`:"local"},showUname(){return this.uname.length>10?this.uname.substring(0,10).concat("..."):this.uname}}),methods:Pn(xn({},(0,$.OI)({setUserState:"user/SET_STATE"})),{closePopup(){un.Z.closePopup()},clearGuideline(){gn.Z.clearGuidelines(),hn.Z.record()},togglerRuler(){localStorage.setItem("showRuler",`${!gn.Z.showRuler}`),gn.Z.setShowRuler(!gn.Z.showRuler)},toggleGuideline(){gn.Z.setShowGuideline(!gn.Z.showGuideline)},togglelockGuideline(){gn.Z.setLockGuideline(!gn.Z.lockGuideline)},toggleBleed(){const e=!this.hasBleed;for(let t=0;t<this.pagesLength;t++)sn.Z.setIsEnableBleed(e,t);hn.Z.record()},newDesign(){const e=`${window.location.origin}${window.location.pathname}`;window.open(e),this.closePopup()},save(){pn.Z.save()},importJSON(){cn["import"]()},exportJSON(){cn["export"]()},toogleAdminView(){localStorage.setItem("enableAdminView",`${!this.enableAdminView}`),this.setUserState({enableAdminView:!this.enableAdminView})},addTwentyPage(){console.log("add twenty page"),sn.Z.addTwentyPages()},clearAllPagesContent(){sn.Z.clearAllPagesContent()},clearAllPages(){sn.Z.setPages([sn.Z.newPage({})])},duplicatePageTwentyTimes(){sn.Z.duplicatePage1(40)},testError(){throw new Error("test")},onLogoutClicked(){dn.Z.logout()},testAllFonts(e,t){return mn.Z.testAllFonts(e,t)}})});const _n=(0,Z.Z)(In,[["render",en],["__scopeId","data-v-6dd1c965"],["__file","PopupFile.vue"]]);var kn=_n;const Zn={class:"popup-flip"},Cn=["onClick"],zn={class:"ml-5 body-2"};function Tn(e,t,n,o,s,a){const l=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",Zn,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.popupDatas(),((t,n)=>((0,r.wg)(),(0,r.iD)("div",{class:"popup-flip__item",key:`popup-${n}`,onClick:n=>e.MappingUtils.mappingIconAction(t.icon)},[(0,r.Wm)(l,{class:"pointer",iconName:t.icon,iconWidth:"12px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",zn,(0,i.zw)(t.text),1)],8,Cn)))),128))])}var Ln=n(6400),En=n(75231),Dn=(0,r.aZ)({emits:[],data(){return{MappingUtils:Ke.Z,destoryCb:void 0}},mounted(){const e=En.ZP.getCurrConfig;if(e.type===Ln.F5.image){const t=document.getElementById(`nu-image-${e.id}__shadow`);t&&(t.classList.add("layer-flip"),this.destoryCb=()=>{t.classList.remove("layer-flip")})}},unmounted(){this.destoryCb&&this.destoryCb()},methods:{popupDatas(){const e=["flip-h","flip-v"],t=[`${this.$t("NN0053")}`,`${this.$t("NN0054")}`];return e.map(((n,r)=>({icon:e[r],text:t[r]})))}}});const On=(0,Z.Z)(Dn,[["render",Tn],["__scopeId","data-v-4eda90e2"],["__file","PopupFlip.vue"]]);var Mn=On;const An=["onClick"],$n={class:"ml-10 body-2"},Fn={class:"shortcut ml-10 body-2 text-gray-3"};function jn(e,t,n,s,a,l){return(0,r.wg)(),(0,r.iD)("div",{class:"popup-page bg-gray-6",onClick:t[0]||(t[0]=(0,o.iM)(((...t)=>e.closePopup&&e.closePopup(...t)),["stop"]))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.shortcutMenu(),((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"popup-page__item",key:`popup-page__shortcut-${t}`,onClick:e.action},[(0,r._)("span",$n,(0,i.zw)(e.text),1),(0,r._)("span",Fn,(0,i.zw)(e.shortcutText),1)],8,An)))),128))])}var Bn=(0,r.aZ)({emits:[],data(){return{}},computed:{},methods:{shortcutMenu(){return[{text:`${this.$t("NN0502")}`,shortcutText:"",action:()=>{gn.Z.deleteLastMapedGuideline()}},{text:`${this.$t("NN0075")}`,shortcutText:"",action:()=>{gn.Z.clearGuidelines(!0)}},{text:`${this.$t("NN0074")}`,shortcutText:"",action:()=>{gn.Z.setShowGuideline(!1)}}]},closePopup(){un.Z.closePopup()}}});const Rn=(0,Z.Z)(Bn,[["render",jn],["__scopeId","data-v-a7257004"],["__file","PopupGuideline.vue"]]);var Hn=Rn;const Un=e=>((0,r.dD)("data-v-601d0fde"),e=e(),(0,r.Cn)(),e),Wn=["onClick"],Vn={class:"ml-10 body-2"},Gn={class:"shortcut ml-10 body-2 text-gray-3"},qn={class:"ml-10 body-2"},Kn=Un((()=>(0,r._)("span",{class:"shortcut ml-10 body-2 text-gray-3"},(0,i.zw)(""),-1))),Yn={class:"ml-10 body-2"},Xn=Un((()=>(0,r._)("span",{class:"shortcut ml-10 body-2 text-gray-3"},(0,i.zw)(""),-1))),Qn={key:2,class:"popup-layer__hr"},Jn=["onClick"],er={class:"ml-10 body-2"},tr={class:"shortcut ml-10 body-2 text-gray-3"},nr={class:"ml-10 body-2"},rr={class:"shortcut ml-10 body-2 text-gray-3"},ir={key:4,class:"popup-layer__hr"},or={key:5},sr=["onClick"],ar={class:"ml-10 body-2"},lr={class:"shortcut"},cr={class:"ml-10 body-2 text-gray-3"},dr={key:6,class:"popup-layer__hr"},ur={class:"ml-10 body-2"};function gr(e,t,n,s,a,l){const c=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",{class:"popup-layer bg-gray-6",onClick:t[4]||(t[4]=(0,o.iM)(((...t)=>e.closePopup&&e.closePopup(...t)),["stop"]))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)([...e.updateOptions,...e.layerOptions],(t=>((0,r.wg)(),(0,r.iD)(r.HY,{key:t.text},[t.condition?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,i.C_)(["popup-layer__item",{disabled:e.isFontLoading}]),onClick:n=>!e.isFontLoading&&t.action(n)},[(0,r.Wm)(c,{class:"pointer",iconName:t.icon,iconWidth:"16px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",Vn,(0,i.zw)(t.text),1),(0,r._)("span",Gn,(0,i.zw)(t.shortcutText),1)],10,Wn)):(0,r.kq)("",!0)],64)))),128)),e.isImage?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"popup-layer__item",onClick:t[0]||(t[0]=t=>e.updateImageAsFrame().action())},[(0,r.Wm)(c,{class:"pointer",iconName:e.updateImageAsFrame().icon,iconWidth:"16px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",qn,(0,i.zw)(e.updateImageAsFrame().text),1),Kn])):(0,r.kq)("",!0),e.isFrame?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"popup-layer__item",onClick:t[1]||(t[1]=t=>e.detachImage().action())},[(0,r.Wm)(c,{class:"pointer",iconName:e.detachImage().icon,iconWidth:"16px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",Yn,(0,i.zw)(e.detachImage().text),1),Xn])):(0,r.kq)("",!0),e.showAdminTool&&e.isLogin?((0,r.wg)(),(0,r.iD)("hr",Qn)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.shortcutMenu(),((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"popup-layer__item",key:`popup-layer__shortcut-${t}`,onClick:e.action},[(0,r.Wm)(c,{class:"pointer",iconName:e.icon,iconWidth:"16px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",er,(0,i.zw)(e.text),1),(0,r._)("span",tr,(0,i.zw)(e.shortcutText),1)],8,Jn)))),128)),e.isGroup&&1===e.currSelectedInfo.layers.length||!e.isGroup&&e.currSelectedInfo.layers.length>1?((0,r.wg)(),(0,r.iD)("div",{key:3,class:"popup-layer__item",onClick:t[2]||(t[2]=(...t)=>e.groupOption.action&&e.groupOption.action(...t))},[(0,r.Wm)(c,{class:"pointer",iconName:e.groupOption.icon,iconWidth:"16px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",nr,(0,i.zw)(e.groupOption.text),1),(0,r._)("span",rr,(0,i.zw)(e.groupOption.shortcutText),1)])):(0,r.kq)("",!0),e.layerNum>1?((0,r.wg)(),(0,r.iD)("hr",ir)):(0,r.kq)("",!0),e.layerNum>1?((0,r.wg)(),(0,r.iD)("div",or,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.orderMenu(),((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"popup-layer__item",key:`popup-layer__order-${t}`,onClick:e.action},[(0,r.Wm)(c,{class:"pointer",iconName:e.icon,iconWidth:"16px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",ar,(0,i.zw)(e.text),1),(0,r._)("div",lr,[(0,r._)("span",cr,(0,i.zw)(e.shortcutText),1)])],8,sr)))),128))])):(0,r.kq)("",!0),1===e.currSelectedInfo.layers.length&&e.currSelectedInfo.types.has("image")?((0,r.wg)(),(0,r.iD)("hr",dr)):(0,r.kq)("",!0),1===e.currSelectedInfo.layers.length&&e.currSelectedInfo.types.has("image")?((0,r.wg)(),(0,r.iD)("div",{key:7,class:"popup-layer__item",onClick:t[3]||(t[3]=(...t)=>e.setBackgroundImage&&e.setBackgroundImage(...t))},[(0,r.Wm)(c,{class:"pointer",iconName:"copy",iconWidth:"16px",iconColor:"gray-1"}),(0,r._)("span",ur,(0,i.zw)(e.$t("NN0097")),1)])):(0,r.kq)("",!0)])}var pr=n(95918),hr=n(62013),mr=n(16290),yr=n(44306),fr=Object.defineProperty,br=Object.defineProperties,vr=Object.getOwnPropertyDescriptors,wr=Object.getOwnPropertySymbols,Nr=Object.prototype.hasOwnProperty,Sr=Object.prototype.propertyIsEnumerable,xr=(e,t,n)=>t in e?fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pr=(e,t)=>{for(var n in t||(t={}))Nr.call(t,n)&&xr(e,n,t[n]);if(wr)for(var n of wr(t))Sr.call(t,n)&&xr(e,n,t[n]);return e},Ir=(e,t)=>br(e,vr(t)),_r=(0,r.aZ)({emits:[],props:{updateOptions:{type:Array,required:!0}},data(){return{typeMap:{text:"文字",shape:"SVG"},orderSets:[{icon:"layers-front",text:this.$t("NN0231")},{icon:"layers-forward",text:this.$t("NN0232")},{icon:"layers-backward",text:this.$t("NN0233")},{icon:"layers-back",text:this.$t("NN0234")}]}},computed:Ir(Pr(Pr({},(0,$.rn)("popup",["popupComponent"])),(0,$.Se)({getPage:"getPage",currSelectedInfo:"getCurrSelectedInfo",isLogin:"user/isLogin",token:"user/getToken",showAdminTool:"user/showAdminTool",_layerNum:"getLayersNum",groupId:"getGroupId",isFontLoading:"text/getIsFontLoading"})),{isGroup(){return this.currSelectedInfo.types.has("group")&&1===this.currSelectedInfo.layers.length},layerNum(){return-1===this.currSelectedInfo.pageIndex?0:this._layerNum(this.currSelectedInfo.pageIndex)},getType(){return[...this.currSelectedInfo.types]},isText(){return this.getType.includes("text")&&1===this.currSelectedInfo.layers.length},isShape(){return this.getType.includes("shape")&&1===this.currSelectedInfo.layers.length},isImage(){return 1===this.currSelectedInfo.layers.length&&this.getType.includes("image")},isFrame(){return 1===this.currSelectedInfo.layers.length&&this.getType.includes("frame")},hasLayerDesignId(){return!!this.currSelectedInfo.layers[0]&&""!==this.currSelectedInfo.layers[0].designId},isTextGroup(){if(this.isGroup){const e=En.ZP.getGroupLayerTypes();return e.has("text")}return!1},updateType(){return this.isTextGroup||this.isText?"text":this.getType[0]},layerOptions(){return[{icon:"copy",text:`上傳 ${this.typeMap[this.updateType]}`,condition:this.showAdminTool&&this.isLogin&&(this.isText||this.isShape||this.isTextGroup),shortcutText:"",action:()=>{yr.Z.uploadLayer(this.updateType)}},{icon:"copy",text:`上傳 ${this.typeMap[this.updateType]} + ID`,condition:this.showAdminTool&&this.isLogin&&(this.isText||this.isShape||this.isTextGroup),shortcutText:"",action:e=>{setTimeout((()=>{this.$nextTick((()=>{un.Z.openPopup("submit",{event:e})}))}),0)}},{icon:"copy",text:"上傳 元素群組",condition:this.showAdminTool&&this.isLogin&&(this.isGroup||this.isImage),shortcutText:"",action:()=>{yr.Z.uploadLayer("shape")}},{icon:"copy",text:"上傳 元素群組 + ID",condition:this.showAdminTool&&this.isLogin&&(this.isGroup||this.isImage),shortcutText:"",action:e=>{setTimeout((()=>{this.$nextTick((()=>{un.Z.openPopup("submit",{event:e},{type:"shape"})}))}),0)}},{icon:"update",text:`更新 ${this.typeMap[this.updateType]}`,condition:this.hasLayerDesignId&&this.showAdminTool&&this.isLogin&&(this.isText||this.isShape||this.isTextGroup),shortcutText:"",action:()=>{yr.Z.updateLayer(this.updateType)}},{icon:"update",text:"填滿 Page",condition:this.showAdminTool&&this.isLogin&&this.isFrame,shortcutText:"",action:()=>{const{index:e,pageIndex:t,layers:n}=this.currSelectedInfo,{width:r,height:i,scale:o,initWidth:s,initHeight:a}=n[0].styles;sn.Z.setPageSize(t,s,a),En.ZP.updateLayerStyles(t,e,{x:0,y:0,width:s,height:a,scale:o*Math.min(s/r,a/i)})}}]},groupOption(){return{icon:this.isGroup?"ungroup":"group",text:this.isGroup?this.$t("NN0212"):this.$t("NN0029"),shortcutText:this.isGroup?"Cmd+Shift+G":"Cmd+G",action:()=>{this.isGroup?on.Z.ungroup():on.Z.group()}}}}),methods:Ir(Pr({},(0,$.OI)({set_popupComponent:"SET_popupComponent",_setBgImgSrc:"SET_backgroundImageSrc"})),{mappingIconAction(e){return Ke.Z.mappingIconAction(e)},shortcutMenu(){return[{icon:"copy",text:this.$t("NN0032"),shortcutText:"Cmd+C",action:()=>{mr.Z.isCurrLayerContenteditable()?pn.Z.textCopy():pn.Z.copy()}},{icon:"paste",text:this.$t("NN0230"),shortcutText:"Cmd+V",action:()=>{mr.Z.isCurrLayerContenteditable()?pn.Z.textPaste():pn.Z.paste()}},{icon:"trash",text:this.$t("NN0034"),shortcutText:"DEL",action:()=>{pn.Z.del()}}]},orderMenu(){return[{icon:this.orderSets[0].icon,text:this.orderSets[0].text,shortcutText:"",action:this.mappingIconAction(this.orderSets[0].icon)},{icon:this.orderSets[1].icon,text:this.orderSets[1].text,shortcutText:"",action:this.mappingIconAction(this.orderSets[1].icon)},{icon:this.orderSets[2].icon,text:this.orderSets[2].text,shortcutText:"",action:this.mappingIconAction(this.orderSets[2].icon)},{icon:this.orderSets[3].icon,text:this.orderSets[3].text,shortcutText:"",action:this.mappingIconAction(this.orderSets[3].icon)}]},detachImage(){return{icon:"copy",text:this.$t("NN0098"),shortcutText:"",action:()=>{var e;hr.Z.detachImage(null!=(e=this.popupComponent.properties.layerIndex)?e:-1)}}},updateImageAsFrame(){return{icon:"copy",text:this.$t("NN0096"),condition:this.showAdminTool&&this.isLogin,shortcutText:"",action:hr.Z.updateImgToFrame}},setBackgroundImage(){pr.Z.setBgImageSrc()},closePopup(){un.Z.closePopup()}})});const kr=(0,Z.Z)(_r,[["render",gr],["__scopeId","data-v-601d0fde"],["__file","PopupLayer.vue"]]);var Zr=kr;const Cr=e=>((0,r.dD)("data-v-cd2eef56"),e=e(),(0,r.Cn)(),e),zr={class:"popup-line-template bg-white"},Tr={class:"popup-line-template__group"},Lr={class:"body-3"},Er={class:"popup-line-template__options"},Dr={class:"popup-line-template__subtitle text-gray-3 mb-5"},Or={class:"popup-line-template__grid-4"},Mr=Cr((()=>(0,r._)("hr",{class:"popup-line-template__hr"},null,-1))),Ar={key:0,class:"popup-line-template__fb-cover"},$r={class:"popup-line-template__subtitle text-gray-3 mb-5"},Fr={class:"popup-line-template__options"},jr={class:"popup-line-template__subtitle text-gray-3 mb-5"},Br={class:"popup-line-template__grid-3"};function Rr(e,t,n,o,s,a){const l=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",zr,[(0,r._)("div",Tr,[(0,r._)("div",Lr,[(0,r._)("span",null,(0,i.zw)(e.$t("NN0501")),1)]),(0,r._)("div",Er,[(0,r._)("span",Dr,(0,i.zw)(e.$t("NN0152",{media:"Line"})),1),(0,r._)("div",Or,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.lineTemplate1,((t,n)=>((0,r.wg)(),(0,r.j4)(l,{class:"popup-line-template__icon pointer",key:`line-template-1-${n}`,iconName:t,iconWidth:"80px",iconColor:"gray-1",onClick:t=>e.addLineTemplate(n,e.LineTemplatesType.type1)},null,8,["iconName","onClick"])))),128))])]),Mr,(0,r._)("div",{class:"popup-line-template__row2",style:(0,i.j5)(e.row2Styles)},[e.isFbCover?((0,r.wg)(),(0,r.iD)("div",Ar,[(0,r._)("span",$r,(0,i.zw)(e.$tc("NN0151",2,{media:"FB"})),1),(0,r._)("div",null,[(0,r.Wm)(l,{class:"popup-line-template__icon pointer",iconName:"line-template-fb-cover",iconWidth:"80px",iconColor:"gray-1",onClick:t[0]||(t[0]=t=>e.addLineToSpecPos(e.fbCover))})])])):(0,r.kq)("",!0),(0,r._)("div",Fr,[(0,r._)("span",jr,(0,i.zw)(e.$t("NN0452")),1),(0,r._)("div",Br,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.lineTemplate2,((t,n)=>((0,r.wg)(),(0,r.j4)(l,{class:"popup-line-template__icon pointer",key:`line-template-2-${n}`,iconName:t,iconWidth:"80px",iconColor:"gray-1",onClick:t=>e.addLineTemplate(n,e.LineTemplatesType.type2)},null,8,["iconName","onClick"])))),128))])])],4)])])}var Hr=Object.defineProperty,Ur=Object.defineProperties,Wr=Object.getOwnPropertyDescriptors,Vr=Object.getOwnPropertySymbols,Gr=Object.prototype.hasOwnProperty,qr=Object.prototype.propertyIsEnumerable,Kr=(e,t,n)=>t in e?Hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yr=(e,t)=>{for(var n in t||(t={}))Gr.call(t,n)&&Kr(e,n,t[n]);if(Vr)for(var n of Vr(t))qr.call(t,n)&&Kr(e,n,t[n]);return e},Xr=(e,t)=>Ur(e,Wr(t)),Qr=(0,r.aZ)({emits:[],data(){const e=Ke.Z.mappingIconSet("lineTemplate"),t=e.slice(0,8),n=e.slice(8),r=gn.Z.fbCover;return{lineTemplate1:t,lineTemplate2:n,LineTemplatesType:Ln.Tg,fbCover:r}},props:{currPage:{type:Object,required:!0}},computed:Xr(Yr({},(0,$.Se)({currSelectedInfo:"getCurrSelectedInfo"})),{isFbCover(){const{width:e,height:t}=this.currPage;return 1230===e&&693===t},row2Styles(){return{"grid-template-columns":this.isFbCover?"0.25fr 0.75fr":"0.75fr 0.25fr"}}}),methods:{addLineTemplate(e,t){gn.Z.addLineTemplate(e,t),un.Z.closePopup()},addLineToSpecPos(e){gn.Z.addToSpecPos(e),un.Z.closePopup()}}});const Jr=(0,Z.Z)(Qr,[["render",Rr],["__scopeId","data-v-cd2eef56"],["__file","PopupLineTemplate.vue"]]);var ei=Jr;const ti={class:"popup-order"},ni=["onClick"],ri={class:"ml-5 body-2"};function ii(e,t,n,o,s,a){const l=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",ti,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.popupDatas(),((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"popup-order__item",key:`popup-order-${t}`,onClick:e.action},[(0,r.Wm)(l,{class:"pointer",iconName:e.icon,iconWidth:"12px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",ri,(0,i.zw)(e.text),1)],8,ni)))),128))])}var oi=(0,r.aZ)({directives:{clickOutside:wt().directive},data(){return{orderSets:[{icon:"layers-forward",text:this.$t("NN0232")},{icon:"layers-front",text:this.$t("NN0231")},{icon:"layers-backward",text:this.$t("NN0233")},{icon:"layers-back",text:this.$t("NN0234")}]}},methods:{popupDatas(){return this.orderSets.map((e=>({icon:e.icon,text:e.text,action:Ke.Z.mappingIconAction(e.icon)})))}}});const si=(0,Z.Z)(oi,[["render",ii],["__scopeId","data-v-1c23eb07"],["__file","PopupOrder.vue"]]);var ai=si;const li=["onClick"],ci={class:"ml-10 body-2"},di={class:"shortcut ml-10 body-2 text-gray-3"},ui=["onClick"],gi={class:"ml-10 body-2"},pi={class:"shortcut ml-10 body-2 text-gray-3"},hi={key:0,class:"popup-page__hr"},mi={class:"ml-10 body-2"};function yi(e,t,n,s,a,l){const c=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",{class:"popup-page bg-gray-6",onClick:t[1]||(t[1]=(0,o.iM)(((...t)=>e.closePopup&&e.closePopup(...t)),["stop"]))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.updateOptions,(t=>((0,r.wg)(),(0,r.iD)(r.HY,{key:t.text},[t.condition?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,i.C_)(["popup-page__item",{disabled:e.isFontLoading}]),onClick:n=>!e.isFontLoading&&t.action()},[(0,r.Wm)(c,{class:"pointer",iconName:t.icon,iconWidth:"16px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",ci,(0,i.zw)(t.text),1),(0,r._)("span",di,(0,i.zw)(t.shortcutText),1)],10,li)):(0,r.kq)("",!0)],64)))),128)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.shortcutMenu(),((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"popup-page__item",key:`popup-page__shortcut-${t}`,onClick:e.action},[(0,r.Wm)(c,{class:"pointer",iconName:e.icon,iconWidth:"16px",iconColor:"gray-1"},null,8,["iconName"]),(0,r._)("span",gi,(0,i.zw)(e.text),1),(0,r._)("span",pi,(0,i.zw)(e.shortcutText),1)],8,ui)))),128)),"none"!==e.currBackgroundImage.config.src?((0,r.wg)(),(0,r.iD)("hr",hi)):(0,r.kq)("",!0),"none"!==e.currBackgroundImage.config.src?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"popup-page__item",onClick:t[0]||(t[0]=(...t)=>e.detachBackgroundImage&&e.detachBackgroundImage(...t))},[(0,r.Wm)(c,{class:"pointer",iconName:"copy",iconWidth:"16px",iconColor:"gray-1"}),(0,r._)("span",mi,(0,i.zw)(e.$t("NN0275")),1)])):(0,r.kq)("",!0)])}var fi=n(86052),bi=n(78871),vi=n(3162),wi=n(13637),Ni=Object.defineProperty,Si=Object.defineProperties,xi=Object.getOwnPropertyDescriptors,Pi=Object.getOwnPropertySymbols,Ii=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable,ki=(e,t,n)=>t in e?Ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zi=(e,t)=>{for(var n in t||(t={}))Ii.call(t,n)&&ki(e,n,t[n]);if(Pi)for(var n of Pi(t))_i.call(t,n)&&ki(e,n,t[n]);return e},Ci=(e,t)=>Si(e,xi(t)),zi=(0,r.aZ)({emits:[],props:{updateOptions:Array,currPage:{type:Object,required:!0}},data(){return{baseBgImgConfig:wi.Z.newImage({srcObj:{type:"",userId:"",assetId:""},styles:{width:0,height:0,zindex:-1,opacity:100}})}},computed:Ci(Zi({},(0,$.Se)({currSelectedInfo:"getCurrSelectedInfo",isLogin:"user/isLogin",groupId:"getGroupId",isFontLoading:"text/getIsFontLoading"})),{currBackgroundImage(){return this.currPage.backgroundImage}}),methods:Ci(Zi({},(0,$.OI)({_setBackgroundImage:"SET_backgroundImage",_setBackgroundColor:"SET_backgroundColor"})),{shortcutMenu(){return[{icon:"copy",text:this.$t("NN0032"),shortcutText:"Cmd+C",action:()=>{pn.Z.copy()}},{icon:"paste",text:this.$t("NN0230"),shortcutText:"Cmd+V",action:()=>{pn.Z.paste()}},{icon:"trash",text:this.$t("NN0034"),shortcutText:"DEL",action:()=>{this.deleteBackgroundImage()}}]},deleteBackgroundImage(){this._setBackgroundImage({pageIndex:sn.Z.currFocusPageIndex,config:this.baseBgImgConfig})},detachBackgroundImage(){const e=bi.Z.deepCopy(this.currBackgroundImage);if(e.config.srcObj.assetId){const t=vi.Z.getSrc(e.config,vi.Z.getSrcSize(e.config.srcObj,50)),n=new Image;n.onload=()=>{const r=n.naturalWidth/n.naturalHeight;fi.ZP.addImage(t,r,Ci(Zi({pageIndex:En.ZP.pageIndex},e.config.srcObj),{styles:e.config.styles})),this._setBackgroundImage({pageIndex:sn.Z.currFocusPageIndex,config:this.baseBgImgConfig})},n.src=t}},closePopup(){un.Z.closePopup()}})});const Ti=(0,Z.Z)(zi,[["render",yi],["__scopeId","data-v-aebb743a"],["__file","PopupPage.vue"]]);var Li=Ti;const Ei=e=>((0,r.dD)("data-v-16a27589"),e=e(),(0,r.Cn)(),e),Di=["onClick"],Oi={class:"body-2"},Mi=Ei((()=>(0,r._)("hr",{class:"popup-page-scale__hr"},null,-1))),Ai=Ei((()=>(0,r._)("span",{class:"body-2"},"fit page",-1))),$i=[Ai],Fi=Ei((()=>(0,r._)("span",{class:"body-2"},"fill page",-1))),ji=[Fi];function Bi(e,t,n,s,a,l){return(0,r.wg)(),(0,r.iD)("div",{class:"popup-page-scale bg-gray-6",onClick:t[2]||(t[2]=(0,o.iM)(((...t)=>e.closePopup&&e.closePopup(...t)),["stop"]))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.percentOptions,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:"popup-page-scale__item",onClick:n=>e.setPageScaleRatio(t)},[(0,r._)("span",Oi,(0,i.zw)(`${t}%`),1)],8,Di)))),128)),Mi,(0,r._)("div",{class:"popup-page-scale__item",onClick:t[0]||(t[0]=t=>e.fitPage())},$i),(0,r._)("div",{class:"popup-page-scale__item",onClick:t[1]||(t[1]=t=>e.fillPage())},ji)])}var Ri=Object.defineProperty,Hi=Object.defineProperties,Ui=Object.getOwnPropertyDescriptors,Wi=Object.getOwnPropertySymbols,Vi=Object.prototype.hasOwnProperty,Gi=Object.prototype.propertyIsEnumerable,qi=(e,t,n)=>t in e?Ri(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ki=(e,t)=>{for(var n in t||(t={}))Vi.call(t,n)&&qi(e,n,t[n]);if(Wi)for(var n of Wi(t))Gi.call(t,n)&&qi(e,n,t[n]);return e},Yi=(e,t)=>Hi(e,Ui(t)),Xi=(0,r.aZ)({emits:[],data(){return{percentOptions:[25,50,75,100,125,150,200,300]}},methods:Yi(Ki({},(0,$.OI)({setPageScaleRatio:"SET_pageScaleRatio"})),{fitPage(){sn.Z.fitPage()},fillPage(){sn.Z.fillPage()},closePopup(){un.Z.closePopup()}})});const Qi=(0,Z.Z)(Xi,[["render",Bi],["__scopeId","data-v-16a27589"],["__file","PopupPageScale.vue"]]);var Ji=Qi;const eo={class:"popup-window"},to={class:"wrapper"},no={class:"payment"},ro={class:"payment-left"},io={class:"payment-left-top"},oo={class:"payment-left-top__step"},so={key:1},ao=["innerHTML"],lo={key:0,class:"mt-15"},co={class:"payment-left-content"},uo=["isSelected","onClick"],go={class:"payment-left-content-period-price"},po={class:"payment-left-content-period-price__label"},ho={class:"text-H6"},mo={class:"body-XS"},yo={key:0,class:"payment-left-content-period__off"},fo={class:"payment-left-content-switch2"},bo={key:0},vo={key:1},wo=["placeholder"],No={class:"payment-left-button"},So={class:"payment-right"},xo=["src"],Po=["src"],Io={key:0,class:"payment-finish"},_o={class:"payment-finish-content"};function ko(e,t,s,a,l,c){const d=(0,r.up)("svg-icon"),u=(0,r.up)("coupon-input"),g=(0,r.up)("PaymentField"),p=(0,r.up)("card-info"),h=(0,r.up)("radio-btn"),m=(0,r.up)("nubtn"),y=(0,r.up)("animation"),f=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)("div",eo,[(0,r._)("div",to,[(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",no,[(0,r.Wm)(d,{class:"payment__close",iconName:"close",iconWidth:"32px",iconColor:"gray-0",onClick:t[0]||(t[0]=t=>e.closePopup())}),(0,r._)("div",ro,[(0,r._)("div",io,[(0,r._)("div",oo,[e.showPreStep?((0,r.wg)(),(0,r.j4)(d,{key:0,iconName:"left-arrow",iconWidth:"24px",iconColor:"gray1",onClick:t[1]||(t[1]=t=>e.preStep())})):(0,r.kq)("",!0),e.totalStep?((0,r.wg)(),(0,r.iD)("span",so,(0,i.zw)(e.$t("NN0544"))+" "+(0,i.zw)(e.currentStep)+" of "+(0,i.zw)(e.totalStep),1)):(0,r.kq)("",!0)]),(0,r._)("div",{class:"text-H4",innerHTML:e.title},null,8,ao),e.description?((0,r.wg)(),(0,r.iD)("div",lo,(0,i.zw)(e.description),1)):(0,r.kq)("",!0)]),(0,r._)("div",co,[["step1","switch1","step1-coupon"].includes(e.view)?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},["step1-coupon"===e.view?((0,r.wg)(),(0,r.j4)(u,{key:0,class:"payment-left-content-coupon"})):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.periodInput,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"payment-left-content-period",key:t.label,isSelected:t.value===e.userPeriod,onClick:n=>e.setPeriod(t.value)},[(0,r.Wm)(d,{iconWidth:"20px",iconName:t.value===e.userPeriod?"radio-checked":"radio",iconColor:t.value===e.userPeriod?"white":"gray-4"},null,8,["iconName","iconColor"]),(0,r._)("div",go,[(0,r._)("span",po,(0,i.zw)(t.label)+" "+(0,i.zw)(e.curPlan(t.value)),1),(0,r._)("span",ho,[(0,r.Uk)((0,i.zw)(`$${e.plans[e.planSelected][t.value].now}`),1),(0,r._)("span",mo,(0,i.zw)(`${e.$t("NN0516")}${"yearly"===t.value?e.$t("NN0548"):""}`),1)])]),"yearly"===t.value?((0,r.wg)(),(0,r.iD)("span",yo,(0,i.zw)(e.$t("NN0549")),1)):(0,r.kq)("",!0)],8,uo)))),128))],64)):(0,r.kq)("",!0),["step2","step2-coupon"].includes(e.view)?((0,r.wg)(),(0,r.j4)(g,{key:1,onNext:t[2]||(t[2]=t=>e.changeView("finish"))})):(0,r.kq)("",!0),"switch2"===e.view?((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[(0,r.Wm)(p,{card:e.card},null,8,["card"]),(0,r._)("div",fo,[e.switchPaidDate?((0,r.wg)(),(0,r.iD)("span",bo,(0,i.zw)(e.$t("NN0552",{date:e.switchPaidDate})),1)):((0,r.wg)(),(0,r.iD)("span",vo,(0,i.zw)(e.$t("NN0553")),1)),(0,r._)("span",null,(0,i.zw)(`$${e.switchPrice}`),1)])],64)):(0,r.kq)("",!0),e.showFeature?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:3},(0,r.Ko)(e.cancel1,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"payment-left-content-cancel",key:e},[(0,r.Wm)(d,{iconName:"pro",iconWidth:"24px"}),(0,r._)("span",null,(0,i.zw)(e),1)])))),128)):(0,r.kq)("",!0),"cancel2"===e.view?((0,r.wg)(),(0,r.iD)(r.HY,{key:4},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.cancel2,((t,n)=>((0,r.wg)(),(0,r.iD)("div",{class:"payment-left-content-cancel",key:t},[(0,r.Wm)(h,{isSelected:e.reasonIndex===String(n),formatKey:String(n),circleColor:"gray-4",onSelect:t=>e.selectCancelReason(String(n))},null,8,["isSelected","formatKey","onSelect"]),(0,r._)("span",null,(0,i.zw)(t),1)])))),128)),(0,r.wy)((0,r._)("input",{class:"payment-left-content-cancel__other","onUpdate:modelValue":t[3]||(t[3]=t=>e.otherReason=t),placeholder:e.$t("NN0584")},null,8,wo),[[o.nr,e.otherReason]])],64)):(0,r.kq)("",!0)]),(0,r._)("div",No,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.buttons,(e=>{var t;return(0,r.wg)(),(0,r.j4)(m,{key:e.label,size:"mid-full",theme:null!=(t=e.type)?t:"primary",disabled:!!e.disabled&&e.disabled(),onClick:t=>e.func()},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["theme","disabled","onClick"])})),128))])]),(0,r._)("div",So,[(0,r._)("img",{class:"payment-right-bg",loading:"lazy",src:n(25286)(`./${e.locale}/${e.img}`)},null,8,xo),"pro-template"===e.view?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"payment-right-temp",src:e.templateImg},null,8,Po)):(0,r.kq)("",!0)]),"finish"===e.view?((0,r.wg)(),(0,r.iD)("div",Io,[(0,r._)("div",_o,[(0,r.Wm)(y,{path:"/lottie/pro.json"}),(0,r._)("span",null,(0,i.zw)(e.$t("NN0562")),1),(0,r.Wm)(m,{size:"mid",onClick:t[4]||(t[4]=t=>e.closePopup())},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0563")),1)])),_:1})])])):(0,r.kq)("",!0)])),[[f,e.vcoConfig()]])])])}var Zo=n(1840),Co=n(44554),zo=n(99090);const To={class:"coupon-input"},Lo=["invalid","placeholder"];function Eo(e,t,n,s,a,l){const c=(0,r.up)("svg-icon"),d=(0,r.up)("animation");return(0,r.wg)(),(0,r.iD)("div",To,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.coupon.input=t),onInput:t[1]||(t[1]=(...t)=>e.changeCoupon&&e.changeCoupon(...t)),invalid:"error"===e.coupon.status,onPaste:t[2]||(t[2]=t=>e.pasteCoupon()),placeholder:e.$t("NN0700")},null,40,Lo),[[o.nr,e.coupon.input]]),(0,r._)("span",{class:(0,i.C_)("error"===e.coupon.status?"text-red":"text-green-1")},(0,i.zw)(e.coupon.msg),3),"input"===e.coupon.status&&""!==e.coupon.input?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:t[3]||(t[3]=t=>e.sendCoupon())},(0,i.zw)(e.$t("NN0703")),1)):(0,r.kq)("",!0),"loading"===e.coupon.status?((0,r.wg)(),(0,r.j4)(c,{key:1,iconName:"loading",iconColor:"gray-1",iconWidth:"24px"})):(0,r.kq)("",!0),"accept"===e.coupon.status?((0,r.wg)(),(0,r.j4)(d,{key:2,loop:!1,width:24,path:"/lottie/correct.json"})):(0,r.kq)("",!0),"error"===e.coupon.status?((0,r.wg)(),(0,r.j4)(c,{key:3,iconName:"info",iconColor:"red",iconWidth:"24px"})):(0,r.kq)("",!0)])}var Do=n(53813),Oo=Object.defineProperty,Mo=Object.defineProperties,Ao=Object.getOwnPropertyDescriptors,$o=Object.getOwnPropertySymbols,Fo=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable,Bo=(e,t,n)=>t in e?Oo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ro=(e,t)=>{for(var n in t||(t={}))Fo.call(t,n)&&Bo(e,n,t[n]);if($o)for(var n of $o(t))jo.call(t,n)&&Bo(e,n,t[n]);return e},Ho=(e,t)=>Mo(e,Ao(t));const{mapFields:Uo}=(0,Do.gU)({getterType:"payment/getField",mutationType:"payment/updateField"});var Wo=(0,r.aZ)({emits:[],components:{Animation:Zo.Z},computed:Ro({},Uo({coupon:"coupon"})),mounted(){this.coupon.input||(this.coupon.input=new URLSearchParams(window.location.search).get("coupon")||"",this.coupon.input&&this.sendCoupon())},methods:Ho(Ro({},(0,$.nv)("payment",{verifyCoupon:"verifyCoupon",resetCouponResult:"resetCouponResult"})),{pasteCoupon(){setTimeout(this.sendCoupon,10)},sendCoupon(){this.verifyCoupon()},changeCoupon(){this.resetCouponResult()}})});const Vo=(0,Z.Z)(Wo,[["render",Eo],["__scopeId","data-v-df31e4b0"],["__file","CouponInput.vue"]]);var Go=Vo,qo=n(76229);const Ko=["brandkit","bgrm","pro-template","pro-object","pro-text","pro-bg","page-resize","export-pdf-print"];var Yo=n(20083),Xo=n(58559),Qo=n(50559),Jo=Object.defineProperty,es=Object.defineProperties,ts=Object.getOwnPropertyDescriptors,ns=Object.getOwnPropertySymbols,rs=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable,os=(e,t,n)=>t in e?Jo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ss=(e,t)=>{for(var n in t||(t={}))rs.call(t,n)&&os(e,n,t[n]);if(ns)for(var n of ns(t))is.call(t,n)&&os(e,n,t[n]);return e},as=(e,t)=>es(e,ts(t)),ls=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const{mapFields:cs}=(0,Do.gU)({getterType:"payment/getField",mutationType:"payment/updateField"});var ds=(0,r.aZ)({name:"PopupPayment",components:{PaymentField:qo.Z,RadioBtn:Co.Z,Animation:Zo.Z,CardInfo:zo.Z,CouponInput:Go},directives:{clickOutside:wt().directive},data(){return{view:"",currentStep:0,totalStep:0,title:"",description:"",buttons:[{}],img:"remover.jpg",periodInput:Yo.Z.periodOptions(),cancel1:Yo.Z.cancel1(),cancel2:Yo.Z.cancel2(),reasonIndex:"-1",otherReason:""}},computed:as(ss(ss(ss({},(0,$.Se)({isLogin:"user/isLogin",isBundle:"payment/getIsBundle"})),cs({periodUi:"periodUi"})),(0,$.rn)("payment",{initView:"initView",templateImg:"templateImg",userCountryUi:"userCountryUi",userCountryInfo:"userCountryInfo",switchPaidDate:"switchPaidDate",switchPrice:"switchPrice",card:"cardInfo",plans:"plans",planSelected:"planSelected",trialStatus:"trialStatus"})),{locale(){return this.$i18n.locale},userPeriod(){return["switch1","switch2"].includes(this.view)?this.isBundle?"monthly":"yearly":this.periodUi},showPreStep(){return["step2","step2-coupon","switch2"].includes(this.view)},showFeature(){return[...Ko,"cancel1"].includes(this.view)},cancelReason(){return Number(this.reasonIndex)<this.cancel2.length-1?this.cancel2[Number(this.reasonIndex)]:this.otherReason}}),mounted(){this.isLogin?"step1-coupon"===this.initView?Xo.Z.checkCoupon()?this.changeView("step1-coupon"):this.closePopup():this.changeView(this.initView):(this.$router.push({name:"Login",query:{redirect:this.$route.fullPath}}),this.closePopup())},methods:as(ss({},(0,$.nv)("payment",{getBillingInfo:"getBillingInfo",init:"init",applyCoupon:"applyCoupon",resetCouponResult:"resetCouponResult",getSwitchPrice:"getSwitchPrice",switch:"switch",cancelApi:"cancel",getPrice:"getPrice"})),{getAd(e){switch(e){case"export-pdf-print":return[this.$tc("NN0806"),"export-pdf-print.jpg"];case"page-resize":return[this.$tc("NN0768"),"page-resize.jpg"];case"brandkit":return[this.$tc("NN0583"),"brandkit.jpg"];case"pro-template":return[this.$tc("NN0653"),"cb.jpg"];case"pro-object":return[this.$tc("NN0658"),"pro-object.jpg"];case"pro-text":return[this.$tc("NN0843"),"pro-text.jpg"];case"pro-bg":return[this.$tc("NN0845"),"pro-bg.jpg"];case"bgrm":default:return[this.$tc("NN0652"),"remover.jpg"]}},changeView(e){return ls(this,null,(function*(){switch(this.view=e,e){case"export-pdf-print":case"page-resize":case"brandkit":case"bgrm":case"pro-template":case"pro-object":case"pro-text":case"pro-bg":[this.description,this.img]=this.getAd(e),this.title=this.$tc("NN0507",2),this.buttons=[{label:this.$tc("NN0561"),func:()=>this.changeView("step1")}];break;case"step1-coupon":this.getPrice(this.userCountryUi),this.init(),this.currentStep=1,this.totalStep=2,this.title=this.$tc("NN0701"),this.description=this.$tc("NN0702"),this.buttons=[{label:this.$tc("NN0550"),func:()=>{this.applyCoupon(),this.changeView(e.replace("1","2"))}}],this.img="remover.jpg";break;case"step1":this.getPrice(this.userCountryUi),this.init(),this.currentStep=1,this.totalStep=2,this.title=this.$tc("NN0545"),this.description="not used"===this.trialStatus?this.$tc("NN0546"):this.$tc("NN0547"),this.buttons=[{label:this.$tc("NN0550"),func:()=>{this.changeView(e.replace("1","2"))}}],this.img="remover.jpg";break;case"step2-coupon":case"step2":this.currentStep=2,this.title=this.$tc("NN0551"),this.description="",this.buttons=[],this.img="pro-template1.jpg";break;case"finish":this.getBillingInfo();break;case"switch1":this.title=this.$t("NN0564",{period:this.isBundle?this.$tc("NN0514"):this.$tc("NN0515")}),this.description=this.isBundle?this.$tc("NN0566"):this.$tc("NN0565"),this.buttons=[{label:this.$t("NN0567",{period:this.isBundle?this.$tc("NN0514"):this.$tc("NN0515")}),func:()=>this.changeView("switch2")}],yield this.getPrice(this.userCountryInfo),this.getSwitchPrice();break;case"switch2":this.title=this.$tc("NN0551"),this.description=this.$tc("NN0568"),this.buttons=[{label:this.$t("NN0564",{period:this.isBundle?this.$tc("NN0514"):this.$tc("NN0515")}),func:()=>ls(this,null,(function*(){yield this.switch(),this.closePopup()}))}],this.img="pro-template1.jpg";break;case"cancel1":this.title=this.$tc("NN0569"),this.buttons=[{label:this.$tc("NN0575"),func:()=>this.closePopup()},{type:"text",label:this.$tc("NN0574"),func:()=>this.changeView("cancel2")}],this.img="pro-template2.jpg";break;case"cancel2":this.title=this.$tc("NN0576"),this.buttons[1].disabled=()=>!this.cancelReason,this.buttons[1].func=this.cancel,this.img="brandkit.jpg";break}}))},vcoConfig(){return{handler:this.closePopup,middleware:e=>"popup-window"===e.target.className}},setPeriod(e){this.view.includes("step1")&&(this.periodUi=e)},preStep(){this.view.startsWith("step2")?this.changeView(this.view.replace("2","1")):"switch2"===this.view&&this.changeView("switch1")},curPlan(e){return"switch1"===this.view&&e!==this.userPeriod?`(${this.$tc("NN0655")})`:""},selectCancelReason(e){this.reasonIndex=e},cancel(){this.cancelApi(this.cancelReason).then(this.closePopup).catch((e=>{(0,Qo.h4)({group:"error",text:e})}))},closePopup(){this.$emit("close"),this.resetCouponResult()}})});const us=(0,Z.Z)(ds,[["render",ko],["__scopeId","data-v-6ae95935"],["__file","PopupPayment.vue"]]);var gs=us;const ps={class:"popup-window"},hs={class:"panel-replace__top"};function ms(e,t,n,s,a,l){const c=(0,r.up)("tabs"),d=(0,r.up)("nubtn"),u=(0,r.up)("search-bar"),g=(0,r.up)("image-list"),p=(0,r.up)("drag-hover"),h=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)("div",ps,[(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{class:"panel-replace",onDragover:t[1]||(t[1]=(0,o.iM)(((...t)=>e.handleDragEnter&&e.handleDragEnter(...t)),["prevent","stop"])),onDragenter:t[2]||(t[2]=(0,o.iM)(((...t)=>e.handleDragEnter&&e.handleDragEnter(...t)),["prevent","stop"])),onDragleave:t[3]||(t[3]=(0,o.iM)(((...t)=>e.handleDragLeave&&e.handleDragLeave(...t)),["prevent","stop"])),onDrop:t[4]||(t[4]=(0,o.iM)(((...t)=>e.handleDrop&&e.handleDrop(...t)),["prevent","stop"]))},[(0,r._)("div",hs,[(0,r.Wm)(c,{tabs:[e.$t("NN0006"),e.$tc("NN0002",2)],modelValue:e.tableIndex,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tableIndex=t),theme:"light"},null,8,["tabs","modelValue"]),e.inMyfile?((0,r.wg)(),(0,r.j4)(d,{key:0,onClick:e.handleUploadLogo},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0014")),1)])),_:1},8,["onClick"])):((0,r.wg)(),(0,r.j4)(u,{key:1,clear:!0,defaultKeyword:e.keyword,placeholder:e.$t("NN0092",{target:e.$tc("NN0002",1)}),onSearch:e.handleSearch},null,8,["defaultKeyword","placeholder","onSearch"]))]),(0,r.Wm)(g,{images:e.data.images,showMore:!1,showUploadArea:e.inMyfile,loading:e.data.loading,sentinel:e.data.sentinel,onAddImage:e.handleUploadLogo,onClickImage:e.clickImg,onLoadMore:e.data.loadmore},null,8,["images","showUploadArea","loading","sentinel","onAddImage","onClickImage","onLoadMore"])],32)),[[h,e.vcoConfig()]]),e.isDraggedOver?((0,r.wg)(),(0,r.j4)(p,{key:0})):(0,r.kq)("",!0)])}var ys=n(13017),fs=n(76109),bs=n(68514),vs=n(58617),ws=n(50707),Ns=Object.defineProperty,Ss=Object.defineProperties,xs=Object.getOwnPropertyDescriptors,Ps=Object.getOwnPropertySymbols,Is=Object.prototype.hasOwnProperty,_s=Object.prototype.propertyIsEnumerable,ks=(e,t,n)=>t in e?Ns(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zs=(e,t)=>{for(var n in t||(t={}))Is.call(t,n)&&ks(e,n,t[n]);if(Ps)for(var n of Ps(t))_s.call(t,n)&&ks(e,n,t[n]);return e},Cs=(e,t)=>Ss(e,xs(t)),zs=(0,r.aZ)({components:{Tabs:vs.Z,ImageList:fs.Z,DragHover:ys.Z,SearchBar:bs.Z},directives:{clickOutside:wt().directive},props:{replaceImg:{type:Function,required:!0}},data(){return{tableIndex:0,isDraggedOver:!1}},computed:Cs(Zs(Zs(Zs({},(0,$.rn)("file",{_myfileImages:"myfileImages",myfileLoading:"pending",myfilePageIndex:"pageIndex"})),(0,$.rn)("unsplash",{_unsplashImages:"content",searchResult:"searchResult",unsplashLoading:"pending",keyword:"keyword"})),(0,$.Se)("unsplash",{upsplashNextParams:"getNextParams"})),{inMyfile(){return 0===this.tableIndex},myfileImages(){return this._myfileImages.map((e=>({type:"",key:`${e.assetIndex}`,label:"",src:e.urls.tiny,uploading:e.urls.tiny.startsWith("data"),menuopen:!1,img:e})))},unsplashImages(){var e;const t=this.$store.state.user.imgSizeMap,n=(null==(e=t.find((e=>"tiny"===e.key)))?void 0:e.size)||320;return(this.keyword?this.searchResult:this._unsplashImages).map(((e,t)=>{const r={srcObj:{type:"unsplash",userId:"",assetId:e.id}};return{type:"",key:`${e.id}-${t}`,label:"",src:vi.Z.getSrc(r,n),uploading:!1,menuopen:!1,img:e}}))},data(){return[{images:this.myfileImages,loading:this.myfileLoading,sentinel:!this.myfileLoading&&this.myfilePageIndex>0,loadmore:this.loadmoreMyfile},{images:this.unsplashImages,loading:this.unsplashLoading,sentinel:!this.unsplashLoading&&this.upsplashNextParams.pageIndex>0,loadmore:this.loadmoreUnsplash}][this.tableIndex]}}),watch:{tabIndex(e){1===e&&this.initUnsplash()}},methods:Cs(Zs({},(0,$.nv)({loadmoreMyfile:"file/getMoreMyfiles",loadmoreUnsplash:"unsplash/getMorePhotos",initUnsplash:"unsplash/init",resetSearch:"unsplash/resetSearch",getPhotos:"unsplash/getPhotos"})),{handleUploadLogo(){this.inMyfile&&(ws.Z.check()?yr.Z.isLogin&&yr.Z.chooseAssets("image"):ws.Z.notifyNetworkError())},clickImg(e){e.img&&(this.replaceImg(e.img),this.closePopup())},handleDragEnter(){this.inMyfile&&(this.isDraggedOver=!0)},handleDragLeave(){this.isDraggedOver=!1},handleDrop(e){var t;this.isDraggedOver=!1;const n=null==(t=e.dataTransfer)?void 0:t.files;this.inMyfile&&n&&yr.Z.uploadAsset("image",n)},handleSearch(e){this.resetSearch(),e&&this.getPhotos({keyword:e})},vcoConfig(){return{middleware:e=>{var t;return"upload"!==(null==(t=e.target)?void 0:t.id)},handler:this.closePopup}},closePopup(){un.Z.closePopup()}})});const Ts=(0,Z.Z)(zs,[["render",ms],["__scopeId","data-v-0d98ba62"],["__file","PopupReplace.vue"]]);var Ls=Ts;const Es=["max","min","step"];function Ds(e,t,n,s,a,l){const c=(0,r.Q2)("progress"),d=(0,r.Q2)("ratio-change");return(0,r.wg)(),(0,r.iD)("div",{class:"popup-slider",style:(0,i.j5)(e.styles)},[(0,r.wy)((0,r._)("input",{class:"popup-slider__range-input input__slider--range","onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),max:e.max,min:e.min,step:e.step,type:"range",onMouseup:t[1]||(t[1]=(...t)=>e.handleChangeStop&&e.handleChangeStop(...t))},null,40,Es),[[c],[o.nr,e.value,void 0,{number:!0}],[d]]),e.noText?(0,r.kq)("",!0):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,class:"popup-slider__text body-2 text-gray-2",type:"number","onUpdate:modelValue":t[2]||(t[2]=t=>e.value=t),onChange:t[3]||(t[3]=(...t)=>e.handleChangeStop&&e.handleChangeStop(...t))},null,544)),[[o.nr,e.value,void 0,{number:!0}]])],4)}var Os=Object.defineProperty,Ms=Object.defineProperties,As=Object.getOwnPropertyDescriptors,$s=Object.getOwnPropertySymbols,Fs=Object.prototype.hasOwnProperty,js=Object.prototype.propertyIsEnumerable,Bs=(e,t,n)=>t in e?Os(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rs=(e,t)=>{for(var n in t||(t={}))Fs.call(t,n)&&Bs(e,n,t[n]);if($s)for(var n of $s(t))js.call(t,n)&&Bs(e,n,t[n]);return e},Hs=(e,t)=>Ms(e,As(t)),Us=(0,r.aZ)({emits:[],data(){return{}},computed:Hs(Rs({},(0,$.Se)({currSelectedInfo:"getCurrSelectedInfo",currSubSelectedInfo:"getCurrSubSelectedInfo",popupComponent:"popup/getPopupComponent"})),{min(){return un.Z.sliderConfig.min},max(){return un.Z.sliderConfig.max},step(){return un.Z.sliderConfig.step},value:{get:function(){return un.Z.sliderConfig.value},set(e){un.Z.event.emit(un.Z.currEvent,e),un.Z.setSliderConfig({value:e})}},noText(){return un.Z.sliderConfig.noText},width(){return un.Z.sliderConfig.width},styles(){return Rs({width:`${this.width}px`},this.noText?{height:"38px",gridTemplateColumns:"1fr"}:{gridTemplateColumns:"2.5fr 1fr"})}}),methods:{handleChangeStop(){hn.Z.record(),un.Z.event.emit(Ln._2.stop)}}});const Ws=(0,Z.Z)(Us,[["render",Ds],["__scopeId","data-v-28c085f1"],["__file","PopupSlider.vue"]]);var Vs=Ws;const Gs=e=>((0,r.dD)("data-v-1b8d1b0f"),e=e(),(0,r.Cn)(),e),qs={class:"popup-submit bg-white"},Ks=Gs((()=>(0,r._)("span",{class:"mr-10"},"ID",-1)));function Ys(e,t,n,i,s,a){const l=(0,r.up)("btn");return(0,r.wg)(),(0,r.iD)("div",qs,[Ks,(0,r.wy)((0,r._)("input",{ref:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.id=t)},null,512),[[o.nr,e.id]]),(0,r.Wm)(l,{class:"rounded my-5",type:"primary-sm",onClick:t[1]||(t[1]=t=>e.upload())},{default:(0,r.w5)((()=>[(0,r.Uk)("上傳")])),_:1})])}var Xs=Object.defineProperty,Qs=Object.defineProperties,Js=Object.getOwnPropertyDescriptors,ea=Object.getOwnPropertySymbols,ta=Object.prototype.hasOwnProperty,na=Object.prototype.propertyIsEnumerable,ra=(e,t,n)=>t in e?Xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ia=(e,t)=>{for(var n in t||(t={}))ta.call(t,n)&&ra(e,n,t[n]);if(ea)for(var n of ea(t))na.call(t,n)&&ra(e,n,t[n]);return e},oa=(e,t)=>Qs(e,Js(t)),sa=(0,r.aZ)({emits:[],data(){return{id:""}},props:{type:{type:String,default:""}},mounted(){this.$refs.input.focus()},computed:oa(ia({},(0,$.Se)({currSelectedInfo:"getCurrSelectedInfo"})),{isGroup(){return this.currSelectedInfo.types.has("group")&&1===this.currSelectedInfo.layers.length},getType(){return[...this.currSelectedInfo.types]},isText(){return this.getType.includes("text")&&1===this.currSelectedInfo.layers.length},isTextGroup(){if(this.isGroup){const e=En.ZP.getGroupLayerTypes();return e.has("text")}return!1},updateType(){return this.isTextGroup||this.isText?"text":this.getType[0]}}),methods:{upload(){20===this.id.length?(yr.Z.uploadLayer(this.type||this.updateType,this.id),un.Z.closePopup()):q.Z.setModalInfo("上傳錯誤",["Design Id 長度不符合格式(20碼)"])}}});const aa=(0,Z.Z)(sa,[["render",Ys],["__scopeId","data-v-1b8d1b0f"],["__file","PopupSubmit.vue"]]);var la=aa,ca=Object.defineProperty,da=Object.defineProperties,ua=Object.getOwnPropertyDescriptors,ga=Object.getOwnPropertySymbols,pa=Object.prototype.hasOwnProperty,ha=Object.prototype.propertyIsEnumerable,ma=(e,t,n)=>t in e?ca(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ya=(e,t)=>{for(var n in t||(t={}))pa.call(t,n)&&ma(e,n,t[n]);if(ga)for(var n of ga(t))ha.call(t,n)&&ma(e,n,t[n]);return e},fa=(e,t)=>da(e,ua(t)),ba=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),va=(0,r.aZ)({emits:[],components:{PopupOrder:ai,PopupLayer:Zr,PopupAlign:at,PopupPage:Li,PopupFlip:Mn,PopupSlider:Vs,PopupFile:kn,PopupLineTemplate:ei,PopupGuideline:Hn,PopupPageScale:Ji,PopupSubmit:la,PopupPayment:gs,PopupDeleteAccount:Pt,PopupReplace:Ls},directives:{clickOutside:wt().directive},data(){return{vcoConfig:{handler:()=>{un.Z.closePopup()},middleware:null,events:["dblclick","click","contextmenu"]}}},computed:fa(ya(ya({},(0,$.rn)("user",["roleRaw"])),(0,$.Se)({popupComponent:"popup/getPopupComponent",getPage:"getPage",currSelectedInfo:"getCurrSelectedInfo",isLogin:"user/isLogin",groupId:"getGroupId",groupType:"getGroupType",isOutsourcer:"user/isOutsourcer",showAdminTool:"user/showAdminTool",isAdmin:"user/isAdmin"})),{component(){return this.popupComponent.component},props(){return this.popupComponent.props},hasDesignId(){return""!==this.currPage.designId},sharedUpdateOptions(){return[{icon:"copy",text:"上傳單頁模板",shortcutText:"",condition:this.showAdminTool&&this.isLogin,action:()=>{yr.Z.uploadTemplate()}},{icon:"copy",text:"更新單頁模板",shortcutText:"",condition:this.showAdminTool&&this.hasDesignId&&this.isLogin,action:()=>{yr.Z.updateTemplate()}},{icon:"copy",text:"上傳群組模板",shortcutText:"",condition:this.showAdminTool&&!this.isOutsourcer&&this.isLogin&&sn.Z.getPages.length>1,action:()=>{yr.Z.uploadGroupDesign(0,0)}},{icon:"copy",text:"更新群組模板",shortcutText:"",condition:this.groupId&&this.showAdminTool&&!this.isOutsourcer&&this.isLogin&&0===this.groupType,action:()=>{yr.Z.uploadGroupDesign(1,0)}},{icon:"copy",text:"刪除群組模板",shortcutText:"",condition:this.groupId&&this.showAdminTool&&!this.isOutsourcer&&this.isLogin&&0===this.groupType,action:()=>{q.Z.setModalInfo("確認刪除群組模板？",[],{msg:"",action:()=>{yr.Z.uploadGroupDesign(1,0,!0)}})}},{icon:"copy",text:"上傳詳情頁模板",shortcutText:"",condition:this.showAdminTool&&!this.isOutsourcer&&this.isLogin&&sn.Z.getPages.length>1,action:()=>{yr.Z.uploadGroupDesign(0,1)}},{icon:"copy",text:"更新詳情頁模板",shortcutText:"",condition:this.groupId&&this.showAdminTool&&!this.isOutsourcer&&this.isLogin&&1===this.groupType,action:()=>{yr.Z.uploadGroupDesign(1,1)}},{icon:"copy",text:"刪除詳情頁模板",shortcutText:"",condition:this.groupId&&this.showAdminTool&&!this.isOutsourcer&&this.isLogin&&1===this.groupType,action:()=>{yr.Z.uploadGroupDesign(1,1,!0)}},{icon:"copy",text:"更新群組成詳情頁",shortcutText:"",condition:this.groupId&&this.showAdminTool&&!this.isOutsourcer&&this.isLogin&&0===this.groupType,action:()=>{yr.Z.uploadGroupDesign(1,1)}},{icon:"copy",text:"更新詳情頁成群組",shortcutText:"",condition:this.groupId&&this.showAdminTool&&!this.isOutsourcer&&this.isLogin&&1===this.groupType,action:()=>{yr.Z.uploadGroupDesign(1,0)}},{icon:"copy",text:"上傳單頁模板(不檢查)",shortcutText:"",condition:this.showAdminTool&&this.isLogin&&this.isAdmin&&!this.isOutsourcer,action:()=>{yr.Z.uploadTemplate(!0)}}]},currPage(){return this.getPage(sn.Z.currFocusPageIndex)}}),mounted(){this.vcoConfig.middleware=this.middleware},methods:fa(ya({},(0,$.nv)({closePopup:"popup/closePopup"})),{middleware(e){var t;return!["popup-payment"].includes(this.component)&&"upload"!==(null==(t=e.target)?void 0:t.id)},close(){return ba(this,null,(function*(){yield this.popupComponent.closeHandler(),this.closePopup()}))}})});const wa=(0,Z.Z)(va,[["render",Fe],["__scopeId","data-v-4662316b"],["__file","Popup.vue"]]);var Na=wa,Sa=n(37658),xa=n(47147),Pa=Object.defineProperty,Ia=Object.defineProperties,_a=Object.getOwnPropertyDescriptors,ka=Object.getOwnPropertySymbols,Za=Object.prototype.hasOwnProperty,Ca=Object.prototype.propertyIsEnumerable,za=(e,t,n)=>t in e?Pa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ta=(e,t)=>{for(var n in t||(t={}))Za.call(t,n)&&za(e,n,t[n]);if(ka)for(var n of ka(t))Ca.call(t,n)&&za(e,n,t[n]);return e},La=(e,t)=>Ia(e,_a(t)),Ea=(0,r.aZ)({emits:[],components:{Popup:Na,ResInfo:Ae,ModalCard:se,DebugTool:z,HomeFooterTabs:B},directives:{clickOutside:wt().directive},metaInfo(){return{title:`${this.$t("SE0001")}`}},data(){return{coordinate:null}},mounted(){this.coordinate=this.$refs.coordinate,void 0!==window.__PRERENDER_INJECTED&&(document.dispatchEvent(new Event("render-event")),window.dispatchEvent(new Event("render-event"))),xa.Z.registerCallbacks("main"),xa.Z.inBrowserMode&&function(e,t,n,r,i){e[r]=e[r]||[],e[r].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});const o=t.getElementsByTagName(n)[0],s=t.createElement(n),a="dataLayer"!==r?"&l="+r:"";s.async=!0,s.src="https://www.googletagmanager.com/gtm.js?id="+i+a,o.parentNode.insertBefore(s,o)}(window,document,"script","dataLayer","GTM-T7LDWBP"),this.$router.isReady().then((()=>{xa.Z.sendAppLoaded()}));const e=(0,I.throttle)((()=>{this.setIsMobile(bi.Z.getWidth()<=768),this.setIsLargeDesktop(bi.Z.getWidth()>=1440)}),500);window.addEventListener("resize",e),e()},beforeMount(){ws.Z.registerNetworkListener(),/http:/.test(window.location.href)&&(document.body.style.overflow="hidden")},beforeUnmount(){ws.Z.unregisterNetworkListener()},computed:La(Ta({},(0,$.Se)({currSelectedResInfo:"getCurrSelectedResInfo",isModalOpen:"modal/getModalOpen",inScreenshotPreview:"getInScreenshotPreview",showAllAdminTool:"user/showAllAdminTool",userInfo:"webView/getUserInfo",browserInfo:"user/getBrowserInfo"})),{currLocale(){return Sa.Z.currLocale()},showHomeFooterTabs(){return["Home","TemplateCenter","MyDesign","Settings"].includes(this.$route.name)&&this.$isTouchDevice()}}),methods:La(Ta(Ta({},(0,$.OI)("text",{updateDefaultFonts:"UPDATE_DEFAULT_FONT"})),(0,$.OI)({setIsMobile:"SET_isMobile",setIsLargeDesktop:"SET_isLargeDesktop",setDropdown:"popup/SET_STATE",_setCurrSelectedResInfo:"SET_currSelectedResInfo"})),{appStyles(){return"Preview"===this.$route.name?{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh","-webkit-font-smoothing":"antialiased",transformStyle:"preserve-3d"}:"tw"===this.currLocale||"jp"===this.currLocale?{fontFamily:"NOTO SANS TC"}:{fontFamily:"Poppins"}},setCurrSelectedResInfo(){this.$nextTick((()=>{this._setCurrSelectedResInfo({})}))},notificationStyles(){return{margin:this.$isTouchDevice()?`${48+this.userInfo.statusBarHeight}px 5px 0 0`:"",fontSize:this.$isTouchDevice()?"12px":"16px"}}})});const Da=(0,Z.Z)(Ea,[["render",y],["__file","App.vue"]]);var Oa=Da;function Ma(e,t,n,o,s,a){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["property-bar px-5 py-10",e.borderStyle])},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],2)}var Aa=(0,r.aZ)({emits:[],props:{borderColor:{type:String,default:"gray-4"}},computed:{borderStyle(){return`border-${this.borderColor}`}}});const $a=(0,Z.Z)(Aa,[["render",Ma],["__scopeId","data-v-360e2043"],["__file","PropertyBar.vue"]]);var Fa=$a;const ja=["innerHTML"],Ba=["xlink:href"];function Ra(e,t,n,o,s,a){return"loading"===e.iconName?((0,r.wg)(),(0,r.iD)("svg",{key:0,class:(0,i.C_)(["svg-icon",`text-${e.iconColor} svg-${e.iconName}`]),viewBox:"0 0 120 30",style:(0,i.j5)(e.iconStyles()),innerHTML:e.loadingSvg},null,14,ja)):((0,r.wg)(),(0,r.iD)("svg",{key:1,class:(0,i.C_)(["svg-icon",`text-${e.iconColor} svg-${e.iconName}`]),style:(0,i.j5)(e.iconStyles())},[(0,r._)("use",{"xlink:href":`#${e.iconName}`},null,8,Ba)],6))}var Ha=n(6891);const Ua=e=>e.keys().map(e),Wa=n(86545);"vivipic.com"!==window.location.host?Ua(Wa).forEach((e=>{e.then((e=>{var t;Ha.Z.pushIcon(null==(t=e.default)?void 0:t.id)}))})):Ua(Wa);const Va=(0,r.aZ)({emits:[],name:"SvgIcon",props:{iconName:{type:String,default:"menu"},iconWidth:{type:String,default:"40px"},iconColor:{type:String,default:"blue-1"},iconHeight:{type:String}},data(){return{loadingSvg:'\n        <circle cx="15" cy="15" r="15">\n            <animate attributeName="r" from="15" to="15"\n                    begin="0s" dur="0.8s"\n                    values="15;9;15" calcMode="linear"\n                    repeatCount="indefinite" />\n            <animate attributeName="fill-opacity" from="1" to="1"\n                    begin="0s" dur="0.8s"\n                    values="1;.5;1" calcMode="linear"\n                    repeatCount="indefinite" />\n        </circle>\n        <circle cx="60" cy="15" r="9" fill-opacity="0.3">\n            <animate attributeName="r" from="9" to="9"\n                    begin="0s" dur="0.8s"\n                    values="9;15;9" calcMode="linear"\n                    repeatCount="indefinite" />\n            <animate attributeName="fill-opacity" from="0.5" to="0.5"\n                    begin="0s" dur="0.8s"\n                    values=".5;1;.5" calcMode="linear"\n                    repeatCount="indefinite" />\n        </circle>\n        <circle cx="105" cy="15" r="15">\n            <animate attributeName="r" from="15" to="15"\n                    begin="0s" dur="0.8s"\n                    values="15;9;15" calcMode="linear"\n                    repeatCount="indefinite" />\n            <animate attributeName="fill-opacity" from="1" to="1"\n                    begin="0s" dur="0.8s"\n                    values="1;.5;1" calcMode="linear"\n                    repeatCount="indefinite" />\n        </circle>\n      '}},methods:{iconStyles(){var e;return{width:this.iconWidth,height:null!=(e=this.iconHeight)?e:this.iconWidth}}}});var Ga=Va;const qa=(0,Z.Z)(Ga,[["render",Ra],["__scopeId","data-v-4546f254"],["__file","SvgIcon.vue"]]);var Ka=qa,Ya=n(89995),Xa=n(29292),Qa=n(32448),Ja=n(65973),el=n(46190),tl=n(80687),nl=n(64703),rl=n.n(nl),il=n(76021),ol=n(93598),sl=n.n(ol),al=n(43138),ll=n(52495),cl=n(53074);let dl=-1;const ul=e=>t=>{-1===dl&&(dl=window.setTimeout((t=>{const n=rn.Z.getters["imgControl/isImgCtrl"];n||e(t),dl=-1}),800))},gl=e=>{"pointermove"===e.type&&0===e.movementX&&0===e.movementY||-1!==dl&&(clearTimeout(dl),dl=-1)},pl=e=>{e.preventDefault()},hl={mounted:function(e,t,n){if("function"!==typeof t.value)return;const r=e=>{t.value(e)},i=ul(r);e.addEventListener("pointerdown",i),e.addEventListener("contextmenu",pl),e.addEventListener("pointerout",gl),e.addEventListener("pointerup",gl),e.addEventListener("pointercancel",gl)},updated(e,t){e.$value=t.value},unmounted(e){clearTimeout(dl),e.removeEventListener("pointerdown",e.handler),e.removeEventListener("contextmenu",pl),e.removeEventListener("pointerout",gl),e.removeEventListener("pointerup",gl),e.removeEventListener("pointercancel",gl)}};var ml=hl,yl=Object.defineProperty,fl=(e,t,n)=>t in e?yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bl=(e,t,n)=>(fl(e,"symbol"!==typeof t?t+"":t,n),n),vl=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class wl{constructor(){bl(this,"themes"),this.themes={hint:{$extend:"tooltip",$resetCss:!0},"hint-menu":{$extend:"tooltip",$resetCss:!0,placement:"bottom",popperTriggers:["hover","focus"],distance:7,delay:{show:200,hide:200}}}}generateConfig(e,t,n){return{content:e,theme:"hint",placement:null!=t?t:"bottom",delay:null!=n?n:{show:200,hide:0}}}bind(e,t){return vl(this,null,(function*(){const n={value:this.generateConfig(t.value),oldValue:t.oldValue,modifiers:t.modifiers};el.NS.beforeMount(e,n)}))}unbind(e){(0,el.Ye)(e)}}var Nl=wl;const Sl=(0,tl.Z)();window.onerror=function(e,t,n,r,i){const o=bi.Z.generateRandomString(6),s=["Error ID:"+o,"Message: "+e,"URL: "+t,"Line: "+n,"Col: "+r,"Stack: "+(null==i?void 0:i.stack)].join(" - ");cl.Z.setLog(s,!1),cl.Z.uploadLog().then((()=>{if(console.log("showGlobalErrorModal: ",rn.Z.getters.getShowGlobalErrorModal),rn.Z.getters["user/isAdmin"]){const e=`${rn.Z.getters["user/getUserId"]}, ${bi.Z.generateTimeStamp()}, ${o}`;q.Z.setModalInfo(bt.Z.global.t("NN0866"),e,{msg:bt.Z.global.t("NN0032"),action(){bi.Z.copyText(e).then((()=>{(0,Qo.h4)({group:"copy",text:"已複製"})}))}})}}))};const xl=(0,o.ri)(Oa).use(bt.Z).use(ll.Z).use(rn.Z);rn.Z.commit("user/SET_BroswerInfo",{name:rl().name,version:rl().version,os:rl().os}),xl.config.globalProperties.$isTouchDevice=()=>bi.Z.isTouchDevice(),xl.config.globalProperties.$isTablet=()=>bi.Z.isTablet(),xl.config.globalProperties.$eventBus=Sl;const Pl=new Nl;xl.use(sl()),xl.use(Qo.ZP),xl.use((0,il.Bg)()),xl.use(il.BA),xl.use(el.ZP,{themes:Pl.themes}),xl.component("RecycleScroller",al.EK),xl.component("svg-icon",Ka),xl.component("btn",(0,r.RC)((()=>n.e(368).then(n.bind(n,50680))))),xl.component("property-bar",Fa),xl.component("dropdown",(0,r.RC)((()=>n.e(368).then(n.bind(n,57763))))),xl.component("nu-image",(0,r.RC)((()=>n.e(368).then(n.bind(n,78401))))),xl.component("nu-layer",(0,r.RC)((()=>n.e(368).then(n.bind(n,93293))))),xl.component("nu-text",(0,r.RC)((()=>n.e(368).then(n.bind(n,43888))))),xl.component("nu-group",(0,r.RC)((()=>n.e(368).then(n.bind(n,93663))))),xl.component("nu-tmp",(0,r.RC)((()=>n.e(368).then(n.bind(n,21977))))),xl.component("nu-controller",(0,r.RC)((()=>n.e(368).then(n.bind(n,9708))))),xl.component("nu-sub-controller",(0,r.RC)((()=>n.e(368).then(n.bind(n,63810))))),xl.component("nu-shape",(0,r.RC)((()=>n.e(368).then(n.bind(n,50658))))),xl.component("nu-img-controller",(0,r.RC)((()=>n.e(368).then(n.bind(n,55839))))),xl.component("nu-frame",(0,r.RC)((()=>n.e(368).then(n.bind(n,21423))))),xl.component("nubtn",(0,r.RC)((()=>n.e(368).then(n.bind(n,15563))))),xl.component("spinner",(0,r.RC)((()=>n.e(368).then(n.bind(n,49042))))),xl.component("hint",(0,r.RC)((()=>n.e(368).then(n.bind(n,66760))))),xl.directive("hint",{mounted:(e,t,n)=>{Pl.bind(e,t)},beforeUpdate:(e,t)=>{Pl.bind(e,t)},unmounted:e=>{Pl.unbind(e)}}),xl.directive("ratio-change",{mounted:(e,t,n)=>{e.addEventListener("change",(function(){e.blur()}))},unmounted:e=>{e.removeEventListener("change",(function(){e.blur()}))}}),xl.directive("header-border",{mounted(e,t){!0===t.value?e.classList.add("navbar-shadow"):(0,r.Y3)((()=>{const n=t.value?document.querySelector(t.value):e.nextElementSibling;n.addEventListener("scroll",(t=>{const n=t.target;0===(null==n?void 0:n.scrollTop)?e.classList.remove("navbar-shadow"):e.classList.add("navbar-shadow")}),{passive:!0})}))}});const Il=new WeakMap;let _l,kl;function Zl(e){(0,r.Y3)((()=>{e.disabled?(e.style.setProperty("--base","0"),e.style.setProperty("--progress","50%")):(e.style.setProperty("--base",(Math.min(+e.value,0)-+e.min)/(+e.max-+e.min)*100+"%"),e.style.setProperty("--progress",(Math.max(+e.value,0)-+e.min)/(+e.max-+e.min)*100+"%"))}))}xl.directive("touch",{mounted:(e,t,n)=>{Il.set(e,new Ja.Z(e,{preventDefault:Boolean(t.value)}))},unmounted:(e,t,n)=>{Il.get(e).destroy(),Il.delete(e)}}),xl.directive("custom-swipe",{mounted:(e,t,n)=>{const r=new Xa.Z(e,{preventDefault:!1});Il.set(e,r),r.use(Qa.Z,{velocity:.1,threshold:5}),r.on("swipe",(e=>{t.value(e)}))},unmounted:(e,t,n)=>{Il.has(e)&&(Il.get(e).off("swipe"),Il.delete(e))}}),xl.directive("tap-animation",{mounted(e,t){const{initColor:n,color:r,initBgColor:i,bgColor:o,disabled:s,animationDuration:a=.2}=t.value;e.dataset.initColor=null!=n?n:e.style.color,e.dataset.initBgColor=null!=i?i:e.style.backgroundColor,e.style.transition=`background-color ${a}s ease-in, color ${a}s ease`,_l=()=>{s||(r&&(e.style.color="none",e.classList.add(r)),o&&(e.style.backgroundColor=Ya.ZP.colorMap.get(o),e.classList.add(`bg-${o}`)))},kl=()=>{setTimeout((()=>{e.style.color=e.dataset.initColor,e.style.backgroundColor=e.dataset.initBgColor}),1e3*a)},e.addEventListener("pointerdown",_l),e.addEventListener("pointerup",kl)},unmounted(e){e.removeEventListener("pointerdown",_l),e.removeEventListener("pointerup",kl)}}),xl.directive("press",ml),xl.directive("progress",{mounted:e=>{Zl(e)},updated:e=>{Zl(e)}}),window.location.href.indexOf("logout")>-1&&(localStorage.setItem("token",""),ll.Z.push({name:"Login"}));let Cl=localStorage.getItem("token")||"";const zl=new URLSearchParams(window.location.search);if(zl.has("token")){const e=zl.get("token");e&&(Cl=e,localStorage.setItem("token",Cl))}xl.mount("#app");var Tl=xl},16080:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(89497),i=n(50719),o=n(71684),s=n(20951),a=n(23931);class l{createFile(e,t=0){const n={token:(0,o.Z)().token||"",team_id:e.teamId,export_id:e.exportId,page_index:e.pageIndex,format:e.format,compress:e.compress,omit_background:e.omitBackground,quality:e.quality,scale:e.scale,pdf_quality:e.pdfQuality,cmyk:e.cmyk,outline:e.outline,bleed:e.bleed,merge:e.merge,split_size:e.splitSize,new_test:t,locale:a.Z.global.locale,title:s.ZP.getDesignName()};return i.Z.request({url:"/export-template",method:"POST",data:n})}getFileUrl(e){return i.Z.interceptors.response.use(void 0,(e=>{const{config:t,response:n}=e,r=/export\/(\w+)\/(\w+).json/g.test(t.url||"");return r&&404===(null==n?void 0:n.status)?new Promise((e=>{setTimeout((()=>e((0,i.Z)(t))),3e3)})):Promise.reject(e)})),i.Z.request({url:e,method:"GET"})}}var c=new l,d=n(78871),u=Object.defineProperty,g=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t)=>{for(var n in t||(t={}))p.call(t,n)&&m(e,n,t[n]);if(g)for(var n of g(t))h.call(t,n)&&m(e,n,t[n]);return e},f=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class b{get fileAttrs(){return{jpg:{scale:1,quality:90,bleed:0},png:{scale:1,omitBackground:0,bleed:0},pdf_standard:{outline:0,cmyk:0},pdf_print:{bleed:1,outline:1,cmyk:0},svg:{omitBackground:0},mp4:{},gif:{}}}get userId(){return r.Z.getters["user/getUserId"]}getTypeAttrs(e){return y({},this.fileAttrs[e])}getFileUrl(e,t=0){return f(this,null,(function*(){e.teamId=e.teamId||this.userId;try{const{data:{url:n}}=yield c.createFile(e,t);if(!n)throw new Error("Could not get the json url");const r=yield this.getFileStatus(n);return r}catch(n){return console.log("getFileUrl error: ",n),{flag:1,url:""}}}))}getFileStatus(e){return f(this,null,(function*(){try{const{data:t}=yield c.getFileUrl(e+`?ver=${d.Z.generateRandomString(6)}`);return 2!==t.flag||t.url||(t.url=e),t}catch(t){return console.log("getFileStatus error: ",t),{flag:1,url:""}}}))}downloadByUrl(e){const t=document.createElement("a");t.setAttribute("href",e),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}var v=new b,w=n(99504),N=n(32905),S=n(58559),x=n(47147),P=n(44306),I=n(50559),_=n(29651),k=n(38058),Z=Object.defineProperty,C=Object.defineProperties,z=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,D=(e,t,n)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O=(e,t)=>{for(var n in t||(t={}))L.call(t,n)&&D(e,n,t[n]);if(T)for(var n of T(t))E.call(t,n)&&D(e,n,t[n]);return e},M=(e,t)=>C(e,z(t)),A=(e,t)=>{var n={};for(var r in e)L.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&T)for(var r of T(e))t.indexOf(r)<0&&E.call(e,r)&&(n[r]=e[r]);return n},$=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const F="v0.1.11-beta::download_submission";var j=(0,_.aZ)({props:{useExternelJSON:{type:Boolean,default:!1},pageIndex:{type:Number,required:!0},hideContainer:{default:!1,type:Boolean}},emits:["close","inprogress","update:panelHistory"],data(){const e=JSON.parse(localStorage.getItem(F)||"{}"),{selectedTypeVal:t,rangeType:n="current",pageRange:r=[],selectedDetailPage:i,selectedDev:o=1}=e,s=A(e,["selectedTypeVal","rangeType","pageRange","selectedDetailPage","selectedDev"]),a=[{value:"png",name:"PNG",desc:`${this.$t("NN0217")}`,tag:`${this.$t("NN0131")}`},{value:"jpg",name:"JPG",desc:`${this.$t("NN0218")}`},{value:"pdf_standard",name:`${this.$t("NN0770")}`,desc:`${this.$t("NN0772")}`},{value:"pdf_print",name:`${this.$t("NN0771")}`,desc:`${this.$t("NN0773")}`,tag:"pro"}];let l="jpg",c=v.getTypeAttrs(l);a.map((e=>e.value)).includes(t)&&(l=t,c=v.getTypeAttrs(t),Object.keys(c).forEach((e=>{c[e]=(e in s?s:c)[e]})));const d={saveSubmission:!0,selected:c,selectedTypeVal:l,rangeType:n,pageRange:"spec"===n?r:[],selectedDev:o};console.log(d);const u=this.pageIndex||0,g=window.location.hostname;return M(O({},d),{currentPageIndex:u,polling:!1,downloaded:!1,canceled:!1,progress:-1,exportId:"",functionQueue:[],scaleOptions:[.5,.75,1,1.5,2,2.5,3],colorFormats:{pdf_standard:[{value:0,label:"RGB"}],pdf_print:[{value:0,label:"RGB"},{value:1,label:"CMYK"}]},detailPageDownloadOptions:[{value:"whole",label:this.$t("NN0347")},{value:"splice",label:this.$t("NN0348")}],selectedDetailPage:i||{option:"splice",noLimit:!1,height:1500},typeOptions:a,devs:[{value:1,label:"dev0"},{value:2,label:"dev1"},{value:3,label:"dev2"},{value:4,label:"dev3"},{value:5,label:"dev4"},{value:6,label:"dev5"},{value:998,label:"qa"},{value:999,label:"rd"}],onDev:"vivipic.com"!==g})},computed:M(O(O({},(0,k.rn)(["name","groupType","exportIds"])),(0,k.Se)("user",{isAdmin:"isAdmin"})),{inReviewMode(){return x.Z.inReviewMode},selectedType(){const{selectedTypeVal:e,typeOptions:t}=this;return t.find((t=>t.value===e))||t[0]},selectedTypeQuality:{get(){return this.selected.quality||80},set(e){!Number.isNaN(+e)&&+e>0&&+e<=100&&(this.selected.quality=+e)}},selectedBleed:{get(){var e;return null!=(e=this.selected.bleed)?e:0},set(e){this.selected.bleed=Number(e)}},selectedOmitBg:{get(){var e;return null!=(e=this.selected.omitBackground)?e:0},set(e){this.selected.omitBackground=Number(e)}},selectedOutline:{get(){var e;return null!=(e=this.selected.outline)?e:1},set(e){this.selected.outline=Number(e)}},isButtonDisabled(){const{rangeType:e,pageRange:t}=this,n="spec"===e&&0===t.length;return this.polling||n},isDetailPage(){return 1===this.groupType},detailPageOptionLabel(){var e,t;const{selectedDetailPage:n,detailPageDownloadOptions:r=[]}=this;return null!=(t=null==(e=r.find((e=>e.value===n.option)))?void 0:e.label)?t:""},selectedDevLabel(){var e,t;const{selectedDev:n,devs:r}=this;return null!=(t=null==(e=r.find((e=>e.value===n)))?void 0:e.label)?t:""},rangeTypeText(){switch(this.rangeType){case"all":return`${this.$t("NN0126")}`;case"spec":return`${this.$t("NN0127")} ${this.selectedPageIndexText}`;case"current":return`${this.$t("NN0125")}（${this.$t("NN0134",{num:`${this.currentPageIndex+1}`})}）`;default:return""}},selectedPageIndexText(){const e=[...this.pageRange];e.sort(((e,t)=>e-t));const t=e.reduce(((e,t)=>{const n=e.length-1;return e[n]&&e[n][e[n].length-1]+1===t?e[n].push(t):e.push([t]),e}),[]),n=t.map((e=>e.length>1?`${e[0]+1}-${e.pop()+1}`:e[0]+1)).join(",");return n}}),mounted(){if(this.useExternelJSON)return;const e=d.Z.generateAssetId();this.handleUploadJSON(e)},watch:{selectedType(e){e&&(this.selected=v.getTypeAttrs(e.value))},exportId(e){if(e){const e=this.functionQueue.shift();"function"===typeof e&&e()}}},methods:M(O({},(0,k.OI)({addExportId:"ADD_exportIds"})),{cancelDownload(){this.$emit("close"),this.canceled=!0},handleUploadJSON(e){return P.Z.uploadExportJSON(e).then((t=>{const{status:n}=null==t?void 0:t.target;204===n?(this.addExportId(e),this.exportId=e,this.$router.replace({query:Object.assign({},this.$router.currentRoute.value.query,{export_ids:this.exportIds})}),P.Z.uploadDesign()):((0,I.h4)({group:"error",text:`${this.$t("NN0461")} (status: ${n})`}),this.$emit("close"))}))},handleClose(){this.polling||this.hideContainer||this.$emit("close")},handleSelectType(e){this.selectedTypeVal=e.value},handleRangeType(e){const{value:t}=e;this.rangeType=t},handleDetailPageOption(e){this.selectedDetailPage.option=e.value},handleDetailPageIsLimited(e){this.selectedDetailPage.noLimit="no-limit"===e.value},handleDevSelect(e){this.selectedDev=e.value},handleColorModeSelect(e){Object.assign(this.selected,{cmyk:e.value})},handleMaxHeight(e){const t=+e.target.value;Number.isNaN(t)?this.selectedDetailPage.height=400:this.selectedDetailPage.height=t<400?400:t,e.target.value=`${this.selectedDetailPage.height}`},handleUpdate(e,t){Object.assign(this.selected,{[e]:t})},handleRangeConfirm(e){this.rangeType="spec",this.pageRange=e.map(((e,t)=>e?t:-1)).filter((e=>e>=0))},handleSubmission(e){this.saveSubmission=e},handleSubmit(e=!1,t="default"){"pdf_print"!==this.selectedTypeVal||S.Z.checkPro({plan:1},"export-pdf-print")?(this.$emit("update:panelHistory","polling"),this.polling=!0,this.exportId?this.handleDownload(e,t):this.functionQueue=[()=>this.handleDownload(e,t)]):this.$emit("close")},handleSubmissionInfo(){const e=N.Z.getPages.length-1;this.pageRange=this.pageRange.filter((t=>t<=e));const{selectedDetailPage:t,saveSubmission:n,selected:r,selectedTypeVal:i,rangeType:o,pageRange:s,selectedDev:a}=this,l=M(O({},r),{selectedTypeVal:i,rangeType:o,pageRange:s,selectedDetailPage:t,selectedDev:a});n?localStorage.setItem(F,JSON.stringify(l)):localStorage.removeItem(F)},handleDownload(e=!1,t="default"){return $(this,null,(function*(){this.polling=!0;const{exportId:n,selected:r,selectedTypeVal:i}=this;this.handleSubmissionInfo();let o={};"default"===t?o=Object.assign({},O({exportId:n,teamId:"",format:i.includes("pdf")?"pdf":i},r),i.includes("pdf")&&{pdfQuality:"pdf_standard"===i?0:"pdf_print"===i?1:void 0}):(o=Object.assign({},{exportId:n,teamId:"",format:"jpg",scale:1,quality:90,omitBackground:0,bleed:0}),this.rangeType=t),this.isDetailPage&&("whole"===this.selectedDetailPage.option&&(o.merge=1),"splice"===this.selectedDetailPage.option&&(o.merge=0,this.selectedDetailPage.noLimit||i.includes("pdf")||(o.splitSize=this.selectedDetailPage.height))),["spec","current"].includes(this.rangeType)&&(o.pageIndex="current"===this.rangeType?`${this.currentPageIndex}`:this.pageRange.join(",")),this.$emit("inprogress",!0),v.getFileUrl(o,(this.isAdmin||this.onDev)&&e?this.selectedDev:0).then(this.handleDownloadProgress)}))},handleDownloadProgress(e){const{flag:t,url:n,msg:r,progress:i}=e;if(!this._isDestroyed)switch(t){case 0:this.progress=100,setTimeout((()=>{this.canceled||v.downloadByUrl(n);const{rangeType:e}=this;switch(e){case"all":N.Z.getPages.forEach(((e,t)=>{N.Z.hasDesignId(t)&&w.Z.trackPageDownload(e.designId)}));break;case"spec":this.pageRange.forEach((e=>{N.Z.hasDesignId(e)&&w.Z.trackPageDownload(N.Z.getPage(e).designId)}));break;case"current":N.Z.hasDesignId(this.currentPageIndex)&&w.Z.trackPageDownload(N.Z.getPage(this.currentPageIndex).designId);break}this.$isTouchDevice()?(this.polling=!1,this.progress=0,this.downloaded=!0,this.$emit("update:panelHistory","downloaded")):this.$emit("close")}),1e3);break;case 1:(0,I.h4)({group:"error",text:`${this.$t("NN0462")} (${r})`}),this.$emit("close");break;case 2:this.progress=i,setTimeout((()=>{v.getFileStatus(n).then(this.handleDownloadProgress)}),500);break}}})})},52495:function(e,t,n){"use strict";n.d(t,{Z:function(){return OD}});n(85210);var r=n(23931),i=n(89497),o=n(6400),s=n(86052),a=n(77891),l=n(78871),c=n(37658),d=n(53074),u=n(95918),g=n(75231),p=n(32905),h=n(60410),m=n.n(h),y=Object.defineProperty,f=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t,n)=>(f(e,"symbol"!==typeof t?t+"":t,n),n);const v='data:image/svg+xml;utf8,\n  <svg xmlns="http://www.w3.org/2000/svg" width="80" height="105" fill="white">\n    <rect width="80" height="105"/>\n  </svg>';class w{constructor(){b(this,"overlaysData",[])}get overlayCategories(){const e=[{id:0,cover_url:v,title_jp:"",title_tw:"",title_us:"",list:[null]},...this.overlaysData];return e.map((e=>({id:e.id,label:e[`title_${r.Z.global.locale}`],baseImg:e.cover_url+(0!==e.id?"/prev":""),items:e.list.map((e=>e?{id:e.id,label:e[`title_${r.Z.global.locale}`],svg:{id:e.id,plan:e.plan,type:e.type,ver:e.ver,fit:0,tags:[]},preset:{xOffset:e.ofh,yOffset:e.ofv,opacity:e.opa}}:{id:"none",label:r.Z.global.t("NN0111"),svg:null,preset:null}))})))}updateOverlayCategory(e){this.overlaysData=e}getCurrOverlay(e){const{subLayerIdx:t}=g.ZP,n=g.ZP.getCurrLayer;return"page"===e?p.Z.currFocusPage.backgroundImage.config.overlay:"image"===n.type?n.overlay:"group"===n.type||"tmp"===n.type?(-1!==t?n.layers[t]:(0,h.find)(n.layers,["type","image"])).overlay:{id:"none",xOffset:0,yOffset:0,opacity:100,config:null}}applyOverlay(e,t){const{pageIndex:n,layerIndex:r,subLayerIdx:i}=g.ZP,o=g.ZP.getCurrLayer,s=(0,h.cloneDeep)(this.getCurrOverlay(e));if(Object.assign(s,t),"page"===e)u.Z.setBgImage({pageIndex:n,config:{overlay:s}});else if("image"===o.type||-1!==i)g.ZP.updateSpecLayerData({pageIndex:n,layerIndex:r,subLayerIndex:i,props:{overlay:s}});else if("group"===o.type||"tmp"===o.type)for(const a in o.layers)"image"===o.layers[+a].type&&g.ZP.updateSpecLayerData({pageIndex:n,layerIndex:r,subLayerIndex:+a,props:{overlay:s}})}}var N=new w,S=n(47147),x=n(86914),P=n(29651);const I={class:"editor"};function _(e,t,n,r,i,o){const s=(0,P.up)("desktop-editor"),a=(0,P.up)("mobile-editor"),l=(0,P.up)("spinner");return(0,P.wg)(),(0,P.iD)("div",I,[e.useMobileEditor?((0,P.wg)(),(0,P.j4)(a,{key:1,currPage:e.currPage},null,8,["currPage"])):((0,P.wg)(),(0,P.j4)(s,{key:0,currPage:e.currPage,onSetIsLoading:e.setIsLoading},null,8,["currPage","onSetIsLoading"])),e.isLoading||e.isSaving||e.isGlobalLoading?((0,P.wg)(),(0,P.j4)(l,{key:2,textContent:e.isSaving?e.$t("NN0455"):e.$t("NN0454")},null,8,["textContent"])):(0,P.kq)("",!0)])}var k=n(819),Z=n(41463);const C={class:"desktop-editor"},z={class:"content"},T={class:"content__main"},L={class:"content__editor"},E={key:0,class:"header-container"},D={key:1,class:"admin-options"},O={class:"flex flex-column mr-10"},M={class:"ml-10 text-bold text-orange"},A={class:"flex flex-column"},$=["value"],F={key:0,class:"content__pages"};function j(e,t,n,r,i,o){const s=(0,P.up)("sidebar"),a=(0,P.up)("sidebar-panel"),l=(0,P.up)("editor-header"),c=(0,P.up)("svg-icon"),d=(0,P.up)("editor-view"),u=(0,P.up)("scale-ratio-editor"),g=(0,P.up)("function-panel"),p=(0,P.up)("color-slips"),h=(0,P.up)("page-preview"),m=(0,P.up)("tour-guide"),y=(0,P.up)("popup-brand-settings"),f=(0,P.up)("popup-update-design"),b=(0,P.up)("component-log");return(0,P.wg)(),(0,P.iD)("div",C,[(0,P.Wm)(s,{isSidebarPanelOpen:e.isSidebarPanelOpen,onToggleSidebarPanel:e.toggleSidebarPanel},null,8,["isSidebarPanelOpen","onToggleSidebarPanel"]),(0,P._)("section",null,[(0,P._)("div",z,[(0,P.Wm)(a,{isSidebarPanelOpen:e.isSidebarPanelOpen,currPage:e.currPage},null,8,["isSidebarPanelOpen","currPage"]),(0,P._)("div",T,[(0,P._)("div",L,[e.inBgRemoveMode?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",E,[(0,P.Wm)(l)])),e.showAllAdminTool?((0,P.wg)(),(0,P.iD)("div",D,[(0,P._)("div",{class:"admin-options__sticky-container",style:(0,k.j5)(e.stickyTopPos)},[(0,P._)("div",O,[(0,P._)("span",M,(0,k.zw)(e.templateText),1),(0,P._)("span",{class:"ml-10 pointer text-orange",onClick:t[0]||(t[0]=t=>e.copyText(e.groupId))},(0,k.zw)(e.groupId),1)]),(0,P.Wm)(c,{iconName:`user-admin${e.getAdminModeText}`,iconWidth:"20px",iconColor:"gray-2",onClick:t[1]||(t[1]=t=>e.setAdminMode())},null,8,["iconName"]),(0,P.Wm)(c,{iconName:"vivisticker_logo",iconWidth:"20px",iconColor:e.stkMode?"black":"blue-1",onClick:e.switchApp},null,8,["iconColor","onClick"]),(0,P._)("div",A,[(0,P.wy)((0,P._)("select",{class:"locale-select","onUpdate:modelValue":t[2]||(t[2]=t=>e.inputLocale=t)},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.localeOptions,(e=>((0,P.wg)(),(0,P.iD)("option",{key:e,value:e},(0,k.zw)(e),9,$)))),128))],512),[[Z.bM,e.inputLocale]])]),(0,P._)("div",{class:"ml-10",onClick:t[3]||(t[3]=t=>e.setEnableComponentLog(!e.enableComponentLog))},[(0,P._)("span",null,(0,k.zw)((e.enableComponentLog?"關閉":"開啟")+" Log"),1)])],4)])):(0,P.kq)("",!0),(0,P.Wm)(d,{currPage:e.currPage,isSidebarPanelOpen:e.isSidebarPanelOpen},null,8,["currPage","isSidebarPanelOpen"]),e.isShowPagePreview?(0,P.kq)("",!0):((0,P.wg)(),(0,P.j4)(u,{key:2,onToggleSidebarPanel:e.toggleSidebarPanel},null,8,["onToggleSidebarPanel"]))])]),(0,P._)("div",{class:"content__panel",style:(0,k.j5)(e.contentPanelStyles)},[(0,P.Wm)(g,{currPage:e.currPage},null,8,["currPage"]),(0,P.Wm)(Z.uT,{name:"panel-up"},{default:(0,P.w5)((()=>[e.showColorSlips?((0,P.wg)(),(0,P.j4)(p,{key:0,class:"content__panel__color-panel",mode:"FunctionPanel",selectedColor:e.currEventColor(),currPage:e.currPage},null,8,["selectedColor","currPage"])):(0,P.kq)("",!0)])),_:1})],4),e.isShowPagePreview?((0,P.wg)(),(0,P.iD)("div",F,[(0,P.Wm)(h)])):(0,P.kq)("",!0)])]),e.showEditorGuide?((0,P.wg)(),(0,P.j4)(m,{key:0})):(0,P.kq)("",!0),e.isBrandSettingsOpen?((0,P.wg)(),(0,P.j4)(y,{key:1})):(0,P.kq)("",!0),e.isUpdateDesignOpen?((0,P.wg)(),(0,P.j4)(f,{key:2})):(0,P.kq)("",!0),e.enableComponentLog?((0,P.wg)(),(0,P.j4)(b,{key:3,logs:e.componentLogs},null,8,["logs"])):(0,P.kq)("",!0)])}const B=e=>((0,P.dD)("data-v-2f0b9595"),e=e(),(0,P.Cn)(),e),R={class:"component-log__header"},H=B((()=>(0,P._)("span",null,"Component Updated Log",-1))),U={class:"component-log__size-options"},W={class:"component-log__content",ref:"content"};function V(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("component-log-item");return(0,P.wg)(),(0,P.iD)("div",{class:"component-log",onPointerdown:t[4]||(t[4]=(...t)=>e.moveStart&&e.moveStart(...t)),style:(0,k.j5)(e.logStyles)},[(0,P._)("div",R,[H,(0,P._)("div",U,[(0,P._)("span",{class:(0,k.C_)(["component-log__size-option mr-15",{"component-log__size-option--active":e.allOpened}]),onClick:t[0]||(t[0]=t=>e.toggleAllOpend())},"All Open",2),(0,P._)("span",{class:(0,k.C_)(["component-log__size-option mr-5",{"component-log__size-option--active":!e.isLargeSize}]),onClick:t[1]||(t[1]=t=>e.toggleSize(!1))},"S",2),(0,P._)("span",{class:(0,k.C_)(["component-log__size-option",{"component-log__size-option--active":e.isLargeSize}]),onClick:t[2]||(t[2]=t=>e.toggleSize(!0))},"L",2),(0,P.Wm)(s,{iconName:"chevron-down",iconColor:"gray-1",iconWidth:"16px",style:(0,k.j5)({transform:e.showContent?"":"rotate(180deg)"}),onClick:t[3]||(t[3]=t=>e.toggleContent())},null,8,["style"])])]),(0,P.wy)((0,P._)("div",W,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.logs,((t,n)=>((0,P.wg)(),(0,P.j4)(a,{key:n,log:t,allOpened:e.allOpened},null,8,["log","allOpened"])))),128))],512),[[Z.F8,e.showContent&&e.logs.length>0]])],36)}const G={class:"component-log-item__main-info"},q={class:"flex items-center"},K={class:"component-log-item__component-name text-bold"},Y={class:"component-log-item__time text-bold ml-5"},X={class:"component-log-item__parent"},Q={class:"text-white"},J={key:0,class:"component-log-item__detail-info flex flex-column pl-15"},ee={key:0,class:"ml-10"},te={class:"text-bold text-gray-3"},ne={class:"text-gray-3"};function re(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("div",{class:"component-log-item",onClick:t[0]||(t[0]=(...t)=>e.toggleItem&&e.toggleItem(...t))},[(0,P._)("div",G,[(0,P._)("div",q,[(0,P._)("span",K,(0,k.zw)(e.log.component),1),(0,P._)("span",Y,(0,k.zw)(`${parseFloat(e.log.time.toFixed(3))}  ms`),1)]),(0,P._)("div",X,[(0,P._)("span",Q,"from: "+(0,k.zw)(e.log.parent),1)])]),e.allOpened||e.showDetail?((0,P.wg)(),(0,P.iD)("div",J,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(Object.entries(e.log.propsData),((e,t)=>((0,P.wg)(),(0,P.iD)(P.HY,{key:`${e}-${t}`},[void 0!==e[1]?((0,P.wg)(),(0,P.iD)("div",ee,[(0,P._)("span",te,(0,k.zw)(`${e[0]}: `),1),(0,P._)("span",ne,(0,k.zw)(e[1]),1)])):(0,P.kq)("",!0)],64)))),128))])):(0,P.kq)("",!0)])}var ie=(0,P.aZ)({emits:[],name:"ComponentLogItem",props:{log:{type:Object,required:!0},allOpened:{type:Boolean,default:!1}},data(){return{showDetail:!1}},methods:{toggleItem(){this.showDetail=!this.showDetail}}}),oe=n(53372);const se=(0,oe.Z)(ie,[["render",re],["__scopeId","data-v-aa95c9e6"],["__file","ComponentLogItem.vue"]]);var ae=se,le=n(2531),ce=n(50543),de=(0,P.aZ)({emits:[],name:"ComponentLog",components:{ComponentLogItem:ae},props:{logs:{type:Array,default:()=>[]}},data(){return{initPos:{x:0,y:0},currPos:{x:0,y:0},deltaX:0,deltaY:0,absPos:{x:0,y:0},showContent:!0,isLargeSize:!1,allOpened:!1}},watch:{logs:(0,h.debounce)((function(){this.$refs.content.scrollTop=this.$refs.content.scrollHeight}),500)},computed:{logStyles(){return{transform:`translate(${this.currPos.x}px,${this.currPos.y}px)`,maxHeight:(this.isLargeSize?800:400)+"px"}}},methods:{moveStart(e){Object.assign(this.absPos,ce.Z.getMouseAbsPoint(e)),le.ZP.addPointerEvent("pointerup",this.moveEnd),le.ZP.addPointerEvent("pointermove",this.moving),this.initPos.x=this.currPos.x,this.initPos.y=this.currPos.y},moving(e){const t=ce.Z.getMouseAbsPoint(e);this.deltaX=t.x-this.absPos.x,this.deltaY=t.y-this.absPos.y,this.currPos.x=this.initPos.x+this.deltaX,this.currPos.y=this.initPos.y+this.deltaY},moveEnd(e){le.ZP.removePointerEvent("pointerup",this.moveEnd),le.ZP.removePointerEvent("pointermove",this.moving)},toggleContent(){this.showContent=!this.showContent},toggleSize(e){this.isLargeSize=e},toggleAllOpend(){this.allOpened=!this.allOpened}}});const ue=(0,oe.Z)(de,[["render",V],["__scopeId","data-v-2f0b9595"],["__file","ComponentLog.vue"]]);var ge=ue,pe=n.p+"051a1ee9f406c4dc.svg";const he=["src"],me={class:"text-left mb-5"},ye={class:"flex-center"},fe={class:"relative"},be={key:0,class:"color-panel__colors"},ve={class:"text-left mb-5"},we={class:"text-left mb-5"},Ne={class:"text-left mb-5"};function Se(e,t,r,i,o,s){const a=(0,P.up)("svg-icon"),l=(0,P.up)("color-btn"),c=(0,P.up)("brand-selector"),d=(0,P.up)("color-picker"),u=(0,P.Q2)("click-outside");return(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",{class:"color-panel",style:(0,k.j5)(e.bgStyle),ref:"colorPanel"},[e.showPanelBtn?((0,P.wg)(),(0,P.iD)("img",{key:0,class:"color-panel__btn",src:n(92431)(`./btn-pack-hr${e.whiteTheme?"-white":""}.svg`),onClick:t[0]||(t[0]=t=>e.closePanel())},null,8,he)):(0,P.kq)("",!0),(0,P._)("div",{class:(0,k.C_)(["color-panel__scroll",{"p-0":e.noPadding}])},[(0,P._)("div",{class:"color-panel__colors",style:(0,k.j5)({color:e.whiteTheme?"#000000":"#ffffff"})},[(0,P._)("div",me,[(0,P._)("div",ye,[e.showAllRecentlyColor&&"PanelColor"!==e.mode?((0,P.wg)(),(0,P.j4)(a,{key:0,class:"mr-5",iconName:"chevron-left",iconWidth:"24px",iconColor:e.whiteTheme?"gray-1":"white",onClick:t[1]||(t[1]=t=>e.lessRecently())},null,8,["iconColor"])):(0,P.kq)("",!0),(0,P._)("span",null,(0,k.zw)(e.$t("NN0679")),1)]),e.showAllRecentlyColor?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("span",{key:0,class:"btn-LG",onClick:t[2]||(t[2]=t=>e.moreRecently())},(0,k.zw)(e.$t("NN0082")),1))]),(0,P._)("div",null,[(0,P.Wm)(l,{color:"add",active:e.openColorPicker,onClick:t[3]||(t[3]=t=>e.openColorPanel(t))},null,8,["active"]),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.recentlyColors,(t=>((0,P.wg)(),(0,P.j4)(l,{color:t,key:t,active:t===e.selectedColor,onClick:n=>e.handleColorEvent(t)},null,8,["color","active","onClick"])))),128))])],4),e.showAllRecentlyColor?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[e.isBrandkitAvailable?((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[(0,P._)("div",fe,[(0,P.Wm)(c,{theme:e.$isTouchDevice()?"mobile-panel":"panel"},null,8,["theme"]),(0,P._)("div",{class:"color-panel__brand-settings pointer",onClick:t[4]||(t[4]=(...t)=>e.handleOpenSettings&&e.handleOpenSettings(...t))},[(0,P.Wm)(a,{iconName:"settings",iconColor:e.$isTouchDevice()?"gray-2":"white",iconWidth:"24px"},null,8,["iconColor"])])]),e.isPalettesLoading?((0,P.wg)(),(0,P.iD)("div",be,[(0,P.Wm)(a,{iconName:"loading",iconWidth:"20px",iconColor:"white"})])):((0,P.wg)(!0),(0,P.iD)(P.HY,{key:1},(0,P.Ko)(e.currentPalettes,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"color-panel__colors",key:t.id,style:(0,k.j5)({color:e.whiteTheme?"#000000":"#ffffff"})},[(0,P._)("div",ve,[(0,P._)("span",null,(0,k.zw)(e.getDisplayedPaletteName(t)),1)]),(0,P._)("div",null,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(t.colors,(t=>((0,P.wg)(),(0,P.j4)(l,{key:t.id,color:t.color,active:t.color===e.selectedColor,onClick:n=>e.handleColorEvent(t.color)},null,8,["color","active","onClick"])))),128))])],4)))),128))],64)):(0,P.kq)("",!0),(0,P._)("div",{class:"color-panel__colors",style:(0,k.j5)({color:e.whiteTheme?"#000000":"#ffffff"})},[(0,P._)("div",we,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0091")),1)]),(0,P._)("div",null,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.documentColors,(t=>((0,P.wg)(),(0,P.j4)(l,{color:t,key:t,active:t===e.selectedColor,onClick:n=>e.handleColorEvent(t)},null,8,["color","active","onClick"])))),128))])],4),(0,P._)("div",{class:"color-panel__colors",style:(0,k.j5)({color:e.whiteTheme?"#000000":"#ffffff"})},[(0,P._)("div",Ne,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0089")),1)]),(0,P._)("div",null,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.defaultColors,(t=>((0,P.wg)(),(0,P.j4)(l,{color:t,key:t,active:t===e.selectedColor,onClick:n=>e.handleColorEvent(t)},null,8,["color","active","onClick"])))),128)),e.selectingBg?((0,P.wg)(),(0,P.iD)("img",{key:0,class:"full-width full-height",src:pe,onClick:t[5]||(t[5]=t=>e.handleColorEvent("#ffffff00"))})):(0,P.kq)("",!0)])],4)],64))],2),e.openColorPicker?(0,P.wy)(((0,P.wg)(),(0,P.j4)(d,{key:1,class:"color-panel__color-picker",ref:"colorPicker",currentColor:e.currentColor,onUpdate:e.handleDragUpdate,onFinal:e.handleChangeStop},null,8,["currentColor","onUpdate","onFinal"])),[[u,e.closeColorModal]]):(0,P.kq)("",!0)],4)),[[u,e.vcoConfig]])}var xe=n(68707),Pe=n(35359),Ie=n(38917),_e=n(89995),ke=n(93261),Ze=n(10298),Ce=n.n(Ze),ze=n(38058),Te=Object.defineProperty,Le=Object.defineProperties,Ee=Object.getOwnPropertyDescriptors,De=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,Ae=(e,t,n)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$e=(e,t)=>{for(var n in t||(t={}))Oe.call(t,n)&&Ae(e,n,t[n]);if(De)for(var n of De(t))Me.call(t,n)&&Ae(e,n,t[n]);return e},Fe=(e,t)=>Le(e,Ee(t)),je=(0,P.aZ)({name:"ColorSlips",props:{mode:{type:String,required:!0},allRecentlyControl:{type:Boolean,required:!1},selectedColor:{type:String,default:""},currPage:{type:Object,required:!0}},components:{ColorPicker:Pe.Z,BrandSelector:xe.Z,ColorBtn:Ie.Z},directives:{clickOutside:Ce().directive},emits:["selectColor","selectColorEnd","toggleColorPanel","openColorPicker","openColorMore"],data(){return{vcoConfig:{handler:()=>{},middleware:null,events:["dblclick","click","contextmenu"]},openColorPicker:!1,lastPickColor:"",showAllRecently:!1}},created(){this.vcoConfig.middleware=this.middleware,this.vcoConfig.handler=this.clickOutside},mounted(){this.updateDocumentColors({pageIndex:g.ZP.pageIndex,color:_e.ZP.currColor}),this.setIsColorPanelOpened(!0),this.isColorPanelHandling&&a.Z.fetchPalettes(this.fetchPalettes),this.initRecentlyColors()},unmounted(){this.updateDocumentColors({pageIndex:g.ZP.pageIndex,color:_e.ZP.currColor}),this.setIsColorPanelOpened(!1)},watch:{currentBrand(){this.isColorPanelHandling&&a.Z.fetchPalettes(this.fetchPalettes)}},computed:Fe($e({},(0,ze.Se)({documentColors:"color/getDocumentColors",_defaultColors:"color/getDefaultColors",defaultBgColor:"color/getDefaultBgColors",_recentlyColors:"color/getRecentlyColors",currSelectedInfo:"getCurrSelectedInfo",currentBrand:"brandkit/getCurrentBrand",selectedTab:"brandkit/getSelectedTab",isPalettesLoading:"brandkit/getIsPalettesLoading",currPanel:"getCurrSidebarPanelType",getBackgroundColor:"getBackgroundColor"})),{isBrandkitAvailable(){return a.Z.isBrandkitAvailable},isColorPanelHandling(){return this.isBrandkitAvailable&&(this.currPanel!==o.iI.brand||"color"!==this.selectedTab)},bgStyle(){return"FunctionPanel"===this.mode?{background:"#2C2F43"}:{background:"transparent"}},whiteTheme(){return["PanelColor"].includes(this.mode)},noPadding(){return["PanelColor","PanelBG"].includes(this.mode)},showPanelBtn(){return!["PanelColor","PanelBG"].includes(this.mode)},currentPalettes(){return this.currentBrand.colorPalettes},currentColor(){return"PanelBG"===this.mode?this.currPage.backgroundColor:_e.ZP.currColor},showAllRecentlyColor(){return["PanelColor"].includes(this.mode)?this.allRecentlyControl:this.showAllRecently},recentlyColors(){return this.showAllRecentlyColor?this._recentlyColors:this._recentlyColors.slice(0,20)},selectingBg(){return"PanelBG"===this.mode||_e.ZP.currEvent===o.gQ.background},defaultColors(){return this.selectingBg?this.defaultBgColor:this._defaultColors}}),methods:Fe($e($e({},(0,ze.OI)({updateDocumentColors:"UPDATE_documentColors",setSettingsOpen:"brandkit/SET_isSettingsOpen",setIsColorPanelOpened:"SET_isColorPanelOpened"})),(0,ze.nv)({fetchPalettes:"brandkit/fetchPalettes",initRecentlyColors:"color/initRecentlyColors",addRecentlyColors:"color/addRecentlyColors"})),{handleOpenSettings(){this.setSettingsOpen(!0)},getDisplayedPaletteName(e){return a.Z.getDisplayedPaletteName(e)},handleColorEvent(e){"PanelBG"===this.mode?this.$emit("selectColor",e):(_e.ZP.event.emit(_e.ZP.currEvent,e),_e.ZP.event.emit(_e.ZP.currStopEvent,e),_e.ZP.setCurrColor(e)),this.updateDocumentColors({pageIndex:g.ZP.pageIndex,color:e})},handleDragUpdate(e){window.requestAnimationFrame((()=>{"PanelBG"===this.mode?this.$emit("selectColor",e):(_e.ZP.event.emit(_e.ZP.currEvent,e),_e.ZP.setCurrColor(e))})),this.lastPickColor=e},handleChangeStop(e){window.requestAnimationFrame((()=>{"PanelBG"===this.mode?this.$emit("selectColorEnd"):_e.ZP.event.emit(_e.ZP.currStopEvent,e)}))},closeColorModal(){this.openColorPicker&&""!==this.lastPickColor&&this.addRecentlyColors(this.lastPickColor),this.openColorPicker=!1},clickOutside(){this.closeColorModal(),this.closePanel()},middleware(e){const t=e.target;return"PanelBG"!==this.mode&&!(t.matches(".function-panel .color-btn *")||t.matches(".function-panel .text-setting__color *"))},closePanel(){ke.Z.toggleColorSlips(!1)},openColorPanel(e){this.$isTouchDevice()?this.$emit("openColorPicker"):(this.openColorPicker=!0,this.$nextTick((()=>{var t;const n=this.$refs.colorPanel,r=this.$refs.colorPicker.$el,[i,o]=[r.offsetWidth,r.offsetHeight],[s,a]=[window.innerWidth||document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight],{top:l,left:c,right:d}=(ce.Z.getMouseAbsPoint(e),e.target.getBoundingClientRect()),u=10,g=n.getBoundingClientRect().top;let p=l-g;l+o>a&&(p-=l+o-a);const h={right:n.getBoundingClientRect().right-d-i-u+"px",top:`${p}px`};r.style.right=null!=(t=h.right)?t:"0px",r.style.top=h.top})))},lessRecently(){this.showAllRecently=!1},moreRecently(){this.$emit("openColorMore"),this.showAllRecently=!0}})});const Be=(0,oe.Z)(je,[["render",Se],["__scopeId","data-v-46c60662"],["__file","ColorSlips.vue"]]);var Re=Be;const He=e=>((0,P.dD)("data-v-e9d71728"),e=e(),(0,P.Cn)(),e),Ue=["href"],We=["href"],Ve={class:"body-3 pointer"},Ge=He((()=>(0,P._)("span",{class:"body-3 ml-10 mr-5"},"/",-1))),qe=["placeholder","value"];function Ke(e,t,n,r,i,o){const s=(0,P.up)("i18n-t"),a=(0,P.up)("router-link"),l=(0,P.up)("svg-icon"),c=(0,P.Q2)("hint");return(0,P.wg)(),(0,P.iD)("div",{class:"editor-header",ref:"header",style:(0,k.j5)(e.headerPosStyle)},[e.isLogin?((0,P.wg)(),(0,P.iD)(P.HY,{key:1},[(0,P.Wm)(a,{class:"body-3 pointer hover-effect a-reset no-wrap",to:"/mydesign"},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0080")),1)])),_:1}),(0,P._)("span",Ve,(0,k.zw)(""+(e.isRoot?"":"/...")),1),e.parentFolder.name&&e.parentFolder.path?((0,P.wg)(),(0,P.j4)(a,{key:0,class:"body-3 pointer hover-effect a-reset",to:`/mydesign/${e.parentFolder.path}`},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(`/${e.parentFolder.name}`),1)])),_:1},8,["to"])):(0,P.kq)("",!0),Ge,(0,P._)("input",{class:"body-3 text-gray-2",type:"text",placeholder:`${e.$t("NN0079")}`,maxlength:"64",value:e.pagesName,onChange:t[0]||(t[0]=(...t)=>e.setPagesName&&e.setPagesName(...t)),ref:"pagesName"},null,40,qe),(0,P.wy)((0,P.Wm)(l,{class:"upload-cloud ml-10",iconName:"upload-cloud",iconWidth:"20px",iconColor:e.statusColor},null,8,["iconColor"]),[[c,e.statusHint]])],64)):((0,P.wg)(),(0,P.j4)(s,{key:0,keypath:"NN0352",tag:"span"},{signUp:(0,P.w5)((()=>[(0,P._)("a",{href:`/signup?redirect=${e.path}`},(0,k.zw)(e.$tc("NN0169",1)),9,Ue)])),logIn:(0,P.w5)((()=>[(0,P._)("a",{href:`/login?redirect=${e.path}`},(0,k.zw)(e.$tc("NN0168",1)),9,We)])),_:1}))],4)}var Ye=n(50707),Xe=n(89594),Qe=n(44306),Je=Object.defineProperty,et=Object.defineProperties,tt=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,ot=(e,t,n)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,st=(e,t)=>{for(var n in t||(t={}))rt.call(t,n)&&ot(e,n,t[n]);if(nt)for(var n of nt(t))it.call(t,n)&&ot(e,n,t[n]);return e},at=(e,t)=>et(e,tt(t)),lt=(0,P.aZ)({emits:[],data(){return{designUploadStatus:"success"}},created(){Qe.Z.onDesignUploadStatus((e=>{this.designUploadStatus=e}))},beforeUnmount(){Qe.Z.offDesignUploadStatus()},computed:at(st({},(0,ze.Se)({groupId:"getGroupId",folderInfo:"getFolderInfo"})),{isLogin(){return i.Z.getters["user/isLogin"]},path(){return this.$route.path},isRoot(){return this.$route.query.path?1===this.$route.query.path.split(",").length:this.folderInfo.isRoot},pagesName(){return p.Z.pagesName},parentFolder(){const e=this.$route.query.folderName||this.folderInfo.parentFolder,t=this.$route.query.path||this.folderInfo.path;return{name:e,path:t.split(",").join("&")}},headerPosStyle(){const e=Xe.Z.showRuler?`${Xe.Z.RULER_SIZE}px`:"0px";return{top:e}},statusColor(){return Ye.Z.check()?"uploading"===this.designUploadStatus?"yellow":"green-1":"red"},statusHint(){return Ye.Z.check()?"uploading"===this.designUploadStatus?`${this.$t("NN0136")}`:`${this.$t("NN0135")}`:`${this.$t("NN0349")}`}}),methods:{setPagesName(e){const{value:t}=e.target;p.Z.setPagesName(t)}}});const ct=(0,oe.Z)(lt,[["render",Ke],["__scopeId","data-v-e9d71728"],["__file","EditorHeader.vue"]]);var dt=ct;const ut=e=>((0,P.dD)("data-v-a3ace4a4"),e=e(),(0,P.Cn)(),e),gt={class:"editor-view__grid"},pt=ut((()=>(0,P._)("div",{class:"corner-block"},null,-1))),ht={key:0,class:"editor-view__guidelines-area",ref:"guidelinesArea"},mt={class:"guideline__pos guideline__pos--v",ref:"guidelinePosV"},yt={class:"guideline__pos guideline__pos--h",ref:"guidelinePosH"};function ft(e,t,r,i,o,s){const a=(0,P.up)("disk-warning"),l=(0,P.up)("nu-page"),c=(0,P.up)("bg-remove-area"),d=(0,P.up)("ruler-hr"),u=(0,P.up)("ruler-vr");return(0,P.wg)(),(0,P.iD)("div",{class:"editor-view bg-gray-5",style:(0,k.j5)(e.cursorStyles()),onPointerdown:t[9]||(t[9]=t=>e.inBgRemoveMode?null:e.getInGestureMode?e.dragEditorViewStart(t):e.selectStart(t)),onWheel:t[10]||(t[10]=(...t)=>e.handleWheel&&e.handleWheel(...t)),onScrollPassive:t[11]||(t[11]=t=>e.inBgRemoveMode?null:e.scrollUpdate()),onMousewheel:t[12]||(t[12]=(...t)=>e.handleWheel&&e.handleWheel(...t)),onContextmenu:t[13]||(t[13]=(0,Z.iM)((()=>{}),["prevent"])),ref:"editorView"},[(0,P.Wm)(a,{class:"editor-view__warning",size:"large"}),(0,P._)("div",gt,[(0,P._)("div",{class:"editor-view__canvas",ref:"canvas",onPointerdown:t[0]||(t[0]=(0,Z.iM)((t=>e.outerClick(t)),["left","self"]))},[e.inBgRemoveMode?((0,P.wg)(),(0,P.j4)(c,{key:1,editorViewCanvas:e.editorViewCanvas},null,8,["editorViewCanvas"])):((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.pagesState,((t,n)=>((0,P.wg)(),(0,P.j4)(l,{key:`page-${t.config.id}`,pageIndex:n,overflowContainer:e.editorView,style:(0,k.j5)({"z-index":`${e.getPageZIndex(n)}`}),pageState:t,index:n,isAnyBackgroundImageControl:e.isBackgroundImageControl,onStepChange:e.handleStepChange},null,8,["pageIndex","overflowContainer","style","pageState","index","isAnyBackgroundImageControl","onStepChange"])))),128)),(0,P.wy)((0,P._)("div",{class:"selection-area",ref:"selectionArea",style:(0,k.j5)({zIndex:e.pageNum+3})},null,4),[[Z.F8,e.isSelecting]])],64))],544),e.showRuler&&!e.isShowPagePreview?((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[(0,P.Wm)(d,{isSidebarPanelOpen:e.isSidebarPanelOpen,editorView:e.editorView,onPointerdown:t[1]||(t[1]=(0,Z.iM)((t=>e.dragStartH(t)),["stop"]))},null,8,["isSidebarPanelOpen","editorView"]),(0,P.Wm)(u,{editorView:e.editorView,onPointerdown:t[2]||(t[2]=(0,Z.iM)((t=>e.dragStartV(t)),["stop"]))},null,8,["editorView"]),pt],64)):(0,P.kq)("",!0)]),e.inBgRemoveMode?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",ht,[e.isShowGuidelineV?((0,P.wg)(),(0,P.iD)("div",{key:0,class:"guideline guideline--v",ref:"guidelineV",style:(0,k.j5)({cursor:`url(${n(49239)}) 16 16, pointer`}),onPointerdown:t[3]||(t[3]=(0,Z.iM)((t=>e.lockGuideline?null:e.dragStartV(t)),["left","stop"])),onMouseout:t[4]||(t[4]=(0,Z.iM)((t=>e.closeGuidelineV()),["stop"])),onPointerup:t[5]||(t[5]=(0,Z.iM)((t=>e.openGuidelinePopup(t)),["right","stop","prevent"]))},[(0,P._)("div",mt,[(0,P._)("span",null,(0,k.zw)(e.rulerVPos),1)],512)],36)):(0,P.kq)("",!0),e.isShowGuidelineH?((0,P.wg)(),(0,P.iD)("div",{key:1,class:"guideline guideline--h",ref:"guidelineH",style:(0,k.j5)({cursor:`url(${n(24517)}) 16 16, pointer`}),onPointerdown:t[6]||(t[6]=(0,Z.iM)((t=>e.lockGuideline?null:e.dragStartH(t)),["left","stop"])),onMouseout:t[7]||(t[7]=(0,Z.iM)((t=>e.closeGuidelineH()),["stop"])),onPointerup:t[8]||(t[8]=(0,Z.iM)((t=>e.openGuidelinePopup(t)),["right","stop","prevent"]))},[(0,P._)("div",yt,[(0,P._)("span",null,(0,k.zw)(e.rulerHPos),1)],512)],36)):(0,P.kq)("",!0)],512))],36)}const bt=["cy-ready"],vt={key:0,class:"bg-remove-area__loading"},wt={class:"magnify-area__canvas",ref:"magnify"};function Nt(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)(P.HY,null,[(0,P._)("div",{class:"bg-remove-area",style:(0,k.j5)(e.wrapperStyles),ref:"bgRemoveArea"},[(0,P.wy)((0,P._)("div",{class:"bg-remove-area__initPhoto",style:(0,k.j5)(e.initPhotoStyles)},null,4),[[Z.F8,e.showInitImage]]),(0,P._)("div",{class:(0,k.C_)(["bg-remove-area__scale-area",{"bg-remove-area__scale-area--hideBg":!e.showInitImage}]),style:(0,k.j5)(e.areaStyles)},[(0,P._)("canvas",{class:"bg-remove-area",ref:"canvas","cy-ready":e.cyReady},null,8,bt),e.showBrush?((0,P.wg)(),(0,P.iD)("div",{key:0,class:"bg-remove-area__brush",style:(0,k.j5)(e.brushStyle)},null,4)):(0,P.kq)("",!0)],6),e.loading?((0,P.wg)(),(0,P.iD)("div",vt,[(0,P.Wm)(s,{class:"spiner",iconName:"spiner",iconColor:"white",iconWidth:"150px"})])):(0,P.kq)("",!0)],4),e.useMobileEditor?((0,P.wg)(),(0,P.j4)(P.lR,{key:0,to:".header-bar"},[(0,P._)("div",{class:"magnify-area",style:(0,k.j5)(e.magnifyAreaStyle)},[(0,P._)("canvas",wt,null,512),(0,P._)("div",{class:"magnify-area__brush",style:(0,k.j5)({backgroundColor:e.brushColor})},null,4)],4)])):(0,P.kq)("",!0)],64)}var St=Object.defineProperty,xt=(e,t,n)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pt=(e,t,n)=>(xt(e,"symbol"!==typeof t?t+"":t,n),n);class It{constructor(e,t,n,r){Pt(this,"magnifyCanvas"),Pt(this,"contentCanvas"),Pt(this,"targetEl"),Pt(this,"magnifyContext"),Pt(this,"posInMagnifierCanvas",{x:0,y:0}),Pt(this,"raf"),Pt(this,"SCALE_RATIO",.4),Pt(this,"MAGNIFY_RADIUS",30),this.magnifyCanvas=e,this.magnifyCanvas.width=2*this.MAGNIFY_RADIUS,this.magnifyCanvas.height=2*this.MAGNIFY_RADIUS,this.magnifyContext=t,this.contentCanvas=n,this.targetEl=r,this.bind()}get brushSize(){return i.Z.getters["bgRemove/getBrushSize"]}bind(){window.addEventListener("pointermove",this.render.bind(this))}render(e){this.posInMagnifierCanvas=ce.Z.getMousePosInTarget(e,this.targetEl),this.clear();const t=this.brushSize/(2*this.MAGNIFY_RADIUS)*1.5;this.magnifyContext.save(),this.magnifyContext.scale(1/t,1/t),this.magnifyContext.drawImage(this.contentCanvas,-this.posInMagnifierCanvas.x+this.MAGNIFY_RADIUS*t,-this.posInMagnifierCanvas.y+this.MAGNIFY_RADIUS*t,this.contentCanvas.width,this.contentCanvas.height),this.magnifyContext.restore()}clear(){this.magnifyContext.clearRect(0,0,this.magnifyCanvas.width,this.magnifyCanvas.height)}reset(){window.cancelAnimationFrame(this.raf),this.magnifyContext.clearRect(0,0,this.magnifyCanvas.width,this.magnifyCanvas.height)}}var _t=It,kt=n(77804),Zt=Object.defineProperty,Ct=Object.defineProperties,zt=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,Lt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,Dt=(e,t,n)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ot=(e,t)=>{for(var n in t||(t={}))Lt.call(t,n)&&Dt(e,n,t[n]);if(Tt)for(var n of Tt(t))Et.call(t,n)&&Dt(e,n,t[n]);return e},Mt=(e,t)=>Ct(e,zt(t)),At=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),$t=(0,P.aZ)({emits:[],props:{editorViewCanvas:{type:HTMLElement,required:!0}},data(){return{cyReady:!1,root:void 0,canvasWidth:1600,canvasHeight:1600,contentCanvas:void 0,contentCtx:void 0,initImgCanvas:void 0,initImgCtx:void 0,blurCanvas:void 0,blurCtx:void 0,clearModeCanvas:void 0,clearModeCtx:void 0,magnifyCanvas:void 0,magnifyCtx:void 0,initImageElement:void 0,imageElement:void 0,initPos:{x:0,y:0},brushStyle:{backgroundColor:"#fcaea9",width:"16px",height:"16px",transform:"translate(0,0)"},initImgSrc:"",imgSrc:"",blurPx:1,showBrush:!1,stepsQueue:[],isProcessingStepsQueue:!1,currCanvasImageElement:void 0,magnifyUtils:null,showMagnifyAtRight:!1,clearModeShift:4}},created(){const{width:e,height:t}=this.autoRemoveResult,n=e/t;this.canvasHeight=1600/n,this.initImgSrc=this.autoRemoveResult.initSrc,this.imgSrc=this.autoRemoveResult.urls.larg},mounted(){this.root=this.$refs.bgRemoveArea,this.imageElement=new Image,this.imageElement.setAttribute("crossOrigin","Anonymous"),this.imageElement.onload=()=>{this.initCanvas(),this.initBlurCanvas(),this.initClearModeCanvas(),this.$isTouchDevice()&&this.initMagnifyCanvas(),this.cyReady=!0},this.imageElement.src=this.imgSrc,this.initImageElement=new Image,this.initImageElement.setAttribute("crossOrigin","Anonymous"),this.initImageElement.onload=()=>{this.createInitImageCtx()},this.initImageElement.src=this.initImgSrc,this.editorViewCanvas.addEventListener("pointerdown",this.drawStart),this.$isTouchDevice()&&this.editorViewCanvas.addEventListener("touchstart",this.disableTouchEvent),window.addEventListener("pointermove",this.setBrushPos),this.$isTouchDevice()||(this.editorViewCanvas.addEventListener("mouseenter",this.handleBrushEnter),this.editorViewCanvas.addEventListener("mouseleave",this.handleBrushLeave)),window.addEventListener("keydown",this.handleKeydown),this.setPrevPageScaleRatio(this.scaleRatio),p.Z.fitPage()},unmounted(){window.removeEventListener("pointerup",this.drawEnd),window.removeEventListener("pointermove",this.setBrushPos),window.removeEventListener("pointermove",this.drawing),this.editorViewCanvas.removeEventListener("mouseenter",this.handleBrushEnter),this.editorViewCanvas.removeEventListener("mouseleave",this.handleBrushLeave),this.editorViewCanvas.removeEventListener("pointerdown",this.drawStart),this.$isTouchDevice()&&this.editorViewCanvas.removeEventListener("touchstart",this.disableTouchEvent),window.removeEventListener("keydown",this.handleKeydown)},computed:Mt(Ot({},(0,ze.Se)({scaleRatio:"getPageScaleRatio",currSelectedInfo:"getCurrSelectedInfo",brushSize:"bgRemove/getBrushSize",restoreInitState:"bgRemove/getRestoreInitState",clearMode:"bgRemove/getClearMode",showInitImage:"bgRemove/getShowInitImage",autoRemoveResult:"bgRemove/getAutoRemoveResult",modifiedFlag:"bgRemove/getModifiedFlag",steps:"bgRemove/getSteps",currStep:"bgRemove/getCurrStep",inLastStep:"bgRemove/inLastStep",inFirstStep:"bgRemove/inFirstStep",loading:"bgRemove/getLoading",inGestureMode:"getInGestureToolMode",contentScaleRatio:"getContentScaleRatio",useMobileEditor:"getUseMobileEditor"})),{size(){return{width:this.canvasWidth,height:this.canvasHeight}},areaStyles(){const{width:e,height:t}=this.size;return{width:`${e}px`,height:`${t}px`,transform:`scale(${this.scaleRatio*this.contentScaleRatio/100})`}},wrapperStyles(){return{width:this.size.width*(this.scaleRatio*this.contentScaleRatio/100)+"px",height:this.size.height*(this.scaleRatio*this.contentScaleRatio/100)+"px"}},initPhotoStyles(){const e=this.showInitImage?`url(${this.initImgSrc})`:"",t=this.showInitImage?"cover":"initial";return{width:this.size.width*(this.scaleRatio*this.contentScaleRatio/100)+"px",height:this.size.height*(this.scaleRatio*this.contentScaleRatio/100)+"px",backgroundImage:e,backgroundSize:t}},brushColor(){return this.clearMode?"#fcaea9":"#fdd033"},magnifyAreaStyle(){return this.$isTouchDevice()?Mt(Ot({bottom:"-70px"},this.showMagnifyAtRight?{right:"10px"}:{left:"10px"}),{visibility:this.showBrush?"visible":"hidden"}):{bottom:"10px",left:"80px"}}}),watch:{brushSize(e){this.contentCtx.lineWidth=e,this.blurCtx.lineWidth=e,this.clearModeCtx.lineWidth=e,this.brushStyle.width=`${e+this.blurPx}px`,this.brushStyle.height=`${e+this.blurPx}px`,this.clearMode&&(this.blurPx=1,this.contentCtx.filter=`blur(${this.blurPx}px)`)},restoreInitState(e){e&&(this.clearCtx(),this.initClearModeCanvas(),this.clearMode?(this.contentCtx.filter="none",this.drawImageToCtx(),this.contentCtx.filter=`blur(${this.blurPx}px)`):(this.contentCtx.filter="none",this.drawImageToCtx()),this.clearSteps(),this.setRestoreInitState(!1),this.setModifiedFlag(!1),this.pushStep(),this.$isTouchDevice()&&this.magnifyUtils.reset(),this.currCanvasImageElement=void 0)},clearMode(e){e?(this.contentCtx.globalCompositeOperation="destination-out",this.contentCtx.filter=`blur(${this.blurPx}px)`,this.initClearModeCanvas(),this.updateCurrCanvasImageElement()):(this.contentCtx.globalCompositeOperation="source-over",this.contentCtx.filter="none")},brushColor(e){this.brushStyle.backgroundColor=e},stepsQueue:{handler(e,t){return At(this,null,(function*(){if(!this.isProcessingStepsQueue){while(0!==this.stepsQueue.length){this.isProcessingStepsQueue=!0;const e=yield this.stepsQueue.shift();e&&this.addStep(e)}this.isProcessingStepsQueue=!1}}))},deep:!0}},methods:Mt(Ot({},(0,ze.OI)({setRestoreInitState:"bgRemove/SET_restoreInitState",_setCanvas:"bgRemove/SET_canvas",setModifiedFlag:"bgRemove/SET_modifiedFlag",addStep:"bgRemove/ADD_step",setCurrStep:"bgRemove/SET_currStep",setPrevPageScaleRatio:"bgRemove/SET_prevPageScaleRatio",clearSteps:"bgRemove/CLEAR_steps"})),{initCanvas(){this.contentCanvas=this.$refs.canvas,this.contentCanvas.width=this.canvasWidth,this.contentCanvas.height=this.canvasHeight;const e=this.contentCanvas.getContext("2d");e.strokeStyle="red",e.lineWidth=this.brushSize,e.lineCap="round",e.lineJoin="round",this.contentCtx=e,this.drawImageToCtx(),this.contentCtx.filter=`blur(${this.blurPx}px)`,this.pushStep()},initBlurCanvas(){this.blurCanvas=document.createElement("canvas"),this.blurCanvas.width=this.size.width,this.blurCanvas.height=this.size.height;const e=this.blurCanvas.getContext("2d");e.lineCap="round",e.lineJoin="round",e.lineWidth=this.brushSize,e.filter=`blur(${this.blurPx}px)`,this.blurCtx=e},initClearModeCanvas(){this.clearModeCanvas=document.createElement("canvas"),this.clearModeCanvas.width=this.size.width+2*this.clearModeShift,this.clearModeCanvas.height=this.size.height+2*this.clearModeShift;const e=this.clearModeCanvas.getContext("2d");e.lineCap="round",e.lineJoin="round",e.lineWidth=this.brushSize,this.clearModeCtx=e},initMagnifyCanvas(){this.magnifyCanvas=this.$refs.magnify;const e=this.magnifyCanvas.getContext("2d");this.magnifyCtx=e,this.magnifyUtils=new _t(this.magnifyCanvas,this.magnifyCtx,this.contentCanvas,this.root)},createInitImageCtx(){this.initImgCanvas=document.createElement("canvas"),this.initImgCanvas.width=this.size.width,this.initImgCanvas.height=this.size.height;const e=this.initImgCanvas.getContext("2d");e.lineCap="round",e.lineJoin="round",e.lineWidth=this.brushSize,this.initImgCtx=e,this.drawImageToInitImgCanvas()},drawLine(e,t){const n=this.clearMode?this.clearModeShift:0;t.beginPath(),t.moveTo(this.initPos.x+n,this.initPos.y+n);const{x:r,y:i,xPercentage:o,yPercentage:s}=ce.Z.getMousePosInTarget(e,this.root);this.showMagnifyAtRight=o<.25&&s<.25,t.lineTo(r+n,i+n),t.stroke(),Object.assign(this.initPos,{x:r,y:i}),this.setModifiedFlag(!0)},drawStart(e){if(!this.inGestureMode){const{x:t,y:n}=ce.Z.getMousePosInTarget(e,this.root);Object.assign(this.initPos,{x:t,y:n}),this.clearMode?this.drawInClearMode(e):this.drawInRestoreMode(e),this.$isTouchDevice()&&(this.showBrush=!0,this.setBrushPos(e),this.magnifyUtils.render(e)),window.addEventListener("pointerup",this.drawEnd),window.addEventListener("pointermove",this.drawing)}},drawing(e){this.clearMode?this.drawInClearMode(e):this.drawInRestoreMode(e)},drawEnd(){window.removeEventListener("pointerup",this.drawEnd),window.removeEventListener("pointermove",this.drawing),this._setCanvas(this.contentCanvas),this.pushStep(),this.$isTouchDevice()&&(this.showBrush=!1)},setBrushPos(e){const{x:t,y:n}=ce.Z.getMousePosInTarget(e,this.root);this.brushStyle.transform=`translate(${t-(this.brushSize+this.blurPx)/2}px, ${n-(this.brushSize+this.blurPx)/2}px)`},drawImageToCtx(e){this.setCompositeOperationMode("source-over"),this.contentCtx.drawImage(null!=e?e:this.imageElement,0,0,this.size.width,this.size.height),this._setCanvas(this.contentCanvas),this.clearMode?this.setCompositeOperationMode("destination-out"):this.setCompositeOperationMode("source-over")},drawInClearMode(e){var t;this.cyReady=!1,this.setCompositeOperationMode("source-over",this.contentCtx),this.contentCtx.filter="none",this.clearCtx(this.contentCtx),this.contentCtx.drawImage(null!=(t=this.currCanvasImageElement)?t:this.imageElement,0,0,this.size.width,this.size.height),this.drawLine(e,this.clearModeCtx),this.setCompositeOperationMode("destination-out"),this.contentCtx.filter=`blur(${this.blurPx}px)`,this.contentCtx.drawImage(this.clearModeCanvas,0-this.clearModeShift,0-this.clearModeShift,this.size.width+2*this.clearModeShift,this.size.height+2*this.clearModeShift),this.cyReady=!0},drawInRestoreMode(e){this.clearCtx(this.blurCtx),this.drawLine(e,this.blurCtx),this.setCompositeOperationMode("source-in",this.blurCtx),this.blurCtx.filter="none",this.blurCtx.drawImage(this.initImgCanvas,0,0,this.size.width,this.size.height),this.setCompositeOperationMode("source-over",this.blurCtx),this.blurCtx.filter=`blur(${this.blurPx}px)`,this.contentCtx.drawImage(this.blurCanvas,0,0,this.size.width,this.size.height)},clearCtx(e){const t=null!=e?e:this.contentCtx;t.clearRect(0,0,this.size.width,this.size.height)},drawImageToInitImgCanvas(){this.initImgCtx.drawImage(this.initImageElement,0,0,this.size.width,this.size.height),this.setCompositeOperationMode("destination-in",this.initImgCtx)},setCompositeOperationMode(e,t){t?t.globalCompositeOperation=e:this.contentCtx.globalCompositeOperation=e},getCanvasBlob(e){return new Promise(((t,n)=>{e.toBlob((e=>{t(e)}),"image/png")}))},pushStep(){const e=this.getCanvasBlob(this.contentCanvas);this.stepsQueue.push(e)},handleKeydown(e){e.repeat||(e.ctrlKey||e.metaKey)&&(e.shiftKey?"z"!==e.key&&"Z"!==e.key||(e.preventDefault(),this.redo()):"z"===e.key||"Z"===e.key?(e.preventDefault(),this.undo()):"="===e.key?(e.preventDefault(),kt.Z.zoomIn()):"-"===e.key&&(e.preventDefault(),kt.Z.zoomOut()))},updateCurrCanvasImageElement(e){this.currCanvasImageElement||(this.currCanvasImageElement=new Image);const t=URL.createObjectURL(null!=e?e:this.steps[this.currStep]);return this.currCanvasImageElement.src=URL.createObjectURL(null!=e?e:this.steps[this.currStep]),t},undo(){if(!this.isProcessingStepsQueue){this.setCurrStep(Math.max(this.currStep-1,0));const e=this.updateCurrCanvasImageElement();this.currCanvasImageElement.onload=()=>{this.clearCtx(),this.clearModeCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.contentCtx.filter="none",this.drawImageToCtx(this.currCanvasImageElement),this.clearMode&&(this.contentCtx.filter=`blur(${this.blurPx}px)`),URL.revokeObjectURL(e)}}},redo(){this.isProcessingStepsQueue||(this.setCurrStep(Math.min(this.currStep+1,this.steps.length-1)),this.updateCurrCanvasImageElement(),this.currCanvasImageElement.onload=()=>{this.clearCtx(),this.contentCtx.filter="none",this.drawImageToCtx(this.currCanvasImageElement),this.clearMode&&(this.contentCtx.filter=`blur(${this.blurPx}px)`)})},handleBrushEnter(){this.showBrush=!0},handleBrushLeave(){this.showBrush=!1},disableTouchEvent(e){e.preventDefault(),e.stopPropagation()}})});const Ft=(0,oe.Z)($t,[["render",Nt],["__scopeId","data-v-16a460b0"],["__file","BgRemoveArea.vue"]]);var jt=Ft;const Bt=e=>((0,P.dD)("data-v-4d35e06e"),e=e(),(0,P.Cn)(),e),Rt=["id"],Ht=["id"],Ut={class:"pr-10"},Wt=["placeholder"],Vt={key:0,class:"nu-page__icons"},Gt={key:0,class:"page-bar__icons"},qt={class:"body-2"},Kt={key:0,class:"layer-num"},Yt=Bt((()=>(0,P._)("div",{class:"page-resizer__resizer-bar"},null,-1)));function Xt(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("page-content"),l=(0,P.up)("dim-background"),c=(0,P.up)("nu-controller"),d=(0,P.up)("lazy-load"),u=(0,P.up)("snap-line-area"),g=(0,P.Q2)("hint");return(0,P.wg)(),(0,P.iD)("div",{ref:"page-wrapper",id:`nu-page-wrapper_${e.pageIndex}`,style:(0,k.j5)(e.pageRootStyles),class:(0,k.C_)({"click-disabled":e.isAnyBackgroundImageControl})},[(0,P._)("div",{class:"nu-page full-size",id:`nu-page_${e.pageIndex}`,style:(0,k.j5)(e.pageStyles),ref:"page"},[e.isDetailPage||e.$isTouchDevice()?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",{key:0,class:"page-title text-left pb-10",style:(0,k.j5)({width:e.config.width*(e.scaleRatio/100)+"px",transform:`translate3d(0, -100%, ${e.isAnyLayerActive?0:1}px)`})},[(0,P._)("span",Ut,(0,k.zw)(e.$t("NN0134",{num:`${e.pageIndex+1}`})),1),(0,P.wy)((0,P._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.pageName=t),placeholder:`${e.$t("NN0081")}`,onFocus:t[1]||(t[1]=t=>e.pageNameFocused()),onBlur:t[2]||(t[2]=t=>e.stepRecord())},null,40,Wt),[[Z.nr,e.pageName]]),e.isBackgroundImageControl?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",Vt,[(0,P.wy)((0,P.Wm)(s,{class:"pointer btn-line-template mr-15",pageIndex:e.pageIndex,iconName:"line-template",iconWidth:"18px",iconColor:"gray-3",onClick:t[3]||(t[3]=t=>e.openLineTemplatePopup())},null,8,["pageIndex"]),[[g,e.$t("NN0138")]]),(0,P.wy)((0,P.Wm)(s,{class:"pointer mr-10",iconName:"add-page",iconWidth:"18px",iconColor:"gray-3",onClick:t[4]||(t[4]=t=>e.addPage())},null,512),[[g,e.$t("NN0139")]]),(0,P.wy)((0,P.Wm)(s,{class:(0,k.C_)(["pointer",[{"mr-10":e.getPageCount>1}]]),iconName:"duplicate-page",iconWidth:"18px",iconColor:"gray-3",onClick:t[5]||(t[5]=t=>e.duplicatePage())},null,8,["class"]),[[g,e.$t("NN0140")]]),e.getPageCount>1?(0,P.wy)(((0,P.wg)(),(0,P.j4)(s,{key:0,class:"pointer",iconName:"trash",iconWidth:"18px",iconColor:"gray-3",onClick:t[6]||(t[6]=t=>e.deletePage())},null,512)),[[g,e.$t("NN0141")]]):(0,P.kq)("",!0)]))],4)),e.isDetailPage&&!e.$isTouchDevice()?((0,P.wg)(),(0,P.iD)("div",{key:1,class:"page-bar text-left mb-5",style:(0,k.j5)({height:e.config.height*(e.scaleRatio/100)+"px"})},[e.isBackgroundImageControl?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",Gt,[(0,P._)("div",qt,[(0,P._)("span",null,(0,k.zw)(e.pageIndex+1),1)]),(0,P.Wm)(s,{class:"pointer mt-15",iconName:"add-page",iconWidth:"15px",iconColor:"gray-2",onClick:t[7]||(t[7]=t=>e.addPage())}),(0,P.Wm)(s,{class:"pointer mt-10",iconName:"duplicate-page",iconWidth:"15px",iconColor:"gray-2",onClick:t[8]||(t[8]=t=>e.duplicatePage())}),e.getPageCount>1?((0,P.wg)(),(0,P.j4)(s,{key:0,class:"pointer mt-10",iconName:"trash",iconWidth:"15px",iconColor:"gray-2",onClick:t[9]||(t[9]=t=>e.deletePage())})):(0,P.kq)("",!0)]))],4)):(0,P.kq)("",!0),!e.isOutOfBound||e.hasEditingText?((0,P.wg)(),(0,P.iD)(P.HY,{key:2},[(0,P._)("div",{class:(0,k.C_)(["pages-wrapper",`nu-page-${e.pageIndex}`]),style:(0,k.j5)(e.wrapperStyles),onKeydown:[t[11]||(t[11]=(0,Z.iM)(((...t)=>e.handleSpecialCharacter&&e.handleSpecialCharacter(...t)),["self"])),t[12]||(t[12]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.del()),["exact","self","prevent","stop"]),["delete"])),t[13]||(t[13]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.copy()),["ctrl","exact","self","prevent","stop"]),["c"])),t[14]||(t[14]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.copy()),["meta","exact","self","prevent","stop"]),["c"])),t[15]||(t[15]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.deselect()),["ctrl","exact","self","prevent","stop"]),["d"])),t[16]||(t[16]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.deselect()),["meta","exact","self","prevent","stop"]),["d"])),t[17]||(t[17]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.cut()),["ctrl","exact","self","prevent","stop"]),["x"])),t[18]||(t[18]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.cut()),["meta","exact","self","prevent","stop"]),["x"])),t[19]||(t[19]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.save()),["ctrl","exact","self","prevent","stop"]),["s"])),t[20]||(t[20]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.save()),["meta","exact","self","prevent","stop"]),["s"])),t[21]||(t[21]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.paste(t)),["ctrl","exact","self","prevent","stop"]),["v"])),t[22]||(t[22]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.paste(t)),["meta","exact","self","prevent","stop"]),["v"])),t[23]||(t[23]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.group()),["ctrl","exact","self","prevent","stop"]),["g"])),t[24]||(t[24]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.group()),["meta","exact","self","prevent","stop"]),["g"])),t[25]||(t[25]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.selectAll()),["ctrl","exact","self","prevent","stop"]),["a"])),t[26]||(t[26]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.selectAll()),["meta","exact","self","prevent","stop"]),["a"])),t[27]||(t[27]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.ungroup()),["ctrl","shift","exact","self","prevent","stop"]),["g"])),t[28]||(t[28]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.ungroup()),["meta","shift","exact","self","prevent","stop"]),["g"])),t[29]||(t[29]=(0,Z.D2)((0,Z.iM)((t=>e.undo()),["ctrl","exact","self","prevent","stop"]),["z"])),t[30]||(t[30]=(0,Z.D2)((0,Z.iM)((t=>e.undo()),["meta","exact","self","prevent","stop"]),["z"])),t[31]||(t[31]=(0,Z.D2)((0,Z.iM)((t=>e.redo()),["ctrl","shift","exact","self","prevent","stop"]),["z"])),t[32]||(t[32]=(0,Z.D2)((0,Z.iM)((t=>e.redo()),["meta","shift","exact","self","prevent","stop"]),["z"])),t[33]||(t[33]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.zoomOut()),["ctrl","exact","self","prevent","stop"]),["-"])),t[34]||(t[34]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.zoomOut()),["meta","exact","self","prevent","stop"]),["-"])),t[35]||(t[35]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.zoomIn()),["ctrl","exact","self","prevent","stop"]),["+"])),t[36]||(t[36]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.zoomIn()),["meta","exact","self","prevent","stop"]),["+"])),t[37]||(t[37]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.left()),["exact","self","prevent","stop"]),["left"])),t[38]||(t[38]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.up()),["exact","self","prevent","stop"]),["up"])),t[39]||(t[39]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.right()),["exact","self","prevent","stop"]),["right"])),t[40]||(t[40]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.down()),["exact","self","prevent","stop"]),["down"])),t[41]||(t[41]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.left(!0)),["shift","exact","self","prevent","stop"]),["left"])),t[42]||(t[42]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.up(!0)),["shift","exact","self","prevent","stop"]),["up"])),t[43]||(t[43]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.right(!0)),["shift","exact","self","prevent","stop"]),["right"])),t[44]||(t[44]=(0,Z.D2)((0,Z.iM)((t=>e.ShortcutUtils.down(!0)),["shift","exact","self","prevent","stop"]),["down"]))],onMouseover:t[45]||(t[45]=t=>e.togglePageHighlighter(!0)),onMouseleave:t[46]||(t[46]=t=>e.togglePageHighlighter(!1)),tabindex:"0"},[(0,P.Wm)(d,(0,P.dG)({class:"lazy-load",target:".editor-view",rootMargin:"1500px 0px 1500px 0px"},e.lazyloadSize,{forceRender:e.forceRender,threshold:[0,1]}),{default:(0,P.w5)((()=>[(0,P._)("div",{class:"click-enable",style:(0,k.j5)(e.sizeStyles)},[(0,P._)("div",{class:"scale-container relative",style:(0,k.j5)(e.scaleContainerStyles)},[(0,P.Wm)(a,{config:e.config,pageIndex:e.pageIndex,contentScaleRatio:e.contentScaleRatio,snapUtils:e.snapUtils},null,8,["config","pageIndex","contentScaleRatio","snapUtils"]),e.showAllAdminTool?((0,P.wg)(),(0,P.iD)("div",Kt,"Layer數量: "+(0,k.zw)(e.config.layers.length),1)):(0,P.kq)("",!0),e.imgControlPageIdx===e.pageIndex?((0,P.wg)(),(0,P.j4)(l,{key:1,config:e.config,contentScaleRatio:e.contentScaleRatio},null,8,["config","contentScaleRatio"])):(0,P.kq)("",!0)],4),e.imgControlPageIdx!==e.pageIndex?((0,P.wg)(),(0,P.iD)("div",{key:0,class:"page-control",style:(0,k.j5)(e.styles("control"))},[e.currFocusPageIndex===e.pageIndex&&e.currLayer.type?((0,P.wg)(),(0,P.j4)(c,{"data-identifier":"controller",key:`controller-${e.currLayer.id}`,layerIndex:e.currSelectedIndex,pageIndex:e.pageIndex,page:e.config,config:e.currLayer,snapUtils:e.snapUtils,contentScaleRatio:e.contentScaleRatio,onSetFocus:t[10]||(t[10]=t=>e.setFocus()),onIsDragging:e.handleDraggingController},null,8,["layerIndex","pageIndex","page","config","snapUtils","contentScaleRatio","onIsDragging"])):(0,P.kq)("",!0)],4)):(0,P.kq)("",!0)],4)])),_:1},16,["forceRender"])],38),(0,P.wy)((0,P._)("div",{class:(0,k.C_)([e.useMobileEditor?"page-highlighter page-highlighter--mobile":"page-highlighter",{"page-highlighter--in-bg-settings":e.inBgSettingMode}]),style:(0,k.j5)(e.wrapperStyles)},null,6),[[Z.F8,!e.isBgImgCtrl&&(e.pageIsHover||e.currFocusPageIndex===e.pageIndex)]]),e.config.isEnableBleed?((0,P.wg)(),(0,P.iD)("div",{key:0,class:(0,k.C_)(`nu-page-bleed-${e.pageIndex}`),style:(0,k.j5)(e.bleedLineAreaStyles())},null,6)):(0,P.kq)("",!0),e.currActivePageIndex!==e.pageIndex||!e.isDetailPage||e.isImgCtrl||e.isBgImgCtrl?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",{key:1,class:"page-resizer",ref:"pageResizer",onPointerdown:t[47]||(t[47]=(0,Z.iM)((t=>e.pageResizeStart(t)),["left","stop"])),onTouchstart:t[48]||(t[48]=(...t)=>e.disableTouchEvent&&e.disableTouchEvent(...t)),onMouseenter:t[49]||(t[49]=t=>e.toggleResizerHint(!0)),onMouseleave:t[50]||(t[50]=t=>e.toggleResizerHint(!1))},[(0,P.Wm)(s,{class:"page-resizer__resizer-bar",iconName:"move-vertical",iconWidth:"15px",iconColor:"white"}),Yt,(0,P.wy)((0,P._)("div",{class:"page-resizer__hint no-wrap"},(0,k.zw)(e.resizerHint),513),[[Z.F8,e.isShownResizerHint]])],544)),(0,P.Wm)(u,{config:e.config,contentScaleRatio:e.contentScaleRatio,pageIndex:e.pageIndex,snapUtils:e.snapUtils},null,8,["config","contentScaleRatio","pageIndex","snapUtils"])],64)):((0,P.wg)(),(0,P.iD)("div",{key:3,class:(0,k.C_)(["pages-wrapper",`nu-page-${e.pageIndex}`]),style:(0,k.j5)(e.wrapperStyles)},null,6))],12,Ht)],14,Rt)}const Qt=e=>((0,P.dD)("data-v-353167e3"),e=e(),(0,P.Cn)(),e),Jt={key:0,class:"dim-background"},en=Qt((()=>(0,P._)("div",{class:"dim-background__backdrop"},null,-1))),tn={class:"page-control"},nn={key:1,class:"dim-background"};function rn(e,t,n,r,i,o){const s=(0,P.up)("nu-layer"),a=(0,P.up)("nu-img-controller"),l=(0,P.up)("nu-image"),c=(0,P.up)("nu-background-controller");return e.isImgCtrl?((0,P.wg)(),(0,P.iD)("div",Jt,[en,(0,P._)("div",{class:"dim-background__content-area",style:(0,k.j5)(e.contentAreaStyles)},[(0,P._)("div",null,[(0,P.Wm)(s,{style:(0,k.j5)("opacity: 0.45"),layerIndex:e.layerIndex,pageIndex:e.pageIndex,page:e.config,primaryLayer:e.primaryLayer,imgControl:!0,forRender:!0,contentScaleRatio:e.contentScaleRatio,config:e.image},null,8,["style","layerIndex","pageIndex","page","primaryLayer","contentScaleRatio","config"])]),(0,P._)("div",null,[(0,P.Wm)(s,{layerIndex:e.layerIndex,pageIndex:e.pageIndex,page:e.config,primaryLayer:e.primaryLayer,forRender:!0,contentScaleRatio:e.contentScaleRatio,config:e.image},null,8,["layerIndex","pageIndex","page","primaryLayer","contentScaleRatio","config"])]),(0,P._)("div",tn,[(0,P.Wm)(a,{layerIndex:e.layerIndex,pageIndex:e.pageIndex,page:e.config,contentScaleRatio:e.contentScaleRatio,primaryLayer:e.primaryLayer,primaryLayerIndex:-1,config:e.image},null,8,["layerIndex","pageIndex","page","contentScaleRatio","primaryLayer","config"])])],4)])):e.isBgImgCtrl?((0,P.wg)(),(0,P.iD)("div",nn,[(0,P._)("div",{class:"background-control",style:(0,k.j5)(e.backgroundControlStyles)},[(0,P.Wm)(l,{config:e.image,inheritStyle:e.backgroundFlipStyles,isBgImgControl:!0,contentScaleRatio:e.contentScaleRatio,forRender:!0,pageIndex:e.pageIndex,page:e.config,onOnload:e.bgImgOnload,layerIndex:e.layerIndex},null,8,["config","inheritStyle","contentScaleRatio","pageIndex","page","onOnload","layerIndex"]),(0,P._)("div",{class:"dim-background__content-area hollow",style:(0,k.j5)(e.contentAreaStyles)},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.getHalation,((e,t)=>((0,P.wg)(),(0,P.j4)((0,P.LL)(e.tag),(0,P.dG)({key:t},e.attrs),null,16)))),128))],4),(0,P.Wm)(c,{config:e.image,pageIndex:e.pageIndex,page:e.config,contentScaleRatio:e.contentScaleRatio},null,8,["config","pageIndex","page","contentScaleRatio"])],4)])):(0,P.kq)("",!0)}const on={class:"nu-background-controller"};function sn(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("div",on,[(0,P._)("div",{class:"nu-controller__body",ref:"body",style:(0,k.j5)(e.styles),onPointerdown:t[5]||(t[5]=(0,Z.iM)(((...t)=>e.moveStart&&e.moveStart(...t)),["stop"])),onPinch:t[6]||(t[6]=(...t)=>e.pinchHandler&&e.pinchHandler(...t))},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.controlPoints.scalers,((n,r)=>((0,P.wg)(),(0,P.iD)("div",{class:"controller-point",key:r,style:(0,k.j5)(Object.assign(n.styles,e.cursorStyles(n.cursor,e.getPageRotate))),onPointerdown:t[0]||(t[0]=(0,Z.iM)(((...t)=>e.scaleStart&&e.scaleStart(...t)),["stop"]))},null,36)))),128)),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.controlPoints.scalers,((n,r)=>((0,P.wg)(),(0,P.iD)("div",{class:"control-point",key:`scaler-${r}`,style:(0,k.j5)(Object.assign(e.scalerStyles(n.styles),e.cursorStyles(n.cursor,e.getPageRotate))),onPointerdown:t[1]||(t[1]=(0,Z.iM)((t=>e.$isTouchDevice()?null:e.scaleStart(t)),["prevent","stop"])),onTouchstart:t[2]||(t[2]=t=>e.$isTouchDevice()?null:e.disableTouchEvent(t))},null,36)))),128)),e.$isTouchDevice()?((0,P.wg)(!0),(0,P.iD)(P.HY,{key:0},(0,P.Ko)(e.controlPoints.scalerTouchAreas,((n,r)=>((0,P.wg)(),(0,P.iD)("div",{class:"control-point",key:`scaler-touch-${r}`,style:(0,k.j5)(Object.assign(e.scalerStyles(n.styles),e.cursorStyles(n.cursor,e.getPageRotate))),onPointerdown:t[3]||(t[3]=(0,Z.iM)(((...t)=>e.scaleStart&&e.scaleStart(...t)),["prevent","stop"])),onTouchstart:t[4]||(t[4]=(...t)=>e.disableTouchEvent&&e.disableTouchEvent(...t))},null,36)))),128)):(0,P.kq)("",!0)],36)])}var an=n(40881),ln=n(35426),cn=n(52632),dn=Object.defineProperty,un=Object.defineProperties,gn=Object.getOwnPropertyDescriptors,pn=Object.getOwnPropertySymbols,hn=Object.prototype.hasOwnProperty,mn=Object.prototype.propertyIsEnumerable,yn=(e,t,n)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fn=(e,t)=>{for(var n in t||(t={}))hn.call(t,n)&&yn(e,n,t[n]);if(pn)for(var n of pn(t))mn.call(t,n)&&yn(e,n,t[n]);return e},bn=(e,t)=>un(e,gn(t)),vn=(0,P.aZ)({emits:[],props:{config:{type:Object,required:!0},pageIndex:{type:Number,required:!0},page:{type:Object,required:!0},contentScaleRatio:{default:1,type:Number}},data(){return{controlPoints:an.Z.getControlPoints(),isControlling:!1,initialPos:{x:0,y:0},initImgPos:{x:0,y:0},initImgSize:{width:this.config.styles.imgWidth,height:this.config.styles.imgHeight},center:{x:0,y:0},control:{xSign:1,ySign:1},initPinchPos:null,isPinching:!1,isMoving:!1}},mounted(){if(l.Z.isTouchDevice()){const e=document.getElementById(`nu-page-wrapper_${this.pageIndex}`),t=e.getBoundingClientRect();p.Z.setMobilePhysicalPage({pageIndex:this.pageIndex,originSize:{width:t.width,height:t.height}})}},unmounted(){p.Z.setBackgroundImageControlDefault()},computed:bn(fn({},(0,ze.Se)({scaleRatio:"getPageScaleRatio"})),{getImgX(){return this.config.styles.imgX},getImgY(){return this.config.styles.imgY},getImgWidth(){return this.config.styles.imgWidth},getImgHeight(){return this.config.styles.imgHeight},getPageRotate(){return 0},styles(){const e=this.contentScaleRatio*(l.Z.isTouchDevice()?.01*this.scaleRatio:1);return{width:this.config.styles.imgWidth*e+"px",height:this.config.styles.imgHeight*e+"px",outline:100/this.scaleRatio*2+"px solid #7190CC"}},pageSize(){return this.page.isEnableBleed?p.Z.removeBleedsFromPageSize(this.page):this.page}}),methods:bn(fn({},(0,ze.OI)({updateConfig:"imgControl/UPDATE_CONFIG"})),{scalerStyles(e){const t=fn({},e);return t.transform+=` scale(${100/this.scaleRatio})`,t},pinchHandler(e){switch(e.phase){case"start":this.isPinching=!0,this.initImgPos={x:this.config.styles.imgX,y:this.config.styles.imgY},this.initImgSize={width:this.config.styles.imgWidth,height:this.config.styles.imgHeight};break;case"move":{this.isPinching=!0;const{contentScaleRatio:t}=this.page,n={width:this.page.width*t,height:this.page.height*t},{styles:r}=this.config,i=t;this.initPinchPos||(this.initPinchPos={x:e.x,y:e.y});const o={x:(e.x-ke.Z.mobileCenterPos.x+.5*n.width)/i-r.imgX,y:(e.y-ke.Z.mobileCenterPos.y+.5*n.height)/i-r.imgY},s={x:-o.x/r.imgWidth,y:-o.y/r.imgHeight},a={width:this.initImgSize.width*(e.scale-1)*.5,height:this.initImgSize.height*(e.scale-1)*.5},l={width:this.initImgSize.width+a.width,height:this.initImgSize.height+a.height},c={x:(e.x-this.initPinchPos.x)/i,y:(e.y-this.initPinchPos.y)/i},d={x:this.initImgPos.x+a.width*s.x+c.x,y:this.initImgPos.y+a.height*s.y+c.y},{imgWidth:u,imgHeight:g,imgX:p,imgY:h}=this.imgPinchScaleClamp(l,d,s,c);this.updateConfig({imgX:p,imgY:h,imgWidth:u,imgHeight:g});break}case"end":this.isPinching=!1,this.isMoving||(Object.assign(this.initImgPos,{x:this.getImgX,y:this.getImgY}),le.ZP.addPointerEvent("pointermove",this.moving),le.ZP.addPointerEvent("pointerup",this.moveEnd),this.setCursorStyle("move")),this.initialPos=null,this.initPinchPos=null,this.initImgPos={x:this.config.styles.imgX,y:this.config.styles.imgY},this.initImgSize={width:this.config.styles.imgWidth,height:this.config.styles.imgHeight}}},imgPinchScaleClamp(e,t,n,r){const i={x:.5*-e.width+.5*this.pageSize.width,y:.5*-e.height+.5*this.pageSize.height},o={width:.5*(e.width-this.pageSize.width),height:.5*(e.height-this.pageSize.height)},s={width:e.width-this.initImgSize.width,height:e.height-this.initImgSize.height};if(Math.abs(t.x-i.x)>o.width){if(0===this.getImgX||0===Math.round(-this.getImgX+this.pageSize.width-this.getImgWidth))return{imgWidth:this.getImgWidth,imgHeight:this.getImgHeight,imgX:this.getImgX,imgY:this.getImgY};{let a=-1;t.x-i.x>0?(t.x=0,s.width=-(this.initImgPos.x+r.x)/n.x):(s.width=-(this.initImgPos.x+r.x-this.pageSize.width+this.initImgSize.width)/(1+n.x),t.x=this.pageSize.width-(this.initImgSize.width+s.width)),e.width=this.initImgSize.width+s.width,a=2*s.width/this.initImgSize.width+1,s.height=this.initImgSize.height*(a-1)*.5,e.height=this.initImgSize.height+s.height,t.y=this.initImgPos.y+s.height*n.y+r.y,i.x=.5*-e.width+.5*this.pageSize.width,i.y=.5*-e.height+.5*this.pageSize.height,o.width=.5*(e.width-this.pageSize.width),o.height=.5*(e.height-this.pageSize.height)}}if(Math.abs(t.y-i.y)>o.height){if(0===this.getImgY||0===Math.round(-this.getImgY+this.pageSize.height-this.getImgHeight))return{imgWidth:this.getImgWidth,imgHeight:this.getImgHeight,imgX:this.getImgX,imgY:this.getImgY};{let o=-1;t.y-i.y>0?(t.y=0,s.height=-(this.initImgPos.y+r.y)/n.y):(s.height=-(this.initImgPos.y+r.y-this.pageSize.height+this.initImgSize.height)/(1+n.y),t.y=this.pageSize.height-(this.initImgSize.height+s.height)),e.height=this.initImgSize.height+s.height,o=2*s.height/this.initImgSize.height+1,s.width=this.initImgSize.width*(o-1)*.5,e.width=this.initImgSize.width+s.width,t.x=this.initImgPos.x+s.width*n.x+r.x}}return{imgWidth:e.width,imgHeight:e.height,imgX:t.x,imgY:t.y}},moveStart(e){this.isPinching=!1,this.isMoving=!0,le.ZP.checkIsMultiTouch(e)||(this.isControlling=!0,this.initialPos=ce.Z.getMouseAbsPoint(e),Object.assign(this.initImgPos,{x:this.getImgX,y:this.getImgY}),le.ZP.addPointerEvent("pointermove",this.moving),le.ZP.addPointerEvent("pointerup",this.moveEnd),this.setCursorStyle("move"))},moving(e){if(this.isPinching)return;null===this.initialPos&&(this.initialPos=ce.Z.getMouseAbsPoint(e),Object.assign(this.initImgPos,{x:this.getImgX,y:this.getImgY})),e.preventDefault();const t={x:.5*-this.getImgWidth+.5*this.pageSize.width,y:.5*-this.getImgHeight+.5*this.pageSize.height},n={width:.5*(this.getImgWidth-this.pageSize.width),height:.5*(this.getImgHeight-this.pageSize.height)},r=ce.Z.getMouseRelPoint(e,this.initialPos);r.x=r.x*(100/this.scaleRatio)/this.page.contentScaleRatio,r.y=r.y*(100/this.scaleRatio)/this.page.contentScaleRatio;const i=this.imgPosMapper(r);Math.abs(i.x-t.x)>n.width&&(i.x=i.x-t.x>0?0:this.pageSize.width-this.getImgWidth),Math.abs(i.y-t.y)>n.height&&(i.y=i.y-t.y>0?0:this.pageSize.height-this.getImgHeight),this.updateConfig({imgX:i.x,imgY:i.y})},imgPosMapper(e){const t=this.getPageRotate*Math.PI/180;return{x:e.x*Math.cos(t)+e.y*Math.sin(t)+this.initImgPos.x,y:-e.x*Math.sin(t)+e.y*Math.cos(t)+this.initImgPos.y}},moveEnd(e){this.isMoving=!1,le.ZP.checkIsMultiTouch(e)||(this.setCursorStyle("default"),le.ZP.removePointerEvent("pointermove",this.moving),le.ZP.removePointerEvent("pointerup",this.moveEnd))},scaleStart(e){if(le.ZP.checkIsMultiTouch(e))return;this.isControlling=!0,this.initialPos=ce.Z.getMouseAbsPoint(e),this.initImgSize={width:this.getImgWidth,height:this.getImgHeight};const t=this.$refs.body.getBoundingClientRect();this.center=an.Z.getRectCenter(t),Object.assign(this.initImgPos,{x:this.getImgX,y:this.getImgY});const n=this.getPageRotate*Math.PI/180,r=ce.Z.getMouseRelPoint(e,this.center),i=an.Z.getNoRotationPos(r,this.center,n);this.control.xSign=i.x-this.center.x>0?1:-1,this.control.ySign=i.y-this.center.y>0?1:-1,this.currCursorStyling(e),le.ZP.addPointerEvent("pointermove",this.scaling),le.ZP.addPointerEvent("pointerup",this.scaleEnd)},scaling(e){if(le.ZP.checkIsMultiTouch(e)||!this.initialPos)return;e.preventDefault();let t=this.getImgWidth,n=this.getImgHeight;const r=this.getPageRotate*Math.PI/180,i=ce.Z.getMouseRelPoint(e,this.initialPos),o=ln.ZP.getActualMoveOffset(i.x,i.y),[s,a]=[o.offsetX/this.page.contentScaleRatio,o.offsetY/this.page.contentScaleRatio],l=this.control.xSign*(a*Math.sin(r)+s*Math.cos(r)),c=this.control.ySign*(a*Math.cos(r)-s*Math.sin(r));if(0===l||0===c)return;const d=this.initImgSize.width,u=this.initImgSize.height;(t+l)/d>=(n+c)/u?(t=l+d,n=t*u/d):(n=c+u,t=n*d/u);const g={width:t-d,height:n-u},p={x:this.control.xSign<0?-g.width+this.initImgPos.x:this.initImgPos.x,y:this.control.ySign<0?-g.height+this.initImgPos.y:this.initImgPos.y},h={x:.5*-t+.5*this.pageSize.width,y:.5*-n+.5*this.pageSize.height},m={width:.5*(t-this.pageSize.width),height:.5*(n-this.pageSize.height)},y=t/n;Math.abs(p.x-h.x)>m.width&&(this.control.xSign<0?(p.x=0,g.width=this.initImgPos.x):g.width=this.pageSize.width-this.initImgPos.x-d,g.height=g.width/y,p.y=this.control.ySign<0?-g.height+this.initImgPos.y:this.initImgPos.y,n=g.height+u,t=g.width+d,h.x=.5*-t+.5*this.pageSize.width,h.y=.5*-n+.5*this.pageSize.height,m.width=.5*(t-this.pageSize.width),m.height=.5*(n-this.pageSize.height)),Math.abs(p.y-h.y)>m.height&&(this.control.ySign<0?(p.y=0,g.height=this.initImgPos.y):g.height=this.pageSize.height-this.initImgPos.y-u,g.width=g.height*y,p.x=this.control.xSign<0?-g.width+this.initImgPos.x:this.initImgPos.x,n=g.height+u,t=g.width+d),this.updateConfig({imgX:p.x,imgY:p.y,imgWidth:t,imgHeight:n})},scaleEnd(e){le.ZP.checkIsMultiTouch(e)||(this.isControlling=!1,p.Z.setBackgroundImageControlDefault(),cn.Z.record(),p.Z.startBackgroundImageControl(this.pageIndex),this.setCursorStyle("default"),le.ZP.removePointerEvent("pointermove",this.scaling),le.ZP.removePointerEvent("pointerup",this.scaleEnd))},cursorStyles(e,t){const n=t>=0?(e+Math.floor(t/45))%8:(e+Math.ceil(t/45)+8)%8;return{cursor:this.controlPoints.cursors[n]}},setCursorStyle(e){const t=this.$el;t.style.cursor=e,document.body.style.cursor=e},currCursorStyling(e){const t=e.target;this.setCursorStyle(t.style.cursor)},disableTouchEvent(e){this.$isTouchDevice()&&(e.preventDefault(),e.stopPropagation())}})});const wn=(0,oe.Z)(vn,[["render",sn],["__scopeId","data-v-4b1df249"],["__file","NuBackgroundController.vue"]]);var Nn=wn,Sn=n(71446),xn=n(83122),Pn=Object.defineProperty,In=Object.defineProperties,_n=Object.getOwnPropertyDescriptors,kn=Object.getOwnPropertySymbols,Zn=Object.prototype.hasOwnProperty,Cn=Object.prototype.propertyIsEnumerable,zn=(e,t,n)=>t in e?Pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tn=(e,t)=>{for(var n in t||(t={}))Zn.call(t,n)&&zn(e,n,t[n]);if(kn)for(var n of kn(t))Cn.call(t,n)&&zn(e,n,t[n]);return e},Ln=(e,t)=>In(e,_n(t)),En=(0,P.aZ)({emits:[],components:{NuBackgroundController:Nn},data(){return{}},props:{config:{type:Object,required:!0},contentScaleRatio:{default:1,type:Number}},computed:Ln(Tn(Tn({},(0,ze.rn)("imgControl",["image","layerInfo","primaryLayer"])),(0,ze.Se)({imgControlPageIdx:"imgControl/imgControlPageIdx",isImgCtrl:"imgControl/isImgCtrl",isBgImgCtrl:"imgControl/isBgImgCtrl",pageScaleRatio:"getPageScaleRatio"})),{pageIndex(){return this.layerInfo.pageIndex},layerIndex(){return-1!==this.layerInfo.subLayerIdx?this.layerInfo.subLayerIdx:this.layerInfo.layerIndex},backgroundControlStyles(){const e=this.image;let t=e.styles.imgX,n=e.styles.imgY;this.config.isEnableBleed&&(t+=this.config.bleeds.left,n+=this.config.bleeds.top);const r=this.contentScaleRatio*(l.Z.isTouchDevice()?.01*this.pageScaleRatio:1);return{width:e.styles.imgWidth*r+"px",height:e.styles.imgHeight*r+"px",left:t*r+"px",top:n*r+"px"}},backgroundFlipStyles(){const{horizontalFlip:e,verticalFlip:t}=this.image.styles;return Sn.Z.convertFlipStyle(e,t)},getHalation(){const{styles:{adjust:e}}=this.config.backgroundImage.config;if(!e)return[];const{width:t,height:n}=p.Z.removeBleedsFromPageSize(p.Z.getPage(this.imgControlPageIdx)),r={width:t/2*this.contentScaleRatio,x:t/2*this.contentScaleRatio,y:n/2*this.contentScaleRatio};return xn.Z.getHalation(e.halation,r)},contentAreaStyles(){return this.config.isEnableBleed?{top:this.config.bleeds.top*this.contentScaleRatio+"px",bottom:this.config.bleeds.bottom*this.contentScaleRatio+"px",left:this.config.bleeds.left*this.contentScaleRatio+"px",right:this.config.bleeds.right*this.contentScaleRatio+"px"}:{}}}),methods:{bgImgOnload(){this.$store.commit("imgControl/SET_IsBgCtrlImgLoaded",!0)}}});const Dn=(0,oe.Z)(En,[["render",rn],["__scopeId","data-v-353167e3"],["__file","DimBackground.vue"]]);var On=Dn,Mn=n(69243);const An=["onMouseover"],$n=["onMouseover"];function Fn(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("div",{class:"snap-area",style:(0,k.j5)(e.wrapperStyles())},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.closestSnaplines.v,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"snap-area__line snap-area__line--vr",key:t,style:(0,k.j5)(e.snapLineStyles("v",t))},null,4)))),128)),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.closestSnaplines.h,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"snap-area__line snap-area__line--hr",key:t,style:(0,k.j5)(e.snapLineStyles("h",t))},null,4)))),128)),e.isShowGuideline&&!e.useMobileEditor?((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.guidelines.v,((n,r)=>((0,P.wg)(),(0,P.iD)("div",{class:"snap-area__line snap-area__line--vr",key:n,style:(0,k.j5)(e.snapLineStyles("v",n,!0)),onMouseover:t=>e.lockGuideline?null:e.showGuideline(n,"v",r),onMouseout:t[0]||(t[0]=(...t)=>e.closeGuidelineTimer&&e.closeGuidelineTimer(...t))},null,44,An)))),128)),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.guidelines.h,((n,r)=>((0,P.wg)(),(0,P.iD)("div",{class:"snap-area__line snap-area__line--hr",key:n,style:(0,k.j5)(e.snapLineStyles("h",n,!0)),onMouseover:t=>e.lockGuideline?null:e.showGuideline(n,"h",r),onMouseout:t[1]||(t[1]=(...t)=>e.closeGuidelineTimer&&e.closeGuidelineTimer(...t))},null,44,$n)))),128))],64)):(0,P.kq)("",!0)],4)}var jn=n(82289),Bn=Object.defineProperty,Rn=Object.defineProperties,Hn=Object.getOwnPropertyDescriptors,Un=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable,Gn=(e,t,n)=>t in e?Bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qn=(e,t)=>{for(var n in t||(t={}))Wn.call(t,n)&&Gn(e,n,t[n]);if(Un)for(var n of Un(t))Vn.call(t,n)&&Gn(e,n,t[n]);return e},Kn=(e,t)=>Rn(e,Hn(t)),Yn=(0,P.aZ)({emits:[],props:{config:{type:Object,required:!0},pageIndex:{type:Number,required:!0},snapUtils:{type:jn.Z,required:!0},contentScaleRatio:{type:Number,required:!0}},data(){return{closestSnaplines:{v:[],h:[]},guidelineTimer:-1}},mounted(){this.snapUtils.on(`getClosestSnaplines-${this.snapUtils.id}`,this.getClosestSnaplines),this.snapUtils.on("clearSnapLines",this.clearSnap)},beforeUnmount(){this.snapUtils.off(`getClosestSnaplines-${this.snapUtils.id}`,this.getClosestSnaplines),this.snapUtils.off("clearSnapLines",this.clearSnap)},computed:Kn(qn(qn({},(0,ze.rn)(["isMoving"])),(0,ze.Se)({scaleRatio:"getPageScaleRatio",groupType:"getGroupType",lockGuideline:"getLockGuideline",useMobileEditor:"getUseMobileEditor"})),{isShowGuideline(){return Xe.Z.showGuideline},guidelines(){return this.config.guidelines}}),watch:{guidelines:{handler(){this.getClosestSnaplines()},deep:!0}},methods:{wrapperStyles(){return{width:this.config.width*this.contentScaleRatio*(this.scaleRatio/100)+"px",height:this.config.height*this.contentScaleRatio*(this.scaleRatio/100)+"px",transformStyle:p.Z._3dEnabledPageIndex===this.pageIndex?"preserve-3d":"initial"}},snapLineStyles(e,t,n){const{bleeds:r}=p.Z.getPageSizeWithBleeds(this.config);return this.config.isEnableBleed&&(t+="v"===e?r.left:"h"===e?r.top:0),t*=this.scaleRatio*this.contentScaleRatio/100,"v"===e?{height:"100%",width:"1px",transform:`translate(${t}px,0)`,"pointer-events":n&&!this.isMoving?"auto":"none"}:{width:"100%",height:"1px",transform:`translate(0,${t}px)`,"pointer-events":n&&!this.isMoving?"auto":"none"}},getClosestSnaplines(){this.closestSnaplines.v=[...this.snapUtils.closestSnaplines.v.map((e=>e.pos))],this.closestSnaplines.h=[...this.snapUtils.closestSnaplines.h.map((e=>e.pos))]},clearSnap(){this.snapUtils.clear(),this.closestSnaplines.v=[],this.closestSnaplines.h=[]},showGuideline(e,t,n){this.guidelineTimer=window.setTimeout((()=>{Xe.Z.isDragging||(Xe.Z.deleteGuideline(n,t,this.pageIndex),Xe.Z.event.emit("showGuideline",e,Xe.Z.mapSnaplineToGuidelineArea(e,t,this.pageIndex),t,this.pageIndex))}),100)},closeGuidelineTimer(){clearTimeout(this.guidelineTimer)}}});const Xn=(0,oe.Z)(Yn,[["render",Fn],["__scopeId","data-v-741552d1"],["__file","SnapLineArea.vue"]]);var Qn=Xn,Jn=n(37934),er=n(62013),tr=n(70118),nr=n(67579),rr=n(3162),ir=n(53556),or=n(46921),sr=n(50559),ar=Object.defineProperty,lr=Object.defineProperties,cr=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,gr=Object.prototype.propertyIsEnumerable,pr=(e,t,n)=>t in e?ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hr=(e,t)=>{for(var n in t||(t={}))ur.call(t,n)&&pr(e,n,t[n]);if(dr)for(var n of dr(t))gr.call(t,n)&&pr(e,n,t[n]);return e},mr=(e,t)=>lr(e,cr(t)),yr=(0,P.aZ)({components:{PageContent:Mn.Z,DimBackground:On,SnapLineArea:Qn,LazyLoad:Jn.Z},created(){this.updateSnapUtilsIndex(this.pageIndex)},data(){return{initialRelPos:{y:0},currentAbsPos:{x:0,y:0},currentRelPos:{y:0},isShownScrollBar:!1,initialPageHeight:0,isShownResizerHint:!1,isResizingPage:!1,pageIsHover:!1,ShortcutUtils:kt.Z,currDraggingIndex:-1}},props:{pageState:{type:Object,required:!0},pageIndex:{type:Number,required:!0},overflowContainer:{type:null,required:!0},isScaling:{type:Boolean,default:!1},minContentScaleRatio:{type:Number,default:0},isAnyBackgroundImageControl:{type:Boolean,default:!1}},emits:["stepChange"],mounted(){this.initialPageHeight=this.config.height,this.$nextTick((()=>{var e,t;this.isShownScrollBar=!((null==(e=this.overflowContainer)?void 0:e.scrollHeight)===(null==(t=this.overflowContainer)?void 0:t.clientHeight))}))},watch:{pageIndex(e){this.updateSnapUtilsIndex(e)},isOutOfBound(e){if(e&&this.currFunctionPanelType===o.UJ.photoShadow&&g.ZP.pageIndex===this.pageIndex){tr.Z.deselect();const{pageId:e,layerId:t,subLayerId:n}=this.handleId;if(e===this.config.id){const r=this.config.layers.find((e=>e.id===t)),i=r.type===o.F5.group?r.layers.find((e=>e.id===n)):r;if(i){const r=g.ZP.getLayerInfoById(e,t,n);nr.ZP.updateShadowSrc(r,i.styles.shadow.srcObj)}}}}},computed:mr(hr(hr(hr(hr(hr({},(0,ze.rn)(["isMoving","currDraggedPhoto"])),(0,ze.rn)("shadow",["handleId"])),(0,ze.rn)({pinchScaleRatio:"pinchScaleRatio"})),(0,ze.Se)({imgControlPageIdx:"imgControl/imgControlPageIdx",inBgSettingMode:"mobileEditor/getInBgSettingMode"})),(0,ze.Se)({scaleRatio:"getPageScaleRatio",currSelectedInfo:"getCurrSelectedInfo",lastSelectedLayerIndex:"getLastSelectedLayerIndex",currActivePageIndex:"getCurrActivePageIndex",currSubSelectedInfo:"getCurrSubSelectedInfo",currSelectedIndex:"getCurrSelectedIndex",pages:"getPages",getPage:"getPage",currPanel:"getCurrSidebarPanelType",groupType:"getGroupType",lockGuideline:"getLockGuideline",currFunctionPanelType:"getCurrFunctionPanelType",isProcessingShadow:"shadow/isProcessing",_contentScaleRatio:"getContentScaleRatio",pagesLength:"getPagesLength",showAllAdminTool:"user/showAllAdminTool",useMobileEditor:"getUseMobileEditor",currCardIndex:"mobileEditor/getCurrCardIndex",topBound:"page/getTopBound",bottomBound:"page/getBottomBound",isImgCtrl:"imgControl/isImgCtrl",isBgImgCtrl:"imgControl/isBgImgCtrl"})),{forceRender(){return this.$isTouchDevice()&&this.pageIndex===g.ZP.pageIndex},contentScaleRatio(){return this.$isTouchDevice()?this.minContentScaleRatio&&this.useMobileEditor?this.minContentScaleRatio:this.pageState.config.contentScaleRatio:1},config(){return this.pageState.config.isEnableBleed?hr(hr({},this.pageState.config),p.Z.getPageSizeWithBleeds(this.pageState.config)):this.pageState.config},lazyloadSize(){return{minHeight:this.config.height*this.contentScaleRatio*(this.scaleRatio/100),maxHeight:this.config.height*this.contentScaleRatio*(this.scaleRatio/100)}},scaleContainerStyles(){const e=this.contentScaleRatio*(this.$isTouchDevice()?.01*this.scaleRatio:1);return mr(hr({width:this.config.width*e+"px",height:this.config.height*e+"px"},!l.Z.isTouchDevice()&&{transform:`scale(${.01*this.scaleRatio/this.contentScaleRatio})`}),{willChange:this.isScaling?"transform":""})},snapUtils(){return this.pageState.modules.snapUtils},currLayer(){return g.ZP.getCurrLayer},getPageCount(){return this.pages.length},pageName:{get(){return this.config.name},set(e){this.$store.commit("UPDATE_pageProps",{pageIndex:this.pageIndex,props:{name:e}})}},isBackgroundImageControl(){return this.config.backgroundImage.config.imgControl},isAnyLayerActive(){return-1!==this.currSelectedIndex},currFocusPageIndex(){return p.Z.currFocusPageIndex},isDetailPage(){return 1===this.groupType},pageStyles(){return{transformStyle:p.Z._3dEnabledPageIndex===this.pageIndex?"preserve-3d":"initial"}},pageRootStyles(){var e,t,n,r;let i="",o="",s="relative",a="";if(l.Z.isTouchDevice()){const{pinchScale:o,isPinchingEditor:l}=this.$store.state.mobileEditor;s="absolute",a="0 0",i=`translate(${null!=(e=this.config.x)?e:0}px, ${null!=(t=this.config.y)?t:0}px)`,l&&1!==o&&(i=`translate(${null!=(n=this.config.x)?n:0}px, ${null!=(r=this.config.y)?r:0}px) scale(${o})`)}else o=this.isDetailPage?"0px auto":"25px auto";return hr({position:s,transform:i,transformOrigin:a,margin:o},this.sizeStyles)},isOutOfBound(){return this.$isTouchDevice()&&!this.isDetailPage?this.pageIndex<=this.currCardIndex-2||this.pageIndex>=this.currCardIndex+2:this.pageIndex<=this.topBound-4||this.pageIndex>=this.bottomBound+4},hasEditingText(){const e=this.config;for(const t of e.layers)switch(t.type){case"text":if(t.contentEditable)return!0;break;case"group":for(const e of t.layers)if("text"===e.type&&e.contentEditable)return!0;break}return!1},selectedLayerCount(){return this.currSelectedInfo.layers.length},resizerHint(){return this.isResizingPage?`${(0,h.round)(this.pageState.config.physicalHeight,or.cB)}${this.config.unit}`:"拖曳調整畫布高度"},sizeStyles(){return{width:this.config.width*this.contentScaleRatio*this.scaleRatio*.01+"px",height:this.config.height*this.contentScaleRatio*this.scaleRatio*.01+"px"}},wrapperStyles(){return mr(hr({},this.sizeStyles),{transformStyle:p.Z._3dEnabledPageIndex===this.pageIndex?"preserve-3d":"initial"})}}),methods:mr(hr({},(0,ze.OI)({ADD_newLayers:"ADD_newLayers",setCurrActivePageIndex:"SET_currActivePageIndex",setDropdown:"popup/SET_STATE",setPanelType:"SET_currFunctionPanelType",setSidebarType:"SET_currSidebarPanelType",setCurrHoveredPageIndex:"SET_currHoveredPageIndex",updateSnapUtilsIndex:"UPDATE_snapUtilsIndex"})),{styles(e){const t=this.contentScaleRatio*(this.$isTouchDevice()?.01*this.scaleRatio:1);return"content"===e?{width:this.config.width*t+"px",height:this.config.height*t+"px",backgroundColor:this.config.backgroundColor,backgroundImage:`url(${rr.Z.getSrc(this.config.backgroundImage.config)})`,backgroundPosition:-1===this.config.backgroundImage.posX?"center center":`${this.config.backgroundImage.posX}px ${this.config.backgroundImage.posY}px`,backgroundSize:`${this.config.backgroundImage.config.styles.imgWidth}px ${this.config.backgroundImage.config.styles.imgHeight}px`}:mr(hr({},this.sizeStyles),{overflow:this.selectedLayerCount>0?"initial":"hidden",transformStyle:p.Z._3dEnabledPageIndex===this.pageIndex?"preserve-3d":"initial"})},handleSpecialCharacter(e){"="===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),e.stopPropagation(),kt.Z.zoomIn())},bleedLineAreaStyles(){if(!this.config.isEnableBleed)return{top:"0px",bottom:"0px",left:"0px",right:"0px"};const e=this.scaleRatio/100;return{top:this.config.bleeds.top*e+"px",bottom:this.config.bleeds.bottom*e+"px",left:this.config.bleeds.left*e+"px",right:this.config.bleeds.right*e+"px"}},togglePageHighlighter(e){this.pageIsHover=e,this.setCurrHoveredPageIndex(e?this.pageIndex:-1)},toggleResizerHint(e){this.isShownResizerHint=e},setFocus(){this.$nextTick((()=>{const e=this.$refs.page;e.focus()}))},addPage(){const{getCurrLayer:e,layerIndex:t,pageIndex:n}=g.ZP;if(g.ZP.updateLayerProps(n,t,{active:!1,shown:!1}),e)switch(e.type){case"tmp":tr.Z.deselect();break;case"group":e.layers.forEach(((e,r)=>{e.active&&g.ZP.updateSubLayerProps(n,t,r,hr({active:!1,shown:!1},"image"===e.type&&{imgControl:!1}))}));break;case"frame":e.clips.forEach(((e,r)=>{er.Z.updateFrameLayerProps(n,t,r,{active:!1,shown:!1,imgControl:!1})}));break}this.setPanelType(o.UJ.none),this.setPanelType(o.iI.template),tr.Z.reset(),p.Z.addPageToPos(p.Z.newPage({width:this.pageState.config.width,height:this.pageState.config.height,physicalWidth:this.pageState.config.physicalWidth,backgroundColor:this.pageState.config.backgroundColor,physicalHeight:this.pageState.config.physicalHeight,isEnableBleed:this.pageState.config.isEnableBleed,bleeds:this.pageState.config.bleeds,physicalBleeds:this.pageState.config.physicalBleeds,unit:this.pageState.config.unit}),this.pageIndex+1),this.setCurrActivePageIndex(this.pageIndex+1),this.$nextTick((()=>{p.Z.scrollIntoPage(this.pageIndex+1)})),cn.Z.record()},deletePage(){tr.Z.deselect(),this.pages.length-1===this.pageIndex?this.setCurrActivePageIndex(this.pageIndex-1):this.setCurrActivePageIndex(this.pageIndex),this.$nextTick((()=>{p.Z.deletePage(this.pageIndex),cn.Z.record()}))},duplicatePage(){if(this.isProcessingShadow)return void(0,sr.h4)({group:"copy",text:`${r.Z.global.t("NN0665")}`});tr.Z.deselect();const e=l.Z.deepCopy(this.pageState.config);this.$store.commit("SET_currSelectedInfo",{pageIndex:this.pageIndex+1}),e.layers.forEach((e=>{e.id=l.Z.generateRandomString(8),e.type===o.F5.frame?e.clips.forEach((e=>e.id=l.Z.generateRandomString(8))):e.type===o.F5.group&&e.layers.forEach((e=>e.id=l.Z.generateRandomString(8)))})),e.designId="",e.id=l.Z.generateRandomString(8),p.Z.addPageToPos(e,this.pageIndex+1),this.setCurrActivePageIndex(this.pageIndex+1),this.$nextTick((()=>{p.Z.scrollIntoPage(this.pageIndex+1)})),cn.Z.record()},openLineTemplatePopup(){ir.Z.openPopup("line-template",{target:`.btn-line-template[pageIndex="${this.pageIndex}"]`,posX:"right"})},scrollUpdate(){const e=new PointerEvent("pointermove",{clientX:this.currentAbsPos.x,clientY:this.currentAbsPos.y});window.dispatchEvent(e)},pageResizeStart(e){this.initialPageHeight=this.pageState.config.height,this.isResizingPage=!0,this.initialRelPos=this.currentRelPos=ce.Z.getMouseRelPoint(e,this.overflowContainer),this.currentAbsPos=ce.Z.getMouseAbsPoint(e),le.ZP.addPointerEvent("pointermove",this.pageResizing),this.overflowContainer&&this.overflowContainer.addEventListener("scroll",this.scrollUpdate,{capture:!0}),le.ZP.addPointerEvent("pointerup",this.pageResizeEnd)},pageResizing(e){var t,n,r,i,o,s;this.currentAbsPos=ce.Z.getMouseAbsPoint(e),this.currentRelPos=ce.Z.getMouseRelPoint(e,this.overflowContainer);const a=(null==(t=this.overflowContainer)?void 0:t.scrollHeight)===(null==(n=this.overflowContainer)?void 0:n.clientHeight);if(a===this.isShownScrollBar){const e=a?2:1,t=(this.currentRelPos.y-this.initialRelPos.y)*e*(100/this.scaleRatio),n=Math.max(p.Z.MIN_SIZE,null!=(s=null!=(o=null==(r=this.config.bleeds)?void 0:r.top)?o:0+(null==(i=this.config.bleeds)?void 0:i.bottom))?s:0),l=(0,h.floor)(p.Z.MAX_AREA/this.config.width),c=Math.min(Math.max(Math.trunc(this.initialPageHeight+t),n),l),d=p.Z.getPageDPI(this.pageState.config),u=or.ZP.convert(c/d.height,"in",this.config.unit);p.Z.updatePageProps({height:c,physicalHeight:u})}else this.initialRelPos=this.currentRelPos=ce.Z.getMouseRelPoint(e,this.overflowContainer),this.currentAbsPos=ce.Z.getMouseAbsPoint(e),this.initialPageHeight=this.pageState.config.height;this.isShownScrollBar=a},pageResizeEnd(e){this.initialPageHeight=this.pageState.config.height,this.isResizingPage=!1;const t=Math.round(this.pageState.config.height),n=p.Z.getPageDPI(this.pageState.config),r=or.ZP.convert(t/n.height,"in",this.config.unit);p.Z.updatePageProps({height:t,physicalHeight:r}),cn.Z.record(),this.$nextTick((()=>{le.ZP.removePointerEvent("pointermove",this.pageResizing),this.overflowContainer&&this.overflowContainer.removeEventListener("scroll",this.scrollUpdate,{capture:!0}),le.ZP.removePointerEvent("pointerup",this.pageResizeEnd)})),p.Z.findCentralPageIndexInfo()},pageNameFocused(){kt.Z.deselect()},stepRecord(){cn.Z.record()},undo(){kt.Z.undo(),cn.Z.isInFirstStep||this.$emit("stepChange")},redo(){kt.Z.redo(),cn.Z.isInLastStep||this.$emit("stepChange")},disableTouchEvent(e){this.$isTouchDevice()&&(e.preventDefault(),e.stopPropagation())},handleDraggingController(e){this.currDraggingIndex=e}})});const fr=(0,oe.Z)(yr,[["render",Xt],["__scopeId","data-v-4d35e06e"],["__file","NuPage.vue"]]);var br=fr;const vr={class:"ruler-hr__number"},wr={key:0,class:"ruler-hr__block ruler-hr__block--float"},Nr={class:"ruler-hr__number"};function Sr(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("div",{class:"ruler-hr",style:(0,k.j5)(e.rulerRootStyles)},[(0,P._)("div",{class:"ruler-hr__body",style:(0,k.j5)(e.rulerBodyStyles)},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.scaleCount,((t,n)=>((0,P.wg)(),(0,P.iD)("div",{class:"ruler-hr__block ruler-hr__block--int",key:n},[(0,P._)("span",vr,(0,k.zw)((t-1)*e.scale),1),((0,P.wg)(),(0,P.iD)(P.HY,null,(0,P.Ko)(5,((e,t)=>(0,P._)("div",{class:"ruler-hr__line",key:t}))),64))])))),128)),e.scaleCount?((0,P.wg)(),(0,P.iD)("div",wr,[(0,P._)("span",Nr,(0,k.zw)(e.scaleCount*e.scale),1)])):(0,P.kq)("",!0)],4)],4)}var xr=Object.defineProperty,Pr=Object.defineProperties,Ir=Object.getOwnPropertyDescriptors,_r=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable,Cr=(e,t,n)=>t in e?xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zr=(e,t)=>{for(var n in t||(t={}))kr.call(t,n)&&Cr(e,n,t[n]);if(_r)for(var n of _r(t))Zr.call(t,n)&&Cr(e,n,t[n]);return e},Tr=(e,t)=>Pr(e,Ir(t)),Lr=(0,P.aZ)({emits:[],props:{isSidebarPanelOpen:{type:Boolean,required:!0},editorView:HTMLElement},data(){return{rulerBodyOffset:0,scale:Xe.Z.adjRulerScale()}},computed:Tr(zr({},(0,ze.Se)({getPage:"getPage",currSelectedInfo:"getCurrSelectedInfo",pageScaleRatio:"getPageScaleRatio",showPagePanel:"page/getShowPagePanel"})),{currFocusPage(){return p.Z.currFocusPage},currFocusPageSize(){return p.Z.currFocusPageSize},currFocusPageSizeWithBleeds(){return p.Z.currFocusPageSizeWithBleeds},rulerRootStyles(){return{cursor:`url(${n(24517)}) 16 16, pointer`,"z-index":`${p.Z.pageNum+10}`}},rulerBodyStyles(){return{width:this.currFocusPageSize.width*(this.pageScaleRatio/100)+"px",height:`${Xe.Z.RULER_SIZE}px`,transform:`translate3d(${this.rulerBodyOffset}px,0px,0px)`,"grid-template-columns":`repeat(${this.scaleCount},${this.scaleSpace}px) auto`}},pxScale(){return or.ZP.convert(this.scale,this.currFocusPageSize.unit,"px",p.Z.getPageDPI().width)},scaleCount(){return Math.ceil(this.currFocusPageSize.width/this.pxScale)},scaleSpace(){return this.pxScale*this.pageScaleRatio/100}}),mounted(){this.calcRulerBodyOffset()},watch:{pageScaleRatio(){this.calcRulerBodyOffset(),this.scale=Xe.Z.adjRulerScale(this.scale)},currFocusPage(){this.calcRulerBodyOffset(),this.scale=Xe.Z.adjRulerScale()},currFocusPageSizeWithBleeds(){this.calcRulerBodyOffset(),this.scale=Xe.Z.adjRulerScale(this.scale)},showPagePanel(){this.calcRulerBodyOffset()},isSidebarPanelOpen(){this.calcRulerBodyOffset()}},methods:{calcRulerBodyOffset(){this.$nextTick((()=>{const e=document.querySelector(".content__main");this.rulerBodyOffset=p.Z.pageRect.left-e.getBoundingClientRect().left-Xe.Z.RULER_SIZE+this.editorView.scrollLeft}))}}});const Er=(0,oe.Z)(Lr,[["render",Sr],["__scopeId","data-v-35d1c8ec"],["__file","RulerHr.vue"]]);var Dr=Er;const Or={class:"ruler-vr__number"},Mr={key:0,class:"ruler-vr__block ruler-vr__block--float"},Ar={class:"ruler-vr__number"};function $r(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("div",{class:"ruler-vr",style:(0,k.j5)(e.rulerRootStyles)},[(0,P._)("div",{class:"ruler-vr__body",style:(0,k.j5)(e.rulerBodyStyles)},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.scaleCount,((t,n)=>((0,P.wg)(),(0,P.iD)("div",{class:"ruler-vr__block ruler-vr__block--int",key:n},[(0,P._)("span",Or,(0,k.zw)((t-1)*e.scale),1),((0,P.wg)(),(0,P.iD)(P.HY,null,(0,P.Ko)(5,((e,t)=>(0,P._)("div",{class:"ruler-vr__line",key:t}))),64))])))),128)),e.scaleCount?((0,P.wg)(),(0,P.iD)("div",Mr,[(0,P._)("span",Ar,(0,k.zw)(e.scaleCount*e.scale),1)])):(0,P.kq)("",!0)],4)],4)}var Fr=Object.defineProperty,jr=Object.defineProperties,Br=Object.getOwnPropertyDescriptors,Rr=Object.getOwnPropertySymbols,Hr=Object.prototype.hasOwnProperty,Ur=Object.prototype.propertyIsEnumerable,Wr=(e,t,n)=>t in e?Fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vr=(e,t)=>{for(var n in t||(t={}))Hr.call(t,n)&&Wr(e,n,t[n]);if(Rr)for(var n of Rr(t))Ur.call(t,n)&&Wr(e,n,t[n]);return e},Gr=(e,t)=>jr(e,Br(t)),qr=(0,P.aZ)({emits:[],props:{editorView:HTMLElement},data(){return{rulerBodyOffset:0,scale:Xe.Z.adjRulerScale()}},computed:Gr(Vr({},(0,ze.Se)({getPage:"getPage",currSelectedInfo:"getCurrSelectedInfo",pageScaleRatio:"getPageScaleRatio",showPagePanel:"page/getShowPagePanel"})),{currFocusPage(){return p.Z.currFocusPage},currFocusPageSize(){return p.Z.currFocusPageSize},currFocusPageSizeWithBleeds(){return p.Z.currFocusPageSizeWithBleeds},rulerRootStyles(){return{cursor:`url(${n(49239)}) 16 16, pointer`,"z-index":`${p.Z.pageNum+10}`}},rulerBodyStyles(){return{width:`${Xe.Z.RULER_SIZE}px`,height:this.currFocusPageSize.height*(this.pageScaleRatio/100)+"px",transform:`translate3d(0px,${this.rulerBodyOffset}px,0px)`,"grid-template-rows":`repeat(${this.scaleCount},${this.scaleSpace}px) auto`}},pxScale(){return or.ZP.convert(this.scale,this.currFocusPageSize.unit,"px",p.Z.getPageDPI().height)},scaleCount(){return Math.ceil(this.currFocusPageSize.height/this.pxScale)},scaleSpace(){return this.pxScale*this.pageScaleRatio/100}}),mounted(){this.calcRulerBodyOffset()},watch:{pageScaleRatio(){this.calcRulerBodyOffset(),this.scale=Xe.Z.adjRulerScale(this.scale)},currFocusPage(){this.calcRulerBodyOffset(),this.scale=Xe.Z.adjRulerScale()},currFocusPageSizeWithBleeds(){this.calcRulerBodyOffset(),this.scale=Xe.Z.adjRulerScale(this.scale)}},methods:{calcRulerBodyOffset(){this.$nextTick((()=>{this.rulerBodyOffset=p.Z.pageRect.top-Xe.Z.RULER_SIZE+this.editorView.scrollTop}))}}});const Kr=(0,oe.Z)(qr,[["render",$r],["__scopeId","data-v-da49bdf0"],["__file","RulerVr.vue"]]);var Yr=Kr,Xr=n(97738),Qr=n(35319),Jr=n(7230),ei=n(98824),ti=n(26378),ni=n(15820),ri=n(16290),ii=Object.defineProperty,oi=Object.defineProperties,si=Object.getOwnPropertyDescriptors,ai=Object.getOwnPropertySymbols,li=Object.prototype.hasOwnProperty,ci=Object.prototype.propertyIsEnumerable,di=(e,t,n)=>t in e?ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ui=(e,t)=>{for(var n in t||(t={}))li.call(t,n)&&di(e,n,t[n]);if(ai)for(var n of ai(t))ci.call(t,n)&&di(e,n,t[n]);return e},gi=(e,t)=>oi(e,si(t)),pi=(0,P.aZ)({emits:[],components:{RulerHr:Dr,RulerVr:Yr,BgRemoveArea:jt,DiskWarning:Xr.Z,NuPage:br},data(){return{isSelecting:!1,isShowGuidelineV:!1,isShowGuidelineH:!1,initialRelPos:{x:0,y:0},currentAbsPos:{x:0,y:0},currentRelPos:{x:0,y:0},editorView:null,editorViewCanvas:null,guidelinesArea:null,backgroundControllingPageIndex:-1,rulerVPos:0,rulerHPos:0,lastMappedVPos:0,lastMappedHPos:0,from:-1,screenWidth:document.documentElement.clientWidth,screenHeight:document.documentElement.clientHeight,scrollHeight:0}},created(){Qr.Z.mixin({data(){return{timeStart:0}},beforeUpdate(){const e=this;ke.Z.enalbleComponentLog&&(e.timeStart=performance.now())},updated(){if(!ke.Z.enalbleComponentLog)return;const e=this,t=performance.now()-e.timeStart,n=["ComponentLog","ComponentLogItem","DesktopEditor","LazyLoad"];if(n.includes(e.$options.name))return;const r=String(e.$options.__file).split("/"),i=r[r.length-1];"undefined"!==i&&window.requestAnimationFrame((()=>{var n,r,o,s,a;e.$eventBus.emit("on-re-rendering",{component:i,name:e.$options.name,__name:e.$options.__name,parent:null!=(r=null==(n=e.$options.parent)?void 0:n._name)?r:"no parent",time:t,propsData:{index:null==(o=e.$options.propsData)?void 0:o.index,pageIndex:null==(s=e.$options.propsData)?void 0:s.pageIndex,layerIndex:null==(a=e.$options.propsData)?void 0:a.layerIndex}})}))}});const e=this.$watch("isGettingDesign",(t=>{t||(d.Z.setLog("editorView created and got design"),this.pages.length>0&&p.Z.fixPageSize()&&(p.Z.fitPage(),Qe.Z.uploadDesign(Qe.Z.PutAssetDesignType.UPDATE_BOTH),ei.Z.setModalInfo(`${this.$t("NN0788")}`,[`${this.$t("NN0789",{size:`${p.Z.MAX_WIDTH} x ${p.Z.MAX_HEIGHT}`})}`],{msg:`${this.$t("NN0358")}`,class:"btn-blue-mid",action:()=>!1})),e())}))},mounted(){this.getRecently(),cn.Z.record(),this.editorView=this.$refs.editorView,this.editorViewCanvas=this.$refs.canvas,this.guidelinesArea=this.$refs.guidelinesArea,p.Z.fitPage(),this.$nextTick((()=>{p.Z.findCentralPageIndexInfo()})),this.scrollHeight=this.editorView.scrollHeight,document.addEventListener("blur",this.detectBlur,!0),window.onresize=()=>{this.screenWidth=document.documentElement.clientWidth,this.screenHeight=document.documentElement.clientHeight},Xe.Z.on("showGuideline",((e,t,n,r)=>{const i=this.guidelinesArea.getBoundingClientRect();switch(void 0!==r&&(this.from=r),n){case"v":this.isShowGuidelineV&&this.closeGuidelineV(),this.isShowGuidelineV=!0,this.lastMappedVPos=e,this.rulerVPos=(0,h.round)(or.ZP.convert(Math.round(this.lastMappedVPos),"px",this.currPage.unit,p.Z.getPageDPI().width),or.cB),this.$nextTick((()=>{const e=this.$refs.guidelineV;e.style.transform=`translate(${t-i.left}px,0px)`}));break;case"h":this.isShowGuidelineH&&this.closeGuidelineH(),this.isShowGuidelineH=!0,this.lastMappedHPos=e,this.rulerHPos=(0,h.round)(or.ZP.convert(Math.round(this.lastMappedHPos),"px",this.currPage.unit,p.Z.getPageDPI().height),or.cB),this.$nextTick((()=>{const e=this.$refs.guidelineH;e.style.transform=`translate(0px,${t-i.top}px)`}));break}}))},watch:{pageScaleRatio(){const e=this.$refs.editorView;if(this.inBgRemoveMode||-1===this.prevScrollPos.top)l.Z.scaleFromCenter(e);else{const{top:t,left:n}=this.prevScrollPos;this.$nextTick((()=>{e.scrollLeft=n,e.scrollTop=t,this.clearBgRemoveState()}))}},screenHeight(){p.Z.findCentralPageIndexInfo()}},props:{currPage:{type:Object,required:!0},isSidebarPanelOpen:{type:Boolean,required:!0}},computed:gi(ui(ui({},(0,ze.rn)({cursor:"cursor",isGettingDesign:"isGettingDesign"})),(0,ze.Se)({groupId:"getGroupId",pagesState:"getPagesState",getMiddlemostPageIndex:"getMiddlemostPageIndex",geCurrActivePageIndex:"getCurrActivePageIndex",lastSelectedLayerIndex:"getLastSelectedLayerIndex",currSelectedInfo:"getCurrSelectedInfo",pageScaleRatio:"getPageScaleRatio",_showRuler:"getShowRuler",lockGuideline:"getLockGuideline",isShowPagePreview:"page/getIsShowPagePreview",hasCopiedFormat:"getHasCopiedFormat",inBgRemoveMode:"bgRemove/getInBgRemoveMode",prevScrollPos:"bgRemove/getPrevScrollPos",getInGestureMode:"getInGestureToolMode",isProcessImgShadow:"shadow/isProcessing",isUploadImgShadow:"shadow/isUploading",isSettingScaleRatio:"getIsSettingScaleRatio",enableComponentLog:"getEnalbleComponentLog",pagesLength:"getPagesLength",isImgCtrl:"imgControl/isImgCtrl",showPagePanel:"page/getShowPagePanel",scaleRatio:"getPageScaleRatio"})),{pages(){return this.pagesState.map((e=>e.config))},isBackgroundImageControl(){const e=this.pages;let t=!1;return e.forEach(((e,n)=>{e.backgroundImage.config.imgControl&&(t=!0,this.backgroundControllingPageIndex=n)})),t},pageNum(){return this.pages.length},isDragging(){return Xe.Z.isDragging},isHandleShadow(){return this.isProcessImgShadow||this.isUploadImgShadow},showRuler(){return this._showRuler&&!this.inBgRemoveMode}}),methods:gi(ui(ui({},(0,ze.OI)({addLayer:"ADD_selectedLayer",setCurrActivePageIndex:"SET_currActivePageIndex",setPageScaleRatio:"SET_pageScaleRatio",setPrevScrollPos:"bgRemove/SET_prevScrollPos",clearBgRemoveState:"bgRemove/CLEAR_bgRemoveState",setInGestureMode:"SET_inGestureMode"})),(0,ze.nv)("layouts",["getCategories","getRecently"])),{cursorStyles(){const{cursor:e}=this;return e?{cursor:e}:{}},outerClick(e){this.inBgRemoveMode||an.Z.isClickOnController(e)||(!this.isHandleShadow&&tr.Z.deselect(),tr.Z.deselect(),this.setCurrActivePageIndex(-1),p.Z.setBackgroundImageControlDefault(),p.Z.findCentralPageIndexInfo(),rr.Z.isImgControl()&&an.Z.updateLayerProps(this.getMiddlemostPageIndex,this.lastSelectedLayerIndex,{imgControl:!1}))},selectStart(e){if(("mouse"!==e.pointerType||0===e.button)&&!this.isImgCtrl&&!this.getInGestureMode)if(-1!==g.ZP.layerIndex&&an.Z.isClickOnController(e)){const t=new ti.U({_config:{config:g.ZP.getCurrLayer},snapUtils:p.Z.getPageState(g.ZP.pageIndex).modules.snapUtils,body:document.getElementById(`nu-layer_${g.ZP.pageIndex}_${g.ZP.layerIndex}_-1`)});t.moveStart(e)}else this.hasCopiedFormat&&Jr.Z.clearCopiedFormat(),rr.Z.isImgControl()&&an.Z.updateLayerProps(this.getMiddlemostPageIndex,this.lastSelectedLayerIndex,{imgControl:!1}),this.currentAbsPos=ce.Z.getMouseAbsPoint(e),this.initialRelPos=this.currentRelPos=ce.Z.getMouseRelPoint(e,this.$refs.canvas),le.ZP.addPointerEvent("pointermove",this.selecting),le.ZP.addPointerEvent("pointerup",this.selectEnd),window.addEventListener("scroll",this.scrollUpdate,{capture:!0})},selecting(e){if(!this.isSelecting)return 1===this.currSelectedInfo.layers.length&&this.currSelectedInfo.layers[0].locked&&(this.isHandleShadow?rr.Z.setImgControlDefault(!1):tr.Z.deselect()),this.isSelecting=!0,void this.renderSelectionArea({x:0,y:0},{x:0,y:0});this.currentAbsPos=ce.Z.getMouseAbsPoint(e),this.currentRelPos=ce.Z.getMouseRelPoint(e,this.$refs.canvas),this.renderSelectionArea(this.initialRelPos,this.currentRelPos)},scrollUpdate(){var e,t,n;if(this.isSelecting||Xe.Z.isDragging){const e=new PointerEvent("pointermove",{clientX:this.currentAbsPos.x,clientY:this.currentAbsPos.y});window.dispatchEvent(e)}this.isShowGuidelineV&&!Xe.Z.isDragging&&this.closeGuidelineV(),this.isShowGuidelineH&&!Xe.Z.isDragging&&this.closeGuidelineH(),p.Z.findCentralPageIndexInfo((null==(n=null==(t=null==(e=ri.Z.editor)?void 0:e.view)?void 0:t.hasFocus)?void 0:n.call(t))||this.isSettingScaleRatio)},selectEnd(){this.isSelecting&&(this.isHandleShadow?((0,sr.h4)({group:"copy",text:`${r.Z.global.t("NN0665")}`}),rr.Z.setImgControlDefault(!1)):tr.Z.deselect()),this.$nextTick((()=>{if(le.ZP.removePointerEvent("pointermove",this.selecting),window.removeEventListener("scroll",this.scrollUpdate,{capture:!0}),le.ZP.removePointerEvent("pointerup",this.selectEnd),this.isSelecting){this.isSelecting=!1;const e=this.$refs.selectionArea;this.isHandleShadow?rr.Z.setImgControlDefault(!1):this.handleSelectionData(e.getBoundingClientRect())}}))},handleSelectionData(e){const t=this.pagesState[p.Z.currFocusPageIndex].config,n=t.layers,r=document.querySelector(`.nu-page-content-${p.Z.currFocusPageIndex}`),i=r.getBoundingClientRect(),o=e.toJSON();o.x=(o.x-i.x)/this.scaleRatio*100,o.y=(o.y-i.y)/this.scaleRatio*100,o.width=o.width/this.scaleRatio*100,o.height=o.height/this.scaleRatio*100;const s=[];n.length>0&&n.forEach(((e,t)=>{var n,r;let i;if(ni.Z.isLine(e)){const{x:t,y:o,width:s,height:a,rotate:l}=an.Z.getControllerStyleParameters(null!=(n=e.point)?n:[],e.styles,!0,this.$isTouchDevice(),null==(r=e.size)?void 0:r[0]);i={x:t,y:o,width:s,height:a,rotate:l}}else i={x:e.styles.x,y:e.styles.y,width:e.styles.width,height:e.styles.height,rotate:e.styles.rotate};!e.locked&&ln.ZP.calculateIfIntersect(o,i)&&s.push(t)})),s.length>0&&tr.Z.select(p.Z.currFocusPageIndex,s)},renderSelectionArea(e,t){const n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),s=this.$refs.selectionArea;s.style.transform=`translate(${Math.round(n)}px,${Math.round(i)}px)`,s.style.width=`${Math.round(r-n)}px`,s.style.height=`${Math.round(o-i)}px`},detectBlur(e){setTimeout((()=>{this.inBgRemoveMode||this.$nextTick((()=>{var e;"BODY"!==(null==(e=document.activeElement)?void 0:e.tagName)||this.isShowPagePreview||(-1===this.geCurrActivePageIndex?p.Z.findCentralPageIndexInfo():p.Z.activeCurrActivePage())}))}),0)},getPageZIndex(e){return this.isBackgroundImageControl?this.backgroundControllingPageIndex===e?1:0:p.Z.currFocusPageIndex===e?this.pageNum+2:p.Z.currHoveredPageIndex===e?this.pageNum+1:this.pageNum-e},dragStartV(e){Xe.Z.setIsDragging(!0),this.isShowGuidelineV=!0,this.initialRelPos=this.currentRelPos=ce.Z.getMouseRelPoint(e,this.guidelinesArea),le.ZP.addPointerEvent("pointermove",this.draggingV),window.addEventListener("scroll",this.scrollUpdate,{capture:!0}),le.ZP.addPointerEvent("pointerup",this.dragEndV)},draggingV(e){this.lastMappedVPos=this.mapGuidelineToPage("v").pos,this.rulerVPos=(0,h.round)(or.ZP.convert(Math.round(this.lastMappedVPos),"px",this.currPage.unit,p.Z.getPageDPI().width),or.cB),this.currentRelPos=ce.Z.getMouseRelPoint(e,this.guidelinesArea),this.renderGuidelineV(this.currentRelPos)},dragEndV(e){if(Xe.Z.setIsDragging(!1),-1===this.from){const t=Xe.Z.getMouseOverPageIndex(e);if(-1===t){const t=Xe.Z.getMostlyOverlappedPageIndex(e);-1===t?(this.isShowGuidelineV=!1,cn.Z.record()):(this.from=t,p.Z.currFocusPageIndex!==t&&tr.Z.deselect(),this.setCurrActivePageIndex(t),this.closeGuidelineV(!0))}else this.from=t,p.Z.currFocusPageIndex!==t&&tr.Z.deselect(),this.setCurrActivePageIndex(t),this.closeGuidelineV(!0)}else this.mapGuidelineToPage("v").outOfPage?(this.isShowGuidelineV=!1,cn.Z.record()):this.closeGuidelineV(!0);this.$nextTick((()=>{le.ZP.removePointerEvent("pointermove",this.draggingV),window.removeEventListener("scroll",this.scrollUpdate),le.ZP.removePointerEvent("pointerup",this.dragEndV)}))},renderGuidelineV(e){const t=this.$refs.guidelineV;t.style.transform=`translate(${e.x}px,0px)`},closeGuidelineV(e=!1){if(!this.isDragging){const t=this.lastMappedVPos;this.isShowGuidelineV=!1,-1!==this.from?Xe.Z.addGuidelineToPage(t,"v",this.from):Xe.Z.addGuidelineToPage(t,"v"),this.from=-1,e&&cn.Z.record()}},dragEditorViewStart(e){this.initialRelPos=ce.Z.getMouseRelPoint(e,this.$refs.editorView),window.addEventListener("mousemove",this.draggingEditorViewPage),window.addEventListener("mouseup",this.dragditorViewPageEnd)},draggingEditorViewPage(e){const t=this.$refs.editorView,{x:n,y:r}=ce.Z.getMouseRelPoint(e,t);this.$nextTick((()=>{const e=n-this.initialRelPos.x,i=r-this.initialRelPos.y;t.scrollLeft+=.8*e,t.scrollTop+=.8*i,this.initialRelPos={x:n,y:r}}))},dragditorViewPageEnd(){this.$nextTick((()=>{window.removeEventListener("mousemove",this.draggingEditorViewPage),window.removeEventListener("mouseup",this.dragditorViewPageEnd)}))},dragStartH(e){Xe.Z.setIsDragging(!0),this.isShowGuidelineH=!0,this.initialRelPos=this.currentRelPos=ce.Z.getMouseRelPoint(e,this.guidelinesArea),window.addEventListener("mousemove",this.draggingH),window.addEventListener("scroll",this.scrollUpdate,{capture:!0}),window.addEventListener("mouseup",this.dragEndH)},draggingH(e){this.lastMappedHPos=this.mapGuidelineToPage("h").pos,this.rulerHPos=(0,h.round)(or.ZP.convert(Math.round(this.lastMappedHPos),"px",this.currPage.unit,p.Z.getPageDPI().height),or.cB),this.currentRelPos=ce.Z.getMouseRelPoint(e,this.guidelinesArea),this.renderGuidelineH(this.currentRelPos)},dragEndH(e){if(Xe.Z.setIsDragging(!1),-1===this.from){const e=this.$refs.guidelineH,t=Xe.Z.getOverlappedPageIndex(e,"h");-1===t?(this.isShowGuidelineH=!1,cn.Z.record()):(this.from=t,p.Z.currFocusPageIndex!==t&&tr.Z.deselect(),this.setCurrActivePageIndex(t),this.closeGuidelineH(!0))}else this.mapGuidelineToPage("h").outOfPage?(this.isShowGuidelineH=!1,cn.Z.record()):this.closeGuidelineH(!0);this.$nextTick((()=>{window.removeEventListener("mousemove",this.draggingH),window.removeEventListener("scroll",this.scrollUpdate),window.removeEventListener("mouseup",this.dragEndH)}))},renderGuidelineH(e){const t=this.$refs.guidelineH;t.style.transform=`translate(0px,${e.y}px)`},mapGuidelineToPage(e){const t="v"===e?this.$refs.guidelineV:this.$refs.guidelineH,n="v"===e?this.from:Xe.Z.getOverlappedPageIndex(t,"h"),r=Xe.Z.mapGuidelineToPage(t,e,n);return r},closeGuidelineH(e=!1){if(console.log("close guideline H"),!this.isDragging){console.log("not dragging"),this.isShowGuidelineH=!1;const t=this.lastMappedHPos;-1!==this.from?Xe.Z.addGuidelineToPage(t,"h",this.from):Xe.Z.addGuidelineToPage(t,"h"),this.from=-1,e&&cn.Z.record()}},openGuidelinePopup(e){ir.Z.openPopup("guideline",{event:e})},handleWheel(e){if(e.metaKey||e.ctrlKey){e.preventDefault();const t=this.pageScaleRatio*(1-.005*e.deltaY);this.setPageScaleRatio(Math.min(Math.max(Math.round(t),10),500))}},handleStepChange(){this.isShowGuidelineV=!1,this.isShowGuidelineH=!1}})});const hi=(0,oe.Z)(pi,[["render",ft],["__scopeId","data-v-a3ace4a4"],["__file","EditorView.vue"]]);var mi=hi;const yi={key:0,class:"function-panel__topbar"};function fi(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("download-btn"),l=(0,P.up)("btn"),c=(0,P.up)("panel-bg-remove"),d=(0,P.up)("panel-fonts"),u=(0,P.up)("panel-general"),g=(0,P.up)("panel-page-setting"),p=(0,P.up)("panel-background-setting"),h=(0,P.up)("panel-shape-setting"),m=(0,P.up)("panel-text-setting"),y=(0,P.up)("panel-text-effect-setting"),f=(0,P.up)("panel-photo-setting"),b=(0,P.up)("panel-img-ctrl"),v=(0,P.Q2)("hint");return(0,P.wg)(),(0,P.iD)("div",{class:"function-panel",style:(0,k.j5)(e.functionPanelStyles)},[e.isShowPagePreview?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",yi,[(0,P.wy)((0,P.Wm)(s,{class:(0,k.C_)({pointer:!e.isInFirstStep}),iconName:"undo",iconWidth:"20px",iconColor:!e.inBgRemoveMode&&!e.isInFirstStep&&!e.isFontLoading||e.inBgRemoveMode&&!e.InBgRemoveFirstStep?"gray-2":"gray-4",onClick:e.undo},null,8,["class","iconColor","onClick"]),[[v,e.$t("NN0119")]]),(0,P.wy)((0,P.Wm)(s,{class:(0,k.C_)({pointer:!e.isInLastStep}),iconName:"redo",iconWidth:"20px",iconColor:!e.inBgRemoveMode&&!e.isInLastStep&&!e.isFontLoading||e.inBgRemoveMode&&!e.InBgRemoveLastStep?"gray-2":"gray-4",onClick:e.redo},null,8,["class","iconColor","onClick"]),[[v,e.$t("NN0120")]]),(0,P.Wm)(a),(0,P.Wm)(l,{class:"btn-file rounded full-height",hasIcon:!0,iconName:"menu",iconWidth:"25px",type:e.inBgRemoveMode?"inactive-sm":"primary-sm",disabled:e.inBgRemoveMode,squared:!0,onClick:e.openFilePopup},null,8,["type","disabled","onClick"])])),e.isShowPagePreview?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",{key:1,class:(0,k.C_)(["function-panel__content",{"dim-background":e.showMore}])},[e.showBgRemove?((0,P.wg)(),(0,P.j4)(c,{key:0,currPage:e.currPage},null,8,["currPage"])):(0,P.kq)("",!0),e.showFont?((0,P.wg)(),(0,P.j4)(d,{key:1,currPage:e.currPage,onCloseFontsPanel:e.closeFontsPanel},null,8,["currPage","onCloseFontsPanel"])):(0,P.kq)("",!0),e.showGeneral?((0,P.wg)(),(0,P.j4)(u,{key:2,currPage:e.currPage},null,8,["currPage"])):(0,P.kq)("",!0),e.showPageSetting?((0,P.wg)(),(0,P.j4)(g,{key:3,currPage:e.currPage},null,8,["currPage"])):(0,P.kq)("",!0),e.showPageSetting?((0,P.wg)(),(0,P.j4)(p,{key:4,currPage:e.currPage},null,8,["currPage"])):(0,P.kq)("",!0),e.showShapeSetting?((0,P.wg)(),(0,P.j4)(h,{key:5,currPage:e.currPage},null,8,["currPage"])):(0,P.kq)("",!0),e.showTextSetting?((0,P.wg)(),(0,P.j4)(m,{key:6,currPage:e.currPage,onOpenFontsPanel:e.openFontsPanel},null,8,["currPage","onOpenFontsPanel"])):(0,P.kq)("",!0),e.showTextSetting?((0,P.wg)(),(0,P.j4)(y,{key:7,currPage:e.currPage},null,8,["currPage"])):(0,P.kq)("",!0),e.showPhotoSetting?((0,P.wg)(),(0,P.j4)(f,{key:8,currPage:e.currPage},null,8,["currPage"])):(0,P.kq)("",!0),e.isImgCtrl?((0,P.wg)(),(0,P.j4)(b,{key:9,currPage:e.currPage},null,8,["currPage"])):(0,P.kq)("",!0)],2))],4)}const bi={class:"download-btn"};function vi(e,t,n,r,i,o){const s=(0,P.up)("nubtn"),a=(0,P.up)("popup-download"),l=(0,P.Q2)("hint");return(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",bi,[(0,P.Wm)(s,{theme:"icon_text",icon:"download",disabled:e.inprogress||e.inBgRemoveMode||0!==e.uploadingImgs.length||e.isHandlingShadow||e.isFontLoading,onClick:t[0]||(t[0]=t=>e.handleShowPopup(!0))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$tc("NN0010",2)),1)])),_:1},8,["disabled"]),e.show?((0,P.wg)(),(0,P.j4)(a,{key:0,class:"download-btn__modal","page-index":e.currFocusPageIndex,onClose:e.handleShowPopup,onInprogress:e.handleInprogress},null,8,["page-index","onClose","onInprogress"])):(0,P.kq)("",!0)])),[[l,e.isHandlingShadow?e.$t("NN0500"):""]])}var wi=n(52403),Ni=Object.defineProperty,Si=Object.defineProperties,xi=Object.getOwnPropertyDescriptors,Pi=Object.getOwnPropertySymbols,Ii=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable,ki=(e,t,n)=>t in e?Ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zi=(e,t)=>{for(var n in t||(t={}))Ii.call(t,n)&&ki(e,n,t[n]);if(Pi)for(var n of Pi(t))_i.call(t,n)&&ki(e,n,t[n]);return e},Ci=(e,t)=>Si(e,xi(t)),zi=(0,P.aZ)({emits:[],components:{PopupDownload:wi.Z},data(){return{show:!1,inprogress:!1}},computed:Ci(Zi({},(0,ze.Se)({currFocusPageIndex:"getCurrFocusPageIndex",isLogin:"user/isLogin",inBgRemoveMode:"bgRemove/getInBgRemoveMode",uploadingImgs:"file/getUploadingImgs",isUploadShadowImg:"shadow/isUploading",isProcessShadowImg:"shadow/isProcessing",getCurrFunctionPanelType:"getCurrFunctionPanelType",isFontLoading:"text/getIsFontLoading"})),{isHandlingShadow(){return this.isUploadShadowImg||this.isProcessShadowImg||this.getCurrFunctionPanelType===o.UJ.photoShadow}}),methods:{handleInprogress(e){this.inprogress=e},handleShowPopup(e){this.isLogin?(this.show=e||!1,!e&&(this.inprogress=!1)):ei.Z.setModalInfo(this.$t("NN0323"),[])}}});const Ti=(0,oe.Z)(zi,[["render",vi],["__scopeId","data-v-971a6d20"],["__file","DownloadBtn.vue"]]);var Li=Ti;const Ei={class:"bg-setting"},Di={class:"bg-setting__title text-blue-1 text-H6"},Oi={class:"action-bar flex-evenly"},Mi={class:"bg-setting__grid"},Ai={key:1,class:"popup-flip"},$i=["onClick"],Fi={class:"ml-5 body-2"};function ji(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("nubtn"),l=(0,P.up)("overlay"),c=(0,P.up)("popup-adjust"),d=(0,P.up)("color-btn"),u=(0,P.Q2)("hint"),g=(0,P.Q2)("click-outside");return(0,P.wg)(),(0,P.iD)("div",Ei,[(0,P._)("span",Di,(0,k.zw)(e.$t("NN0142")),1),(0,P._)("div",Oi,[(0,P.wy)((0,P.Wm)(s,{class:(0,k.C_)(["btn-opacity pointer p-5 feature-button",{disabled:e.backgroundLocked}]),iconName:"transparency",iconWidth:"20px",iconColor:"gray-2",onClick:t[0]||(t[0]=t=>e.openSliderPopup())},null,8,["class"]),[[u,e.$t("NN0030")]]),(0,P.wy)((0,P.Wm)(s,{class:(0,k.C_)(["pointer p-5 feature-button",{active:e.backgroundLocked}]),iconName:e.backgroundLocked?"unlock":"lock",iconWidth:"20px",iconColor:"gray-2",onClick:e.handleLockBackground},null,8,["class","iconName","onClick"]),[[u,e.backgroundLocked?e.$t("NN0382"):e.$t("NN0143")]]),(0,P.wy)((0,P.Wm)(s,{class:(0,k.C_)(["pointer p-5 feature-button",{disabled:e.backgroundLocked}]),iconColor:"gray-2",iconName:"trash",iconWidth:"20px",onClick:e.handleDeleteBackground},null,8,["class","onClick"]),[[u,e.$t("NN0034")]])]),(0,P._)("div",{class:(0,k.C_)({"bg-setting__grid":e.isAdmin})},[(0,P.Wm)(a,{theme:"edit",size:"mid-full",disabled:!e.isShowImage||e.backgroundLocked,onClick:e.handleControlBgImage},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0040")),1)])),_:1},8,["disabled","onClick"]),e.isAdmin?((0,P.wg)(),(0,P.j4)(a,{key:0,theme:"edit",size:"mid-full",disabled:!e.isShowImage||e.backgroundLocked,onClick:t[1]||(t[1]=t=>e.handleShow("overlay"))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0899")),1)])),_:1},8,["disabled"])):(0,P.kq)("",!0)],2),"overlay"===e.show?((0,P.wg)(),(0,P.j4)(l,{key:0,class:"mb-10",theme:"light"})):(0,P.kq)("",!0),(0,P._)("div",Mi,[(0,P.Wm)(a,{theme:"edit",size:"mid-full",active:"popup-flip"===e.show,disabled:!e.isShowImage||e.backgroundLocked,onClick:t[2]||(t[2]=t=>e.handleShow("popup-flip"))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0038")),1)])),_:1},8,["active","disabled"]),(0,P.Wm)(a,{theme:"edit",size:"mid-full",active:"popup-adjust"===e.show,disabled:!e.isShowImage||e.backgroundLocked,onClick:t[3]||(t[3]=t=>e.handleShow("popup-adjust"))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0042")),1)])),_:1},8,["active","disabled"])]),"popup-flip"===e.show?(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",Ai,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.popupDatas,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"popup-flip__item",key:`popup-${t.icon}`,onClick:()=>e.handleImageFlip(t.icon)},[(0,P.Wm)(s,{class:"pointer",iconName:t.icon,iconWidth:"12px",iconColor:"gray-1"},null,8,["iconName"]),(0,P._)("span",Fi,(0,k.zw)(t.text),1)],8,$i)))),128))])),[[g,e.handleOutSide]]):(0,P.kq)("",!0),"popup-adjust"===e.show?(0,P.wy)(((0,P.wg)(),(0,P.j4)(c,{key:2,imageAdjust:e.backgroundAdjust,onUpdate:e.handleChangeBgAdjust},null,8,["imageAdjust","onUpdate"])),[[g,e.handleOutSide]]):(0,P.kq)("",!0),(0,P._)("div",{class:(0,k.C_)(["bg-setting__current-colors",{lock:e.backgroundLocked}])},[(0,P.Wm)(d,{color:e.colorSlipsIcon,active:"multi"!==e.colorSlipsIcon&&e.showColorSlips,onClick:t[4]||(t[4]=t=>e.handleColorPicker())},null,8,["color","active"])],2)])}const Bi={class:"overlay__category-list"},Ri={key:0,class:"overlay__options"},Hi={key:0,class:"overlay__tabs"},Ui={key:1,class:"overlay__items"},Wi={key:2,class:"overlay__options"};function Vi(e,t,n,r,i,o){const s=(0,P.up)("overlay-item"),a=(0,P.up)("mobile-slider"),l=(0,P.up)("collapse"),c=(0,P.up)("svg-icon"),d=(0,P.up)("tabs");return e.$isTouchDevice()?((0,P.wg)(),(0,P.iD)("div",{key:1,class:(0,k.C_)(["overlay mobile",e.theme])},["effects"===e.state?((0,P.wg)(),(0,P.iD)("div",Hi,[(0,P.Wm)(c,{iconName:"forbid",iconWidth:"24px",iconColor:"gray-3",onClick:t[0]||(t[0]=t=>e.applyOverlay(e.data[0].items[0]))}),(0,P.Wm)(d,{theme:`${e.theme}-narrow`,tabs:e.mobileTabs,modelValue:e.currCategory,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currCategory=t)},null,8,["theme","tabs","modelValue"])])):(0,P.kq)("",!0),"effects"===e.state?((0,P.wg)(),(0,P.iD)("div",Ui,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.mobileCategories,(t=>((0,P.wg)(),(0,P.iD)(P.HY,null,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(t.items,(n=>((0,P.wg)(),(0,P.j4)(s,{key:n.id,name:n.label,baseImg:t.baseImg,mask:n.svg,active:e.curr.id===n.id,theme:"mobile",onClick:t=>e.applyOverlay(n)},null,8,["name","baseImg","mask","active","onClick"])))),128))],64)))),256))])):(0,P.kq)("",!0),"options"===e.state?((0,P.wg)(),(0,P.iD)("div",Wi,[(0,P._)("span",null,(0,k.zw)(e.currOverlayName),1),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.options,(t=>((0,P.wg)(),(0,P.j4)(a,{key:t.key,title:t.label,value:e.getInputValue(t),onUpdate:n=>e.handleRangeInput(n,t),onMouseup:e.record},null,8,["title","value","onUpdate","onMouseup"])))),128))])):(0,P.kq)("",!0)],2)):((0,P.wg)(),(0,P.iD)("div",{key:0,class:(0,k.C_)(["overlay desktop",e.theme])},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.data,((t,n)=>((0,P.wg)(),(0,P.iD)("div",{class:"overlay__category",key:t.id},[t.id?((0,P.wg)(),(0,P.j4)((0,P.LL)("light"===e.theme?"CollapseTitle":"div"),{key:0,class:"mx-10",active:e.currCategory===n,onClick:t=>e.switchTab(n)},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(t.label),1)])),_:2},1032,["active","onClick"])):(0,P.kq)("",!0),(0,P.Wm)(l,{class:"overlay__collapse",when:e.currCategory===n||!t.id||"light"!==e.theme},{default:(0,P.w5)((()=>[(0,P._)("div",Bi,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.item2d(t.items),((n,r)=>((0,P.wg)(),(0,P.iD)(P.HY,{key:`row${r}`},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(n,(n=>((0,P.wg)(),(0,P.j4)(s,{key:n.id,name:n.label,baseImg:t.baseImg,mask:n.svg,active:e.curr.id===n.id,theme:e.theme,onClick:t=>e.applyOverlay(n)},null,8,["name","baseImg","mask","active","theme","onClick"])))),128)),n.map((e=>e.id)).includes(e.curr.id)&&"none"!==e.curr.id?((0,P.wg)(),(0,P.iD)("div",Ri,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.options,(t=>((0,P.wg)(),(0,P.j4)(a,{key:t.key,title:t.label,value:e.getInputValue(t),onUpdate:n=>e.handleRangeInput(n,t),onMouseup:e.record},null,8,["title","value","onUpdate","onMouseup"])))),128))])):(0,P.kq)("",!0)],64)))),128))])])),_:2},1032,["when"])])))),128))],2))}const Gi={class:"mobile-slider"},qi={class:"mobile-slider__top"},Ki={class:"mobile-slider__name no-wrap"},Yi=["name"],Xi={class:"mobile-slider__range-input-wrapper"},Qi=["name","max","min","step","disabled"],Ji=["name","max","min","step","disabled"];function eo(e,t,n,r,i,o){const s=(0,P.Q2)("progress"),a=(0,P.Q2)("ratio-change");return(0,P.wg)(),(0,P.iD)("div",Gi,[(0,P._)("div",qi,[(0,P._)("span",Ki,(0,k.zw)(e.title),1),(0,P.wy)((0,P._)("input",{class:"mobile-slider__number",type:"number","onUpdate:modelValue":t[0]||(t[0]=t=>e.propsVal=t),name:e.name,onChange:t[1]||(t[1]=(...t)=>e.handleChangeStop&&e.handleChangeStop(...t))},null,40,Yi),[[Z.nr,e.propsVal,void 0,{number:!0}]])]),(0,P._)("div",Xi,[(0,P.wy)((0,P._)("input",{class:"input__slider--range",style:{"pointer-events":"none"},"onUpdate:modelValue":t[2]||(t[2]=t=>e.propsVal=t),name:e.name,max:e.max,min:e.min,step:e.step,type:"range",disabled:e.disabled},null,8,Qi),[[s],[Z.nr,e.propsVal,void 0,{number:!0}],[a]]),(0,P.wy)((0,P._)("input",{class:"mobile-slider__range-input mobile-slider__range-input-top input-top__slider--range","onUpdate:modelValue":t[3]||(t[3]=t=>e.propsVal=t),name:e.name,max:e.max,min:e.min,step:e.step,type:"range",disabled:e.disabled,onPointerdown:t[4]||(t[4]=t=>e.$emit("pointerdown",t)),onPointerup:t[5]||(t[5]=(...t)=>e.handlePointerup&&e.handlePointerup(...t))},null,40,Ji),[[Z.nr,e.propsVal,void 0,{number:!0}],[a]])])])}var to=(0,P.aZ)({emits:["pointerdown","update"],data(){return{}},props:{title:{type:String,required:!0},name:{type:String},value:{type:[Number,String],required:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{default:1,type:Number},autoRecord:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},computed:{propsVal:{get(){return this.value},set(e){this.$emit("update",e,this.name),this.$forceUpdate()}}},methods:{handleChangeStop(){this.autoRecord&&cn.Z.record()},handlePointerup(){this.handleChangeStop()}}});const no=(0,oe.Z)(to,[["render",eo],["__scopeId","data-v-5d21c674"],["__file","MobileSlider.vue"]]);var ro=no;const io={class:"overlay-item__img"},oo=["src"],so=["src"],ao={key:1,class:"overlay-item__img--more"},lo={class:"overlay-item__name"};function co(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("pro-item");return(0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["overlay-item",{active:e.active,[e.theme]:!0}])},[(0,P._)("div",io,[(0,P._)("img",{class:"overlay-item__base",src:e.baseImg},null,8,oo),e.mask?((0,P.wg)(),(0,P.iD)(P.HY,{key:1},[(0,P._)("img",{class:"overlay-item__mask",draggable:"false",src:`https://template.vivipic.com/overlay/${e.mask.id}/prev?ver=${e.mask.ver}`},null,8,so),e.mask.plan?((0,P.wg)(),(0,P.j4)(a,{key:0,theme:"roundedRect"})):(0,P.kq)("",!0),e.active&&"mobile"===e.theme?((0,P.wg)(),(0,P.iD)("div",ao,[(0,P.Wm)(s,{iconName:"sliders",iconWidth:"20px",iconColor:"white"})])):(0,P.kq)("",!0)],64)):((0,P.wg)(),(0,P.j4)(s,{key:0,class:"overlay-item__mask",iconName:"forbid",iconWidth:"24px",iconColor:"gray-3"}))]),(0,P._)("span",lo,(0,k.zw)(e.name),1)],2)}var uo=n(63788),go=(0,P.aZ)({name:"OverlayItem",components:{ProItem:uo.Z},props:{name:{type:String,required:!0},baseImg:{type:String,required:!0},mask:{type:[Object,null],required:!0},active:{type:Boolean,required:!0},theme:{type:String,required:!0}}});const po=(0,oe.Z)(go,[["render",co],["__scopeId","data-v-01632e68"],["__file","OverlayItem.vue"]]);var ho=po,mo=n(45411),yo=n(58617),fo=n(46294),bo=Object.defineProperty,vo=Object.defineProperties,wo=Object.getOwnPropertyDescriptors,No=Object.getOwnPropertySymbols,So=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable,Po=(e,t,n)=>t in e?bo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Io=(e,t)=>{for(var n in t||(t={}))So.call(t,n)&&Po(e,n,t[n]);if(No)for(var n of No(t))xo.call(t,n)&&Po(e,n,t[n]);return e},_o=(e,t)=>vo(e,wo(t)),ko=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),Zo=(0,P.aZ)({name:"Overlay",components:{OverlayItem:ho,Collapse:fo.U,CollapseTitle:mo.Z,MobileSlider:ro,Tabs:yo.Z},props:{theme:{type:String,default:"dark"},panelHistory:{type:Array,default:[]}},data(){return{data:N.overlayCategories,options:[{key:"xOffset",label:this.$t("NN0425")},{key:"yOffset",label:this.$t("NN0424")},{key:"opacity",label:this.$t("NN0066")}],currCategory:0}},computed:{state(){return 0===this.panelHistory.length?"effects":"options"},targetType(){return"dark"===this.theme?"page":"layer"},curr(){return N.getCurrOverlay(this.targetType)},mobileTabs(){return this.data.map((e=>e.label||this.$t("NN0324")))},mobileCategories(){return this.data.filter(((e,t)=>0===this.currCategory||this.currCategory===t))},currOverlayName(){var e;return(null==(e=(0,h.find)(this.data.flatMap((e=>e.items)),["id",this.curr.id]))?void 0:e.label)||""}},methods:{item2d(e){const t=[],n="dark"===this.theme?3:4;for(let r=0;r<e.length;r+=n)t.push(e.slice(r,r+n));return t},getInputValue(e){return this.curr[e.key]},switchTab(e){this.currCategory=this.currCategory===e?0:e},applyOverlay(e){return ko(this,null,(function*(){this.$isTouchDevice()&&this.curr.id===e.id&&"none"!==e.id?this.$emit("pushHistory",this.currOverlayName):(N.applyOverlay(this.targetType,_o(Io({id:e.id},e.preset),{config:e.svg?s.ZP.svgJsonInit(yield s.ZP.get(e.svg,"svg")):null})),this.record())}))},handleRangeInput(e,t){N.applyOverlay(this.targetType,{[t.key]:e})},record(){cn.Z.record()}}});const Co=(0,oe.Z)(Zo,[["render",Vi],["__scopeId","data-v-42f9a56a"],["__file","Overlay.vue"]]);var zo=Co;const To={class:"popup-adjust p-10"},Lo={class:"popup-adjust__label"},Eo=["name","value"],Do=["value","max","min","name"];function Oo(e,t,n,r,i,o){const s=(0,P.Q2)("progress");return(0,P.wg)(),(0,P.iD)("div",To,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.fields,(n=>((0,P.wg)(),(0,P.iD)("div",{class:"popup-adjust__field",key:n.name},[(0,P._)("div",Lo,[(0,P._)("div",null,(0,k.zw)(n.label),1),(0,P._)("input",{class:"popup-adjust__text body-2 text-gray-2 ml-10",type:"text",name:n.name,onInput:t[0]||(t[0]=(...t)=>e.handleField&&e.handleField(...t)),onBlur:t[1]||(t[1]=(...t)=>e.handleChangeStop&&e.handleChangeStop(...t)),value:e.adjustTmp[n.name]||0},null,40,Eo)]),(0,P.wy)((0,P._)("input",{class:"popup-adjust__range-input input__slider--range",value:e.adjustTmp[n.name]||0,max:n.max,min:n.min,name:n.name,onInput:t[2]||(t[2]=(...t)=>e.handleField&&e.handleField(...t)),onMouseup:t[3]||(t[3]=(...t)=>e.handleChangeStop&&e.handleChangeStop(...t)),type:"range"},null,40,Do),[[s]])])))),128)),(0,P._)("span",{class:"popup-adjust__reset",onClick:t[4]||(t[4]=(...t)=>e.reset&&e.reset(...t))},(0,k.zw)(e.$t("NN0754")),1)])}var Mo=(0,P.aZ)({props:{imageAdjust:{type:Object,required:!0}},emits:["update"],data(){const e=xn.Z.getFields(),t=Object.assign(xn.Z.getDefaultProps(),this.imageAdjust);return{adjustTmp:t,fields:e}},watch:{imageAdjust(e){Object.assign(this.adjustTmp,e)}},methods:{handleField(e){const{value:t,name:n}=e.target,r=Number.isNaN(+t)?0:+t;this.adjustTmp[n]=r,this.$emit("update",this.adjustTmp)},handleChangeStop(){"MobileImageAdjust"!==this.$route.name&&cn.Z.record()},reset(){const e=xn.Z.getDefaultProps();this.fields.forEach((t=>{this.adjustTmp[t.name]=e[t.name]})),this.$emit("update",this.adjustTmp)}}});const Ao=(0,oe.Z)(Mo,[["render",Oo],["__scopeId","data-v-4a803bbc"],["__file","PopupAdjust.vue"]]);var $o=Ao,Fo=n(65144),jo=Object.defineProperty,Bo=Object.defineProperties,Ro=Object.getOwnPropertyDescriptors,Ho=Object.getOwnPropertySymbols,Uo=Object.prototype.hasOwnProperty,Wo=Object.prototype.propertyIsEnumerable,Vo=(e,t,n)=>t in e?jo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Go=(e,t)=>{for(var n in t||(t={}))Uo.call(t,n)&&Vo(e,n,t[n]);if(Ho)for(var n of Ho(t))Wo.call(t,n)&&Vo(e,n,t[n]);return e},qo=(e,t)=>Bo(e,Ro(t)),Ko=(0,P.aZ)({components:{PopupAdjust:$o,ColorBtn:Ie.Z,Overlay:zo},directives:{clickOutside:Ce().directive},emits:["toggleColorPanel"],data(){return{show:"",popupDatas:[{icon:"flip-h",text:`${this.$t("NN0053")}`},{icon:"flip-v",text:`${this.$t("NN0054")}`}]}},props:{currPage:{type:Object,required:!0}},computed:qo(Go({},(0,ze.Se)({isAdmin:"user/isAdmin"})),{backgroundColor(){return this.currPage.backgroundColor},backgroundOpacity(){const{styles:{opacity:e}}=this.currPage.backgroundImage.config;return e},backgroundAdjust(){const{styles:{adjust:e}}=this.currPage.backgroundImage.config;return e},backgroundLocked(){const{locked:e}=this.currPage.backgroundImage.config;return e},backgroundImage(){var e,t;return null!=(t=null==(e=this.currPage.backgroundImage.config)?void 0:e.srcObj)?t:{}},backgroundImgControl(){var e,t;return null!=(t=null==(e=this.currPage.backgroundImage.config)?void 0:e.imgControl)&&t},backgroundImgFlip(){var e;const{horizontalFlip:t=!1,verticalFlip:n=!1}=(null==(e=this.currPage.backgroundImage.config)?void 0:e.styles)||{};return[t,n]},isShowImage(){return this.backgroundImage.assetId},showColorSlips(){return ke.Z.showColorSlips},colorSlipsIcon(){return this.backgroundImage.assetId?"multi":this.backgroundColor}}),mounted(){ir.Z.on(o._2.opacity,this.handleChangeBgOpacity),_e.ZP.on(o.gQ.background,this.handleChangeBgColor),_e.ZP.onStop(o.gQ.background,this.recordChange)},beforeUnmount(){ir.Z.event.off(o._2.opacity,this.handleChangeBgOpacity),_e.ZP.event.off(o.gQ.background,this.handleChangeBgColor),_e.ZP.offStop(o.gQ.background,this.recordChange)},methods:qo(Go({},(0,ze.OI)({updateLayerStyles:"UPDATE_layerStyles",setBgColor:"SET_backgroundColor",removeBg:"REMOVE_background",setBgOpacity:"SET_backgroundOpacity",setBgImageControl:"SET_backgroundImageControl",setBgImageStyles:"SET_backgroundImageStyles"})),{handleDeleteBackground(){u.Z.handleDeleteBackground()},handleLockBackground(){u.Z.handleLockBackground()},handleChangeBgColor(e){this.setBgColor({pageIndex:p.Z.currFocusPageIndex,color:e})},handleChangeBgOpacity(e){this.setBgOpacity({pageIndex:p.Z.currFocusPageIndex,opacity:e})},handleControlBgImage(){if(this.backgroundLocked)return this.handleLockedNotify();this.setBgImageControl({pageIndex:p.Z.currFocusPageIndex,imgControl:!this.backgroundImgControl})},handleChangeBgAdjust(e){this.setBgImageStyles({pageIndex:p.Z.currFocusPageIndex,styles:{adjust:Go({},e)}})},openSliderPopup(){if(this.backgroundLocked)return this.handleLockedNotify();const{backgroundOpacity:e}=this;ir.Z.setCurrEvent(o._2.opacity),ir.Z.setSliderConfig(Object.assign({value:e,noText:!1},Fo.Z.mappingMinMax("opacity"))),ir.Z.openPopup("slider",{posX:"left",target:".btn-opacity"})},handleShow(e){if(this.backgroundLocked)return this.handleLockedNotify();this.show=this.show.includes(e)?"":e},handleColorPicker(){if(this.backgroundLocked)return this.handleLockedNotify();_e.ZP.setCurrEvent(o.gQ.background),_e.ZP.setCurrColor(this.backgroundColor),ke.Z.toggleColorSlips(!0)},handleImageFlip(e){const[t,n]=this.backgroundImgFlip;this.setBgImageStyles({pageIndex:p.Z.currFocusPageIndex,styles:{horizontalFlip:"flip-h"===e?!t:t,verticalFlip:"flip-v"===e?!n:n}}),cn.Z.record()},handleLockedNotify(){(0,sr.h4)({group:"copy",text:r.Z.global.tc("NN0804")})},handleOutSide(){this.show=""},recordChange(){cn.Z.record()}})});const Yo=(0,oe.Z)(Ko,[["render",ji],["__scopeId","data-v-c191a544"],["__file","PanelBackgroundSetting.vue"]]);var Xo=Yo;const Qo={class:"panel-background-remove"},Jo={class:"panel-background-remove__grid mb-5"},es={class:"panel-background-remove__slider full"},ts={class:"text-left"},ns={class:"label-mid"},rs={class:"flex"},is=["max","min"],os={class:"full flex items-center"},ss={class:"label-mid"};function as(e,t,n,r,i,o){const s=(0,P.up)("btn"),a=(0,P.up)("svg-icon"),l=(0,P.up)("nubtn"),c=(0,P.Q2)("progress");return(0,P.wg)(),(0,P.iD)("div",Qo,[(0,P._)("div",Jo,[(0,P.Wm)(s,{class:"full-width",type:e.clearMode?"gray-active-mid":"gray-mid",hasIcon:!0,iconName:"clear",iconMargin:8,onClick:t[0]||(t[0]=t=>e.setClearMode(!0))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0385")),1)])),_:1},8,["type"]),(0,P.Wm)(s,{class:"full-width",type:e.clearMode?"gray-mid":"gray-active-mid",hasIcon:!0,iconName:"preserve",iconMargin:8,onClick:t[1]||(t[1]=t=>e.setClearMode(!1))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0386")),1)])),_:1},8,["type"]),(0,P._)("div",es,[(0,P._)("div",ts,[(0,P._)("span",ns,(0,k.zw)(e.$t("NN0387")),1)]),(0,P._)("div",rs,[(0,P.wy)((0,P._)("input",{class:"input__slider--range","onUpdate:modelValue":t[2]||(t[2]=t=>e.brushSize=t),max:e.maxBrushSize,min:e.minBrushSize,type:"range"},null,8,is),[[c],[Z.nr,e.brushSize,void 0,{number:!0}]]),(0,P.wy)((0,P._)("input",{class:"input__slider--text body-2 text-gray-2",type:"number","onUpdate:modelValue":t[3]||(t[3]=t=>e.brushSize=t)},null,512),[[Z.nr,e.brushSize,void 0,{number:!0}]])])]),(0,P._)("div",os,[(0,P.Wm)(a,{class:"mr-5",iconColor:e.showInitImage?"blue-1":"light-gray",iconName:e.showInitImage?"checkbox-checked":"checkbox",iconWidth:"16px",onClick:t[4]||(t[4]=t=>e.toggleShowInitImage(e.showInitImage))},null,8,["iconColor","iconName"]),(0,P._)("span",ss,(0,k.zw)(e.$t("NN0388")),1)]),(0,P.Wm)(l,{theme:"edit",size:"mid-full",onClick:t[5]||(t[5]=t=>e.restoreInitState())},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0389")),1)])),_:1}),(0,P.Wm)(l,{theme:"edit",size:"mid",style:{width:"100%"},onClick:t[6]||(t[6]=t=>e.cancel())},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0203")),1)])),_:1}),(0,P.Wm)(l,{theme:"edit",size:"mid",style:{width:"100%"},onClick:t[7]||(t[7]=t=>e.save())},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$tc("NN0133",1)),1)])),_:1})])])}const ls=e=>{const t=t=>{const n=t.getContext("2d"),r=document.createElement("canvas").getContext("2d"),i=n.getImageData(0,0,t.width,t.height),o=i.data.length,s={top:-1,left:-1,right:-1,bottom:-1};let a,l;for(let e=0;e<o;e+=4)0!==i.data[e+3]&&(a=e/4%t.width,l=~~(e/4/t.width),-1===s.top&&(s.top=l),(-1===s.left||a<s.left)&&(s.left=a),(-1===s.right||a>s.right)&&(s.right=a),(-1===s.bottom||l>s.bottom)&&(s.bottom=l));const c=s.bottom-s.top+1,d=s.right-s.left+1;console.log(t.width,t.height,s,c,d);const u=n.getImageData(s.left,s.top,d,c);r.canvas.width=d,r.canvas.height=c,r.putImageData(u,0,0);const g=d/t.width,p=c/t.height,h=e?e.width/t.width:1;return{canvas:r.canvas,width:d,height:c,remainingWidthPercentage:g,remainingHeightPercentage:p,xShift:s.left*h,yShift:s.top*h}};return{trimCanvas:t}};var cs=ls,ds=n(865),us=n(30544),gs=n(58559),ps=Object.defineProperty,hs=Object.getOwnPropertySymbols,ms=Object.prototype.hasOwnProperty,ys=Object.prototype.propertyIsEnumerable,fs=(e,t,n)=>t in e?ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bs=(e,t)=>{for(var n in t||(t={}))ms.call(t,n)&&fs(e,n,t[n]);if(hs)for(var n of hs(t))ys.call(t,n)&&fs(e,n,t[n]);return e};class vs{get prevPageScaleRatio(){return i.Z.getters["bgRemove/getPrevPageScaleRatio"]}get canvas(){return i.Z.getters["bgRemove/getCanvas"]}get modifiedFlag(){return i.Z.getters["bgRemove/getModifiedFlag"]}get autoRemoveResult(){return i.Z.getters["bgRemove/getAutoRemoveResult"]}get bgRemoveIdInfo(){return i.Z.getters["bgRemove/getIdInfo"]}get isAdmin(){return i.Z.getters["user/isAdmin"]}setPrevScrollPos(e){i.Z.commit("bgRemove/SET_prevScrollPos",e)}setAutoRemoveResult(e){console.log(e),i.Z.commit("bgRemove/SET_autoRemoveResult",e)}reduceBgrmRemain(){i.Z.commit("payment/REDUCE_bgrmRemain")}setInBgRemoveMode(e){i.Z.commit("bgRemove/SET_inBgRemoveMode",e)}setLoading(e){i.Z.commit("bgRemove/SET_loading",e)}setIsProcessing(e){i.Z.commit("bgRemove/SET_isProcessing",e)}setIdInfo(e){i.Z.commit("bgRemove/SET_idInfo",e)}removeBg(){const{layers:e,pageIndex:t,index:n}=p.Z.currSelectedInfo;this.setIsProcessing(!0),g.ZP.updateLayerProps(t,n,{inProcess:o.Q8.bgRemove});const s=e[0],a=p.Z.currFocusPage.id,l=s.id;this.setIdInfo({pageId:a,layerId:l});const c=s.srcObj.type,{imgWidth:d,imgHeight:u}=s.styles,h=d>=u?0:1,m="unsplash"===c||"pexels"===c,y=rr.Z.getSrc(p.Z.currSelectedInfo.layers[0],"larg",void 0,!0);i.Z.dispatch("user/removeBg",bs({srcObj:s.srcObj},m&&{aspect:h})).then((e=>{if(0===e.flag)Qe.Z.polling(e.url,(e=>{if(console.log(e.flag,e.data),0===e.flag&&e.data){this.reduceBgrmRemain();const t=p.Z.getPageIndexById(a),n=g.ZP.getLayerIndexById(t,null!=l?l:"");if(-1!==t&&-1!==n){g.ZP.updateLayerProps(t,n,{inProcess:o.Q8.none});const r=document.querySelector(".editor-view"),{scrollTop:i,scrollLeft:s}=r;this.setPrevScrollPos({top:i,left:s}),this.setAutoRemoveResult(rr.Z.getBgRemoveInfo(e.data,y)),this.setInBgRemoveMode(!0),ke.Z.setCurrActivePanel("remove-bg")}return!0}if(1===e.flag){const e=p.Z.getPageIndexById(a),t=g.ZP.getLayerIndexById(e,null!=l?l:"");return-1!==e&&-1!==t&&(g.ZP.updateLayerProps(e,t,{inProcess:o.Q8.none}),(0,sr.h4)({group:"error",text:`${r.Z.global.t("NN0349")}`})),!0}return!1}));else{const t=p.Z.getPageIndexById(a),n=g.ZP.getLayerIndexById(t,null!=l?l:"");-1!==t&&-1!==n&&g.ZP.updateLayerProps(t,n,{inProcess:!1}),this.setIsProcessing(!1),gs.Z.errorHandler(e.msg)}}))}cancel(){this.setIsProcessing(!1),this.setInBgRemoveMode(!1),p.Z.setScaleRatio(this.prevPageScaleRatio),l.Z.isTouchDevice()&&ke.Z.setCurrActivePanel("none")}save(){var e;const{index:t,pageIndex:n}=p.Z.currSelectedInfo;if(nr.ZP.updateShadowSrc({pageIndex:n,layerIndex:t},{type:"after-bg-remove",userId:"",assetId:""}),nr.ZP.updateEffectProps({pageIndex:n,layerIndex:t},{isTransparent:!0}),this.modifiedFlag){const{teamId:s,id:a}=this.autoRemoveResult,l=null==(e=this.autoRemoveResult.urls.larg.match(/asset\/image\/([\w]+)\/larg/))?void 0:e[1],c=g.ZP.getLayer(n,t).styles,{width:d,height:u}=c,{trimCanvas:h}=cs(c),{canvas:m,remainingHeightPercentage:y,remainingWidthPercentage:f,xShift:b,yShift:v}=h(this.canvas),w=m.toDataURL("image/png;base64"),{pageId:N,layerId:S}=this.bgRemoveIdInfo;g.ZP.updateLayerProps(n,t,{previewSrc:w,trace:1});const x=d*f,P=u*y;g.ZP.updateLayerStyles(n,t,{x:c.x+b,y:c.y+v,width:x,height:P,imgWidth:x,imgHeight:P,imgX:0,imgY:0}),this.setInBgRemoveMode(!1),p.Z.setScaleRatio(this.prevPageScaleRatio),this.setIsProcessing(!0),i.Z.commit("SET_currSidebarPanelType",o.iI.file);const I=p.Z.getPageIndexById(N),_=g.ZP.getLayerIndexById(I,S);g.ZP.updateLayerProps(I,_,{tmpId:a,srcObj:{type:"",userId:"",assetId:""}}),Qe.Z.uploadAsset("image",[w],{addToPage:!1,pollingCallback:e=>{const a=p.Z.getPageIndexById(N),l=g.ZP.getLayerIndexById(a,S),c={type:this.isAdmin?"public":"private",userId:s,assetId:this.isAdmin?e.data.id:e.data.asset_index};g.ZP.updateLayerProps(a,l,{srcObj:c,trace:1}),i.Z.commit("DELETE_previewSrc",{type:this.isAdmin?"public":"private",userId:s,assetId:this.isAdmin?e.data.id:e.data.asset_index,assetIndex:e.data.asset_index});const d=g.ZP.getLayer(n,t);if(d.type===o.F5.image&&d.styles.shadow.currentEffect!==ds.w.none){const e={pageIndex:a,layerIndex:l},t={config:d,layerInfo:e};us.Z.handleShadowUpload(t,!0),(0,sr.h4)({group:"copy",text:`${r.Z.global.t("NN0665")}`})}cn.Z.record(),this.setLoading(!1),this.setIsProcessing(!1)},id:null!=a?a:l,needCompressed:!1,pollingJsonName:"result2.json"})}else{g.ZP.updateLayerProps(n,t,{srcObj:{type:this.isAdmin?"public":"private",userId:this.autoRemoveResult.teamId,assetId:this.isAdmin?this.autoRemoveResult.id:this.autoRemoveResult.assetIndex},previewSrc:this.autoRemoveResult.urls.larg,trace:1});const e=g.ZP.getLayer(n,t);if(e.type===o.F5.image&&e.styles.shadow.currentEffect!==ds.w.none){const i={pageIndex:n,layerIndex:t},o={config:e,layerInfo:i};us.Z.handleShadowUpload(o,!0),(0,sr.h4)({group:"copy",text:`${r.Z.global.t("NN0665")}`})}i.Z.commit("file/UPDATE_IMAGE_URLS",Object.assign({assetId:this.autoRemoveResult.id},this.autoRemoveResult)),this.setInBgRemoveMode(!1),this.setIsProcessing(!1),p.Z.setScaleRatio(this.prevPageScaleRatio),cn.Z.record()}}}var ws=new vs,Ns=Object.defineProperty,Ss=Object.defineProperties,xs=Object.getOwnPropertyDescriptors,Ps=Object.getOwnPropertySymbols,Is=Object.prototype.hasOwnProperty,_s=Object.prototype.propertyIsEnumerable,ks=(e,t,n)=>t in e?Ns(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zs=(e,t)=>{for(var n in t||(t={}))Is.call(t,n)&&ks(e,n,t[n]);if(Ps)for(var n of Ps(t))_s.call(t,n)&&ks(e,n,t[n]);return e},Cs=(e,t)=>Ss(e,xs(t)),zs=(0,P.aZ)({emits:[],data(){return{minBrushSize:1,maxBrushSize:300}},computed:Cs(Zs({},(0,ze.Se)({clearMode:"bgRemove/getClearMode",showInitImage:"bgRemove/getShowInitImage",modifiedFlag:"bgRemove/getModifiedFlag",currSelectedInfo:"getCurrSelectedInfo",autoRemoveResult:"bgRemove/getAutoRemoveResult",isAdmin:"user/isAdmin",prevPageScaleRatio:"bgRemove/getPrevPageScaleRatio",bgRemoveIdInfo:"bgRemove/getIdInfo",isProcessing:"bgRemove/getIsProcessing"})),{brushSize:{get:()=>i.Z.getters["bgRemove/getBrushSize"],set(e){this.setBrushSize(e)}}}),methods:Cs(Zs({},(0,ze.OI)({setBrushSize:"bgRemove/SET_brushSize",setRestoreInitState:"bgRemove/SET_restoreInitState",setClearMode:"bgRemove/SET_clearMode",setShowInitImage:"bgRemove/SET_showInitImage"})),{toggleShowInitImage(e){this.setShowInitImage(!e)},restoreInitState(){this.setRestoreInitState(!0)},save(){ws.save()},cancel(){ws.cancel()}})});const Ts=(0,oe.Z)(zs,[["render",as],["__scopeId","data-v-3762da78"],["__file","PanelBgRemove.vue"]]);var Ls=Ts,Es=n(87669);const Ds={class:"panel-group mb-10"},Os={class:"panel-group__group-ctrl"},Ms={class:"border-gray-4 p-5 btn-opacity"},As={class:"action-bar flex-between"},$s={class:"panel-group__adjust"};function Fs(e,t,n,r,i,o){const s=(0,P.up)("nubtn"),a=(0,P.up)("svg-icon"),l=(0,P.Q2)("hint");return(0,P.wg)(),(0,P.iD)("div",Ds,[(0,P._)("div",Os,[(0,P.Wm)(s,{class:"mr-10",size:"mid-full",disabled:e.isLocked||!e.isGroup&&e.selectedLayerNum<=1,onClick:t[0]||(t[0]=t=>e.isGroup?e.ShortcutUtils.ungroup():e.ShortcutUtils.group())},{default:(0,P.w5)((()=>[(0,P._)("span",null,(0,k.zw)(e.isGroup?e.$t("NN0212"):e.$t("NN0029")),1)])),_:1},8,["disabled"]),(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",Ms,[(0,P.Wm)(a,{class:(0,k.C_)({pointer:!e.isLocked}),iconName:"transparency",iconWidth:"24px",iconColor:"gray-2",onClick:t[1]||(t[1]=t=>e.openSliderPopup())},null,8,["class"])])),[[l,e.$t("NN0030")]])]),(0,P._)("div",As,[(0,P.wy)((0,P.Wm)(a,{class:(0,k.C_)(["layers-alt feature-button p-5",{pointer:!e.isLocked}]),iconName:"layers-alt",iconWidth:"20px",iconColor:e.isLocked?"gray-4":"gray-2",onClick:t[2]||(t[2]=t=>e.openOrderPopup())},null,8,["class","iconColor"]),[[l,e.$t("NN0031")]]),(0,P.wy)((0,P.Wm)(a,{class:(0,k.C_)(["feature-button p-5",{pointer:!e.isLocked}]),iconName:"copy",iconWidth:"20px",iconColor:e.isLocked?"gray-4":"gray-2",onClick:t[3]||(t[3]=t=>e.iconAction("copy"))},null,8,["class","iconColor"]),[[l,e.$t("NN0032")]]),(0,P.wy)((0,P.Wm)(a,{class:(0,k.C_)(["pointer feature-button p-5",{active:e.isLocked}]),iconName:e.isLocked?"lock":"unlock",iconWidth:"20px",iconColor:"gray-2",onClick:t[4]||(t[4]=t=>e.iconAction(e.isLocked?"lock":"unlock"))},null,8,["class","iconName"]),[[l,e.isLocked?`${e.$t("NN0033")}`:`${e.$t("NN0213")}`]]),(0,P.wy)((0,P.Wm)(a,{class:(0,k.C_)(["feature-button p-5",{pointer:!e.isLocked}]),iconName:"trash",iconWidth:"20px",iconColor:e.isLocked?"gray-4":"gray-2",onClick:t[5]||(t[5]=t=>e.iconAction("trash"))},null,8,["class","iconColor"]),[[l,e.$t("NN0034")]]),(0,P.wy)((0,P.Wm)(a,{class:(0,k.C_)(["feature-button p-5",{pointer:!e.isCopyFormatDisabled}]),iconName:"brush",iconWidth:"20px",iconColor:e.isCopyFormatDisabled?"gray-4":"gray-2",onClick:e.handleCopyFormat},null,8,["class","iconColor","onClick"]),[[l,e.$t("NN0035")]])]),(0,P._)("div",$s,[(0,P.Wm)(s,{class:"btn-align",theme:"edit",size:"mid-full",disabled:e.isLocked,onClick:e.openAlignPopup},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$tc("NN0044",1)),1)])),_:1},8,["disabled","onClick"]),(0,P.Wm)(s,{class:"btn-flip",theme:"edit",size:"mid-full",disabled:e.isLocked||e.isFlipDisabled,onClick:e.openFlipPopup},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0038")),1)])),_:1},8,["disabled","onClick"])])])}var js=Object.defineProperty,Bs=Object.defineProperties,Rs=Object.getOwnPropertyDescriptors,Hs=Object.getOwnPropertySymbols,Us=Object.prototype.hasOwnProperty,Ws=Object.prototype.propertyIsEnumerable,Vs=(e,t,n)=>t in e?js(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gs=(e,t)=>{for(var n in t||(t={}))Us.call(t,n)&&Vs(e,n,t[n]);if(Hs)for(var n of Hs(t))Ws.call(t,n)&&Vs(e,n,t[n]);return e},qs=(e,t)=>Bs(e,Rs(t)),Ks=(0,P.aZ)({emits:[],data(){return{ShortcutUtils:kt.Z}},computed:qs(Gs({},(0,ze.Se)({currSelectedInfo:"getCurrSelectedInfo",currSubSelectedInfo:"getCurrSubSelectedInfo",popupComponent:"popup/getPopupComponent"})),{selectedLayerNum(){return this.currSelectedInfo.layers.length},isLocked(){return g.ZP.getSelectedLayer().locked},isCopyFormatDisabled(){if(1===this.layerNum){const e=this.currSelectedInfo.types,t=g.ZP.getCurrLayer;if(e.has("group")){if(-1!==this.subActiveLayerIndex){if(["text","image"].includes(this.subActiveLayerType))return this.isLocked;if("frame"===this.subActiveLayerType){const e=this.subActiveLayer;if(1===e.clips.length)return this.isLocked}}}else if(e.has("frame")){const e=t;if(1===e.clips.length)return this.isLocked;if(-1!==this.subActiveLayerIndex&&"image"===e.clips[this.subActiveLayerIndex].type)return this.isLocked}else if(e.has("text")||e.has("image"))return this.isLocked}return!0},isGroup(){return this.currSelectedInfo.types.has("group")&&1===this.currSelectedInfo.layers.length},layerNum(){return this.currSelectedInfo.layers.length},subActiveLayerIndex(){return g.ZP.subLayerIdx},subActiveLayer(){if(-1!==this.subActiveLayerIndex)return g.ZP.getCurrLayer.layers[this.subActiveLayerIndex]},subActiveLayerType(){const e=g.ZP.getCurrLayer;return"group"===e.type&&-1!==this.subActiveLayerIndex?e.layers[this.subActiveLayerIndex].type:""},opacity(){return g.ZP.getCurrOpacity},isTextEditable(){return 1===this.layerNum&&"text"===this.currSelectedInfo.layers[0].type&&this.currSelectedInfo.layers[0].contentEditable},isFlipDisabled(){return this.isGroup||1!==this.layerNum||this.isTextEditable}}),mounted(){ir.Z.on(o._2.opacity,(e=>{this.setOpacity(e)}))},watch:{opacity(e){ir.Z.setSliderConfig(Object.assign({value:e,noText:!1},Fo.Z.mappingMinMax("opacity")))}},methods:{iconAction(e){this.isLocked&&"lock"!==e||Fo.Z.mappingIconAction(e)},openOrderPopup(){this.isLocked||ir.Z.openPopup("order")},openAlignPopup(){this.isLocked||ir.Z.openPopup("align")},openFlipPopup(){this.isLocked||ir.Z.openPopup("flip")},openSliderPopup(){this.isLocked||(ir.Z.setCurrEvent(o._2.opacity),ir.Z.setSliderConfig(Object.assign({value:this.opacity,noText:!1},Fo.Z.mappingMinMax("opacity"))),ir.Z.openPopup("slider",{posX:"right",target:".btn-opacity"}))},setOpacity(e){g.ZP.updateLayerOpacity(e)},handleCopyFormat(){if(this.isCopyFormatDisabled)return;const e=this.currSelectedInfo.types,t=this.currSelectedInfo.layers[0];if(e.has("group")){const e=this.subActiveLayerType,t=this.subActiveLayer;"text"===e&&Jr.Z.copyTextFormat(t),"image"===e&&Jr.Z.copyImageFormat(t),"frame"===e&&Jr.Z.copyImageFormat(t.clips[0])}else e.has("text")&&Jr.Z.copyTextFormat(t),e.has("image")&&Jr.Z.copyImageFormat(t),e.has("frame")&&Jr.Z.copyImageFormat(t.clips[Math.max(0,this.subActiveLayerIndex)])}}});const Ys=(0,oe.Z)(Ks,[["render",Fs],["__scopeId","data-v-5027f636"],["__file","PanelGeneral.vue"]]);var Xs=Ys;const Qs={class:"panel-group mb-10"},Js={class:"text-blue-1 subtitle-1"},ea={class:"panel-group__adjust"};function ta(e,t,n,r,i,o){const s=(0,P.up)("nubtn");return(0,P.wg)(),(0,P.iD)("div",Qs,[(0,P._)("span",Js,(0,k.zw)(e.$t("NN0416")+e.$t("NN0036")),1),(0,P._)("div",ea,[(0,P.Wm)(s,{theme:"edit",size:"mid-full",onClick:e.handleCancel},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0203")),1)])),_:1},8,["onClick"]),(0,P.Wm)(s,{size:"mid-full",onClick:e.handleFinish},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$tc("NN0133",1)),1)])),_:1},8,["onClick"])])])}var na=Object.defineProperty,ra=Object.defineProperties,ia=Object.getOwnPropertyDescriptors,oa=Object.getOwnPropertySymbols,sa=Object.prototype.hasOwnProperty,aa=Object.prototype.propertyIsEnumerable,la=(e,t,n)=>t in e?na(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ca=(e,t)=>{for(var n in t||(t={}))sa.call(t,n)&&la(e,n,t[n]);if(oa)for(var n of oa(t))aa.call(t,n)&&la(e,n,t[n]);return e},da=(e,t)=>ra(e,ia(t)),ua=(0,P.aZ)({emits:[],computed:ca({},(0,ze.Se)("imgControl",["isBgImgCtrl","isImgCtrl"])),methods:da(ca({},(0,ze.OI)({setImgConfig:"imgControl/SET_CONFIG",setBgImgConfig:"imgControl/SET_BG_CONFIG"})),{handleCancel(){const e=this.isImgCtrl?"imgCtrl":this.isBgImgCtrl?"bgImgCtrl":"";this.isImgCtrl?this.setImgConfig("reset"):this.isBgImgCtrl&&this.setBgImgConfig("reset"),this.handleFinish(e)},handleFinish(e){if("imgCtrl"===e||this.isImgCtrl){const{getCurrLayer:e,pageIndex:t,layerIndex:n,subLayerIdx:r}=g.ZP;switch(e.type){case o.F5.image:case o.F5.group:g.ZP.updateLayerProps(t,n,{imgControl:!1},r);break;case o.F5.frame:er.Z.updateFrameLayerProps(t,n,Math.max(r,0),{imgControl:!1})}}else("bgImgCtrl"===e||this.isBgImgCtrl)&&p.Z.setBackgroundImageControlDefault()}})});const ga=(0,oe.Z)(ua,[["render",ta],["__scopeId","data-v-0b3992f8"],["__file","panelImgCtrl.vue"]]);var pa=ga;const ha=e=>((0,P.dD)("data-v-3256a78c"),e=e(),(0,P.Cn)(),e),ma={class:"page-setting"},ya={class:"page-setting-row page-setting__title"},fa={class:"text-gray-2 label-mid"},ba={class:"page-setting__size__box"},va={class:"body-XS text-gray-2"},wa=ha((()=>(0,P._)("span",{class:"body-XS text-gray-3"},"W",-1))),Na=ha((()=>(0,P._)("span",{class:"body-XS text-gray-2 text-center"},"x",-1))),Sa={class:"page-setting__size__box"},xa={class:"body-XS text-gray-2"},Pa=ha((()=>(0,P._)("span",{class:"body-XS text-gray-3"},"H",-1))),Ia={class:"page-setting__apply__text"},_a={key:0,class:"popup-window"},ka={class:"size-selector"},Za={class:"text-H5 text-center mb-10"},Ca={key:0,class:"page-setting__bleed"},za={class:"text-gray-2 label-mid"},Ta={key:0,class:"page-setting-row page-setting__bleed__content"},La=ha((()=>(0,P._)("div",{class:"page-setting__footer"},null,-1))),Ea={key:1,class:"template-information"},Da=ha((()=>(0,P._)("div",{class:"template-information__divider pb-10"},null,-1))),Oa={key:0,class:"pt-10"},Ma=ha((()=>(0,P._)("span",{class:"text-gray-1 label-lg"},"群 組 資 訊",-1))),Aa={class:"template-information__line"},$a=ha((()=>(0,P._)("span",{class:"body-1"},"groupId",-1))),Fa={class:"pt-5 text-red body-2"},ja=["onClick"],Ba={key:0},Ra={key:0,class:"py-5 text-red body-2"},Ha={key:1,class:"template-information__line"},Ua=ha((()=>(0,P._)("span",{class:"body-1 text-red-1"},"原設定內容",-1))),Wa=[Ua],Va={key:2,class:"mb-10 square-wrapper wrong text-center"},Ga={key:0,class:"body-1"},qa={key:1,class:"pr-10 cover-option body-4"},Ka=ha((()=>(0,P._)("span",null,"theme",-1))),Ya=ha((()=>(0,P._)("span",null,"封面頁碼",-1))),Xa=[Ka,Ya],Qa={class:"pl-15 body-1 text-left"},Ja={key:3,class:"template-information__line"},el=ha((()=>(0,P._)("span",{class:"body-1"},"修正版",-1))),tl=[el],nl={class:"square-wrapper text-center"},rl=ha((()=>(0,P._)("div",{class:"pr-10 cover-option body-4"},[(0,P._)("span",null,"theme"),(0,P._)("span",null,"封面頁碼")],-1))),il={class:"pl-15 body-1 text-left"},ol=["onUpdate:modelValue"],sl=["value"],al={class:"pt-10"},ll=ha((()=>(0,P._)("div",{class:"template-information__divider2"},null,-1))),cl=ha((()=>(0,P._)("span",{class:"text-gray-1 label-lg"},"模 板 資 訊",-1))),dl={class:"template-information__content"},ul={class:"template-information__line",style:{background:"#eee"}},gl=ha((()=>(0,P._)("span",{class:"body-1"},"focus",-1))),pl=["src"],hl={key:1},ml={key:0,class:"text-red"},yl={class:"template-information__line"},fl=ha((()=>(0,P._)("span",{class:"body-1"},"key_id",-1))),bl={class:"template-information__line"},vl=ha((()=>(0,P._)("span",{class:"body-1"},"創建者",-1))),wl={class:"template-information__line"},Nl=ha((()=>(0,P._)("span",{class:"body-1"},"修改者",-1))),Sl={class:"template-information__line"},xl=ha((()=>(0,P._)("span",{class:"body-1"},"上次更新",-1))),Pl={class:"pl-15 body-2"},Il={class:"template-information__line"},_l=ha((()=>(0,P._)("span",{class:"body-1"},"模板尺寸",-1))),kl={class:"pl-15 body-2"},Zl=ha((()=>(0,P._)("div",{class:"pt-10"},"plan(0：預設一般 / 1：Pro)",-1))),Cl=ha((()=>(0,P._)("div",{class:"template-information__line"},[(0,P._)("span",{class:"body-1"},"Theme_ids")],-1))),zl=ha((()=>(0,P._)("div",{class:"py-5 text-red body-2"},"提醒：主題設定有誤。請在下方修正版確認內容後按下更新按鈕",-1))),Tl=ha((()=>(0,P._)("div",{class:"template-information__line"},[(0,P._)("span",{class:"body-1 text-red-1"},"原設定內容 (x表示設定錯誤)")],-1))),Ll={key:2,class:"square-wrapper wrong"},El={key:0,class:"pt-5 theme-option"},Dl={class:"text-red-1 text-center"},Ol={class:"body-1"},Ml={class:"body-2 text-gray-2"},Al={key:3,class:"pt-10 template-information__line"},$l=ha((()=>(0,P._)("span",{class:"body-1"},"修正版",-1))),Fl=[$l],jl={class:"square-wrapper"},Bl=["disabled","onUpdate:modelValue"],Rl={class:"body-1"},Hl={class:"body-2 text-gray-2"},Ul={class:"template-information__line pt-10"},Wl=ha((()=>(0,P._)("span",{class:"body-1"},"語系",-1))),Vl=["value"],Gl=ha((()=>(0,P._)("div",{class:"pt-10"},"tags_tw",-1))),ql=ha((()=>(0,P._)("div",{class:"pt-10"},"tags_us",-1))),Kl=ha((()=>(0,P._)("div",{class:"pt-10"},"tags_jp",-1))),Yl={class:"pt-10"},Xl=ha((()=>(0,P._)("div",{class:"template-information__divider"},null,-1))),Ql={class:"template-information__line bg-blue"},Jl=ha((()=>(0,P._)("span",{class:"body-1"},"父",-1))),ec={class:"text-blue-1"},tc={class:"template-information__line bg-blue border-bottom pb-5"},nc=ha((()=>(0,P._)("span",{class:"body-1"},"爺",-1))),rc={class:"text-blue-1"},ic={class:"bg-blue"},oc={class:"child-item"},sc=ha((()=>(0,P._)("span",{class:"body-1"},"子",-1))),ac=["onClick"],lc=ha((()=>(0,P._)("span",null,"孫",-1))),cc=["onClick"],dc=ha((()=>(0,P._)("div",{class:"template-information__line"},[(0,P._)("span",{class:"body-1 pt-10"},"parent_id (父模板)")],-1))),uc=ha((()=>(0,P._)("div",{class:"pt-5 text-red body-3"},"注意: parent_id的修改會更新模板的json，請修改時注意模板內容有無更動，避免複寫",-1))),gc={class:"template-information__line pt-10"},pc={style:{width:"50%"}},hc=ha((()=>(0,P._)("label",null,"確定修改",-1)));function mc(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("page-size-selector"),l=(0,P.up)("bleed-settings"),c=(0,P.up)("btn"),d=(0,P.up)("property-bar"),u=(0,P.Q2)("click-outside");return(0,P.wg)(),(0,P.iD)("div",ma,[(0,P._)("div",ya,[(0,P._)("span",fa,(0,k.zw)(e.$t("NN0021")),1)]),(0,P._)("div",{class:"page-setting-row page-setting__size bg-gray-6 pointer",onClick:t[0]||(t[0]=t=>e.toggleSuggestionPanel())},[(0,P._)("div",ba,[(0,P._)("span",va,(0,k.zw)(`${e.sizeToShow.width} ${e.sizeToShow.unit}`),1)]),wa,Na,(0,P._)("div",Sa,[(0,P._)("span",xa,(0,k.zw)(`${e.sizeToShow.height} ${e.sizeToShow.unit}`),1)]),Pa]),(0,P._)("div",{class:"page-setting-row page-setting__apply text-white bg-blue-1 pointer",onClick:t[1]||(t[1]=t=>e.toggleSuggestionPanel())},[e.inReviewMode?(0,P.kq)("",!0):((0,P.wg)(),(0,P.j4)(s,{key:0,class:"mr-10",iconName:"pro",iconWidth:"22px",iconColor:"alarm"})),(0,P._)("span",Ia,(0,k.zw)(e.$t("NN0022")),1)]),((0,P.wg)(),(0,P.j4)(P.lR,{to:"body"},[e.isPanelOpen?((0,P.wg)(),(0,P.iD)("div",_a,[(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",ka,[(0,P.Wm)(s,{class:"size-selector__icon pointer",iconName:"close",iconColor:"gray-2",iconWidth:"24px",onClick:t[2]||(t[2]=t=>e.setSuggestionPanel(!1))}),(0,P._)("div",Za,(0,k.zw)(e.$t("NN0022")),1),((0,P.wg)(),(0,P.j4)(P.Ob,null,[(0,P.Wm)(a,{forEditor:!0,onClose:t[3]||(t[3]=t=>e.setSuggestionPanel(!1))})],1024))])),[[u,()=>{e.setSuggestionPanel(!1)}]])])):(0,P.kq)("",!0)])),e.hasBleed?((0,P.wg)(),(0,P.iD)("div",Ca,[(0,P._)("div",{class:"page-setting-row page-setting__bleed__title pointer",onClick:t[4]||(t[4]=()=>e.showBleedSettings=!e.showBleedSettings)},[(0,P._)("span",za,(0,k.zw)(e.$t("NN0780")),1),(0,P.Wm)(s,{class:"page-setting__bleed__expand-icon",iconName:"chevron-up",iconWidth:"14px",iconColor:"gray-2",style:(0,k.j5)(e.expandIconStyles())},null,8,["style"])]),e.showBleedSettings?((0,P.wg)(),(0,P.iD)("div",Ta,[(0,P.Wm)(l,{page:e.currPage},null,8,["page"])])):(0,P.kq)("",!0)])):(0,P.kq)("",!0),La,e.showAdminTool?((0,P.wg)(),(0,P.iD)("div",Ea,[Da,(0,P.Wm)(c,{class:"rounded my-5",type:"primary-sm",style:{padding:"8px 0","margin-left":"6%",width:"88%"},onClick:t[5]||(t[5]=t=>e.getDataClicked())},{default:(0,P.w5)((()=>[(0,P.Uk)("取 得 群 組 / 模 板 資 料")])),_:1}),e.groupId.length>0?((0,P.wg)(),(0,P.iD)("div",Oa,[Ma,(0,P._)("div",Aa,[$a,(0,P._)("span",{class:"pl-15 body-2",onClick:t[6]||(t[6]=t=>e.copyText(e.groupId))},(0,k.zw)(e.groupId),1)]),(0,P._)("div",Fa,(0,k.zw)(e.groupErrorMsg),1),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.unsetThemeTemplate,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"pt-5 text-red body-2",key:t,onClick:n=>e.copyText(t)},(0,k.zw)(t),9,ja)))),128)),e.isGetGroup?((0,P.wg)(),(0,P.iD)("div",Ba,[e.showDbGroup?((0,P.wg)(),(0,P.iD)("div",Ra,"提醒：原有的設定不合法，已自動修正。請在下方修正版確認內容後按下更新按鈕")):(0,P.kq)("",!0),e.showDbGroup?((0,P.wg)(),(0,P.iD)("div",Ha,Wa)):(0,P.kq)("",!0),e.showDbGroup?((0,P.wg)(),(0,P.iD)("div",Va,[0===e.dbGroupThemes.length?((0,P.wg)(),(0,P.iD)("div",Ga,"尚未設定")):((0,P.wg)(),(0,P.iD)("div",qa,Xa)),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.dbGroupThemes,(e=>((0,P.wg)(),(0,P.iD)("div",{class:"pt-5 pr-10 cover-option",key:e.id},[(0,P._)("span",Qa,(0,k.zw)(e.id)+": "+(0,k.zw)(e.title),1),(0,P._)("span",null,"第"+(0,k.zw)(e.coverIndex+1)+"頁",1)])))),128))])):(0,P.kq)("",!0),e.showDbGroup?((0,P.wg)(),(0,P.iD)("div",Ja,tl)):(0,P.kq)("",!0),(0,P._)("div",nl,[rl,((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.groupInfo.groupThemes,(e=>((0,P.wg)(),(0,P.iD)("div",{class:"pt-5 pr-10 cover-option",key:e.id},[(0,P._)("span",il,(0,k.zw)(e.id)+": "+(0,k.zw)(e.title),1),(0,P.wy)((0,P._)("select",{class:"template-information__cover-select text-center","onUpdate:modelValue":t=>e.coverIndex=t},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.options,(e=>((0,P.wg)(),(0,P.iD)("option",{key:e.key_id,value:e.index},"第"+(0,k.zw)(e.index+1)+"頁",9,sl)))),128))],8,ol),[[Z.bM,e.coverIndex]])])))),128))]),(0,P._)("div",al,[(0,P.Wm)(c,{class:"rounded my-5",type:"primary-sm",style:{padding:"8px 0",margin:"0 auto",width:"70%"},onClick:t[7]||(t[7]=t=>e.updateGroupClicked())},{default:(0,P.w5)((()=>[(0,P.Uk)("更新")])),_:1})])])):(0,P.kq)("",!0)])):(0,P.kq)("",!0),ll,cl,(0,P._)("div",dl,[(0,P._)("div",ul,[gl,(0,P._)("span",{class:"pl-15 body-2",onClick:t[8]||(t[8]=t=>e.copyText(e.key_id))},(0,k.zw)(e.key_id),1)]),e.key_id.length>0?((0,P.wg)(),(0,P.iD)("img",{key:0,style:{margin:"0 auto"},src:`https://template.vivipic.com/template/${e.key_id}/prev?ver=${e.imgRandQuery}`},null,8,pl)):(0,P.kq)("",!0),e.isGetTemplate?((0,P.wg)(),(0,P.iD)("div",hl,[e.groupId.length>0&&!e.isGroupMember?((0,P.wg)(),(0,P.iD)("div",ml,"此模板不是上列群組的成員")):(0,P.kq)("",!0),(0,P._)("div",yl,[fl,(0,P._)("span",{class:"pl-15 body-2",onClick:t[9]||(t[9]=t=>e.copyText(e.templateInfo.key_id))},(0,k.zw)(e.templateInfo.key_id),1)]),(0,P._)("div",bl,[vl,(0,P._)("span",{class:"pl-15 body-2",onClick:t[10]||(t[10]=t=>e.copyText(e.templateInfo.creator))},(0,k.zw)(e.templateInfo.creator),1)]),(0,P._)("div",wl,[Nl,(0,P._)("span",{class:"pl-15 body-2",onClick:t[11]||(t[11]=t=>e.copyText(e.templateInfo.author))},(0,k.zw)(e.templateInfo.author),1)]),(0,P._)("div",Sl,[xl,(0,P._)("span",Pl,(0,k.zw)(e.templateInfo.edit_time),1)]),(0,P._)("div",Il,[_l,(0,P._)("span",kl,(0,k.zw)(e.templateInfo.width)+" x "+(0,k.zw)(e.templateInfo.height),1)]),Zl,(0,P._)("div",null,[(0,P.Wm)(d,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[12]||(t[12]=t=>e.templateInfo.plan=t)},null,512),[[Z.nr,e.templateInfo.plan]])])),_:1})]),Cl,e.showDbTemplate?((0,P.wg)(),(0,P.iD)(P.HY,{key:1},[zl,Tl],64)):(0,P.kq)("",!0),e.showDbTemplate?((0,P.wg)(),(0,P.iD)("div",Ll,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.themeList,(t=>((0,P.wg)(),(0,P.iD)(P.HY,{key:t.id},[e.dbTemplateThemes[t.id]?((0,P.wg)(),(0,P.iD)("div",El,[(0,P._)("span",Dl,(0,k.zw)(e.isDisabled(t.id,t.width,t.height)?"x":""),1),(0,P._)("span",Ol,(0,k.zw)(t.title),1),(0,P._)("span",Ml,(0,k.zw)(t.description),1)])):(0,P.kq)("",!0)],64)))),128))])):(0,P.kq)("",!0),e.showDbTemplate?((0,P.wg)(),(0,P.iD)("div",Al,Fl)):(0,P.kq)("",!0),(0,P._)("div",jl,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.themeList,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"pt-5 theme-option",key:t.id},[(0,P.wy)((0,P._)("input",{class:"theme-option__check",type:"checkbox",disabled:e.isDisabled(t.id,t.width,t.height),"onUpdate:modelValue":n=>e.templateThemes[t.id]=n},null,8,Bl),[[Z.e8,e.templateThemes[t.id]]]),(0,P._)("span",Rl,(0,k.zw)(t.title),1),(0,P._)("span",Hl,(0,k.zw)(t.description),1)])))),128))]),(0,P._)("div",Ul,[Wl,(0,P.wy)((0,P._)("select",{class:"template-information__select","onUpdate:modelValue":t[13]||(t[13]=t=>e.templateInfo.locale=t)},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.localeOptions,(e=>((0,P.wg)(),(0,P.iD)("option",{key:e,value:e},(0,k.zw)(e),9,Vl)))),128))],512),[[Z.bM,e.templateInfo.locale]])]),Gl,(0,P._)("div",null,[(0,P.Wm)(d,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[14]||(t[14]=t=>e.templateInfo.tags_tw=t)},null,512),[[Z.nr,e.templateInfo.tags_tw]])])),_:1})]),ql,(0,P._)("div",null,[(0,P.Wm)(d,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[15]||(t[15]=t=>e.templateInfo.tags_us=t)},null,512),[[Z.nr,e.templateInfo.tags_us]])])),_:1})]),Kl,(0,P._)("div",null,[(0,P.Wm)(d,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[16]||(t[16]=t=>e.templateInfo.tags_jp=t)},null,512),[[Z.nr,e.templateInfo.tags_jp]])])),_:1})]),(0,P._)("div",Yl,[(0,P.Wm)(c,{class:"rounded my-5",type:"primary-sm",style:{padding:"8px 0",margin:"0 auto",width:"70%"},onClick:t[17]||(t[17]=t=>e.updateDataClicked())},{default:(0,P.w5)((()=>[(0,P.Uk)("更新")])),_:1})]),Xl,(0,P._)("div",Ql,[Jl,(0,P._)("span",{class:"pl-15 body-2",onClick:t[18]||(t[18]=t=>e.copyText(e.templateInfo.parent_id))},(0,k.zw)(e.templateInfo.parent_id||"無"),1),(0,P._)("span",ec,(0,k.zw)(e.templateInfo.parent_locale),1)]),(0,P._)("div",tc,[nc,(0,P._)("span",{class:"pl-15 body-2",onClick:t[19]||(t[19]=t=>e.copyText(e.templateInfo.grandparent_id))},(0,k.zw)(e.templateInfo.grandparent_id||"無"),1),(0,P._)("span",rc,(0,k.zw)(e.templateInfo.grandparent_locale),1)]),(0,P._)("div",ic,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.templateInfo.grandchildren_id,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"border-bottom py-5",key:t.childrenId},[(0,P._)("div",oc,[sc,(0,P._)("span",{class:"body-2",onClick:n=>e.copyText(t.childrenId)},(0,k.zw)(t.childrenId),9,ac),(0,P._)("span",null,(0,k.zw)(t.childrenLocale),1)]),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(t.grandchildren,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"child-item",key:t.key_id},[lc,(0,P._)("span",{class:"body-2",onClick:n=>e.copyText(t.key_id)},(0,k.zw)(t.key_id),9,cc),(0,P._)("span",null,(0,k.zw)(t.locale),1)])))),128))])))),128))]),dc,(0,P._)("div",null,[(0,P.Wm)(d,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[20]||(t[20]=t=>e.userParentId=t)},null,512),[[Z.nr,e.userParentId]])])),_:1}),uc]),(0,P._)("div",gc,[(0,P._)("div",pc,[(0,P.wy)((0,P._)("input",{class:"template-information__check",type:"checkbox","onUpdate:modelValue":t[21]||(t[21]=t=>e.updateParentIdChecked=t)},null,512),[[Z.e8,e.updateParentIdChecked]]),hc]),(0,P.Wm)(c,{class:"rounded my-5",type:"primary-sm",style:{padding:"5px 40px"},onClick:t[22]||(t[22]=t=>e.updateParentIdClicked())},{default:(0,P.w5)((()=>[(0,P.Uk)("修改")])),_:1})])])):(0,P.kq)("",!0)])])):(0,P.kq)("",!0)])}var yc=n(16122);const fc={class:"bleed-settings"},bc={class:"bleed-settings__item__label"},vc={class:"body-XS text-gray-2"},wc={key:0,class:"bleed-settings__item__input"},Nc=["onClick"],Sc=["onClick"],xc=["onClick"],Pc=["value","onInput"],Ic={class:"text-gray-3"},_c={key:1,class:"bleed-settings__item__input mobile"},kc=["onTouchstart"],Zc=["onClick"],Cc=["value","onInput"],zc={class:"text-gray-3"},Tc=["onTouchstart"],Lc={class:"bleed-settings__lock-icon"};function Ec(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",fc,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.bleedsToShow,(n=>((0,P.wg)(),(0,P.iD)("div",{class:"bleed-settings__item",key:n.label},[(0,P._)("div",bc,[(0,P._)("span",vc,(0,k.zw)(n.label),1)]),e.$isTouchDevice()?((0,P.wg)(),(0,P.iD)("div",_c,[(0,P._)("div",{class:"bleed-settings__item__input__icon pointer mobile",onTouchstart:t=>e.addBleed(n.key,-e.bleedStep,e.isLocked)},[(0,P.Wm)(s,{iconName:"minus-small",iconWidth:"14px",iconColor:"gray-2",style:(0,k.j5)({transform:"scaleY(-1)"})},null,8,["style"])],40,kc),(0,P._)("div",{class:"bleed-settings__item__input__value body-XS mobile",onClick:t=>e.handleBleedInputClick(n.key)},[(0,P._)("input",{type:"text",inputmode:"decimal",min:"0",ref_for:!0,ref:"bleed-"+n.key,value:n.value,onInput:t=>e.setBleed(t,n.key,e.isLocked),onBlur:t[2]||(t[2]=t=>e.handleBleedSubmit()),onKeyup:t[3]||(t[3]=(...t)=>e.handleBleedSubmit&&e.handleBleedSubmit(...t))},null,40,Cc),(0,P._)("span",zc,(0,k.zw)(e.pageUnit),1)],8,Zc),(0,P._)("div",{class:"bleed-settings__item__input__icon pointer mobile",onTouchstart:t=>e.addBleed(n.key,e.bleedStep,e.isLocked)},[(0,P.Wm)(s,{iconName:"plus-small",iconWidth:"14px",iconColor:"gray-2"})],40,Tc)])):((0,P.wg)(),(0,P.iD)("div",wc,[(0,P._)("div",{class:"bleed-settings__item__input__icon pointer",onClick:t=>e.addBleed(n.key,e.bleedStep,e.isLocked)},[(0,P.Wm)(s,{iconName:"chevron-up",iconWidth:"14px",iconColor:"gray-2"})],8,Nc),(0,P._)("div",{class:"bleed-settings__item__input__icon pointer",onClick:t=>e.addBleed(n.key,-e.bleedStep,e.isLocked)},[(0,P.Wm)(s,{iconName:"chevron-up",iconWidth:"14px",iconColor:"gray-2",style:(0,k.j5)({transform:"scaleY(-1)"})},null,8,["style"])],8,Sc),(0,P._)("div",{class:"bleed-settings__item__input__value body-XS",onClick:t=>e.handleBleedInputClick(n.key)},[(0,P._)("input",{type:"text",inputmode:"decimal",min:"0",ref_for:!0,ref:"bleed-"+n.key,value:n.value,onInput:t=>e.setBleed(t,n.key,e.isLocked),onBlur:t[0]||(t[0]=t=>e.handleBleedSubmit()),onKeyup:t[1]||(t[1]=(...t)=>e.handleBleedSubmit&&e.handleBleedSubmit(...t))},null,40,Pc),(0,P._)("span",Ic,(0,k.zw)(e.pageUnit),1)],8,xc)]))])))),128)),(0,P._)("div",Lc,[(0,P._)("div",{class:"bleed-settings__lock-icon__box",style:(0,k.j5)(e.isLocked?{background:"#E7EFFF"}:{})},[(0,P.Wm)(s,{class:"pointer",iconName:e.isLocked?"lock":"unlock",iconWidth:"15px",iconColor:"gray-2",onClick:t[4]||(t[4]=t=>e.toggleLock())},null,8,["iconName"])],4)])])}var Dc=Object.defineProperty,Oc=Object.defineProperties,Mc=Object.getOwnPropertyDescriptors,Ac=Object.getOwnPropertySymbols,$c=Object.prototype.hasOwnProperty,Fc=Object.prototype.propertyIsEnumerable,jc=(e,t,n)=>t in e?Dc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bc=(e,t)=>{for(var n in t||(t={}))$c.call(t,n)&&jc(e,n,t[n]);if(Ac)for(var n of Ac(t))Fc.call(t,n)&&jc(e,n,t[n]);return e},Rc=(e,t)=>Oc(e,Mc(t)),Hc=(0,P.aZ)({emits:[],props:{page:{type:Object,required:!0}},data(){return{isLocked:!0,bleeds:p.Z.getPageDefaultBleeds(),bleedsToShow:{top:{key:"top",label:`${this.$t("NN0781")}`,value:""},bottom:{key:"bottom",label:`${this.$t("NN0782")}`,value:""},left:{key:"left",label:`${this.$t("NN0783")}`,value:""},right:{key:"right",label:`${this.$t("NN0784")}`,value:""}}}},mounted:function(){Object.keys(this.currentPageBleeds).forEach((e=>{this.bleeds[e]=this.currentPageBleeds[e],this.bleedsToShow[e].value=(0,h.round)(this.currentPageBleeds[e],this.precision).toString()}))},watch:{currentPageBleeds:function(e,t){(0,h.isEqual)(e,t)||Object.keys(e).forEach((t=>{parseFloat(this.bleedsToShow[t].value)!==e[t]&&(""===this.bleedsToShow[t].value&&0===e[t]||(this.bleeds[t]=e[t],this.bleedsToShow[t].value=(0,h.round)(e[t],this.precision).toString()))}))}},computed:Rc(Bc({},(0,ze.Se)({getPage:"getPage",groupType:"getGroupType",pagesLength:"getPagesLength"})),{currentPageBleeds(){var e,t,n,r,i,o,s,a,l;const{page:c}=this;let d=null!=(e=null==c?void 0:c.physicalBleeds)?e:null==c?void 0:c.bleeds;return d={top:1===this.groupType?null!=(i=null!=(r=null==(t=this.getPage(0).physicalBleeds)?void 0:t.top)?r:null==(n=this.getPage(0).bleeds)?void 0:n.top)?i:0:d.top,bottom:1===this.groupType?null!=(l=null!=(a=null==(o=this.getPage(this.pagesLength-1).physicalBleeds)?void 0:o.bottom)?a:null==(s=this.getPage(this.pagesLength-1).bleeds)?void 0:s.bottom)?l:0:d.bottom,left:d.left,right:d.right},d},pageUnit(){return p.Z.currFocusPage.unit},bleedStep(){switch(this.page.unit){case"px":return 1;case"cm":return.1;case"mm":return 1;case"in":return.04;default:return 1}},precision(){return"px"===this.page.unit?0:or.cB}}),methods:{toggleLock(){this.isLocked=!this.isLocked},maxBleed(e){const t=or.ZP.getConvertDpi(p.Z.currFocusPageSize),n=this.page.unit;return"px"===n?p.Z.MAX_BLEED.px:(0,h.floor)(or.ZP.convert(p.Z.MAX_BLEED.mm,"mm",n,"left"===e||"right"===e?t.width:t.height),this.precision)},setBleed(e,t,n=!1){const r=e.target.value.replace(/^0+(\d)/,"$1"),i="px"===this.page.unit?this.isInt(r):this.isFloat(r);if(!i)return void this.$forceUpdate();const o=parseFloat(r),s=Math.min((0,h.round)(o,this.precision),this.maxBleed(t)),a=o!==s,l=a&&!isNaN(s)?s.toString():r;this.bleeds[t]=s,this.bleedsToShow[t].value=l,n&&Object.keys(this.bleeds).forEach((e=>{this.bleeds[e]=s,this.bleedsToShow[e].value=l})),this.$forceUpdate(),this.applyBleeds(t,n)},addBleed(e,t,n=!1){const r=Math.min(Math.max((0,h.round)(this.bleeds[e]+t,this.precision),0),this.maxBleed(e)),i=this.bleeds[e].toString();n?Object.keys(this.bleeds).forEach((e=>{this.bleeds[e]=r,this.bleedsToShow[e].value=i})):(this.bleeds[e]=r,this.bleedsToShow[e].value=i),this.applyBleeds(e,n),cn.Z.record()},applyBleeds(e,t){if(1===this.groupType&&p.Z.pageNum>1)if(t||"top"!==e&&"bottom"!==e)for(let n=0;n<this.pagesLength;n++)p.Z.setBleeds(n,{top:0===n?this.bleeds.top:0,bottom:n===this.pagesLength-1?this.bleeds.bottom:0,left:this.bleeds.left,right:this.bleeds.right});else{const t="top"===e?0:this.pagesLength-1;p.Z.setBleeds(t,{top:"top"===e?this.bleeds.top:0,bottom:"bottom"===e?this.bleeds.bottom:0,left:this.bleeds.left,right:this.bleeds.right})}else p.Z.setBleeds(p.Z.currFocusPageIndex,this.bleeds)},handleBleedSubmit(e){e&&"Enter"!==e.key||(Object.keys(this.bleeds).forEach((e=>{isNaN(this.bleeds[e])&&(this.bleeds[e]=0),this.bleedsToShow[e].value=this.bleeds[e].toString()})),cn.Z.record())},handleBleedInputClick(e){this.$refs["bleed-"+e][0].focus()},isFloat(e){if(""===e)return!0;const t=/^\d+(?:[.]\d*?)?$/;if(!t.test(e))return!1;const n=parseFloat(e);return!isNaN(n)},isInt(e){if(""===e)return!0;const t=/^\d*$/;if(!t.test(e))return!1;const n=parseInt(e,10);return parseFloat(e)===n&&!isNaN(n)}}});const Uc=(0,oe.Z)(Hc,[["render",Ec],["__scopeId","data-v-6c7a26eb"],["__file","BleedSettings.vue"]]);var Wc=Uc,Vc=n(6990),Gc=Object.defineProperty,qc=Object.defineProperties,Kc=Object.getOwnPropertyDescriptors,Yc=Object.getOwnPropertySymbols,Xc=Object.prototype.hasOwnProperty,Qc=Object.prototype.propertyIsEnumerable,Jc=(e,t,n)=>t in e?Gc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ed=(e,t)=>{for(var n in t||(t={}))Xc.call(t,n)&&Jc(e,n,t[n]);if(Yc)for(var n of Yc(t))Qc.call(t,n)&&Jc(e,n,t[n]);return e},td=(e,t)=>qc(e,Kc(t)),nd=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),rd=(0,P.aZ)({emits:[],components:{BleedSettings:Wc,PageSizeSelector:Vc.Z},directives:{clickOutside:Ce().directive},data(){return{isPanelOpen:!1,isGetGroup:!1,isGetTemplate:!1,updateParentIdChecked:!1,localeOptions:["tw","us","jp"],imgRandQuery:"",templateInfo:{key_id:"",creator:"",author:"",edit_time:"",tags_tw:"",tags_us:"",tags_jp:"",locale:"",plan:"",width:"",height:"",theme_ids:"",parent_id:"",parent_locale:"",grandparent_id:"",grandparent_locale:"",grandchildren_id:[]},themeList:[],userParentId:"",groupInfo:{cover_ids:"",contents:[],groupThemes:[]},showDbGroup:!1,showDbTemplate:!1,dbGroupThemes:[],templateThemes:[],dbTemplateThemes:[],groupErrorMsg:"",unsetThemeTemplate:[],showBleedSettings:!0}},props:{currPage:{type:Object,required:!0}},watch:{key_id:function(){this.isGetTemplate=!1,this.isGetGroup=!1,this.templateInfo={key_id:"",creator:"",author:"",edit_time:"",tags_tw:"",tags_us:"",tags_jp:"",locale:"",plan:"",width:"",height:"",theme_ids:"",parent_id:"",parent_locale:"",grandparent_id:"",grandparent_locale:"",grandchildren_id:[]},this.imgRandQuery=l.Z.generateRandomString(5)},groupId:function(){this.isGetGroup=!1,this.showDbGroup=!1,this.dbGroupThemes=[],this.unsetThemeTemplate=[],this.groupErrorMsg="",this.groupInfo={cover_ids:"",contents:[],groupThemes:[]}},hasBleed:function(){this.showBleedSettings=!0}},computed:td(ed(ed({},(0,ze.rn)("layouts",["categories"])),(0,ze.Se)({getPage:"getPage",hasBleed:"getHasBleed",token:"user/getToken",groupId:"getGroupId",showAdminTool:"user/showAdminTool"})),{inReviewMode(){return S.Z.inReviewMode},sizeToShow(){var e,t;const{width:n,height:r,physicalWidth:i,physicalHeight:o,unit:s}=p.Z.currFocusPageSize;return{width:(0,h.round)(null!=(e=null!=i?i:n)?e:0,or.cB),height:(0,h.round)(null!=(t=null!=o?o:r)?t:0,or.cB),unit:null!=s?s:"px"}},key_id(){return this.currPage.designId},isGroupMember(){return 0!==this.groupId.length&&!!this.groupInfo.contents.some((e=>e.key_id===this.key_id))}}),methods:td(ed(ed({},(0,ze.OI)({updatePageProps:"UPDATE_pageProps",setIsloading:"SET_isGlobalLoading"})),(0,ze.nv)("layouts",["getRecently"])),{setSuggestionPanel(e){this.isPanelOpen=e},toggleSuggestionPanel(){this.setSuggestionPanel(!this.isPanelOpen)},getDataClicked(){return nd(this,null,(function*(){this.setIsloading(!0),this.resetStatus();const e={};if(0===this.groupId.length&&0===this.key_id.length&&(0,sr.h4)({group:"copy",text:"無群組及模板id"}),this.groupId.length>0){const t=yield yc.Z.getDesignInfo(this.token,"group",this.groupId,"select",JSON.stringify(e));0===t.data.flag?(this.isGetGroup=!0,this.setGroupInfo(t.data)):(0,sr.h4)({group:"copy",text:"找不到群組資料"})}if(this.key_id.length>0){const t=yield yc.Z.getDesignInfo(this.token,"template",this.key_id,"select",JSON.stringify(e));0===t.data.flag?(this.isGetTemplate=!0,this.setTemplateInfo(t.data),0===this.themeList.length&&(this.themeList=t.data.data.themeList),this.userParentId=this.templateInfo.parent_id):(0,sr.h4)({group:"copy",text:"找不到模板資料"})}this.setIsloading(!1)}))},updateGroupClicked(){return nd(this,null,(function*(){const e=this.groupInfo.groupThemes.map((e=>String(e.id)+":"+this.groupInfo.contents[e.coverIndex].key_id));this.setIsloading(!0);const t={cover_ids:e.join(),contents:this.groupInfo.contents},n=yield yc.Z.updateDesignInfo(this.token,"group",this.groupId,"update",JSON.stringify(t));0===n.data.flag?((0,sr.h4)({group:"copy",text:"群組資料更新成功"}),this.setGroupInfo(n.data)):(0,sr.h4)({group:"copy",text:"更新時發生錯誤"}),this.resetStatus(),this.setIsloading(!1)}))},updateDataClicked(){return nd(this,null,(function*(){const e=[];this.templateThemes.forEach(((t,n)=>{t&&0!==n&&e.push(String(n))}));const t=e.join();if(!this.templateInfo.key_id)return void(0,sr.h4)({group:"copy",text:"請先取得模板資料"});if(""===t||0===t.length)return void(0,sr.h4)({group:"copy",text:"theme_ids不得為空"});this.setIsloading(!0);const n={locale:this.templateInfo.locale,plan:this.templateInfo.plan?this.templateInfo.plan:"0",tags_tw:this.templateInfo.tags_tw,tags_us:this.templateInfo.tags_us,tags_jp:this.templateInfo.tags_jp,theme_ids:t},r=yield yc.Z.updateDesignInfo(this.token,"template",this.templateInfo.key_id,"update",JSON.stringify(n));0===r.data.flag?((0,sr.h4)({group:"copy",text:"模板資料更新成功"}),this.setTemplateInfo(r.data)):(0,sr.h4)({group:"copy",text:"更新時發生錯誤"}),this.resetStatus(),this.isGetGroup=!1,this.unsetThemeTemplate=[],this.groupErrorMsg="",this.setIsloading(!1)}))},updateParentIdClicked(){this.updateParentIdChecked?(this.updatePageProps({pageIndex:p.Z.currFocusPageIndex,props:{parentId:this.userParentId}}),Qe.Z.updateTemplate(),this.resetStatus()):(0,sr.h4)({group:"copy",text:"請先勾選確定修改"})},resetStatus(){this.updateParentIdChecked=!1},setGroupInfo(e){this.groupInfo={cover_ids:"",contents:[],groupThemes:[]},this.showDbGroup=!1,this.dbGroupThemes=[],this.unsetThemeTemplate=[],this.groupErrorMsg="",this.groupInfo.cover_ids=e.data.cover_ids,this.groupInfo.contents=e.data.contents,this.themeList=e.data.themeList,this.groupInfo.contents.forEach(((e,t)=>{const n=e.theme_ids.split(",");0===n.length||"0"===n[0]?((0,sr.h4)({group:"copy",text:"有模板尚未設定theme，請設定完後再更新群組資訊"}),this.groupErrorMsg="以下模板尚未設定theme，請設定完後再更新群組資訊：",this.unsetThemeTemplate.push(e.key_id),this.isGetGroup=!1):n.forEach((n=>{if(0!==parseInt(n)){const r=this.groupInfo.groupThemes.findIndex((e=>e.id===parseInt(n)));if(-1===r){const r={id:parseInt(n),title:this.themeList[this.themeList.findIndex((e=>e.id===parseInt(n)))].title,coverIndex:t,options:[{index:t,key_id:e.key_id}]};this.groupInfo.groupThemes.push(r)}else this.groupInfo.groupThemes[r].options.push({index:t,key_id:e.key_id})}}))}));const t=this.groupInfo.cover_ids.split(",");t.forEach((e=>{const t=parseInt(e.split(":")[0]);if(0===t)return;const n=this.groupInfo.groupThemes.findIndex((e=>e.id===t));if(-1!==n){const t=e.split(":")[1],r=this.groupInfo.contents.findIndex((e=>e.key_id===t));this.groupInfo.groupThemes[n].coverIndex=r}this.dbGroupThemes.push({id:t,title:this.themeList[this.themeList.findIndex((e=>e.id===t))].title,coverIndex:this.groupInfo.contents.findIndex((t=>t.key_id===e.split(":")[1])),options:[]})})),this.groupInfo.groupThemes=this.groupInfo.groupThemes.filter((e=>e.options.length>0)),this.groupInfo.groupThemes.sort(((e,t)=>e.id-t.id)),this.dbGroupThemes.sort(((e,t)=>e.id-t.id)),this.groupInfo.groupThemes.forEach((e=>{const t=this.groupInfo.contents[e.coverIndex].key_id;-1===e.options.findIndex((e=>e.key_id===t))&&(e.coverIndex=e.options[0].index)}));const n=this.groupInfo.groupThemes.map((e=>String(e.id)+":"+this.groupInfo.contents[e.coverIndex].key_id)),r=this.dbGroupThemes.map((e=>String(e.id)+":"+this.groupInfo.contents[e.coverIndex].key_id)),i=n.join(",")===r.join(",");i||(this.showDbGroup=!0)},setTemplateInfo(e){this.showDbTemplate=!1,this.templateThemes=[],this.templateInfo=e.data,this.templateInfo.edit_time=this.templateInfo.edit_time.replace(/T/," ").replace(/\..+/,""),"0"!==this.templateInfo.theme_ids&&0!==this.templateInfo.theme_ids.length||(0,sr.h4)({group:"copy",text:"尚未設定主題"});const t=this.templateInfo.theme_ids.split(",");t.forEach((e=>{this.templateThemes[parseInt(e)]=!0})),this.dbTemplateThemes=Array.from(this.templateThemes)},copyText(e){0!==e.length&&l.Z.copyText(e).then((()=>{(0,sr.h4)({group:"copy",text:`${e} 已複製`})}))},isDisabled(e,t,n){const r=t/n,i=parseFloat(this.templateInfo.width)/parseFloat(this.templateInfo.height);return 0!==n&&(r!==i&&((String(t)!==this.templateInfo.width&&0!==t||String(n)!==this.templateInfo.height&&0!==n)&&(this.templateThemes[e]&&(this.showDbTemplate=!0,this.templateThemes[e]=!1),!0)))},expandIconStyles(){return this.showBleedSettings?{}:{transform:"scaleY(-1)"}}})});const id=(0,oe.Z)(rd,[["render",mc],["__scopeId","data-v-3256a78c"],["__file","PanelPageSetting.vue"]]);var od=id;const sd={class:"photo-setting"},ad={class:"photo-setting__title text-blue-1 text-H6"},ld={class:"photo-setting__grid mb-10"};function cd(e,t,n,r,i,o){const s=(0,P.up)("nubtn"),a=(0,P.Q2)("hint");return(0,P.wg)(),(0,P.iD)("div",sd,[(0,P._)("span",ad,(0,k.zw)(e.$t("NN0039")),1),(0,P._)("div",ld,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.btns,(t=>((0,P.wg)(),(0,P.iD)(P.HY,null,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(t,(t=>((0,P.wg)(),(0,P.iD)(P.HY,null,[!t.condition||t.condition()?(0,P.wy)(((0,P.wg)(),(0,P.j4)(s,{key:t.name,class:(0,k.C_)(t.extraClass),theme:"edit",size:"mid-full",active:e.activeBtn(t),disabled:e.disableBtn(t),onClick:n=>e.handleShow(t.show)},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(t.label),1)])),_:2},1032,["class","active","disabled","onClick"])),[[a,e.disableBtn(t)?t.hint:""]]):(0,P.kq)("",!0)],64)))),256)),t.map((e=>e.show)).includes(e.show)?((0,P.wg)(),(0,P.j4)((0,P.LL)(e.show||"div"),{class:"grid-full",key:e.show+"panel",ref_for:!0,ref:"popup",imageAdjust:e.currLayerAdjust,theme:"light",onUpdate:e.handleAdjust},null,40,["imageAdjust","onUpdate"])):(0,P.kq)("",!0)],64)))),256))])])}const dd={class:"action-bar"},ud={class:"flex-between photo-effect-setting__options mb-10"},gd={class:"photo-effect-setting__field"},pd={class:"photo-effect-setting__field-name"},hd=["value","name"],md=["value","max","min","name"],yd={class:"photo-effect-setting__field"},fd={class:"photo-effect-setting__field-name"},bd={class:"photo-effect-setting__reset"},vd={class:"flex-between photo-effect-setting__options mb-10"},wd={key:1,class:"w-full photo-effect-setting__form"},Nd={class:"photo-effect-setting__field"},Sd={class:"photo-effect-setting__field-name"},xd=["value","name"],Pd=["value","max","min","name"],Id={key:0,class:"photo-effect-setting__field"},_d={class:"photo-effect-setting__field-name"},kd={class:"photo-effect-setting__reset"};function Zd(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.Q2)("hint"),l=(0,P.Q2)("progress"),c=(0,P.Q2)("ratio-change");return(0,P.wg)(),(0,P.iD)("div",{class:"photo-effect-setting",ref:"panel",tabindex:"0",onKeydown:t[8]||(t[8]=(0,Z.iM)((()=>{}),["stop"]))},[(0,P._)("div",dd,[(0,P._)("div",ud,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.shadowOption.slice(0,3),(t=>(0,P.wy)(((0,P.wg)(),(0,P.j4)(s,{class:(0,k.C_)(["photo-effect-setting__option pointer",{"photo-effect-setting__option--selected":e.currentEffect===t}]),key:`shadow-${t}`,iconName:`photo-shadow-${t}`,onClick:n=>e.onEffectClick(t),iconWidth:"56px",iconColor:"gray-2"},null,8,["iconName","onClick","class"])),[[a,e.$t(e.shadowPropI18nMap[t]._effectName)]]))),128))]),e.shadowOption.slice(0,3).includes(e.currentEffect)?((0,P.wg)(),(0,P.iD)("div",{key:0,class:(0,k.C_)(["w-full","none"!==e.currentEffect?"photo-effect-setting__form":""])},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.shadowFields,(n=>((0,P.wg)(),(0,P.iD)("div",{key:n},[(0,P._)("div",gd,[(0,P._)("div",pd,(0,k.zw)(e.$t(e.shadowPropI18nMap[e.currentEffect][n])),1),(0,P._)("input",{class:"photo-effect-setting__value-input body-2 text-gray-2",value:e.getFieldValue(n),name:n,onInput:t[0]||(t[0]=(...t)=>e.handleEffectUpdate&&e.handleEffectUpdate(...t)),type:"number"},null,40,hd)]),(0,P.wy)((0,P._)("input",{class:"photo-effect-setting__range-input input__slider--range",value:e.getFieldValue(n),max:e.fieldRange[e.currentEffect][n].max,min:e.fieldRange[e.currentEffect][n].min,name:n,onInput:t[1]||(t[1]=(...t)=>e.handleEffectUpdate&&e.handleEffectUpdate(...t)),type:"range"},null,40,md),[[l],[c]])])))),128)),"none"!==e.currentEffect?((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[(0,P._)("div",yd,[(0,P._)("div",fd,(0,k.zw)(e.$t("NN0017")),1),(0,P._)("div",{class:"photo-effect-setting__value-input",style:(0,k.j5)({backgroundColor:e.currentStyle.shadow.effects.color||"#000000"}),onClick:t[2]||(t[2]=(...t)=>e.handleColorModal&&e.handleColorModal(...t))},null,4)]),(0,P._)("div",bd,[(0,P._)("button",{onClick:t[3]||(t[3]=t=>e.reset())},(0,k.zw)(e.$t("NN0754")),1)])],64)):(0,P.kq)("",!0)],2)):(0,P.kq)("",!0),(0,P._)("div",vd,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.shadowOption.slice(3),(t=>(0,P.wy)(((0,P.wg)(),(0,P.j4)(s,{class:(0,k.C_)(["photo-effect-setting__option pointer",{"photo-effect-setting__option--selected":e.currentEffect===t}]),key:`shadow-${t}`,iconName:`photo-shadow-${t}`,onClick:n=>e.onEffectClick(t),iconWidth:"56px",iconColor:"gray-2"},null,8,["iconName","onClick","class"])),[[a,e.$t(e.shadowPropI18nMap[t]._effectName)]]))),128))]),e.shadowOption.slice(3).includes(e.currentEffect)?((0,P.wg)(),(0,P.iD)("div",wd,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.shadowFields,(n=>((0,P.wg)(),(0,P.iD)("div",{key:n},[(0,P._)("div",Nd,[(0,P._)("div",Sd,(0,k.zw)(e.$t(e.shadowPropI18nMap[e.currentEffect][n])),1),(0,P._)("input",{class:"photo-effect-setting__value-input body-2 text-gray-2",value:e.getFieldValue(n),name:n,onInput:t[4]||(t[4]=(...t)=>e.handleEffectUpdate&&e.handleEffectUpdate(...t)),type:"number"},null,40,xd)]),(0,P.wy)((0,P._)("input",{class:"photo-effect-setting__range-input input__slider--range",value:e.getFieldValue(n),max:e.fieldRange[e.currentEffect][n].max,min:e.fieldRange[e.currentEffect][n].min,name:n,onInput:t[5]||(t[5]=(...t)=>e.handleEffectUpdate&&e.handleEffectUpdate(...t)),type:"range"},null,40,Pd),[[l],[c]])])))),128)),["none","imageMatched"].includes(e.currentEffect)?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",Id,[(0,P._)("div",_d,(0,k.zw)(e.$t("NN0017")),1),(0,P._)("div",{class:"photo-effect-setting__value-input",style:(0,k.j5)({backgroundColor:"frame"===e.currentEffect?e.currentStyle.shadow.effects.frameColor:e.currentStyle.shadow.effects.color||"#000000"}),onClick:t[6]||(t[6]=(...t)=>e.handleColorModal&&e.handleColorModal(...t))},null,4)])),(0,P._)("div",kd,[(0,P._)("button",{onClick:t[7]||(t[7]=t=>e.reset())},(0,k.zw)(e.$t("NN0754")),1)])])):(0,P.kq)("",!0)])],544)}var Cd=Object.defineProperty,zd=Object.defineProperties,Td=Object.getOwnPropertyDescriptors,Ld=Object.getOwnPropertySymbols,Ed=Object.prototype.hasOwnProperty,Dd=Object.prototype.propertyIsEnumerable,Od=(e,t,n)=>t in e?Cd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Md=(e,t)=>{for(var n in t||(t={}))Ed.call(t,n)&&Od(e,n,t[n]);if(Ld)for(var n of Ld(t))Dd.call(t,n)&&Od(e,n,t[n]);return e},Ad=(e,t)=>zd(e,Td(t)),$d=(0,P.aZ)({emits:["toggleColorPanel"],data(){return{shadowPropI18nMap:nr.Dm,fieldRange:nr.yG}},mounted(){us.Z.mount()},beforeUnmount(){us.Z.handleShadowUpload()},unmounted(){this.$nextTick((()=>{this.$store.commit("SET_currFunctionPanelType",o.UJ.photoSetting)}))},computed:Ad(Md({},(0,ze.Se)({currFunctionPanelType:"getCurrFunctionPanelType"})),{shadowOption(){return Object.keys(this.effects)},shadowFields(){const{effects:e,currentEffect:t}=this;return e[t]},currentStyle(){const{styles:e}=g.ZP.getCurrConfig;return e||{}},currentEffect(){const{shadow:e}=this.currentStyle;return e&&e.currentEffect||ds.w.none},effects(){return{none:[],shadow:nr.ZP.getKeysOf(ds.w.shadow),blur:nr.ZP.getKeysOf(ds.w.blur),imageMatched:nr.ZP.getKeysOf(ds.w.imageMatched),frame:nr.ZP.getKeysOf(ds.w.frame),floating:nr.ZP.getKeysOf(ds.w.floating)}}}),methods:Ad(Md({},(0,ze.nv)({removeBg:"user/removeBg"})),{handleColorModal(){ke.Z.toggleColorSlips(!0),_e.ZP.setCurrEvent(o.gQ.photoShadow),_e.ZP.setCurrColor(this.currentStyle.shadow.effects.color)},onEffectClick(e){const t=e===ds.w.none||Object.keys(this.currentStyle.shadow.effects[e]).length;if(t)if(e===ds.w.frame){const t=this.currentStyle.shadow.effects.frameColor||this.currentStyle.shadow.effects.color||"#000000";nr.ZP.setEffect(e,{frameColor:t})}else nr.ZP.setEffect(e,{});else{const t=nr.ZP.getLocalEffectAttrs(e)||nr.ZP.getDefaultEffect(e)[e],n=nr.ZP.getLocalEffectColor(e)||"#000000";e===ds.w.frame?nr.ZP.setEffect(e,{[e]:t,frameColor:n}):nr.ZP.setEffect(e,{[e]:t,color:n})}},handleEffectUpdate(e){const{name:t,value:n}=e.target;us.Z.handleEffectUpdate(t,n)},getFieldValue(e){return this.currentStyle.shadow.effects[this.currentEffect][e]},reset(e){us.Z.reset(e||this.currentEffect)}})});const Fd=(0,oe.Z)($d,[["render",Zd],["__scopeId","data-v-59e33bee"],["__file","PanelPhotoShadow.vue"]]);var jd=Fd,Bd=Object.defineProperty,Rd=Object.defineProperties,Hd=Object.getOwnPropertyDescriptors,Ud=Object.getOwnPropertySymbols,Wd=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable,Gd=(e,t,n)=>t in e?Bd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qd=(e,t)=>{for(var n in t||(t={}))Wd.call(t,n)&&Gd(e,n,t[n]);if(Ud)for(var n of Ud(t))Vd.call(t,n)&&Gd(e,n,t[n]);return e},Kd=(e,t)=>Rd(e,Hd(t)),Yd=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),Xd=(0,P.aZ)({name:"PanelPhotoSetting",emits:["toggleColorPanel"],data(){return{show:"",isSvgImage:!1,btns:[[{name:"overlay",label:this.$t("NN0899"),show:"overlay",extraClass:"grid-full",condition:()=>this.isAdmin}],[{name:"crop",label:`${this.$t("NN0040")}`,show:"crop",condition:()=>{const e=g.ZP.getCurrConfig;return e.type===o.F5.image||e.type===o.F5.frame&&1===e.clips.length}},{name:"sliders",label:`${this.$t("NN0042")}`,show:"popup-adjust"}],[{name:"shadow",label:`${this.$t("NN0429")}`,show:"panel-photo-shadow",hint:this.$t("NN0500"),condition:()=>{const{getCurrLayer:e,subLayerIdx:t}=g.ZP;return e.type===o.F5.group&&-1!==t?e.layers[t].type===o.F5.image:e.type===o.F5.image}},{name:"BGRM",label:this.$t("NN0043"),show:"remove-bg",condition:()=>this.isImage&&!this.isFrame&&!this.inReviewMode}]]}},mounted(){document.addEventListener("mouseup",this.handleClick),le.ZP.on(le.rZ.showPhotoShadow,(e=>{this.show="undefined"!==typeof e?e:"panel-photo-shadow"===this.show?"":"panel-photo-shadow"})),this.$store.commit("SET_currFunctionPanelType",o.UJ.photoSetting)},unmounted(){le.ZP.off(le.rZ.showPhotoShadow),document.removeEventListener("mouseup",this.handleClick),this.$store.commit("SET_currFunctionPanelType",o.UJ.none)},components:{PopupAdjust:$o,PanelPhotoShadow:jd,Overlay:zo},computed:Kd(qd(qd(qd({},(0,ze.rn)("imgControl",{imageControlConfig:"image"})),(0,ze.Se)({currFunctionPanelType:"getCurrFunctionPanelType",currSelectedInfo:"getCurrSelectedInfo",currSelectedIndex:"getCurrSelectedIndex",currSubSelectedInfo:"getCurrSubSelectedInfo",currSelectedLayers:"getCurrSelectedLayers",inBgRemoveMode:"bgRemove/getInBgRemoveMode",isProcessing:"bgRemove/getIsProcessing",isProcessImgShadow:"shadow/isProcessing",isUploadImgShadow:"shadow/isUploading",isHandleShadow:"shadow/isHandling",isAdmin:"user/isAdmin"})),(0,ze.rn)("shadow",{handleId:"handleId"})),{isCropping(){return rr.Z.isImgControl()},isFrame(){const{layers:e,types:t}=this.currSelectedInfo;return t.has("frame")&&1===e.length},isImage(){const{layers:e,types:t}=this.currSelectedInfo;return t.has("image")&&1===e.length},inReviewMode(){return S.Z.inReviewMode},currLayer(){const e=this.currSelectedLayers,{index:t,type:n}=this.currSubSelectedInfo,r=e.flatMap((e=>{if("image"===e.type)return e;if("frame"===e.type){const n=e;return n.clips[Math.max(0,t)]}if("group"===e.type){if("image"===n)return e.layers[t];if("frame"===n){const n=e.layers[t];return n.active?n.clips[0]:null}if("image"===e.layers[0].type)return e.layers[0]}return null}));return qd({},r.find((e=>!!e)))},currLayerAdjust(){var e,t;return null!=(t=null==(e=this.currLayer.styles)?void 0:e.adjust)?t:{}},isUploadingImg(){return!(this.currLayer.srcObj.type&&this.currLayer.srcObj.assetId&&rr.Z.getSrc(this.currLayer.srcObj))}}),watch:{currSelectedLayers:{immediate:!0,handler(){return Yd(this,null,(function*(){const{layers:e,types:t,index:n}=this.currSelectedInfo;if(t.has("image")&&1===e.length){const t=rr.Z.getSrc(e[0],"tiny"),n=yield us.Z.isSVG(t,e[0]);this.isSvgImage=n}else this.isSvgImage=!1}))}}},methods:Kd(qd({},(0,ze.OI)({updateImgCtrlConfig:"imgControl/UPDATE_CONFIG"})),{disableBtn(e){var t;if("BGRM"===e.name)return this.isUploadingImg||this.isHandleShadow||this.isSvgImage||"panel-photo-shadow"===this.show;const n=g.ZP.getCurrConfig;if(!n.styles)return!1;const{shadow:r}=n.styles;if(r){const s=[this.handleId.layerId,this.handleId.subLayerId].includes(n.id),a=r.currentEffect===ds.w.imageMatched||r.isTransparent,l=this.currFunctionPanelType===o.UJ.photoShadow;if("shadow"===e.name)return s&&!l||this.isUploadImgShadow||(null==(t=n.previewSrc)?void 0:t.includes("data:image/png;base64"))||i.Z.state.file.uploadingAssets.some((e=>e.id===g.ZP.getCurrConfig.tmpId));if(["remove-bg","crop"].includes(e.name)&&a&&this.isHandleShadow)return!0}return"remove-bg"===e.name&&this.isUploadingImg},activeBtn(e){return this.show===e.show||(!("crop"!==e.name||!this.isCropping)||!("remove-bg"!==e.name||!this.inBgRemoveMode))},handleShow(e){switch(e){case"panel-photo-shadow":if(this.isUploadImgShadow)return;break;case"crop":if(this.isCropping)rr.Z.setImgControlDefault();else{let e;const t=g.ZP.getCurrLayer;switch(t.type){case o.F5.group:{const e=t.layers.find((e=>e.type===o.F5.image&&e.active));if(e&&e.type===o.F5.image){const{shadow:t}=e.styles,n=t.currentEffect===ds.w.imageMatched||t.isTransparent;this.isHandleShadow&&n||g.ZP.updateLayerProps(g.ZP.pageIndex,g.ZP.layerIndex,{imgControl:!0},g.ZP.subLayerIdx)}break}case o.F5.image:{const{shadow:e}=t.styles,n=e.currentEffect===ds.w.imageMatched||e.isTransparent;this.isHandleShadow&&n||g.ZP.updateLayerProps(g.ZP.pageIndex,g.ZP.layerIndex,{imgControl:!0});break}case o.F5.frame:e=Math.max(g.ZP.getCurrLayer.clips.findIndex((e=>e.type===o.F5.image&&e.active)),0),e>=0&&er.Z.updateFrameLayerProps(g.ZP.pageIndex,g.ZP.layerIndex,e,{imgControl:!0});break}}return void(this.show="");case"remove-bg":ws.removeBg(),this.show=""}this.show=e},handleOutside(){this.show=""},handleClick(e){if(""===this.show)return;if(!this.$refs.popup)return;const t=document.querySelector(".color-panel");t&&t.contains(e.target)||this.$refs.popup[0].$el.contains(e.target)||this.isHandleShadow||this.handleOutside()},handleAdjust(e){const{types:t}=this.currSelectedInfo,{index:n,type:r}=this.currSubSelectedInfo,i=qd({},e);return this.imageControlConfig&&this.updateImgCtrlConfig({adjust:i}),"frame"===g.ZP.getCurrLayer.type&&g.ZP.getCurrLayer.clips[0].isFrameImg&&er.Z.updateFrameLayerStyles(p.Z.currFocusPageIndex,this.currSelectedIndex,0,{adjust:i}),t.has("frame")||t.has("group")&&"frame"===r?t.has("frame")?n>=0?er.Z.updateFrameLayerStyles(p.Z.currFocusPageIndex,this.currSelectedIndex,n,{adjust:i}):er.Z.updateFrameLayerAllClipsStyles(p.Z.currFocusPageIndex,this.currSelectedIndex,{adjust:i}):er.Z.updateSubFrameLayerAllClipsStyles(p.Z.currFocusPageIndex,this.currSelectedIndex,n,{adjust:i}):t.has("image")||t.has("group")?xn.Z.setAdjust({adjust:i,pageIndex:p.Z.currFocusPageIndex,layerIndex:this.currSelectedIndex,subLayerIndex:n>=0?n:void 0}):void 0}})});const Qd=(0,oe.Z)(Xd,[["render",cd],["__scopeId","data-v-0ee98eea"],["__file","PanelPhotoSetting.vue"]]);var Jd=Qd;const eu=e=>((0,P.dD)("data-v-54663f61"),e=e(),(0,P.Cn)(),e),tu={class:"shape-setting"},nu={key:0,class:"action-bar flex-around line-actions",style:{padding:"8px 0"}},ru={class:"shape-setting__line-action-wrapper"},iu={class:"shape-setting__line-action-wrapper"},ou={class:"shape-setting__value-selector__button-text"},su={class:"shape-setting__value-selector__button-text"},au=eu((()=>(0,P._)("div",{class:"vertical-rule bg-gray-4"},null,-1))),lu={key:1,class:"shape-setting__basic-shape-action"},cu={class:"action-bar flex-around basic-shape-actions",style:{padding:"8px 0"}},du={class:"shape-setting__line-action-wrapper"},uu={class:"shape-setting__line-action-wrapper"},gu={class:"shape-setting__value-selector__button-text"},pu={class:"shape-setting__value-selector__button-text"},hu={class:"shape-setting__basic-shape-corner-radius flex-evenly"},mu={class:"shape-setting__shape-colors"},yu={class:"shape-setting__colors"},fu={class:"shape-setting__info"},bu={key:0},vu=eu((()=>(0,P._)("div",{class:"shape-setting__info__divider pb-10"},null,-1))),wu=eu((()=>(0,P._)("div",{class:"shape-setting__info__divider2 pb-10"},null,-1))),Nu=eu((()=>(0,P._)("span",{class:"py-5 text-gray-1 label-lg"},"元 素 資 訊",-1))),Su={class:"shape-setting__info__line",style:{background:"#eee"}},xu=eu((()=>(0,P._)("span",{class:"body-1"},"id",-1))),Pu=["src"],Iu={key:1},_u={class:"shape-setting__info__line"},ku=eu((()=>(0,P._)("span",{class:"body-1"},"id",-1))),Zu={class:"shape-setting__info__line"},Cu=eu((()=>(0,P._)("span",{class:"body-1"},"語系",-1))),zu=["value"],Tu=eu((()=>(0,P._)("div",{class:"shape-setting__info__line"},"tags_tw",-1))),Lu=eu((()=>(0,P._)("div",{class:"shape-setting__info__line"},"tags_us",-1))),Eu=eu((()=>(0,P._)("div",{class:"shape-setting__info__line"},"tags_jp",-1))),Du=eu((()=>(0,P._)("div",{class:"shape-setting__info__line"},"plan(0：預設一般 / 1：Pro)",-1))),Ou={class:"pt-10"};function Mu(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("general-value-selector"),l=(0,P.up)("marker-icon"),c=(0,P.up)("label-with-range"),d=(0,P.up)("color-btn"),u=(0,P.up)("btn"),g=(0,P.up)("property-bar"),p=(0,P.up)("spinner"),h=(0,P.Q2)("click-outside"),m=(0,P.Q2)("hint");return(0,P.wg)(),(0,P.iD)("div",tu,[e.isLine?((0,P.wg)(),(0,P.iD)("div",nu,[(0,P._)("div",ru,[(0,P.Wm)(s,{class:"pointer feature-button",iconName:"line-width",iconWidth:"24px",iconColor:"gray-2",onClick:e.openLineSliderPopup},null,8,["onClick"])]),(0,P._)("div",iu,[(0,P.Wm)(s,{class:"pointer feature-button",iconName:"line-dash",iconWidth:"24px",iconColor:"gray-2",onClick:t[0]||(t[0]=t=>e.handleValueModal("line-dash"))}),"line-dash"===e.openValueSelector?(0,P.wy)(((0,P.wg)(),(0,P.j4)(a,{key:0,class:"shape-setting__value-selector-dash-and-edge",valueArray:[[1,2],[3,4]],values:e.dashAndEdge,onUpdate:e.handleLineDashEdgeUpdate,itemMinWidth:"70",buttonHeight:"20"},{g0i0:(0,P.w5)((()=>[(0,P.Wm)(s,{iconName:"no-dash",iconWidth:"25px",iconHeight:"20px",iconColor:"gray-2"})])),g0i1:(0,P.w5)((()=>[(0,P.Wm)(s,{iconName:"dash-1",iconWidth:"25px",iconHeight:"20px",iconColor:"gray-2"})])),g1i0:(0,P.w5)((()=>[(0,P.Wm)(s,{iconName:"butt",iconWidth:"11px",iconHeight:"6px",iconColor:"gray-2"}),(0,P._)("div",ou,(0,k.zw)(e.$t("NN0084")),1)])),g1i1:(0,P.w5)((()=>[(0,P.Wm)(s,{iconName:"round",iconWidth:"11px",iconHeight:"6px",iconColor:"gray-2"}),(0,P._)("div",su,(0,k.zw)(e.$t("NN0085")),1)])),_:1},8,["values","onUpdate"])),[[h,e.handleValueModal]]):(0,P.kq)("",!0)]),au,(0,P._)("div",{class:"shape-setting__line-action-wrapper pointer feature-button",onClick:t[1]||(t[1]=t=>e.handleValueModal("start-marker"))},[(0,P.Wm)(l,{iconWidth:"25px",iconColor:"#474A57",iconHeight:"10px",styleFormat:e.markerContentMap[e.startMarker].styleArray[0],svg:e.markerContentMap[e.startMarker].svg,trimWidth:!!e.markerContentMap[e.startMarker].trimWidth,markerWidth:e.markerContentMap[e.startMarker].vSize[0],trimOffset:e.markerContentMap[e.startMarker].trimOffset},null,8,["styleFormat","svg","trimWidth","markerWidth","trimOffset"]),"start-marker"===e.openValueSelector&&e.markerListReady?(0,P.wy)(((0,P.wg)(),(0,P.j4)(a,{key:0,class:"shape-setting__value-selector-marker",valueArray:[e.markerIds],values:[e.startMarker],onUpdate:e.handleStartMarkerUpdate,itemMinWidth:"76",buttonHeight:"37"},(0,P.Nv)({_:2},[(0,P.Ko)(e.makeSlots(e.markerIds),(t=>({name:t.name,fn:(0,P.w5)((()=>[(0,P.Wm)(l,{class:"pointer",iconWidth:"25px",iconColor:"#474A57",iconHeight:"12px",styleFormat:e.markerContentMap[t.marker].styleArray[0],svg:e.markerContentMap[t.marker].svg,trimWidth:!!e.markerContentMap[t.marker].trimWidth,markerWidth:e.markerContentMap[t.marker].vSize[0],trimOffset:e.markerContentMap[t.marker].trimOffset},null,8,["styleFormat","svg","trimWidth","markerWidth","trimOffset"])]))})))]),1032,["valueArray","values","onUpdate"])),[[h,e.handleValueModal]]):(0,P.kq)("",!0),"start-marker"!==e.openValueSelector||e.markerListReady?(0,P.kq)("",!0):(0,P.wy)(((0,P.wg)(),(0,P.j4)(a,{key:1,class:"shape-setting__value-selector-marker",valueArray:[["pending"]],values:["pending"],itemMinWidth:"76",buttonHeight:"37"},{g0i0:(0,P.w5)((()=>[(0,P.Wm)(s,{iconName:"loading",iconWidth:"25px",iconHeight:"10px",iconColor:"gray-2"})])),_:1})),[[h,e.handleValueModal]])]),(0,P._)("div",{class:"shape-setting__line-action-wrapper pointer feature-button",onClick:t[2]||(t[2]=t=>e.handleValueModal("end-marker"))},[(0,P.Wm)(l,{iconWidth:"25px",iconColor:"#474A57",iconHeight:"10px",styleFormat:e.markerContentMap[e.endMarker].styleArray[0],svg:e.markerContentMap[e.endMarker].svg,trimWidth:!!e.markerContentMap[e.endMarker].trimWidth,markerWidth:e.markerContentMap[e.endMarker].vSize[0],trimOffset:e.markerContentMap[e.endMarker].trimOffset,style:{transform:"rotate(180deg)"}},null,8,["styleFormat","svg","trimWidth","markerWidth","trimOffset"]),"end-marker"===e.openValueSelector&&e.markerListReady?(0,P.wy)(((0,P.wg)(),(0,P.j4)(a,{key:0,class:"shape-setting__value-selector-marker",valueArray:[e.markerIds],values:[e.endMarker],onUpdate:e.handleEndMarkerUpdate,itemMinWidth:"76",buttonHeight:"37"},(0,P.Nv)({_:2},[(0,P.Ko)(e.makeSlots(e.markerIds),(t=>({name:t.name,fn:(0,P.w5)((()=>[(0,P.Wm)(l,{class:"pointer",iconWidth:"25px",iconColor:"#474A57",iconHeight:"12px",styleFormat:e.markerContentMap[t.marker].styleArray[0],svg:e.markerContentMap[t.marker].svg,trimWidth:!!e.markerContentMap[t.marker].trimWidth,markerWidth:e.markerContentMap[t.marker].vSize[0],trimOffset:e.markerContentMap[t.marker].trimOffset,style:{transform:"rotate(180deg)"}},null,8,["styleFormat","svg","trimWidth","markerWidth","trimOffset"])]))})))]),1032,["valueArray","values","onUpdate"])),[[h,e.handleValueModal]]):(0,P.kq)("",!0),"end-marker"!==e.openValueSelector||e.markerListReady?(0,P.kq)("",!0):(0,P.wy)(((0,P.wg)(),(0,P.j4)(a,{key:1,class:"shape-setting__value-selector-marker",valueArray:[["pending"]],values:["pending"],itemMinWidth:"76",buttonHeight:"37"},{g0i0:(0,P.w5)((()=>[(0,P.Wm)(s,{iconName:"loading",iconWidth:"25px",iconHeight:"10px",iconColor:"gray-2"})])),_:1})),[[h,e.handleValueModal]])])])):(0,P.kq)("",!0),e.isBasicShape?((0,P.wg)(),(0,P.iD)("div",lu,[(0,P._)("div",cu,[(0,P._)("div",du,[(0,P.wy)((0,P.Wm)(s,{class:"pointer feature-button",iconName:"line-width",iconWidth:"24px",iconColor:"gray-2",onClick:e.openBasicShapeSliderPopup},null,8,["onClick"]),[[m,e.$t("NN0681")]])]),(0,P._)("div",uu,[e.filled?(0,P.wy)(((0,P.wg)(),(0,P.j4)(s,{key:0,class:"pointer feature-button",iconName:"filled",iconWidth:"24px",iconColor:"gray-2",onClick:t[3]||(t[3]=t=>e.handleValueModal("isFilled"))},null,512)),[[m,e.$t("NN0797")]]):((0,P.wg)(),(0,P.j4)(s,{key:1,class:"pointer feature-button",iconName:"non-filled",iconWidth:"24px",iconColor:"gray-2",onClick:t[4]||(t[4]=t=>e.handleValueModal("isFilled"))})),"isFilled"===e.openValueSelector?(0,P.wy)(((0,P.wg)(),(0,P.j4)(a,{key:2,class:"shape-setting__value-selector-filled",valueArray:[[0,1]],values:[e.filled?1:0],onUpdate:e.handleBasicShapeFilledUpdate,itemMinWidth:"64",buttonHeight:"26"},{g0i0:(0,P.w5)((()=>[(0,P.Wm)(s,{iconName:"non-filled",iconWidth:"17px",iconColor:"gray-2"}),(0,P._)("div",gu,(0,k.zw)(e.$t("NN0088")),1)])),g0i1:(0,P.w5)((()=>[(0,P.Wm)(s,{iconName:"filled",iconWidth:"17px",iconColor:"gray-2"}),(0,P._)("div",pu,(0,k.zw)(e.$t("NN0087")),1)])),_:1},8,["values","onUpdate"])),[[h,e.handleValueModal]]):(0,P.kq)("",!0)])]),(0,P.Wm)(c,{value:e.corRadPercentage,min:0,max:100,onUpdate:e.handleBasicShapeCorRadPercentUpdate,event:e.corRadEvent,disabled:e.corRadDisabled},{default:(0,P.w5)((()=>[(0,P._)("div",hu,[(0,P.Wm)(s,{iconName:"rounded-corner",iconWidth:"11px",iconColor:"gray-2"}),(0,P._)("div",{style:(0,k.j5)("font-size: "+("us"===e.$i18n.locale?"12px":""))},(0,k.zw)(e.$t("NN0086")),5)])])),_:1},8,["value","onUpdate","event","disabled"])])):(0,P.kq)("",!0),(0,P._)("div",mu,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0798")),1),(0,P._)("div",yu,[e.hasMultiColors?((0,P.wg)(),(0,P.j4)(d,{key:0,color:e.groupColor(),active:e.showColorSlips,onClick:t[5]||(t[5]=t=>e.selectColor(0))},null,8,["color","active"])):((0,P.wg)(!0),(0,P.iD)(P.HY,{key:1},(0,P.Ko)(e.getDocumentColors,((t,n)=>((0,P.wg)(),(0,P.j4)(d,{color:t,key:`${t}-${n}`,active:e.showColorSlips&&n===e.currSelectedColorIndex,onClick:t=>e.selectColor(n)},null,8,["color","active","onClick"])))),128))])]),(0,P._)("div",fu,[e.showAdminTool&&e.isObjectElement?((0,P.wg)(),(0,P.iD)("div",bu,[vu,(0,P.Wm)(u,{class:"shape-setting__info__button rounded my-5",type:"primary-sm",onClick:t[6]||(t[6]=t=>e.getDataClicked())},{default:(0,P.w5)((()=>[(0,P.Uk)("取 得 元 素 資 料")])),_:1}),wu,Nu,(0,P._)("div",Su,[xu,(0,P._)("span",{class:"pl-15 body-2",onClick:t[7]||(t[7]=t=>e.copyText(e.focusDesignId))},(0,k.zw)(e.focusDesignId),1)]),e.focusDesignId.length>0?((0,P.wg)(),(0,P.iD)("img",{key:0,class:"shape-setting__info__image",src:`https://template.vivipic.com/svg/${e.focusDesignId}/prev?ver=${e.imgRandQuery}`},null,8,Pu)):(0,P.kq)("",!0),e.isGetSvgInfo?((0,P.wg)(),(0,P.iD)("div",Iu,[(0,P._)("div",_u,[ku,(0,P._)("span",{class:"pl-15 body-2",onClick:t[8]||(t[8]=t=>e.copyText(e.svgInfo.key_id))},(0,k.zw)(e.svgInfo.key_id),1)]),(0,P._)("div",Zu,[Cu,(0,P.wy)((0,P._)("select",{class:"shape-setting__info__select","onUpdate:modelValue":t[9]||(t[9]=t=>e.svgInfo.locale=t)},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.localeOptions,(e=>((0,P.wg)(),(0,P.iD)("option",{key:e,value:e},(0,k.zw)(e),9,zu)))),128))],512),[[Z.bM,e.svgInfo.locale]])]),Tu,(0,P._)("div",null,[(0,P.Wm)(g,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[10]||(t[10]=t=>e.svgInfo.tags_tw=t)},null,512),[[Z.nr,e.svgInfo.tags_tw]])])),_:1})]),Lu,(0,P._)("div",null,[(0,P.Wm)(g,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[11]||(t[11]=t=>e.svgInfo.tags_us=t)},null,512),[[Z.nr,e.svgInfo.tags_us]])])),_:1})]),Eu,(0,P._)("div",null,[(0,P.Wm)(g,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[12]||(t[12]=t=>e.svgInfo.tags_jp=t)},null,512),[[Z.nr,e.svgInfo.tags_jp]])])),_:1})]),Du,(0,P._)("div",null,[(0,P.Wm)(g,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[13]||(t[13]=t=>e.svgInfo.plan=t)},null,512),[[Z.nr,e.svgInfo.plan]])])),_:1})]),(0,P._)("div",Ou,[(0,P.Wm)(u,{class:"shape-setting__info__button rounded my-5",type:"primary-sm",onClick:t[14]||(t[14]=t=>e.updateDataClicked())},{default:(0,P.w5)((()=>[(0,P.Uk)("更新")])),_:1})])])):(0,P.kq)("",!0)])):(0,P.kq)("",!0)]),e.isLoading?((0,P.wg)(),(0,P.j4)(p,{key:2})):(0,P.kq)("",!0)])}const Au={class:"general-value-selector"},$u={class:"general-value-selector__wrapper"},Fu=["onClick"];function ju(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("div",Au,[(0,P._)("div",$u,[(0,P._)("ul",null,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.valueArray,((t,n)=>((0,P.wg)(),(0,P.iD)(P.HY,null,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(t,((t,r)=>((0,P.wg)(),(0,P.iD)("li",{class:(0,k.C_)(["feature-button",{active:e.values.includes(t)}]),key:t,style:(0,k.j5)({"min-width":`${e.itemMinWidth}px`})},[(0,P._)("div",{class:"general-value-selector__value flex-evenly",onClick:r=>e.setValue(n,t),style:(0,k.j5)({height:`${e.buttonHeight}px`})},[(0,P.WI)(e.$slots,"g"+n+"i"+r,{},(()=>[(0,P.Uk)((0,k.zw)("g"+n+"i"+r),1)]),!0)],12,Fu)],6)))),128)),e.notLastSubArray(n)?((0,P.wg)(),(0,P.iD)("div",{class:"horizontal-rule bg-gray-4",key:n,style:(0,k.j5)({width:2*Number(e.itemMinWidth)/3+"px"})},null,4)):(0,P.kq)("",!0)],64)))),256))])])])}var Bu=(0,P.aZ)({props:{valueArray:Array,values:{type:Array,required:!0},itemMinWidth:{type:String,default:"40"},buttonHeight:{type:String,default:"30"}},emits:["update"],data(){return{}},methods:{setValue(e,t){this.$emit("update",e,t)},notLastSubArray(e){var t;const n=(null!=(t=this.valueArray)?t:[]).length;return e!==n-1}}});const Ru=(0,oe.Z)(Bu,[["render",ju],["__scopeId","data-v-b71f7fb6"],["__file","GeneralValueSelector.vue"]]);var Hu=Ru;const Uu=["innerHTML"],Wu=["x1","x2","stroke"];function Vu(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("svg",{class:"marker-icon",style:(0,k.j5)(e.iconStyles())},[(0,P._)("g",{innerHTML:e.svg,style:(0,k.j5)(e.styleFormatter)},null,12,Uu),(0,P._)("line",{x1:e.x1,y1:"5",x2:e.iconWidth,y2:"5",stroke:e.iconColor,strokeWidth:"2.5px"},null,8,Wu)],4)}var Gu=(0,P.aZ)({emits:[],name:"MarkerIcon",props:{iconWidth:{type:String,default:"40px"},iconColor:{type:String,required:!0},styleFormat:{type:String,required:!0},svg:{type:String,required:!0},trimWidth:{type:Boolean,required:!0},markerWidth:{type:Number,required:!0},trimOffset:{type:Number,required:!0},iconHeight:{type:String,required:!0}},data(){return{}},methods:{iconStyles(){var e;return{width:this.iconWidth,height:null!=(e=this.iconHeight)?e:this.iconWidth}}},computed:{x1(){if(this.trimOffset>0)return this.trimOffset;const e=1.25;return this.trimWidth?2.5*this.markerWidth-e:!1===this.trimWidth?e:0},styleFormatter(){let e=this.styleFormat;return e=e.replace(/\$color\[0\]/g,this.iconColor),e+`transform: rotate(180deg) translate(-${2.5*this.markerWidth}px, -10px) scale(2.5);`}}});const qu=(0,oe.Z)(Gu,[["render",Vu],["__scopeId","data-v-603db2e0"],["__file","MarkerIcon.vue"]]);var Ku=qu;const Yu=e=>((0,P.dD)("data-v-b7a76752"),e=e(),(0,P.Cn)(),e),Xu={class:"label-with-range"},Qu={class:"label-with-range__label__description"},Ju=Yu((()=>(0,P._)("div",null,"placeholder",-1))),eg=["value","disabled"];function tg(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("div",Xu,[(0,P._)("div",{class:(0,k.C_)(["label-with-range__label flex-between",{pointer:!e.disabled}]),onClick:t[2]||(t[2]=(...t)=>e.openCorRadSliderPopup&&e.openCorRadSliderPopup(...t))},[(0,P._)("div",Qu,[(0,P.WI)(e.$slots,"default",{},(()=>[Ju]),!0)]),(0,P._)("div",{class:(0,k.C_)(["label-with-range__label__value",{disabled:e.disabled}])},[(0,P._)("input",{value:Math.round(e.value),onInput:t[0]||(t[0]=(...t)=>e.setValue&&e.setValue(...t)),disabled:e.disabled,onChange:t[1]||(t[1]=(...t)=>e.handleChangeStop&&e.handleChangeStop(...t))},null,40,eg)],2)],2)])}var ng=(0,P.aZ)({directives:{clickOutside:Ce().directive},props:{value:{type:Number,required:!0},max:{type:Number,required:!0},min:{type:Number,required:!0},event:{type:String,required:!0},disabled:{type:Boolean,required:!0}},emits:["update"],mounted(){ir.Z.on(this.event,(e=>{this.emitValue(e)}))},methods:{openCorRadSliderPopup(){this.disabled||(ir.Z.setCurrEvent(this.event),ir.Z.setSliderConfig({value:this.value,min:this.min,max:this.max,noText:!0,width:l.Z.getSliderWidth()}),ir.Z.openPopup("slider",{posX:"right",target:".label-with-range__label"}))},setValue(e){const t=e.target.value,n=parseInt(""===t?"0":t,10);ir.Z.setSliderConfig({value:n}),this.emitValue(n)},emitValue(e){this.$emit("update",e)},handleChangeStop(){cn.Z.record()}}});const rg=(0,oe.Z)(ng,[["render",tg],["__scopeId","data-v-b7a76752"],["__file","LabelWithRange.vue"]]);var ig=rg,og=Object.defineProperty,sg=Object.defineProperties,ag=Object.getOwnPropertyDescriptors,lg=Object.getOwnPropertySymbols,cg=Object.prototype.hasOwnProperty,dg=Object.prototype.propertyIsEnumerable,ug=(e,t,n)=>t in e?og(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gg=(e,t)=>{for(var n in t||(t={}))cg.call(t,n)&&ug(e,n,t[n]);if(lg)for(var n of lg(t))dg.call(t,n)&&ug(e,n,t[n]);return e},pg=(e,t)=>sg(e,ag(t)),hg=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),mg=(0,P.aZ)({name:"PanelShapeSetting",components:{GeneralValueSelector:Hu,MarkerIcon:Ku,LabelWithRange:ig,ColorBtn:Ie.Z},directives:{clickOutside:Ce().directive},emits:["toggleColorPanel"],props:{currPage:{type:Object,required:!0}},data(){return{corRadEvent:o._2.cornerRadius,currSelectedColorIndex:0,openValueSelector:"",markerIds:["none"],dashAndEdge:[1,3],markerContentMap:{none:{styleArray:[""],svg:"",trimWidth:void 0,vSize:[0,4],trimOffset:-1}},markerListReady:!1,isLoading:!1,imgRandQuery:"",isGetSvgInfo:!1,svgInfo:{key_id:"",edit_time:"",tags_tw:"",tags_us:"",tags_jp:"",locale:"",plan:""},localeOptions:["tw","us","jp"]}},mounted(){var e,t;const n=this.currLayer;_e.ZP.on(o.gQ.shape,(e=>{this.handleColorUpdate(e)})),_e.ZP.onStop(o.gQ.shape,(()=>{this.$nextTick((()=>cn.Z.record()))})),_e.ZP.setCurrEvent(o.gQ.shape),_e.ZP.setCurrColor(this.getDocumentColors[this.currSelectedColorIndex]),this.fetchMarkers().then((()=>hg(this,null,(function*(){var e;if(!this.categories[0])return;const t=this.categories[0].list;this.markerIds=["none",...t.map((e=>e.id))];for(const n of t){const t=(yield s.ZP.get(n)).jsonData;this.markerContentMap[n.id]={styleArray:t.styleArray,svg:t.svg,trimWidth:t.trimWidth,vSize:t.vSize,trimOffset:null!=(e=t.trimOffset)?e:-1}}this.markerListReady=!0})))),this.dashAndEdge[0]=0===(null!=(e=n.dasharray)?e:[]).length?1:2,this.dashAndEdge[1]="butt"===(null!=(t=n.linecap)?t:"butt")?3:4,ir.Z.on(o._2.lineWidth,(e=>{this.setLineWidth(e)}))},computed:pg(gg(gg({},(0,ze.Se)({currSelectedIndex:"getCurrSelectedIndex",currSelectedInfo:"getCurrSelectedInfo",token:"user/getToken",showAdminTool:"user/showAdminTool"})),(0,ze.rn)("markers",["categories"])),{lineWidth(){var e,t;const{currLayer:n}=this;return null!=(t=null==(e=n.size)?void 0:e[0])?t:0},filled(){var e;const{currLayer:t}=this;return null!=(e=t.filled)&&e},corRadPercentage(){const{currLayer:e}=this,{vSize:t,shapeType:n,size:r}=e;return Math.min(an.Z.getCorRadPercentage(t,null!=r?r:[0,0],null!=n?n:""),100)},corRadDisabled(){const{currLayer:e}=this;return"e"===e.shapeType},currLayer(){return this.currPage.layers[this.currSelectedIndex]},showColorSlips(){return ke.Z.showColorSlips},hasMultiColors(){return ni.Z.hasMultiColors},getDocumentColors(){return _e.ZP.globalSelectedColor.colors},isLine(){return ni.Z.isLine(this.currLayer)},isBasicShape(){return ni.Z.isBasicShape(this.currLayer)},startMarker(){var e,t;return this.markerListReady&&null!=(t=null==(e=this.currLayer.markerId)?void 0:e[0])?t:"none"},endMarker(){var e,t;return this.markerListReady&&null!=(t=null==(e=this.currLayer.markerId)?void 0:e[1])?t:"none"},focusDesignId(){var e,t;return null!=(t=null==(e=this.currSelectedInfo.layers[0])?void 0:e.designId)?t:""},isObjectElement(){return"text"!==this.currSelectedInfo.layers[0].db}}),watch:{"currSelectedInfo.id":function(){this.initilizeRecord()},focusDesignId:function(){this.isGetSvgInfo=!1,this.svgInfo={key_id:"",edit_time:"",tags_tw:"",tags_us:"",tags_jp:"",locale:"",plan:""},this.imgRandQuery=l.Z.generateRandomString(5)}},methods:pg(gg(gg({},(0,ze.OI)({_updateLayerProps:"UPDATE_layerProps"})),(0,ze.nv)("markers",["getCategories"])),{groupColor(){const e=this.currLayer;if("tmp"===e.type||"group"===e.type){const t=e.layers.find((e=>"shape"===e.type&&1===e.color.length)),n=t.color[0],r=(()=>{for(const t of e.layers)if("shape"===t.type&&1===t.color.length&&t.color[0]!==n)return!1;return!0})();return r?n:"multi"}return""},handleColorUpdate(e){this.setColor(e)},selectColor(e){this.currSelectedColorIndex=e,_e.ZP.setCurrColor(this.getDocumentColors[e]),ke.Z.toggleColorSlips(!0)},openLineSliderPopup(){ir.Z.setCurrEvent(o._2.lineWidth),ir.Z.setSliderConfig(Object.assign({value:this.lineWidth,width:l.Z.getSliderWidth()},Fo.Z.mappingMinMax("lineWidth"))),ir.Z.openPopup("slider",{target:".line-actions"})},openBasicShapeSliderPopup(){ir.Z.setCurrEvent(o._2.lineWidth),ir.Z.setSliderConfig(Object.assign({value:this.lineWidth,width:l.Z.getSliderWidth()},Fo.Z.mappingMinMax("lineWidth"))),ir.Z.openPopup("slider",{target:".basic-shape-actions"})},handleValueModal(e=""){this.openValueSelector=e},setColor(e){const t=g.ZP.getCurrLayer,n=(0,h.cloneDeep)(this.getDocumentColors);switch(n[this.currSelectedColorIndex]=e,t.type){case"shape":g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{color:n});break;case"tmp":case"group":{const{subLayerIdx:r}=g.ZP;if(-1===r){const r=t.layers.filter((e=>"shape"===e.type&&1===e.color.length)),i=t.layers.filter((e=>"shape"===e.type&&1!==e.color.length));if(0===r.length&&1===i.length)for(const[e,o]of t.layers.entries())"shape"===o.type&&1!==o.color.length&&g.ZP.updateSelectedLayerProps(p.Z.currFocusPageIndex,+e,{color:n});else if(0!==r.length)for(const[n,o]of t.layers.entries())"shape"===o.type&&1===o.color.length&&g.ZP.updateSelectedLayerProps(p.Z.currFocusPageIndex,+n,{color:[e]})}else{const t=g.ZP.getCurrConfig.type;"frame"===t&&this.handleFrameColorUpdate(e),"shape"===t&&g.ZP.updateSelectedLayerProps(p.Z.currFocusPageIndex,r,{color:n})}break}case"frame":this.handleFrameColorUpdate(e)}},handleFrameColorUpdate(e){const{decoration:t,decorationTop:n}=g.ZP.getCurrConfig;let r=[],i="";t&&n&&t.color.length&&n.color.length?this.currSelectedColorIndex<=t.color.length-1?(i="decorationColors",r=[...t.color],r[this.currSelectedColorIndex]=e):(i="decorationTopColors",r=[...n.color],r[this.currSelectedColorIndex-t.color.length]=e):(t&&t.color.length&&(i="decorationColors")&&(r=[...t.color]),n&&n.color.length&&(i="decorationTopColors")&&(r=[...n.color]),r[this.currSelectedColorIndex]=e),er.Z.updateFrameDecorColor({pageIndex:g.ZP.pageIndex,layerIndex:g.ZP.layerIndex,subLayerIdx:g.ZP.subLayerIdx},{[i]:r})},setLineWidth(e){ni.Z.setLineWidth(e),this.$nextTick((()=>{ir.Z.setSliderConfig({value:this.lineWidth})}))},handleLineDashEdgeUpdate(e,t){0===e?this.handleLineDash(t):this.handleLineEdge(t),cn.Z.record(),this.dashAndEdge[e]=t},handleLineDash(e){g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{dasharray:1===e?[]:[1]})},handleLineEdge(e){g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{linecap:3===e?"butt":"round"})},handleBasicShapeFilledUpdate(e,t){g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{filled:1===t}),cn.Z.record()},handleBasicShapeCorRadPercentUpdate(e){const t=e,{vSize:n,size:r,shapeType:i}=this.currLayer,o=Array.from(null!=r?r:[]);o.length>=2&&(o[1]=an.Z.getCorRadValue(n,t,null!=i?i:"")),g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{size:o})},handleStartMarkerUpdate(e,t){var n,r,i,o,s,a,l;const c=this.currLayer,{styleArray:d,svg:u,trimWidth:h,vSize:m,trimOffset:y}=this.markerContentMap[t];g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{styleArray:[c.styleArray[0],d[0],c.styleArray[2]],svg:ni.Z.genLineSvgTemplate(u,this.markerContentMap[this.endMarker].svg),trimWidth:[h,null==(n=c.trimWidth)?void 0:n[1]],markerWidth:[m[0],null!=(i=null==(r=c.markerWidth)?void 0:r[1])?i:0],trimOffset:[y,null!=(s=null==(o=c.trimOffset)?void 0:o[1])?s:-1]}),g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{markerId:[t,null!=(l=null==(a=c.markerId)?void 0:a[1])?l:"none"]}),cn.Z.record()},handleEndMarkerUpdate(e,t){var n,r,i,o,s,a,l;const c=this.currLayer,{styleArray:d,svg:u,trimWidth:h,vSize:m,trimOffset:y}=this.markerContentMap[t];g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{styleArray:[c.styleArray[0],c.styleArray[1],d[0]],svg:ni.Z.genLineSvgTemplate(this.markerContentMap[this.startMarker].svg,u),trimWidth:[null==(n=c.trimWidth)?void 0:n[0],h],markerWidth:[null!=(i=null==(r=c.markerWidth)?void 0:r[0])?i:0,m[0]],trimOffset:[null!=(s=null==(o=c.trimOffset)?void 0:o[0])?s:-1,y]}),g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{markerId:[null!=(l=null==(a=c.markerId)?void 0:a[0])?l:"none",t]}),cn.Z.record()},makeSlots(e){return this.markerIds.map(((e,t)=>({marker:e,name:`g0i${t}`})))},initilizeRecord(){this.currSelectedColorIndex<0&&(this.currSelectedColorIndex=0)},copyText(e){0!==e.length&&l.Z.copyText(e).then((()=>{(0,sr.h4)({group:"copy",text:`${e} 已複製`})}))},getDataClicked(){return hg(this,null,(function*(){this.isLoading=!0;const e={};if(0===this.focusDesignId.length&&(0,sr.h4)({group:"copy",text:"無元素id"}),this.focusDesignId.length>0){const t=yield yc.Z.getDesignInfo(this.token,"svg",this.focusDesignId,"select",JSON.stringify(e));0===t.data.flag?(this.isGetSvgInfo=!0,this.svgInfo=t.data.data,this.svgInfo.edit_time=this.svgInfo.edit_time.replace(/T/," ").replace(/\..+/,"")):(0,sr.h4)({group:"copy",text:"找不到模板資料"})}this.isLoading=!1}))},updateDataClicked(){return hg(this,null,(function*(){if(!this.svgInfo.key_id)return void(0,sr.h4)({group:"copy",text:"請先取得元素資料"});this.isLoading=!0;const e={locale:this.svgInfo.locale,tags_tw:this.svgInfo.tags_tw,tags_us:this.svgInfo.tags_us,tags_jp:this.svgInfo.tags_jp,plan:this.svgInfo.plan?this.svgInfo.plan:"0"},t=yield yc.Z.updateDesignInfo(this.token,"svg",this.svgInfo.key_id,"update",JSON.stringify(e));0===t.data.flag?((0,sr.h4)({group:"copy",text:"元素資料更新成功"}),this.svgInfo=t.data.data,this.svgInfo.edit_time=this.svgInfo.edit_time.replace(/T/," ").replace(/\..+/,"")):(0,sr.h4)({group:"copy",text:"更新時發生錯誤"}),this.isLoading=!1}))},fetchMarkers(){return hg(this,null,(function*(){this.categories&&this.categories.length>0||(yield this.getCategories())}))}})});const yg=(0,oe.Z)(mg,[["render",Mu],["__scopeId","data-v-54663f61"],["__file","PanelShapeSetting.vue"]]);var fg=yg;const bg=e=>((0,P.dD)("data-v-53128146"),e=e(),(0,P.Cn)(),e),vg={class:"text-effect-setting"},wg={class:"text-effect-setting__title"},Ng={class:"text-effect-setting__effects1d"},Sg=["onClick"],xg=["src","width","height"],Pg={key:0,class:"text-effect-setting__options"},Ig={class:"text-effect-setting__option--name"},_g={key:0,class:"text-effect-setting__option--select"},kg=["src","onClick"],Zg=["value","name","max","min","step","onChange"],Cg=["value","name","max","min","step","onInput"],zg=["onClick"],Tg=["src"],Lg=bg((()=>(0,P._)("div",null,null,-1))),Eg={class:"text-effect-setting__option"};function Dg(e,t,n,r,i,o){const s=(0,P.up)("collapse-title"),a=(0,P.up)("svg-icon"),l=(0,P.up)("pro-item"),c=(0,P.up)("color-btn"),d=(0,P.up)("collapse"),u=(0,P.Q2)("hint"),g=(0,P.Q2)("progress"),p=(0,P.Q2)("ratio-change");return(0,P.wg)(),(0,P.iD)("div",vg,[(0,P._)("div",wg,(0,k.zw)(e.$t("NN0095")),1),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.textEffects,(n=>((0,P.wg)(),(0,P.iD)("div",{class:"text-effect-setting__category",key:n.name},[(0,P.Wm)(s,{active:e.currCategoryName===n.name,onClick:t=>e.switchTab(n.name)},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(n.label),1)])),_:2},1032,["active","onClick"]),(0,P.Wm)(d,{class:"text-effect-setting__effects2d",when:e.currCategoryName===n.name},{default:(0,P.w5)((()=>[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(n.effects2d,((r,i)=>{var o;return(0,P.wg)(),(0,P.iD)(P.HY,{key:i},[(0,P._)("div",Ng,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(r,(t=>((0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["text-effect-setting__effect pointer",{selected:e.getStyle(n).name===t.key}]),key:`${n.name}-${t.key}`,onClick:n=>e.onEffectClick(t)},[["custom-fill-img"].includes(t.key)?(0,P.wy)(((0,P.wg)(),(0,P.j4)(a,{key:0,iconName:e.effectIcon(n,t).name,iconWidth:e.effectIcon(n,t).size,iconColor:"white"},null,8,["iconName","iconWidth"])),[[u,t.label]]):(0,P.wy)(((0,P.wg)(),(0,P.iD)("img",{key:1,src:e.effectIcon(n,t).name,width:e.effectIcon(n,t).size,height:e.effectIcon(n,t).size,draggable:"false"},null,8,xg)),[[u,t.label]]),t.plan?((0,P.wg)(),(0,P.j4)(l,{key:2,theme:"roundedRect"})):(0,P.kq)("",!0)],10,Sg)))),128))]),e.getOptions(r,n)&&0!==(null==(o=e.getOptions(r,n))?void 0:o.length)?((0,P.wg)(),(0,P.iD)("div",Pg,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.getOptions(r,n),(r=>((0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["text-effect-setting__option",{disabled:e.optionDisabled(r)}]),key:r.key},[(0,P._)("div",Ig,(0,k.zw)(r.label),1),"select"===r.type?((0,P.wg)(),(0,P.iD)("div",_g,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(r.select,(t=>{var i;return(0,P.wg)(),(0,P.iD)("div",{key:`${r.key}-${t.key}`},[(0,P._)("img",{src:t.img,class:(0,k.C_)({selected:(null!=(i=e.getStyle(n)[r.key].key)?i:e.getStyle(n)[r.key])===t.key}),draggable:"false",onClick:n=>e.handleSelectInput(t)},null,10,kg),t.plan?((0,P.wg)(),(0,P.j4)(l,{key:0,theme:"roundedRect"})):(0,P.kq)("",!0)])})),128))])):(0,P.kq)("",!0),"range"===r.type?((0,P.wg)(),(0,P.iD)(P.HY,{key:1},[(0,P._)("input",{class:"text-effect-setting__option--number",value:e.getInputValue(e.getStyle(n),r),name:r.key,max:r.max,min:r.min,step:"lineHeight"===r.key?.01:1,onChange:t=>{e.handleRangeInputEvent(t,r),e.recordChange()},type:"number"},null,40,Zg),(0,P.wy)((0,P._)("input",{class:"text-effect-setting__option--range input__slider--range",value:e.getInputValue(e.getStyle(n),r),name:r.key,max:r.max,min:r.min,step:"lineHeight"===r.key?.01:1,onInput:t=>e.handleRangeInputEvent(t,r),onMousedown:t[0]||(t[0]=t=>e.setEffectFocus(!0)),onMouseup:t[1]||(t[1]=t=>e.setEffectFocus(!1)),type:"range"},null,40,Cg),[[g],[p]])],64)):(0,P.kq)("",!0),"color"===r.type&&e.getStyle(n)[r.key]?((0,P.wg)(),(0,P.j4)(c,{key:2,size:"25px",color:e.colorParser(e.getStyle(n)[r.key]),active:r.key===e.colorTarget&&e.settingTextEffect,disable:e.optionDisabled(r),onClick:t=>e.handleColorModal(r)},null,8,["color","active","disable","onClick"])):(0,P.kq)("",!0),"img"===r.type?((0,P.wg)(),(0,P.iD)("div",{key:3,class:"text-effect-setting__option--img",onClick:t=>e.chooseImg(r.key)},[(0,P._)("img",{src:e.getStyleImg},null,8,Tg),Lg,(0,P.Wm)(a,{class:"absolute",iconName:"replace",iconColor:"white",iconWidth:"32px"})],8,zg)):(0,P.kq)("",!0)],2)))),128)),(0,P._)("div",Eg,[(0,P._)("span",{class:"text-effect-setting__option--admin",onClick:t[2]||(t[2]=t=>e.adminTool.action())},(0,k.zw)(e.adminTool.label),1),(0,P._)("span",{class:"text-effect-setting__option--reset",onClick:t[3]||(t[3]=t=>e.resetTextEffect())},(0,k.zw)(e.$t("NN0754")),1)])])):(0,P.kq)("",!0)],64)})),128))])),_:2},1032,["when"])])))),128))])}var Og=n(28253),Mg=n(20083),Ag=n(33466),$g=n(32490),Fg=n(90272),jg=n(23917),Bg=Object.defineProperty,Rg=Object.defineProperties,Hg=Object.getOwnPropertyDescriptors,Ug=Object.getOwnPropertySymbols,Wg=Object.prototype.hasOwnProperty,Vg=Object.prototype.propertyIsEnumerable,Gg=(e,t,n)=>t in e?Bg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qg=(e,t)=>{for(var n in t||(t={}))Wg.call(t,n)&&Gg(e,n,t[n]);if(Ug)for(var n of Ug(t))Vg.call(t,n)&&Gg(e,n,t[n]);return e},Kg=(e,t)=>Rg(e,Hg(t)),Yg=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),Xg=(0,P.aZ)({name:"PanelTextEffectSetting",components:{ColorBtn:Ie.Z,ProItem:uo.Z,Collapse:fo.U,CollapseTitle:mo.Z},emits:["toggleColorPanel"],data(){return{currTab:Ag.Z.get("textEffectSetting","tab"),textEffects:Mg.Z.textEffects(),colorTarget:""}},computed:Kg(qg(qg({},(0,ze.rn)("text",{selectedTextProps:"props"})),(0,ze.Se)("user",{isAdmin:"isAdmin"})),{currCategoryName(){return this.currTab},currentStyle(){var e;const{styles:t}=Fg.Z.getCurrentLayer();return t?null!=(e={shadow:t.textEffect,bg:t.textBg,shape:t.textShape,fill:t.textFill}[this.currCategoryName])?e:{}:{name:"none"}},settingTextEffect(){return"setTextEffectColor"===_e.ZP.currEvent&&ke.Z.showColorSlips},getStyleImg(){var e,t;return x.Z.getTextFillImgSrc(Fg.Z.getCurrentLayer(),{finalSize:null!=(t=null==(e=this.$el)?void 0:e.clientWidth)?t:320})},adminTool(){return this.isAdmin&&"fill"===this.currCategoryName&&"none"!==this.currentStyle.name?{label:"custom-fill-img"===this.currentStyle.name?"上傳文字填滿":"更新文字填滿",action:()=>{x.Z.uploadTextFill()}}:{label:"",action:()=>{}}}}),mounted(){_e.ZP.on(o.gQ.textEffect,(e=>this.handleColorUpdate(e))),_e.ZP.onStop(o.gQ.textEffect,this.recordChange)},beforeUnmount(){_e.ZP.event.off(o.gQ.textEffect,(e=>this.handleColorUpdate(e))),_e.ZP.offStop(o.gQ.textEffect,this.recordChange)},methods:{effectIcon(e,t){if(t.img)return{name:t.img,size:"56"};switch(t.key){case"text-book":return{name:n(69072)(`./${e.name}-${t.key}-${r.Z.global.locale}.png`),size:"56"};case"custom-fill-img":return{name:"add-image",size:"24px"};default:return{name:n(36362)(`./${e.name}-${t.key}.png`),size:"56"}}},handleColorModal(e){const t=this.colorParser(this.currentStyle[e.key]);this.colorTarget=e.key,ke.Z.toggleColorSlips(!0),_e.ZP.setCurrEvent(o.gQ.textEffect),_e.ZP.setCurrColor(t)},switchTab(e){e===this.currTab?this.currTab="":this.currTab=e,Ag.Z.set("textEffectSetting","tab",this.currTab)},getStyle(e){var t;const{styles:n}=Fg.Z.getCurrentLayer();return null!=(t={shadow:n.textEffect,bg:n.textBg,shape:n.textShape,fill:n.textFill}[e.name])?t:{}},getOptions(e,t){var n;return null==(n=m().find(e,["key",this.getStyle(t).name]))?void 0:n.options},getInputValue(e,t){return["lineHeight","fontSpacing"].includes(t.key)?this.selectedTextProps[t.key]:"opacity"===t.key&&"fill"===this.currCategoryName?g.ZP.getCurrOpacity:e[t.key]},optionDisabled(e){const t=Fg.Z.getCurrentLayer(),n=t.styles.textEffect,r=t.styles.textFill;if("fill"===this.currCategoryName&&(0,Og.iX)(r)&&100===r.size){const{divHeight:n,divWidth:r,imgHeight:i,imgWidth:o,scaleByWidth:s}=x.Z.calcTextFillVar(t);if("xOffset200"===e.key&&(o===r||s)||"yOffset200"===e.key&&(i===n||!s))return!0}return!("shadow"!==this.currCategoryName||!(0,Og.iX)(r)||!["echo","bold3d"].includes(n.name)||"color"!==e.key)},resetTextEffect(){return Yg(this,null,(function*(){const e="shadow"===this.currCategoryName?Fg.Z:"shape"===this.currCategoryName?jg.Z:"bg"===this.currCategoryName?$g.Z:x.Z;yield e.resetCurrTextEffect(),this.recordChange()}))},setEffect(e){return Yg(this,null,(function*(){let{effectName:t,effect:n}=e;const{textShape:r}=Fg.Z.getCurrentLayer().styles;switch(t||(t=this.currentStyle.name||"none"),this.currCategoryName){case"shadow":Fg.Z.setTextEffect(t,Object.assign({},n,{ver:"v1"}));break;case"bg":yield $g.Z.setTextBg(t,n);break;case"shape":jg.Z.setTextShape(t,n),x.Z.setTextFill("none");break;case"fill":x.Z.setTextFill(t,n),"none"!==r.name&&jg.Z.setTextShape("none");break}}))},onEffectClick(e){return Yg(this,null,(function*(){var t,n;if(!gs.Z.checkPro(e,"pro-text"))return;yield this.setEffect({effectName:e.key}),this.recordChange();const r=null!=(n=null==(t=e.options.find((e=>"img"===e.type)))?void 0:t.key)?n:"";r&&!this.getStyleImg&&this.chooseImg(r)}))},handleSelectInput(e){return Yg(this,null,(function*(){gs.Z.checkPro(e,"pro-text")&&(yield this.setEffect({effect:e.preset}),this.recordChange())}))},handleRangeInputEvent(e,t){this.handleRangeInput(parseFloat(e.target.value),t)},handleRangeInput(e,t){const n={[t.key]:m().clamp(e,t.min,t.max)};this.setEffect({effect:n})},setEffectFocus(e){e&&(0,Fg.c)(this.currCategoryName)?Fg.Z.setFocus(this.currCategoryName):e||Fg.Z.setFocus("none"),e||this.recordChange()},replaceImg(e){return t=>Yg(this,null,(function*(){yield this.setEffect({effect:{[e]:t}}),this.recordChange()}))},chooseImg(e){ir.Z.openPopup("replace",void 0,{replaceImg:this.replaceImg(e)})},handleColorUpdate(e){this.setEffect({effect:{[this.colorTarget]:e}})},colorParser(e){return Fg.Z.colorParser(e,Fg.Z.getCurrentLayer())},recordChange(){cn.Z.record()}}});const Qg=(0,oe.Z)(Xg,[["render",Dg],["__scopeId","data-v-53128146"],["__file","PanelTextEffectSetting.vue"]]);var Jg=Qg;const ep={class:"text-setting",ref:"body"},tp={class:"text-setting__title text-blue-1 text-H6"},np={class:"text-setting__row1"},rp=["src"],ip={key:1,class:"text-gray-2 text-setting__text-preview"},op={class:"text-setting__row2"},sp={class:"text-setting__color"},ap={class:"text-setting__color__hex text-left overflow-hidden"},lp=["value"],cp={class:"text-setting__color__copy-wrapper"},dp={class:"action-bar action-bar--small flex-evenly"},up={class:"action-bar flex-evenly"},gp={class:"action-bar flex-evenly"};function pp(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("property-bar"),l=(0,P.up)("font-size-selector"),c=(0,P.Q2)("hint");return(0,P.wg)(),(0,P.iD)("div",ep,[(0,P._)("span",tp,(0,k.zw)(e.$t("NN0062")),1),(0,P._)("div",np,[(0,P.Wm)(a,{class:"pointer record-selection",onClick:e.openFontsPanel},{default:(0,P.w5)((()=>["_"!==e.props.font[0]?((0,P.wg)(),(0,P.iD)("img",{key:0,class:"text-setting__text-preview",src:e.fontPrevUrl,onError:t[0]||(t[0]=(...t)=>e.onError&&e.onError(...t))},null,40,rp)):((0,P.wg)(),(0,P.iD)("span",ip,(0,k.zw)(e.props.font.substr(1)),1)),(0,P.Wm)(s,{class:"pointer",iconName:"caret-down",iconWidth:"10px",iconColor:"gray-2"})])),_:1},8,["onClick"]),(0,P.Wm)(l)]),(0,P._)("div",op,[(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",sp,[(0,P._)("div",{class:"color-slip record-selection",onClick:t[1]||(t[1]=(...t)=>e.handleColorModal&&e.handleColorModal(...t))},[(0,P.Wm)(s,{iconName:"text-color",iconWidth:"24px",iconColor:"gray-1"}),(0,P._)("div",{class:"color-slip__bar",style:(0,k.j5)({"background-color":e.isValidHexColor(e.props.color)?e.props.color:"#000000",border:"#FFFFFF"===e.props.color?"1px solid #EEEFF4":""})},null,4)]),(0,P._)("div",ap,[(0,P._)("button",{class:"text-setting__range-input-button input-color",onClick:t[3]||(t[3]=(...t)=>e.handleColorModal&&e.handleColorModal(...t))},[(0,P._)("input",{class:"body-3 text-gray-2 record-selection input-color",type:"text",ref:"input-color",value:e.props.color,onChange:t[2]||(t[2]=(...t)=>e.inputColor&&e.inputColor(...t))},null,40,lp)])]),(0,P._)("div",cp,[(0,P.Wm)(s,{class:"text-setting__color__copy",iconName:"copy",iconWidth:"16px",iconColor:"gray-4",onClick:e.copyColor},null,8,["onClick"])])])),[[c,e.$t("NN0099")]]),(0,P._)("div",dp,[(0,P.wy)((0,P.Wm)(s,{class:"pointer record-selection btn-lh feature-button p-5",iconName:"font-height",iconWidth:"20px",iconColor:"gray-2",onClick:t[4]||(t[4]=t=>e.openLineHeightSliderPopup())},null,512),[[c,e.$t("NN0110")]]),(0,P.wy)((0,P.Wm)(s,{class:"pointer record-selection btn-ls feature-button p-5",iconName:"font-spacing",iconWidth:"20px",iconColor:"gray-2",onClick:t[5]||(t[5]=t=>e.openSpacingSliderPopup())},null,512),[[c,e.$t("NN0109")]])])]),(0,P._)("div",up,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.mappingIcons("font"),((t,n)=>(0,P.wy)(((0,P.wg)(),(0,P.j4)(s,{class:(0,k.C_)(["record-selection feature-button p-5",{pointer:e.iconClickable(t),active:e.iconIsActived(t)}]),key:`gp-action-icon-${n}`,id:`icon-${t}`,iconName:t,iconWidth:"20px",iconColor:e.iconClickable(t)?"gray-2":"gray-4",onMousedown:n=>e.onPropertyClick(t)},null,8,["class","id","iconName","iconColor","onMousedown"])),[[c,e.hintMap[t]]]))),128))]),(0,P._)("div",gp,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.mappingIcons("font-align"),((t,n)=>(0,P.wy)(((0,P.wg)(),(0,P.j4)(s,{class:(0,k.C_)(["pointer feature-button p-5",{active:e.iconIsActived(t)}]),key:`gp-action-icon-${n}`,iconName:t,iconWidth:"20px",iconColor:"gray-2",onMousedown:n=>e.onParaPropsClick(t)},null,8,["class","iconName","onMousedown"])),[[c,e.hintMap[t]]]))),128))])],512)}const hp={class:"font-size-selector relative"},mp=["value","disabled"];function yp(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("value-selector"),l=(0,P.Q2)("click-outside");return(0,P.wg)(),(0,P.iD)("div",hp,[(0,P._)("div",{class:"font-size-selector__number",style:(0,k.j5)(e.numberStyles)},[(0,P._)("div",{class:"pointer",style:(0,k.j5)(e.numberButtonStyles),onPointerdown:t[0]||(t[0]=t=>e.fontSizeStepping(-1)),onContextmenu:t[1]||(t[1]=(0,Z.iM)((()=>{}),["prevent"]))},[(0,P.Wm)(s,{iconName:"minus-small",iconWidth:e.iconSize,iconColor:"gray-2"},null,8,["iconWidth"])],36),(0,P._)("button",{class:"font-size-selector__range-input-button",style:(0,k.j5)(e.inputButtonStyles),onClick:t[3]||(t[3]=(...t)=>e.handleValueModal&&e.handleValueModal(...t))},[(0,P._)("input",{class:(0,k.C_)(["body-2 text-gray-2 center record-selection",{mobile:e.$isTouchDevice()}]),type:"number",ref:"input-fontSize",onChange:t[2]||(t[2]=(...t)=>e.setSize&&e.setSize(...t)),value:e.fontSize,disabled:"--"===e.fontSize},null,42,mp)],4),(0,P._)("div",{class:"pointer",style:(0,k.j5)(e.numberButtonStyles),onPointerdown:t[4]||(t[4]=t=>e.fontSizeStepping(1)),onContextmenu:t[5]||(t[5]=(0,Z.iM)((()=>{}),["prevent"]))},[(0,P.Wm)(s,{iconName:"plus-small",iconWidth:e.iconSize,iconColor:"gray-2"},null,8,["iconWidth"])],36)],4),e.openValueSelector?(0,P.wy)(((0,P.wg)(),(0,P.j4)(a,{key:0,class:"font-size-selector__value-selector",valueArray:e.fontSelectValue,onUpdate:e.handleValueUpdate},null,8,["valueArray","onUpdate"])),[[l,e.handleValueModal]]):(0,P.kq)("",!0)])}var fp=n(32329),bp=n(74041),vp=Object.defineProperty,wp=Object.defineProperties,Np=Object.getOwnPropertyDescriptors,Sp=Object.getOwnPropertySymbols,xp=Object.prototype.hasOwnProperty,Pp=Object.prototype.propertyIsEnumerable,Ip=(e,t,n)=>t in e?vp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_p=(e,t)=>{for(var n in t||(t={}))xp.call(t,n)&&Ip(e,n,t[n]);if(Sp)for(var n of Sp(t))Pp.call(t,n)&&Ip(e,n,t[n]);return e},kp=(e,t)=>wp(e,Np(t)),Zp=(0,P.aZ)({emits:[],components:{ValueSelector:fp.Z},data(){return{openValueSelector:!1,fontSelectValue:bp.Y,fieldRange:{fontSize:Fo.Z.mappingMinMax("fontSize")},iconSize:this.$isTouchDevice()?"24px":"14px",numberStyles:{height:this.$isTouchDevice()?"40px":"31px",width:this.$isTouchDevice()?"132px":"initial"},numberButtonStyles:{width:this.$isTouchDevice()?"36px":"40px"},inputButtonStyles:{width:this.$isTouchDevice()?"58px":"fit-content"}}},directives:{clickOutside:Ce().directive},computed:kp(_p(_p({},(0,ze.Se)({currSelectedInfo:"getCurrSelectedInfo",currSelectedIndex:"getCurrSelectedIndex",layerIndex:"getCurrSelectedIndex"})),(0,ze.rn)("text",["sel","props"])),{fontSize(){return"--"===this.props.fontSize?this.props.fontSize:m().round(this.props.fontSize,2)}}),methods:{handleValueModal(){if(!this.$isTouchDevice()&&(this.openValueSelector=!this.openValueSelector,this.openValueSelector)){const e=this.$refs["input-fontSize"];e.focus(),e.select()}},handleValueUpdate(e){bp.Z.fontSizeHandler(e)},setSize(e){const{value:t}=e.target;if(l.Z.isValidFloat(t)){const e=l.Z.boundValue(parseFloat(t),this.fieldRange.fontSize.min,this.fieldRange.fontSize.max);bp.Z.fontSizeHandler(e)}},fontSizeStepping(e,t=100){const n=(new Date).getTime(),r=window.setInterval((()=>{if((new Date).getTime()-n>500)try{bp.Z.fontSizeStepping(e),Fg.Z.refreshSize()}catch(t){d.Z.setLogForError(t),le.ZP.removePointerEvent("pointerup",i),clearInterval(r)}}),t),i=()=>{le.ZP.removePointerEvent("pointerup",i),(new Date).getTime()-n<500&&(bp.Z.fontSizeStepping(e),Fg.Z.refreshSize()),clearInterval(r),ri.Z.agent((e=>{e.state.selection.empty||(g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.layerIndex,{paragraphs:ri.Z.toIParagraph(e.getJSON()).paragraphs}),cn.Z.record())}))};le.ZP.addPointerEvent("pointerup",i)}}});const Cp=(0,oe.Z)(Zp,[["render",yp],["__scopeId","data-v-753fa604"],["__file","FontSizeSelector.vue"]]);var zp=Cp,Tp=n(89456),Lp=Object.defineProperty,Ep=Object.defineProperties,Dp=Object.getOwnPropertyDescriptors,Op=Object.getOwnPropertySymbols,Mp=Object.prototype.hasOwnProperty,Ap=Object.prototype.propertyIsEnumerable,$p=(e,t,n)=>t in e?Lp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fp=(e,t)=>{for(var n in t||(t={}))Mp.call(t,n)&&$p(e,n,t[n]);if(Op)for(var n of Op(t))Ap.call(t,n)&&$p(e,n,t[n]);return e},jp=(e,t)=>Ep(e,Dp(t)),Bp=(0,P.aZ)({components:{FontSizeSelector:zp},directives:{clickOutside:Ce().directive},emits:["openFontsPanel","toggleColorPanel"],data(){return{isOpenFontPanel:!1,hintMap:{bold:`${this.$t("NN0101")}`,underline:`${this.$t("NN0102")}`,italic:`${this.$t("NN0103")}`,"font-vertical":`${this.$t("NN0104")}`,"text-align-left":`${this.$t("NN0105")}`,"text-align-center":`${this.$t("NN0106")}`,"text-align-right":`${this.$t("NN0107")}`,"text-align-justify":`${this.$t("NN0108")}`},fontPrevUrl:""}},mounted(){this.getFontPrev(),this.setCurrFunctionPanel(o.UJ.textSetting),_e.ZP.on(o.gQ.text,(e=>{this.handleColorUpdate(e)})),_e.ZP.onStop(o.gQ.text,(()=>{this.$nextTick((()=>cn.Z.record()))})),ir.Z.on(o._2.lineHeight,(e=>{this.setParagraphProp("lineHeight",e)})),ir.Z.on(o._2.letterSpacing,(e=>{this.setParagraphProp("fontSpacing",e)})),ir.Z.on(o._2.stop,(()=>{const{getCurrLayer:e,subLayerIdx:t}=g.ZP;("text"===e.type||"group"===e.type&&-1!==t&&"text"===e.layers[t].type)&&ri.Z.focus({scrollIntoView:!1})}))},unmounted(){this.setCurrFunctionPanel(o.UJ.none),this.isOpenFontPanel||Tp.Z.updateSelection(Tp.Z.getNullSel(),Tp.Z.getNullSel())},computed:jp(Fp(Fp({},(0,ze.rn)("text",["sel","props"])),(0,ze.Se)({currSelectedInfo:"getCurrSelectedInfo",currSelectedIndex:"getCurrSelectedIndex",layerIndex:"getCurrSelectedIndex"})),{hasCurveText(){const{getCurrLayer:e,subLayerIdx:t}=g.ZP;return-1!==t?jg.Z.isCurvedText(e.layers[t].styles.textShape):"text"===e.type?jg.Z.isCurvedText(e.styles.textShape):e.layers.some((e=>"text"===e.type&&jg.Z.isCurvedText(e.styles.textShape)))},hasOnlyVerticalText(){const{getCurrLayer:e,subLayerIdx:t}=g.ZP;return-1!==t?e.layers[t].styles.writingMode.includes("vertical"):"text"===e.type?e.styles.writingMode.includes("vertical"):!e.layers.some((e=>"text"===e.type&&!e.styles.writingMode.includes("vertical")))},hasTextFill(){const{getCurrLayer:e,subLayerIdx:t}=g.ZP;return-1!==t?"none"!==e.layers[t].styles.textFill.name:"text"===e.type?"none"!==e.styles.textFill.name:e.layers.some((e=>"text"===e.type&&"none"!==e.styles.textFill.name))}}),watch:{"props.font":function(){this.getFontPrev()}},methods:jp(Fp(Fp({},(0,ze.OI)({setCurrFunctionPanel:"SET_currFunctionPanelType"})),(0,ze.nv)("brandkit",{refreshFontAsset:"refreshFontAsset"})),{mappingIcons(e){return Fo.Z.mappingIconSet(e)},getFontPrev(){const e=a.Z.getFontPrevUrlByFontFamily(a.Z.fillFontVer({fontFamily:this.props.font,type:this.props.type,userId:this.props.userId,assetId:this.props.assetId}),"prev-name");"private"===this.props.type&&""===e&&this.refreshFont(this.props.assetId),this.fontPrevUrl=e},refreshFont(e){const t=(0,h.parseInt)(e);this.refreshFontAsset({id:e,asset_index:t}).then((e=>{e["prev-name"]&&(this.fontPrevUrl=e["prev-name"])}))},onError(){"private"===this.props.type&&this.refreshFont(this.props.assetId)},openFontsPanel(){this.isOpenFontPanel=!0,this.$emit("openFontsPanel")},inputColor(e){const t=e.target;(0,_e.G3)(t.value)&&(t.value=t.value.toUpperCase(),this.handleColorUpdate(t.value),cn.Z.record())},handleColorModal(){_e.ZP.setCurrEvent(o.gQ.text),_e.ZP.setCurrColor(this.props.color);const e=this.$refs["input-color"];e.focus(),e.select(),ke.Z.toggleColorSlips(!0),this.updateLayerProps({isEdited:!0})},handleColorUpdate(e){if(e===this.props.color)return;const t=(0,_e.pK)(e);ri.Z.spanStyleHandler("color",t)},iconIsActived(e){switch(e){case"bold":if("bold"===this.props.weight)return!0;break;case"underline":if("underline"===this.props.decoration&&!this.hasTextFill)return!0;break;case"italic":if("italic"===this.props.style)return!0;break;case"font-vertical":if(this.props.isVertical)return!0;break;case"text-align-left":if("left"===this.props.textAlign)return!0;break;case"text-align-center":if("center"===this.props.textAlign)return!0;break;case"text-align-right":if("right"===this.props.textAlign)return!0;break;case"text-align-justify":if("justify"===this.props.textAlign)return!0;break}return!1},onPropertyClick(e){if("font-vertical"===e){if(this.hasCurveText)return;bp.Z.onPropertyClick(e,this.props.isVertical?0:1,this.sel.start,this.sel.end)}else switch(e){case"bold":this.handleSpanPropClick("weight",["bold","normal"]);break;case"underline":if(this.hasOnlyVerticalText)return;this.handleSpanPropClick("decoration",["underline","none"]);break;case"italic":if(this.hasOnlyVerticalText)return;this.handleSpanPropClick("style",["italic","normal"]);break}this.updateLayerProps({isEdited:!0}),cn.Z.record()},handleSpanPropClick(e,t){const{getCurrLayer:n,layerIndex:r,subLayerIdx:i}=g.ZP,o=this.props[e]===t[0]?t[1]:t[0];if("group"===n.type&&-1===i||"tmp"===n.type){const t=n.layers;t.forEach(((t,n)=>{if("text"===t.type){const i=l.Z.deepCopy(t.paragraphs);i.forEach((n=>{n.spans.forEach((n=>{t.styles.writingMode.includes("vertical")&&("decoration"===e&&"underline"===o||"style"===e&&"italic"===o)||(n.styles[e]=o)}))})),g.ZP.updateSubLayerProps(g.ZP.pageIndex,r,n,{paragraphs:i})}}))}else ri.Z.applySpanStyle(e,o);bp.Z.updateTextPropsState({[e]:o})},updateLayerProps(e){const{getCurrLayer:t,layerIndex:n,subLayerIdx:r,pageIndex:i}=g.ZP;switch(t.type){case"text":g.ZP.updateLayerProps(i,n,e);break;case"group":if(-1!==r)g.ZP.updateSubLayerProps(i,n,r,e);else{const r=t.layers;r.forEach(((t,r)=>{"text"===t.type&&g.ZP.updateSubLayerProps(i,n,r,e)}))}}},onParaPropsClick(e){switch(e){case"text-align-left":this.handleTextAlign("left");break;case"text-align-center":this.handleTextAlign("center");break;case"text-align-right":this.handleTextAlign("right");break;case"text-align-justify":this.handleTextAlign("justify");break}cn.Z.record()},handleTextAlign(e){const{getCurrLayer:t,layerIndex:n,subLayerIdx:r,pageIndex:i}=g.ZP;if("group"===t.type&&-1===r||"tmp"===t.type){const r=t.layers;r.forEach(((t,r)=>{if("text"===t.type){const o=l.Z.deepCopy(t.paragraphs);o.forEach((t=>t.styles.align=e)),g.ZP.updateSubLayerProps(i,n,r,{paragraphs:o})}})),bp.Z.updateTextPropsState({textAlign:e})}else ri.Z.applyParagraphStyle("align",e),bp.Z.updateTextPropsState({textAlign:e})},isValidHexColor(e){return(0,_e.G3)(e)},setParagraphProp(e,t){Tp.Z.setParagraphProp(e,t)},openLineHeightSliderPopup(){ir.Z.setCurrEvent(o._2.lineHeight),ir.Z.setSliderConfig(Object.assign({value:this.props.lineHeight,step:.01,width:l.Z.getSliderWidth()},Fo.Z.mappingMinMax("lineHeight"))),ir.Z.openPopup("slider",{posX:"right",target:".text-setting__row2"})},openSpacingSliderPopup(){ir.Z.setCurrEvent(o._2.letterSpacing),ir.Z.setSliderConfig(Object.assign({value:this.props.fontSpacing,step:1,width:l.Z.getSliderWidth()},Fo.Z.mappingMinMax("letterSpacing"))),ir.Z.openPopup("slider",{posX:"right",target:".text-setting__row2"})},copyColor(){l.Z.copyText(this.props.color).then((()=>{(0,sr.h4)({group:"copy",text:`${this.props.color} 已複製`})}))},iconClickable(e){switch(e){case"font-vertical":return!this.hasCurveText;case"underline":return!(this.hasOnlyVerticalText||this.hasTextFill);case"italic":return!this.hasOnlyVerticalText;default:return!0}}})});const Rp=(0,oe.Z)(Bp,[["render",pp],["__scopeId","data-v-b3569eb0"],["__file","PanelTextSetting.vue"]]);var Hp=Rp,Up=Object.defineProperty,Wp=Object.defineProperties,Vp=Object.getOwnPropertyDescriptors,Gp=Object.getOwnPropertySymbols,qp=Object.prototype.hasOwnProperty,Kp=Object.prototype.propertyIsEnumerable,Yp=(e,t,n)=>t in e?Up(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xp=(e,t)=>{for(var n in t||(t={}))qp.call(t,n)&&Yp(e,n,t[n]);if(Gp)for(var n of Gp(t))Kp.call(t,n)&&Yp(e,n,t[n]);return e},Qp=(e,t)=>Wp(e,Vp(t)),Jp=(0,P.aZ)({components:{PanelGeneral:Xs,PanelTextSetting:Hp,PanelBackgroundSetting:Xo,PanelPhotoSetting:Jd,PanelPageSetting:od,PanelFonts:Es.Z,PanelShapeSetting:fg,PanelTextEffectSetting:Jg,DownloadBtn:Li,PanelBgRemove:Ls,PanelImgCtrl:pa},emits:["toggleColorPanel"],data(){return{isFontsPanelOpened:!1}},props:{currPage:{type:Object,required:!0}},computed:Qp(Xp(Xp(Xp(Xp({},(0,ze.rn)("fontTag",["tags","showMore"])),(0,ze.rn)("imgControl",["image"])),(0,ze.Se)("imgControl",["isBgImgCtrl"])),(0,ze.Se)({currSidebarPanel:"getCurrFunctionPanelType",currSelectedInfo:"getCurrSelectedInfo",currSubSelectedInfo:"getCurrSubSelectedInfo",isShowPagePreview:"page/getIsShowPagePreview",inBgRemoveMode:"bgRemove/getInBgRemoveMode",InBgRemoveFirstStep:"bgRemove/inFirstStep",InBgRemoveLastStep:"bgRemove/inLastStep",getCurrFunctionPanelType:"getCurrFunctionPanelType",isProcessImgShadow:"shadow/isProcessing",isUploadImgShadow:"shadow/isUploading",isFontLoading:"text/getIsFontLoading"})),{functionPanelStyles(){const e={"overflow-y":this.showFont?"hidden":"auto","pointer-events":this.isShowPagePreview?"none":"auto"};return e},selectedLayerNum(){return this.currSelectedInfo.layers.length},isLocked(){return g.ZP.getSelectedLayer().locked},isGroup(){return this.currSelectedInfo.types.has("group")&&1===this.currSelectedInfo.layers.length},groupTypes(){const e=this.currSelectedInfo.layers[0],t=e.layers.map((e=>e.type));return new Set(t)},hasSubSelectedLayer(){return-1!==g.ZP.subLayerIdx},subLayerType(){return this.currSubSelectedInfo.type},isInFirstStep(){return cn.Z.isInFirstStep},isInLastStep(){return cn.Z.isInLastStep},isFrameImage(){const{layers:e,types:t}=this.currSelectedInfo,n=e[0];return 1===e.length&&t.has("frame")&&n.clips[0].srcObj.assetId},showBgRemove(){return this.inBgRemoveMode},showFont(){return!this.inBgRemoveMode&&this.isFontsPanelOpened},showGeneral(){return!this.inBgRemoveMode&&!this.isFontsPanelOpened&&0!==this.selectedLayerNum&&!this.isImgCtrl},isImgCtrl(){return void 0!==this.image},showPageSetting(){return!this.inBgRemoveMode&&!this.isFontsPanelOpened&&0===this.selectedLayerNum&&!this.isBgImgCtrl},showTextSetting(){return!this.inBgRemoveMode&&!this.isFontsPanelOpened&&!this.isLocked&&this.targetIs("text")},showPhotoSetting(){return!this.inBgRemoveMode&&!this.isFontsPanelOpened&&!this.isLocked&&this.targetIs("image")&&this.singleTargetType()&&!this.isImgCtrl},showShapeSetting(){const{getCurrConfig:e}=g.ZP,t=!this.inBgRemoveMode&&!this.isFontsPanelOpened&&!this.isLocked,n=[o.F5.shape,o.F5.frame,o.F5.group,o.F5.tmp].includes(e.type),r="none"!==_e.ZP.globalSelectedColor.color;return t&&n&&r&&!this.isImgCtrl}}),watch:{selectedLayerNum(e,t){0===e&&this.isFontsPanelOpened&&this.closeFontsPanel()}},methods:{targetIs(e){return this.isGroup?this.hasSubSelectedLayer?this.subLayerType===e:this.groupTypes.has(e):this.currSelectedInfo.types.has("frame")&&"image"===e?this.isFrameImage:this.currSelectedInfo.types.has(e)},singleTargetType(){return this.isGroup?!!this.hasSubSelectedLayer||1===this.groupTypes.size:1===this.currSelectedInfo.types.size},openFontsPanel(){this.isFontsPanelOpened=!0},closeFontsPanel(){this.isFontsPanelOpened=!1},openFilePopup(){ir.Z.openPopup("file",{posX:"right"})},undo(){if(this.inBgRemoveMode){const e=new KeyboardEvent("keydown",{ctrlKey:!0,metaKey:!0,shiftKey:!1,key:"z",repeat:!1});window.dispatchEvent(e)}else kt.Z.undo()},redo(){if(this.inBgRemoveMode){const e=new KeyboardEvent("keydown",{ctrlKey:!0,metaKey:!0,shiftKey:!0,key:"z",repeat:!1});window.dispatchEvent(e)}else kt.Z.redo()}}});const eh=(0,oe.Z)(Jp,[["render",fi],["__scopeId","data-v-17dda94f"],["__file","FunctionPanel.vue"]]);var th=eh;const nh={class:"page-preview",ref:"container"};function rh(e,t,n,r,i,o){const s=(0,P.up)("page-preview-plus"),a=(0,P.up)("page-preview-page-wrapper"),l=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",nh,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.getPages,((t,n)=>((0,P.wg)(),(0,P.iD)(P.HY,{key:t.id},[(0,P.Wm)(s,{index:n,last:!1},null,8,["index"]),(0,P.Wm)(a,{index:n,type:"full",config:t,lazyLoadTarget:".page-preview"},null,8,["index","config","lazyLoadTarget"]),(n+1)%e.getPagesPerRow===0?((0,P.wg)(),(0,P.j4)(s,{key:0,index:n+1,last:!1},null,8,["index"])):(0,P.kq)("",!0)],64)))),128)),(0,P.Wm)(s,{index:e.getPages.length,last:!0},null,8,["index"]),(0,P._)("div",{class:"page-preview-page-last pointer",onClick:t[0]||(t[0]=t=>e.addPage())},[(0,P.Wm)(l,{class:"pb-5",iconColor:"gray-2",iconName:"plus-origin",iconWidth:"25px"})])],512)}const ih={key:1,class:"menu"},oh=["onClick"],sh={class:"menu-item-icon"},ah={class:"menu-item-text"},lh={key:2,class:"page-preview-page-icon"},ch={key:0,class:"page-preview-page-title"};function dh(e,t,n,r,i,o){const s=(0,P.up)("page-content"),a=(0,P.up)("svg-icon"),l=(0,P.up)("lazy-load"),c=(0,P.Q2)("click-outside");return(0,P.wg)(),(0,P.j4)(l,{class:"transition",target:e.lazyLoadTarget,threshold:[0,1],minHeight:e.itemSize?e.pageHeight()*e.scaleRatio():e.contentWidth,anamationEnabled:!0,onLoaded:e.handleLoaded},{placeholder:(0,P.w5)((()=>[e.itemSize?((0,P.wg)(),(0,P.iD)("div",{style:(0,k.j5)(e.loadingStyle()),key:"placeholder"},null,4)):(0,P.kq)("",!0)])),default:(0,P.w5)((()=>[(0,P._)("div",{class:(0,k.C_)(["page-preview-page",`${"full"===e.type?"full-height":""} page-preview_${e.index}`]),style:(0,k.j5)(e.styles2()),ref:"pagePreview"},[(0,P._)("div",{class:"page-preview-page-content pointer",style:(0,k.j5)(e.styles()),onClick:t[1]||(t[1]=(...t)=>e.clickPage&&e.clickPage(...t)),onPointerdown:t[2]||(t[2]=(...t)=>e.handlePointerdown&&e.handlePointerdown(...t)),onDblclick:t[3]||(t[3]=(...t)=>e.dbclickPage&&e.dbclickPage(...t)),draggable:"true",onDragstart:t[4]||(t[4]=(...t)=>e.handleDragStart&&e.handleDragStart(...t)),onDragend:t[5]||(t[5]=(...t)=>e.handleDragEnd&&e.handleDragEnd(...t)),onMouseenter:t[6]||(t[6]=(...t)=>e.handleMouseEnter&&e.handleMouseEnter(...t)),onMouseleave:t[7]||(t[7]=(...t)=>e.handleMouseLeave&&e.handleMouseLeave(...t)),ref:"content"},[(0,P.Wm)(s,{class:"click-disabled",style:(0,k.j5)(e.contentScaleStyles()),config:e.configWithBleed(),pageIndex:e.index,contentScaleRatio:e.scaleRatio(),handleSequentially:!0,lazyLoadTarget:e.lazyLoadTarget,inPreview:!0},null,8,["style","config","pageIndex","contentScaleRatio","lazyLoadTarget"]),(0,P._)("div",{class:(0,k.C_)(["page-preview-page__highlighter",{focused:e.currFocusPageIndex===e.index}]),style:(0,k.j5)(e.hightlighterStyles())},null,6),e.isMouseOver&&e.showMoreBtn?((0,P.wg)(),(0,P.iD)("div",{key:0,class:"page-preview-page-content-more",onClick:t[0]||(t[0]=t=>e.toggleMenu())},[(0,P.Wm)(a,{class:"pb-5",iconName:"more_vertical",iconWidth:"25px"})])):(0,P.kq)("",!0),e.isMenuOpen&&e.currFocusPageIndex===e.index?(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",ih,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.menuItems,(t=>((0,P.wg)(),(0,P.iD)("div",{key:t.text,class:"menu-item",onClick:n=>e.handleMenuAction(t.icon)},[(0,P._)("div",sh,[(0,P.Wm)(a,{iconName:t.icon,iconWidth:"15px",iconColor:"gray-2"},null,8,["iconName"])]),(0,P._)("div",ah,[(0,P._)("span",null,(0,k.zw)(t.text),1)])],8,oh)))),128))])),[[c,e.closeMenu]]):(0,P.kq)("",!0),"panel"===e.type?((0,P.wg)(),(0,P.iD)("div",lh,[(0,P._)("span",null,(0,k.zw)(e.index+1),1)])):(0,P.kq)("",!0)],36),(0,P._)("div",{class:"page-preview-page__background",style:(0,k.j5)(e.styles)},null,4),"full"===e.type?((0,P.wg)(),(0,P.iD)("div",ch,[(0,P._)("span",{style:(0,k.j5)({color:e.currFocusPageIndex===e.index?"#4EABA6":"#000"})},(0,k.zw)(e.index+1),5)])):(0,P.kq)("",!0)],6)])),_:1},8,["target","minHeight","onLoaded"])}var uh=n(3716),gh=Object.defineProperty,ph=Object.defineProperties,hh=Object.getOwnPropertyDescriptors,mh=Object.getOwnPropertySymbols,yh=Object.prototype.hasOwnProperty,fh=Object.prototype.propertyIsEnumerable,bh=(e,t,n)=>t in e?gh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vh=(e,t)=>{for(var n in t||(t={}))yh.call(t,n)&&bh(e,n,t[n]);if(mh)for(var n of mh(t))fh.call(t,n)&&bh(e,n,t[n]);return e},wh=(e,t)=>ph(e,hh(t)),Nh=(0,P.aZ)({props:{type:{type:String,required:!0},index:{type:Number,required:!0},config:{type:Object,required:!0},showMoreBtn:{default:!0,type:Boolean},itemSize:{type:Number},lazyLoadTarget:{type:String,default:".mobile-editor__page-preview"}},emits:["loaded"],components:{PageContent:Mn.Z,LazyLoad:Jn.Z},data(){return{menuItems:[{icon:"copy",text:r.Z.global.t("NN0251")},{icon:"trash",text:r.Z.global.t("NN0034")}],isMouseOver:!1,isMenuOpen:!1,contentWidth:0}},directives:{clickOutside:Ce().directive},computed:vh(vh({},(0,ze.rn)({currActivePageIndex:"currActivePageIndex"})),(0,ze.Se)({middlemostPageIndex:"getMiddlemostPageIndex",currFocusPageIndex:"getCurrFocusPageIndex",getPage:"getPage",isDragged:"page/getIsDragged",allPageMode:"mobileEditor/getMobileAllPageMode",isShowPagePreview:"page/getIsShowPagePreview",showPagePanel:"page/getShowPagePanel"})),methods:wh(vh({},(0,ze.OI)({_setmiddlemostPageIndex:"SET_middlemostPageIndex",_setCurrActivePageIndex:"SET_currActivePageIndex",_setIsDragged:"page/SET_IsDragged",_setIsShowPagePreview:"page/SET_isShowPagePreview"})),{configWithBleed(){return this.config.isEnableBleed?vh(vh({},this.config),p.Z.getPageSizeWithBleeds(this.config)):this.config},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},closeMenu(){this.isMenuOpen=!1},handleMouseEnter(){this.isMouseOver=!0},handleMouseLeave(){this.isMouseOver=!1},clickPage(){const e=this.index===this.currFocusPageIndex;e&&(ke.Z.setMobileAllPageMode(!1),ke.Z.setCurrCardIndex(this.index)),this._setmiddlemostPageIndex(this.index),this._setCurrActivePageIndex(this.index),"panel"===this.type&&p.Z.scrollIntoPage(this.index),this.$isTouchDevice()&&e&&this.$nextTick((()=>{p.Z.isDetailPage&&p.Z.scrollIntoPage(p.Z.currFocusPageIndex,"auto"),p.Z.fitPage()}))},dbclickPage(){this._setCurrActivePageIndex(this.index),"full"===this.type&&(this._setIsShowPagePreview(!1),ke.Z.setMobileAllPageMode(!1))},handlePointerdown(e){uh.Z.click(e,{doubleClickCallback:this.clickPage})},handleDragStart(e){this._setIsDragged(!0),this.isMouseOver=!1,this._setCurrActivePageIndex(this.index);const t=e.target;setTimeout((function(){t.style.opacity="0.3"}),0),e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",document.addEventListener("dragover",this.preventDefaultDragOver,!1))},handleDragEnd(e){this._setIsDragged(!1);const t=e.target;setTimeout((function(){t.style.opacity="1"}),0),document.removeEventListener("dragover",this.preventDefaultDragOver,!1)},preventDefaultDragOver(e){e.preventDefault()},handleMenuAction(e){this.closeMenu();let t=null;switch(e){case"copy":t=l.Z.deepCopy(this.getPage(this.index)),t.designId="",p.Z.addPageToPos(t,this.index+1),tr.Z.deselect(),this._setmiddlemostPageIndex(this.index+1),this._setCurrActivePageIndex(this.index+1),cn.Z.record();break;case"trash":tr.Z.deselect(),p.Z.deletePage(this.index),this._setmiddlemostPageIndex(this.index-1),this._setCurrActivePageIndex(this.index-1),cn.Z.record();break;default:break}},handleLoaded(){this.$emit("loaded"),this.$nextTick((()=>{const e=this.$refs.content;this.contentWidth=e?this.$refs.content.offsetWidth:0}))},pageWidth(){return this.configWithBleed().width},pageHeight(){return this.configWithBleed().height},scaleRatio(){return this.itemSize?this.itemSize/this.pageWidth():this.contentWidth/this.pageWidth()},contentScaleStyles(){return{}},styles(){return vh({height:this.pageHeight()*this.scaleRatio()+"px"},this.itemSize&&{width:`${this.itemSize}px`})},styles2(){return"panel"===this.type&&this.isDragged&&this.index!==p.Z.currFocusPageIndex?{"z-index":"-1",width:`${this.itemSize}px`,height:this.pageHeight()*this.scaleRatio()+"px"}:{width:`${this.itemSize}px`,height:this.pageHeight()*this.scaleRatio()+"px"}},hightlighterStyles(){return{width:this.itemSize?`${this.itemSize+20}px`:`${this.contentWidth+20}px`,height:this.pageHeight()*this.scaleRatio()+20+"px"}},loadingStyle(){return{width:this.itemSize?`${this.itemSize}px`:"100%",height:this.itemSize?this.pageHeight()*this.scaleRatio()+"px":"100%"}}})});const Sh=(0,oe.Z)(Nh,[["render",dh],["__scopeId","data-v-5c6a32d9"],["__file","PagePreviewPageWrapper.vue"]]);var xh=Sh;const Ph={key:1,class:"page-preview-plus-drag"};function Ih(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",{class:"page-preview-plus",style:(0,k.j5)(e.styles()),onMouseover:t[1]||(t[1]=t=>e.pageMoveTo(t,"mouse")),onMouseout:t[2]||(t[2]=t=>e.pageMoveBack(t)),onDragover:t[3]||(t[3]=t=>e.pageMoveTo(t,"drag")),onDragleave:t[4]||(t[4]=t=>e.pageMoveBack(t)),onDrop:t[5]||(t[5]=t=>e.handlePageDrop(t))},[e.last||"mouse"!==e.actionType?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",{key:0,class:"page-preview-plus-wrapper pointer",onClick:t[0]||(t[0]=t=>e.addPage(e.index))},[(0,P.Wm)(s,{class:"py-10",iconColor:"blue-1",iconName:"plus-origin",iconWidth:"18px"}),(0,P._)("span",null,(0,k.zw)(e.$t("NN0139")),1)])),"drag"===e.actionType?((0,P.wg)(),(0,P.iD)("div",Ph)):(0,P.kq)("",!0)],36)}var _h=Object.defineProperty,kh=Object.defineProperties,Zh=Object.getOwnPropertyDescriptors,Ch=Object.getOwnPropertySymbols,zh=Object.prototype.hasOwnProperty,Th=Object.prototype.propertyIsEnumerable,Lh=(e,t,n)=>t in e?_h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eh=(e,t)=>{for(var n in t||(t={}))zh.call(t,n)&&Lh(e,n,t[n]);if(Ch)for(var n of Ch(t))Th.call(t,n)&&Lh(e,n,t[n]);return e},Dh=(e,t)=>kh(e,Zh(t)),Oh=(0,P.aZ)({emits:[],props:{index:{type:Number,required:!0},last:{type:Boolean,required:!0}},data(){return{actionType:"",isDragOver:!1}},computed:Eh({},(0,ze.Se)({middlemostPageIndex:"getMiddlemostPageIndex",getPage:"getPage",getPagesPerRow:"page/getPagesPerRow",isDragged:"page/getIsDragged"})),methods:Dh(Eh({},(0,ze.OI)({_setmiddlemostPageIndex:"SET_middlemostPageIndex",_setCurrActivePageIndex:"SET_currActivePageIndex"})),{styles(){return this.isDragged?{"z-index":"2",width:"150px",transform:"translateX(-60px)"}:{"z-index":"unset",width:"30px",transform:""}},pageMoveTo(e,t){if("drag"===t){if(this.isDragOver)return;this.isDragOver=!0}if("mouse"===t&&(this.isDragged||this.last))return;const n=e.currentTarget,r=n.previousElementSibling;r&&(r.style.transform="translate(-15px)");const i=n.nextElementSibling;i&&(i.style.transform="translate(15px)"),n.style.opacity="1",this.actionType=t},pageMoveBack(e){this.isDragOver=!1;const t=e.currentTarget,n=t.previousElementSibling;n&&(n.style.transform="");const r=t.nextElementSibling;r&&(r.style.transform=""),t.style.opacity="0"},handlePageDrop(e){this.actionType="",this.pageMoveBack(e);const t=p.Z.currFocusPageIndex,n=this.index;if(t===n||t+1===n)return;const r=t<n,i=r?n-1:n,o=l.Z.deepCopy(this.getPage(t)),s=p.Z.getPage(i);p.Z.deletePage(t),p.Z.addPageToPos(p.Z.isDetailPage?Dh(Eh({},o),{bleeds:s.bleeds,physicalBleeds:s.physicalBleeds}):o,i),tr.Z.deselect(),this._setmiddlemostPageIndex(i),this._setCurrActivePageIndex(i),cn.Z.record()},addPage(e){const t=0===p.Z.pageNum?void 0:1===p.Z.pageNum?p.Z.getPage(0):p.Z.getPage(e+(0===e?1:-1));p.Z.addPageToPos(p.Z.newPage(t?{width:t.width,height:t.height,physicalWidth:t.physicalWidth,physicalHeight:t.physicalHeight,isEnableBleed:t.isEnableBleed,backgroundColor:t.backgroundColor,bleeds:t.bleeds,physicalBleeds:t.physicalBleeds,unit:t.unit}:{}),e),this._setmiddlemostPageIndex(e),cn.Z.record()}})});const Mh=(0,oe.Z)(Oh,[["render",Ih],["__scopeId","data-v-c6864cd4"],["__file","PagePreviewPlus.vue"]]);var Ah=Mh,$h=Object.defineProperty,Fh=Object.defineProperties,jh=Object.getOwnPropertyDescriptors,Bh=Object.getOwnPropertySymbols,Rh=Object.prototype.hasOwnProperty,Hh=Object.prototype.propertyIsEnumerable,Uh=(e,t,n)=>t in e?$h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wh=(e,t)=>{for(var n in t||(t={}))Rh.call(t,n)&&Uh(e,n,t[n]);if(Bh)for(var n of Bh(t))Hh.call(t,n)&&Uh(e,n,t[n]);return e},Vh=(e,t)=>Fh(e,jh(t)),Gh=(0,P.aZ)({emits:[],data(){return{containerWidth:0}},components:{PagePreviewPageWrapper:xh,PagePreviewPlus:Ah},computed:Wh({},(0,ze.Se)({getPages:"getPages",getPagesPerRow:"page/getPagesPerRow"})),mounted(){const e=this.$refs.container;this.containerWidth=e.clientWidth,this._setPagesPerRow((0,h.floor)((this.containerWidth-30)/180)),window.addEventListener("resize",(()=>{this.containerWidth=e.clientWidth,this._setPagesPerRow((0,h.floor)((this.containerWidth-30)/180))}))},methods:Vh(Wh({},(0,ze.OI)({_setPagesPerRow:"page/SET_PagesPerRow"})),{addPage(){const e=p.Z.pageNum>0?p.Z.getPages[p.Z.pageNum-1]:void 0;p.Z.addPageToPos(p.Z.newPage(e?{width:e.width,height:e.height,physicalWidth:e.physicalWidth,physicalHeight:e.physicalHeight,backgroundColor:e.backgroundColor,isEnableBleed:e.isEnableBleed,bleeds:e.bleeds,physicalBleeds:e.physicalBleeds,unit:e.unit}:{}),p.Z.pageNum),cn.Z.record()}})});const qh=(0,oe.Z)(Gh,[["render",rh],["__scopeId","data-v-e8773690"],["__file","PagePreview.vue"]]);var Kh=qh;const Yh={class:"scale-ratio-editor","cy-visual-test":"transparent"},Xh=["disabled"],Qh={class:"scale-ratio-editor__percentage lead-2"};function Jh(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.Q2)("ratio-change");return(0,P.wg)(),(0,P.iD)("div",Yh,[(0,P.wy)((0,P._)("input",{class:(0,k.C_)(["scale-ratio-editor__input pointer",e.disableRatioEditor?"":"showInput"]),ref:"scale-ratio-editor",type:"range",min:"0.1",max:"5",step:"0.01","onUpdate:modelValue":t[0]||(t[0]=t=>e.ratioInPercent=t),style:(0,k.j5)(e.ratioStyles()),disabled:e.isShowPagePreview,onInput:t[1]||(t[1]=t=>e.setScaleRatio(Math.round(100*e.ratioInPercent))),onMousedown:t[2]||(t[2]=t=>e.setIsSettingScaleRatio(!0)),onMouseup:t[3]||(t[3]=(...t)=>e.handleMouseUp&&e.handleMouseUp(...t))},null,46,Xh),[[Z.nr,e.ratioInPercent],[a]]),(0,P._)("div",{class:(0,k.C_)(["px-5 flex items-center btn-page-resize",e.disableRatioEditor?"":"pointer hover-effect"]),onClick:t[4]||(t[4]=t=>e.openResizePopup())},[(0,P._)("div",Qh,[(0,P._)("span",{class:(0,k.C_)(e.disableRatioEditor?"text-gray-4":"text-gray-2")},(0,k.zw)(e.pageScaleRatio)+"%",3)]),(0,P.Wm)(s,{class:(0,k.C_)([{"rotate-hr":e.isPageScalePopupOpen,pointer:e.disableRatioEditor}]),iconName:"chevron-down",iconColor:e.disableRatioEditor?"gray-4":"gray-2",iconWidth:"16px"},null,8,["class","iconColor"])],2),(0,P.Wm)(s,{class:(0,k.C_)({"hover-effect":!e.inBgRemoveMode,"click-disabled":e.inBgRemoveMode}),onClick:t[5]||(t[5]=t=>e.setIsShowPagePreview(!e.isShowPagePreview)),iconName:"grid",iconColor:e.inBgRemoveMode?"gray-4":"gray-2",disabled:e.inBgRemoveMode,iconWidth:"24px"},null,8,["class","iconColor","disabled"]),(0,P.Wm)(s,{class:(0,k.C_)({"hover-effect":!e.inBgRemoveMode,"click-disabled":e.inBgRemoveMode}),iconName:"navPage",iconColor:e.inBgRemoveMode?"gray-4":"gray-2",iconWidth:"24px",disabled:e.inBgRemoveMode,onClick:t[6]||(t[6]=t=>e.setShowPagePanel(!e.showPagePanel))},null,8,["class","iconColor","disabled"])])}var em=Object.defineProperty,tm=Object.defineProperties,nm=Object.getOwnPropertyDescriptors,rm=Object.getOwnPropertySymbols,im=Object.prototype.hasOwnProperty,om=Object.prototype.propertyIsEnumerable,sm=(e,t,n)=>t in e?em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,am=(e,t)=>{for(var n in t||(t={}))im.call(t,n)&&sm(e,n,t[n]);if(rm)for(var n of rm(t))om.call(t,n)&&sm(e,n,t[n]);return e},lm=(e,t)=>tm(e,nm(t)),cm=(0,P.aZ)({emits:["toggleSidebarPanel"],props:{disableRatioEditor:{type:Boolean,default:!1}},data(){return{}},computed:lm(am({},(0,ze.Se)({pageScaleRatio:"getPageScaleRatio",isShowPagePreview:"page/getIsShowPagePreview",showPagePanel:"page/getShowPagePanel",inBgRemoveMode:"bgRemove/getInBgRemoveMode"})),{isPageScalePopupOpen(){return ir.Z.isPopupOpen&&"page-scale"===ir.Z.currPopupType},ratioInPercent:{get(){return this.pageScaleRatio/100},set(e){this.setScaleRatio(Math.round(100*e))}}}),methods:lm(am({},(0,ze.OI)({_setScaleRatio:"SET_pageScaleRatio",_setIsShowPagePreview:"page/SET_isShowPagePreview",_setShowPagePanel:"page/SET_showPagePanel",setIsSettingScaleRatio:"SET_isSettingScaleRatio"})),{ratioStyles(){return{"--progress":(this.ratioInPercent-.1)/4.9*100+"%"}},handleMouseUp(){this.setIsSettingScaleRatio(!1),p.Z.activeMiddlemostPage()},setScaleRatio(e){this._setScaleRatio(e)},setIsShowPagePreview(e){this._setIsShowPagePreview(e),e||this._setShowPagePanel(!1)},setShowPagePanel(e){this.isShowPagePreview?(this.setIsShowPagePreview(!1),this._setShowPagePanel(!0)):(this.toggleSidebarPanel(e),this._setShowPagePanel(e))},toggleSidebarPanel(e){this.$emit("toggleSidebarPanel",e)},openResizePopup(){this.isShowPagePreview||ir.Z.openPopup("page-scale",{posX:"right",posY:"top"})}})});const dm=(0,oe.Z)(cm,[["render",Jh],["__scopeId","data-v-2a425f73"],["__file","ScaleRatioEditor.vue"]]);var um=dm;const gm={class:"sidebar"},pm={class:"logo"},hm={class:"nav"},mm={class:"nav-container"},ym=["onClick"];function fm(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("router-link");return(0,P.wg)(),(0,P.iD)("div",gm,[(0,P._)("div",pm,[(0,P.Wm)(a,{to:"/",style:(0,k.j5)([{height:"30px"},e.inBgRemoveMode?{pointerEvents:"none"}:{}])},{default:(0,P.w5)((()=>[(0,P.Wm)(s,{class:"pointer",iconName:"logo-icon",iconWidth:"30px"})])),_:1},8,["style"])]),(0,P._)("div",hm,[(0,P._)("div",mm,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.navItem,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"nav-item pointer",key:`icon-${t.index}`,onClick:n=>e.switchNav(t.index)},[(0,P.Wm)(s,{class:"nav-item__icon",iconName:t.icon,iconColor:e.currPanel!==t.index||e.inBgRemoveMode?"gray-3":"blue-1",iconWidth:"24px"},null,8,["iconName","iconColor"]),(0,P._)("div",{class:(0,k.C_)(["nav-item__text body-3",[e.currPanel!==t.index||e.inBgRemoveMode?"text-gray-3":"text-blue-1",e.$i18n.locale]])},(0,k.zw)(t.text),3)],8,ym)))),128))])]),(0,P._)("div",{class:(0,k.C_)(["sidebar__chevron pointer",[{"rotate-hr":e.isSidebarPanelOpen}]]),onClick:t[0]||(t[0]=(...t)=>e.toggleSidebarPanel&&e.toggleSidebarPanel(...t))},[(0,P.Wm)(s,{iconName:"chevron-duo-right",iconColor:"gray-3",iconWidth:"30px"})],2)])}var bm=Object.defineProperty,vm=Object.defineProperties,wm=Object.getOwnPropertyDescriptors,Nm=Object.getOwnPropertySymbols,Sm=Object.prototype.hasOwnProperty,xm=Object.prototype.propertyIsEnumerable,Pm=(e,t,n)=>t in e?bm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Im=(e,t)=>{for(var n in t||(t={}))Sm.call(t,n)&&Pm(e,n,t[n]);if(Nm)for(var n of Nm(t))xm.call(t,n)&&Pm(e,n,t[n]);return e},_m=(e,t)=>vm(e,wm(t)),km=(0,P.aZ)({props:{isSidebarPanelOpen:{type:Boolean,required:!0}},emits:["toggleSidebarPanel"],data(){return{}},computed:_m(Im({},(0,ze.Se)({currPanel:"getCurrSidebarPanelType",isShowPagePreview:"page/getIsShowPagePreview",showPagePanel:"page/getShowPagePanel",inBgRemoveMode:"bgRemove/getInBgRemoveMode",isAdmin:"user/isAdmin"})),{navItem(){const e=[{icon:"template",text:`${this.$tc("NN0001",2)}`,index:0},{icon:"photo",text:`${this.$tc("NN0002",2)}`,index:1},{icon:"objects",text:`${this.$tc("NN0003",2)}`,index:2},{icon:"bg",text:`${this.$tc("NN0004",2)}`,index:3},{icon:"text",text:`${this.$tc("NN0005",2)}`,index:4},{icon:"upload",text:`${this.$tc("NN0006")}`,index:5},...this.isAdmin?[{icon:"overlay",text:`${this.$tc("NN0899")}`,index:6}]:[]];return a.Z.isBrandkitAvailable&&e.push({icon:"brand",text:`${this.$t("NN0497")}`,index:7}),e}}),methods:_m(Im({},(0,ze.OI)({setCurrSidebarPanel:"SET_currSidebarPanelType",_setIsShowPagePreview:"page/SET_isShowPagePreview",_setShowPagePanel:"page/SET_showPagePanel"})),{switchNav(e){this.inBgRemoveMode||(this.setCurrSidebarPanel(e),this.$emit("toggleSidebarPanel",!0),this.showPagePanel&&this._setShowPagePanel(!1),this.isShowPagePreview&&(this._setIsShowPagePreview(!1),p.Z.scrollIntoPage(p.Z.currFocusPageIndex,"auto")))},toggleSidebarPanel(){this.inBgRemoveMode||(this.showPagePanel&&this._setShowPagePanel(!1),this.$emit("toggleSidebarPanel",!this.isSidebarPanelOpen))}})});const Zm=(0,oe.Z)(km,[["render",fm],["__scopeId","data-v-e3c4cb7a"],["__file","Sidebar.vue"]]);var Cm=Zm;const zm={class:"panel"};function Tm(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("div",zm,[((0,P.wg)(),(0,P.j4)(P.Ob,{include:["PanelTemplate","PanelPhoto","PanelObject","PanelBackground","PanelText","PanelFile","PanelOverlay","PanelBrand"]},[(0,P.wy)(((0,P.wg)(),(0,P.j4)((0,P.LL)(e.showPagePanel?"panel-page":e.panelComponents[e.currPanel]),{class:"p-10 border-box",style:(0,k.j5)(e.panelStyles()),currPage:e.currPage},null,8,["style","currPage"])),[[Z.F8,e.isSidebarPanelOpen&&!e.isShowPagePreview&&!e.bgRemoveMode]])],1024))])}const Lm={class:"panel-bg"},Em={key:1},Dm={class:"panel-bg__items"},Om={key:0,class:"panel-bg__header"},Mm={key:0,class:"text-center"},Am={key:1};function $m(e,t,n,r,i,o){const s=(0,P.up)("tabs"),a=(0,P.up)("search-bar"),l=(0,P.up)("color-slips"),c=(0,P.up)("category-background-item"),d=(0,P.up)("category-list-rows"),u=(0,P.up)("svg-icon"),g=(0,P.up)("url"),p=(0,P.up)("nubtn"),h=(0,P.up)("category-list");return(0,P.wg)(),(0,P.iD)("div",Lm,[(0,P.Wm)(s,{tabs:[e.$tc("NN0002",2),e.$t("NN0017")],modelValue:e.tabIndex,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tabIndex=t)},null,8,["tabs","modelValue"]),e.showImageTab?((0,P.wg)(),(0,P.j4)(a,{key:0,class:"mb-15",placeholder:e.$t("NN0092",{target:e.$tc("NN0004",1)}),clear:"",defaultKeyword:e.keywordLabel,onSearch:e.handleSearch},null,8,["placeholder","defaultKeyword","onSearch"])):(0,P.kq)("",!0),(0,P.wy)((0,P.Wm)(l,{class:"panel-bg__color-sets",mode:"PanelBG",selectedColor:e.currentPageBackgroundColor,currPage:e.currPage,onSelectColor:e.setBgColor,onSelectColorEnd:e.recordChange,onOpenColorPicker:e.openColorPicker},null,8,["selectedColor","currPage","onSelectColor","onSelectColorEnd","onOpenColorPicker"]),[[Z.F8,e.showColorTab]]),e.emptyResultMessage?((0,P.wg)(),(0,P.iD)("div",Em,[(0,P._)("span",null,(0,k.zw)(e.emptyResultMessage),1)])):(0,P.kq)("",!0),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.categoryListArray,(t=>(0,P.wy)(((0,P.wg)(),(0,P.j4)(h,{ref_for:!0,ref:t.key,key:t.key,list:t.content,onLoadMore:e.handleLoadMore,onScrollPassive:n=>e.handleScrollTop(n,t.key)},{"category-list-rows":(0,P.w5)((({list:t,title:n})=>[(0,P.Wm)(d,{list:t,title:n,onAction:e.handleCategorySearch},{preview:(0,P.w5)((({item:t})=>[(0,P.Wm)(c,{item:t,locked:e.currentPageBackgroundLocked},null,8,["item","locked"])])),_:2},1032,["list","title","onAction"])])),"category-background-item":(0,P.w5)((({list:t,title:n})=>[(0,P._)("div",Dm,[n?((0,P.wg)(),(0,P.iD)("div",Om,(0,k.zw)(n),1)):(0,P.kq)("",!0),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(t,(t=>((0,P.wg)(),(0,P.j4)(c,{key:t.id,item:t,locked:e.currentPageBackgroundLocked},null,8,["item","locked"])))),128))])])),after:(0,P.w5)((()=>{var t;return[e.pending?((0,P.wg)(),(0,P.iD)("div",Mm,[(0,P.Wm)(u,{iconName:"loading",iconColor:"white",iconWidth:"20px"})])):(0,P.kq)("",!0),e.keyword&&!e.pending&&(null==(t=e.rawSearchResult.list)?void 0:t.length)<=10?((0,P.wg)(),(0,P.iD)("div",Am,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0796",{type:e.$tc("NN0792",1)})),1),(0,P.Wm)(p,{class:"mt-30",size:"mid-center"},{default:(0,P.w5)((()=>[(0,P.Wm)(g,{url:e.$t("NN0791"),newTab:!0},{default:(0,P.w5)((()=>[(0,P._)("span",null,(0,k.zw)(e.$t("NN0790",{type:e.$tc("NN0792",1)})),1)])),_:1},8,["url"])])),_:1})])):(0,P.kq)("",!0)]})),_:2},1032,["list","onLoadMore","onScrollPassive"])),[[Z.F8,t.show]]))),128))])}const Fm=["src"];function jm(e,t,n,r,i,o){const s=(0,P.up)("pro-item");return(0,P.wg)(),(0,P.iD)("div",{class:"panel-bg__item",onClick:t[1]||(t[1]=(...t)=>e.addBackground&&e.addBackground(...t)),onContextmenu:t[2]||(t[2]=(0,Z.iM)((t=>e.openUpdateDesignPopup()),["right","prevent"]))},[(0,P._)("img",{class:"panel-bg__img",ref:"img",crossorigin:"anonymous",draggable:"false",src:e.src||e.fallbackSrc||e.imageUtils.getSrc({srcObj:{type:"background",assetId:e.item.id,userId:""}},"prev",e.item.ver),onError:t[0]||(t[0]=(...t)=>e.handleNotFound&&e.handleNotFound(...t))},null,40,Fm),e.item.plan?((0,P.wg)(),(0,P.j4)(s,{key:0})):(0,P.kq)("",!0)],32)}var Bm=Object.defineProperty,Rm=Object.getOwnPropertySymbols,Hm=Object.prototype.hasOwnProperty,Um=Object.prototype.propertyIsEnumerable,Wm=(e,t,n)=>t in e?Bm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vm=(e,t)=>{for(var n in t||(t={}))Hm.call(t,n)&&Wm(e,n,t[n]);if(Rm)for(var n of Rm(t))Um.call(t,n)&&Wm(e,n,t[n]);return e},Gm=(0,P.aZ)({emits:[],components:{ProItem:uo.Z},props:{src:{type:String},item:{type:Object,required:!0},locked:{type:Boolean,required:!0}},data(){return{fallbackSrc:"",imageUtils:rr.Z}},computed:Vm({},(0,ze.Se)("user",{isAdmin:"isAdmin"})),methods:{handleNotFound(e){this.fallbackSrc=n(75230)},addBackground(){if(!gs.Z.checkPro(this.item,"pro-bg"))return;if(this.locked)return(0,sr.h4)({group:"copy",text:r.Z.global.tc("NN0804")});const e=this.$refs.img;if(!e)return void console.error("img in background category is null");const t=e.src,n={width:e.naturalWidth,height:e.naturalHeight};s.ZP.addAsset(this.item,{previewSrc:t,imgSrcSize:n})},openUpdateDesignPopup(){if(this.isAdmin){const e=!0,t=this.item.id,n="background";i.Z.commit("user/SET_STATE",{isUpdateDesignOpen:e,updateDesignId:t,updateDesignType:n})}}}});const qm=(0,oe.Z)(Gm,[["render",jm],["__scopeId","data-v-10e0df4f"],["__file","CategoryBackgroundItem.vue"]]);var Km=qm,Ym=n(9811);const Xm={class:"category-list-rows"},Qm={class:"category-list-rows__header py-10 text-bold text-white"},Jm=["src"];function ey(e,t,r,i,o,s){const a=(0,P.up)("category-list-row");return(0,P.wg)(),(0,P.iD)("div",Xm,[(0,P._)("div",Qm,[(0,P._)("div",null,(0,k.zw)(e.title),1),(0,P._)("div",{class:"category-list-rows__action pointer",onClick:t[0]||(t[0]=t=>e.onAction(e.title))},[(0,P.WI)(e.$slots,"action",{},(()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0082")),1)]),!0)])]),(0,P.Wm)(a,null,{default:(0,P.w5)((()=>[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.list,(t=>((0,P.wg)(),(0,P.iD)("div",{key:t.id},[(0,P.WI)(e.$slots,"preview",{item:t},(()=>[(0,P._)("img",{src:n(75230)},null,8,Jm)]),!0)])))),128))])),_:3})])}const ty={class:"category-row"},ny={class:"category-row__icon"},ry={class:"category-row__icon"};function iy(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",ty,[e.prevIcon?((0,P.wg)(),(0,P.iD)("div",{key:0,class:"category-row__move category-row__move--left",onClick:t[0]||(t[0]=(...t)=>e.handlePrev&&e.handlePrev(...t))},[(0,P._)("div",ny,[(0,P.Wm)(s,{iconName:"arrow-left",iconWidth:"20px",iconColor:"gray-1"})])])):(0,P.kq)("",!0),e.nextIcon?((0,P.wg)(),(0,P.iD)("div",{key:1,class:"category-row__move category-row__move--right",onClick:t[1]||(t[1]=(...t)=>e.handleNext&&e.handleNext(...t))},[(0,P._)("div",ry,[(0,P.Wm)(s,{iconName:"arrow-right",iconWidth:"20px",iconColor:"gray-1"})])])):(0,P.kq)("",!0),(0,P._)("div",{class:"category-row__items",ref:"items",onScrollPassive:t[2]||(t[2]=(...t)=>e.handleScroll&&e.handleScroll(...t))},[(0,P.WI)(e.$slots,"default",{},void 0,!0)],544)])}var oy=(0,P.aZ)({emits:[],computed:{items(){return this.$refs.items}},data(){return{prevIcon:!0,nextIcon:!0}},mounted(){this.handleIconDisplay()},methods:{handleNext(){const{scrollLeft:e}=this.items,t=parseInt(window.getComputedStyle(this.items.children[0]).width)||145,n=parseInt(window.getComputedStyle(this.items).getPropertyValue("column-gap"))||10,r=this.$isTouchDevice()&&window.innerWidth>=600?3:2;this.items.scrollLeft=e+(t+n)*r},handlePrev(){const{scrollLeft:e}=this.items,t=parseInt(window.getComputedStyle(this.items.children[0]).width)||145,n=parseInt(window.getComputedStyle(this.items).getPropertyValue("column-gap"))||10,r=this.$isTouchDevice()&&window.innerWidth>=600?3:2;this.items.scrollLeft=e-(t+n)*r},handleScroll(e){const{scrollLeft:t}=e.target;this.handleIconDisplay(t)},handleIconDisplay(e=0){const{scrollWidth:t,offsetWidth:n}=this.items;this.prevIcon=e>0,this.nextIcon=e<t-n&&t>n}}});const sy=(0,oe.Z)(oy,[["render",iy],["__scopeId","data-v-eee2c4e0"],["__file","CategoryListRow.vue"]]);var ay=sy,ly=(0,P.aZ)({emits:["action"],props:{list:{type:Array,required:!0},title:{type:String,required:!0}},components:{CategoryListRow:ay},methods:{onAction(e){this.$emit("action",e)}}});const cy=(0,oe.Z)(ly,[["render",ey],["__scopeId","data-v-92687fa8"],["__file","CategoryListRows.vue"]]);var dy=cy,uy=n(46986),gy=n(68514),py=Object.defineProperty,hy=Object.defineProperties,my=Object.getOwnPropertyDescriptors,yy=Object.getOwnPropertySymbols,fy=Object.prototype.hasOwnProperty,by=Object.prototype.propertyIsEnumerable,vy=(e,t,n)=>t in e?py(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wy=(e,t)=>{for(var n in t||(t={}))fy.call(t,n)&&vy(e,n,t[n]);if(yy)for(var n of yy(t))by.call(t,n)&&vy(e,n,t[n]);return e},Ny=(e,t)=>hy(e,my(t)),Sy=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),xy=(0,P.aZ)({name:"PanelBackground",components:{SearchBar:gy.Z,CategoryList:Ym.Z,CategoryListRows:dy,CategoryBackgroundItem:Km,Tabs:yo.Z,ColorSlips:Re,Url:uy.Z},emits:["openExtraColorModal"],data(){return{scrollTop:{mainContent:0,searchResult:0},tabIndex:0}},props:{currPage:{type:Object,required:!0}},computed:Ny(wy({},(0,ze.rn)("background",{categories:"categories",rawContent:"content",rawSearchResult:"searchResult",pending:"pending",keyword:"keyword"})),{itemWidth(){const e=(window.innerWidth-48-10)/2;return e<145?e:145},keywordLabel(){return this.keyword?this.keyword.replace("tag::",""):this.keyword},listCategories(){const{categories:e}=this;return e.map(((e,t)=>({size:this.itemWidth+10+46,id:`rows_${t}_${e.list.map((e=>e.id)).join("_")}`,type:"category-list-rows",list:e.list,title:e.title})))},listResult(){return this.processListResult(this.rawContent.list,!1)},searchResult(){const e=this.processListResult(this.rawSearchResult.list,!0);return 0!==e.length&&Object.assign(e[e.length-1],{sentinel:!0}),e},mainContent(){const e=l.Z.deepCopy(this.listCategories.concat(this.listResult));return 0!==e.length&&Object.assign(e[e.length-1],{sentinel:!0}),e},categoryListArray(){return[{content:this.searchResult,show:this.keyword&&this.showImageTab,key:"searchResult"},{content:this.mainContent,show:!this.keyword&&this.showImageTab,key:"mainContent"}]},currentPageBackgroundLocked(){const{backgroundImage:e}=this.currPage;return e&&e.config.locked},currentPageBackgroundColor(){var e;return(null==(e=this.currPage.backgroundImage.config)?void 0:e.srcObj.assetId)?"":this.currPage.backgroundColor},emptyResultMessage(){const{keyword:e,pending:t}=this;return t||!e||this.searchResult.length>0?"":`${this.$t("NN0393",{keyword:this.keywordLabel,target:this.$tc("NN0004",1)})}`},showImageTab(){return 0===this.tabIndex},showColorTab(){return 1===this.tabIndex}}),mounted(){l.Z.panelInit("bg",this.handleSearch,this.handleCategorySearch,this.getRecAndCate),this.$isTouchDevice()&&_e.ZP.setCurrEvent(o.gQ.background)},activated(){this.$nextTick((()=>{const e=this.$refs.mainContent[0],t=this.$refs.searchResult[0];e.$el.scrollTop=this.scrollTop.mainContent,t.$el.scrollTop=this.scrollTop.searchResult}))},watch:{keyword(e){e||this.$nextTick((()=>{const e=this.$refs.mainContent[0];e.$el.scrollTop=this.scrollTop.mainContent}))}},methods:Ny(wy(wy({},(0,ze.nv)("background",["getContent","getTagContent","getRecAndCate","getMoreContent","resetSearch"])),(0,ze.OI)({_setBgColor:"SET_backgroundColor",setCurrActivePageIndex:"SET_currActivePageIndex",setCloseMobilePanelFlag:"mobileEditor/SET_closeMobilePanelFlag"})),{setBgColor(e){if(this.currentPageBackgroundLocked)return(0,sr.h4)({group:"copy",text:r.Z.global.tc("NN0804")});p.Z.currFocusPageIndex!==p.Z.addAssetTargetPageIndex&&(tr.Z.deselect(),this.setCurrActivePageIndex(p.Z.addAssetTargetPageIndex)),this._setBgColor({pageIndex:p.Z.addAssetTargetPageIndex,color:e})},handleSearch(e){return Sy(this,null,(function*(){this.resetSearch(),e&&(yield this.getTagContent({keyword:e}))}))},handleCategorySearch(e,t=""){return Sy(this,null,(function*(){this.resetSearch(),e&&(yield this.getContent({keyword:e,locale:t}))}))},handleLoadMore(){this.getMoreContent()},handleScrollTop(e,t){this.scrollTop[t]=e.target.scrollTop},recordChange(){this.$nextTick((()=>cn.Z.record()))},openColorPicker(){this.$emit("openExtraColorModal",o.gQ.background,o.pp.picker)},processListResult(e=[],t){return new Array(Math.ceil(e.length/2)).fill("").map(((n,r)=>{const i=e.slice(2*r,2*r+2),o=t||r?"":`${this.$t("NN0340")}`;return{id:`result_${i.map((e=>e.id)).join("_")}`,type:"category-background-item",list:i,size:o?this.itemWidth+10+46:this.itemWidth+10,title:o}}))}})});const Py=(0,oe.Z)(xy,[["render",$m],["__scopeId","data-v-29449878"],["__file","PanelBackground.vue"]]);var Iy=Py;const _y={class:"panel-brand relative"},ky={key:0,class:"panel-brand__main"},Zy={key:1,class:"panel-brand__main"},Cy={class:"panel-brand__header relative"},zy={class:"panel-brand__tab"};function Ty(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("brand-selector"),l=(0,P.up)("brand-kit-tab");return(0,P.wg)(),(0,P.iD)("div",_y,[e.isBrandsLoading?((0,P.wg)(),(0,P.iD)("div",ky,[(0,P.Wm)(s,{iconName:"loading",iconWidth:"20px",iconColor:"white"})])):((0,P.wg)(),(0,P.iD)("div",Zy,[(0,P._)("div",Cy,[(0,P.Wm)(a,{theme:"editor"}),(0,P._)("div",{class:"panel-brand__settings pointer",onClick:t[0]||(t[0]=(...t)=>e.handleOpenSettings&&e.handleOpenSettings(...t))},[(0,P.Wm)(s,{iconName:"settings",iconColor:"white",iconWidth:"24px"})])]),(0,P._)("div",zy,[(0,P.Wm)(l,{theme:"editor"})])]))])}var Ly=n(69250),Ey=Object.defineProperty,Dy=Object.defineProperties,Oy=Object.getOwnPropertyDescriptors,My=Object.getOwnPropertySymbols,Ay=Object.prototype.hasOwnProperty,$y=Object.prototype.propertyIsEnumerable,Fy=(e,t,n)=>t in e?Ey(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jy=(e,t)=>{for(var n in t||(t={}))Ay.call(t,n)&&Fy(e,n,t[n]);if(My)for(var n of My(t))$y.call(t,n)&&Fy(e,n,t[n]);return e},By=(e,t)=>Dy(e,Oy(t)),Ry=(0,P.aZ)({name:"PanelBrand",emits:[],components:{BrandSelector:xe.Z,BrandKitTab:Ly.Z},data(){return{}},computed:jy({},(0,ze.Se)("brandkit",{isBrandsLoading:"getIsBrandsLoading"})),methods:By(jy({},(0,ze.OI)("brandkit",{setSettingsOpen:"SET_isSettingsOpen"})),{handleOpenSettings(){this.setSettingsOpen(!0)}})});const Hy=(0,oe.Z)(Ry,[["render",Ty],["__scopeId","data-v-57a90792"],["__file","PanelBrand.vue"]]);var Uy=Hy;const Wy={class:"panel-file__topbtn"},Vy={key:0,class:"text-center"},Gy={key:0,class:"panel-file__menu"};function qy(e,t,n,r,i,o){const s=(0,P.up)("nubtn"),a=(0,P.up)("svg-icon"),l=(0,P.up)("image-gallery");return(0,P.wg)(),(0,P.iD)("div",{class:"panel-file",onDrop:t[5]||(t[5]=(0,Z.iM)((t=>e.onDrop(t)),["stop","prevent"])),onDragover:t[6]||(t[6]=(0,Z.iM)((()=>{}),["prevent"])),onDragenter:t[7]||(t[7]=(0,Z.iM)((()=>{}),["prevent"]))},[(0,P._)("div",Wy,[(0,P.Wm)(s,{size:"mid-full",onClick:t[0]||(t[0]=t=>e.uploadImage())},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0014")),1)])),_:1}),e.$isTouchDevice()?((0,P.wg)(),(0,P.j4)(s,{key:0,theme:"icon2",icon:"trash",size:"mid",active:"on"===e.inMultiSelectMode,onClick:t[1]||(t[1]=t=>e.toggleMultiSelect())},null,8,["active"])):(0,P.kq)("",!0)]),(0,P.Wm)(l,{ref:"mainContent",myfile:e.myfileImages,vendor:"myfile",inFilePanel:!0,multiSelectMode:e.inMultiSelectMode,onLoadMore:e.handleLoadMore,onScrollPassive:t[2]||(t[2]=t=>e.handleScrollTop(t,"mainContent"))},{pending:(0,P.w5)((()=>[e.pending?((0,P.wg)(),(0,P.iD)("div",Vy,[(0,P.Wm)(a,{iconName:"loading",iconColor:"white",iconWidth:"20px"})])):(0,P.kq)("",!0)])),_:1},8,["myfile","multiSelectMode","onLoadMore"]),(0,P.Wm)(Z.uT,{name:"panel-up"},{default:(0,P.w5)((()=>[e.hasCheckedAssets?((0,P.wg)(),(0,P.iD)("div",Gy,[(0,P._)("div",null,[(0,P.Wm)(a,{class:"pointer",iconName:"trash",iconColor:"white",iconWidth:"24px",onClick:t[3]||(t[3]=t=>e.deleteAssets())})]),(0,P._)("span",{class:"text-blue-1 pointer",onClick:t[4]||(t[4]=t=>e.clearCheckedAssets())},(0,k.zw)(`${e.$t("NN0130")}(${e.checkedAssets.length})`),1)])):(0,P.kq)("",!0)])),_:1})],32)}const Ky={class:"flex flex-between"};function Yy(e,t,n,r,i,o){const s=(0,P.up)("observer-sentinel"),a=(0,P.up)("gallery-photo"),l=(0,P.up)("recycle-scroller");return(0,P.wg)(),(0,P.j4)(l,{class:"image-gallery",id:"recycle",items:e.rows},{default:(0,P.w5)((({item:t})=>[t.sentinel?((0,P.wg)(),(0,P.j4)(s,{key:0,onCallback:n=>e.handleLoadMore(t)},null,8,["onCallback"])):(0,P.kq)("",!0),(0,P._)("div",Ky,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(t.list,(t=>((0,P.wg)(),(0,P.j4)(a,{style:(0,k.j5)(e.imageStyle(t.preview)),photo:t,vendor:e.vendor,inFilePanel:e.inFilePanel,multiSelectMode:e.multiSelectMode,key:t.id},null,8,["style","photo","vendor","inFilePanel","multiSelectMode"])))),128))])])),after:(0,P.w5)((()=>[(0,P.WI)(e.$slots,"pending",{},void 0,!0)])),_:3},8,["items"])}var Xy=n(55187),Qy=n(51543),Jy=n(45157);const ef=(0,P.aZ)({props:{vendor:{type:String,required:!0},images:{type:Array,default:()=>[]},myfile:{type:Array,default:()=>[]},inFilePanel:{type:Boolean,default:!1},multiSelectMode:{type:String,default:"off"}},components:{ObserverSentinel:Qy.Z,GalleryPhoto:Xy.Z},emits:["loadMore"],computed:{margin(){return this.galleryUtils.margin}},data(){return{nextIndex:0,rows:[],galleryUtils:new Jy.Z(this.$isTouchDevice()?window.innerWidth-34:300,95,5)}},watch:{myfile:{deep:!0,handler:function(){this.myfileUpdate()}},images:{immediate:!0,handler:function(e){this.nextIndex=e.length,this.rows=this.galleryUtils.generate(e).map(((e,t)=>({list:e,id:`row_${t}`,sentinel:!1,size:e[0].preview.height+this.margin}))),this.rows.length&&(this.rows[Math.max(this.rows.length-3,0)].sentinel=!0)}}},methods:{myfileUpdate(){this.rows=this.galleryUtils.generate(this.myfile).map(((e,t)=>({list:e,id:`row_${t}`,sentinel:!1,index:t,size:e[0].preview.height+this.margin}))),this.rows.length&&(this.rows[Math.max(this.rows.length-3,0)].sentinel=!0)},imageStyle(e){return{width:`${e.width}px`,height:`${e.height}px`}},handleLoadMore(e){e.sentinel=!1,this.$emit("loadMore")}}});var tf=ef;const nf=(0,oe.Z)(tf,[["render",Yy],["__scopeId","data-v-59feec42"],["__file","ImageGallery.vue"]]);var rf=nf,of=Object.defineProperty,sf=Object.defineProperties,af=Object.getOwnPropertyDescriptors,lf=Object.getOwnPropertySymbols,cf=Object.prototype.hasOwnProperty,df=Object.prototype.propertyIsEnumerable,uf=(e,t,n)=>t in e?of(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gf=(e,t)=>{for(var n in t||(t={}))cf.call(t,n)&&uf(e,n,t[n]);if(lf)for(var n of lf(t))df.call(t,n)&&uf(e,n,t[n]);return e},pf=(e,t)=>sf(e,af(t)),hf=(0,P.aZ)({name:"PanelFile",emits:[],components:{ImageGallery:rf},data(){return{scrollTop:{mainContent:0},inMultiSelectMode:this.$isTouchDevice()?"off":"hover"}},computed:pf(gf(gf({},(0,ze.rn)("file",["myfileImages","pending"])),(0,ze.Se)({checkedAssets:"file/getCheckedAssets"})),{hasCheckedAssets(){return 0!==this.checkedAssets.length}}),mounted(){this.$refs.mainContent.myfileUpdate()},activated(){this.$nextTick((()=>{const e=this.$refs.mainContent;e.$el.scrollTop=this.scrollTop.mainContent}))},methods:pf(gf(gf({},(0,ze.nv)({deleteAssets:"file/deleteAssets",getMoreMyfiles:"file/getMoreMyfiles"})),(0,ze.OI)({clearCheckedAssets:"file/CLEAR_CHECKED_ASSETS"})),{toggleMultiSelect(){this.inMultiSelectMode="on"===this.inMultiSelectMode?"off":"on","off"===this.inMultiSelectMode&&this.clearCheckedAssets()},handleLoadMore(){!this.pending&&this.getMoreMyfiles()},uploadImage(){Ye.Z.check()?Qe.Z.isLogin?Qe.Z.chooseAssets("image"):ei.Z.setModalInfo(`${this.$t("NN0350")}`,[]):Ye.Z.notifyNetworkError()},handleScrollTop(e,t){this.scrollTop[t]=e.target.scrollTop},onDrop(e){var t;const n=e.dataTransfer;if((null==(t=e.dataTransfer)?void 0:t.getData("data"))||!n);else{const e=n.files;Ye.Z.check()?Qe.Z.isLogin?Qe.Z.uploadAsset("image",e):ei.Z.setModalInfo(`${this.$t("NN0350")}`,[]):Ye.Z.notifyNetworkError()}}})});const mf=(0,oe.Z)(hf,[["render",qy],["__scopeId","data-v-4a2c60b8"],["__file","PanelFile.vue"]]);var yf=mf;const ff={class:"panel-objects"},bf={key:0,class:"panel-objects-2html"},vf={key:1},wf={class:"panel-objects__items"},Nf={key:0,class:"text-center"},Sf={key:1};function xf(e,t,n,r,i,o){const s=(0,P.up)("search-bar"),a=(0,P.up)("btn"),l=(0,P.up)("category-object-item"),c=(0,P.up)("category-list-rows"),d=(0,P.up)("svg-icon"),u=(0,P.up)("url"),g=(0,P.up)("nubtn"),p=(0,P.up)("category-list");return(0,P.wg)(),(0,P.iD)("div",ff,[(0,P.Wm)(s,{class:"mb-15",placeholder:e.$t("NN0092",{target:e.$tc("NN0003",1)}),clear:"",defaultKeyword:e.keywordLabel,onSearch:e.handleSearch},null,8,["placeholder","defaultKeyword","onSearch"]),e.showAdminTool?((0,P.wg)(),(0,P.iD)("div",bf,[(0,P.wy)((0,P._)("input",{type:"text",placeholder:"項目網址","onUpdate:modelValue":t[0]||(t[0]=t=>e.panelParams=t)},null,512),[[Z.nr,e.panelParams]]),(0,P.Wm)(a,{onClick:e.downloadAll},{default:(0,P.w5)((()=>[(0,P.Uk)("Download all")])),_:1},8,["onClick"])])):(0,P.kq)("",!0),e.emptyResultMessage?((0,P.wg)(),(0,P.iD)("div",vf,[(0,P._)("span",null,(0,k.zw)(e.emptyResultMessage),1)])):(0,P.kq)("",!0),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.categoryListArray,(t=>(0,P.wy)(((0,P.wg)(),(0,P.j4)(p,{ref_for:!0,ref:t.key,key:t.key,list:t.content,onLoadMore:e.handleLoadMore,onScrollPassive:n=>e.handleScrollTop(n,t.key)},{"category-list-rows":(0,P.w5)((({list:t,title:n})=>[(0,P.Wm)(c,{list:t,title:n,onAction:e.handleCategorySearch},{preview:(0,P.w5)((({item:e})=>[(0,P.Wm)(l,{class:"panel-objects__item",item:e},null,8,["item"])])),_:2},1032,["list","title","onAction"])])),"category-object-item":(0,P.w5)((({list:e})=>[(0,P._)("div",wf,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e,(e=>((0,P.wg)(),(0,P.j4)(l,{class:"panel-objects__item",key:e.id,item:e},null,8,["item"])))),128))])])),after:(0,P.w5)((()=>{var t;return[e.pending?((0,P.wg)(),(0,P.iD)("div",Nf,[(0,P.Wm)(d,{iconName:"loading",iconColor:"white",iconWidth:"20px"})])):(0,P.kq)("",!0),e.keyword&&!e.pending&&(null==(t=e.rawSearchResult.list)?void 0:t.length)<=10?((0,P.wg)(),(0,P.iD)("div",Sf,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0796",{type:e.$tc("NN0792",1)})),1),(0,P.Wm)(g,{class:"mt-30",size:"mid-center"},{default:(0,P.w5)((()=>[(0,P.Wm)(u,{url:e.$t("NN0791"),newTab:!0},{default:(0,P.w5)((()=>[(0,P._)("span",null,(0,k.zw)(e.$t("NN0790",{type:e.$tc("NN0792",1)})),1)])),_:1},8,["url"])])),_:1})])):(0,P.kq)("",!0)]})),_:2},1032,["list","onLoadMore","onScrollPassive"])),[[Z.F8,t.show]]))),128))])}const Pf=["src"];function If(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("pro-item");return(0,P.wg)(),(0,P.iD)("div",{class:"category-object-item",draggable:"true",onClick:t[0]||(t[0]=(...t)=>e.addSvg&&e.addSvg(...t)),onContextmenu:t[1]||(t[1]=(0,Z.iM)((t=>e.openUpdateDesignPopup()),["right","prevent"])),onDragstart:t[2]||(t[2]=t=>e.dragStart(t))},[(0,P._)("img",{class:"category-object-item__img",ref:"img",src:e.src||`https://template.vivipic.com/svg/${e.item.id}/prev?ver=${e.item.ver}`},null,8,Pf),!e.$isTouchDevice()&&(e.item.info||e.item.tags&&e.item.tags.length>0)?((0,P.wg)(),(0,P.j4)(s,{key:0,class:"category-object-item__more",onClick:e.showSvgInfo,iconName:"more_vertical",iconColor:"gray-2",iconWidth:"20px"},null,8,["onClick"])):(0,P.kq)("",!0),e.item.plan?((0,P.wg)(),(0,P.j4)(a,{key:1})):(0,P.kq)("",!0)],32)}var _f=n(49901),kf=Object.defineProperty,Zf=Object.defineProperties,Cf=Object.getOwnPropertyDescriptors,zf=Object.getOwnPropertySymbols,Tf=Object.prototype.hasOwnProperty,Lf=Object.prototype.propertyIsEnumerable,Ef=(e,t,n)=>t in e?kf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Df=(e,t)=>{for(var n in t||(t={}))Tf.call(t,n)&&Ef(e,n,t[n]);if(zf)for(var n of zf(t))Lf.call(t,n)&&Ef(e,n,t[n]);return e},Of=(e,t)=>Zf(e,Cf(t)),Mf=(0,P.aZ)({emits:[],components:{ProItem:uo.Z},props:{src:{type:String},item:{type:Object,required:!0}},computed:Df({},(0,ze.Se)("user",{isAdmin:"isAdmin"})),methods:Of(Df({},(0,ze.OI)({_setCurrSelectedResInfo:"SET_currSelectedResInfo"})),{dragStart(e){if(!gs.Z.checkPro(this.item,"pro-object"))return;const t=this.$refs.img;if(t){const n=s.ZP.getLayerType(this.item.type);(new _f.Z).itemDragStart(e,n||"",Df({},this.item),t.src,{resizeRatio:s.cX,aspectRatio:t.naturalWidth/t.naturalHeight})}},addSvg(){gs.Z.checkPro(this.item,"pro-object")&&s.ZP.addAsset(this.item,{db:"svg"})},showSvgInfo(e){var t,n,r,i,o,s,a,l,c,d;const{info:u={},tags:g}=this.item;this._setCurrSelectedResInfo({type:"object",userName:null!=(n=null==(t=u.author)?void 0:t.name)?n:"",userLink:null!=(i=null==(r=u.author)?void 0:r.url)?i:"",authorCompany:null!=(s=null==(o=u.author)?void 0:o.company)?s:"",tags:g,licenseName:null!=(l=null==(a=u.license)?void 0:a.name)?l:"",licenseLink:null!=(d=null==(c=u.license)?void 0:c.url)?d:""}),this.$nextTick((()=>{const t=document.querySelector(".res-info"),{top:n,left:r,height:i}=e.target.getBoundingClientRect();t.style.transform=`translate(${r}px, ${n+i+5}px)`,t.focus()}))},openUpdateDesignPopup(){if(this.isAdmin){const e=!0,t=this.item.id,n="svg";i.Z.commit("user/SET_STATE",{isUpdateDesignOpen:e,updateDesignId:t,updateDesignType:n})}}})});const Af=(0,oe.Z)(Mf,[["render",If],["__scopeId","data-v-9791f266"],["__file","CategoryObjectItem.vue"]]);var $f=Af,Ff=Object.defineProperty,jf=Object.defineProperties,Bf=Object.getOwnPropertyDescriptors,Rf=Object.getOwnPropertySymbols,Hf=Object.prototype.hasOwnProperty,Uf=Object.prototype.propertyIsEnumerable,Wf=(e,t,n)=>t in e?Ff(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vf=(e,t)=>{for(var n in t||(t={}))Hf.call(t,n)&&Wf(e,n,t[n]);if(Rf)for(var n of Rf(t))Uf.call(t,n)&&Wf(e,n,t[n]);return e},Gf=(e,t)=>jf(e,Bf(t)),qf=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),Kf=(0,P.aZ)({name:"PanelObject",components:{SearchBar:gy.Z,CategoryList:Ym.Z,CategoryListRows:dy,CategoryObjectItem:$f,Url:uy.Z},data(){return{scrollTop:{mainContent:0,searchResult:0},panelParams:""}},computed:Gf(Vf(Vf({},(0,ze.Se)({showAdminTool:"user/showAdminTool"})),(0,ze.rn)("objects",{categories:"categories",rawContent:"content",rawSearchResult:"searchResult",pending:"pending",keyword:"keyword"})),{keywordLabel(){return this.keyword?this.keyword.replace("tag::",""):this.keyword},listCategories(){const{categories:e}=this;return e.map(((e,t)=>({size:140,id:`rows_${t}_${e.list.map((e=>e.id)).join("_")}`,type:"category-list-rows",list:e.list,title:e.title})))},listResult(){return[]},searchResult(){const e=this.processListResult(this.rawSearchResult.list);return 0!==e.length&&Object.assign(e[e.length-1],{sentinel:!0}),e},mainContent(){const e=l.Z.deepCopy(this.listCategories.concat(this.listResult));return 0!==e.length&&Object.assign(e[e.length-1],{sentinel:!0}),e},categoryListArray(){return[{content:this.searchResult,show:this.keyword,key:"searchResult"},{content:this.mainContent,show:!this.keyword,key:"mainContent"}]},emptyResultMessage(){const{keyword:e,pending:t}=this;return t||!e||this.searchResult.length>0?"":`${this.$t("NN0393",{keyword:this.keywordLabel,target:this.$tc("NN0003",1)})}`}}),mounted(){l.Z.panelInit("object",this.handleSearch,this.handleCategorySearch,this.getRecAndCate)},activated(){this.$nextTick((()=>{const e=this.$refs.mainContent[0],t=this.$refs.searchResult[0];e.$el.scrollTop=this.scrollTop.mainContent,t.$el.scrollTop=this.scrollTop.searchResult}))},watch:{keyword(e){e||this.$nextTick((()=>{const e=this.$refs.mainContent[0];e.$el.scrollTop=this.scrollTop.mainContent}))}},methods:Gf(Vf({},(0,ze.nv)("objects",["getContent","getTagContent","getRecAndCate","getMoreContent","resetSearch"])),{handleSearch(e){return qf(this,null,(function*(){this.resetSearch(),e&&(this.panelParams=`https://vivipic.com/editor?panel=object&search=${e.replace(/&/g,"%26")}&type=new-design-size&width=1080&height=1080&themeId=1`,yield this.getTagContent({keyword:e}))}))},handleCategorySearch(e,t=""){return qf(this,null,(function*(){this.resetSearch(),e&&(this.panelParams=`https://vivipic.com/editor?panel=object&category=${e.replace(/&/g,"%26")}&category_locale=${r.Z.global.locale}&type=new-design-size&width=1080&height=1080&themeId=1`,yield this.getContent({keyword:e,locale:t}))}))},handleLoadMore(){this.getMoreContent()},handleScrollTop(e,t){this.scrollTop[t]=e.target.scrollTop},downloadAll(){l.Z.copyText(this.panelParams),(0,sr.h4)({group:"copy",text:"已複製網址到剪貼簿"});const e=this.mainContent.map((e=>e.list.map((e=>`https://template.vivipic.com/svg/${e.id}/prev?ver=${e.ver}`)).join("\n"))).join("\n");l.Z.downloadTextFile(`${this.keywordLabel}.txt`,e)},processListResult(e=[]){return new Array(Math.ceil(e.length/3)).fill("").map(((t,n)=>{const r=e.slice(3*n,3*n+3);return{id:`result_${r.map((e=>e.id)).join("_")}`,type:"category-object-item",list:r,size:104}}))}})});const Yf=(0,oe.Z)(Kf,[["render",xf],["__scopeId","data-v-47e17e9c"],["__file","PanelObject.vue"]]);var Xf=Yf;const Qf={class:"panel-page"},Jf={class:"panel-page-items"},eb={class:"panel-page__plus"},tb={key:0,class:"panel-page__plus"};function nb(e,t,n,r,i,o){const s=(0,P.up)("nubtn"),a=(0,P.up)("panel-page-plus"),l=(0,P.up)("page-preview-page-wrapper");return(0,P.wg)(),(0,P.iD)("div",Qf,[(0,P.Wm)(s,{class:"mt-10",theme:"icon_text",size:"sm-full",icon:"new-page",onClick:t[0]||(t[0]=t=>e.addPage(e.currFocusPageIndex+1))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0139")),1)])),_:1}),(0,P._)("div",Jf,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.getPages,((t,n)=>((0,P.wg)(),(0,P.iD)(P.HY,{key:n},[(0,P._)("div",eb,[(0,P.Wm)(a,{index:n,last:!1,class:(0,k.C_)({"pt-10":0===n})},null,8,["index","class"])]),(0,P.Wm)(l,{index:n,pagename:t.name,type:"panel",config:t,lazyLoadTarget:".panel-page"},null,8,["index","pagename","config","lazyLoadTarget"]),n+1===e.getPageCount?((0,P.wg)(),(0,P.iD)("div",tb,[(0,P.Wm)(a,{index:n+1,last:!1},null,8,["index"])])):(0,P.kq)("",!0)],64)))),128))])])}const rb=e=>((0,P.dD)("data-v-752d7802"),e=e(),(0,P.Cn)(),e),ib={class:"text-white"},ob={key:1},sb=rb((()=>(0,P._)("div",{class:"panel-page-plus-drag"},null,-1))),ab=[sb];function lb(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",{class:"panel-page-plus",style:(0,k.j5)(e.styles()),onMouseover:t[1]||(t[1]=t=>e.pageMoveTo(t,"mouse")),onMouseout:t[2]||(t[2]=t=>e.pageMoveBack(t)),onDragover:t[3]||(t[3]=t=>e.pageMoveTo(t,"drag")),onDragleave:t[4]||(t[4]=t=>e.pageMoveBack(t)),onDrop:t[5]||(t[5]=t=>e.handlePageDrop(t))},["mouse"===e.actionType?((0,P.wg)(),(0,P.iD)("div",{key:0,class:"panel-page-plus-wrapper pointer",onClick:t[0]||(t[0]=t=>e.addPage(e.index))},[(0,P.Wm)(s,{class:"py-5",iconColor:"white",iconName:"plus-origin",iconWidth:"15px"}),(0,P._)("span",ib,(0,k.zw)(e.$t("NN0139")),1)])):(0,P.kq)("",!0),"drag"===e.actionType?((0,P.wg)(),(0,P.iD)("div",ob,ab)):(0,P.kq)("",!0)],36)}var cb=Object.defineProperty,db=Object.defineProperties,ub=Object.getOwnPropertyDescriptors,gb=Object.getOwnPropertySymbols,pb=Object.prototype.hasOwnProperty,hb=Object.prototype.propertyIsEnumerable,mb=(e,t,n)=>t in e?cb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yb=(e,t)=>{for(var n in t||(t={}))pb.call(t,n)&&mb(e,n,t[n]);if(gb)for(var n of gb(t))hb.call(t,n)&&mb(e,n,t[n]);return e},fb=(e,t)=>db(e,ub(t)),bb=(0,P.aZ)({emits:[],props:{index:{type:Number,required:!0}},data(){return{actionType:"",isDragOver:!1}},computed:yb({},(0,ze.Se)({middlemostPageIndex:"getMiddlemostPageIndex",getPage:"getPage",getPagesPerRow:"page/getPagesPerRow",isDragged:"page/getIsDragged"})),methods:fb(yb({},(0,ze.OI)({_setmiddlemostPageIndex:"SET_middlemostPageIndex",_setCurrActivePageIndex:"SET_currActivePageIndex"})),{styles(){return this.isDragged?{"z-index":"2",height:"150px",transform:"translateY(-60px)"}:{"z-index":"unset",height:"30px",transform:""}},pageMoveTo(e,t){if("drag"===t){if(this.isDragOver)return;this.isDragOver=!0}if("mouse"===t&&this.isDragged)return;const n=e.currentTarget.parentElement,r=n.previousElementSibling;r&&(r.style.transform="translate(0, -20px)");const i=n.nextElementSibling;i&&(i.style.transform="translate(0, 20px)"),n.style.opacity="1",this.actionType=t},pageMoveBack(e){this.isDragOver=!1;const t=e.currentTarget.parentElement,n=t.previousElementSibling;n&&(n.style.transform="");const r=t.nextElementSibling;r&&(r.style.transform=""),t.style.opacity="0"},handlePageDrop(e){this.actionType="",this.pageMoveBack(e);const t=p.Z.currFocusPageIndex,n=this.index;if(t===n||t+1===n)return;const r=t<n,i=r?n-1:n,o=l.Z.deepCopy(this.getPage(t)),s=p.Z.getPage(i);p.Z.deletePage(t),p.Z.addPageToPos(p.Z.isDetailPage?fb(yb({},o),{bleeds:s.bleeds,physicalBleeds:s.physicalBleeds}):o,i),tr.Z.deselect(),this._setmiddlemostPageIndex(i),this._setCurrActivePageIndex(i),cn.Z.record()},addPage(e){const t=0===p.Z.pageNum?void 0:1===p.Z.pageNum?p.Z.getPage(0):p.Z.getPage(e+(0===e?1:-1));p.Z.addPageToPos(p.Z.newPage(t?{width:t.width,height:t.height,physicalWidth:t.physicalWidth,physicalHeight:t.physicalHeight,backgroundColor:t.backgroundColor,isEnableBleed:t.isEnableBleed,bleeds:t.bleeds,physicalBleeds:t.physicalBleeds,unit:t.unit}:{}),e),this._setmiddlemostPageIndex(e),cn.Z.record()}})});const vb=(0,oe.Z)(bb,[["render",lb],["__scopeId","data-v-752d7802"],["__file","PanelPagePlus.vue"]]);var wb=vb,Nb=Object.defineProperty,Sb=Object.defineProperties,xb=Object.getOwnPropertyDescriptors,Pb=Object.getOwnPropertySymbols,Ib=Object.prototype.hasOwnProperty,_b=Object.prototype.propertyIsEnumerable,kb=(e,t,n)=>t in e?Nb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zb=(e,t)=>{for(var n in t||(t={}))Ib.call(t,n)&&kb(e,n,t[n]);if(Pb)for(var n of Pb(t))_b.call(t,n)&&kb(e,n,t[n]);return e},Cb=(e,t)=>Sb(e,xb(t)),zb=(0,P.aZ)({emits:[],components:{PagePreviewPageWrapper:xh,PanelPagePlus:wb},computed:Cb(Zb({},(0,ze.Se)({getPages:"getPages",currFocusPageIndex:"getCurrFocusPageIndex"})),{getPageCount(){return this.getPages.length}}),methods:Cb(Zb({},(0,ze.OI)({_addPageToPos:"ADD_pageToPos"})),{addPage(e){const t=0===p.Z.pageNum?void 0:1===p.Z.pageNum?p.Z.getPage(0):p.Z.getPage(e+(0===e?1:-1));p.Z.addPageToPos(p.Z.newPage(t?{width:t.width,height:t.height,physicalWidth:t.physicalWidth,physicalHeight:t.physicalHeight,backgroundColor:t.backgroundColor,isEnableBleed:t.isEnableBleed,bleeds:t.bleeds,physicalBleeds:t.physicalBleeds,unit:t.unit}:{}),e),cn.Z.record()}})});const Tb=(0,oe.Z)(zb,[["render",nb],["__scopeId","data-v-6e6dbecb"],["__file","PanelPage.vue"]]);var Lb=Tb;const Eb={class:"panel-photo"},Db={key:0,class:"text-white text-left"},Ob={key:0,class:"text-center"};function Mb(e,t,n,r,i,o){const s=(0,P.up)("search-bar"),a=(0,P.up)("svg-icon"),l=(0,P.up)("image-gallery");return(0,P.wg)(),(0,P.iD)("div",Eb,[(0,P.Wm)(s,{class:"mb-15",style:(0,k.j5)(e.searchBarStyle()),placeholder:e.$t("NN0092",{target:e.$tc("NN0002",1)}),clear:"",defaultKeyword:e.keyword,onSearch:e.handleSearch},null,8,["style","placeholder","defaultKeyword","onSearch"]),!e.keyword||e.pending||e.searchResult.length?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",Db,(0,k.zw)(e.$t("NN0393",{keyword:e.keyword,target:e.$tc("NN0002",1)})),1)),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.categoryListArray,(t=>(0,P.wy)(((0,P.wg)(),(0,P.j4)(l,{ref_for:!0,ref:t.key,key:t.key,images:t.content,onLoadMore:e.handleLoadMore,vendor:"unsplash",onScrollPassive:n=>e.handleScrollTop(n,t.key)},{pending:(0,P.w5)((()=>[e.pending?((0,P.wg)(),(0,P.iD)("div",Ob,[(0,P.Wm)(a,{iconName:"loading",iconColor:"white",iconWidth:"20px"})])):(0,P.kq)("",!0)])),_:2},1032,["images","onLoadMore","onScrollPassive"])),[[Z.F8,t.show]]))),128))])}var Ab=Object.defineProperty,$b=Object.defineProperties,Fb=Object.getOwnPropertyDescriptors,jb=Object.getOwnPropertySymbols,Bb=Object.prototype.hasOwnProperty,Rb=Object.prototype.propertyIsEnumerable,Hb=(e,t,n)=>t in e?Ab(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ub=(e,t)=>{for(var n in t||(t={}))Bb.call(t,n)&&Hb(e,n,t[n]);if(jb)for(var n of jb(t))Rb.call(t,n)&&Hb(e,n,t[n]);return e},Wb=(e,t)=>$b(e,Fb(t)),Vb=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),Gb=(0,P.aZ)({name:"PanelPhoto",emits:[],components:{SearchBar:gy.Z,ImageGallery:rf},data(){return{scrollTop:{mainContent:0,searchResult:0}}},computed:Wb(Ub({},(0,ze.rn)("unsplash",["content","searchResult","keyword","pending"])),{categoryListArray(){return[{content:this.searchResult,show:this.keyword,key:"searchResult"},{content:this.content,show:!this.keyword,key:"mainContent"}]}}),mounted(){l.Z.panelInit("photo",this.handleSearch,(()=>Vb(this,null,(function*(){}))),this.init)},activated(){this.$nextTick((()=>{const e=this.$refs.mainContent[0],t=this.$refs.searchResult[0];e.$el.scrollTop=this.scrollTop.mainContent,t.$el.scrollTop=this.scrollTop.searchResult}))},watch:{keyword(e){e||this.$nextTick((()=>{const e=this.$refs.mainContent[0];e.$el.scrollTop=this.scrollTop.mainContent}))}},methods:Wb(Ub({},(0,ze.nv)("unsplash",["init","getPhotos","getMorePhotos","resetSearch"])),{handleSearch(e){return Vb(this,null,(function*(){this.resetSearch(),e&&(yield this.getPhotos({keyword:e}))}))},handleLoadMore(){!this.pending&&this.getMorePhotos()},handleScrollTop(e,t){this.scrollTop[t]=e.target.scrollTop},searchBarStyle(){return this.pending?{"pointer-events":"none"}:{"pointer-events":"unset"}}})});const qb=(0,oe.Z)(Gb,[["render",Mb],["__scopeId","data-v-0fd8f505"],["__file","PanelPhoto.vue"]]);var Kb=qb;const Yb={class:"panel-template",ref:"panel"},Xb={key:0,class:"panel-template__prompt body-2"},Qb={class:"panel-template__search"},Jb={key:0,class:"panel-template__wrap"},ev={key:2},tv={key:3,class:"pb-10"},nv={key:0,class:"panel-template__header"},rv={class:"panel-template__items"},iv={key:0,class:"text-center"},ov={key:1};function sv(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("panel-group-template"),l=(0,P.up)("nubtn"),c=(0,P.up)("search-bar"),d=(0,P.up)("popup-theme"),u=(0,P.up)("category-list-rows"),g=(0,P.up)("url"),p=(0,P.up)("category-list");return(0,P.wg)(),(0,P.iD)("div",Yb,[e.showPrompt&&!e.currentGroup?((0,P.wg)(),(0,P.iD)("div",Xb,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0247")),1),(0,P.Wm)(s,{class:"pl-5 pointer",iconColor:"gray-2",iconName:"close",iconWidth:"24px",onClick:e.handleClosePrompt},null,8,["onClick"])])):(0,P.kq)("",!0),e.currentGroup?((0,P.wg)(),(0,P.j4)(a,{key:1,showId:e.showAdminTool,groupItem:e.currentGroup,onClose:t[0]||(t[0]=t=>e.currentGroup=null)},null,8,["showId","groupItem"])):(0,P.kq)("",!0),(0,P._)("div",null,[(0,P._)("div",Qb,[(0,P.Wm)(c,{class:"mb-15",placeholder:e.$t("NN0092",{target:e.$tc("NN0001",1)}),clear:"",defaultKeyword:e.keywordLabel,onSearch:e.handleSearch},{default:(0,P.w5)((()=>[(0,P.Wm)(l,{theme:"icon",icon:"sliders",active:!e.allThemesChecked,onClick:t[1]||(t[1]=t=>e.onAdvancedClicked()),hint:e.$t("NN0795")},null,8,["active","hint"])])),_:1},8,["placeholder","defaultKeyword","onSearch"]),e.showTheme?((0,P.wg)(),(0,P.j4)(d,{key:0,class:"panel-template__theme",style:(0,k.j5)(e.themeStyle()),preSelected:e.theme.split(","),onChange:e.handleTheme,onClose:t[2]||(t[2]=t=>e.showTheme=!1)},null,8,["style","preSelected","onChange"])):(0,P.kq)("",!0)]),e.showTheme?((0,P.wg)(),(0,P.iD)("div",Jb)):(0,P.kq)("",!0)]),e.theme&&e.emptyResultMessage?((0,P.wg)(),(0,P.iD)("div",ev,(0,k.zw)(e.emptyResultMessage),1)):(0,P.kq)("",!0),e.showAdminTool&&e.keyword&&!e.pending&&!e.emptyResultMessage?((0,P.wg)(),(0,P.iD)("div",tv,[(0,P._)("span",null,(0,k.zw)(e.sum)+" "+(0,k.zw)(1===e.sum?"item":"items")+" in total (not work for category search)",1)])):(0,P.kq)("",!0),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.categoryListArray,(t=>(0,P.wy)(((0,P.wg)(),(0,P.j4)(p,{ref_for:!0,ref:t.key,key:t.key,list:t.content,onLoadMore:e.handleLoadMore,onScrollPassive:n=>e.handleScrollTop(n,t.key)},{"category-list-rows":(0,P.w5)((({list:t,title:n})=>[(0,P.Wm)(u,{list:t,title:n,onAction:e.handleCategorySearch},{preview:(0,P.w5)((({item:t})=>[((0,P.wg)(),(0,P.j4)((0,P.LL)(t.content_ids&&t.content_ids.length>1?"category-group-template-item":"category-template-item"),{class:"panel-template__item",showId:e.showAdminTool,item:t,onClickGroupItem:e.handleShowGroup},null,40,["showId","item","onClickGroupItem"]))])),_:2},1032,["list","title","onAction"])])),"category-template-item":(0,P.w5)((({list:t,title:n})=>[n?((0,P.wg)(),(0,P.iD)("div",nv,(0,k.zw)(n),1)):(0,P.kq)("",!0),(0,P._)("div",rv,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(t,(t=>((0,P.wg)(),(0,P.j4)((0,P.LL)(t.content_ids&&t.content_ids.length>1?"category-group-template-item":"category-template-item"),{class:"panel-template__item",showId:e.showAdminTool,item:t,key:t.group_id,onClickGroupItem:e.handleShowGroup},null,40,["showId","item","onClickGroupItem"])))),128))])])),after:(0,P.w5)((()=>[!e.theme||e.pending?((0,P.wg)(),(0,P.iD)("div",iv,[(0,P.Wm)(s,{iconName:"loading",iconColor:"white",iconWidth:"20px"})])):(0,P.kq)("",!0),e.keyword&&e.theme&&!e.pending&&e.resultGroupCounter<=10?((0,P.wg)(),(0,P.iD)("div",ov,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0796",{type:e.$tc("NN0001",3)})),1),(0,P.Wm)(l,{class:"mt-30",size:"mid-center"},{default:(0,P.w5)((()=>[(0,P.Wm)(g,{url:e.$t("NN0791"),newTab:!0},{default:(0,P.w5)((()=>[(0,P._)("span",null,(0,k.zw)(e.$t("NN0790",{type:e.$tc("NN0001",3)})),1)])),_:1},8,["url"])])),_:1})])):(0,P.kq)("",!0)])),_:2},1032,["list","onLoadMore","onScrollPassive"])),[[Z.F8,t.show]]))),128))],512)}var av=n(72625);const lv=["src"],cv=["src"],dv={class:"category-template-item__index"};function uv(e,t,n,r,i,o){const s=(0,P.up)("image-carousel"),a=(0,P.up)("pro-item");return(0,P.wg)(),(0,P.iD)("div",{class:"category-template-item",style:(0,k.j5)(e.itemStyle),onClick:t[4]||(t[4]=(...t)=>e.handleClickGroup&&e.handleClickGroup(...t))},[(0,P._)("div",{class:"relative pointer",onMouseover:t[1]||(t[1]=()=>e.handleCarouse()),onMouseleave:t[2]||(t[2]=t=>e.stopCarouse())},[e.showCarousel?((0,P.wg)(),(0,P.j4)(s,{key:0,imgs:e.groupImages,onChange:e.handleCarouselIdx},{default:(0,P.w5)((({url:t})=>[(0,P._)("img",{class:"category-template-item__img",src:t,style:(0,k.j5)(e.previewStyle)},null,12,lv)])),_:1},8,["imgs","onChange"])):((0,P.wg)(),(0,P.iD)("img",{key:1,class:"category-template-item__img pointer",src:e.fallbackSrc||e.previewImage,style:(0,k.j5)(e.previewStyle),onError:t[0]||(t[0]=(...t)=>e.handleNotFound&&e.handleNotFound(...t))},null,44,cv)),(0,P._)("span",dv,(0,k.zw)(e.carouselIdx+1)+"/"+(0,k.zw)(e.item.content_ids.length),1),e.item.plan?((0,P.wg)(),(0,P.j4)(a,{key:2})):(0,P.kq)("",!0)],32),e.showId?((0,P.wg)(),(0,P.iD)("div",{key:0,class:"category-template-item__id",onClick:t[3]||(t[3]=(0,Z.iM)(((...t)=>e.copyId&&e.copyId(...t)),["self","stop"]))},(0,k.zw)(e.item.id),1)):(0,P.kq)("",!0)],4)}var gv=n(83608),pv=(0,P.aZ)({emits:["clickGroupItem"],components:{ImageCarousel:gv.Z,ProItem:uo.Z},props:{item:{type:Object,required:!0},showId:{type:Boolean,required:!0}},data(){return{showCarousel:!1,carouselIdx:0,fallbackSrc:"",isHover:!1,waitTimer:0}},mounted(){const e=new Image;e.src=this.groupImages[0]},computed:{groupImages(){return this.item.content_ids.map((e=>`https://template.vivipic.com/template/${e.id}/prev_4x?ver=${e.ver}`))},previewImage(){var e;const{match_cover:t,ver:n,id:r}=this.item;return`https://template.vivipic.com/template/${null!=(e=t.id)?e:r}/prev_4x?ver=${n}`},previewStyle(){const{width:e,height:t}=this.item.preview||{width:l.Z.getListRowItemSize(),height:l.Z.getListRowItemSize()};return{width:`${e}px`,height:`${t}px`}},itemStyle(){const{width:e}=this.item.preview||{width:l.Z.getListRowItemSize()};return{width:`${e}px`}}},methods:{handleNotFound(e){this.fallbackSrc=n(75230)},copyId(){l.Z.copyText(this.item.id).then((()=>{(0,sr.h4)({group:"copy",text:`${this.item.id} 已複製`})}))},handleCarouselIdx(e){this.carouselIdx=e},handleClickGroup(){this.$emit("clickGroupItem",this.item)},handleCarouse(){this.isHover=!0,this.waitTimer=window.setInterval((()=>{this.isHover&&(this.showCarousel=!0)}),100)},stopCarouse(){this.isHover=!1,this.showCarousel=!1,window.clearInterval(this.waitTimer)}}});const hv=(0,oe.Z)(pv,[["render",uv],["__scopeId","data-v-06e564e0"],["__file","CategoryGroupTemplateItem.vue"]]);var mv=hv;const yv=["src"];function fv(e,t,n,r,i,o){const s=(0,P.up)("pro-item");return(0,P.wg)(),(0,P.iD)("div",{class:"category-template-item",style:(0,k.j5)(e.itemStyle)},[(0,P._)("div",{class:"relative pointer",draggable:"true",onClick:t[1]||(t[1]=(...t)=>e.addTemplate&&e.addTemplate(...t)),onDragstart:t[2]||(t[2]=t=>e.dragStart(t))},[(0,P._)("img",{class:"category-template-item__img",ref:"img",src:e.src||e.fallbackSrc||`https://template.vivipic.com/template/${e.item.id}/prev_2x?ver=${e.item.ver}`,style:(0,k.j5)(e.previewStyle),onError:t[0]||(t[0]=(...t)=>e.handleNotFound&&e.handleNotFound(...t))},null,44,yv),e.item.plan?((0,P.wg)(),(0,P.j4)(s,{key:0})):(0,P.kq)("",!0)],32),e.showId?((0,P.wg)(),(0,P.iD)("div",{key:0,class:"category-template-item__id",onClick:t[3]||(t[3]=(...t)=>e.copyId&&e.copyId(...t))},(0,k.zw)(e.item.id),1)):(0,P.kq)("",!0)],4)}var bv=Object.defineProperty,vv=Object.defineProperties,wv=Object.getOwnPropertyDescriptors,Nv=Object.getOwnPropertySymbols,Sv=Object.prototype.hasOwnProperty,xv=Object.prototype.propertyIsEnumerable,Pv=(e,t,n)=>t in e?bv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Iv=(e,t)=>{for(var n in t||(t={}))Sv.call(t,n)&&Pv(e,n,t[n]);if(Nv)for(var n of Nv(t))xv.call(t,n)&&Pv(e,n,t[n]);return e},_v=(e,t)=>vv(e,wv(t)),kv=(0,P.aZ)({emits:[],components:{ProItem:uo.Z},props:{src:{type:String},item:{type:Object,required:!0},showId:{type:Boolean,required:!0},groupItem:{type:Object}},data(){return{fallbackSrc:"",dragUtils:new _f.Z}},computed:_v(Iv({},(0,ze.Se)({useMobileEditor:"getUseMobileEditor"})),{designGroupType(){return this.$store.state.groupType},isDetailPage(){var e;return 1===this.designGroupType||1===(null==(e=this.groupItem)?void 0:e.group_type)},previewStyle(){const{width:e,height:t}=this.item.preview||{width:l.Z.getListRowItemSize(),height:l.Z.getListRowItemSize()};return{width:`${e}px`,height:`${t}px`}},itemStyle(){const{width:e}=this.item.preview||{width:l.Z.getListRowItemSize()};return{width:`${e}px`}}}),methods:{handleNotFound(e){this.fallbackSrc=n(75230)},dragStart(e){if(this.groupItem&&!gs.Z.checkProGroupTemplate(this.groupItem,this.item))return;if(!this.groupItem&&!gs.Z.checkProTemplate(this.item))return;const t=this.$refs.img,n=s.ZP.getLayerType(this.item.type);this.dragUtils.itemDragStart(e,n||"",Iv({},this.groupItem?Object.assign(this.groupItem,{groupChildId:this.item.id}):this.item),t.src,{aspectRatio:t.naturalWidth/t.naturalHeight})},addTemplate(){if(this.isDetailPage&&this.useMobileEditor)return void ei.Z.setModalInfo(`${this.$t("NN0808")}`,[],{msg:`${this.$t("NN0358")}`,class:"btn-blue-mid",action:()=>!1});if(this.groupItem&&!gs.Z.checkProGroupTemplate(this.groupItem,this.item))return;if(!this.groupItem&&!gs.Z.checkProTemplate(this.item))return;const{match_cover:e={}}=this.item;let{height:t,width:n,unit:r}=this.item;void 0!==n&&void 0!==t&&void 0!==r||(n=this.item.match_cover.width,t=this.item.match_cover.height,r=this.item.match_cover.unit);const i=p.Z.currFocusPageSize,o=i.physicalWidth===n&&i.physicalHeight===t&&i.unit===r,a=this.groupItem?e=>{s.ZP.addGroupTemplate(this.groupItem,this.item.id,e).then((()=>{this.$isTouchDevice()&&(ke.Z.handleContentScaleRatio(g.ZP.pageIndex),this.$store.commit("SET_pageScaleRatio",100))}))}:e=>{s.ZP.addAsset(this.item,e).then((()=>{this.$isTouchDevice()&&(ke.Z.handleContentScaleRatio(g.ZP.pageIndex),this.$store.commit("SET_pageScaleRatio",100))})),l.Z.fbq("track","AddToWishlist",{content_ids:[this.item.id]})};if(this.isDetailPage){const{width:r=1e3}=i,o=r/(e.width||n),s={width:r,height:(e.height||t)*o};return a(s)}if(o)a();else{let e="120px";"tw"===this.$i18n.locale?e="120px":"us"===this.$i18n.locale?e="160px":"jp"===this.$i18n.locale&&(e="180px"),ei.Z.setModalInfo(this.$t("NN0695"),[`${this.$t("NN0209",{tsize:`${n}x${t} ${r}`,psize:`${(0,h.round)(i.physicalWidth,or.cB)}x${(0,h.round)(i.physicalHeight,or.cB)} ${i.unit}`})}`],{msg:`${this.$t("NN0021")}`,class:"btn-light-mid",style:{border:"1px solid #4EABE6"},action:()=>{a(i)}},{msg:`${this.$t("NN0208")}`,action:a})}},copyId(){l.Z.copyText(this.item.id).then((()=>{(0,sr.h4)({group:"copy",text:`${this.item.id} 已複製`})}))}}});const Zv=(0,oe.Z)(kv,[["render",fv],["__scopeId","data-v-0ad19f2c"],["__file","CategoryTemplateItem.vue"]]);var Cv=Zv;const zv={class:"mb-30 relative"};function Tv(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("category-template-item");return(0,P.wg)(),(0,P.iD)("div",{class:"panel-group-template py-20 px-10 flex flex-column",style:(0,k.j5)(e.panelStyle)},[(0,P._)("div",zv,[(0,P.Wm)(s,{class:"panel-group-template__close pointer",iconName:"chevron-left",iconColor:"white",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),(0,P._)("button",{class:"panel-group-template__apply lead-2",onClick:t[1]||(t[1]=(...t)=>e.handleApplyGroupTemplate&&e.handleApplyGroupTemplate(...t))},(0,k.zw)(e.$t("NN0392",{num:e.count})),1),e.showAdminTool?((0,P.wg)(),(0,P.j4)(s,{key:0,class:"panel-group-template__delete pointer",iconName:"trash",iconColor:"white",onClick:e.handleDeleteGroupTemplate},null,8,["onClick"])):(0,P.kq)("",!0)]),(0,P._)("div",{class:"panel-group-template__list",style:(0,k.j5)(e.listStyle)},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.contents,((t,n)=>((0,P.wg)(),(0,P.j4)(a,{class:"panel-group-template__item",showId:e.showId,item:t,groupItem:e.groupItem,key:`${t.id}${n}`},null,8,["showId","item","groupItem"])))),128))],4)],4)}var Lv=Object.defineProperty,Ev=Object.defineProperties,Dv=Object.getOwnPropertyDescriptors,Ov=Object.getOwnPropertySymbols,Mv=Object.prototype.hasOwnProperty,Av=Object.prototype.propertyIsEnumerable,$v=(e,t,n)=>t in e?Lv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fv=(e,t)=>{for(var n in t||(t={}))Mv.call(t,n)&&$v(e,n,t[n]);if(Ov)for(var n of Ov(t))Av.call(t,n)&&$v(e,n,t[n]);return e},jv=(e,t)=>Ev(e,Dv(t)),Bv=(0,P.aZ)({components:{CategoryTemplateItem:Cv},props:{showId:{type:Boolean,required:!0},groupItem:{type:Object,required:!0}},emits:["close"],computed:jv(Fv({},(0,ze.Se)({token:"user/getToken",showAdminTool:"user/showAdminTool"})),{count(){return this.groupItem.content_ids?this.groupItem.content_ids.length:0},contents(){const{content_ids:e}=this.groupItem;return e?e.map((e=>jv(Fv({},e),{type:6}))):[]},isDetailPage(){return 1===this.groupItem.group_type},panelStyle(){return this.$isTouchDevice()?{padding:"20px 15px"}:{}},listStyle(){return this.$isTouchDevice()?{gridTemplateColumns:`repeat(${window.innerWidth>=600?3:2}, 1fr)`}:{}}}),methods:{handleApplyGroupTemplate(){gs.Z.checkProGroupTemplate(this.groupItem,this.groupItem.content_ids[0])&&(this.isDetailPage&&this.$isTouchDevice()?ei.Z.setModalInfo(`${this.$t("NN0808")}`,[],{msg:`${this.$t("NN0358")}`,class:"btn-blue-mid",action:()=>!1}):s.ZP.addGroupTemplate(this.groupItem).then((()=>{ke.Z.setMobileAllPageMode(!0)})))},handleDeleteGroupTemplate(){ei.Z.setModalInfo(this.isDetailPage?"確認刪除詳情頁模板？":"確認刪除群組模板？",[],{msg:"",action:()=>{this.$emit("close"),this.$store.dispatch("user/groupDesign",{token:this.token,update:1,list:"",group_id:this.groupItem.group_id,ecomm:this.isDetailPage?1:0})}})}}});const Rv=(0,oe.Z)(Bv,[["render",Tv],["__scopeId","data-v-22e49404"],["__file","PanelGroupTemplate.vue"]]);var Hv=Rv;const Uv={class:"popup-theme text-left"},Wv={class:"popup-theme__recommend"},Vv={class:"popup-theme-items"},Gv={class:"caption-LG body-2 mb-5"},qv={class:"popup-theme-buttons"};function Kv(e,t,n,r,i,o){const s=(0,P.up)("nubtn"),a=(0,P.up)("checkbox"),l=(0,P.Q2)("click-outside");return(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",Uv,[(0,P._)("div",Wv,[(0,P.Wm)(s,{size:"mid-full",onClick:e.handleRecommend},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0322")),1)])),_:1},8,["onClick"])]),(0,P._)("div",Vv,[(0,P._)("div",Gv,(0,k.zw)(e.$t("NN0321")),1),(0,P.Wm)(a,{class:"popup-theme-items__checkbox body-3 pl-5",modelValue:e.all,"onUpdate:modelValue":t[0]||(t[0]=t=>e.all=t)},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0324")),1)])),_:1},8,["modelValue"]),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.themes,(t=>((0,P.wg)(),(0,P.j4)(a,{class:"popup-theme-items__checkbox body-3 pl-5",key:t.id,modelValue:e.selected[t.id],"onUpdate:modelValue":n=>e.selected[t.id]=n},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(t.title),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),128))]),(0,P._)("div",qv,[(0,P.Wm)(s,{theme:"secondary",size:"sm-full",onClick:e.handleCancel},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0203")),1)])),_:1},8,["onClick"]),(0,P.Wm)(s,{size:"sm-full",disabled:e.isConfirmDisabled,onClick:e.handleSubmit},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$tc("NN0164",1)),1)])),_:1},8,["disabled","onClick"])])])),[[l,e.vcoConfig]])}var Yv=n(15924),Xv=n(4821),Qv=Object.defineProperty,Jv=Object.defineProperties,ew=Object.getOwnPropertyDescriptors,tw=Object.getOwnPropertySymbols,nw=Object.prototype.hasOwnProperty,rw=Object.prototype.propertyIsEnumerable,iw=(e,t,n)=>t in e?Qv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ow=(e,t)=>{for(var n in t||(t={}))nw.call(t,n)&&iw(e,n,t[n]);if(tw)for(var n of tw(t))rw.call(t,n)&&iw(e,n,t[n]);return e},sw=(e,t)=>Jv(e,ew(t)),aw=(0,P.aZ)({components:{Checkbox:Yv.Z},directives:{clickOutside:Ce().directive},props:{preSelected:{type:Array,default:()=>[]}},data(){return{vcoConfig:{handler:()=>{this.$emit("close")},middleware:e=>!e.target.matches(".panel-template .search-bar .nubtn, .panel-template .search-bar .nubtn *")},selected:{}}},created(){this.initSelected(this.preSelected)},computed:sw(ow({},(0,ze.Se)({themes:"getEditThemes"})),{isConfirmDisabled(){return!Object.values(this.selected).some(Boolean)},all:{get:function(){return Object.values(this.selected).every(Boolean)},set:function(e){this.selected=(0,h.mapValues)(this.selected,(()=>e))}}}),methods:{initSelected(e){const{themes:t}=this;this.selected=t.reduce(((t,n)=>(t[n.id]=e.includes(`${n.id}`),t)),{})},handleSubmit(){this.$emit("change",this.selected)},handleCancel(){this.$emit("close")},handleRecommend(){const e=p.Z.currFocusPageSize,t=Xv.Z.getThemesBySize(e.width,e.height);this.initSelected(t.map((e=>`${e.id}`)))}}});const lw=(0,oe.Z)(aw,[["render",Kv],["__scopeId","data-v-4cb6f18e"],["__file","PopupTheme.vue"]]);var cw=lw,dw=Object.defineProperty,uw=Object.defineProperties,gw=Object.getOwnPropertyDescriptors,pw=Object.getOwnPropertySymbols,hw=Object.prototype.hasOwnProperty,mw=Object.prototype.propertyIsEnumerable,yw=(e,t,n)=>t in e?dw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fw=(e,t)=>{for(var n in t||(t={}))hw.call(t,n)&&yw(e,n,t[n]);if(pw)for(var n of pw(t))mw.call(t,n)&&yw(e,n,t[n]);return e},bw=(e,t)=>uw(e,gw(t)),vw=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),ww=(0,P.aZ)({name:"PanelTemplate",emits:[],components:{SearchBar:gy.Z,CategoryList:Ym.Z,CategoryListRows:dy,CategoryTemplateItem:Cv,PopupTheme:cw,CategoryGroupTemplateItem:mv,PanelGroupTemplate:Hv,Url:uy.Z},data(){return{showPrompt:!1,showTheme:!1,currentGroup:null,scrollTop:{mainContent:0,searchResult:0}}},mounted(){const e=new URLSearchParams(window.location.search),t=e.get("group_id");t&&av.Z.getList({type:"group",groupId:t,cache:!0}).then((e=>{const{content:n}=e.data.data;this.currentGroup={group_type:0,group_id:t,type:6,content_ids:n[0].list,id:n[0].list[0].id,ver:0};const r=Object.assign({},this.$route.query);delete r.group_id,this.$router.replace({query:r})})),Xv.Z.refreshTemplateState().then((()=>{l.Z.panelInit("template",this.handleSearch,this.handleCategorySearch,this.getRecAndCate)}))},computed:bw(fw(fw(fw(fw({},(0,ze.rn)("templates",{categories:"categories",rawContent:"content",rawSearchResult:"searchResult",pending:"pending",keyword:"keyword",theme:"theme",sum:"sum"})),(0,ze.rn)("user",["userId"])),(0,ze.Se)({editorThemes:"getEditThemes"})),(0,ze.Se)({showAdminTool:"user/showAdminTool"})),{keywordLabel(){return this.keyword?this.keyword.replace("tag::",""):this.keyword},itemHeight(){return l.Z.getListRowItemSize()+(this.showAdminTool?34:10)},listCategories(){const{categories:e,itemHeight:t}=this;return e.map(((e,n)=>({size:t+46,id:`rows_${n}_${e.list.map((e=>e.id)).join("_")}`,type:"category-list-rows",list:e.list,title:e.title})))},listResult(){return this.processListResult(this.rawContent.list,!1)},searchResult(){const e=this.processListResult(this.rawSearchResult.list,!0);return 0!==e.length&&Object.assign(e[e.length-1],{sentinel:!0}),e},mainContent(){const e=l.Z.deepCopy(this.listCategories.concat(this.listResult));return 0!==e.length&&Object.assign(e[e.length-1],{sentinel:!0}),e},categoryListArray(){return[{content:this.searchResult,show:this.keyword,key:"searchResult"},{content:this.mainContent,show:!this.keyword,key:"mainContent"}]},resultGroupCounter(){var e;return(null==(e=this.rawSearchResult.list)?void 0:e.length)||0},emptyResultMessage(){const{keyword:e,pending:t}=this;return t||!e||this.searchResult.length>0?"":e?`${this.$t("NN0393",{keyword:this.keywordLabel,target:this.$tc("NN0001",1)})}`:`${this.$t("NN0394",{target:this.$tc("NN0001",1)})}`},currPageThemeIds(){const e=Xv.Z.getFocusPageSize();return Xv.Z.getThemesBySize(e.width,e.height).map((e=>e.id))},allThemesChecked(){const e=m().sortBy(this.editorThemes.map((e=>e.id))).join(",");return e===this.theme}}),activated(){this.$nextTick((()=>{const e=this.$refs.mainContent[0],t=this.$refs.searchResult[0];e.$el.scrollTop=this.scrollTop.mainContent,t.$el.scrollTop=this.scrollTop.searchResult}))},watch:{currPageThemeIds(e=[]){const{theme:t,userId:n}=this;if(t&&!sessionStorage[`${n}_theme_prompt`]){const n=t.split(","),r=e.some((e=>n.includes(`${e}`)));this.showPrompt=!r}else this.showPrompt=!1},keyword(e){e||this.$nextTick((()=>{const e=this.$refs.mainContent[0];e.$el.scrollTop=this.scrollTop.mainContent}))}},methods:bw(fw(fw({},(0,ze.nv)("templates",["getRecAndCate","getContent","getTagContent","getMoreContent","resetSearch","resetContent","getSum"])),(0,ze.OI)("templates",{_setTemplateState:"SET_STATE"})),{handleSearch(e){return vw(this,null,(function*(){this.resetSearch(),e&&(yield this.getTagContent({keyword:e}),this.showAdminTool&&this.getSum({keyword:e}))}))},handleCategorySearch(e,t=""){return vw(this,null,(function*(){this.resetSearch(),e&&(yield this.getContent({keyword:e,locale:t}))}))},handleLoadMore(){this.getMoreContent()},handleShowGroup(e){this.currentGroup=e},handleTheme(e){return vw(this,null,(function*(){const t=Object.entries(e).reduce(((e,[t,n])=>(n&&e.push(t),e)),[]).join(","),n=this.keyword;this.showTheme=!1,this.showPrompt=!1,this._setTemplateState({theme:t}),this.resetContent(),n.startsWith("tag::")?yield this.handleSearch(n):n&&(yield this.handleCategorySearch(n)),this.getRecAndCate({reset:!1})}))},handleClosePrompt(){const{userId:e}=this;this.showPrompt=!1,sessionStorage[`${e}_theme_prompt`]="hidden"},handleScrollTop(e,t){this.scrollTop[t]=e.target.scrollTop},onAdvancedClicked(){this.showTheme=!this.showTheme,this.showPrompt&&this.handleClosePrompt()},isSubsetOf(e,t){return new Set([...e,...t]).size===e.length},themeStyle(){const e=this.$isTouchDevice()?60:80;return{maxHeight:this.$refs.panel.clientHeight-e+"px"}},processListResult(e=[],t){const{theme:n}=this;let r=null;r=this.isSubsetOf(["3","7","13"],n.split(","))?new Jy.Z(this.$isTouchDevice()?window.innerWidth-30:300,200,10):new Jy.Z(this.$isTouchDevice()?window.innerWidth-30:300,140,10);const i=this.showAdminTool?24:0,o=r.generate(e.map((e=>bw(fw({},e),{width:e.match_cover.width,height:e.match_cover.height})))).map(((e,n)=>{const r=t||n?"":`${this.$t("NN0083")}`,o=i+e[0].preview.height;return{id:`result_${e.map((e=>e.id)).join("_")}`,type:"category-template-item",list:e,title:r,size:r?o+56:o+10}}));return o}})});const Nw=(0,oe.Z)(ww,[["render",sv],["__scopeId","data-v-17e53271"],["__file","PanelTemplate.vue"]]);var Sw=Nw;const xw={class:"panel-text"},Pw={key:0},Iw={key:0,class:"panel-text__brand-header relative"},_w=["onDragstart"],kw=["onDragstart"],Zw={key:0,class:"text-center"},Cw={key:1};function zw(e,t,n,r,i,o){const s=(0,P.up)("search-bar"),a=(0,P.up)("brand-selector"),l=(0,P.up)("svg-icon"),c=(0,P.up)("btn"),d=(0,P.up)("category-text-item"),u=(0,P.up)("category-list-rows"),g=(0,P.up)("url"),p=(0,P.up)("nubtn"),h=(0,P.up)("category-list");return(0,P.wg)(),(0,P.iD)("div",xw,[(0,P.Wm)(s,{class:"mb-15",placeholder:e.$t("NN0092",{target:e.$tc("NN0005",1)}),clear:"",defaultKeyword:e.keywordLabel,onSearch:e.handleSearch},null,8,["placeholder","defaultKeyword","onSearch"]),e.emptyResultMessage?((0,P.wg)(),(0,P.iD)("div",Pw,[(0,P._)("span",null,(0,k.zw)(e.emptyResultMessage),1)])):(0,P.kq)("",!0),e.keyword?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)(P.HY,{key:1},[e.isBrandkitAvailable?((0,P.wg)(),(0,P.iD)("div",Iw,[(0,P.Wm)(a,{theme:"panel",defaultOption:!0}),(0,P._)("div",{class:"panel-text__brand-settings pointer",onClick:t[0]||(t[0]=(...t)=>e.handleOpenSettings&&e.handleOpenSettings(...t))},[(0,P.Wm)(l,{iconName:"settings",iconColor:"white",iconWidth:"24px"})])])):(0,P.kq)("",!0),!e.isBrandkitAvailable||e.isDefaultSelected?((0,P.wg)(!0),(0,P.iD)(P.HY,{key:1},(0,P.Ko)(e.listDefaultText,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"panel-text__text-button-wrapper",key:t.type,draggable:"true",onDragstart:n=>e.standardTextDrag(n,t)},[(0,P.Wm)(c,{class:"panel-text__text-button mb-10",type:`text-${t.type.toLowerCase()}`,fontFamily:e.localeFont(),onClick:n=>e.handleAddText(t)},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(t.text),1)])),_:2},1032,["type","fontFamily","onClick"])],40,_w)))),128)):((0,P.wg)(!0),(0,P.iD)(P.HY,{key:2},(0,P.Ko)(e.listDefaultText,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"panel-text__text-button-wrapper",key:t.type,draggable:"true",onDragstart:n=>e.standardTextDrag(n,t)},[(0,P.Wm)(c,{class:"panel-text__text-button mb-10",style:(0,k.j5)(e.getFontStyles(t.type.toLowerCase())),type:`text-${t.type.toLowerCase()}`,onClick:n=>e.handleAddText(t)},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(t.text),1)])),_:2},1032,["style","type","onClick"])],40,kw)))),128))],64)),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.categoryListArray,(t=>(0,P.wy)(((0,P.wg)(),(0,P.j4)(h,{ref_for:!0,ref:t.key,key:t.key,list:t.content,onLoadMore:e.handleLoadMore,onScrollPassive:n=>e.handleScrollTop(n,t.key)},{"category-list-rows":(0,P.w5)((({list:t,title:n})=>[e.keyword?(0,P.kq)("",!0):((0,P.wg)(),(0,P.j4)(u,{key:0,list:t,title:n,onAction:e.handleCategorySearch},{preview:(0,P.w5)((({item:e})=>[(0,P.Wm)(d,{item:e},null,8,["item"])])),_:2},1032,["list","title","onAction"]))])),"category-text-item":(0,P.w5)((({list:t,title:n})=>[(0,P._)("div",{class:"panel-text__items",style:(0,k.j5)({gridTemplateColumns:`repeat(${e.amountInRow}, 1fr)`})},[n?((0,P.wg)(),(0,P.iD)("div",{key:0,class:"panel-text__header",style:(0,k.j5)({gridColumn:`1 / ${e.amountInRow+1}`})},(0,k.zw)(n),5)):(0,P.kq)("",!0),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(t,(e=>((0,P.wg)(),(0,P.j4)(d,{key:e.id,item:e},null,8,["item"])))),128))],4)])),after:(0,P.w5)((()=>{var t;return[e.pending?((0,P.wg)(),(0,P.iD)("div",Zw,[(0,P.Wm)(l,{iconName:"loading",iconColor:"white",iconWidth:"20px"})])):(0,P.kq)("",!0),e.keyword&&!e.pending&&(null==(t=e.rawSearchResult.list)?void 0:t.length)<=10?((0,P.wg)(),(0,P.iD)("div",Cw,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0796",{type:e.$tc("NN0792",1)})),1),(0,P.Wm)(p,{class:"mt-30",size:"mid-center"},{default:(0,P.w5)((()=>[(0,P.Wm)(g,{url:e.$t("NN0791"),newTab:!0},{default:(0,P.w5)((()=>[(0,P._)("span",null,(0,k.zw)(e.$t("NN0790",{type:e.$tc("NN0792",1)})),1)])),_:1},8,["url"])])),_:1})])):(0,P.kq)("",!0)]})),_:2},1032,["list","onLoadMore","onScrollPassive"])),[[Z.F8,t.show]]))),128))])}const Tw=["src"];function Lw(e,t,n,r,i,o){const s=(0,P.up)("pro-item");return(0,P.wg)(),(0,P.iD)("div",{class:"panel-text__item",draggable:"true",onDragstart:t[1]||(t[1]=t=>e.dragStart(t)),onClick:t[2]||(t[2]=(...t)=>e.addText&&e.addText(...t)),onContextmenu:t[3]||(t[3]=(0,Z.iM)((t=>e.openUpdateDesignPopup()),["right","prevent"]))},[(0,P._)("img",{class:"panel-text__img",ref:"img",src:e.src||e.fallbackSrc||`https://template.vivipic.com/text/${e.item.id}/prev?ver=${e.item.ver}`,style:(0,k.j5)(e.itemStyle),onError:t[0]||(t[0]=(...t)=>e.handleNotFound&&e.handleNotFound(...t))},null,44,Tw),e.item.plan?((0,P.wg)(),(0,P.j4)(s,{key:0})):(0,P.kq)("",!0)],32)}var Ew=Object.defineProperty,Dw=Object.defineProperties,Ow=Object.getOwnPropertyDescriptors,Mw=Object.getOwnPropertySymbols,Aw=Object.prototype.hasOwnProperty,$w=Object.prototype.propertyIsEnumerable,Fw=(e,t,n)=>t in e?Ew(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jw=(e,t)=>{for(var n in t||(t={}))Aw.call(t,n)&&Fw(e,n,t[n]);if(Mw)for(var n of Mw(t))$w.call(t,n)&&Fw(e,n,t[n]);return e},Bw=(e,t)=>Dw(e,Ow(t)),Rw=(0,P.aZ)({emits:[],components:{ProItem:uo.Z},props:{src:{type:String},item:{type:Object,required:!0}},data(){return{fallbackSrc:"",dragUtils:new _f.Z}},computed:Bw(jw({},(0,ze.Se)("user",{isAdmin:"isAdmin"})),{itemStyle(){const{width:e}=this.item.preview||{width:this.$isTouchDevice()?(window.innerWidth-54)/3-10:135};return{objectFit:"contain",width:`${e}px`}}}),methods:{handleNotFound(e){this.fallbackSrc=n(75230)},dragStart(e){if(!gs.Z.checkPro(this.item,"pro-text"))return;const t=this.$refs.img;this.dragUtils.itemDragStart(e,"group",jw({},this.item),t.src,{aspectRatio:t.naturalWidth/t.naturalHeight})},addText(){gs.Z.checkPro(this.item,"pro-text")&&s.ZP.addAsset(this.item).then((()=>{bp.Z.updateTextPropsState()}))},openUpdateDesignPopup(){if(this.isAdmin){const e=!0,t=this.item.id,n="text";i.Z.commit("user/SET_STATE",{isUpdateDesignOpen:e,updateDesignId:t,updateDesignType:n})}}}});const Hw=(0,oe.Z)(Rw,[["render",Lw],["__scopeId","data-v-70bfa28e"],["__file","CategoryTextItem.vue"]]);var Uw=Hw,Ww=Object.defineProperty,Vw=Object.defineProperties,Gw=Object.getOwnPropertyDescriptors,qw=Object.getOwnPropertySymbols,Kw=Object.prototype.hasOwnProperty,Yw=Object.prototype.propertyIsEnumerable,Xw=(e,t,n)=>t in e?Ww(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qw=(e,t)=>{for(var n in t||(t={}))Kw.call(t,n)&&Xw(e,n,t[n]);if(qw)for(var n of qw(t))Yw.call(t,n)&&Xw(e,n,t[n]);return e},Jw=(e,t)=>Vw(e,Gw(t)),eN=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),tN=(0,P.aZ)({name:"PanelText",emits:[],components:{SearchBar:gy.Z,CategoryList:Ym.Z,CategoryListRows:dy,CategoryTextItem:Uw,BrandSelector:xe.Z,Url:uy.Z},data(){return{scrollTop:{mainContent:0,searchResult:0},dragUtils:new _f.Z}},computed:Jw(Qw(Qw({},(0,ze.Se)({scaleRatio:"getPageScaleRatio",isDefaultSelected:"brandkit/getIsDefaultSelected",currentBrand:"brandkit/getCurrentBrand"})),(0,ze.rn)("textStock",{categories:"categories",rawContent:"content",rawSearchResult:"searchResult",pending:"pending",keyword:"keyword"})),{keywordLabel(){return this.keyword?this.keyword.replace("tag::",""):this.keyword},isBrandkitAvailable(){return a.Z.isBrandkitAvailable},textStyleSetting(){return this.currentBrand.textStyleSetting},extractFonts(){return this.isBrandkitAvailable?a.Z.extractFonts(this.textStyleSetting):[]},listDefaultText(){return[{type:"Heading",text:this.$t("NN0011")},{type:"Subheading",text:this.$t("NN0012")},{type:"Body",text:this.$t("NN0013")}]},listCategories(){const{categories:e}=this;return e.map(((e,t)=>({size:140,id:`rows_${t}_${e.list.map((e=>e.id)).join("_")}`,type:"category-list-rows",list:e.list,title:e.title})))},amountInRow(){return this.$isTouchDevice()?3:2},listResult(){return this.processListResult(this.rawContent.list,!1)},searchResult(){const e=this.processListResult(this.rawSearchResult.list,!0);return 0!==e.length&&Object.assign(e[e.length-1],{sentinel:!0}),e},mainContent(){const e=this.listCategories.concat(this.listResult);return 0!==e.length&&Object.assign(e[e.length-1],{sentinel:!0}),e},categoryListArray(){return[{content:this.searchResult,show:this.keyword,key:"searchResult"},{content:this.mainContent,show:!this.keyword,key:"mainContent"}]},emptyResultMessage(){const{keyword:e,pending:t}=this;return t||!e||this.searchResult.length>0?"":`${this.$t("NN0393",{keyword:this.keywordLabel,target:this.$tc("NN0005",1)})}`}}),mounted(){return eN(this,null,(function*(){l.Z.panelInit("text",this.handleSearch,this.handleCategorySearch,(e=>eN(this,[e],(function*({reset:e}){this.getRecAndCate({reset:e}),this.getContent(),Tp.Z.loadDefaultFonts(this.extractFonts)}))))}))},activated(){this.$nextTick((()=>{const e=this.$refs.mainContent[0],t=this.$refs.searchResult[0];e.$el.scrollTop=this.scrollTop.mainContent,t.$el.scrollTop=this.scrollTop.searchResult}))},watch:{currentBrand(){Tp.Z.loadDefaultFonts(this.extractFonts)},keyword(e){e||this.$nextTick((()=>{const e=this.$refs.mainContent[0];e.$el.scrollTop=this.scrollTop.mainContent}))}},methods:Jw(Qw(Qw({},(0,ze.nv)("textStock",["getContent","getTagContent","getRecAndCate","getMoreContent","resetSearch"])),(0,ze.OI)({setSettingsOpen:"brandkit/SET_isSettingsOpen"})),{getTextStyle(e){return this.textStyleSetting[`${e}Style`]},getFontStyles(e){const t=this.getTextStyle(e),n=ri.Z.textStylesRaw({weight:t.bold?"bold":"normal",style:t.italic?"italic":"normal",decoration:t.underline?"underline":"none",size:t.size});return delete n["font-size"],n.fontFamily=t.isDefault?a.Z.getDefaultFontId(this.$i18n.locale):t.fontId,n},handleSearch(e){return eN(this,null,(function*(){this.resetSearch(),e&&(yield this.getTagContent({keyword:e}))}))},handleCategorySearch(e,t=""){return eN(this,null,(function*(){this.resetSearch(),e&&(yield this.getContent({keyword:e,locale:t}))}))},handleLoadMore(){this.getMoreContent()},handleAddText(e){return eN(this,null,(function*(){let t="";switch(e.type){case"Heading":t="title";break;case"Subheading":t="subtitle";break;case"Body":t="body";break}av.Z.addDesign(`add_${t}`,"text"),yield s.ZP.addStandardText(e.type.toLowerCase(),e.text,this.$i18n.locale,void 0,void 0,this.getSpanStyles(e.type.toLowerCase()))}))},handleOpenSettings(){this.setSettingsOpen(!0)},localeFont(){return s.ZP.getFontMap()[this.$i18n.locale]},handleScrollTop(e,t){this.scrollTop[t]=e.target.scrollTop},standardTextDrag(e,t){const{type:n,text:r}=t;this.dragUtils.textItemDragStart(e,"standardText",{textType:n.toLowerCase(),text:r,locale:this.$i18n.locale,spanStyles:this.getSpanStyles(n.toLowerCase())},{offsetX:20,offsetY:30})},getSpanStyles(e){var t,n,r;let i={};if(this.isBrandkitAvailable&&!this.isDefaultSelected){const o=this.getTextStyle(e);i={weight:o.bold?"bold":"normal",style:o.italic?"italic":"normal",decoration:o.underline?"underline":"none",size:o.size},o.isDefault||Object.assign(i,{font:o.fontId,type:null!=(t=o.fontType)?t:"public",userId:null!=(n=o.fontUserId)?n:"",assetId:null!=(r=o.fontAssetId)?r:""})}return i},processListResult(e=[],t){const{amountInRow:n}=this;return new Array(Math.ceil(e.length/n)).fill("").map(((r,i)=>{const o=e.slice(i*n,(i+1)*n),s=t||i?"":`${this.$t("NN0340")}`;return{id:`result_${o.map((e=>e.id)).join("_")}`,type:"category-text-item",list:o,title:s,size:s?136:90}}))}})});const nN=(0,oe.Z)(tN,[["render",zw],["__scopeId","data-v-07721ff8"],["__file","PanelText.vue"]]);var rN=nN,iN=Object.defineProperty,oN=Object.getOwnPropertySymbols,sN=Object.prototype.hasOwnProperty,aN=Object.prototype.propertyIsEnumerable,lN=(e,t,n)=>t in e?iN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cN=(e,t)=>{for(var n in t||(t={}))sN.call(t,n)&&lN(e,n,t[n]);if(oN)for(var n of oN(t))aN.call(t,n)&&lN(e,n,t[n]);return e},dN=(0,P.aZ)({emits:[],components:{PanelTemplate:Sw,PanelPhoto:Kb,PanelObject:Xf,PanelBackground:Iy,PanelText:rN,PanelFile:yf,PanelBrand:Uy,PanelPage:Lb,Overlay:zo},props:{isSidebarPanelOpen:{type:Boolean,required:!0},currPage:{type:Object,required:!0}},data(){return{panelComponents:["panel-template","panel-photo","panel-object","panel-background","panel-text","panel-file","overlay","panel-brand","panel-page","panel-group","panel-text-setting","panel-color-picker","panel-page-setting","panel-photo-setting"]}},computed:cN(cN({},(0,ze.rn)({isMobile:"isMobile"})),(0,ze.Se)({currPanel:"getCurrSidebarPanelType",isShowPagePreview:"page/getIsShowPagePreview",showPagePanel:"page/getShowPagePanel",bgRemoveMode:"bgRemove/getInBgRemoveMode"})),methods:{panelStyles(){return{width:this.isMobile?"calc(100vw - 75px)":this.showPagePanel?"200px":"320px"}}}});const uN=(0,oe.Z)(dN,[["render",Tm],["__scopeId","data-v-40babe74"],["__file","SidebarPanel.vue"]]);var gN=uN;const pN={class:"tour-guide"},hN={class:"tour-guide__container",ref:"tour"},mN={class:"tour-guide__step"},yN={class:"tour-guide__title"},fN={class:"tour-guide__actions mt-15"},bN={class:"tour-guide__arrow",ref:"arrow"};function vN(e,t,n,r,i,o){const s=(0,P.up)("nubtn");return(0,P.wg)(),(0,P.iD)("div",pN,[(0,P._)("div",hN,[(0,P._)("div",mN,(0,k.zw)(e.currentStep+1)+" / "+(0,k.zw)(e.steps.length),1),(0,P._)("div",yN,(0,k.zw)(e.stepInfo.title),1),(0,P._)("div",null,(0,k.zw)(e.stepInfo.content),1),(0,P._)("div",fN,[e.stepInfo.skip?((0,P.wg)(),(0,P.j4)(s,{key:0,theme:"ghost_outline",onClick:e.handleSkip},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.stepInfo.skip.text),1)])),_:1},8,["onClick"])):(0,P.kq)("",!0),e.stepInfo.next?((0,P.wg)(),(0,P.j4)(s,{key:1,theme:"ghost",onClick:e.handleNextStep},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.stepInfo.next.text),1)])),_:1},8,["onClick"])):(0,P.kq)("",!0),e.stepInfo.finish?((0,P.wg)(),(0,P.j4)(s,{key:2,theme:"ghost",onClick:e.handleFinish},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.stepInfo.finish.text),1)])),_:1},8,["onClick"])):(0,P.kq)("",!0)])],512),(0,P._)("div",bN,null,512)])}var wN=n(72869);const NN="guest_view_guide";class SN{get isLogin(){return i.Z.getters["user/isLogin"]}get token(){return i.Z.getters["user/getToken"]}get userViewGuide(){return i.Z.getters["user/getViewGuide"]}skipGuide(){this.updateUserViewGuideStatus(1),this.setLocalUserViewGuideStatus(1)}finishGuide(){this.updateUserViewGuideStatus(2),this.setLocalUserViewGuideStatus(2)}updateUserViewGuideStatus(e){i.Z.commit("user/SET_STATE",{viewGuide:e}),this.isLogin&&wN.Z.updateUserViewGuide(this.token,e)}setLocalUserViewGuideStatus(e){this.isLogin&&localStorage[NN]&&localStorage.removeItem(NN),!this.isLogin&&(localStorage[NN]=e)}}const xN=new SN;var PN=xN,IN=(0,P.aZ)({emits:[],props:{startIndex:{type:Number,default:0}},data(){return{currentStep:this.startIndex,targetPosition:{x:0,y:0,width:0,height:0},steps:[{target:".panel-template",placement:"right-start",title:this.$t("NN0263"),offset:{x:10,y:100},content:this.$t("NN0264"),skip:{text:this.$t("NN0271"),action:()=>PN.skipGuide()},next:{text:this.$t("NN0272")}},{target:".nav-container .nav-item:nth-child(3)",placement:"right-end",title:this.$t("NN0265"),content:this.$t("NN0266"),skip:{text:this.$t("NN0271"),action:()=>PN.skipGuide()},next:{text:this.$t("NN0272")}},{target:".nav-container .nav-item:nth-last-child(2)",placement:"right-end",title:this.$t("NN0267"),content:this.$t("NN0268"),skip:{text:this.$t("NN0271"),action:()=>PN.skipGuide()},next:{text:this.$t("NN0272")}},{target:".download-btn",placement:"bottom-end",title:this.$t("NN0269"),offset:{y:15},content:this.$t("NN0270"),finish:{text:this.$t("NN0273"),action:()=>PN.finishGuide()}}]}},computed:{stepInfo(){return this.steps[this.currentStep]}},mounted(){this.handleTargetPosition()},watch:{currentStep(){this.handleTargetPosition()}},methods:{handleTargetPosition(){const{stepInfo:e}=this,t=document.querySelector(e.target),{x:n,y:r,width:i,height:o}=(null==t?void 0:t.getBoundingClientRect())||{};this.targetPosition={x:n,y:r,width:i,height:o},this.$nextTick((()=>{this.handleTourPosition()}))},handleTourPosition(){const e=this.$refs.tour,t=this.$refs.arrow,{placement:n,offset:r={}}=this.stepInfo,{x:i=0,y:o=0,width:s=0,height:a=0}=this.targetPosition,[l,c]=n.split("-");let[d,u]=[0,0],g=i+(r.x||0),p=o+(r.y||0);["bottom","top"].includes(l)&&("end"===c&&(g-=e.offsetWidth-s),!c&&(g+=(e.offsetWidth-s)/2),"bottom"===l?p+=a:p-=e.offsetHeight,u=i+s/2-(r.x||0),d="bottom"===l?o+a+(r.y||0):o-(r.y||0)),["right","left"].includes(l)&&("end"===c&&(p-=e.offsetHeight-a),!c&&(p+=(e.offsetHeight-a)/2),"right"===l?g+=s:g-=e.offsetWidth,d=o+a/2-(r.y||0),u="right"===l?i+s+(r.x||0):i-(r.x||0)),e.style.transform=`translate(${g}px, ${p}px)`,t.style.transform=`translate(${u}px, ${d}px)`,this.$el.classList.remove("active"),setTimeout((()=>{this.$el.classList.add("active")}),100)},handleSkip(){const{skip:e}=this.stepInfo;if("function"===typeof e.action)return e.action()},handleNextStep(){const{next:e}=this.stepInfo;if("function"===typeof e.action)return e.action();this.currentStep+=1},handleFinish(){const{finish:e}=this.stepInfo;if("function"===typeof e.action)return e.action()}}});const _N=(0,oe.Z)(IN,[["render",vN],["__scopeId","data-v-286808e0"],["__file","TourGuide.vue"]]);var kN=_N;const ZN=e=>((0,P.dD)("data-v-11c0005e"),e=e(),(0,P.Cn)(),e),CN={class:"popup-brand-settings"},zN=ZN((()=>(0,P._)("div",{class:"dim-background under"},null,-1))),TN={class:"popup-brand-settings__window"},LN={class:"popup-brand-settings__wrapper relative"},EN={key:0,class:"brand-kit__main"},DN={key:1,class:"brand-kit__main"},ON={class:"brand-kit__header"},MN={class:"brand-kit__selector"},AN={class:"brand-kit__tab"},$N={key:3,class:"dim-background"},FN={class:"delete-confirm"},jN={class:"delete-confirm__title"},BN={class:"delete-confirm__description"},RN={class:"delete-confirm__item-name"},HN={class:"delete-confirm__description"},UN={key:0,class:"delete-confirm__description"},WN={key:1,class:"delete-confirm__description"},VN={class:"delete-confirm__buttons"};function GN(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("brand-selector"),l=(0,P.up)("brand-kit-add-btn"),c=(0,P.up)("brand-kit-tab"),d=(0,P.up)("drag-hover"),u=(0,P.up)("i18n-t"),g=(0,P.up)("nubtn"),p=(0,P.Q2)("click-outside");return(0,P.wg)(),(0,P.iD)("div",CN,[zN,(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",TN,[(0,P._)("div",LN,[(0,P._)("div",{class:"brand-kit relative",onDragover:t[0]||(t[0]=(0,Z.iM)(((...t)=>e.handleDragEnter&&e.handleDragEnter(...t)),["prevent","stop"])),onDragenter:t[1]||(t[1]=(0,Z.iM)(((...t)=>e.handleDragEnter&&e.handleDragEnter(...t)),["prevent","stop"])),onDragleave:t[2]||(t[2]=(0,Z.iM)(((...t)=>e.handleDragLeave&&e.handleDragLeave(...t)),["prevent","stop"])),onDrop:t[3]||(t[3]=(0,Z.iM)(((...t)=>e.handleDrop&&e.handleDrop(...t)),["prevent","stop"]))},[e.isBrandsLoading?((0,P.wg)(),(0,P.iD)("div",EN,[(0,P.Wm)(s,{iconName:"loading",iconWidth:"50px",iconColor:"gray-3"})])):((0,P.wg)(),(0,P.iD)("div",DN,[(0,P._)("div",ON,[(0,P._)("div",MN,[(0,P.Wm)(a,{onDeleteItem:e.handleDeleteItem},null,8,["onDeleteItem"])]),(0,P.Wm)(l,{text:`${e.$t("NN0396")}`,onClick:e.addNewBrand},null,8,["text","onClick"])]),(0,P._)("div",AN,[(0,P.Wm)(c,{onDeleteItem:e.handleDeleteItem},null,8,["onDeleteItem"])])])),e.isDraggedOver?((0,P.wg)(),(0,P.j4)(d,{key:2,text:e.dragHoverText},null,8,["text"])):(0,P.kq)("",!0),e.isMessageShowing?((0,P.wg)(),(0,P.iD)("div",$N,[(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",FN,[(0,P._)("div",jN,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0433")),1)]),(0,P._)("div",BN,[(0,P.Wm)(u,{keypath:"NN0434",tag:"span"},{itemName:(0,P.w5)((()=>[(0,P._)("span",RN,(0,k.zw)(e.deleteBuffer?e.getDisplayedName(e.deleteBuffer):""),1)])),_:1})]),(0,P._)("div",HN,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0435")),1)]),e.deleteBuffer&&"palette"===e.deleteBuffer.type?((0,P.wg)(),(0,P.iD)("div",UN,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0436")),1)])):((0,P.wg)(),(0,P.iD)("div",WN,[(0,P._)("span",null,(0,k.zw)(e.$t("NN0459")),1)])),(0,P._)("div",VN,[(0,P.Wm)(g,{theme:"secondary",onClick:e.handleClearDeletion},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0203")),1)])),_:1},8,["onClick"]),(0,P.Wm)(g,{theme:"danger",onClick:e.handleConfirmDeletion},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0200")),1)])),_:1},8,["onClick"])])])),[[p,e.handleClearDeletion]])])):(0,P.kq)("",!0)],32)])])),[[p,e.vcoConfig()]])])}var qN=n(86876),KN=n(13017),YN=Object.defineProperty,XN=Object.defineProperties,QN=Object.getOwnPropertyDescriptors,JN=Object.getOwnPropertySymbols,eS=Object.prototype.hasOwnProperty,tS=Object.prototype.propertyIsEnumerable,nS=(e,t,n)=>t in e?YN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rS=(e,t)=>{for(var n in t||(t={}))eS.call(t,n)&&nS(e,n,t[n]);if(JN)for(var n of JN(t))tS.call(t,n)&&nS(e,n,t[n]);return e},iS=(e,t)=>XN(e,QN(t)),oS=(0,P.aZ)({emits:[],name:"PopupBrandSettings",components:{BrandSelector:xe.Z,BrandKitTab:Ly.Z,BrandKitAddBtn:qN.Z,DragHover:KN.Z},mounted(){a.Z.fetchFonts(this.fetchFonts)},directives:{clickOutside:Ce().directive},data(){return{isDraggedOver:!1,isMessageShowing:!1,deleteBuffer:void 0,uploadHint:{logo:{hintText:r.Z.global.t("NN0413"),elementType:r.Z.global.t("NN0416"),fileTypes:["jpg","png"].join("、")},text:{hintText:r.Z.global.t("NN0415"),elementType:r.Z.global.t("NN0417"),fileTypes:["otf","otc","ttf","ttc"].join("、")}}}},computed:iS(rS({},(0,ze.Se)("brandkit",{currentBrandId:"getCurrentBrandId",isBrandsLoading:"getIsBrandsLoading",selectedTab:"getSelectedTab",brands:"getBrands"})),{dragHoverText(){var e;return null!=(e=this.uploadHint[this.selectedTab])?e:{hintText:"",elementType:"",fileTypes:""}}}),methods:iS(rS(rS({},(0,ze.nv)("brandkit",{fetchBrands:"fetchBrands",fetchFonts:"fetchFonts"})),(0,ze.OI)("brandkit",{setIsSettingsOpen:"SET_isSettingsOpen"})),{vcoConfig(){return{middleware:e=>{var t;return"upload"!==(null==(t=e.target)?void 0:t.id)},handler:this.handleCloseSettings}},addNewBrand(){a.Z.addNewBrand()},isDragDropValid(){return Object.keys(this.uploadHint).includes(this.selectedTab)},getDisplayedName(e){return a.Z.getDisplayedName(e.type,e.content)},handleDragEnter(){this.isDragDropValid()&&(this.isDraggedOver=!0)},handleDragLeave(){this.isDraggedOver=!1},handleDrop(e){var t;if(this.isDraggedOver=!1,!this.isDragDropValid())return;const n=null==(t=e.dataTransfer)?void 0:t.files;if("text"===this.selectedTab){if(!n)return;Qe.Z.uploadAsset("font",n)}else if("logo"===this.selectedTab){if(!n)return;Qe.Z.uploadAsset("logo",n,{brandId:this.currentBrandId})}else console.log(n)},handleDeleteItem(e){this.deleteBuffer=e,this.isMessageShowing=!0},handleClearDeletion(){this.deleteBuffer=void 0,this.isMessageShowing=!1},handleConfirmDeletion(){if(this.deleteBuffer){switch(this.deleteBuffer.type){case"logo":a.Z.removeLogo(this.deleteBuffer.content);break;case"palette":a.Z.removePalette(this.deleteBuffer.content);break;case"brand":a.Z.removeBrand(this.deleteBuffer.content);break;case"font":a.Z.removeFont(this.deleteBuffer.content);break}this.handleClearDeletion()}},handleCloseSettings(){this.setIsSettingsOpen(!1)}})});const sS=(0,oe.Z)(oS,[["render",GN],["__scopeId","data-v-11c0005e"],["__file","PopupBrandSettings.vue"]]);var aS=sS;const lS=e=>((0,P.dD)("data-v-0ad22f90"),e=e(),(0,P.Cn)(),e),cS={class:"popup-updateDesign"},dS={class:"popup-updateDesign__wrapper"},uS={class:"popup-updateDesign__close"},gS={class:"popup-updateDesign__title"},pS={class:"popup-updateDesign__line mb-10",style:{background:"#eee"}},hS=lS((()=>(0,P._)("span",{class:"body-1"},"id",-1))),mS=["src"],yS={key:1,class:"popup-updateDesign__checkbox"},fS=lS((()=>(0,P._)("span",null,"灰背景",-1))),bS={key:2},vS={key:0,class:"popup-updateDesign__line"},wS=lS((()=>(0,P._)("span",{class:"body-1"},"語系",-1))),NS=["value"],SS=lS((()=>(0,P._)("div",{class:"popup-updateDesign__line"},"tags_tw",-1))),xS=lS((()=>(0,P._)("div",{class:"popup-updateDesign__line"},"tags_us",-1))),PS=lS((()=>(0,P._)("div",{class:"popup-updateDesign__line"},"tags_jp",-1))),IS=lS((()=>(0,P._)("div",{class:"popup-updateDesign__line"},"plan(0：預設一般 / 1：Pro)",-1)));function _S(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("property-bar"),l=(0,P.up)("btn"),c=(0,P.up)("spinner"),d=(0,P.Q2)("click-outside");return(0,P.wg)(),(0,P.iD)("div",cS,[(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",dS,[(0,P._)("div",uS,[(0,P.Wm)(s,{class:"pointer",iconName:"page-close",iconWidth:"15px",iconColor:"gray-0",onClick:e.handleCancel},null,8,["onClick"])]),(0,P._)("div",gS,(0,k.zw)(e.typeText)+"資訊",1),(0,P._)("div",pS,[hS,(0,P._)("span",{class:"pl-15 body-2",onClick:t[0]||(t[0]=t=>e.copyText(e.focusDesignId))},(0,k.zw)(e.focusDesignId),1)]),e.focusDesignId.length>0?((0,P.wg)(),(0,P.iD)("img",{key:0,class:"popup-updateDesign__image",style:(0,k.j5)(e.backgroundStyle()),src:`https://template.vivipic.com/${e.type}/${e.focusDesignId}/prev?ver=${e.imgRandQuery}`},null,12,mS)):(0,P.kq)("",!0),e.isBackgroundType?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",yS,[(0,P.wy)((0,P._)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=t=>e.isGrayBackground=t)},null,512),[[Z.e8,e.isGrayBackground]]),fS])),e.isGetObjectInfo?((0,P.wg)(),(0,P.iD)("div",bS,[e.isBackgroundType?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",vS,[wS,(0,P.wy)((0,P._)("select",{class:"popup-updateDesign__select","onUpdate:modelValue":t[2]||(t[2]=t=>e.objectInfo.locale=t)},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.localeOptions,(e=>((0,P.wg)(),(0,P.iD)("option",{key:e,value:e},(0,k.zw)(e),9,NS)))),128))],512),[[Z.bM,e.objectInfo.locale]])])),SS,(0,P._)("div",null,[(0,P.Wm)(a,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[3]||(t[3]=t=>e.objectInfo.tags_tw=t)},null,512),[[Z.nr,e.objectInfo.tags_tw]])])),_:1})]),xS,(0,P._)("div",null,[(0,P.Wm)(a,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[4]||(t[4]=t=>e.objectInfo.tags_us=t)},null,512),[[Z.nr,e.objectInfo.tags_us]])])),_:1})]),PS,(0,P._)("div",null,[(0,P.Wm)(a,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[5]||(t[5]=t=>e.objectInfo.tags_jp=t)},null,512),[[Z.nr,e.objectInfo.tags_jp]])])),_:1})]),IS,(0,P._)("div",null,[(0,P.Wm)(a,null,{default:(0,P.w5)((()=>[(0,P.wy)((0,P._)("input",{class:"body-2 text-gray-2",min:"0","onUpdate:modelValue":t[6]||(t[6]=t=>e.objectInfo.plan=t)},null,512),[[Z.nr,e.objectInfo.plan]])])),_:1})]),(0,P.Wm)(l,{class:"popup-updateDesign__button rounded my-5",type:"primary-sm",onClick:t[7]||(t[7]=t=>e.updateDataClicked())},{default:(0,P.w5)((()=>[(0,P.Uk)("更 新")])),_:1})])):(0,P.kq)("",!0)])),[[d,e.handleCancel]]),e.isLoading?((0,P.wg)(),(0,P.j4)(c,{key:0})):(0,P.kq)("",!0)])}var kS=Object.defineProperty,ZS=Object.defineProperties,CS=Object.getOwnPropertyDescriptors,zS=Object.getOwnPropertySymbols,TS=Object.prototype.hasOwnProperty,LS=Object.prototype.propertyIsEnumerable,ES=(e,t,n)=>t in e?kS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DS=(e,t)=>{for(var n in t||(t={}))TS.call(t,n)&&ES(e,n,t[n]);if(zS)for(var n of zS(t))LS.call(t,n)&&ES(e,n,t[n]);return e},OS=(e,t)=>ZS(e,CS(t)),MS=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),AS=(0,P.aZ)({emits:[],directives:{clickOutside:Ce().directive},data(){return{imgRandQuery:"",objectInfo:{key_id:"",edit_time:"",tags_tw:"",tags_us:"",tags_jp:"",locale:"",plan:""},isGrayBackground:!1,isLoading:!1,isGetObjectInfo:!0,localeOptions:["tw","us","jp"]}},computed:OS(DS({},(0,ze.Se)({token:"user/getToken",type:"user/getUpdateDesignType",focusDesignId:"user/getUpdateDesignId"})),{typeText(){let e="";switch(this.type){case"svg":e="元素";break;case"text":e="文字";break;case"background":e="背景";break}return e},isBackgroundType(){return"background"===this.type}}),mounted(){return MS(this,null,(function*(){if(this.imgRandQuery=l.Z.generateRandomString(5),this.focusDesignId.length>0){const e={},t=yield yc.Z.getDesignInfo(this.token,this.type,this.focusDesignId,"select",JSON.stringify(e));0===t.data.flag?(this.isGetObjectInfo=!0,this.objectInfo=t.data.data,this.objectInfo.edit_time=this.objectInfo.edit_time.replace(/T/," ").replace(/\..+/,"")):(0,sr.h4)({group:"copy",text:`找不到${this.typeText}資料`})}}))},methods:{updateDataClicked(){return MS(this,null,(function*(){if(!this.objectInfo.key_id)return void(0,sr.h4)({group:"copy",text:`請先取得${this.typeText}資料`});this.isLoading=!0;const e={locale:this.objectInfo.locale,tags_tw:this.objectInfo.tags_tw,tags_us:this.objectInfo.tags_us,tags_jp:this.objectInfo.tags_jp,plan:this.objectInfo.plan?this.objectInfo.plan:"0"},t=yield yc.Z.updateDesignInfo(this.token,this.type,this.objectInfo.key_id,"update",JSON.stringify(e));0===t.data.flag?((0,sr.h4)({group:"copy",text:`${this.typeText}資料更新成功`}),this.objectInfo=t.data.data,this.objectInfo.edit_time=this.objectInfo.edit_time.replace(/T/," ").replace(/\..+/,"")):(0,sr.h4)({group:"copy",text:"更新時發生錯誤"}),this.isLoading=!1}))},backgroundStyle(){return this.isGrayBackground?{background:"gray"}:{background:"unset"}},copyText(e){0!==e.length&&l.Z.copyText(e).then((()=>{(0,sr.h4)({group:"copy",text:`${e} 已複製`})}))},handleCancel(){const e=!1;i.Z.commit("user/SET_STATE",{isUpdateDesignOpen:e})}}});const $S=(0,oe.Z)(AS,[["render",_S],["__scopeId","data-v-0ad22f90"],["__file","PopupUpdateDesign.vue"]]);var FS=$S,jS=Object.defineProperty,BS=Object.defineProperties,RS=Object.getOwnPropertyDescriptors,HS=Object.getOwnPropertySymbols,US=Object.prototype.hasOwnProperty,WS=Object.prototype.propertyIsEnumerable,VS=(e,t,n)=>t in e?jS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GS=(e,t)=>{for(var n in t||(t={}))US.call(t,n)&&VS(e,n,t[n]);if(HS)for(var n of HS(t))WS.call(t,n)&&VS(e,n,t[n]);return e},qS=(e,t)=>BS(e,RS(t)),KS=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),YS=(0,P.aZ)({name:"DesktopEditor",components:{Sidebar:Cm,EditorHeader:dt,SidebarPanel:gN,EditorView:mi,ScaleRatioEditor:um,FunctionPanel:th,ColorSlips:Re,PagePreview:Kh,TourGuide:kN,PopupBrandSettings:aS,PopupUpdateDesign:FS,ComponentLog:ge},emits:["setIsLoading"],data(){return{isSidebarPanelOpen:!0,inputLocale:r.Z.global.locale,stkMode:/app=1/.test(window.location.href),componentLogs:[]}},props:{currPage:{type:Object,required:!0}},created(){this.inputLocale=this.$i18n.locale;const e=this;e.$eventBus.on("on-re-rendering",(e=>{this.componentLogs.length>=50&&this.componentLogs.shift(),this.componentLogs.push(e)}))},watch:{isShowPagePreview(){this.toggleSidebarPanel=this.isShowPagePreview},inputLocale(){return KS(this,null,(function*(){this.$emit("setIsLoading",!0);const e={};e.token=this.token,e.locale=this.inputLocale,yield i.Z.dispatch("user/updateUser",e).then((e=>{e.data.flag?this.networkError():(localStorage.setItem("locale",e.data.locale),this.$router.go(0))}),(()=>{this.networkError()}))}))}},computed:qS(GS(GS(GS(GS({},(0,ze.rn)("user",["adminMode","viewGuide"])),(0,ze.Se)({groupId:"getGroupId",currSelectedInfo:"getCurrSelectedInfo",isShowPagePreview:"page/getIsShowPagePreview",currPanel:"getCurrSidebarPanelType",groupType:"getGroupType",inBgRemoveMode:"bgRemove/getInBgRemoveMode",enableComponentLog:"getEnalbleComponentLog",showAllAdminTool:"user/showAllAdminTool"})),(0,ze.Se)("user",{token:"getToken",isUpdateDesignOpen:"getIsUpdateDesignOpen"})),(0,ze.Se)("brandkit",{isBrandSettingsOpen:"getIsSettingsOpen"})),{showColorSlips(){return ke.Z.showColorSlips},contentPanelStyles(){return this.showColorSlips?{"grid-template-rows":"1fr 1fr"}:{"grid-template-rows":"1fr"}},getAdminModeText(){return this.adminMode?"":"-disable"},templateText(){return this.groupId.length>0&&1===this.groupType?"詳情頁模板":this.groupId.length>0?"群組模板":"單頁模板"},stickyTopPos(){const e=Xe.Z.showRuler?`${Xe.Z.RULER_SIZE}px`:"0px";return{top:e}},showEditorGuide(){return 0===this.viewGuide},localeOptions(){return this.$i18n.availableLocales}}),mounted(){d.Z.setLog("Editor mounted"),this.clearBgRemoveState(),_e.ZP.on("closeColorPanel",(()=>{ke.Z.toggleColorSlips(!1)})),a.Z.isBrandkitAvailable&&a.Z.fetchBrands(this.fetchBrands)},methods:qS(GS(GS({},(0,ze.OI)({setCurrFunctionPanel:"SET_currFunctionPanelType",_setAdminMode:"user/SET_ADMIN_MODE",clearBgRemoveState:"bgRemove/CLEAR_bgRemoveState",setEnableComponentLog:"SET_enalbleComponentLog"})),(0,ze.nv)({fetchBrands:"brandkit/fetchBrands"})),{currEventColor(){return _e.ZP.globalSelectedColor.currEventColor},setAdminMode(){this._setAdminMode(!this.adminMode)},switchApp(){this.stkMode=!this.stkMode;const e=new URL(window.location.href);this.stkMode?e.searchParams.append("app","1"):e.searchParams.delete("app"),window.location.href=e.toString()},toggleSidebarPanel(e){this.isSidebarPanelOpen=e},copyText(e){l.Z.copyText(e),(0,sr.h4)({group:"copy",text:`${e} 已複製`})},networkError(){(0,sr.h4)({group:"error",text:`${r.Z.global.t("NN0351")}`}),this.$emit("setIsLoading",!1)}})});const XS=(0,oe.Z)(YS,[["render",j],["__scopeId","data-v-abd83cc0"],["__file","DesktopEditor.vue"]]);var QS=XS;const JS={class:"mobile-editor"},ex={class:"mobile-editor__top"};function tx(e,t,n,r,i,o){const s=(0,P.up)("header-tabs"),a=(0,P.up)("mobile-panel"),l=(0,P.up)("footer-tabs");return(0,P.wg)(),(0,P.iD)("div",JS,[(0,P._)("div",ex,[(0,P.Wm)(s,{onSwitchTab:e.switchTab,onShowAllPages:e.showAllPages,currTab:e.currActivePanel,inAllPagesMode:e.inAllPagesMode},null,8,["onSwitchTab","onShowAllPages","currTab","inAllPagesMode"]),(0,P._)("div",{class:"mobile-editor__content",style:(0,k.j5)(e.contentStyle),id:"mobile-editor__content",ref:"mobile-editor__content"},[((0,P.wg)(),(0,P.j4)(P.Ob,null,[((0,P.wg)(),(0,P.j4)((0,P.LL)(e.inAllPagesMode?"all-pages":"mobile-editor-view"),{currActivePanel:e.currActivePanel,isConfigPanelOpen:e.isConfigPanelOpen,inAllPagesMode:e.inAllPagesMode,showMobilePanel:e.showMobilePanelAfterTransitoin},null,8,["currActivePanel","isConfigPanelOpen","inAllPagesMode","showMobilePanel"]))],1024))],4),(0,P.Wm)(Z.uT,{name:"panel-up",onBeforeEnter:e.beforeEnter,onAfterLeave:e.afterLeave},{default:(0,P.w5)((()=>[(0,P.wy)((0,P.Wm)(a,{ref:"mobilePanel",currActivePanel:e.currActivePanel,currPage:e.currPage,onSwitchTab:e.switchTab,onPanelHeight:e.setPanelHeight,footerTabsRef:e.footerTabsRef},null,8,["currActivePanel","currPage","onSwitchTab","onPanelHeight","footerTabsRef"]),[[Z.F8,e.showMobilePanel]])])),_:1},8,["onBeforeEnter","onAfterLeave"])]),(0,P.Wm)(l,{class:"mobile-editor__bottom",onSwitchTab:e.switchTab,currTab:e.currActivePanel,inAllPagesMode:e.inAllPagesMode,onShowAllPages:e.showAllPages,ref:"footerTabs"},null,8,["onSwitchTab","currTab","inAllPagesMode","onShowAllPages"])])}const nx={class:"all-pages"};function rx(e,t,n,r,i,o){const s=(0,P.up)("page-preview-page-wrapper"),a=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",nx,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.pages,((t,n)=>((0,P.wg)(),(0,P.j4)(s,{class:"border-box",key:t.id,index:n,type:"full",config:t,showMoreBtn:!1,lazyLoadTarget:".mobile-editor__content",itemSize:e.itemSize},null,8,["index","config","lazyLoadTarget","itemSize"])))),128)),(0,P._)("div",{class:"all-pages--last pointer border-box",style:(0,k.j5)(e.btnStyle),onClick:t[0]||(t[0]=t=>e.addPage())},[(0,P._)("div",null,[(0,P.Wm)(a,{class:"pb-5",iconColor:"gray-2",iconName:"plus-origin",iconWidth:"25px"})])],4)])}var ix=n(60575),ox=Object.defineProperty,sx=Object.defineProperties,ax=Object.getOwnPropertyDescriptors,lx=Object.getOwnPropertySymbols,cx=Object.prototype.hasOwnProperty,dx=Object.prototype.propertyIsEnumerable,ux=(e,t,n)=>t in e?ox(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gx=(e,t)=>{for(var n in t||(t={}))cx.call(t,n)&&ux(e,n,t[n]);if(lx)for(var n of lx(t))dx.call(t,n)&&ux(e,n,t[n]);return e},px=(e,t)=>sx(e,ax(t)),hx=(0,P.aZ)({emits:[],data(){return{itemSize:0}},components:{PagePreviewPageWrapper:xh},computed:px(gx({},(0,ze.Se)({pages:"getPages",allPageMode:"mobileEditor/getMobileAllPageMode"})),{btnStyle(){return{width:`${this.itemSize}px`,height:`${this.itemSize}px`}}}),mounted(){this.itemSize=(document.body.clientWidth-32-64)/2-10,ix.u.batchNum=10},methods:px(gx({},(0,ze.OI)({_setCurrActivePageIndex:"SET_currActivePageIndex"})),{addPage(){const e=p.Z.pageNum>0?p.Z.getPages[p.Z.pageNum-1]:void 0;p.Z.addPageToPos(p.Z.newPage(e?{width:e.width,height:e.height,physicalWidth:e.physicalWidth,physicalHeight:e.physicalHeight,isEnableBleed:e.isEnableBleed,bleeds:e.bleeds,physicalBleeds:e.physicalBleeds,unit:e.unit}:{}),p.Z.pageNum),this._setCurrActivePageIndex(p.Z.pageNum-1),ke.Z.setCurrCardIndex(p.Z.pageNum-1),cn.Z.record()}})});const mx=(0,oe.Z)(hx,[["render",rx],["__scopeId","data-v-2dd14ba9"],["__file","AllPages.vue"]]);var yx=mx;const fx=["onClick"],bx={key:0,class:"footer-tabs__sub-tabs bg-gray-6"},vx=["onClick"];function wx(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("color-btn");return(0,P.wg)(),(0,P.iD)("div",{class:"footer-tabs",ref:"settingTabs",style:(0,k.j5)(e.rootStyles)},[(0,P._)("div",{class:"footer-tabs__content",style:(0,k.j5)(e.containerStyles)},[(0,P._)("div",{class:"footer-tabs__container bg-nav",style:(0,k.j5)(e.innerContainerStyles),ref:"container"},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.homeTabs,(t=>((0,P.wg)(),(0,P.iD)(P.HY,null,[t.hidden?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["footer-tabs__item",{"click-disabled":t.disabled||e.isLocked}]),key:t.icon,onClick:n=>e.handleTabAction(t)},[(0,P.Wm)(s,{class:"mb-5 click-disabled",iconName:t.icon,iconColor:e.homeTabColor(t),iconWidth:"22px",style:(0,k.j5)(e.textIconStyle)},null,8,["iconName","iconColor","style"]),(0,P._)("span",{class:(0,k.C_)(["body-3 no-wrap click-disabled",`text-${e.homeTabColor(t)}`])},(0,k.zw)(t.text),3)],10,fx))],64)))),256))],4),(0,P.Wm)(Z.uT,{name:"panel-up"},{default:(0,P.w5)((()=>[e.isSettingTabsOpen?((0,P.wg)(),(0,P.iD)("div",bx,[(0,P._)("div",{class:"footer-tabs__unfold",style:(0,k.j5)(e.innerContainerStyles),onClick:t[0]||(t[0]=t=>e.handleTabAction(e.mainMenu))},[(0,P.Wm)(s,{class:"click-disabled",iconName:e.mainMenu.icon,iconWidth:"26px",style:(0,k.j5)(e.textIconStyle)},null,8,["iconName","style"])],4),(0,P._)("div",{class:"footer-tabs__container",style:(0,k.j5)(e.innerContainerStyles),onScrollPassive:t[1]||(t[1]=(...t)=>e.updateContainerOverflow&&e.updateContainerOverflow(...t)),ref:"container"},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.settingTabs,(t=>((0,P.wg)(),(0,P.iD)(P.HY,null,[t.hidden?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["footer-tabs__item",{"click-disabled":t.disabled||e.isLocked||"remove-bg"!==t.icon&&e.inBgRemoveMode}]),key:t.icon,onClick:n=>e.handleTabAction(t)},["color"===t.icon?((0,P.wg)(),(0,P.j4)(a,{key:0,class:"mb-5 click-disabled",size:"22px",color:e.globalSelectedColor},null,8,["color"])):((0,P.wg)(),(0,P.j4)(s,{key:1,class:"mb-5 click-disabled",iconName:t.icon,iconColor:e.settingTabColor(t),iconWidth:"22px",style:(0,k.j5)(e.textIconStyle)},null,8,["iconName","iconColor","style"])),(0,P._)("span",{class:(0,k.C_)(["body-3 no-wrap click-disabled",`text-${e.settingTabColor(t)}`])},(0,k.zw)(t.text),3)],10,vx))],64)))),256))],36)])):(0,P.kq)("",!0)])),_:1})],4)],4)}var Nx=Object.defineProperty,Sx=Object.defineProperties,xx=Object.getOwnPropertyDescriptors,Px=Object.getOwnPropertySymbols,Ix=Object.prototype.hasOwnProperty,_x=Object.prototype.propertyIsEnumerable,kx=(e,t,n)=>t in e?Nx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zx=(e,t)=>{for(var n in t||(t={}))Ix.call(t,n)&&kx(e,n,t[n]);if(Px)for(var n of Px(t))_x.call(t,n)&&kx(e,n,t[n]);return e},Cx=(e,t)=>Sx(e,xx(t)),zx=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),Tx=(0,P.aZ)({components:{ColorBtn:Ie.Z},props:{currTab:{default:"none",type:String},inAllPagesMode:{type:Boolean,default:!1}},emits:["switchTab","showAllPages"],data(){const e={icon:"unfold"};return{mainMenu:e,isFontsPanelOpened:!1,disableTabScroll:!1,leftOverflow:!1,rightOverflow:!1,clickedTab:"",clickedTabTimer:-1,isSvgImage:!1}},computed:Cx(Zx(Zx({},(0,ze.rn)("mobileEditor",{mobilePanel:"currActivePanel"})),(0,ze.Se)({currSidebarPanel:"getCurrFunctionPanelType",currSelectedInfo:"getCurrSelectedInfo",currSubSelectedInfo:"getCurrSubSelectedInfo",currSelectedLayers:"getCurrSelectedLayers",isShowPagePreview:"page/getIsShowPagePreview",inBgRemoveMode:"bgRemove/getInBgRemoveMode",InBgRemoveFirstStep:"bgRemove/inFirstStep",InBgRemoveLastStep:"bgRemove/inLastStep",inBgSettingMode:"mobileEditor/getInBgSettingMode",isHandleShadow:"shadow/isHandling",inMultiSelectionMode:"mobileEditor/getInMultiSelectionMode",hasCopiedFormat:"getHasCopiedFormat",userInfo:"webView/getUserInfo",isAdmin:"user/isAdmin"})),{hasSubSelectedLayer(){return-1!==this.currSubSelectedInfo.index},isSettingTabsOpen(){return this.settingTabs.length>0||this.inBgRemoveMode},subLayerType(){return this.currSubSelectedInfo.type},subActiveLayerIndex(){return g.ZP.subLayerIdx},subActiveLayer(){if(-1!==this.subActiveLayerIndex)return g.ZP.getCurrLayer.layers[this.subActiveLayerIndex]},subActiveLayerType(){const e=g.ZP.getCurrLayer;return"group"===e.type&&-1!==this.subActiveLayerIndex?e.layers[this.subActiveLayerIndex].type:""},isCopyFormatDisabled(){if(1===this.selectedLayerNum){const e=this.currSelectedInfo.types,t=g.ZP.getCurrLayer;if(e.has("group")){if(-1!==this.subActiveLayerIndex){if(["text","image"].includes(this.subActiveLayerType))return this.isLocked;if("frame"===this.subActiveLayerType){const e=this.subActiveLayer;if(1===e.clips.length)return this.isLocked}}}else if(e.has("frame")){const e=t;if(1===e.clips.length)return this.isLocked;if(-1!==this.subActiveLayerIndex&&"image"===e.clips[this.subActiveLayerIndex].type)return this.isLocked}else if(e.has("text")||e.has("image"))return this.isLocked}return!0},backgroundImgControl(){var e,t;return null!=(t=null==(e=p.Z.currFocusPage.backgroundImage.config)?void 0:e.imgControl)&&t},backgroundLocked(){const{locked:e}=p.Z.currFocusPage.backgroundImage.config;return e},groupTab(){return{icon:this.isGroup?"ungroup":"group",text:this.isGroup?`${this.$t("NN0212")}`:`${this.$t("NN0029")}`,hidden:!this.isGroup&&1===this.selectedLayerNum}},homeTabs(){const e=l.Z.versionCheck({greaterThan:"1.05",version:S.Z.getUserInfoFromStore().appVer});return[{icon:"template",text:`${this.$tc("NN0001",2)}`,panelType:"template"},...e?[{icon:"cameraroll",text:`${this.$tc("STK0067",2)}`}]:[{icon:"photo",text:`${this.$tc("NN0002",2)}`,panelType:"photo"}],{icon:"objects",text:`${this.$tc("NN0003",2)}`,panelType:"object"},{icon:"bg",text:`${this.$tc("NN0004",2)}`,panelType:"background"},{icon:"text",text:`${this.$tc("NN0005",2)}`,panelType:"text"},{icon:"upload",text:`${this.$tc("NN0006",2)}`,panelType:"file"},...this.isAdmin?[{icon:"overlay",text:this.$t("NN0899"),panelType:"overlay-dark"}]:[],...e?[{icon:"photo",text:`${this.$t("STK0069")}`,panelType:"photo"}]:[],{icon:"add-page",text:`${this.$t("NN0139")}`},{icon:"trash",text:`${this.$t("NN0141")}`,hidden:p.Z.getPages.length<=1},{icon:"duplicate-page",text:`${this.$t("NN0140")}`},{icon:"paste",text:`${this.$t("NN0230")}`},...a.Z.isBrandkitAvailable?[{icon:"brand",text:`${this.$t("NN0497")}`,panelType:"brand"}]:[]]},photoInGroupTabs(){return[{icon:"replace",text:`${this.$t("NN0490")}`,panelType:"replace",hidden:this.isInFrame},{icon:"crop",text:`${this.$t("NN0036")}`,panelType:"crop"},{icon:"sliders",text:`${this.$t("NN0042")}`,panelType:"adjust"},{icon:"effect",text:`${this.$t("NN0429")}`,panelType:"photo-shadow",hidden:this.isInFrame,disabled:this.isHandleShadow&&"photo-shadow"!==this.mobilePanel},...this.genearlLayerTabs,{icon:"bg-separate",text:`${this.$t("NN0707")}`,hidden:this.isInFrame}]},photoTabs(){return[{icon:"replace",text:`${this.$t("NN0490")}`,panelType:"replace"},{icon:"crop",text:`${this.$t("NN0036")}`,panelType:"crop"},{icon:"sliders",text:`${this.$t("NN0042")}`,panelType:"adjust"},...this.isInFrame?[{icon:"set-as-frame",text:`${this.$t("NN0098")}`}]:[],{icon:"effect",text:`${this.$t("NN0429")}`,panelType:"photo-shadow",hidden:this.isInFrame,disabled:this.isHandleShadow&&"photo-shadow"!==this.mobilePanel},...this.isAdmin?[{icon:"overlay",text:this.$t("NN0899"),panelType:"overlay-light"}]:[],...this.genearlLayerTabs,{icon:"bg-separate",text:`${this.$t("NN0707")}`,hidden:this.isInFrame},...this.copyPasteTabs,...this.isInFrame?[]:[{icon:"set-as-frame",text:`${this.$t("NN0706")}`}],{icon:"brush",text:`${this.$t("NN0035")}`,panelType:"copy-style",hidden:this.isCopyFormatDisabled},...S.Z.inReviewMode?[]:[{icon:"remove-bg",text:`${this.$t("NN0043")}`,panelType:"remove-bg",hidden:this.isInFrame,disabled:this.isSvgImage}]]},frameTabs(){const e=g.ZP.getCurrLayer;if("frame"!==e.type)return[];const t=1===e.clips.length||e.clips.some((e=>e.active)),n=t?[{icon:"replace",text:`${this.$t("NN0490")}`,panelType:"replace"}]:[];return[...n,...1===e.clips.length?[{icon:"set-as-frame",text:`${this.$t("NN0098")}`}]:[],{icon:"color",text:`${this.$t("NN0495")}`,panelType:"color",hidden:"none"===this.globalSelectedColor,props:{currColorEvent:o.gQ.shape}},...this.genearlLayerTabs,...this.copyPasteTabs]},fontTabs(){return[{icon:"edit",text:`${this.$t("NN0504")}`,hidden:this.selectMultiple||this.isGroup&&!this.hasSubSelectedLayer},{icon:"font",text:l.Z.capitalize(`${this.$tc("NN0353",2)}`),panelType:"fonts"},{icon:"font-size",text:`${this.$t("NN0122")}`,panelType:"font-size"},{icon:"text-color-mobile",text:`${this.$t("NN0495")}`,panelType:"color",props:{currColorEvent:o.gQ.text}},{icon:"effect",text:`${this.$t("NN0491")}`,panelType:"text-effect"},{icon:"spacing",text:`${this.$t("NN0755")}`,panelType:"font-spacing"},{icon:"text-format",text:`${this.$t("NN0498")}`,panelType:"font-format"},{icon:"brush",text:`${this.$t("NN0035")}`,panelType:"copy-style",hidden:this.isCopyFormatDisabled}]},bgSettingTab(){const{hasBgImage:e}=u.Z;return[{icon:"transparency",text:`${this.$t("NN0030")}`,panelType:"opacity",disabled:this.backgroundLocked},{icon:"crop",text:`${this.$t("NN0036")}`,panelType:"crop",hidden:!e,disabled:this.backgroundLocked},...this.isAdmin?[{icon:"overlay",text:this.$t("NN0899"),panelType:"overlay-light",hidden:!e,disabled:this.backgroundLocked}]:[],{icon:"flip",text:`${this.$t("NN0038")}`,panelType:"flip",hidden:!e,disabled:this.backgroundLocked},{icon:"sliders",text:`${this.$t("NN0042")}`,panelType:"adjust",hidden:!e,disabled:this.backgroundLocked},{icon:"color",text:`${this.$t("NN0495")}`,panelType:"color",hidden:"none"===this.globalSelectedColor,props:{currColorEvent:o.gQ.background},disabled:this.backgroundLocked},{icon:"bg-separate",text:`${this.$t("NN0708")}`,hidden:!e,disabled:this.backgroundLocked}]},multiPhotoTabs(){return[...this.multiGeneralTabs,{icon:"sliders",text:`${this.$t("NN0042")}`,panelType:"adjust"}]},multiFontTabs(){return[...this.multiGeneralTabs,...this.fontTabs]},multiObjectTabs(){return[...this.multiGeneralTabs,{icon:"color",text:`${this.$t("NN0495")}`,panelType:"color",hidden:"none"===this.globalSelectedColor,props:{currColorEvent:o.gQ.shape}}]},objectTabs(){return[{icon:"color",text:`${this.$t("NN0495")}`,panelType:"color",hidden:"none"===this.globalSelectedColor,props:{currColorEvent:o.gQ.shape}},{icon:"sliders",text:`${this.$t("NN0042")}`,panelType:"object-adjust",hidden:!this.showShapeAdjust}]},pageTabs(){return[{icon:"add-page",text:`${this.$t("NN0139")}`},{icon:"duplicate-page",text:`${this.$t("NN0140")}`},{icon:"trash",text:`${this.$t("NN0141")}`,hidden:p.Z.getPages.length<=1}]},genearlLayerTabs(){return[{icon:"layers-alt",text:`${this.$t("NN0757")}`,panelType:"order"},{icon:"transparency",text:`${this.$t("NN0030")}`,panelType:"opacity"},this.groupTab,{icon:"position",text:`${this.$tc("NN0044",2)}`,panelType:"position"},{icon:"flip",text:`${this.$t("NN0038")}`,panelType:"flip"},{icon:"nudge",text:`${this.$t("NN0872")}`,panelType:"nudge"},{icon:"multiple-select",text:`${this.$t("NN0807")}`,panelType:"multiple-select"}]},multiGeneralTabs(){return[{icon:"layers-alt",text:`${this.$t("NN0031")}`,panelType:"order",hidden:this.hasSubSelectedLayer},{icon:"transparency",text:`${this.$t("NN0030")}`,panelType:"opacity"},this.groupTab,{icon:"position",text:`${this.$tc("NN0044",2)}`,panelType:"position"},{icon:"multiple-select",text:`${this.$t("NN0807")}`,panelType:"multiple-select"},...this.copyPasteTabs]},copyPasteTabs(){return[{icon:"copy",text:`${this.$t("NN0032")}`},{icon:"paste",text:`${this.$t("NN0230")}`}]},settingTabs(){return this.inAllPagesMode?this.pageTabs:this.isGroupOrTmp&&this.targetIs("image")&&(this.isWholeGroup||g.ZP.getCurrLayer.type===o.F5.tmp)?this.multiPhotoTabs:this.isGroupOrTmp&&this.targetIs("image")&&-1!==g.ZP.subLayerIdx?this.photoInGroupTabs:this.isGroupOrTmp&&this.targetIs("text")&&this.showObjectColorAndFontTabs?[...this.multiObjectTabs,...this.fontTabs]:this.isGroupOrTmp&&this.targetIs("text")?this.multiFontTabs:this.isGroupOrTmp&&this.targetIs("shape")&&this.singleTargetType()?this.multiObjectTabs:(this.selectMultiple||this.isGroup&&!this.hasSubSelectedLayer)&&!this.singleTargetType()?this.multiGeneralTabs:this.showPhotoTabs?this.photoTabs:this.showFontTabs?[...this.fontTabs,...this.genearlLayerTabs,...this.copyPasteTabs]:this.showShapeSetting?[...this.objectTabs,...this.genearlLayerTabs,...this.copyPasteTabs]:this.inBgSettingMode?this.bgSettingTab:this.isGroupOrTmp?this.genearlLayerTabs:this.showFrameTabs?er.Z.isImageFrame(g.ZP.getCurrLayer)?this.photoTabs:this.frameTabs:[]},globalSelectedColor(){return _e.ZP.globalSelectedColor.color},textIconStyle(){const e=_e.ZP.globalSelectedColor.textColor;return"multi"===e?{"--multi-text-color":"1"}:{"--multi-text-color":"0","--text-color":e}},isWholeGroup(){return this.isGroup&&1===this.groupTypes.size&&-1===g.ZP.subLayerIdx},isCropping(){return rr.Z.isImgControl()},selectedLayerNum(){return this.currSelectedInfo.layers.length},isLocked(){return g.ZP.getSelectedLayer().locked},isGroup(){return g.ZP.getCurrLayer.type===o.F5.group},isGroupOrTmp(){return g.ZP.getCurrLayer.type===o.F5.tmp||g.ZP.getCurrLayer.type===o.F5.group},groupTypes(){const e=this.currSelectedInfo.layers[0],t=e.layers.map((e=>e.type));return new Set(t)},isInFrame(){const e=g.ZP.getCurrLayer;return e.type===o.F5.frame&&""!==e.clips[0].srcObj.assetId},showPhotoTabs(){return!this.isFontsPanelOpened&&this.targetIs("image")&&this.singleTargetType()||this.hasFrameClipActive||this.inBgRemoveMode},showObjectColorAndFontTabs(){const{subLayerIdx:e}=g.ZP,t=g.ZP.getCurrLayer;if("group"!==t.type&&"tmp"!==t.type||-1!==e)return!1;const n=t.layers.filter((e=>"shape"===e.type&&1===e.color.length)),r=t.layers.filter((e=>"shape"===e.type&&1!==e.color.length)),i=0!==t.layers.filter((e=>"image"===e.type)).length;return!(i||0===n.length&&1!==r.length)},hasFrameClipActive(){const e=g.ZP.getCurrLayer;return e.type===o.F5.frame&&e.clips.some((e=>e.active))},showFontTabs(){return!this.inBgRemoveMode&&!this.isFontsPanelOpened&&this.targetIs("text")&&this.singleTargetType()},showShapeSetting(){const e=!this.inBgRemoveMode&&!this.isFontsPanelOpened&&!this.isLocked,t=this.targetIs("shape")&&this.singleTargetType();return e&&t},showFrameTabs(){return this.targetIs("frame")&&this.singleTargetType()&&!g.ZP.getCurrLayer.clips.some((e=>e.active))},contentEditable(){var e;return null==(e=this.currSelectedInfo.layers[0])?void 0:e.contentEditable},rootStyles(){return{backgroundColor:"#EEEFF4"}},containerStyles(){return{transform:`translate(0,${this.contentEditable?100:0}%)`,opacity:""+(this.contentEditable?0:1),borderTop:!this.contentEditable&&this.isSettingTabsOpen?"0.5px solid #D9DBE1":"none",boxShadow:!this.contentEditable&&this.isSettingTabsOpen?"0px 0px 6px 0px  #3C3C3C0D":"none"}},innerContainerStyles(){return{paddingBottom:`${this.userInfo.homeIndicatorHeight+8}px`}},currLayer(){return g.ZP.getCurrLayer},isLine(){return ni.Z.isLine(this.currLayer)},isBasicShape(){return ni.Z.isBasicShape(this.currLayer)},showShapeAdjust(){return this.isLine||this.isBasicShape},selectMultiple(){return this.selectedLayerNum>1}}),watch:{currSelectedLayers:{immediate:!0,handler(){return zx(this,null,(function*(){const{layers:e,types:t}=this.currSelectedInfo;if(t.has("image")&&1===e.length){const t=rr.Z.getSrc(e[0],"tiny"),n=yield us.Z.isSVG(t,e[0]);this.isSvgImage=n}else this.isSvgImage=!1}))}},selectedLayerNum(e){0===e&&this.$emit("switchTab","none")},tabs:{handler(e,t){if(this.disableTabScroll||(0,h.isEqual)(e,t))return void(this.disableTabScroll=!1);const n=this.$refs.container;n.scrollTo(0,0)},deep:!0},contentEditable(e){e&&this.$emit("switchTab","none")}},methods:Cx(Zx({},(0,ze.OI)({_setmiddlemostPageIndex:"SET_middlemostPageIndex",_setCurrActivePageIndex:"SET_currActivePageIndex",_setIsDragged:"page/SET_IsDragged",_setIsShowPagePreview:"page/SET_isShowPagePreview",setBgImageControl:"SET_backgroundImageControl"})),{updateContainerOverflow(){const{scrollLeft:e,scrollWidth:t,offsetWidth:n}=this.$refs.container;this.leftOverflow=e>0,this.rightOverflow=e+.5<t-n&&t>n},handleTabAction(e){var t;switch("multiple-select"!==e.icon&&this.inMultiSelectionMode&&ke.Z.setInMultiSelectionMode(!this.inMultiSelectionMode),e.icon){case"crop":if(this.selectedLayerNum>0)if(this.isCropping)rr.Z.setImgControlDefault();else{let e;switch(g.ZP.getCurrLayer.type){case"image":g.ZP.updateLayerProps(g.ZP.pageIndex,g.ZP.layerIndex,{imgControl:!0});break;case"frame":e=Math.max(g.ZP.getCurrLayer.clips.findIndex((e=>"image"===e.type&&e.active)),0),er.Z.updateFrameLayerProps(g.ZP.pageIndex,g.ZP.layerIndex,e,{imgControl:!0});break;case"group":g.ZP.getCurrConfig.type===o.F5.image&&g.ZP.updateLayerProps(g.ZP.pageIndex,g.ZP.layerIndex,{imgControl:!0},g.ZP.subLayerIdx);break}}else if(this.inBgSettingMode){if(this.backgroundLocked)return this.handleLockedNotify();this.setBgImageControl({pageIndex:p.Z.currFocusPageIndex,imgControl:!this.backgroundImgControl})}break;case"set-as-frame":g.ZP.getCurrLayer.type===o.F5.frame?er.Z.detachImage(g.ZP.layerIndex):er.Z.updateImgToFrame();break;case"cameraroll":S.Z.inBrowserMode?Qe.Z.chooseAssets("image",!0):S.Z.getIosImg().then((e=>{e.length>0&&l.Z.toDataURL(`vvpic://${e[0]}`,(e=>{Qe.Z.uploadAsset("image",[e],{addToPage:!0})}))}));break;case"remove-bg":this.inBgRemoveMode||ws.removeBg();break;case"unfold":tr.Z.deselect(),this.$emit("switchTab","none"),this.inAllPagesMode&&this.$emit("showAllPages"),this.inBgRemoveMode&&ws.setInBgRemoveMode(!1),this.inBgSettingMode&&ke.Z.setInBgSettingMode(!1);break;case"add-page":{const e=p.Z.getPage(p.Z.currFocusPageIndex),t=p.Z.currFocusPage;p.Z.addPageToPos(p.Z.newPage({width:e.width,height:e.height,bleeds:t.bleeds,physicalBleeds:t.physicalBleeds,isEnableBleed:t.isEnableBleed,backgroundColor:t.backgroundColor,unit:t.unit}),p.Z.currFocusPageIndex+1),this._setCurrActivePageIndex(p.Z.currFocusPageIndex+1),cn.Z.record();break}case"duplicate-page":{const{currFocusPageIndex:e}=p.Z,t=l.Z.deepCopy(p.Z.getPage(e));t.designId="",t.id=l.Z.generateRandomString(8),p.Z.addPageToPos(t,e+1),this._setCurrActivePageIndex(e+1);const n=document.querySelector(`.page-preview_${e}`);null==n||n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});break}case"trash":{tr.Z.deselect();const e=p.Z.currFocusPageIndex;this._setCurrActivePageIndex(p.Z.isLastPage?e-1:e),ke.Z.setCurrCardIndex(p.Z.currActivePageIndex),p.Z.deletePage(e),cn.Z.record();break}case"text-format":this.selectMultiple||this.isGroup||ri.Z.agent((e=>e.commands.selectAll()));break;case"edit":{const{index:e,pageIndex:t}=g.ZP.currSelectedInfo,{getCurrLayer:n}=g.ZP;if(this.hasSubSelectedLayer){const{subLayerIdx:r}=g.ZP,i=n.layers[r];"text"===i.type&&g.ZP.updateLayerProps(t,e,{contentEditable:!0},r),this.$nextTick((()=>{ri.Z.focus({scrollIntoView:!1},"end")}))}else"text"===n.type&&g.ZP.updateLayerProps(t,e,{contentEditable:!0}),this.$nextTick((()=>{ri.Z.focus({scrollIntoView:!1},n.isEdited?"end":null)}));break}case"group":case"ungroup":this.disableTabScroll=!0,Fo.Z.mappingIconAction(e.icon);break;case"multiple-select":ke.Z.setInMultiSelectionMode(!this.inMultiSelectionMode);break;case"bg-separate":this.inBgSettingMode?u.Z.detachBgImage():u.Z.setBgImageSrc();break;case"copy":kt.Z.copy();break;case"paste":kt.Z.paste();break;case"brush":this.hasCopiedFormat?Jr.Z.clearCopiedFormat():this.handleCopyFormat();break;case"effect":break;case"color":case"text-color-mobile":_e.ZP.setCurrEvent(null==(t=null==e?void 0:e.props)?void 0:t.currColorEvent);break;default:break}"crop"!==e.icon&&(this.isCropping&&rr.Z.setImgControlDefault(),u.Z.backgroundImageControl&&u.Z.setAllBackgroundImageControlDefault()),void 0!==e.panelType&&this.$emit("switchTab",e.panelType,e.props),["copy","paste","add-page","remove-bg","trash","duplicate-page"].includes(e.icon)&&(this.clickedTab=e.icon,this.clickedTabTimer=window.setTimeout((()=>{this.clickedTab=""}),400)),["copy","paste"].includes(e.icon)&&(0,sr.h4)({group:"copy",text:"copy"===e.icon?r.Z.global.tc("NN0688"):r.Z.global.tc("NN0813")})},targetIs(e){return this.isGroup?this.hasSubSelectedLayer?this.subLayerType===e:this.groupTypes.has(e):this.currSelectedInfo.types.has(e)},singleTargetType(){return this.isGroup?!!this.hasSubSelectedLayer||1===this.groupTypes.size:1===this.currSelectedInfo.types.size},tabActive(e){return"color"===this.currTab?this.currTab===e.panelType&&("setTextColor"===_e.ZP.currEvent&&"text-color-mobile"===e.icon||"setTextColor"!==_e.ZP.currEvent&&"color"===e.icon):this.currTab===e.panelType||this.clickedTab===e.icon},handleLockedNotify(){(0,sr.h4)({group:"copy",text:r.Z.global.tc("NN0804")})},handleCopyFormat(){if(this.isCopyFormatDisabled)return;const e=this.currSelectedInfo.types,t=this.currSelectedInfo.layers[0];if(e.has("group")){const e=this.subActiveLayerType,t=this.subActiveLayer;"text"===e&&Jr.Z.copyTextFormat(t),"image"===e&&Jr.Z.copyImageFormat(t),"frame"===e&&Jr.Z.copyImageFormat(t.clips[0])}else e.has("text")&&Jr.Z.copyTextFormat(t),e.has("image")&&Jr.Z.copyImageFormat(t),e.has("frame")&&Jr.Z.copyImageFormat(t.clips[Math.max(0,this.subActiveLayerIndex)])},homeTabColor(e){return this.tabActive(e)?"blue-1":"white"},settingTabColor(e){return e.disabled||this.isLocked||"remove-bg"!==e.icon&&this.inBgRemoveMode?"gray-4":this.tabActive(e)?"blue-1":this.isSettingTabsOpen?"gray-2":"white"}})});const Lx=(0,oe.Z)(Tx,[["render",wx],["__scopeId","data-v-2ec5f1f9"],["__file","FooterTabs.vue"]]);var Ex=Lx;const Dx={class:"header-bar__left"},Ox={class:"header-bar__right"},Mx=["onPointerdown"];function Ax(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",{class:"header-bar",style:(0,k.j5)(e.rootStyles),onPointerdown:t[3]||(t[3]=(0,Z.iM)((()=>{}),["stop"]))},[(0,P._)("div",Dx,[(0,P._)("div",{class:"header-bar__feature-icon mr-20",onPointerdown:t[0]||(t[0]=t=>e.backBtnAction())},[(0,P.Wm)(s,{iconName:"chevron-left",iconColor:"white",iconWidth:"22px"})],32),e.isShowDownloadPanel?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[(0,P._)("div",{class:(0,k.C_)(["header-bar__feature-icon mr-15",{"click-disabled":(e.inBgRemoveMode?e.inBgRemoveFirstStep:e.isInFirstStep)||e.isCropping}]),onPointerdown:t[1]||(t[1]=t=>e.undo())},[(0,P.Wm)(s,{iconName:"undo",iconColor:(e.inBgRemoveMode?e.inBgRemoveFirstStep:e.isInFirstStep)||e.isCropping?"gray-2":"white",iconWidth:"22px"},null,8,["iconColor"])],34),(0,P._)("div",{class:(0,k.C_)(["header-bar__feature-icon",{"click-disabled":(e.inBgRemoveMode?e.inBgRemoveLastStep:e.isInLastStep)||e.isCropping}]),onPointerdown:t[2]||(t[2]=t=>e.redo())},[(0,P.Wm)(s,{iconName:"redo",iconColor:(e.inBgRemoveMode?e.inBgRemoveLastStep:e.isInLastStep)||e.isCropping?"gray-2":"white",iconWidth:"22px"},null,8,["iconColor"])],34)],64))]),(0,P._)("div",Ox,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.rightTabs,((t,n)=>((0,P.wg)(),(0,P.iD)("div",{key:`${t.icon}-${n}`},[t.isHidden?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",{key:0,class:(0,k.C_)(["header-bar__feature-icon",{"click-disabled":t.disable,"panel-icon":t.isPanelIcon}]),onPointerdown:n=>e.handleIconAction(t.icon)},[(0,P.Wm)(s,{iconName:t.icon,iconColor:e.iconColor(t),iconWidth:"22px"},null,8,["iconName","iconColor"])],42,Mx))])))),128))])],36)}var $x=Object.defineProperty,Fx=Object.defineProperties,jx=Object.getOwnPropertyDescriptors,Bx=Object.getOwnPropertySymbols,Rx=Object.prototype.hasOwnProperty,Hx=Object.prototype.propertyIsEnumerable,Ux=(e,t,n)=>t in e?$x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wx=(e,t)=>{for(var n in t||(t={}))Rx.call(t,n)&&Ux(e,n,t[n]);if(Bx)for(var n of Bx(t))Hx.call(t,n)&&Ux(e,n,t[n]);return e},Vx=(e,t)=>Fx(e,jx(t)),Gx=(0,P.aZ)({components:{},props:{currTab:{default:"none",type:String},inAllPagesMode:{type:Boolean,required:!0}},emits:["switchTab","showAllPages"],setup(){const e=(0,P.Fl)((()=>cn.Z.isInFirstStep)),t=(0,P.Fl)((()=>cn.Z.isInLastStep));return{isInFirstStep:e,isInLastStep:t}},data(){return{}},computed:Vx(Wx({},(0,ze.Se)({currSidebarPanel:"getCurrFunctionPanelType",currSelectedInfo:"getCurrSelectedInfo",currSubSelectedInfo:"getCurrSubSelectedInfo",currActivePanel:"mobileEditor/getCurrActivePanel",isShowPagePreview:"page/getIsShowPagePreview",inBgRemoveMode:"bgRemove/getInBgRemoveMode",inBgRemoveFirstStep:"bgRemove/inFirstStep",inBgRemoveLastStep:"bgRemove/inLastStep",isHandleShadow:"shadow/isHandling",inBgSettingMode:"mobileEditor/getInBgSettingMode",hasBleed:"getHasBleed",userInfo:"webView/getUserInfo",uploadingImgs:"file/getUploadingImgs"})),{rootStyles(){const e=S.Z.inBrowserMode?10.7:8;return{paddingTop:`${this.userInfo.statusBarHeight+e}px`,paddingBottom:`${e}px`}},isCropping(){return rr.Z.isImgControl()},layerTabs(){return[{icon:"copy",disable:this.isLocked},{icon:this.isLocked?"lock":"unlock"},{icon:"trash",disable:this.isLocked}]},bgSettingTabs(){return[{icon:u.Z.backgroundLocked?"lock":"unlock"},{icon:"trash",disable:this.isLocked}]},rightTabs(){return this.inBgRemoveMode?[]:this.isShowDownloadPanel?[{icon:"home"}]:this.selectedLayerNum>0?this.layerTabs:this.inBgSettingMode?this.bgSettingTabs:[{icon:"bleed",isPanelIcon:!0,isHidden:!this.hasBleed},{icon:"resize",isPanelIcon:!0},{icon:"all-pages"},{icon:"download",isPanelIcon:!0,disable:this.uploadingImgs.length>0},{icon:"more",isPanelIcon:!0}]},selectedLayerNum(){return this.currSelectedInfo.layers.length},isLocked(){return this.inBgSettingMode?u.Z.backgroundLocked:g.ZP.getSelectedLayer().locked},isShowDownloadPanel(){return"download"===this.currActivePanel}}),methods:{iconColor(e){return"all-pages"===e.icon?this.inAllPagesMode?"blue-1":"white":e.disable?"gray-2":this.currTab===e.icon?"blue-1":"white"},goHome(){this.$router.push({name:"Home"})},backBtnAction(){this.inAllPagesMode?this.$emit("showAllPages"):this.isShowDownloadPanel?this.$emit("switchTab","none"):this.goHome()},handleIconAction(e){switch(rr.Z.isImgControl()&&rr.Z.setImgControlDefault(),e){case"download":this.isHandleShadow?(0,sr.h4)({group:"copy",text:`${r.Z.global.t("NN0665")}`}):this.$emit("switchTab",e);break;case"home":this.goHome();break;case"more":this.$emit("switchTab",e);break;case"all-pages":this.$emit("showAllPages");break;case"resize":this.$emit("switchTab",e);break;case"copy":kt.Z.duplicate();break;case"bleed":this.$emit("switchTab",e);break;default:Fo.Z.mappingIconAction(e);break}},undo(){if(this.inBgRemoveMode){const e=new KeyboardEvent("keydown",{ctrlKey:!0,metaKey:!0,shiftKey:!1,key:"z",repeat:!1});window.dispatchEvent(e)}else kt.Z.undo()},redo(){if(this.inBgRemoveMode){const e=new KeyboardEvent("keydown",{ctrlKey:!0,metaKey:!0,shiftKey:!0,key:"z",repeat:!1});window.dispatchEvent(e)}else kt.Z.redo()}}});const qx=(0,oe.Z)(Gx,[["render",Ax],["__scopeId","data-v-5af0a2ea"],["__file","HeaderTabs.vue"]]);var Kx=qx;const Yx={key:1,class:"editor-view__bg-remove-area"};function Xx(e,t,n,r,i,o){const s=(0,P.up)("page-card"),a=(0,P.up)("bg-remove-area"),l=(0,P.up)("page-number"),c=(0,P.Q2)("touch");return(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["editor-view",e.isBackgroundImageControl?"editor-view__dim-background":"bg-gray-5"]),style:(0,k.j5)(e.editorViewStyle),onWheel:t[1]||(t[1]=(...t)=>e.handleWheel&&e.handleWheel(...t)),onScroll:t[2]||(t[2]=t=>e.inBgRemoveMode?null:e.scrollUpdate()),onPointerdown:t[3]||(t[3]=(...t)=>e.selectStart&&e.selectStart(...t)),onMousewheel:t[4]||(t[4]=(...t)=>e.handleWheel&&e.handleWheel(...t)),onPinch:t[5]||(t[5]=(...t)=>e.pinchHandler&&e.pinchHandler(...t)),ref:"editorView"},[(0,P._)("div",{class:"editor-view__abs-container",style:(0,k.j5)(e.absContainerStyle)},[(0,P._)("div",{class:"editor-view__canvas",ref:"canvas",style:(0,k.j5)(e.canvasStyle)},[e.inBgRemoveMode?((0,P.wg)(),(0,P.iD)("div",Yx,[(0,P.Wm)(a,{editorViewCanvas:e.editorCanvas},null,8,["editorViewCanvas"])])):((0,P.wg)(!0),(0,P.iD)(P.HY,{key:0},(0,P.Ko)(e.pagesState,((n,r)=>((0,P.wg)(),(0,P.j4)(s,{key:`page-${n.config.id}`,config:n,cardWidth:e.cardWidth,cardHeight:e.cardHeight,pageIndex:r,editorView:e.editorView,isAnyBackgroundImageControl:e.isBackgroundImageControl,onPointerdown:e.selectStart,onClick:t[0]||(t[0]=(0,Z.iM)((t=>e.outerClick(t)),["self","prevent"]))},null,8,["config","cardWidth","cardHeight","pageIndex","editorView","isAnyBackgroundImageControl","onPointerdown"])))),128))],4)],4),e.hasSelectedLayer?(0,P.kq)("",!0):((0,P.wg)(),(0,P.j4)(l,{key:0,pageNum:e.pageNum,currCardIndex:e.currCardIndex},null,8,["pageNum","currCardIndex"]))],38)),[[c]])}const Qx={class:"page-number__text overline-SM text-white"};function Jx(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("div",{class:"page-number",onClick:t[0]||(t[0]=(...t)=>e.showAllPages&&e.showAllPages(...t))},[(0,P._)("span",Qx,(0,k.zw)(`${e.currCardIndex+1}/${e.pageNum}`),1)])}var eP=Object.defineProperty,tP=Object.getOwnPropertySymbols,nP=Object.prototype.hasOwnProperty,rP=Object.prototype.propertyIsEnumerable,iP=(e,t,n)=>t in e?eP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oP=(e,t)=>{for(var n in t||(t={}))nP.call(t,n)&&iP(e,n,t[n]);if(tP)for(var n of tP(t))rP.call(t,n)&&iP(e,n,t[n]);return e},sP=(0,P.aZ)({props:{pageNum:{type:Number,required:!0},currCardIndex:{type:Number,required:!0}},computed:oP({},(0,ze.rn)("mobileEditor",{inAllPagesMode:"mobileAllPageMode"})),methods:{showAllPages(){ke.Z.setMobileAllPageMode(!this.inAllPagesMode),this.inAllPagesMode||this.$nextTick((()=>{p.Z.fitPage()}))}}});const aP=(0,oe.Z)(sP,[["render",Jx],["__scopeId","data-v-02f668dc"],["__file","PageNumber.vue"]]);var lP=aP;const cP=["id"];function dP(e,t,n,r,i,o){const s=(0,P.up)("nu-page");return(0,P.wg)(),(0,P.iD)("div",{class:"page-card",id:`page-card_${e.pageIndex}`,style:(0,k.j5)(e.cardStyle),ref:"card"},[(0,P.Wm)(s,{pageIndex:e.pageIndex,overflowContainer:e.editorView,pageState:e.config,isScaling:e.isScaling,isAnyBackgroundImageControl:e.isAnyBackgroundImageControl,minContentScaleRatio:e.minContentScaleRatio},null,8,["pageIndex","overflowContainer","pageState","isScaling","isAnyBackgroundImageControl","minContentScaleRatio"])],12,cP)}var uP=Object.defineProperty,gP=Object.defineProperties,pP=Object.getOwnPropertyDescriptors,hP=Object.getOwnPropertySymbols,mP=Object.prototype.hasOwnProperty,yP=Object.prototype.propertyIsEnumerable,fP=(e,t,n)=>t in e?uP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bP=(e,t)=>{for(var n in t||(t={}))mP.call(t,n)&&fP(e,n,t[n]);if(hP)for(var n of hP(t))yP.call(t,n)&&fP(e,n,t[n]);return e},vP=(e,t)=>gP(e,pP(t)),wP=(0,P.aZ)({components:{NuPage:br},props:{config:{required:!0,type:Object},cardWidth:{type:Number,required:!0},cardHeight:{type:Number,required:!0},pageIndex:{required:!0,type:Number},isScaling:{type:Boolean,default:!1},editorView:{type:null,required:!0},isAnyBackgroundImageControl:{type:Boolean,default:!1}},data(){return{minContentScaleRatio:0}},mounted(){this.minContentScaleRatio=ke.Z.handleContentScaleCalc(this.config.config),this.$store.commit("SET_contentScaleRatio4Page",{pageIndex:this.pageIndex,contentScaleRatio:this.minContentScaleRatio})},computed:vP(bP({},(0,ze.Se)({groupType:"getGroupType",currCardIndex:"mobileEditor/getCurrCardIndex",hasBleed:"getHasBleed",currActivePanel:"mobileEditor/getCurrActivePanel"})),{cardStyle(){return{width:`${this.cardWidth}px`,height:this.isDetailPage?"initial":`${this.cardHeight}px`,flexDirection:this.isDetailPage?"column":"initial"}},isDetailPage(){return 1===this.groupType}}),watch:{pageScaleRatio(){if(this.isDetailPage)l.Z.scaleFromCenter(this.editorView);else{const e=this.$refs.card[this.currCardIndex];l.Z.scaleFromCenter(e)}},hasBleed(){this.minContentScaleRatio=ke.Z.handleContentScaleRatio(this.pageIndex)},currActivePanel(e,t){"bleed"===t&&(this.minContentScaleRatio=ke.Z.handleContentScaleRatio(this.pageIndex))}}});const NP=(0,oe.Z)(wP,[["render",dP],["__scopeId","data-v-24d61afa"],["__file","PageCard.vue"]]);var SP=NP,xP=Object.defineProperty,PP=Object.getOwnPropertySymbols,IP=Object.prototype.hasOwnProperty,_P=Object.prototype.propertyIsEnumerable,kP=(e,t,n)=>t in e?xP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZP=(e,t)=>{for(var n in t||(t={}))IP.call(t,n)&&kP(e,n,t[n]);if(PP)for(var n of PP(t))_P.call(t,n)&&kP(e,n,t[n]);return e},CP=(e,t,n)=>(kP(e,"symbol"!==typeof t?t+"":t,n),n);class zP{constructor(e,t,n){this.element=e,CP(this,"touchStartX",0),CP(this,"touchStartY",0),CP(this,"touchEndX",0),CP(this,"touchEndY",0),CP(this,"swipeOptions"),CP(this,"startTime",0),CP(this,"movedFlag",!1),CP(this,"callback");const r={tolerance:20,velocityLimit:30,targetDirection:"all"};this.swipeOptions=ZP(ZP({},r),t),this.callback=n||(e=>console.log(e)),this.element.addEventListener("touchstart",this.handleTouchStart.bind(this)),this.element.addEventListener("touchmove",this.handleTouchMove.bind(this)),this.element.addEventListener("touchend",this.handleTouchEnd.bind(this))}handleTouchStart(e){this.startTime=performance.now(),this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY}handleTouchMove(e){this.movedFlag||(this.movedFlag=!0),this.touchEndX=e.touches[0].clientX,this.touchEndY=e.touches[0].clientY}handleTouchEnd(e){if(this.movedFlag){const e=this.touchEndX-this.touchStartX,t=this.touchEndY-this.touchStartY,n=performance.now()-this.startTime,r=1e3*Math.abs(e/n),i=1e3*Math.abs(t/n);["all","horizontal"].includes(this.swipeOptions.targetDirection)&&Math.abs(e)>Math.abs(t)&&Math.abs(t)>this.swipeOptions.tolerance&&r>this.swipeOptions.velocityLimit?e>0?this.callback("right"):this.callback("left"):["all","vertical"].includes(this.swipeOptions.targetDirection)&&Math.abs(t)>this.swipeOptions.tolerance&&i>this.swipeOptions.velocityLimit&&(t>0?this.callback("down"):this.callback("up")),this.movedFlag=!1}}unbind(){this.element.removeEventListener("touchstart",this.handleTouchStart.bind(this)),this.element.removeEventListener("touchmove",this.handleTouchMove.bind(this)),this.element.removeEventListener("touchend",this.handleTouchEnd.bind(this))}}var TP=Object.defineProperty,LP=Object.defineProperties,EP=Object.getOwnPropertyDescriptors,DP=Object.getOwnPropertySymbols,OP=Object.prototype.hasOwnProperty,MP=Object.prototype.propertyIsEnumerable,AP=(e,t,n)=>t in e?TP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$P=(e,t)=>{for(var n in t||(t={}))OP.call(t,n)&&AP(e,n,t[n]);if(DP)for(var n of DP(t))MP.call(t,n)&&AP(e,n,t[n]);return e},FP=(e,t)=>LP(e,EP(t));const jP=300,BP=250;var RP=(0,P.aZ)({emits:[],components:{BgRemoveArea:jt,PageNumber:lP,PageCard:SP},props:{currActivePanel:{default:"none",type:String},showMobilePanel:{default:!1,type:Boolean}},data(){return{editorView:null,editorCanvas:null,backgroundControllingPageIndex:-1,scrollHeight:0,tmpScaleRatio:0,mounted:!1,cardHeight:0,cardWidth:0,editorViewResizeObserver:null,isSwiping:!1,swipeDetector:null,initPagePos:{x:0,y:0},initPinchPos:null,isHandlingEdgeReach:!1,movingUtils:null,translationRatio:null}},created(){const e=this.$watch("isGettingDesign",(t=>{t||(d.Z.setLog("mobileEditorView created and got design"),this.pages.length>0&&p.Z.fixPageSize()&&(p.Z.fitPage(),Qe.Z.uploadDesign(Qe.Z.PutAssetDesignType.UPDATE_BOTH),ei.Z.setModalInfo(`${this.$t("NN0788")}`,[`${this.$t("NN0789",{size:`${p.Z.MAX_WIDTH} x ${p.Z.MAX_HEIGHT}`})}`],{msg:`${this.$t("NN0358")}`,class:"btn-blue-mid",action:()=>!1})),e())}))},mounted(){if(this.$nextTick((()=>{this.mounted=!0})),this.getRecently(),cn.Z.record(),this.editorView=this.$refs.editorView,this.editorCanvas=this.$refs.canvas,this.swipeDetector=new zP(this.editorView,{targetDirection:"vertical"},this.handleSwipe),this.cardHeight=this.editorView?this.editorView.clientHeight:0,this.cardWidth=this.editorView?this.editorView.clientWidth:0,p.Z.fitPage(!1),this.tmpScaleRatio=p.Z.scaleRatio,this.$isTouchDevice()){p.Z.mobileMinScaleRatio=this.isDetailPage?20:this.tmpScaleRatio,p.Z.originPageSize.width=p.Z.getPages[0].width*p.Z.mobileMinScaleRatio*.01,p.Z.originPageSize.height=p.Z.getPages[0].height*p.Z.mobileMinScaleRatio*.01;const e=this.editorView.getBoundingClientRect();ke.Z.setMobilePhysicalData({size:{width:e.width,height:e.height},centerPos:{x:e.left+e.width/2,y:e.top+e.height/2},pos:{x:e.left,y:e.top}}),ke.Z.handleContentScaleRatio(g.ZP.pageIndex)}this.$nextTick((()=>{p.Z.findCentralPageIndexInfo()})),this.scrollHeight=this.editorView.scrollHeight,document.addEventListener("blur",this.detectBlur,!0),this.editorViewResizeObserver=new window.ResizeObserver((()=>{this.cardHeight=this.editorView.clientHeight})),this.editorViewResizeObserver.observe(this.editorView);const e={};Object.defineProperties(e,{pageIndex:{get(){return g.ZP.pageIndex}},layerIndex:{get(){return g.ZP.layerIndex}},subLayerIdx:{get(){return g.ZP.subLayerIdx}}}),this.movingUtils=new ti.U({_config:{config:{}},snapUtils:p.Z.getPageState(g.ZP.pageIndex).modules.snapUtils,body:this.$refs.editorView,layerInfo:e})},beforeUnmount(){this.editorViewResizeObserver.disconnect(),this.swipeDetector.unbind()},watch:{currFocusPageIndex(e){this.setCurrCardIndex(e),u.Z.inBgSettingMode&&ke.Z.setInBgSettingMode(!1)},currActivePanel(e){this.$nextTick((()=>{var e;this.cardHeight=null==(e=this.editorView)?void 0:e.clientHeight}))}},computed:FP($P($P($P({},(0,ze.rn)({isGettingDesign:"isGettingDesign"})),(0,ze.rn)("mobileEditor",{mobileAllPageMode:"mobileAllPageMode",isPinchingEditor:"isPinchingEditor"})),(0,ze.Se)({groupId:"getGroupId",pagesState:"getPagesState",getMiddlemostPageIndex:"getMiddlemostPageIndex",geCurrActivePageIndex:"getCurrActivePageIndex",lastSelectedLayerIndex:"getLastSelectedLayerIndex",currSelectedInfo:"getCurrSelectedInfo",pageScaleRatio:"getPageScaleRatio",isShowPagePreview:"page/getIsShowPagePreview",hasCopiedFormat:"getHasCopiedFormat",inBgRemoveMode:"bgRemove/getInBgRemoveMode",currFocusPageIndex:"getCurrFocusPageIndex",currCardIndex:"mobileEditor/getCurrCardIndex",inBgSettingMode:"mobileEditor/getInBgSettingMode",groupType:"getGroupType",isBgImgCtrl:"imgControl/isBgImgCtrl",isImgCtrl:"imgControl/isImgCtrl"})),{pages(){return this.pagesState.map((e=>e.config))},hasSelectedLayer(){return this.currSelectedInfo.layers.length>0},isBackgroundImageControl(){const e=this.pages;let t=!1;return e.forEach(((e,n)=>{e.backgroundImage.config.imgControl&&(t=!0,this.backgroundControllingPageIndex=n)})),t},pageNum(){return this.pages.length},isDetailPage(){return 1===this.groupType},editorViewStyle(){return{overflow:this.isDetailPage?"scroll":"initial"}},canvasStyle(){return{padding:this.isDetailPage?"40px 0px":"0px"}},absContainerStyle(){const e=this.showMobilePanel?0:.3;return{transform:this.isDetailPage||this.inBgRemoveMode?"initial":`translate(0, -${this.currCardIndex*this.cardHeight}px)`,transition:`transform ${e}s`}}}),methods:FP($P($P({},(0,ze.OI)({addLayer:"ADD_selectedLayer",setCurrActivePageIndex:"SET_currActivePageIndex",setPageScaleRatio:"SET_pageScaleRatio",setInBgRemoveMode:"SET_inBgRemoveMode",addPage:"ADD_page",setCurrCardIndex:"mobileEditor/SET_currCardIndex",setPinchScaleRatio:"SET_pinchScaleRatio"})),(0,ze.nv)("layouts",["getCategories","getRecently"])),{outerClick(e){le.ZP.checkIsMultiTouch(e)||this.inBgRemoveMode||an.Z.isClickOnController(e)||(ke.Z.setInBgSettingMode(!1),tr.Z.deselect(),this.setCurrActivePageIndex(-1),p.Z.setBackgroundImageControlDefault(),ke.Z.setInMultiSelectionMode(!1),p.Z.findCentralPageIndexInfo(),rr.Z.isImgControl()&&an.Z.updateLayerProps(this.getMiddlemostPageIndex,this.lastSelectedLayerIndex,{imgControl:!1}))},selectStart(e){e.isPrimary&&(e.stopPropagation(),this.hasCopiedFormat&&Jr.Z.clearCopiedFormat(),an.Z.isClickOnController(e)?(this.movingUtils.removeListener(),this.movingUtils.updateProps({_config:{config:g.ZP.getCurrLayer},body:document.getElementById(`nu-layer_${g.ZP.pageIndex}_${g.ZP.layerIndex}_-1`)}),this.movingUtils.moveStart(e)):(this.movingUtils.removeListener(),this.movingUtils.pageMoveStart(e)))},scrollUpdate(){var e,t,n;p.Z.findCentralPageIndexInfo(null==(n=null==(t=null==(e=ri.Z.editor)?void 0:e.view)?void 0:t.hasFocus)?void 0:n.call(t))},detectBlur(e){setTimeout((()=>{this.inBgRemoveMode||this.$nextTick((()=>{var e;"BODY"!==(null==(e=document.activeElement)?void 0:e.tagName)||this.isShowPagePreview||(-1===this.geCurrActivePageIndex?p.Z.findCentralPageIndexInfo():p.Z.activeCurrActivePage())}))}),0)},handleWheel(e){console.log("to do")},EDGE_WIDTH(){return{x:.5*(ke.Z.mobileSize.width-p.Z.getCurrPage.width*this.$store.getters.getContentScaleRatio),y:.5*(ke.Z.mobileSize.height-p.Z.getCurrPage.height*this.$store.getters.getContentScaleRatio)}},pageEdgeLimitHandler(e,t){const n=this.getEdgeLimit(e,t);return{isReachLeftEdge:e.x>=n.left,isReachRightEdge:e.x<=n.right,isReachTopEdge:e.y>=n.top,isReachBottomEdge:e.y<=n.bottom,edgeLimit:n}},getEdgeLimit(e,t){const n=this.$store.getters.getContentScaleRatio,r=this.EDGE_WIDTH();return{left:r.x,right:ke.Z.mobileSize.width-e.width*n*t-r.x,top:r.y,bottom:ke.Z.mobileSize.height-e.height*n*t-r.y}},pinchHandler(e){!this.isHandlingEdgeReach&&this.$store.getters["user/isAdmin"]&&window.requestAnimationFrame((()=>{const{getCurrPage:t,scaleRatio:n}=p.Z,r=this.$store.getters.getContentScaleRatio,o=.5*(e.scale-1)+1;switch(e.phase){case"start":if(this.isBgImgCtrl||this.isImgCtrl)return;this.movingUtils.removeListener(),this.initPagePos.x=t.x,this.initPagePos.y=t.y,this.initPinchPos={x:e.x,y:e.y},this.tmpScaleRatio=n,i.Z.commit("SET_isPageScaling",!0),this.$store.commit("mobileEditor/SET_isPinchingEditor",!0);break;case"move":{if(this.isBgImgCtrl||this.isImgCtrl)return;const s=o*this.tmpScaleRatio;if(this.isPinchingEditor||(this.movingUtils.removeListener(),this.initPagePos.x=t.x,this.initPagePos.y=t.y,this.initPinchPos={x:e.x,y:e.y},this.tmpScaleRatio=n,i.Z.commit("SET_isPageScaling",!0),this.$store.commit("mobileEditor/SET_isPinchingEditor",!0)),!this.initPinchPos)return;if(i.Z.commit("mobileEditor/UPDATE_pinchScale",o),!this.translationRatio){const e={x:(t.initPos.x-this.initPagePos.x)/(t.width*this.tmpScaleRatio*.01*r),y:(t.initPos.y-this.initPagePos.y)/(t.height*this.tmpScaleRatio*.01*r)};this.translationRatio={x:((this.initPinchPos.x-ke.Z.mobileCenterPos.x)/(t.width*r)+.5)/(.01*this.tmpScaleRatio)+e.x,y:((this.initPinchPos.y-ke.Z.mobileCenterPos.y)/(t.height*r)+.5)/(.01*this.tmpScaleRatio)+e.y}}const a={width:.01*(s-this.tmpScaleRatio)*(t.width*r),height:.01*(s-this.tmpScaleRatio)*(t.height*r)},l={x:e.x-this.initPinchPos.x,y:e.y-this.initPinchPos.y};p.Z.updatePagePos(g.ZP.pageIndex,{x:this.initPagePos.x-a.width*this.translationRatio.x+l.x,y:this.initPagePos.y-a.height*this.translationRatio.y+l.y});break}case"end":{if(!this.translationRatio)return void console.error("translationRatio should not be null!");const n=this.$store.state.mobileEditor.pinchScale*this.tmpScaleRatio,{isReachLeftEdge:o,isReachRightEdge:s,isReachTopEdge:a,isReachBottomEdge:l}=this.pageEdgeLimitHandler(t,.01*n),c=document.getElementById(`nu-page-wrapper_${g.ZP.pageIndex}`);if(n>jP){null==c||c.classList.add("editor-view__pinch-transition"),this.isHandlingEdgeReach=!0;const i={width:.01*(n-jP)*(t.width*r),height:.01*(n-jP)*(t.height*r)},o=t.x+i.width*this.translationRatio.x,s=t.y+i.height*this.translationRatio.y,a=this.getEdgeLimit(t,.01*jP);p.Z.updatePagePos(g.ZP.pageIndex,{x:ln.ZP.clamp(o,a.right,a.left),y:ln.ZP.clamp(s,a.bottom,a.top)}),this.$store.commit("mobileEditor/UPDATE_pinchScale",jP/this.tmpScaleRatio),setTimeout((()=>{this.$store.commit("mobileEditor/SET_isPinchingEditor",!1),this.movingUtils.pageMoveStart(e),this.$store.commit("mobileEditor/UPDATE_pinchScale",1),this.$store.commit("SET_pageScaleRatio",jP),this.isHandlingEdgeReach=!1,null==c||c.classList.remove("editor-view__pinch-transition")}),BP)}else if(o||s||a||l){this.isHandlingEdgeReach=!0,null==c||c.classList.add("editor-view__pinch-transition");const i=this.EDGE_WIDTH();if(n<100||o&&s||a&&l){const n={x:t.x,y:t.y};n.x=i.x,n.y=i.y,this.$store.commit("mobileEditor/UPDATE_pinchScale",1),this.$store.commit("mobileEditor/SET_isPinchingEditor",!1),this.movingUtils.pageMoveStart(e),setTimeout((()=>{this.$store.commit("SET_pageScaleRatio",100)}),0),p.Z.updatePagePos(g.ZP.pageIndex,n)}else{const c={x:t.x,y:t.y};o&&(c.x=i.x),s&&(c.x=ke.Z.mobileSize.width-t.width*r*n*.01-i.x),a&&(c.y=i.y),l&&(c.y=ke.Z.mobileSize.height-t.height*r*n*.01-i.y),setTimeout((()=>{this.$store.commit("mobileEditor/SET_isPinchingEditor",!1),this.movingUtils.pageMoveStart(e),this.$store.commit("mobileEditor/UPDATE_pinchScale",1),this.$store.commit("SET_pageScaleRatio",n)}),BP),p.Z.updatePagePos(g.ZP.pageIndex,c)}setTimeout((()=>{this.isHandlingEdgeReach=!1,null==c||c.classList.remove("editor-view__pinch-transition")}),BP)}else this.$store.commit("mobileEditor/SET_isPinchingEditor",!1),this.movingUtils.pageMoveStart(e),this.$store.commit("mobileEditor/UPDATE_pinchScale",1),this.$store.commit("SET_pageScaleRatio",n);this.translationRatio=null,this.initPinchPos=null,i.Z.commit("SET_isPageScaling",!1),this.movingUtils.pageMoveStart(e)}}}))},swipeUpHandler(){if(!this.isDetailPage&&!this.hasSelectedLayer&&!this.isBgImgCtrl&&!this.isImgCtrl){if(p.Z.scaleRatio>p.Z.mobileMinScaleRatio)return;if(this.isSwiping=!0,this.pageNum-1!==this.currCardIndex)this.setCurrCardIndex(this.currCardIndex+1),tr.Z.deselect(),this.setCurrActivePageIndex(this.currCardIndex),this.$nextTick((()=>{p.Z.fitPage()}));else{tr.Z.deselect();const e=p.Z.pageNum>0?p.Z.getPages[p.Z.pageNum-1]:void 0;this.addPage(p.Z.newPage({width:null==e?void 0:e.width,height:null==e?void 0:e.height,backgroundColor:null==e?void 0:e.backgroundColor,physicalWidth:null==e?void 0:e.physicalWidth,physicalHeight:null==e?void 0:e.physicalHeight,isEnableBleed:null==e?void 0:e.isEnableBleed,bleeds:null==e?void 0:e.bleeds,physicalBleeds:null==e?void 0:e.physicalBleeds,unit:null==e?void 0:e.unit})),this.$nextTick((()=>{ke.Z.setCurrCardIndex(p.Z.pageNum-1),this.setCurrActivePageIndex(this.currCardIndex),p.Z.fitPage()})),cn.Z.record()}this.isSwiping=!1}},swipeDownHandler(){if(!this.isDetailPage&&!this.hasSelectedLayer&&!this.isBgImgCtrl&&!this.isImgCtrl){if(p.Z.scaleRatio>p.Z.mobileMinScaleRatio)return;this.isSwiping=!0,0!==this.currCardIndex&&(this.setCurrCardIndex(this.currCardIndex-1),tr.Z.deselect(),this.setCurrActivePageIndex(this.currCardIndex),this.$nextTick((()=>{p.Z.fitPage()}))),this.isSwiping=!1}},handleSwipe(e){this.isPinchingEditor||("up"===e?this.swipeUpHandler():"down"===e&&this.swipeDownHandler())}})});const HP=(0,oe.Z)(RP,[["render",Xx],["__file","MobileEditorView.vue"]]);var UP=HP;const WP=e=>((0,P.dD)("data-v-15cb3f54"),e=e(),(0,P.Cn)(),e),VP=WP((()=>(0,P._)("div",null,null,-1))),GP=[VP],qP={class:"mobile-panel__title"},KP={key:0,class:"mobile-panel__layer-num"},YP={class:"label-sm text-white"},XP={class:"mobile-panel__bottom-section"};function QP(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("tabs"),l=(0,P.up)("mobile-panel",!0),c=(0,P.Q2)("click-outside");return(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["mobile-panel",{"p-15":!e.noPaddingTheme}]),style:(0,k.j5)(e.panelStyle),ref:"panel"},[e.hideTopSection?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",{key:0,class:(0,k.C_)(["mobile-panel__top-section",{"self-padding":e.noPaddingTheme}])},[(0,P._)("div",{class:(0,k.C_)(["mobile-panel__drag-bar",{"visible-hidden":""!==e.panelTitle}]),onPointerdown:t[0]||(t[0]=(0,Z.iM)(((...t)=>e.dragPanelStart&&e.dragPanelStart(...t)),["stop"])),onTouchstart:t[1]||(t[1]=(0,Z.iM)(((...t)=>e.disableTouchEvent&&e.disableTouchEvent(...t)),["stop"]))},GP,34),(0,P._)("div",null,[(0,P._)("div",{class:(0,k.C_)(["mobile-panel__btn mobile-panel__left-btn",{"visible-hidden":!e.showLeftBtn,"click-disabled":!e.showLeftBtn}])},[(0,P.Wm)(s,{class:"click-disabled",iconName:e.leftBtnName,iconColor:"white",iconWidth:"20px"},null,8,["iconName"]),(0,P._)("div",{class:"mobile-panel__btn-click-zone",onPointerdown:t[2]||(t[2]=(0,Z.iM)(((...t)=>e.leftButtonAction&&e.leftButtonAction(...t)),["stop"])),onTouchstart:t[3]||(t[3]=(0,Z.iM)(((...t)=>e.disableTouchEvent&&e.disableTouchEvent(...t)),["stop"]))},null,32)],2),(0,P._)("div",qP,[(0,P._)("span",{class:(0,k.C_)(["mobile-panel__title-text body-1 mr-10",e.whiteTheme?"text-gray-2":"text-white"])},(0,k.zw)(e.panelTitle),3),"multiple-select"===e.currActivePanel?((0,P.wg)(),(0,P.iD)("div",KP,[(0,P._)("span",YP,(0,k.zw)(e.selectedLayerNum),1)])):(0,P.kq)("",!0)]),(0,P._)("div",{class:(0,k.C_)(["mobile-panel__btn mobile-panel__right-btn",{"visible-hidden":!e.showRightBtn,"click-disabled":!e.showRightBtn}])},[(0,P.Wm)(s,{class:"click-disabled",iconName:e.rightBtnName,iconColor:"white",iconWidth:"20px"},null,8,["iconName"]),(0,P._)("div",{class:"mobile-panel__btn-click-zone",onPointerdown:t[4]||(t[4]=(0,Z.iM)(((...t)=>e.rightButtonAction&&e.rightButtonAction(...t)),["stop"])),onTouchstart:t[5]||(t[5]=(0,Z.iM)(((...t)=>e.disableTouchEvent&&e.disableTouchEvent(...t)),["stop"]))},null,32)],2)])],2)),(0,P._)("div",XP,[e.innerTabs.label?((0,P.wg)(),(0,P.j4)(a,{key:0,theme:"light",tabs:e.innerTabs.label,modelValue:e.innerTabIndex,"onUpdate:modelValue":t[6]||(t[6]=t=>e.innerTabIndex=t)},null,8,["tabs","modelValue"])):(0,P.kq)("",!0),((0,P.wg)(),(0,P.j4)(P.Ob,{include:["PanelTemplate","PanelPhoto","PanelObject","PanelBackground","PanelText","PanelFile"]},[!e.dynamicBindIs||e.isShowPagePreview||e.hideDynamicComp?(0,P.kq)("",!0):((0,P.wg)(),(0,P.j4)((0,P.LL)(e.dynamicBindIs),(0,P.dG)({class:"border-box p-2",key:e.dynamicBindIs,currPage:e.currPage},e.dynamicBindProps,(0,P.mx)(e.dynamicBindMethod),{onClose:e.closeMobilePanel}),null,16,["currPage","onClose"]))],1024))]),(0,P.Wm)(Z.uT,{name:"panel-up"},{default:(0,P.w5)((()=>[e.isSubPanel||"none"===e.currActiveSubPanel?(0,P.kq)("",!0):((0,P.wg)(),(0,P.j4)(l,{key:0,currActivePanel:e.currActiveSubPanel,currColorEvent:e.currSubColorEvent,isSubPanel:!0,currPage:e.currPage,onSwitchTab:e.switchTab,onClose:e.closeMobilePanel},null,8,["currActivePanel","currColorEvent","currPage","onSwitchTab","onClose"]))])),_:1})],6)),[[c,e.vcoConfig()]])}const JP={class:"panel-adjust"},eI={class:"panel-adjust__reset"};function tI(e,t,n,r,i,o){const s=(0,P.up)("mobile-slider");return(0,P.wg)(),(0,P.iD)("div",JP,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.fields,(t=>((0,P.wg)(),(0,P.iD)("div",{key:t.name},[(0,P.Wm)(s,{title:`${t.label}`,borderTouchArea:!0,name:t.name,value:e.adjustVal[t.name]||0,min:t.min,max:t.max,onUpdate:e.handleField},null,8,["title","name","value","min","max","onUpdate"])])))),128)),(0,P._)("div",eI,[(0,P._)("button",{onClick:t[0]||(t[0]=(...t)=>e.reset&&e.reset(...t))},(0,k.zw)(e.$t("NN0754")),1)])])}var nI=Object.defineProperty,rI=Object.defineProperties,iI=Object.getOwnPropertyDescriptors,oI=Object.getOwnPropertySymbols,sI=Object.prototype.hasOwnProperty,aI=Object.prototype.propertyIsEnumerable,lI=(e,t,n)=>t in e?nI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cI=(e,t)=>{for(var n in t||(t={}))sI.call(t,n)&&lI(e,n,t[n]);if(oI)for(var n of oI(t))aI.call(t,n)&&lI(e,n,t[n]);return e},dI=(e,t)=>rI(e,iI(t)),uI=(0,P.aZ)({emits:[],components:{MobileSlider:ro},data(){return{fields:xn.Z.getFields(),adjustVal:xn.Z.getDefaultProps()}},created(){Object.assign(this.adjustVal,xn.Z.getDefaultProps(),u.Z.inBgSettingMode?this.backgroundAdjust:this.currLayerAdjust)},computed:dI(cI(cI({},(0,ze.rn)("imgControl",{imageControlConfig:"image"})),(0,ze.Se)({currSelectedInfo:"getCurrSelectedInfo",currSelectedIndex:"getCurrSelectedIndex",currSubSelectedInfo:"getCurrSubSelectedInfo",currSelectedLayers:"getCurrSelectedLayers"})),{currLayer(){const e=this.currSelectedLayers,{index:t,type:n}=this.currSubSelectedInfo,r=e.flatMap((e=>{if("image"===e.type)return e;if("frame"===e.type){const n=e;return n.clips[Math.max(0,t)]}if("group"===e.type){if("image"===n)return e.layers[t];if("frame"===n){const n=e.layers[t];return n.active?n.clips[0]:null}if("image"===e.layers[0].type)return e.layers[0]}return null}));return cI({},r.find((e=>e)))},currLayerAdjust(){var e,t;return null!=(t=null==(e=this.currLayer.styles)?void 0:e.adjust)?t:{}},backgroundAdjust(){const{styles:{adjust:e}}=p.Z.currFocusPage.backgroundImage.config;return e}}),methods:{handleField(e,t){const n=Number.isNaN(+e)?0:+e;this.adjustVal[t]=n,this.handleAdjust(this.adjustVal)},reset(){const e=xn.Z.getDefaultProps();this.handleAdjust(e),Object.entries(this.adjustVal).forEach((([t,n])=>{this.adjustVal[t]=e[t]}))},handleAdjust(e){const{types:t}=this.currSelectedInfo,{index:n,type:r}=this.currSubSelectedInfo;if(-1!==n||!u.Z.inBgSettingMode)return t.has("frame")||t.has("group")&&"frame"===r?t.has("frame")?n>=0?er.Z.updateFrameLayerStyles(p.Z.currFocusPageIndex,this.currSelectedIndex,n,{adjust:cI({},e)}):er.Z.updateFrameLayerAllClipsStyles(p.Z.currFocusPageIndex,this.currSelectedIndex,{adjust:cI({},e)}):er.Z.updateSubFrameLayerAllClipsStyles(p.Z.currFocusPageIndex,this.currSelectedIndex,n,{adjust:cI({},e)}):t.has("image")||t.has("group")?xn.Z.setAdjust({adjust:cI({},e),pageIndex:p.Z.currFocusPageIndex,layerIndex:this.currSelectedIndex,subLayerIndex:n>=0?n:void 0}):void 0;u.Z.handleChangeBgAdjust(e)}}});const gI=(0,oe.Z)(uI,[["render",tI],["__scopeId","data-v-26043494"],["__file","PanelAdjust.vue"]]);var pI=gI;const hI={class:"panel-bleed text-left"},mI={class:"subtitle-2 text-gray-2"},yI={class:"panel-bleed__content"};function fI(e,t,n,r,i,o){const s=(0,P.up)("bleed-settings");return(0,P.wg)(),(0,P.iD)("div",hI,[(0,P._)("span",mI,(0,k.zw)(e.$t("NN0780")),1),(0,P._)("div",yI,[(0,P.Wm)(s,{page:e.currPage},null,8,["page"])])])}var bI=(0,P.aZ)({components:{BleedSettings:Wc},props:{currPage:{type:Object,required:!0}}});const vI=(0,oe.Z)(bI,[["render",fI],["__scopeId","data-v-645a317f"],["__file","PanelBleed.vue"]]);var wI=vI;const NI=e=>((0,P.dD)("data-v-33c3fb3b"),e=e(),(0,P.Cn)(),e),SI={class:"panel-brand relative"},xI={key:0,class:"panel-brand__main"},PI={key:1,class:"panel-brand__main"},II={class:"panel-brand__header relative"},_I={class:"panel-brand__tab"},kI={key:2,class:"dim-background"},ZI={class:"panel-brand__confirm"},CI=NI((()=>(0,P._)("div",{class:"panel-brand__confirm__title"},"確認刪除圖片？",-1))),zI={class:"panel-brand__confirm__descriptions"},TI=NI((()=>(0,P._)("div",null,"您已選擇刪除圖片",-1))),LI=NI((()=>(0,P._)("div",null,"刪除後將無法復原。",-1))),EI={class:"panel-brand__confirm__buttons"};function DI(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("brand-selector"),l=(0,P.up)("brand-kit-tab"),c=(0,P.Q2)("click-outside");return(0,P.wg)(),(0,P.iD)("div",SI,[e.isBrandsLoading?((0,P.wg)(),(0,P.iD)("div",xI,[(0,P.Wm)(s,{iconName:"loading",iconWidth:"20px",iconColor:"white"})])):((0,P.wg)(),(0,P.iD)("div",PI,[(0,P._)("div",II,[(0,P.Wm)(a,{theme:"mobile-editor"}),(0,P._)("div",{class:"panel-brand__settings pointer",onClick:t[0]||(t[0]=(0,Z.iM)(((...t)=>e.handleToggleSettings&&e.handleToggleSettings(...t)),["stop"]))},[(0,P.Wm)(s,{iconName:e.isInSettingMode?"confirm-circle":"settings",iconColor:"white",iconWidth:"24px"},null,8,["iconName"])])]),(0,P._)("div",_I,[(0,P.Wm)(l,{theme:"mobile-editor",maxheight:e.maxheight-180,settingmode:e.isInSettingMode},null,8,["maxheight","settingmode"])])])),e.isMobileConfirmOpen?((0,P.wg)(),(0,P.iD)("div",kI,[(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",ZI,[(0,P._)("div",{class:"panel-brand__confirm__close",onClick:t[1]||(t[1]=(0,Z.iM)(((...t)=>e.handleClearDeletion&&e.handleClearDeletion(...t)),["stop"]))},[(0,P.Wm)(s,{iconName:"close",iconColor:"gray-3",iconWidth:"20px"})]),CI,(0,P._)("div",zI,[TI,(0,P._)("div",null,(0,k.zw)(`${e.mobileDeleteBuffer.content.name}`),1),LI]),(0,P._)("div",EI,[(0,P._)("div",{class:"panel-brand__confirm__cancel",onClick:t[2]||(t[2]=(0,Z.iM)(((...t)=>e.handleClearDeletion&&e.handleClearDeletion(...t)),["stop"]))},[(0,P._)("span",null,(0,k.zw)(e.$t("NN0203")),1)]),(0,P._)("div",{class:"panel-brand__confirm__confirm",onClick:t[3]||(t[3]=(0,Z.iM)(((...t)=>e.confirmAction&&e.confirmAction(...t)),["stop"]))},[(0,P._)("span",null,(0,k.zw)(e.$tc("NN0164",1)),1)])])])),[[c,e.handleClearDeletion]])])):(0,P.kq)("",!0)])}var OI=Object.defineProperty,MI=Object.defineProperties,AI=Object.getOwnPropertyDescriptors,$I=Object.getOwnPropertySymbols,FI=Object.prototype.hasOwnProperty,jI=Object.prototype.propertyIsEnumerable,BI=(e,t,n)=>t in e?OI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RI=(e,t)=>{for(var n in t||(t={}))FI.call(t,n)&&BI(e,n,t[n]);if($I)for(var n of $I(t))jI.call(t,n)&&BI(e,n,t[n]);return e},HI=(e,t)=>MI(e,AI(t)),UI=(0,P.aZ)({emits:[],components:{BrandSelector:xe.Z,BrandKitTab:Ly.Z},directives:{clickOutside:Ce().directive},data(){return{isInSettingMode:!1}},props:{maxheight:{default:.9*window.innerHeight,type:Number}},computed:RI({},(0,ze.Se)("brandkit",{isBrandsLoading:"getIsBrandsLoading",isMobileConfirmOpen:"getIsMobileConfirmOpen",mobileDeleteBuffer:"getMobileDeleteBuffer"})),methods:HI(RI({},(0,ze.OI)("brandkit",{setIsMobileConfirmOpen:"SET_isMobileConfirmOpen",setMobileDeleteBuffer:"SET_mobileDeleteBuffer"})),{handleToggleSettings(){this.isInSettingMode=!this.isInSettingMode},handleClearDeletion(){this.setIsMobileConfirmOpen(!1),this.setMobileDeleteBuffer(void 0)},confirmAction(){switch(this.mobileDeleteBuffer.type){case"logo":a.Z.removeLogo(this.mobileDeleteBuffer.content);break}this.handleClearDeletion()}})});const WI=(0,oe.Z)(UI,[["render",DI],["__scopeId","data-v-33c3fb3b"],["__file","PanelBrand.vue"]]);var VI=WI;const GI=e=>((0,P.dD)("data-v-659d1370"),e=e(),(0,P.Cn)(),e),qI={class:"panel-brand-list__brands-wrapper"},KI={class:"panel-brand-list__brands"},YI=["onClick"],XI={class:"panel-brand-list__brand-title"},QI={class:"panel-brand-list__brand-more"},JI=GI((()=>(0,P._)("div",{class:"horizontal-rule"},null,-1))),e_={class:"panel-brand-list__brand-title"},t_=GI((()=>(0,P._)("div",{class:"horizontal-rule"},null,-1))),n_={class:"panel-brand-list__add-brand__icon"},r_={class:"panel-brand-list__add-brand__text"},i_={class:"panel-brand-list__name-editor"},o_=["placeholder"];function s_(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["panel-brand-list",{"new-brand":"new-brand"===e.lastHistory}])},[e.inInitialState?((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[(0,P._)("div",qI,[(0,P._)("div",KI,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.brands,(t=>((0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["panel-brand-list__brand-item",{selected:e.checkSelected(t)}]),key:t.id,onClick:n=>e.handleSetCurrentBrand(t)},[(0,P._)("span",XI,(0,k.zw)(e.getDisplayedBrandName(t)),1),(0,P._)("div",QI,[(0,P.Wm)(s,{iconName:"more_vertical",iconColor:"gray-2",iconWidth:"24px"})])],10,YI)))),128))])]),e.defaultOption?((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[JI,(0,P._)("div",{class:(0,k.C_)(["panel-brand-list__brand-item",{selected:e.isDefaultSelected}]),onClick:t[0]||(t[0]=(...t)=>e.handleSelectDefault&&e.handleSelectDefault(...t))},[(0,P._)("span",e_,(0,k.zw)(e.$t("NN0089")),1)],2)],64)):(0,P.kq)("",!0),e.hasAddBrand?((0,P.wg)(),(0,P.iD)(P.HY,{key:1},[t_,(0,P._)("div",{class:"panel-brand-list__add-brand",onClick:t[1]||(t[1]=(0,Z.iM)(((...t)=>e.addNewBrand&&e.addNewBrand(...t)),["stop","prevent"]))},[(0,P._)("div",n_,[(0,P.Wm)(s,{iconName:"plus-origin",iconColor:"gray-2",iconWidth:"16px"})]),(0,P._)("span",r_,(0,k.zw)(e.$t("NN0396")),1)])],64)):(0,P.kq)("",!0)],64)):(0,P.kq)("",!0),"new-brand"===e.lastHistory?((0,P.wg)(),(0,P.iD)(P.HY,{key:1},[(0,P._)("div",i_,[(0,P.wy)((0,P._)("input",{class:"panel-brand-list__input",ref:"name",placeholder:e.$t("NN0713"),"onUpdate:modelValue":t[2]||(t[2]=t=>e.editableName=t),onChange:t[3]||(t[3]=(...t)=>e.handleNewBrand&&e.handleNewBrand(...t))},null,40,o_),[[Z.nr,e.editableName]]),e.editableName.length?((0,P.wg)(),(0,P.iD)("div",{key:0,class:"panel-brand-list__icon",onClick:t[4]||(t[4]=(0,Z.iM)(((...t)=>e.handleClearNewBrandName&&e.handleClearNewBrandName(...t)),["stop"]))},[(0,P.Wm)(s,{iconName:"close",iconColor:"gray-3",iconWidth:"24px"})])):(0,P.kq)("",!0)]),(0,P._)("div",{class:(0,k.C_)(["panel-brand-list__confirm",{disabled:!e.editableName.length}]),onClick:t[5]||(t[5]=(0,Z.iM)(((...t)=>e.handleNewBrand&&e.handleNewBrand(...t)),["stop"]))},(0,k.zw)(e.$t("NN0396")),3)],64)):(0,P.kq)("",!0)],2)}var a_=Object.defineProperty,l_=Object.defineProperties,c_=Object.getOwnPropertyDescriptors,d_=Object.getOwnPropertySymbols,u_=Object.prototype.hasOwnProperty,g_=Object.prototype.propertyIsEnumerable,p_=(e,t,n)=>t in e?a_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h_=(e,t)=>{for(var n in t||(t={}))u_.call(t,n)&&p_(e,n,t[n]);if(d_)for(var n of d_(t))g_.call(t,n)&&p_(e,n,t[n]);return e},m_=(e,t)=>l_(e,c_(t)),y_=(0,P.aZ)({data(){return{editableName:"",isDestroyed:!1}},props:{panelHistory:{type:Array,default:()=>[]},defaultOption:{type:Boolean,default:!1},hasAddBrand:{type:Boolean,default:!1}},emits:["pushHistory","back"],unmounted(){this.isDestroyed=!0},computed:m_(h_({},(0,ze.Se)("brandkit",{brands:"getBrands",currentBrandId:"getCurrentBrandId",isDefaultSelected:"getIsDefaultSelected"})),{historySize(){return this.panelHistory.length},inInitialState(){return 0===this.historySize},lastHistory(){return this.panelHistory[this.historySize-1]}}),methods:m_(h_({},(0,ze.OI)("brandkit",{setCurrentBrand:"SET_currentBrand",setIsDefaultSelected:"SET_isDefaultSelected"})),{handleSetCurrentBrand(e){this.setCurrentBrand(e),this.defaultOption&&this.setIsDefaultSelected(!1),ke.Z.setCurrActiveSubPanel("none")},handleSelectDefault(){this.setIsDefaultSelected(!0),ke.Z.setCurrActiveSubPanel("none")},checkSelected(e){return(!this.defaultOption||!this.isDefaultSelected)&&e.id===this.currentBrandId},getDisplayedBrandName(e){return a.Z.getDisplayedBrandName(e)},addNewBrand(){this.editableName="",this.$emit("pushHistory","new-brand")},handleNewBrand(){setTimeout((()=>{if(!this.editableName.length||this.isDestroyed)return;const e=this.editableName;this.editableName="",a.Z.addNewBrand(e),this.$emit("back")}),500)},handleClearNewBrandName(){this.editableName=""}})});const f_=(0,oe.Z)(y_,[["render",s_],["__scopeId","data-v-659d1370"],["__file","PanelBrandList.vue"]]);var b_=f_;const v_=e=>((0,P.dD)("data-v-71abb027"),e=e(),(0,P.Cn)(),e),w_={class:"panel-color px-5"},N_={key:0},S_={class:"text-left"},x_=v_((()=>(0,P._)("div",{class:"panel-color__hr"},null,-1))),P_={key:1,class:"mt-10"};function I_(e,t,n,r,i,o){const s=(0,P.up)("color-btn"),a=(0,P.up)("color-picker"),l=(0,P.up)("color-slips");return(0,P.wg)(),(0,P.iD)("div",w_,[e.showDocumentColors?((0,P.wg)(),(0,P.iD)("div",N_,[(0,P._)("div",S_,(0,k.zw)(e.$t("NN0798")),1),(0,P._)("div",{class:"panel-color__shape-colors",style:(0,k.j5)(e.colorsStyle),onScrollPassive:t[0]||(t[0]=(...t)=>e.updateColorsOverflow&&e.updateColorsOverflow(...t)),ref:"colors"},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.getDocumentColors,((t,n)=>((0,P.wg)(),(0,P.j4)(s,{key:t,color:t,focus:n===e.currSelectedColorIndex,onClick:t=>e.selectColor(n)},null,8,["color","focus","onClick"])))),128))],36),x_])):((0,P.wg)(),(0,P.iD)("div",P_)),e.showColorPicker?((0,P.wg)(),(0,P.j4)(a,{key:2,isMobile:!0,aspectRatio:40,currentColor:e.colorUtils.currColor,onUpdate:e.handleDragUpdate,onFinal:e.handleChangeStop},null,8,["currentColor","onUpdate","onFinal"])):(0,P.kq)("",!0),e.showPalette?((0,P.wg)(),(0,P.j4)(l,{key:3,class:(0,k.C_)({"show-document-colors":e.showDocumentColors}),mode:"PanelColor",allRecentlyControl:e.showAllRecently,selectedColor:e.selectedColor,currPage:e.currPage,onOpenColorPicker:e.openColorPicker,onOpenColorMore:e.openColorMore},null,8,["class","allRecentlyControl","selectedColor","currPage","onOpenColorPicker","onOpenColorMore"])):(0,P.kq)("",!0)])}var __=Object.defineProperty,k_=Object.defineProperties,Z_=Object.getOwnPropertyDescriptors,C_=Object.getOwnPropertySymbols,z_=Object.prototype.hasOwnProperty,T_=Object.prototype.propertyIsEnumerable,L_=(e,t,n)=>t in e?__(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E_=(e,t)=>{for(var n in t||(t={}))z_.call(t,n)&&L_(e,n,t[n]);if(C_)for(var n of C_(t))T_.call(t,n)&&L_(e,n,t[n]);return e},D_=(e,t)=>k_(e,Z_(t)),O_=(0,P.aZ)({data(){return{colorUtils:_e.ZP,currSelectedColorIndex:0,leftOverflow:!1,rightOverflow:!1,initColor:_e.ZP.currColor}},props:{panelHistory:{type:Array,default:()=>[]},currPage:{type:Object,required:!0}},emits:["pushHistory"],components:{ColorPicker:Pe.Z,ColorSlips:Re,ColorBtn:Ie.Z},created(){_e.ZP.on(this.currEvent,this.handleColorUpdate),_e.ZP.onStop(this.currEvent,this.recordChange)},beforeUnmount(){_e.ZP.currColor!==this.initColor&&this.addRecentlyColors(_e.ZP.currColor),_e.ZP.event.off(this.currEvent,this.handleColorUpdate),_e.ZP.offStop(this.currEvent,this.recordChange)},watch:{currEvent(e,t){_e.ZP.event.off(t,this.handleColorUpdate),_e.ZP.offStop(t,this.recordChange),_e.ZP.on(e,this.handleColorUpdate),_e.ZP.onStop(e,this.recordChange)}},computed:D_(E_(E_({},(0,ze.rn)("text",["sel","props"])),(0,ze.Se)({currSelectedInfo:"getCurrSelectedInfo",currSelectedIndex:"getCurrSelectedIndex",layerIndex:"getCurrSelectedIndex"})),{historySize(){return this.panelHistory.length},inInitialState(){return 0===this.historySize},lastHistory(){return this.panelHistory[this.historySize-1]},showColorPicker(){return!this.inInitialState&&"color-picker"===this.lastHistory},showDocumentColors(){return this.showPalette&&this.currEvent===o.gQ.shape&&this.getDocumentColors.length>1&&!this.showAllRecently&&!ni.Z.hasMultiColors},showPalette(){return["color-palette","color-more"].includes(this.lastHistory)||this.inInitialState},showAllRecently(){return"color-more"===this.lastHistory},currEvent(){return _e.ZP.currEvent},selectedColor(){switch(this.currEvent){case o.gQ.text:return _e.ZP.globalSelectedColor.textColor;case o.gQ.textEffect:return Fg.Z.currColor;case o.gQ.textBg:return $g.Z.currColor;case o.gQ.shape:return this.getDocumentColors[this.currSelectedColorIndex];default:return _e.ZP.globalSelectedColor.color}},colorsStyle(){return{gridTemplateColumns:`repeat(${this.getDocumentColors.length}, calc((100% - 30px) / 7))`,maskImage:`linear-gradient(to right, transparent 0, black ${this.leftOverflow?"48px":0}, black calc(100% - ${this.rightOverflow?"48px":"0px"}), transparent 100%)`}},getDocumentColors(){return _e.ZP.globalSelectedColor.colors}}),methods:D_(E_({},(0,ze.nv)({addRecentlyColors:"color/addRecentlyColors"})),{updateColorsOverflow(){if(!this.$refs.colors)return;const{scrollLeft:e,scrollWidth:t,offsetWidth:n}=this.$refs.colors;this.leftOverflow=e>0,this.rightOverflow=e+.5<t-n&&t>n},handleChangeStop(e){window.requestAnimationFrame((()=>{_e.ZP.event.emit(_e.ZP.currStopEvent,e)}))},handleDragUpdate(e){window.requestAnimationFrame((()=>{_e.ZP.event.emit(this.currEvent,e),_e.ZP.setCurrColor(e)}))},handleColorUpdate(e){const t=(0,h.cloneDeep)(this.getDocumentColors);switch(t[this.currSelectedColorIndex]=e,this.currEvent){case o.gQ.text:{if(e===this.props.color)return;const t=(0,_e.pK)(e);ri.Z.spanStyleHandler("color",t);break}case o.gQ.shape:{const n=g.ZP.getCurrLayer;switch(n.type){case"shape":g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{color:t});break;case"tmp":case"group":{const{subLayerIdx:r}=g.ZP;if(-1===r){const r=n.layers.filter((e=>"shape"===e.type&&1===e.color.length)),i=n.layers.filter((e=>"shape"===e.type&&1!==e.color.length));if(0===r.length&&1===i.length)for(const[e,o]of n.layers.entries())"shape"===o.type&&1!==o.color.length&&g.ZP.updateSelectedLayerProps(p.Z.currFocusPageIndex,+e,{color:t});else if(0!==r.length)for(const[t,o]of n.layers.entries())"shape"===o.type&&1===o.color.length&&g.ZP.updateSelectedLayerProps(p.Z.currFocusPageIndex,+t,{color:[e]})}else{const n=g.ZP.getCurrConfig.type;"frame"===n&&this.handleFrameColorUpdate(e),"shape"===n&&g.ZP.updateSelectedLayerProps(p.Z.currFocusPageIndex,r,{color:t})}break}case"frame":this.handleFrameColorUpdate(e)}break}case o.gQ.background:_e.ZP.setCurrPageBackgroundColor(e);break;case o.gQ.textEffect:Fg.Z.setColor(e);break;case o.gQ.textBg:$g.Z.setColor(e);break;case o.gQ.photoShadow:{const{styles:{shadow:{currentEffect:t}}}=g.ZP.getCurrConfig;t===ds.w.frame?nr.ZP.setEffect(t,{frameColor:e}):nr.ZP.setEffect(t,{color:e});break}}},handleFrameColorUpdate(e){const{decoration:t,decorationTop:n}=g.ZP.getCurrConfig;let r=[],i="";t&&n&&t.color.length&&n.color.length?this.currSelectedColorIndex<=t.color.length-1?(i="decorationColors",r=[...t.color],r[this.currSelectedColorIndex]=e):(i="decorationTopColors",r=[...n.color],r[this.currSelectedColorIndex-t.color.length]=e):(t&&t.color.length?(i="decorationColors",r=[...t.color]):n&&n.color.length&&(i="decorationTopColors",r=[...n.color]),r[this.currSelectedColorIndex]=e),er.Z.updateFrameDecorColor({pageIndex:g.ZP.pageIndex,layerIndex:g.ZP.layerIndex,subLayerIdx:g.ZP.subLayerIdx},{[i]:r})},recordChange(){cn.Z.record()},openColorMore(){this.$emit("pushHistory","color-more")},openColorPicker(){this.$emit("pushHistory","color-picker")},selectColor(e){this.currSelectedColorIndex=e,_e.ZP.setCurrColor(this.getDocumentColors[e])}})});const M_=(0,oe.Z)(O_,[["render",I_],["__scopeId","data-v-71abb027"],["__file","PanelColor.vue"]]);var A_=M_;const $_=e=>((0,P.dD)("data-v-3f7d1433"),e=e(),(0,P.Cn)(),e),F_={key:0,class:"full-width flex items-center flex-column"},j_={class:"panel-download__progress mt-5"},B_={class:"body-SM text-blue-1 py-10"},R_={class:"body-SM text-gray-3 py-10"},H_={key:1,class:"full-width full-width flex items-center flex-column"},U_={class:"body-SM text-blue-1 py-10"},W_={class:"text-H6"},V_=$_((()=>(0,P._)("hr",{class:"full-width"},null,-1))),G_={key:1,class:"full-width"},q_={key:2,class:"flex flex-column items-center mb-10"},K_={key:3,class:"full-width"},Y_={class:"body-3"},X_={key:3,class:"full-width"},Q_={key:6,class:"full-width"},J_={class:"text-H6"},ek=$_((()=>(0,P._)("hr",{class:"full-width"},null,-1))),tk=$_((()=>(0,P._)("hr",{class:"full-width"},null,-1))),nk={class:"text-H6"},rk=$_((()=>(0,P._)("hr",{class:"full-width"},null,-1))),ik={key:3,class:"flex flex-column"},ok=["onClick"],sk={class:"flex flex-column p-5"},ak={class:"body-XS text-gray-3 text-left"},lk={key:4,class:"flex flex-column"},ck=["onClick"],dk={class:"flex flex-between p-5 full-width"},uk={class:"body-S text-left"},gk={class:"text-gray-4 body-XS"},pk={key:5,class:"flex flex-column"},hk=["onClick"],mk={class:"flex flex-between p-5 full-width"},yk={class:"body-XS text-left"},fk={key:6,class:"flex flex-column"},bk={class:"flex flex-between full-width items-center"},vk={class:"text-H6"},wk=["onClick"],Nk={key:7,class:"flex flex-column"},Sk=["onClick"],xk={class:"flex flex-between p-5 full-width"},Pk={class:"body-S text-left"},Ik=["onClick"],_k={class:"body-XXS text-gray-2"};function kk(e,t,n,r,i,o){const s=(0,P.up)("animation"),a=(0,P.up)("nubtn"),l=(0,P.up)("mobile-jump-btn"),c=(0,P.up)("mobile-slider"),d=(0,P.up)("mobile-props-toggle"),u=(0,P.up)("svg-icon"),g=(0,P.up)("download-type-option");return(0,P.wg)(),(0,P.iD)("div",{class:"panel-download",style:(0,k.j5)(e.containerStyles)},[e.polling?((0,P.wg)(),(0,P.iD)("div",F_,[(0,P.Wm)(s,{class:"animation-downloading",path:"/lottie/download.json"}),(0,P._)("div",j_,[(0,P._)("div",{class:"panel-download__progress-value body-SM",style:(0,k.j5)({width:`${e.progress}%`})},null,4)]),(0,P._)("span",B_,(0,k.zw)(e.$t("NN0824")),1),(0,P._)("span",R_,(0,k.zw)(e.$t("NN0825")),1),(0,P.Wm)(a,{size:"mid-full",onClick:e.cancelDownload},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0203")),1)])),_:1},8,["onClick"])])):e.downloaded?((0,P.wg)(),(0,P.iD)("div",H_,[(0,P.Wm)(s,{class:"animation-downloaded",path:"/lottie/downloaded.json",loop:!1}),(0,P._)("span",U_,(0,k.zw)(e.$t("NN0826")),1),(0,P.Wm)(a,{size:"mid-full",onClick:t[0]||(t[0]=t=>e.$emit("close"))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0827")),1)])),_:1})])):"setting"===e.currState?((0,P.wg)(),(0,P.iD)(P.HY,{key:2},[(0,P._)("div",W_,(0,k.zw)(e.$t("NN0121")),1),(0,P.Wm)(l,{title:e.selectedType.name,iconName:"chevron-right",onClick:t[1]||(t[1]=t=>e.handleTypeSelectorAction("type"))},null,8,["title"]),V_,"scale"in e.selected?((0,P.wg)(),(0,P.j4)(l,{key:0,title:`${e.$t("NN0122")}`,description:`${e.selected.scale} ${e.$t("NN0123")}`,iconName:"chevron-right",onClick:t[2]||(t[2]=t=>e.handleTypeSelectorAction("size"))},null,8,["title","description"])):(0,P.kq)("",!0),"scale"in e.selected?((0,P.wg)(),(0,P.iD)("hr",G_)):(0,P.kq)("",!0),"quality"in e.selected?((0,P.wg)(),(0,P.iD)("div",q_,[(0,P.Wm)(c,{title:`${e.$t("NN0132")}`,borderTouchArea:!0,name:`${e.$t("NN0132")}`,value:e.selectedTypeQuality,min:1,max:100,optionWidth:"32px",onUpdate:t[3]||(t[3]=t=>e.selectedTypeQuality=t)},null,8,["title","name","value"])])):(0,P.kq)("",!0),"quality"in e.selected?((0,P.wg)(),(0,P.iD)("hr",K_)):(0,P.kq)("",!0),(0,P._)("div",Y_,["omitBackground"in e.selected?((0,P.wg)(),(0,P.j4)(d,{key:0,class:"py-5",title:`${e.$t("NN0215")}`,modelValue:e.selectedOmitBg,"onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedOmitBg=t)},null,8,["title","modelValue"])):(0,P.kq)("",!0),"pdf_print"===e.selectedTypeVal&&"bleed"in e.selected?((0,P.wg)(),(0,P.j4)(d,{key:1,class:"py-5",title:`${e.$t("NN0774")}`,modelValue:2===e.selected.bleed,"onUpdate:modelValue":t[5]||(t[5]=t=>e.handleUpdate("bleed",t?2:1))},null,8,["title","modelValue"])):(0,P.kq)("",!0),"bleed"in e.selected?((0,P.wg)(),(0,P.j4)(d,{key:2,class:"py-5",title:`${e.$t("NN0775")}`,modelValue:e.selectedBleed,"onUpdate:modelValue":t[6]||(t[6]=t=>e.selectedBleed=t)},null,8,["title","modelValue"])):(0,P.kq)("",!0),"bleed"in e.selected&&"pdf_print"!==e.selectedTypeVal?((0,P.wg)(),(0,P.iD)("hr",X_)):(0,P.kq)("",!0),"pdf_print"===e.selectedTypeVal&&"outline"in e.selected?((0,P.wg)(),(0,P.j4)(d,{key:4,class:"py-5",title:`${e.$t("NN0794")}`,modelValue:1===e.selected.outline,"onUpdate:modelValue":t[7]||(t[7]=t=>e.handleUpdate("outline",t?1:0))},null,8,["title","modelValue"])):(0,P.kq)("",!0),"outline"in e.selected?((0,P.wg)(),(0,P.j4)(d,{key:5,class:"py-5",title:`${e.$t("NN0776")}`,modelValue:2===e.selected.outline,"onUpdate:modelValue":t[8]||(t[8]=t=>e.handleUpdate("outline",t?2:0))},null,8,["title","modelValue"])):(0,P.kq)("",!0),"outline"in e.selected?((0,P.wg)(),(0,P.iD)("hr",Q_)):(0,P.kq)("",!0),"jpg"!==e.selectedTypeVal&&"png"!==e.selectedTypeVal?((0,P.wg)(),(0,P.j4)(l,{key:7,class:"py-5",title:`${e.$t("NN0777")}`,description:e.colorFormats[e.selectedTypeVal][e.selected.cmyk?1:0].label,iconName:"chevron-right",onClick:t[9]||(t[9]=t=>e.handleTypeSelectorAction("colorMode"))},null,8,["title","description"])):(0,P.kq)("",!0),(0,P._)("div",J_,(0,k.zw)(e.$t("NN0124")),1),(0,P.Wm)(l,{title:e.noPageRange&&"spec"===e.rangeType?`${e.$t("NN0823")}`:e.rangeTypeText,iconName:"chevron-right",textSize:"body-SM",textColor:e.noPageRange&&"spec"===e.rangeType?"text-red":"text-gray-2",onClick:t[10]||(t[10]=t=>e.handleTypeSelectorAction("selectPage"))},null,8,["title","textColor"]),ek,(0,P.Wm)(a,{theme:"pdf_print"!==e.selectedTypeVal||e.inReviewMode?"primary":"icon_text",size:"mid-full",icon:["pro","alarm"],disabled:e.isButtonDisabled,onClick:t[11]||(t[11]=t=>e.handleSubmit())},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0010")),1)])),_:1},8,["theme","disabled"]),e.isAdmin||e.onDev?((0,P.wg)(),(0,P.iD)(P.HY,{key:8},[tk,(0,P._)("div",nk,(0,k.zw)(e.$t("NN0460")),1),(0,P.Wm)(l,{title:e.selectedDevLabel,iconName:"chevron-right",onClick:t[12]||(t[12]=t=>e.handleTypeSelectorAction("domain"))},null,8,["title"]),rk,(0,P.Wm)(a,{theme:"pdf_print"!==e.selectedTypeVal||e.inReviewMode?"primary":"icon_text",size:"mid-full",icon:["pro","alarm"],disabled:e.isButtonDisabled,onClick:t[13]||(t[13]=t=>e.handleSubmit(!0))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(`${e.$t("NN0010")} (${e.$t("NN0460")})`),1)])),_:1},8,["theme","disabled"])],64)):(0,P.kq)("",!0)])],64)):"type"===e.currState?((0,P.wg)(),(0,P.iD)("div",ik,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.typeOptions,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"flex items-center full-width",key:t.value,onClick:n=>e.handleSelectFileType(t)},[(0,P.Wm)(u,{class:"mr-10",iconColor:t.value===e.selectedType.value?"blue-1":"light-gray",iconName:t.value===e.selectedType.value?"radio-checked":"radio",iconWidth:"16px"},null,8,["iconColor","iconName"]),(0,P._)("div",sk,[(0,P.Wm)(g,{name:t.name,tag:t.tag},null,8,["name","tag"]),(0,P._)("div",ak,(0,k.zw)(t.desc),1)])],8,ok)))),128))])):"size"===e.currState?((0,P.wg)(),(0,P.iD)("div",lk,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.scaleOptions,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"flex items-center full-width",key:t,onClick:n=>e.handleUpdate("scale",t)},[(0,P.Wm)(u,{class:"mr-10",iconColor:t===e.selected.scale?"blue-1":"light-gray",iconName:t===e.selected.scale?"radio-checked":"radio",iconWidth:"16px"},null,8,["iconColor","iconName"]),(0,P._)("div",dk,[(0,P._)("div",uk,(0,k.zw)(`${t} ${e.$t("NN0123")}`),1),(0,P._)("div",null,[(0,P._)("span",gk,(0,k.zw)(`${Math.round(e.currPageSize.width*t)}x${Math.round(e.currPageSize.height*t)}`),1)])])],8,ck)))),128))])):"colorMode"===e.currState?((0,P.wg)(),(0,P.iD)("div",pk,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.colorFormats[e.selectedTypeVal],(t=>((0,P.wg)(),(0,P.iD)("div",{class:"flex items-center full-width",key:t.value,onClick:n=>e.handleColorModeSelect(t)},[(0,P.Wm)(u,{class:"mr-10",iconColor:t.value===e.colorFormats[e.selectedTypeVal][e.selected.cmyk?1:0].value?"blue-1":"light-gray",iconName:t.value===e.colorFormats[e.selectedTypeVal][e.selected.cmyk?1:0].value?"radio-checked":"radio",iconWidth:"16px"},null,8,["iconColor","iconName"]),(0,P._)("div",mk,[(0,P._)("div",yk,(0,k.zw)(`${t.label}`),1)])],8,hk)))),128))])):"selectPage"===e.currState?((0,P.wg)(),(0,P.iD)("div",fk,[(0,P._)("div",bk,[(0,P._)("div",vk,(0,k.zw)(e.$t("NN0124")),1),(0,P._)("div",{onClick:t[14]||(t[14]=(...t)=>e.handleDeselectAll&&e.handleDeselectAll(...t))},(0,k.zw)(e.$t("NN0130")),1)]),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.pagesLength,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"flex items-center",key:t,onClick:n=>e.handlePageRageSelect(t-1)},[(0,P.Wm)(u,{class:"mr-10",iconColor:e.pageRange.includes(t-1)?"blue-1":"light-gray",iconName:e.pageRange.includes(t-1)?"checkbox-checked":"checkbox",iconWidth:"16px"},null,8,["iconColor","iconName"]),(0,P._)("span",null,(0,k.zw)(`${e.$t("NN0134",{num:`${t}`})}${e.currFocusPageIndex===t-1?`(${e.$t("NN0125")})`:""}`),1)],8,wk)))),128))])):"domain"===e.currState?((0,P.wg)(),(0,P.iD)("div",Nk,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.devs,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"flex items-center full-width",key:t.value,onClick:n=>e.handleDevSelect(t)},[(0,P.Wm)(u,{class:"mr-10",iconColor:t.value===e.selectedDev?"blue-1":"light-gray",iconName:t.value===e.selectedDev?"radio-checked":"radio",iconWidth:"16px"},null,8,["iconColor","iconName"]),(0,P._)("div",xk,[(0,P._)("div",Pk,(0,k.zw)(`${t.label}`),1)])],8,Sk)))),128))])):((0,P.wg)(!0),(0,P.iD)(P.HY,{key:8},(0,P.Ko)(e.btnInfo,((t,n)=>((0,P.wg)(),(0,P.iD)("div",{class:"panel-download__action-btn",key:`panel-download-${n}`,onClick:n=>e.handleBtnAction(t.icon)},[(0,P._)("div",null,[(0,P.Wm)(u,{class:"pointer",iconName:t.icon,iconWidth:"18px",iconColor:"gray-2"},null,8,["iconName"])]),(0,P._)("span",_k,(0,k.zw)(t.text),1)],8,Ik)))),128))],4)}var Zk=n(1840),Ck=n(43550),zk=n(16646),Tk=n(26072),Lk=n(16080),Ek=Object.defineProperty,Dk=Object.defineProperties,Ok=Object.getOwnPropertyDescriptors,Mk=Object.getOwnPropertySymbols,Ak=Object.prototype.hasOwnProperty,$k=Object.prototype.propertyIsEnumerable,Fk=(e,t,n)=>t in e?Ek(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jk=(e,t)=>{for(var n in t||(t={}))Ak.call(t,n)&&Fk(e,n,t[n]);if(Mk)for(var n of Mk(t))$k.call(t,n)&&Fk(e,n,t[n]);return e},Bk=(e,t)=>Dk(e,Ok(t)),Rk=(0,P.aZ)({components:{Animation:Zk.Z,MobileSlider:ro,MobileJumpBtn:zk.Z,MobilePropsToggle:Tk.Z,DownloadTypeOption:Ck.Z},props:{panelHistory:{type:Array,default:[]}},mixins:[Lk.Z],emits:["pushHistory","back","close"],data(){return{btnInfo:[{text:this.$t("NN0839"),icon:"download",disabled:!1},{text:this.$t("NN0840"),icon:"all-file",disabled:!1},{text:this.$t("NN0841"),icon:"file",disabled:!1}]}},computed:Bk(jk({},(0,ze.Se)({pagesLength:"getPagesLength",currFocusPageIndex:"getCurrFocusPageIndex",getPageSize:"getPageSize"})),{containerStyles(){return{gridAutoRows:"setting"===this.currState?"auto":"1fr",gridTemplateColumns:0!==this.historySize||this.polling||this.downloaded?"1fr":"1fr 1fr 1fr",textAlign:"setting"===this.currState?"left":"center"}},historySize(){return this.panelHistory.length},currState(){return this.panelHistory[this.historySize-1]},noPageRange(){return 0===this.pageRange.length},currPageSize(){return this.getPageSize(this.currFocusPageIndex)}}),methods:{handleBtnAction(e){switch(e){case"download":this.handleSubmit(!1,"current");break;case"all-file":this.handleSubmit(!1,"all");break;case"file":this.pushHistory("setting")}},handleTypeSelectorAction(e){switch(e){case"colorMode":case"size":case"type":case"domain":break;case"selectPage":this.rangeType="spec",this.pageRange=[this.currentPageIndex];break}this.pushHistory(e)},pushHistory(e){this.$emit("pushHistory",e)},handleSelectFileType(e){this.handleSelectType(e),this.$emit("back")},handlePageRageSelect(e){this.pageRange.includes(e)?this.pageRange.splice(e,1):this.pageRange.push(e)},handleDeselectAll(){this.pageRange=[]}}});const Hk=(0,oe.Z)(Rk,[["render",kk],["__scopeId","data-v-3f7d1433"],["__file","PanelDownload.vue"]]);var Uk=Hk;const Wk={class:"panel-flip bg-white"},Vk=["onClick"],Gk={class:"ml-5 body-2"};function qk(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",Wk,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.flipData(),((t,n)=>((0,P.wg)(),(0,P.iD)("div",{class:"panel-flip__item",key:`popup-${n}`,onClick:n=>e.handleFlipAction(t)},[(0,P.Wm)(s,{class:"pointer",iconName:t.icon,iconWidth:"12px",iconColor:"gray-1"},null,8,["iconName"]),(0,P._)("span",Gk,(0,k.zw)(t.text),1)],8,Vk)))),128))])}var Kk=Object.defineProperty,Yk=Object.defineProperties,Xk=Object.getOwnPropertyDescriptors,Qk=Object.getOwnPropertySymbols,Jk=Object.prototype.hasOwnProperty,eZ=Object.prototype.propertyIsEnumerable,tZ=(e,t,n)=>t in e?Kk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nZ=(e,t)=>{for(var n in t||(t={}))Jk.call(t,n)&&tZ(e,n,t[n]);if(Qk)for(var n of Qk(t))eZ.call(t,n)&&tZ(e,n,t[n]);return e},rZ=(e,t)=>Yk(e,Xk(t)),iZ=(0,P.aZ)({emits:[],data(){return{}},computed:rZ(nZ({},(0,ze.Se)({currSelectedInfo:"getCurrSelectedInfo"})),{layerNum(){return this.currSelectedInfo.layers.length}}),methods:{flipData(){const e=["flip-h","flip-v"],t=[`${this.$t("NN0053")}`,`${this.$t("NN0054")}`];return e.map(((n,r)=>({icon:e[r],text:t[r]})))},handleFlipAction(e){this.layerNum>0?Fo.Z.mappingIconAction(e.icon):u.Z.inBgSettingMode&&u.Z.handleImageFlip(e.icon)}}});const oZ=(0,oe.Z)(iZ,[["render",qk],["__scopeId","data-v-5f8d88b3"],["__file","PanelFlip.vue"]]);var sZ=oZ;const aZ={class:"panel-font-format"},lZ={class:"panel-font-format__bar mb-15"},cZ={class:"panel-font-format__bar"};function dZ(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",aZ,[(0,P._)("div",lZ,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.mappingIcons("font"),((t,n)=>((0,P.wg)(),(0,P.j4)(s,{class:(0,k.C_)(["record-selection feature-button p-5",{pointer:e.iconClickable(t)}]),key:`gp-action-icon-${n}`,id:`icon-${t}`,iconName:t,iconWidth:"20px",iconColor:e.iconIsActived(t)?"blue-1":e.iconClickable(t)?"gray-2":"gray-4",onTouchstart:n=>e.onPropertyClick(t)},null,8,["class","id","iconName","iconColor","onTouchstart"])))),128))]),(0,P._)("div",cZ,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.mappingIcons("font-align"),((t,n)=>((0,P.wg)(),(0,P.j4)(s,{class:"pointer feature-button p-5",key:`gp-action-icon-${n}`,iconName:t,iconWidth:"20px",iconColor:e.iconIsActived(t)?"blue-1":"gray-2",onTouchstart:n=>e.onParaPropsClick(t)},null,8,["iconName","iconColor","onTouchstart"])))),128))])])}var uZ=Object.defineProperty,gZ=Object.defineProperties,pZ=Object.getOwnPropertyDescriptors,hZ=Object.getOwnPropertySymbols,mZ=Object.prototype.hasOwnProperty,yZ=Object.prototype.propertyIsEnumerable,fZ=(e,t,n)=>t in e?uZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bZ=(e,t)=>{for(var n in t||(t={}))mZ.call(t,n)&&fZ(e,n,t[n]);if(hZ)for(var n of hZ(t))yZ.call(t,n)&&fZ(e,n,t[n]);return e},vZ=(e,t)=>gZ(e,pZ(t)),wZ=(0,P.aZ)({emits:[],computed:vZ(bZ({},(0,ze.rn)("text",["sel","props"])),{hasCurveText(){const{getCurrLayer:e,subLayerIdx:t}=g.ZP;return-1!==t?jg.Z.isCurvedText(e.layers[t].styles.textShape):"text"===e.type?jg.Z.isCurvedText(e.styles.textShape):e.layers.some((e=>"text"===e.type&&jg.Z.isCurvedText(e.styles.textShape)))},hasOnlyVerticalText(){const{getCurrLayer:e,subLayerIdx:t}=g.ZP;return-1!==t?e.layers[t].styles.writingMode.includes("vertical"):"text"===e.type?e.styles.writingMode.includes("vertical"):!e.layers.some((e=>"text"===e.type&&!e.styles.writingMode.includes("vertical")))},hasTextFill(){const{getCurrLayer:e,subLayerIdx:t}=g.ZP;return-1!==t?"none"!==e.layers[t].styles.textFill.name:"text"===e.type?"none"!==e.styles.textFill.name:e.layers.some((e=>"text"===e.type&&"none"!==e.styles.textFill.name))}}),methods:{mappingIcons(e){return Fo.Z.mappingIconSet(e)},iconClickable(e){switch(e){case"font-vertical":return!this.hasCurveText;case"underline":return!(this.hasOnlyVerticalText||this.hasTextFill);case"italic":return!this.hasOnlyVerticalText;default:return!0}},iconIsActived(e){switch(e){case"bold":if("bold"===this.props.weight)return!0;break;case"underline":if("underline"===this.props.decoration&&!this.hasTextFill)return!0;break;case"italic":if("italic"===this.props.style)return!0;break;case"font-vertical":if(this.props.isVertical)return!0;break;case"text-align-left":if("left"===this.props.textAlign)return!0;break;case"text-align-center":if("center"===this.props.textAlign)return!0;break;case"text-align-right":if("right"===this.props.textAlign)return!0;break;case"text-align-justify":if("justify"===this.props.textAlign)return!0;break}return!1},onPropertyClick(e){if("font-vertical"===e){if(this.hasCurveText)return;bp.Z.onPropertyClick(e,this.props.isVertical?0:1,this.sel.start,this.sel.end)}else switch(e){case"bold":this.handleSpanPropClick("weight",["bold","normal"]);break;case"underline":if(this.hasOnlyVerticalText)return;this.handleSpanPropClick("decoration",["underline","none"]);break;case"italic":if(this.hasOnlyVerticalText)return;this.handleSpanPropClick("style",["italic","normal"]);break}this.updateLayerProps({isEdited:!0}),cn.Z.record()},updateLayerProps(e){const{getCurrLayer:t,layerIndex:n,subLayerIdx:r,pageIndex:i}=g.ZP;switch(t.type){case"text":g.ZP.updateLayerProps(i,n,e);break;case"group":if(-1!==r)g.ZP.updateSubLayerProps(i,n,r,e);else{const r=t.layers;r.forEach(((t,r)=>{"text"===t.type&&g.ZP.updateSubLayerProps(i,n,r,e)}))}}},handleSpanPropClick(e,t){const{getCurrLayer:n,layerIndex:r,subLayerIdx:i}=g.ZP,o=this.props[e]===t[0]?t[1]:t[0];if("group"===n.type&&-1===i||"tmp"===n.type){const t=n.layers;t.forEach(((t,n)=>{if("text"===t.type){const i=l.Z.deepCopy(t.paragraphs);i.forEach((n=>{n.spans.forEach((n=>{t.styles.writingMode.includes("vertical")&&("decoration"===e&&"underline"===o||"style"===e&&"italic"===o)||(n.styles[e]=o)}))})),g.ZP.updateSubLayerProps(g.ZP.pageIndex,r,n,{paragraphs:i})}}))}else ri.Z.applySpanStyle(e,o);bp.Z.updateTextPropsState({[e]:o})},onParaPropsClick(e){switch(e){case"text-align-left":this.handleTextAlign("left");break;case"text-align-center":this.handleTextAlign("center");break;case"text-align-right":this.handleTextAlign("right");break;case"text-align-justify":this.handleTextAlign("justify");break}cn.Z.record()},handleTextAlign(e){const{getCurrLayer:t,layerIndex:n,subLayerIdx:r,pageIndex:i}=g.ZP;if("group"===t.type&&-1===r||"tmp"===t.type){const r=t.layers;r.forEach(((t,r)=>{if("text"===t.type){const o=l.Z.deepCopy(t.paragraphs);o.forEach((t=>t.styles.align=e)),g.ZP.updateSubLayerProps(i,n,r,{paragraphs:o})}})),bp.Z.updateTextPropsState({textAlign:e})}else ri.Z.applyParagraphStyle("align",e),bp.Z.updateTextPropsState({textAlign:e})}}});const NZ=(0,oe.Z)(wZ,[["render",dZ],["__scopeId","data-v-5f59bebc"],["__file","PanelFontFormat.vue"]]);var SZ=NZ;const xZ={class:"panel-font-size"},PZ=["max","min","disabled"];function IZ(e,t,n,r,i,o){const s=(0,P.up)("font-size-selector"),a=(0,P.Q2)("progress");return(0,P.wg)(),(0,P.iD)("div",xZ,[(0,P.Wm)(s),(0,P.wy)((0,P._)("input",{class:"panel-font-size__range-input input__slider--range","onUpdate:modelValue":t[0]||(t[0]=t=>e.fontSize=t),max:e.fieldRange.fontSize.max,min:e.fieldRange.fontSize.min,step:"1",type:"range",disabled:"--"===e.fontSize,onPointerup:t[1]||(t[1]=(...t)=>e.handleChangeStop&&e.handleChangeStop(...t))},null,40,PZ),[[a],[Z.nr,e.fontSize,void 0,{number:!0}]])])}var _Z=Object.defineProperty,kZ=Object.defineProperties,ZZ=Object.getOwnPropertyDescriptors,CZ=Object.getOwnPropertySymbols,zZ=Object.prototype.hasOwnProperty,TZ=Object.prototype.propertyIsEnumerable,LZ=(e,t,n)=>t in e?_Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EZ=(e,t)=>{for(var n in t||(t={}))zZ.call(t,n)&&LZ(e,n,t[n]);if(CZ)for(var n of CZ(t))TZ.call(t,n)&&LZ(e,n,t[n]);return e},DZ=(e,t)=>kZ(e,ZZ(t)),OZ=(0,P.aZ)({emits:[],components:{FontSizeSelector:zp},data(){return{fieldRange:{fontSize:{min:1,max:144}}}},computed:DZ(EZ(EZ({},(0,ze.Se)({layerIndex:"getCurrSelectedIndex"})),(0,ze.rn)("text",["sel","props"])),{fontSize:{get(){return"--"===this.props.fontSize?this.props.fontSize:m().round(this.props.fontSize,2)},set(e){e=l.Z.boundValue(e,this.fieldRange.fontSize.min,this.fieldRange.fontSize.max),bp.Z.fontSizeHandler(e,!1)}}}),methods:{handleChangeStop(){cn.Z.record()}}});const MZ=(0,oe.Z)(OZ,[["render",IZ],["__scopeId","data-v-3209b760"],["__file","PanelFontSize.vue"]]);var AZ=MZ;const $Z={class:"panel-spacing"};function FZ(e,t,n,r,i,o){const s=(0,P.up)("mobile-slider");return(0,P.wg)(),(0,P.iD)("div",$Z,[(0,P.Wm)(s,{title:`${e.$t("NN0109")}`,borderTouchArea:!0,value:e.fontSpacing,min:e.fieldRange.fontSpacing.min,max:e.fieldRange.fontSpacing.max,step:1,name:"fs",onUpdate:e.updateValue},null,8,["title","value","min","max","onUpdate"]),(0,P.Wm)(s,{title:`${e.$t("NN0110")}`,borderTouchArea:!0,value:e.lineHeight,min:e.fieldRange.lineHeight.min,max:e.fieldRange.lineHeight.max,step:.01,name:"lh",onUpdate:e.updateValue},null,8,["title","value","min","max","step","onUpdate"])])}var jZ=Object.defineProperty,BZ=Object.defineProperties,RZ=Object.getOwnPropertyDescriptors,HZ=Object.getOwnPropertySymbols,UZ=Object.prototype.hasOwnProperty,WZ=Object.prototype.propertyIsEnumerable,VZ=(e,t,n)=>t in e?jZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GZ=(e,t)=>{for(var n in t||(t={}))UZ.call(t,n)&&VZ(e,n,t[n]);if(HZ)for(var n of HZ(t))WZ.call(t,n)&&VZ(e,n,t[n]);return e},qZ=(e,t)=>BZ(e,RZ(t)),KZ=(0,P.aZ)({emits:[],components:{MobileSlider:ro},data(){return{fieldRange:{lineHeight:Fo.Z.mappingMinMax("lineHeight"),fontSpacing:Fo.Z.mappingMinMax("letterSpacing")}}},computed:qZ(GZ({},(0,ze.rn)("text",["sel","props"])),{lineHeight(){return"--"===this.props.lineHeight?this.props.lineHeight:parseFloat(this.props.lineHeight)},fontSpacing(){return"--"===this.props.fontSpacing?this.props.fontSpacing:parseFloat(this.props.fontSpacing)}}),methods:{updateValue(e,t){this.setParagraphProp("fs"===t?"fontSpacing":"lineHeight",e)},setParagraphProp(e,t){Tp.Z.setParagraphProp(e,t)}}});const YZ=(0,oe.Z)(KZ,[["render",FZ],["__scopeId","data-v-5bd85071"],["__file","PanelFontSpacing.vue"]]);var XZ=YZ;const QZ=e=>((0,P.dD)("data-v-680606e6"),e=e(),(0,P.Cn)(),e),JZ={class:"panel-more"},eC={class:"panel-more__page-name"},tC=["placeholder","value"],nC=QZ((()=>(0,P._)("hr",{class:"panel-more__hr"},null,-1))),rC={class:"body-2 pointer"},iC={class:"body-2 pointer"},oC={class:"body-2 pointer"},sC=QZ((()=>(0,P._)("hr",{class:"panel-more__hr"},null,-1))),aC={class:"body-2 pointer"},lC=QZ((()=>(0,P._)("hr",{class:"panel-more__hr"},null,-1))),cC={class:"body-2 pointer"},dC=QZ((()=>(0,P._)("hr",{class:"panel-more__hr"},null,-1))),uC={class:"body-2 pointer"},gC=QZ((()=>(0,P._)("hr",{class:"panel-more__hr"},null,-1))),pC=QZ((()=>(0,P._)("span",{class:"body-2 pointer"},"domain 選單",-1))),hC=[pC],mC=QZ((()=>(0,P._)("span",{class:"body-2 pointer"},"testError",-1))),yC=[mC],fC=QZ((()=>(0,P._)("span",null,"Toggle admin tool",-1))),bC=[fC],vC=QZ((()=>(0,P._)("span",null,"Toggle show touch point",-1))),wC=[vC],NC={class:"text-gray-3"},SC=["onClick"],xC={class:"body-2 pointer"};function PC(e,t,n,r,i,o){return(0,P.wg)(),(0,P.iD)("div",JZ,[e.inInitialState?((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[(0,P._)("div",eC,[(0,P._)("input",{class:"body-1 text-gray-2",type:"text",placeholder:`${e.$t("NN0079")}`,maxlength:"30",value:e.pagesName,onChange:t[0]||(t[0]=(...t)=>e.setPagesName&&e.setPagesName(...t)),ref:"pagesName"},null,40,tC)]),nC,(0,P._)("div",{class:"panel-more__item",onClick:t[1]||(t[1]=t=>e.save())},[(0,P._)("span",rC,(0,k.zw)(e.$t("NN0009")),1)]),(0,P._)("div",{class:"panel-more__item",onClick:t[2]||(t[2]=t=>e.newDesign())},[(0,P._)("span",iC,(0,k.zw)(e.$tc("NN0072")),1)]),(0,P._)("div",{class:"panel-more__item",onClick:t[3]||(t[3]=t=>e.copyDesignLink())},[(0,P._)("span",oC,(0,k.zw)(e.$tc("NN0862",{item:`${e.$t("NN0863")}`})),1)]),sC,(0,P._)("div",{class:"panel-more__item",onClick:t[4]||(t[4]=t=>e.toggleBleed())},[(0,P._)("span",aC,(0,k.zw)(e.hasBleed?`${e.$t("NN0779")}`:`${e.$t("NN0778")}`),1)]),lC,(0,P._)("div",{class:"panel-more__item",onClick:t[5]||(t[5]=t=>e.goToPage("MyDesign"))},[(0,P._)("span",cC,(0,k.zw)(e.$t("NN0080")),1)]),dC,(0,P._)("div",{class:"panel-more__item",onClick:t[6]||(t[6]=t=>e.onLogoutClicked())},[(0,P._)("span",uC,(0,k.zw)(e.$tc("NN0167",2)),1)]),e.debugMode?((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[gC,(0,P._)("div",{class:"panel-more__item",onClick:t[7]||(t[7]=t=>e.onDomainListClicked())},hC),(0,P._)("div",{class:"panel-more__item",onClick:t[8]||(t[8]=t=>e.testError())},yC)],64)):(0,P.kq)("",!0),e.isAdmin?((0,P.wg)(),(0,P.iD)("div",{key:1,class:"panel-more__item",onClick:t[9]||(t[9]=(...t)=>e.toggleDebugTool&&e.toggleDebugTool(...t))},bC)):(0,P.kq)("",!0),e.isAdmin?((0,P.wg)(),(0,P.iD)("div",{key:2,class:"panel-more__item",onClick:t[10]||(t[10]=(...t)=>e.toggleShowTouchPoint&&e.toggleShowTouchPoint(...t))},wC)):(0,P.kq)("",!0),(0,P._)("div",{class:"body-2 panel-more__item",onPointerdown:t[11]||(t[11]=(0,Z.iM)(((...t)=>e.handleDebugMode&&e.handleDebugMode(...t)),["prevent"]))},[(0,P._)("span",NC,"Version: "+(0,k.zw)(e.appVersion)+"/"+(0,k.zw)(e.osVer)+"/"+(0,k.zw)(e.modelName)+" "+(0,k.zw)(e.buildNumber)+" "+(0,k.zw)(e.domain)+" "+(0,k.zw)(e.hostId)+" "+(0,k.zw)(e.userId),1)],32)],64)):(0,P.kq)("",!0),"domain-list"===e.lastHistory?((0,P.wg)(!0),(0,P.iD)(P.HY,{key:1},(0,P.Ko)(e.domainList,(t=>((0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["panel-more__item",{selected:e.handleDomainSelected(t.selected)}]),key:t.key,onClick:n=>e.switchDomain(t.key)},[(0,P._)("span",xC,(0,k.zw)(t.title),1)],10,SC)))),128)):(0,P.kq)("",!0)])}var IC=n(3665),_C=n(80987),kC=Object.defineProperty,ZC=Object.defineProperties,CC=Object.getOwnPropertyDescriptors,zC=Object.getOwnPropertySymbols,TC=Object.prototype.hasOwnProperty,LC=Object.prototype.propertyIsEnumerable,EC=(e,t,n)=>t in e?kC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DC=(e,t)=>{for(var n in t||(t={}))TC.call(t,n)&&EC(e,n,t[n]);if(zC)for(var n of zC(t))LC.call(t,n)&&EC(e,n,t[n]);return e},OC=(e,t)=>ZC(e,CC(t)),MC=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),AC=(0,P.aZ)({emits:["close","pushHistory"],props:{panelHistory:{type:Array,default:()=>[]}},data(){return{debugModeTimer:-1,debugModeCounter:0,domain:"vivipic.com"!==window.location.hostname?` - ${window.location.hostname.replace(".vivipic.com","")}`:"",debugMode:!1}},mounted(){return MC(this,null,(function*(){var e,t;const n=null!=(t=null==(e=yield S.Z.getState("debugMode"))?void 0:e.value)&&t;this.debugMode=n}))},computed:OC(DC(DC({},(0,ze.rn)("user",["enableAdminView","userId"])),(0,ze.Se)({pagesLength:"getPagesLength",hasBleed:"getHasBleed",isAdmin:"user/isAdmin"})),{historySize(){return this.panelHistory.length},inInitialState(){return 0===this.historySize},lastHistory(){return this.panelHistory[this.historySize-1]},pagesName(){return p.Z.pagesName},buildNumber(){const{VUE_APP_BUILD_NUMBER:e}={NODE_ENV:"production",VUE_APP_BASE_URL:"https://apiv2.vivipic.com/",VUE_APP_I18N_FALLBACK_LOCALE:"us",VUE_APP_I18N_LOCALE:"us",VUE_APP_PEXELS_ACCESS_KEY:"563492ad6f917000010000015127aeffafd440fd8aff2407235209ec",VUE_APP_PEXELS_BASE_URL:"https://api.pexels.com/v1/",VUE_APP_SENTRY_DSN:"https://a8e90bb3d1504f749774c46a9bbe4894@o976922.ingest.sentry.io/5933371",VUE_APP_TOKEN:"eZB1CqRl52WQFAzFV3VG_dfBSs8HLu9WqYHcHYnCOeU",VUE_APP_UNSPLASH_ACCESS_KEY:"-7OObRotlL9UUXO4YspkINrFbbMEPSKkreEfWirPtX8",VUE_APP_UNSPLASH_APP_NAME:"nuDesign",VUE_APP_UNSPLASH_BASE_URL:"https://api.unsplash.com/",VUE_APP_UNSPLASH_Client_ID:"alan861117",VUE_APP_VERSION:"v0.1.11-beta",BASE_URL:"/"};return e?`v.${e}`:"local"},userInfo(){return S.Z.getUserInfoFromStore()},appVersion(){return S.Z.inBrowserMode?"":this.userInfo.appVer},hostId(){return S.Z.inBrowserMode?"":this.userInfo.hostId},osVer(){return S.Z.inBrowserMode?"":this.userInfo.osVer},modelName(){return this.userInfo.modelName},domainList(){return[{key:"prod",title:"vivipic",selected:()=>"vivipic.com"===window.location.hostname},{key:"rd",title:"rd",selected:()=>"rd.vivipic.com"===window.location.hostname},{key:"qa",title:"qa",selected:()=>"qa.vivipic.com"===window.location.hostname},...new Array(6).fill(0).map(((e,t)=>({key:`dev${t}`,title:`dev${t}`,selected:()=>window.location.hostname===`dev${t}.vivipic.com`})))]}}),methods:OC(DC({},(0,ze.OI)({setUserState:"user/SET_STATE"})),{handleDomainSelected(e){return e()},newDesign(){const e=`${window.location.origin}${window.location.pathname}`;S.Z.openOrGoto(e)},save(){kt.Z.save()},onLogoutClicked(){IC.Z.logout()},goToPage(e,t=""){t?this.$router.push({name:e,query:{search:t}}):this.$router.push({name:e}),this.$emit("close")},setPagesName(e){const{value:t}=e.target;p.Z.setPagesName(t)},toggleDebugTool(){localStorage.setItem("enableAdminView",`${!this.enableAdminView}`),this.setUserState({enableAdminView:!this.enableAdminView})},toggleShowTouchPoint(){_C.Z.toggleShowingTouchPoint()},toggleBleed(){const e=!this.hasBleed;for(let t=0;t<this.pagesLength;t++)p.Z.setIsEnableBleed(e,t);cn.Z.record()},onDomainListClicked(){this.$emit("pushHistory","domain-list")},switchDomain(e){S.Z.switchDomain(e)},handleDebugMode(){this.debugModeTimer&&clearTimeout(this.debugModeTimer),this.debugModeCounter++,7===this.debugModeCounter&&this.toggleDebugMode(),this.debugModeTimer=window.setTimeout((()=>{this.debugModeCounter=0}),1e3)},toggleDebugMode(){this.debugMode=!this.debugMode,S.Z.setState("debugMode",{value:this.debugMode})},copyDesignLink(){let e=window.location.href;S.Z.inBrowserMode||(e=rr.Z.appendQuery(e,"hostId",S.Z.getUserInfoFromStore().hostId)),l.Z.copyText(e).then((()=>{this.$notify({group:"copy",text:`${this.$tc("NN0210",{content:`${this.$t("NN0863")}`})}`})}))},testError(){throw new Error("test")}})});const $C=(0,oe.Z)(AC,[["render",PC],["__scopeId","data-v-680606e6"],["__file","PanelMore.vue"]]);var FC=$C;const jC={class:"panel-nudge text-left"},BC={class:"panel-nudge__top-section"},RC={class:"body-XS"},HC={class:"panel-nudge__content"};function UC(e,t,n,r,i,o){const s=(0,P.up)("slide-toggle"),a=(0,P.up)("svg-icon"),l=(0,P.Q2)("tap-animation");return(0,P.wg)(),(0,P.iD)("div",jC,[(0,P._)("div",BC,[(0,P._)("span",RC,(0,k.zw)(e.$t("NN0888")),1),(0,P.Wm)(s,{options:e.options,modelValue:e.currOption,"onUpdate:modelValue":t[0]||(t[0]=t=>e.currOption=t),bgColor:"gray-6",switchColor:"white",optionWidth:"50px",optionHeight:"30px"},null,8,["options","modelValue"])]),(0,P._)("div",HC,[(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",{class:"panel-nudge__btn",onPointerdown:t[1]||(t[1]=t=>e.moveStepping("left")),onContextmenu:t[2]||(t[2]=(0,Z.iM)((()=>{}),["prevent"]))},[(0,P.Wm)(a,{iconName:"left-arrow",iconColor:"gray-2",iconWidth:"24px"})],32)),[[l,{bgColor:"blue-3"}]]),(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",{class:"panel-nudge__btn",onPointerdown:t[3]||(t[3]=t=>e.moveStepping("up")),onContextmenu:t[4]||(t[4]=(0,Z.iM)((()=>{}),["prevent"]))},[(0,P.Wm)(a,{style:(0,k.j5)({transform:"rotate(90deg)"}),iconName:"left-arrow",iconColor:"gray-2",iconWidth:"24px"},null,8,["style"])],32)),[[l,{bgColor:"blue-3"}]]),(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",{class:"panel-nudge__btn",onPointerdown:t[5]||(t[5]=t=>e.moveStepping("down")),onContextmenu:t[6]||(t[6]=(0,Z.iM)((()=>{}),["prevent"]))},[(0,P.Wm)(a,{style:(0,k.j5)({transform:"rotate(-90deg)"}),iconName:"left-arrow",iconColor:"gray-2",iconWidth:"24px"},null,8,["style"])],32)),[[l,{bgColor:"blue-3"}]]),(0,P.wy)(((0,P.wg)(),(0,P.iD)("div",{class:"panel-nudge__btn",onPointerdown:t[7]||(t[7]=t=>e.moveStepping("right")),onContextmenu:t[8]||(t[8]=(0,Z.iM)((()=>{}),["prevent"]))},[(0,P.Wm)(a,{style:(0,k.j5)({transform:"rotate(180deg)"}),iconName:"left-arrow",iconColor:"gray-2",iconWidth:"24px"},null,8,["style"])],32)),[[l,{bgColor:"blue-3"}]])])])}var WC=n(64094),VC=(0,P.aZ)({components:{SlideToggle:WC.Z},data(){return{options:[{label:"1px",value:"1"},{label:"10px",value:"10"}],currOption:"1"}},methods:{move(e){switch(e){case"left":kt.Z.left("10"===this.currOption);break;case"up":kt.Z.up("10"===this.currOption);break;case"down":kt.Z.down("10"===this.currOption);break;case"right":kt.Z.right("10"===this.currOption);break}},moveStepping(e,t=100){const n=(new Date).getTime(),r=window.setInterval((()=>{if((new Date).getTime()-n>500)try{this.move(e)}catch(t){le.ZP.removePointerEvent("pointerup",i),clearInterval(r)}}),t),i=()=>{le.ZP.removePointerEvent("pointerup",i),(new Date).getTime()-n<500&&this.move(e),clearInterval(r)};le.ZP.addPointerEvent("pointerup",i)}}});const GC=(0,oe.Z)(VC,[["render",UC],["__scopeId","data-v-2f3be3cc"],["__file","PanelNudge.vue"]]);var qC=GC;const KC=e=>((0,P.dD)("data-v-05330860"),e=e(),(0,P.Cn)(),e),YC={class:"panel-object-adjust"},XC={class:"panel-object-adjust__options"},QC={key:0,class:"panel-object-adjust__settings mt-25"},JC={key:1,class:"panel-object-adjust__line-dash"},ez=KC((()=>(0,P._)("div",{class:"vr"},null,-1))),tz={class:"shape-setting__value-selector__button-text body-2"},nz={class:"shape-setting__value-selector__button-text body-2"},rz={key:2,class:"panel-object-adjust__markers"},iz=["onPointerup"],oz={key:3,class:"panel-object-adjust__markers"},sz=["onPointerup"],az={class:"panel-object-adjust__options"},lz=["onPointerdown"],cz={key:0,class:"panel-object-adjust__settings mt-25"},dz={key:1,class:"panel-object-adjust__fill"},uz={class:"ml-25 body-2"},gz={class:"ml-25 body-2"};function pz(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("mobile-slider"),l=(0,P.up)("marker-icon");return(0,P.wg)(),(0,P.iD)("div",YC,[e.isLine?((0,P.wg)(),(0,P.iD)(P.HY,{key:0},[(0,P._)("div",XC,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.lineOptions,((t,n)=>((0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["panel-object-adjust__option",e.currMode===n?"bg-blue-1":"bg-gray-5"]),key:t},[(0,P.Wm)(s,{iconName:t,iconWidth:"24px",iconColor:e.currMode===n?"white":"gray-2",onPointerdown:t=>e.switchMode(n)},null,8,["iconName","iconColor","onPointerdown"])],2)))),128))]),-1!==e.currMode?((0,P.wg)(),(0,P.iD)("div",QC,[0===e.currMode?((0,P.wg)(),(0,P.j4)(a,{key:0,title:`${e.$t("NN0681")}`,borderTouchArea:!0,name:`${e.$t("NN0681")}`,value:e.lineWidth,min:e.lineWidthMin,max:e.lineWidthMax,onUpdate:e.setLineWidth},null,8,["title","name","value","min","max","onUpdate"])):(0,P.kq)("",!0),1===e.currMode?((0,P.wg)(),(0,P.iD)("div",JC,[(0,P._)("div",{class:(0,k.C_)(["panel-object-adjust__line-dash__option bg-gray-5",{"border-blue-1":e.isNormalDash}]),onPointerdown:t[0]||(t[0]=t=>e.handleLineDash(0))},[(0,P.Wm)(s,{iconName:"no-dash",iconWidth:"25px",iconHeight:"20px",iconColor:"gray-2"})],34),(0,P._)("div",{class:(0,k.C_)(["panel-object-adjust__line-dash__option bg-gray-5",{"border-blue-1":!e.isNormalDash}]),onPointerdown:t[1]||(t[1]=t=>e.handleLineDash(1))},[(0,P.Wm)(s,{iconName:"dash-1",iconWidth:"25px",iconHeight:"20px",iconColor:"gray-2"})],34),ez,(0,P._)("div",{class:(0,k.C_)(["panel-object-adjust__line-dash__option bg-gray-5",{"border-blue-1":e.isLineCapButt}]),onPointerdown:t[2]||(t[2]=t=>e.handleLineEdge(0))},[(0,P.Wm)(s,{class:"mr-5",iconName:"butt",iconWidth:"11px",iconHeight:"6px",iconColor:"gray-2"}),(0,P._)("div",tz,(0,k.zw)(e.$t("NN0084")),1)],34),(0,P._)("div",{class:(0,k.C_)(["panel-object-adjust__line-dash__option bg-gray-5",{"border-blue-1":!e.isLineCapButt}]),onPointerdown:t[3]||(t[3]=t=>e.handleLineEdge(1))},[(0,P.Wm)(s,{class:"mr-5",iconName:"round",iconWidth:"11px",iconHeight:"6px",iconColor:"gray-2"}),(0,P._)("div",nz,(0,k.zw)(e.$t("NN0085")),1)],34)])):(0,P.kq)("",!0),2===e.currMode?((0,P.wg)(),(0,P.iD)("div",rz,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.makeSlots,(t=>((0,P.wg)(),(0,P.iD)("div",{key:t.marker,class:(0,k.C_)(["panel-object-adjust__option bg-gray-5",{"outline-blue-1":e.startMarker===t.marker}]),onPointerup:n=>e.handleStartMarkerUpdate(t.marker)},[(0,P.Wm)(l,{iconWidth:"18px",iconColor:"#474A57",iconHeight:"12px",styleFormat:e.markerContentMap[t.marker].styleArray[0],svg:e.markerContentMap[t.marker].svg,trimWidth:!!e.markerContentMap[t.marker].trimWidth,markerWidth:e.markerContentMap[t.marker].vSize[0],trimOffset:e.markerContentMap[t.marker].trimOffset},null,8,["styleFormat","svg","trimWidth","markerWidth","trimOffset"])],42,iz)))),128))])):(0,P.kq)("",!0),3===e.currMode?((0,P.wg)(),(0,P.iD)("div",oz,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.makeSlots,(t=>((0,P.wg)(),(0,P.iD)("div",{key:t.marker,class:(0,k.C_)(["panel-object-adjust__option bg-gray-5",{"outline-blue-1":e.endMarker===t.marker}]),onPointerup:n=>e.handleEndMarkerUpdate(t.marker)},[(0,P.Wm)(l,{iconWidth:"18px",iconColor:"#474A57",iconHeight:"12px",styleFormat:e.markerContentMap[t.marker].styleArray[0],svg:e.markerContentMap[t.marker].svg,trimWidth:!!e.markerContentMap[t.marker].trimWidth,markerWidth:e.markerContentMap[t.marker].vSize[0],trimOffset:e.markerContentMap[t.marker].trimOffset,style:{transform:"rotate(180deg)"}},null,8,["styleFormat","svg","trimWidth","markerWidth","trimOffset"])],42,sz)))),128))])):(0,P.kq)("",!0)])):(0,P.kq)("",!0)],64)):(0,P.kq)("",!0),e.isBasicShape?((0,P.wg)(),(0,P.iD)(P.HY,{key:1},[(0,P._)("div",az,[((0,P.wg)(),(0,P.iD)(P.HY,null,(0,P.Ko)(["line-width","non-filled"],((t,n)=>(0,P._)("div",{class:(0,k.C_)(["panel-object-adjust__option",e.currMode===n?"bg-blue-1":"bg-gray-5"]),key:t,onPointerdown:t=>e.switchMode(n)},[(0,P.Wm)(s,{iconName:t,iconWidth:"24px",iconColor:e.currMode===n?"white":"gray-2"},null,8,["iconName","iconColor"])],42,lz))),64)),(0,P._)("div",{class:(0,k.C_)(["panel-object-adjust__option panel-object-adjust__option--with-val",e.corRadDisabled?"bg-gray-6 text-gray-4 click-disabled":2===e.currMode?"bg-blue-1 text-white":"bg-gray-5 text-gray-2"]),onPointerdown:t[4]||(t[4]=t=>e.switchMode(2))},[(0,P.Wm)(s,{iconName:"rounded-corner",iconWidth:"16px",iconColor:e.corRadDisabled?"gray-4":2===e.currMode?"white":"gray-2"},null,8,["iconColor"]),(0,P._)("span",null,(0,k.zw)(e.$t("NN0086")),1),(0,P._)("span",null,(0,k.zw)(e.corRadPercentage),1)],34)]),-1!==e.currMode?((0,P.wg)(),(0,P.iD)("div",cz,[0===e.currMode?((0,P.wg)(),(0,P.j4)(a,{key:0,title:`${e.$t("NN0681")}`,borderTouchArea:!0,name:`${e.$t("NN0681")}`,value:e.lineWidth,min:e.lineWidthMin,max:e.lineWidthMax,onUpdate:e.setLineWidth},null,8,["title","name","value","min","max","onUpdate"])):(0,P.kq)("",!0),1===e.currMode?((0,P.wg)(),(0,P.iD)("div",dz,[(0,P._)("div",{class:(0,k.C_)(["panel-object-adjust__fill__option bg-gray-5",{"border-blue-1":!e.filled}]),onPointerdown:t[5]||(t[5]=t=>e.handleBasicShapeFilledUpdate(!1))},[(0,P.Wm)(s,{iconName:"non-filled",iconWidth:"25px",iconHeight:"20px",iconColor:"gray-2"}),(0,P._)("div",uz,(0,k.zw)(e.$t("NN0088")),1)],34),(0,P._)("div",{class:(0,k.C_)(["panel-object-adjust__fill__option bg-gray-5",{"border-blue-1":e.filled}]),onPointerdown:t[6]||(t[6]=t=>e.handleBasicShapeFilledUpdate(!0))},[(0,P.Wm)(s,{iconName:"filled",iconWidth:"25px",iconHeight:"20px",iconColor:"gray-2"}),(0,P._)("div",gz,(0,k.zw)(e.$t("NN0087")),1)],34)])):(0,P.kq)("",!0),2===e.currMode?((0,P.wg)(),(0,P.j4)(a,{key:2,title:`${e.$t("NN0085")}`,borderTouchArea:!0,name:`${e.$t("NN0085")}`,value:e.corRadPercentage,onUpdate:e.handleBasicShapeCorRadPercentUpdate},null,8,["title","name","value","onUpdate"])):(0,P.kq)("",!0)])):(0,P.kq)("",!0)],64)):(0,P.kq)("",!0)])}var hz=Object.defineProperty,mz=Object.defineProperties,yz=Object.getOwnPropertyDescriptors,fz=Object.getOwnPropertySymbols,bz=Object.prototype.hasOwnProperty,vz=Object.prototype.propertyIsEnumerable,wz=(e,t,n)=>t in e?hz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nz=(e,t)=>{for(var n in t||(t={}))bz.call(t,n)&&wz(e,n,t[n]);if(fz)for(var n of fz(t))vz.call(t,n)&&wz(e,n,t[n]);return e},Sz=(e,t)=>mz(e,yz(t)),xz=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),Pz=(0,P.aZ)({emits:[],components:{MobileSlider:ro,MarkerIcon:Ku},data(){const{min:e,max:t}=Fo.Z.mappingMinMax("lineWidth");return{currMode:-1,lineOptions:["line-width","line-dash","start-marker","end-marker"],markerListReady:!1,markerIds:["none"],dashAndEdge:[1,3],markerContentMap:{none:{styleArray:[""],svg:"",trimWidth:void 0,vSize:[0,4],trimOffset:-1}},lineWidthMin:e,lineWidthMax:t}},props:{currPage:{type:Object,required:!0}},mounted(){var e,t;const n=this.currLayer;this.fetchMarkers().then((()=>xz(this,null,(function*(){var e;const t=this.categories[0].list;this.markerIds=["none",...t.map((e=>e.id))];for(const n of t){const t=(yield s.ZP.get(n)).jsonData;this.markerContentMap[n.id]={styleArray:t.styleArray,svg:t.svg,trimWidth:t.trimWidth,vSize:t.vSize,trimOffset:null!=(e=t.trimOffset)?e:-1}}this.markerListReady=!0})))),this.dashAndEdge[0]=0===(null!=(e=n.dasharray)?e:[]).length?1:2,this.dashAndEdge[1]="butt"===(null!=(t=n.linecap)?t:"butt")?3:4},computed:Sz(Nz(Nz({},(0,ze.Se)({currSelectedIndex:"getCurrSelectedIndex",currSelectedInfo:"getCurrSelectedInfo",token:"user/getToken"})),(0,ze.rn)("markers",["categories"])),{lineWidth(){var e,t;const{currLayer:n}=this;return null!=(t=null==(e=n.size)?void 0:e[0])?t:0},filled(){var e;const{currLayer:t}=this;return null!=(e=t.filled)&&e},corRadPercentage(){const{currLayer:e}=this,{vSize:t,shapeType:n,size:r}=e;return Math.round(Math.min(an.Z.getCorRadPercentage(t,null!=r?r:[0,0],null!=n?n:""),100))},corRadDisabled(){const{currLayer:e}=this;return"e"===e.shapeType},currLayer(){return this.currPage.layers[this.currSelectedIndex]},isLine(){return ni.Z.isLine(this.currLayer)},isBasicShape(){return ni.Z.isBasicShape(this.currLayer)},isNormalDash(){var e;return 0===(null==(e=this.currLayer.dasharray)?void 0:e.length)},isLineCapButt(){return"butt"===this.currLayer.linecap},startMarker(){var e,t;return this.markerListReady&&null!=(t=null==(e=this.currLayer.markerId)?void 0:e[0])?t:"none"},endMarker(){var e,t;return this.markerListReady&&null!=(t=null==(e=this.currLayer.markerId)?void 0:e[1])?t:"none"},makeSlots(){return this.markerIds.map(((e,t)=>({marker:e,name:`g0i${t}`})))}}),methods:Sz(Nz(Nz({},(0,ze.OI)({_updateLayerProps:"UPDATE_layerProps"})),(0,ze.nv)("markers",["getCategories"])),{switchMode(e){this.currMode=e},fetchMarkers(){return xz(this,null,(function*(){this.categories&&this.categories.length>0||(yield this.getCategories())}))},setLineWidth(e){ni.Z.setLineWidth(e)},handleLineDash(e){g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{dasharray:0===e?[]:[1]}),cn.Z.record()},handleLineEdge(e){g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{linecap:0===e?"butt":"round"}),cn.Z.record()},handleStartMarkerUpdate(e){var t,n,r,i,o,s,a;const l=this.currLayer,{styleArray:c,svg:d,trimWidth:u,vSize:h,trimOffset:m}=this.markerContentMap[e];g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{styleArray:[l.styleArray[0],c[0],l.styleArray[2]],svg:ni.Z.genLineSvgTemplate(d,this.markerContentMap[this.endMarker].svg),trimWidth:[u,null==(t=l.trimWidth)?void 0:t[1]],markerWidth:[h[0],null!=(r=null==(n=l.markerWidth)?void 0:n[1])?r:0],trimOffset:[m,null!=(o=null==(i=l.trimOffset)?void 0:i[1])?o:-1]}),g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{markerId:[e,null!=(a=null==(s=l.markerId)?void 0:s[1])?a:"none"]}),cn.Z.record()},handleEndMarkerUpdate(e){var t,n,r,i,o,s,a;const l=this.currLayer,{styleArray:c,svg:d,trimWidth:u,vSize:h,trimOffset:m}=this.markerContentMap[e];g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{styleArray:[l.styleArray[0],l.styleArray[1],c[0]],svg:ni.Z.genLineSvgTemplate(this.markerContentMap[this.startMarker].svg,d),trimWidth:[null==(t=l.trimWidth)?void 0:t[0],u],markerWidth:[null!=(r=null==(n=l.markerWidth)?void 0:n[0])?r:0,h[0]],trimOffset:[null!=(o=null==(i=l.trimOffset)?void 0:i[0])?o:-1,m]}),g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{markerId:[null!=(a=null==(s=l.markerId)?void 0:s[0])?a:"none",e]}),cn.Z.record()},handleBasicShapeFilledUpdate(e){g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{filled:e}),cn.Z.record()},handleBasicShapeCorRadPercentUpdate(e){const t=e,{vSize:n,size:r,shapeType:i}=this.currLayer,o=Array.from(null!=r?r:[]);o.length>=2&&(o[1]=an.Z.getCorRadValue(n,t,null!=i?i:"")),g.ZP.updateLayerProps(p.Z.currFocusPageIndex,this.currSelectedIndex,{size:o})}})});const Iz=(0,oe.Z)(Pz,[["render",pz],["__scopeId","data-v-05330860"],["__file","PanelObjectAdjust.vue"]]);var _z=Iz;const kz={class:"panel-opacity"};function Zz(e,t,n,r,i,o){const s=(0,P.up)("mobile-slider");return(0,P.wg)(),(0,P.iD)("div",kz,[(0,P.Wm)(s,{title:`${e.$t("NN0030")}`,borderTouchArea:!0,value:e.opacity,min:0,max:100,onUpdate:e.updateLayerOpacity},null,8,["title","value","onUpdate"])])}var Cz=Object.defineProperty,zz=Object.defineProperties,Tz=Object.getOwnPropertyDescriptors,Lz=Object.getOwnPropertySymbols,Ez=Object.prototype.hasOwnProperty,Dz=Object.prototype.propertyIsEnumerable,Oz=(e,t,n)=>t in e?Cz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mz=(e,t)=>{for(var n in t||(t={}))Ez.call(t,n)&&Oz(e,n,t[n]);if(Lz)for(var n of Lz(t))Dz.call(t,n)&&Oz(e,n,t[n]);return e},Az=(e,t)=>zz(e,Tz(t)),$z=(0,P.aZ)({emits:[],components:{MobileSlider:ro},computed:Az(Mz({},(0,ze.Se)({currSidebarPanel:"getCurrFunctionPanelType",currSelectedInfo:"getCurrSelectedInfo",currSubSelectedInfo:"getCurrSubSelectedInfo",isShowPagePreview:"page/getIsShowPagePreview",inBgRemoveMode:"bgRemove/getInBgRemoveMode",InBgRemoveFirstStep:"bgRemove/inFirstStep",InBgRemoveLastStep:"bgRemove/inLastStep",inBgSettingMode:"mobileEditor/getInBgSettingMode"})),{opacity(){return this.inBgSettingMode?this.backgroundOpacity:g.ZP.getCurrOpacity},backgroundOpacity(){const{styles:{opacity:e}}=p.Z.getPage(p.Z.currFocusPageIndex).backgroundImage.config;return e}}),methods:Az(Mz({},(0,ze.OI)({setBgOpacity:"SET_backgroundOpacity"})),{updateLayerOpacity(e){this.inBgSettingMode?this.setBgOpacity({pageIndex:p.Z.currFocusPageIndex,opacity:e}):g.ZP.updateLayerOpacity(e)}})});const Fz=(0,oe.Z)($z,[["render",Zz],["__scopeId","data-v-c961ba8c"],["__file","PanelOpacity.vue"]]);var jz=Fz;const Bz={class:"panel-order bg-white"},Rz=["onClick"],Hz={class:"ml-5 body-2"};function Uz(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",Bz,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.orderDatas(),((e,t)=>((0,P.wg)(),(0,P.iD)("div",{class:"panel-order__item",key:`popup-${t}`,onClick:t=>e.action&&e.action()},[(0,P.Wm)(s,{class:"pointer",iconName:e.icon,iconWidth:"16px",iconColor:"gray-1"},null,8,["iconName"]),(0,P._)("span",Hz,(0,k.zw)(e.text),1)],8,Rz)))),128))])}var Wz=Object.defineProperty,Vz=Object.getOwnPropertySymbols,Gz=Object.prototype.hasOwnProperty,qz=Object.prototype.propertyIsEnumerable,Kz=(e,t,n)=>t in e?Wz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yz=(e,t)=>{for(var n in t||(t={}))Gz.call(t,n)&&Kz(e,n,t[n]);if(Vz)for(var n of Vz(t))qz.call(t,n)&&Kz(e,n,t[n]);return e},Xz=(0,P.aZ)({emits:[],data(){return{}},computed:Yz({},(0,ze.Se)({currSelectedInfo:"getCurrSelectedInfo"})),methods:{orderDatas(){const e=[{icon:"layers-forward",text:this.$t("NN0232")},{icon:"layers-front",text:this.$t("NN0231")},{icon:"layers-backward",text:this.$t("NN0233")},{icon:"layers-back",text:this.$t("NN0234")}];return e.map((e=>({icon:e.icon,text:e.text,action:Fo.Z.mappingIconAction(e.icon)})))}}});const Qz=(0,oe.Z)(Xz,[["render",Uz],["__scopeId","data-v-39557778"],["__file","PanelOrder.vue"]]);var Jz=Qz;const eT={class:"panel-shadow"},tT={class:"flex-between photo-shadow__options mb-10"},nT={class:"photo-shadow__options__option-font"},rT={key:0,class:"photo-shadow__row-wrapper"},iT={class:"photo-shadow__row"},oT={class:"photo-shadow__color-name text-gray-3 body-2 no-wrap"},sT={key:1,class:"photo-shadow__row-wrapper"},aT={class:"photo-shadow__reset"};function lT(e,t,n,r,i,o){const s=(0,P.up)("svg-icon"),a=(0,P.up)("mobile-slider");return(0,P.wg)(),(0,P.iD)("div",eT,[(0,P._)("div",tT,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.shadowOptions,(t=>((0,P.wg)(),(0,P.iD)("div",{key:t},[((0,P.wg)(),(0,P.j4)(s,{class:(0,k.C_)(["photo-shadow__options__option pointer",{"photo-shadow__options__option--selected":e.currentEffect===t}]),key:`shadow-${t}`,iconName:`mobile-photo-shadow-${t}`,onClick:n=>e.onEffectClick(t),iconWidth:"56px",iconColor:"gray-2"},null,8,["iconName","onClick","class"])),(0,P._)("div",nT,(0,k.zw)(e.$t(e.shadowPropI18nMap[t]._effectName)),1)])))),128))]),(0,P._)("div",{class:"photo-shadow__attrs",style:(0,k.j5)(e.shadowAttrsStyles)},[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.shadowFields,(t=>((0,P.wg)(),(0,P.iD)("div",{key:t},[(0,P.Wm)(a,{title:`${e.$t(e.shadowPropI18nMap[e.currentEffect][t])}`,borderTouchArea:!0,name:t,value:e.getFieldValue(t),max:e.fieldRange[e.currentEffect][t].max,min:e.fieldRange[e.currentEffect][t].min,onUpdate:e.handleEffectUpdate},null,8,["title","name","value","max","min","onUpdate"])])))),128)),["none","imageMatched"].includes(e.currentEffect)?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",rT,[(0,P._)("div",iT,[(0,P._)("div",oT,(0,k.zw)(e.$t("NN0017")),1),(0,P._)("div",{class:"photo-shadow__color",style:(0,k.j5)({backgroundColor:"frame"===e.currentEffect?e.currentStyle.shadow.effects.frameColor:e.currentStyle.shadow.effects.color||"#000000"}),onClick:t[0]||(t[0]=(...t)=>e.handleColorModal&&e.handleColorModal(...t))},null,4)])])),"none"!==e.currentEffect?((0,P.wg)(),(0,P.iD)("div",sT,[(0,P._)("div",aT,[(0,P._)("button",{class:"label-mid",onClick:t[1]||(t[1]=t=>e.imageShadowPanelUtils.reset())},(0,k.zw)(e.$t("NN0754")),1)])])):(0,P.kq)("",!0)],4)])}var cT=Object.defineProperty,dT=Object.defineProperties,uT=Object.getOwnPropertyDescriptors,gT=Object.getOwnPropertySymbols,pT=Object.prototype.hasOwnProperty,hT=Object.prototype.propertyIsEnumerable,mT=(e,t,n)=>t in e?cT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yT=(e,t)=>{for(var n in t||(t={}))pT.call(t,n)&&mT(e,n,t[n]);if(gT)for(var n of gT(t))hT.call(t,n)&&mT(e,n,t[n]);return e},fT=(e,t)=>dT(e,uT(t)),bT=(0,P.aZ)({components:{MobileSlider:ro},emits:["openExtraColorModal","toggleColorPanel"],data(){return{imageShadowPanelUtils:us.Z,shadowPropI18nMap:nr.Dm,fieldRange:nr.yG,handleColor:!1}},mounted(){us.Z.mount()},computed:fT(yT({},(0,ze.Se)({currSelectedInfo:"getCurrSelectedInfo",currSelectedIndex:"getCurrSelectedIndex",currSubSelectedInfo:"getCurrSubSelectedInfo",currSelectedLayers:"getCurrSelectedLayers"})),{shadowOptions(){return Object.keys(this.effects)},shadowFields(){const{effects:e,currentEffect:t}=this;return e[t]},currentStyle(){const{styles:e}=g.ZP.getCurrConfig;return e||{}},currentEffect(){const{shadow:e}=this.currentStyle;return e&&e.currentEffect||ds.w.none},effects(){return{none:[],shadow:nr.ZP.getKeysOf(ds.w.shadow),blur:nr.ZP.getKeysOf(ds.w.blur),imageMatched:nr.ZP.getKeysOf(ds.w.imageMatched),frame:nr.ZP.getKeysOf(ds.w.frame),floating:nr.ZP.getKeysOf(ds.w.floating)}},shadowAttrsStyles(){return{"max-height":this.currentEffect===ds.w.none?"0":"1000px"}}}),methods:{getFieldValue(e){return this.currentStyle.shadow.effects[this.currentEffect][e]},onEffectClick(e){const t=e===ds.w.none||Object.keys(this.currentStyle.shadow.effects[e]).length;if(t)if(e===ds.w.frame){const t=this.currentStyle.shadow.effects.frameColor||this.currentStyle.shadow.effects.color||"#000000";nr.ZP.setEffect(e,{frameColor:t})}else nr.ZP.setEffect(e,{});else{const t=nr.ZP.getLocalEffectAttrs(e)||nr.ZP.getDefaultEffect(e)[e],n=nr.ZP.getLocalEffectColor(e)||"#000000";e===ds.w.frame?nr.ZP.setEffect(e,{[e]:t,frameColor:n}):nr.ZP.setEffect(e,{[e]:t,color:n})}},handleEffectUpdate(e,t){us.Z.handleEffectUpdate(t,e)},handleColorModal(){this.$isTouchDevice()&&(_e.ZP.setCurrEvent(o.gQ.photoShadow),this.handleColor=!0,this.$emit("openExtraColorModal",o.gQ.photoShadow,o.pp.palette))}}});const vT=(0,oe.Z)(bT,[["render",lT],["__scopeId","data-v-cd251cac"],["__file","PanelPhotoShadow.vue"]]);var wT=vT;const NT={class:"panel-position bg-white"},ST=["onClick"],xT={class:"ml-5 body-2"};function PT(e,t,n,r,i,o){const s=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",NT,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.alignDatas(),((t,n)=>((0,P.wg)(),(0,P.iD)("div",{class:"panel-position__item",key:`popup-${n}`,onClick:n=>e.MappingUtils.mappingIconAction(t.icon)},[(0,P.Wm)(s,{class:"pointer",iconName:t.icon,iconWidth:"18px",iconColor:"gray-1"},null,8,["iconName"]),(0,P._)("span",xT,(0,k.zw)(t.text),1)],8,ST)))),128))])}var IT=Object.defineProperty,_T=Object.getOwnPropertySymbols,kT=Object.prototype.hasOwnProperty,ZT=Object.prototype.propertyIsEnumerable,CT=(e,t,n)=>t in e?IT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zT=(e,t)=>{for(var n in t||(t={}))kT.call(t,n)&&CT(e,n,t[n]);if(_T)for(var n of _T(t))ZT.call(t,n)&&CT(e,n,t[n]);return e},TT=(0,P.aZ)({emits:[],data(){return{MappingUtils:Fo.Z}},computed:zT({},(0,ze.Se)({currSelectedInfo:"getCurrSelectedInfo"})),methods:{mappingIcons(e){return Fo.Z.mappingIconSet(e)},alignDatas(){const e=this.mappingIcons("align"),t=[`${this.$t("NN0046")}`,`${this.$t("NN0047")}`,`${this.$t("NN0048")}`,`${this.$t("NN0049")}`,`${this.$t("NN0050")}`,`${this.$t("NN0051")}`];return e.map(((e,n)=>({icon:e,text:t[n]})))}}});const LT=(0,oe.Z)(TT,[["render",PT],["__scopeId","data-v-46b1b088"],["__file","PanelPosition.vue"]]);var ET=LT;const DT={class:"panel-remove-bg"},OT={class:"panel-remove-bg__btns"},MT={class:"panel-remove-bg__slider full my-10"},AT={class:"full flex items-center"},$T={class:"label-mid"};function FT(e,t,n,r,i,o){const s=(0,P.up)("btn"),a=(0,P.up)("mobile-slider"),l=(0,P.up)("svg-icon");return(0,P.wg)(),(0,P.iD)("div",DT,[(0,P._)("div",OT,[(0,P.Wm)(s,{class:"full-width",type:e.clearMode?"gray-active-sm":"gray-sm",hasIcon:!0,iconName:"clear",iconMargin:4,flexDir:"column",onClick:t[0]||(t[0]=t=>e.setClearMode(!0))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0385")),1)])),_:1},8,["type"]),(0,P.Wm)(s,{class:"full-width",type:e.clearMode?"gray-sm":"gray-active-sm",hasIcon:!0,iconName:"preserve",iconMargin:4,flexDir:"column",onClick:t[1]||(t[1]=t=>e.setClearMode(!1))},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0386")),1)])),_:1},8,["type"]),(0,P.Wm)(s,{class:"btn-recover full-width",type:"gray-sm",hasIcon:!0,iconName:"reset",iconMargin:4,flexDir:"column",onClick:t[2]||(t[2]=t=>e.restoreInitState())},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0389")),1)])),_:1})]),(0,P._)("div",MT,[(0,P.Wm)(a,{title:`${e.$t("NN0387")}`,borderTouchArea:!0,name:"brushSize",value:e._brushSize,min:e.minBrushSize,max:e.maxBrushSize,onUpdate:e.setBrushSize},null,8,["title","value","min","max","onUpdate"])]),(0,P._)("div",AT,[(0,P.Wm)(l,{class:"mr-5",iconColor:e.showInitImage?"blue-1":"light-gray",iconName:e.showInitImage?"checkbox-checked":"checkbox",iconWidth:"16px",onClick:t[3]||(t[3]=t=>e.toggleShowInitImage(e.showInitImage))},null,8,["iconColor","iconName"]),(0,P._)("span",$T,(0,k.zw)(e.$t("NN0388")),1)])])}var jT=Object.defineProperty,BT=Object.defineProperties,RT=Object.getOwnPropertyDescriptors,HT=Object.getOwnPropertySymbols,UT=Object.prototype.hasOwnProperty,WT=Object.prototype.propertyIsEnumerable,VT=(e,t,n)=>t in e?jT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GT=(e,t)=>{for(var n in t||(t={}))UT.call(t,n)&&VT(e,n,t[n]);if(HT)for(var n of HT(t))WT.call(t,n)&&VT(e,n,t[n]);return e},qT=(e,t)=>BT(e,RT(t)),KT=(0,P.aZ)({emits:[],data(){return{minBrushSize:1,maxBrushSize:300}},components:{MobileSlider:ro},computed:GT({},(0,ze.Se)({useMobileEditor:"getUseMobileEditor",clearMode:"bgRemove/getClearMode",showInitImage:"bgRemove/getShowInitImage",modifiedFlag:"bgRemove/getModifiedFlag",currSelectedInfo:"getCurrSelectedInfo",autoRemoveResult:"bgRemove/getAutoRemoveResult",isAdmin:"user/isAdmin",prevPageScaleRatio:"bgRemove/getPrevPageScaleRatio",bgRemoveIdInfo:"bgRemove/getIdInfo",isProcessing:"bgRemove/getIsProcessing",_brushSize:"bgRemove/getBrushSize"})),methods:qT(GT({},(0,ze.OI)({setBrushSize:"bgRemove/SET_brushSize",setRestoreInitState:"bgRemove/SET_restoreInitState",setClearMode:"bgRemove/SET_clearMode",setShowInitImage:"bgRemove/SET_showInitImage"})),{toggleShowInitImage(e){this.setShowInitImage(!e)},restoreInitState(){this.setRestoreInitState(!0)}})});const YT=(0,oe.Z)(KT,[["render",FT],["__scopeId","data-v-3a18152c"],["__file","PanelRemoveBg.vue"]]);var XT=YT;const QT={class:"panel-resize"};function JT(e,t,n,r,i,o){const s=(0,P.up)("page-size-selector");return(0,P.wg)(),(0,P.iD)("div",QT,[((0,P.wg)(),(0,P.j4)(P.Ob,null,[(0,P.Wm)(s,{isDarkTheme:!1,ref:"pageSizeSelector"},null,512)],1024))])}const eL=e=>((0,P.dD)("data-v-2f37a790"),e=e(),(0,P.Cn)(),e),tL={class:"page-size-selector__body-row first-row"},nL={class:"page-size-selector__body__custom"},rL=["value"],iL=["value"],oL={key:0,class:"page-size-selector__body__custom__unit__option bg-white"},sL=["onClick"],aL={class:"body-SM text-gray-1"},lL={key:0,class:"page-size-selector__body__custom__err body-SM text-red text-left"},cL=eL((()=>(0,P._)("div",{class:"page-size-selector__body__hr first bg-gray-4"},null,-1))),dL={class:"page-size-selector__container"},uL={class:"page-size-selector__body-row first-row"},gL={key:0,class:"page-size-selector__body-row-center"},pL=["onClick"],hL=["src"],mL={class:"page-size-selector__body-row__text-content"},yL={class:"page-size-selector__body-row first-row"},fL={key:1,class:"page-size-selector__body-row-center"},bL=["onClick"],vL=["src"],wL={class:"page-size-selector__body-row__text-content"},NL=eL((()=>(0,P._)("div",{class:"page-size-selector__body__hr second bg-gray-4"},null,-1))),SL={class:"page-size-selector__body__submit"},xL={class:"page-size-selector__body__submit__option body-SM"};function PL(e,t,r,i,o,s){const a=(0,P.up)("radio-btn"),l=(0,P.up)("property-bar"),c=(0,P.up)("svg-icon"),d=(0,P.up)("checkbox"),u=(0,P.up)("btn"),g=(0,P.Q2)("click-outside");return(0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["page-size-selector",{isTouchDevice:e.$isTouchDevice()}])},[(0,P._)("div",tL,[(0,P._)("span",{class:(0,k.C_)(["page-size-selector__body__title caption-LG",e.defaultTextColor])},(0,k.zw)(e.$t("NN0023")),3)]),(0,P._)("div",nL,[(0,P.Wm)(a,{class:"page-size-selector__body__radio",isSelected:"custom"===e.selectedFormat,circleColor:e.isDarkTheme?"white":"gray-2",formatKey:"custom",onSelect:e.selectFormat},null,8,["isSelected","circleColor","onSelect"]),(0,P.Wm)(l,{class:(0,k.C_)(["page-size-selector__body__custom__box",("custom"===e.selectedFormat?"border-blue-1":"border-"+(e.isDarkTheme?"white":"gray-2"))+("custom"===e.selectedFormat&&e.isValidate?e.widthValid?"":" input-invalid":"")])},{default:(0,P.w5)((()=>[(0,P._)("input",{class:(0,k.C_)(["body-SM","custom"===e.selectedFormat?"text-blue-1":e.defaultTextColor]),type:"number",min:"0",value:e.valPageSize.width,onInput:t[0]||(t[0]=(...t)=>e.setPageWidth&&e.setPageWidth(...t)),onClick:t[1]||(t[1]=t=>e.selectFormat("custom")),onFocus:t[2]||(t[2]=t=>e.lastFocusedInput="width"),onBlur:t[3]||(t[3]=t=>e.handleInputBlur("width"))},null,42,rL),(0,P._)("span",{class:(0,k.C_)(["body-SM","custom"===e.selectedFormat?"text-blue-1":e.defaultTextColor])},"W",2)])),_:1},8,["class"]),(0,P.Wm)(c,{class:"pointer",iconName:e.isLocked?"lock":"unlock",iconWidth:"15px",iconColor:"custom"===e.selectedFormat?"blue-1":e.isDarkTheme?"white":"blue",onClick:t[4]||(t[4]=t=>e.toggleLock())},null,8,["iconName","iconColor"]),(0,P.Wm)(l,{class:(0,k.C_)(["page-size-selector__body__custom__box",("custom"===e.selectedFormat?"border-blue-1":"border-"+(e.isDarkTheme?"white":"gray-2"))+("custom"===e.selectedFormat&&e.isValidate?e.heightValid?"":" input-invalid":"")])},{default:(0,P.w5)((()=>[(0,P._)("input",{class:(0,k.C_)(["body-SM","custom"===e.selectedFormat?"text-blue-1":e.defaultTextColor]),type:"number",min:"0",value:e.valPageSize.height,onInput:t[5]||(t[5]=(...t)=>e.setPageHeight&&e.setPageHeight(...t)),onClick:t[6]||(t[6]=t=>e.selectFormat("custom")),onFocus:t[7]||(t[7]=t=>e.lastFocusedInput="height"),onBlur:t[8]||(t[8]=()=>e.handleInputBlur("height"))},null,42,iL),(0,P._)("span",{class:(0,k.C_)(["body-SM","custom"===e.selectedFormat?"text-blue-1":e.defaultTextColor])},"H",2)])),_:1},8,["class"]),(0,P.wy)(((0,P.wg)(),(0,P.j4)(l,{class:(0,k.C_)(["page-size-selector__body__custom__box page-size-selector__body__custom__unit pointer","custom"===e.selectedFormat||e.showUnitOptions?"border-blue-1":"border-"+(e.isDarkTheme?"white":"gray-2")]),onClick:t[9]||(t[9]=t=>e.showUnitOptions=!e.showUnitOptions)},{default:(0,P.w5)((()=>[(0,P._)("span",{class:(0,k.C_)(["page-size-selector__body__custom__unit__label body-SM","custom"===e.selectedFormat?"text-blue-1":e.defaultTextColor])},(0,k.zw)(e.selectedUnit),3),(0,P.Wm)(c,{class:"page-size-selector__body__custom__unit__icon",iconName:"chevron-down",iconWidth:"16px",iconColor:"custom"===e.selectedFormat?"blue-1":e.isDarkTheme?"white":"gray-2"},null,8,["iconColor"]),e.showUnitOptions?((0,P.wg)(),(0,P.iD)("div",oL,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.unitOptions,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"page-size-selector__body__custom__unit__option__item text-gray-2",key:t,style:(0,k.j5)(e.unitOptionStyles),onClick:n=>e.selectUnit(n,t)},[(0,P._)("span",aL,(0,k.zw)(t),1)],12,sL)))),128))])):(0,P.kq)("",!0)])),_:1},8,["class"])),[[g,()=>{e.showUnitOptions=!1}]]),"custom"===e.selectedFormat&&e.isValidate&&!e.isCustomValid?((0,P.wg)(),(0,P.iD)("div",lL,[(0,P.Uk)((0,k.zw)(e.errMsg),1)," "===e.errMsg.slice(-1)?((0,P.wg)(),(0,P.iD)("span",{key:0,class:"pointer",onClick:t[10]||(t[10]=t=>e.fixSize())},(0,k.zw)(e.$t("NN0787")),1)):(0,P.kq)("",!0)])):(0,P.kq)("",!0)]),cL,(0,P._)("div",dL,[(0,P._)("div",uL,[(0,P._)("span",{class:(0,k.C_)(["page-size-selector__body__title caption-LG",e.defaultTextColor])},(0,k.zw)(e.$t("NN0024")),3)]),e.isLayoutReady?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",gL,[(0,P.Wm)(c,{iconName:"loading",iconWidth:"25px",iconHeight:"10px",iconColor:e.defaultTextColor},null,8,["iconColor"])])),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.recentlyUsed,((t,r)=>((0,P.wg)(),(0,P.iD)("div",{class:"page-size-selector__body-row item pointer",key:t.id,onClick:t=>e.selectFormat(`recent-${r}`)},[(0,P._)("img",{class:"page-size-selector__body-row__icon",src:n(89088)(`./${""===t.title||"custom"===t.icon?(e.isDarkTheme,"custom-white"):t.icon}.svg`)},null,8,hL),(0,P._)("div",mL,[(0,P._)("span",{class:(0,k.C_)(["page-size-selector__body__page-text body-SM pointer",e.selectedFormat===`recent-${r}`?"text-blue-1":e.defaultTextColor])},(0,k.zw)(""===t.title||"custom"===t.icon?e.$t("NN0023"):t.title),3),(0,P._)("span",{class:(0,k.C_)(["page-size-selector__body__page-text body-SM pointer",e.selectedFormat===`recent-${r}`?"text-blue-1":e.defaultTextColor])},(0,k.zw)(e.makeFormatDescription(t)),3)])],8,pL)))),128)),(0,P._)("div",yL,[(0,P._)("span",{class:(0,k.C_)(["page-size-selector__body__title caption-LG",e.defaultTextColor])},(0,k.zw)(e.$t("NN0025")),3)]),e.isLayoutReady?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",fL,[(0,P.Wm)(c,{iconName:"loading",iconWidth:"25px",iconHeight:"10px",iconColor:"white"})])),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.formatList,((t,r)=>((0,P.wg)(),(0,P.iD)("div",{class:"page-size-selector__body-row item pointer",key:t.id,onClick:t=>e.selectFormat(`preset-${r}`)},[(0,P._)("img",{class:"page-size-selector__body-row__icon",src:n(89088)(`./${t.icon}.svg`)},null,8,vL),(0,P._)("div",wL,[(0,P._)("span",{class:(0,k.C_)(["page-size-selector__body__page-text body-SM pointer",e.selectedFormat===`preset-${r}`?"text-blue-1":e.defaultTextColor])},(0,k.zw)(""===t.title||"custom"===t.icon?e.$t("NN0023"):t.title),3),(0,P._)("span",{class:(0,k.C_)(["page-size-selector__body__page-text body-SM pointer",e.selectedFormat===`preset-${r}`?"text-blue-1":e.defaultTextColor])},(0,k.zw)(e.makeFormatDescription(t)),3)])],8,bL)))),128))]),NL,(0,P._)("div",SL,[(0,P._)("div",xL,[(0,P.Wm)(d,{class:"pointer",modelValue:e.copyBeforeApply,"onUpdate:modelValue":t[11]||(t[11]=t=>e.copyBeforeApply=t)},{default:(0,P.w5)((()=>[(0,P.Uk)((0,k.zw)(e.$t("NN0211")),1)])),_:1},8,["modelValue"])]),(0,P.Wm)(u,{class:"page-size-selector__body__button",disabled:!e.isFormatApplicable,onClick:e.submit},{default:(0,P.w5)((()=>[e.inReviewMode?(0,P.kq)("",!0):((0,P.wg)(),(0,P.j4)(c,{key:0,iconName:"pro",iconWidth:"22px",iconColor:"alarm"})),(0,P._)("span",null,(0,k.zw)(e.$t("NN0022")),1)])),_:1},8,["disabled","onClick"])])],2)}var IL=n(44554),_L=n(53089),kL=Object.defineProperty,ZL=Object.defineProperties,CL=Object.getOwnPropertyDescriptors,zL=Object.getOwnPropertySymbols,TL=Object.prototype.hasOwnProperty,LL=Object.prototype.propertyIsEnumerable,EL=(e,t,n)=>t in e?kL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DL=(e,t)=>{for(var n in t||(t={}))TL.call(t,n)&&EL(e,n,t[n]);if(zL)for(var n of zL(t))LL.call(t,n)&&EL(e,n,t[n]);return e},OL=(e,t)=>ZL(e,CL(t)),ML=(0,P.aZ)({props:{isDarkTheme:{type:Boolean,default:!0}},emits:["close"],directives:{clickOutside:Ce().directive},components:{RadioBtn:IL.Z,Checkbox:Yv.Z},mounted(){this.handleCurrFocusPageIndexChange()},data(){return{selectedFormat:"",valPageSize:{width:"",height:""},pageWidth:NaN,pageHeight:NaN,pageSizes:{},aspectRatio:NaN,isLocked:!0,selectedUnit:"",showUnitOptions:!1,copyBeforeApply:!0,isValidate:!1,lastFocusedInput:"width"}},watch:{currFocusPageIndex:function(){this.handleCurrFocusPageIndexChange()}},computed:OL(DL(DL({},(0,ze.rn)("layouts",["categories"])),(0,ze.Se)({getPage:"getPage",token:"user/getToken",getAsset:"getAsset",groupId:"getGroupId",groupType:"getGroupType",pagesLength:"getPagesLength",getPageSize:"getPageSize"})),{inReviewMode(){return S.Z.inReviewMode},unitOptions(){return or.kI},currFocusPageIndex(){return p.Z.currFocusPageIndex},isCustomValid(){return this.widthValid&&this.heightValid&&!this.isOverArea()},defaultTextColor(){return this.isDarkTheme?"text-white":"text-gray-2"},isFormatApplicable(){return"custom"===this.selectedFormat?this.isCustomValid:""!==this.selectedFormat},widthValid(){if(!this.pageWidth)return!1;if(this.pageWidth<0)return!1;const e=or.ZP.convert(this.pageWidth,this.selectedUnit,"px");return!this.isOverSize(e)&&!this.isUnderSize(e)&&(!this.isOverArea()||!this.isLocked&&"width"!==this.lastFocusedInput)},heightValid(){if(!this.pageHeight)return!1;if(this.pageHeight<0)return!1;const e=or.ZP.convert(this.pageHeight,this.selectedUnit,"px");return!this.isOverSize(e)&&!this.isUnderSize(e)&&(!this.isOverArea()||!this.isLocked&&"height"!==this.lastFocusedInput)},fixedSize(){const e={width:this.pageWidth,height:this.pageHeight};if(!this.isOverArea())return e;{const t=this.pageSizes.px;this.isLocked?(e.height=Math.sqrt(p.Z.MAX_AREA/t.width*t.height),e.width=e.height/t.height*t.width):(e.height=p.Z.MAX_AREA/t.width,e.width=p.Z.MAX_AREA/t.height)}return or.ZP.convertSize((0,h.floor)(e.width),(0,h.floor)(e.height),"px",this.selectedUnit)},errMsg(){const e={width:or.ZP.convert(this.pageWidth,this.selectedUnit,"px"),height:or.ZP.convert(this.pageHeight,this.selectedUnit,"px")};if(this.isOverSize(e.width)||this.isUnderSize(e.width)||this.isOverSize(e.height)||this.isUnderSize(e.height)){if("px"===this.selectedUnit)return this.$t("NN0785",{size1:p.Z.MIN_SIZE+"px",size2:p.Z.MAX_SIZE+"px"}).toString();const e={width:or.ZP.convert(p.Z.MIN_SIZE,"px",this.selectedUnit),height:or.ZP.convert(p.Z.MIN_SIZE,"px",this.selectedUnit)},t={width:or.ZP.convert(p.Z.MAX_SIZE,"px",this.selectedUnit),height:or.ZP.convert(p.Z.MAX_SIZE,"px",this.selectedUnit)};return this.$t("NN0785",{size1:`${(0,h.ceil)(e[this.lastFocusedInput],or.cB)}${this.selectedUnit}`,size2:`${(0,h.floor)(t[this.lastFocusedInput],or.cB)}${this.selectedUnit}`}).toString()}return this.isOverArea()?this.$t("NN0786",{size:`${this.isLocked?`${(0,h.floor)(this.fixedSize.width,or.cB)} x ${(0,h.floor)(this.fixedSize.height,or.cB)}`:(0,h.floor)(this.fixedSize[this.lastFocusedInput],or.cB)} ${this.selectedUnit}`}).toString()+" ":""},formatList(){const e=this.categories.find((e=>e.title===`${this.$t("NN0025")}`));return e?e.list.map((e=>{var t,n,r,i,o,s;return{id:e.id,width:null!=(t=e.width)?t:0,height:null!=(n=e.height)?n:0,title:null!=(r=e.title)?r:"",description:null!=(i=e.description)?i:"",unit:null!=(o=e.unit)?o:"px",icon:null!=(s=e.icon)?s:"",bleed:e.bleed}})):[]},recentlyUsed(){const e=this.categories.find((e=>e.title===`${this.$t("NN0024")}`));return e?e.list.map((e=>{var t,n,r,i,o,s;return{id:e.id,width:null!=(t=e.width)?t:0,height:null!=(n=e.height)?n:0,title:null!=(r=e.title)?r:"",description:null!=(i=e.description)?i:"",unit:null!=(o=e.unit)?o:"px",icon:null!=(s=e.icon)?s:""}})).filter((e=>{const t=or.ZP.convertSize(e.width,e.height,e.unit,"px");return!(t.width*t.height>p.Z.MAX_AREA)})):[]},isLayoutReady(){return 0!==this.formatList.length},unitOptionStyles(){return{"--color-hover":this.isDarkTheme?"#C9DBFF":"#E7EFFF"}}}),methods:OL(DL({},(0,ze.OI)({updatePageProps:"UPDATE_pageProps",addPageToPos:"ADD_pageToPos",setCurrActivePageIndex:"SET_currActivePageIndex",setIsloading:"SET_isGlobalLoading",updateRecentlyUsed:"layouts/UPDATE_RECENTLY_PAGE"})),{isOverArea(){return this.pageSizes.px.width*this.pageSizes.px.height>p.Z.MAX_AREA},isOverSize(e){return e>p.Z.MAX_SIZE},isUnderSize(e){return e<p.Z.MIN_SIZE},getSelectedFormat(){if("custom"===this.selectedFormat){if(!this.isCustomValid)return;return{id:"",width:this.pageWidth,height:this.pageHeight,title:"",description:"",unit:this.selectedUnit,icon:""}}if(this.selectedFormat.startsWith("recent")){const[e,t]=this.selectedFormat.split("-"),n=this.recentlyUsed[parseInt(t)];return this.pageSizes=or.ZP.convertAllSize(n.width,n.height,n.unit),n}if(this.selectedFormat.startsWith("preset")){const[e,t]=this.selectedFormat.split("-"),n=this.formatList[parseInt(t)];return this.pageSizes=or.ZP.convertAllSize(n.width,n.height,n.unit),n}},toggleLock(){this.isLocked=!this.isLocked,this.isLocked&&(this.aspectRatio=this.pageWidth*this.pageHeight<=0?1:this.pageWidth/this.pageHeight)},makeFormatDescription(e){var t,n;return e.description.includes(" ")?e.description.replace(" ",` ${null!=(t=e.unit)?t:"px"} `):`${""===e.description?e.title:e.description} ${null!=(n=e.unit)?n:"px"}`},handleCurrFocusPageIndexChange(){var e,t;const{width:n,height:r,physicalWidth:i,physicalHeight:o,unit:s}=p.Z.currFocusPageSize;this.selectedUnit=null!=s?s:"px",this.pageWidth=null!=(e=null!=i?i:n)?e:0,this.pageHeight=null!=(t=null!=o?o:r)?t:0,this.pageSizes=or.ZP.convertAllSize(this.pageWidth,this.pageHeight,this.selectedUnit),this.aspectRatio=this.pageWidth/this.pageHeight,this.valPageSize.width=(0,h.round)(this.pageWidth,"px"===this.selectedUnit?0:or.cB).toString(),this.valPageSize.height=(0,h.round)(this.pageHeight,"px"===this.selectedUnit?0:or.cB).toString()},setPageWidth(e){const t=e.target.value;this.valPageSize.width=t;const n="string"===typeof t?parseFloat(t):t,r=n.toString()!==t,i=(0,h.round)(n,"px"===this.selectedUnit?0:or.cB),o=this.pageWidth!==i;this.pageWidth=i,r&&!o||(this.valPageSize.width=this.pageWidth.toString()),this.selectedFormat="custom",this.isLocked&&(""===t?(this.pageWidth=NaN,this.pageHeight=NaN):(this.pageHeight=this.pageWidth/this.aspectRatio,"px"===this.selectedUnit&&(this.pageHeight=(0,h.round)(this.pageHeight)),this.valPageSize.height=(0,h.round)(this.pageHeight,or.cB).toString())),this.pageSizes=or.ZP.convertAllSize(this.pageWidth,this.pageHeight,this.selectedUnit)},setPageHeight(e){const t=e.target.value;this.valPageSize.height=t;const n="string"===typeof t?parseFloat(t):t,r=n.toString()!==t,i=(0,h.round)(n,"px"===this.selectedUnit?0:or.cB),o=this.pageHeight!==i;this.pageHeight=i,r&&!o||(this.valPageSize.height=this.pageHeight.toString()),this.selectedFormat="custom",this.isLocked&&(""===t?(this.pageWidth=NaN,this.pageHeight=NaN):(this.pageWidth=this.pageHeight*this.aspectRatio,"px"===this.selectedUnit&&(this.pageWidth=(0,h.round)(this.pageWidth)),this.valPageSize.width=(0,h.round)(this.pageWidth,or.cB).toString())),this.pageSizes=or.ZP.convertAllSize(this.pageWidth,this.pageHeight,this.selectedUnit)},selectFormat(e){this.selectedFormat=e},selectUnit(e,t){e.stopPropagation(),this.selectedFormat="custom",this.showUnitOptions=!1,this.selectedUnit!==t&&(this.pageWidth=this.pageSizes[t].width,this.pageHeight=this.pageSizes[t].height,"px"===t&&(this.pageWidth=(0,h.round)(this.pageWidth),this.pageHeight=(0,h.round)(this.pageHeight)),this.valPageSize.width=(0,h.round)(this.pageWidth,or.cB).toString(),this.valPageSize.height=(0,h.round)(this.pageHeight,or.cB).toString(),this.selectedUnit=t,this.isValidate=!0)},applySelectedFormat(e=!0,t=-1){if(!this.isFormatApplicable)return;const n=this.getSelectedFormat();if(!n)return;const r="px"!==n.unit&&n.bleed?l.Z.deepCopy(n.bleed):null;if(r){const e=(0,h.floor)(or.ZP.convert(p.Z.MAX_BLEED.mm,"mm",n.unit),or.cB);Object.keys(r).forEach((t=>{r[t]=Math.min(r[t],e)}))}if(1!==this.groupType){const{width:e,height:i}=this.pageSizes.px;t=-1===t?this.currFocusPageIndex:t,this.resizePage({width:e,height:i,physicalWidth:n.width,physicalHeight:n.height,unit:n.unit},t),r&&p.Z.setBleeds(t,r)}else{const{pagesLength:e,getPageSize:t}=this,i=p.Z.getPage(this.currFocusPageIndex);for(let o=0;o<e;o++){const s="px"===n.unit;if(o===this.currFocusPageIndex)this.resizePage({width:s?n.width:i.width,height:s?n.height:(0,h.round)(i.width/n.width*n.height),physicalWidth:n.width,physicalHeight:n.height,unit:n.unit});else{const{width:e,height:r,physicalWidth:i,physicalHeight:a}=t(o),l=n.width,c=(0,h.round)(l/i*a,s?0:or.cB);_L.Z.resizePage(o,this.getPage(o),{width:s?l:e,height:s?c:r,physicalWidth:l,physicalHeight:c,unit:n.unit})}if(r){const t=OL(DL({},r),{top:0!==o?0:r.top,bottom:o!==e-1?0:r.bottom});p.Z.setBleeds(o,t)}}}const i="px"===n.unit?0:or.cB;n.width=(0,h.round)(n.width,i),n.height=(0,h.round)(n.height,i),av.Z.addDesign(n.id,"layout",n);const o=this.recentlyUsed.findIndex((e=>n.id===e.id&&n.width===e.width&&n.height===e.height&&n.unit===e.unit));this.updateRecentlyUsed({index:o,format:n}),this.$isTouchDevice()&&p.Z.fitPage(),e&&cn.Z.record()},copyAndApplySelectedFormat(){if(!this.isFormatApplicable)return;const e=p.Z.currFocusPageIndex,t=l.Z.deepCopy(this.getPage(e));t.designId="",t.id=l.Z.generateRandomString(8),this.addPageToPos({newPage:t,pos:e+1}),tr.Z.deselect(),this.setCurrActivePageIndex(e+1),this.applySelectedFormat(!1,e+1),cn.Z.record(),this.$nextTick((()=>{p.Z.scrollIntoPage(e+1)}))},submit:(0,h.throttle)((function(){gs.Z.checkPro({plan:1},"page-resize")&&(this.copyBeforeApply?this.copyAndApplySelectedFormat():this.applySelectedFormat(),ke.Z.setShowMobilePanel(!1),this.$emit("close"))}),2e3,{trailing:!1}),resizePage(e,t=p.Z.currFocusPageIndex){_L.Z.resizePage(t,this.getPage(t),e)},handleInputBlur(e){this.isValidate=!0,("width"===e||this.isLocked)&&isNaN(this.pageWidth)&&(this.pageWidth=0,this.valPageSize.width="0"),("height"===e||this.isLocked)&&isNaN(this.pageHeight)&&(this.pageHeight=0,this.valPageSize.height="0"),this.pageSizes=or.ZP.convertAllSize(this.pageWidth,this.pageHeight,this.selectedUnit)},fixSize(e=!0){const t=this.fixedSize;("width"===this.lastFocusedInput||this.isLocked)&&(this.pageWidth=(0,h.floor)(t.width,or.cB),this.valPageSize.width=this.pageWidth.toString()),("height"===this.lastFocusedInput||this.isLocked)&&(this.pageHeight=(0,h.floor)(t.height,or.cB),this.valPageSize.height=this.pageHeight.toString()),e&&(this.pageSizes=or.ZP.convertAllSize(this.pageWidth,this.pageHeight,this.selectedUnit))}})});const AL=(0,oe.Z)(ML,[["render",PL],["__scopeId","data-v-2f37a790"],["__file","PageSizeSelector.vue"]]);var $L=AL,FL=(0,P.aZ)({emits:[],components:{PageSizeSelector:$L}});const jL=(0,oe.Z)(FL,[["render",JT],["__scopeId","data-v-48a91e7f"],["__file","PanelResize.vue"]]);var BL=jL;const RL=e=>((0,P.dD)("data-v-01174882"),e=e(),(0,P.Cn)(),e),HL={class:"panel-text-effect"},UL={key:1,class:"panel-text-effect__effects"},WL=["onClick"],VL=["src","width","height"],GL={key:3,class:"panel-text-effect__effects--more"},qL={key:2,class:"w-full panel-text-effect__form"},KL={class:"panel-text-effect__effect-name"},YL={key:0,class:"panel-text-effect__option-name"},XL={key:1,class:"panel-text-effect__endpoint"},QL=["onClick"],JL=["src"],eE={key:2,class:"panel-text-effect__select"},tE=["onClick"],nE=["src"],rE={key:4,class:"panel-text-effect__color"},iE=["onClick"],oE=["src"],sE=RL((()=>(0,P._)("div",null,null,-1)));function aE(e,t,n,r,i,o){const s=(0,P.up)("tabs"),a=(0,P.up)("svg-icon"),l=(0,P.up)("pro-item"),c=(0,P.up)("mobile-slider"),d=(0,P.up)("color-btn");return(0,P.wg)(),(0,P.iD)("div",HL,["effects"===e.state?((0,P.wg)(),(0,P.j4)(s,{key:0,tabs:e.textEffects.map((e=>e.label)),modelValue:e.currTabIndex,"onUpdate:modelValue":t[0]||(t[0]=t=>e.currTabIndex=t),theme:"light"},null,8,["tabs","modelValue"])):(0,P.kq)("",!0),"effects"===e.state?((0,P.wg)(),(0,P.iD)("div",UL,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.effectList,(t=>{var n,r;return(0,P.wg)(),(0,P.iD)("div",{key:`${e.currCategoryName}-${t.key}`,class:(0,k.C_)({selected:(null==(n=e.currEffect)?void 0:n.key)===t.key}),onClick:n=>e.onEffectClick(e.currCategory,t)},[["custom-fill-img"].includes(t.key)?((0,P.wg)(),(0,P.j4)(a,{key:0,class:"panel-text-effect__effects--icon",iconName:e.effectIcon(e.currCategory,t).name,iconWidth:e.effectIcon(e.currCategory,t).size,iconColor:"gray-5"},null,8,["iconName","iconWidth"])):((0,P.wg)(),(0,P.iD)("img",{key:1,class:"panel-text-effect__effects--icon",src:e.effectIcon(e.currCategory,t).name,width:e.effectIcon(e.currCategory,t).size,height:e.effectIcon(e.currCategory,t).size},null,8,VL)),t.plan?((0,P.wg)(),(0,P.j4)(l,{key:2,theme:"roundedRect"})):(0,P.kq)("",!0),(null==(r=e.currEffect)?void 0:r.key)===t.key&&"none"!==t.key?((0,P.wg)(),(0,P.iD)("div",GL,[(0,P.Wm)(a,{iconName:"sliders",iconWidth:"20px",iconColor:"white"})])):(0,P.kq)("",!0)],10,WL)})),128))])):(0,P.kq)("",!0),"options"===e.state&&null!==e.currEffect?((0,P.wg)(),(0,P.iD)("div",qL,[(0,P._)("span",KL,(0,k.zw)(e.currEffect.label),1),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.currEffect.options,(n=>((0,P.wg)(),(0,P.iD)("div",{class:(0,k.C_)(["panel-text-effect__field",{disabled:e.optionDisabled(n)}]),key:n.key},["endpoint"===n.key||["range","color"].includes(n.type)?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",YL,(0,k.zw)(n.label),1)),"select"===n.type&&"endpoint"===n.key?((0,P.wg)(),(0,P.iD)("div",XL,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(n.select,(t=>((0,P.wg)(),(0,P.iD)("div",{key:t.key,class:(0,k.C_)({selected:e.currentStyle[n.key]===t.key}),onClick:n=>e.handleSelectInput(t)},[(0,P._)("img",{src:t.img},null,8,JL),(0,P._)("span",null,(0,k.zw)(t.label),1)],10,QL)))),128))])):(0,P.kq)("",!0),"select"===n.type&&"endpoint"!==n.key?((0,P.wg)(),(0,P.iD)("div",eE,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(n.select,(t=>{var r;return(0,P.wg)(),(0,P.iD)("div",{key:t.key,onClick:n=>e.handleSelectInput(t)},[(0,P._)("img",{src:t.img,class:(0,k.C_)({selected:(null!=(r=e.currentStyle[n.key].key)?r:e.currentStyle[n.key])===t.key})},null,10,nE),t.plan?((0,P.wg)(),(0,P.j4)(l,{key:0,theme:"roundedRect"})):(0,P.kq)("",!0)],8,tE)})),128))])):(0,P.kq)("",!0),"range"===n.type?((0,P.wg)(),(0,P.j4)(c,{key:3,borderTouchArea:!0,title:n.label,value:e.getInputValue(e.currentStyle,n),max:n.max,min:n.min,step:"lineHeight"===n.key?.01:1,autoRecord:!1,disabled:e.optionDisabled(n),onUpdate:t=>e.handleRangeInput(t,n),onPointerdown:t[1]||(t[1]=t=>e.setEffectFocus(!0)),onPointerup:t[2]||(t[2]=t=>e.setEffectFocus(!1)),onPointercancel:t[3]||(t[3]=t=>e.setEffectFocus(!1))},null,8,["title","value","max","min","step","disabled","onUpdate"])):(0,P.kq)("",!0),"color"===n.type?((0,P.wg)(),(0,P.iD)("div",rE,[(0,P._)("div",null,(0,k.zw)(n.label),1),(0,P.Wm)(d,{color:e.colorParser(e.currentStyle[n.key]),disable:e.optionDisabled(n),size:"30px",onClick:t=>e.openColorPanel(n.key)},null,8,["color","disable","onClick"])])):(0,P.kq)("",!0),"img"===n.type?((0,P.wg)(),(0,P.iD)("div",{key:5,class:"panel-text-effect__img",onClick:t=>e.chooseImg(n.key)},[(0,P._)("img",{src:e.getStyleImg},null,8,oE),sE,(0,P.Wm)(a,{class:"absolute",iconName:"replace",iconColor:"white",iconWidth:"32px"})],8,iE)):(0,P.kq)("",!0)],2)))),128)),(0,P._)("span",{class:"panel-text-effect__reset",onClick:t[4]||(t[4]=t=>e.resetTextEffect())},(0,k.zw)(e.$t("NN0754")),1)])):(0,P.kq)("",!0)])}var lE=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),cE=(0,P.aZ)({name:"MobilePanelTextEffectSetting",extends:Jg,components:{MobileSlider:ro,ColorBtn:Ie.Z,ProItem:uo.Z,Tabs:yo.Z},props:{panelHistory:{type:Array,default:[]}},emits:["pushHistory","openExtraColorModal","openExtraPanelReplace"],data(){return{}},computed:{currTabIndex:{get:function(){var e;return null!=(e={shadow:0,shape:1,bg:2,fill:3}[this.currTab])?e:0},set:function(e){var t;this.currTab=null!=(t=["shadow","shape","bg","fill"][e])?t:0,Ag.Z.set("textEffectSetting","tab",this.currTab)}},currCategory(){return m().find(this.textEffects,["name",this.currCategoryName])},effectList(){return this.currCategory?m().flatten(this.currCategory.effects2d):null},currEffect(){var e;return this.currCategory&&null!=(e=m().find(this.effectList,["key",this.currentStyle.name]))?e:null},state(){var e;return"fill"===this.currCategoryName&&(null==(e=this.currEffect)?void 0:e.options.some((e=>"img"===e.type)))&&!this.currentStyle.customImg||0===this.panelHistory.length?"effects":"options"}},mounted(){},beforeUnmount(){},methods:{openColorPanel(e){"shadow"===this.currCategoryName?(_e.ZP.setCurrEvent(o.gQ.textEffect),this.$emit("openExtraColorModal",o.gQ.textEffect,o.pp.palette),Fg.Z.setColorKey(e)):(_e.ZP.setCurrEvent(o.gQ.textBg),this.$emit("openExtraColorModal",o.gQ.textBg,o.pp.palette),$g.Z.setColorKey(e))},onEffectClick(e,t){return lE(this,null,(function*(){var e,n;if(!gs.Z.checkPro(t,"pro-text"))return;const r=null!=(n=null==(e=t.options.find((e=>"img"===e.type)))?void 0:e.key)?n:"";if(t.key!==this.currentStyle.name)yield this.setEffect({effectName:t.key}),this.recordChange(),r&&!this.getStyleImg&&this.chooseImg(r);else if("none"!==t.key){if(r&&!this.getStyleImg)return void this.chooseImg(r);this.$emit("pushHistory",t.key)}}))},chooseImg(e){this.$emit("openExtraPanelReplace",this.replaceImg(e))}}});const dE=(0,oe.Z)(cE,[["render",aE],["__scopeId","data-v-01174882"],["__file","PanelTextEffect.vue"]]);var uE=dE,gE=Object.defineProperty,pE=Object.defineProperties,hE=Object.getOwnPropertyDescriptors,mE=Object.getOwnPropertySymbols,yE=Object.prototype.hasOwnProperty,fE=Object.prototype.propertyIsEnumerable,bE=(e,t,n)=>t in e?gE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vE=(e,t)=>{for(var n in t||(t={}))yE.call(t,n)&&bE(e,n,t[n]);if(mE)for(var n of mE(t))fE.call(t,n)&&bE(e,n,t[n]);return e},wE=(e,t)=>pE(e,hE(t)),NE=(0,P.aZ)({name:"mobile-panel",props:{currActivePanel:{default:"none",type:String},isSubPanel:{default:!1,type:Boolean},currPage:{type:Object,required:!0},footerTabsRef:{type:HTMLElement}},emits:["panelHeight","switchTab"],directives:{clickOutside:Ce().directive},components:{PanelTemplate:Sw,PanelPhoto:Kb,PanelObject:Xf,PanelBackground:Iy,PanelText:rN,PanelFile:yf,PanelBrand:VI,PanelPage:Lb,PanelPosition:ET,PanelFlip:sZ,PanelOpacity:jz,PanelRemoveBg:XT,PanelOrder:Jz,PanelFonts:Es.Z,PanelFontSize:AZ,PanelFontFormat:SZ,PanelFontSpacing:XZ,PanelResize:BL,PopupDownload:wi.Z,PanelMore:FC,PanelColor:A_,PanelAdjust:pI,PanelTextEffect:uE,PanelDownload:Uk,PanelNudge:qC,PanelPhotoShadow:wT,PanelObjectAdjust:_z,PanelBrandList:b_,PanelBleed:wI,Tabs:yo.Z,Overlay:zo},data(){return{panelHistory:[],panelDragHeight:0,lastPointerY:0,extraPanel:"",replaceImg:()=>{},extraColorEvent:o.gQ.text,isDraggingPanel:!1,currSubColorEvent:"",innerTabIndex:0,resizeObserver:null}},created(){(0,P.JJ)(x.v,(0,P.Fl)((()=>"replace"===this.extraPanel?this.replaceImg:null)))},computed:wE(vE(vE({},(0,ze.Se)("imgControl",{isImgCtrl:"isImgCtrl",isBgImgCtrl:"isBgImgCtrl"})),(0,ze.Se)({isShowPagePreview:"page/getIsShowPagePreview",showPagePanel:"page/getShowPagePanel",bgRemoveMode:"bgRemove/getInBgRemoveMode",inMultiSelectionMode:"mobileEditor/getInMultiSelectionMode",currSelectedInfo:"getCurrSelectedInfo",inBgSettingMode:"mobileEditor/getInBgSettingMode",currActiveSubPanel:"mobileEditor/getCurrActiveSubPanel",showMobilePanel:"mobileEditor/getShowMobilePanel",hasCopiedFormat:"getHasCopiedFormat",userInfo:"webView/getUserInfo",inBrowserMode:"webView/getInBrowserMode"})),{historySize(){return this.panelHistory.length},currHistory(){return this.panelHistory[this.historySize-1]},backgroundLocked(){const{locked:e}=p.Z.currFocusPage.backgroundImage.config;return e},selectedLayerNum(){return this.currSelectedInfo.layers.length},whiteTheme(){const e=["bleed","replace","crop","bgRemove","position","flip","opacity","order","fonts","font-size","text-effect","font-format","font-spacing","download","more","color","adjust","photo-shadow","resize","object-adjust","brand-list","copy-style","multiple-select","remove-bg","nudge","overlay-light"];return""!==this.extraPanel||e.includes(this.currActivePanel)||"overlay-dark"===this.currActivePanel&&this.historySize>0},noPaddingTheme(){return""===this.extraPanel&&["brand-list","text-effect","overlay-dark","overlay-light"].includes(this.currActivePanel)},fixSize(){return["bleed","crop","bgRemove","position","flip","opacity","order","font-size","font-format","font-spacing","more","object-adjust","brand-list","multiple-select","nudge"].includes(this.currActivePanel)},hideFooter(){return["download","remove-bg"].includes(this.currActivePanel)},hideTopSection(){return["overlay-dark","overlay-light"].includes(this.currActivePanel)&&0===this.historySize},extraFixSizeCondition(){switch(this.currActivePanel){default:return!1}},halfSizeInInitState(){return""!==this.extraPanel||["fonts","adjust","photo-shadow","color","text-effect"].includes(this.currActivePanel)},panelTitle(){switch(this.currActivePanel){case"crop":return`${this.$t("NN0496")}`;case"copy-style":return`${this.$t("NN0809")}`;case"multiple-select":return`${this.$t("NN0657")}`;case"remove-bg":return`${this.$t("NN0043")}`;case"none":return"";default:return""}},showRightBtn(){return"download"===this.currActivePanel?this.historySize<2&&!["polling","downloaded"].includes(this.currHistory):"none"!==this.currActivePanel},showLeftBtn(){return("download"!==this.currActivePanel||!["polling","downloaded","setting"].includes(this.currHistory))&&(this.bgRemoveMode||this.whiteTheme&&(this.panelHistory.length>0||this.extraPanel))},hideDynamicComp(){return["crop","copy-style","multiple-select"].includes(this.currActivePanel)},noRowGap(){return["crop","color","copy-style","multiple-select","remove-bg","text-effect"].includes(this.currActivePanel)},panelStyle(){var e;const t=["template","photo","object","background","text","file","fonts"].includes(this.currActivePanel),n=(null==(e=this.footerTabsRef)?void 0:e.clientHeight)||0;return Object.assign({bottom:this.hideFooter?-1*n+"px":"0"},this.isSubPanel?{bottom:"0",position:"absolute",zIndex:"100"}:{},vE(vE({"row-gap":this.noRowGap?"0px":"10px",backgroundColor:this.whiteTheme?"white":"#2C2F43",maxHeight:this.fixSize||this.extraFixSizeCondition?"100%":this.panelDragHeight+"px"},this.hideFooter&&{zIndex:"100"}),this.hideFooter&&{paddingBottom:`${this.userInfo.homeIndicatorHeight+8}px`}),t?{height:`calc(100% - ${this.userInfo.statusBarHeight}px)`}:{},this.hideTopSection?{gridTemplateRows:"minmax(0, 1fr)"}:{})},innerTab(){return this.innerTabs.key[this.innerTabIndex]},innerTabs(){const e={key:["file","photo"],label:[this.$tc("NN0006"),this.$t("STK0069")]};if("replace"===this.extraPanel)return e;switch(this.currActivePanel){case"replace":return e;default:return{key:[""]}}},dynamicBindIs(){switch(this.extraPanel){case"color":return"panel-color";case"replace":return`panel-${this.innerTab}`}switch(this.currActivePanel){case"replace":return`panel-${this.innerTab}`;case"overlay-dark":case"overlay-light":return"overlay";case"none":return"";default:return`panel-${this.currActivePanel}`}},dynamicBindProps(){if("color"===this.extraPanel)return{currEvent:this.extraColorEvent,panelHistory:this.panelHistory};switch(this.currActivePanel){case"fonts":return{showTitle:!1};case"download":return{hideContainer:!0,pageIndex:p.Z.currFocusPageIndex,panelHistory:this.panelHistory};case"text-effect":return{panelHistory:this.panelHistory};case"color":return{panelHistory:this.panelHistory};case"brand-list":{const e={panelHistory:this.panelHistory};return"text"===ke.Z.currActivePanel?{defaultOption:!0}:"brand"===ke.Z.currActivePanel?{hasAddBrand:!0}:e}case"brand":return{maxheight:this.panelParentHeight()};case"more":return{panelHistory:this.panelHistory};case"overlay-dark":case"overlay-light":return{theme:this.currActivePanel.replace("overlay-",""),panelHistory:this.panelHistory};default:return{}}},dynamicBindMethod(){const e=e=>{this.panelHistory.push(e)},t=(e,t)=>{this.extraPanel="color",this.extraColorEvent=e,this.panelHistory.push(t)},n=e=>{this.extraPanel="replace",this.replaceImg=e,this.panelHistory.push("replace")};switch(this.currActivePanel){case"color":case"more":case"overlay-dark":case"overlay-light":return{pushHistory:e};case"background":return{openExtraColorModal:t};case"text-effect":return{pushHistory:e,openExtraColorModal:t,openExtraPanelReplace:n};case"photo-shadow":return{pushHistory:e,openExtraColorModal:t};case"download":case"brand-list":return{pushHistory:e,back:()=>{this.panelHistory.pop()},"update:panelHistory":e=>{this.panelHistory=[e]}};default:return{}}},leftBtnName(){return this.bgRemoveMode?"close-circle":"back-circle"},rightBtnName(){return"download"===this.currActivePanel?"close-circle":this.bgRemoveMode||this.panelHistory.length>0&&"brand-list"!==this.currActivePanel||["crop"].includes(this.currActivePanel)?"check-mobile-circle":"close-circle"},leftButtonAction(){return this.bgRemoveMode?()=>{ws.cancel()}:"color"===this.extraPanel||"replace"===this.extraPanel?()=>{this.extraPanel="",this.panelHistory.pop()}:this.panelHistory.length>0?()=>{this.panelHistory.pop()}:()=>{this.closeMobilePanel()}},rightButtonAction(){return()=>{switch(this.currActivePanel){case"crop":if(this.selectedLayerNum>0)if(rr.Z.isImgControl())rr.Z.setImgControlDefault();else{let e;switch(g.ZP.getCurrLayer.type){case"image":g.ZP.updateLayerProps(g.ZP.pageIndex,g.ZP.layerIndex,{imgControl:!0});break;case"frame":e=g.ZP.getCurrLayer.clips.findIndex((e=>"image"===e.type)),e>=0&&er.Z.updateFrameLayerProps(g.ZP.pageIndex,g.ZP.layerIndex,e,{imgControl:!0});break}}else if(this.inBgSettingMode){if(this.backgroundLocked)return this.handleLockedNotify();this.setBgImageControl({pageIndex:p.Z.currFocusPageIndex,imgControl:!1})}break;case"copy-style":Jr.Z.clearCopiedFormat();break;case"multiple-select":this.inMultiSelectionMode&&ke.Z.setInMultiSelectionMode(!1);break;case"remove-bg":this.bgRemoveMode&&ws.save();break}this.closeMobilePanel()}}}),watch:{selectedLayerNum(e){0===e&&ke.Z.setInMultiSelectionMode(!1)},currActivePanel(e,t){this.panelHistory=[],this.innerTabIndex=0,"none"===t&&(this.panelDragHeight="none"===e?0:this.initPanelHeight())},showMobilePanel(e){e||setTimeout((()=>{this.extraPanel=""}),1e3)}},mounted(){this.panelDragHeight="none"===this.currActivePanel?0:this.initPanelHeight(),this.resizeObserver=new ResizeObserver((()=>{this.$emit("panelHeight",this.currPanelHeight())})),this.resizeObserver.observe(this.$refs.panel)},beforeUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()},methods:wE(vE(vE({},(0,ze.OI)({setBgImageControl:"SET_backgroundImageControl",setCurrActiveSubPanel:"mobileEditor/SET_currActiveSubPanel"})),(0,ze.nv)({fetchPalettes:"brandkit/fetchPalettes",initRecentlyColors:"color/initRecentlyColors"})),{vcoConfig(){return{handler:e=>{this.isImgCtrl||this.isBgImgCtrl||this.inMultiSelectionMode||this.bgRemoveMode||this.closeMobilePanel()},middleware:this.middleware,events:["touchstart","pointerdown",..."localhost:8080"===window.location.host?[]:["contextmenu"]]}},middleware(e){var t,n,r,i;const o=e.target;return!((null==(t=o.matches)?void 0:t.call(o,".header-bar .panel-icon *"))||(null==(n=o.matches)?void 0:n.call(o,".modal-container, .modal-container *"))||(null==(i=(r=o.className).includes)?void 0:i.call(r,"footer-tabs"))||"inputNode"===o.className)},closeMobilePanel(){this.isSubPanel?ke.Z.setCurrActiveSubPanel("none"):ke.Z.setShowMobilePanel(!1)},haederbarHeight(){var e,t;return null!=(t=null==(e=document.querySelector(".mobile-editor .header-bar"))?void 0:e.clientHeight)?t:0},initPanelHeight(){return this.halfSizeInInitState?.5*this.panelParentHeight():this.panelParentHeight()-(this.haederbarHeight()+30)},currPanelHeight(){return this.$refs.panel.clientHeight},panelParentHeight(){return document.querySelector(".mobile-editor .mobile-editor__top").clientHeight-this.userInfo.statusBarHeight},dragPanelStart(e){this.fixSize||(this.isDraggingPanel=!0,this.lastPointerY=e.clientY,this.panelDragHeight=this.currPanelHeight(),le.ZP.addPointerEvent("pointermove",this.dragingPanel),le.ZP.addPointerEvent("pointerup",this.dragPanelEnd))},dragingPanel(e){this.panelDragHeight-=e.clientY-this.lastPointerY,this.lastPointerY=e.clientY},dragPanelEnd(){this.isDraggingPanel=!1;const e=this.panelParentHeight();this.panelDragHeight<.25*e?this.closeMobilePanel():this.panelDragHeight>=.75*e?(this.panelDragHeight=e-(this.haederbarHeight()+30),this.$emit("panelHeight",this.panelDragHeight+30)):(this.panelDragHeight=.5*e,this.$emit("panelHeight",this.panelDragHeight+30)),le.ZP.removePointerEvent("pointermove",this.dragingPanel),le.ZP.removePointerEvent("pointerup",this.dragPanelEnd)},disableTouchEvent(e){this.$isTouchDevice()&&(e.preventDefault(),e.stopPropagation())},handleLockedNotify(){(0,sr.h4)({group:"copy",text:r.Z.global.tc("NN0804")})},switchTab(e,t){this.currActiveSubPanel===e?this.setCurrActiveSubPanel("none"):(this.setCurrActiveSubPanel(e),t&&"color"===e&&t.currColorEvent&&(this.currSubColorEvent=t.currColorEvent))}})});const SE=(0,oe.Z)(NE,[["render",QP],["__scopeId","data-v-15cb3f54"],["__file","MobilePanel.vue"]]);var xE=SE,PE=Object.defineProperty,IE=Object.defineProperties,_E=Object.getOwnPropertyDescriptors,kE=Object.getOwnPropertySymbols,ZE=Object.prototype.hasOwnProperty,CE=Object.prototype.propertyIsEnumerable,zE=(e,t,n)=>t in e?PE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TE=(e,t)=>{for(var n in t||(t={}))ZE.call(t,n)&&zE(e,n,t[n]);if(kE)for(var n of kE(t))CE.call(t,n)&&zE(e,n,t[n]);return e},LE=(e,t)=>IE(e,_E(t)),EE=(0,P.aZ)({emits:[],name:"MobileEditor",components:{MobileEditorView:UP,MobilePanel:xE,HeaderTabs:Kx,FooterTabs:Ex,AllPages:yx},data(){return{isConfigPanelOpen:!1,currColorEvent:"",showMobilePanelAfterTransitoin:!1,marginBottom:0,footerTabsRef:void 0}},props:{currPage:{type:Object,required:!0}},created(){le.ZP.on(le.rZ.switchTab,this.switchTab)},beforeUnmount(){le.ZP.off(le.rZ.switchTab)},mounted(){cn.Z.MAX_STORAGE_COUNT=15,document.addEventListener("touchstart",(e=>{const t=e.touches[0].clientX<=5||e.touches[0].clientX>window.innerWidth-5;(e.touches.length>1||t)&&e.preventDefault()}),{passive:!1});let e=0;document.addEventListener("touchend",(t=>{const n=(new Date).getTime();n-e<=300&&t.preventDefault(),e=n}),!1),a.Z.fetchBrands(this.fetchBrands),this.footerTabsRef=this.$refs.footerTabs.$el},computed:LE(TE(TE(TE({},(0,ze.rn)("mobileEditor",{closeMobilePanelFlag:"closeMobilePanelFlag",inAllPagesMode:"mobileAllPageMode",mobilePanel:"currActivePanel",inBgRemoveMode:"bgRemove/getInBgRemoveMode"})),(0,ze.rn)("user",["viewGuide"])),(0,ze.Se)({groupId:"getGroupId",currSelectedInfo:"getCurrSelectedInfo",currSubSelectedInfo:"getCurrSubSelectedInfo",contentScaleRatio:"getContentScaleRatio",isShowPagePreview:"page/getIsShowPagePreview",currPanel:"getCurrSidebarPanelType",groupType:"getGroupType",isSidebarPanelOpen:"getMobileSidebarPanelOpen",currActivePanel:"mobileEditor/getCurrActivePanel",showMobilePanel:"mobileEditor/getShowMobilePanel"})),{contentStyle(){return{transform:`translateY(-${this.marginBottom}px)`}}}),watch:{closeMobilePanelFlag(e){e&&(this.setCurrActiveSubPanel("none"),this.setCloseMobilePanelFlag(!1),ke.Z.setShowMobilePanel(!1))},mobilePanel(e,t){"photo-shadow"===t&&us.Z.handleShadowUpload()}},methods:LE(TE(TE({},(0,ze.OI)({setMobileSidebarPanelOpen:"SET_mobileSidebarPanelOpen",setCloseMobilePanelFlag:"mobileEditor/SET_closeMobilePanelFlag",setCurrActiveSubPanel:"mobileEditor/SET_currActiveSubPanel"})),(0,ze.nv)({fetchBrands:"brandkit/fetchBrands"})),{switchTab(e,t){(this.inBgRemoveMode||"remove-bg"!==e)&&(this.currActivePanel===e&&"color"===e&&(null==t?void 0:t.currColorEvent)&&this.currColorEvent!==t.currColorEvent?this.currColorEvent=t.currColorEvent:this.currActivePanel===e||"none"===e?(ke.Z.setShowMobilePanel(!1),ke.Z.setInMultiSelectionMode(!1)):(ke.Z.setCurrActivePanel(e),"color"===e&&(null==t?void 0:t.currColorEvent)&&(this.currColorEvent=t.currColorEvent)),"none"!==this.currActivePanel&&this.inAllPagesMode&&ke.Z.setMobileAllPageMode(!1))},showAllPages(){ke.Z.setMobileAllPageMode(!this.inAllPagesMode),this.inAllPagesMode||this.$nextTick((()=>{p.Z.fitPage()}))},setPanelHeight(e){var t;const n=this.$refs["mobile-editor__content"],r=null!=(t=null==n?void 0:n.clientHeight)?t:0;if(0===e||e>r)return void(this.marginBottom=0);const i=(0,h.find)(this.currPage.layers,["active",!0]);let o=0;if(i&&r){const e=i.styles.y+i.styles.height/2-this.currPage.height/2;o=e*this.contentScaleRatio}this.marginBottom=Math.max(e/2+o,0)},beforeEnter(){this.showMobilePanelAfterTransitoin=!0},afterLeave(){ke.Z.setCurrActivePanel("none"),setTimeout((()=>{this.showMobilePanelAfterTransitoin=!1}),300)}})});const DE=(0,oe.Z)(EE,[["render",tx],["__scopeId","data-v-1db6c8a4"],["__file","MobileEditor.vue"]]);var OE=DE,ME=Object.defineProperty,AE=Object.defineProperties,$E=Object.getOwnPropertyDescriptors,FE=Object.getOwnPropertySymbols,jE=Object.prototype.hasOwnProperty,BE=Object.prototype.propertyIsEnumerable,RE=(e,t,n)=>t in e?ME(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HE=(e,t)=>{for(var n in t||(t={}))jE.call(t,n)&&RE(e,n,t[n]);if(FE)for(var n of FE(t))BE.call(t,n)&&RE(e,n,t[n]);return e},UE=(e,t)=>AE(e,$E(t)),WE=(0,P.aZ)({emits:[],components:{DesktopEditor:QS,MobileEditor:OE},data(){return{isSaving:!1,isLoading:!1}},metaInfo(){return{title:`${this.$t("SE0001")}`,meta:[{name:"description",content:`${this.$t("SE0002")}`,vmid:"description"},{property:"og:title",content:`${this.$t("OG0001")}`,vmid:"og:title"},{property:"og:image",content:`${this.$t("OG0003")}`,vmid:"og:image"},{name:"description",content:`${this.$t("SE0002")}`,vmid:"description"},{property:"twitter:title",content:`${this.$t("OG0001")}`,vmid:"twitter:title"},{property:"twitter:image",content:`${this.$t("OG0003")}`,vmid:"twitter:image"},{property:"twitter:description",content:`${this.$t("OG0002")}`,vmid:"twitter:description"},{property:"og:url",content:`${this.$t("OG0005")}`,vmid:"og:url"}]}},computed:UE(HE({},(0,ze.Se)({useMobileEditor:"getUseMobileEditor",isGlobalLoading:"getIsGlobalLoading",getPage:"getPage"})),{currPage(){return this.getPage(p.Z.currFocusPageIndex)}}),beforeRouteLeave(e,t,n){ke.Z.setCloseMobilePanelFlag(!0),cn.Z.clearSteps(),ke.Z.setCurrCardIndex(0),Qe.Z.isLogin&&this.$router.currentRoute.value.query.design_id&&this.$router.currentRoute.value.query.type?(this.isSaving=!0,Qe.Z.uploadDesign(Qe.Z.PutAssetDesignType.UPDATE_BOTH).then((()=>{this.setIsGettingDesign(!1),d.Z.setLog("Leave editor"),this.isSaving=!1,n()})),this.initMobileEditorState()):(d.Z.setLog("Leave editor"),n())},beforeUnmount(){this.clearState(),this.clearBgRemoveState()},mounted(){var e;const t=this.$router.currentRoute.value.query;"new-design-size"===t.type&&(t.unit=null!=(e=t.unit)?e:"px"),this.$router.replace({query:t})},methods:UE(HE({},(0,ze.OI)({setCurrFunctionPanel:"SET_currFunctionPanelType",clearState:"CLEAR_state",clearBgRemoveState:"bgRemove/CLEAR_bgRemoveState",setIsGettingDesign:"SET_isGettingDesign",initMobileEditorState:"mobileEditor/INIT_STATE"})),{setIsLoading(){this.isLoading=!0}})});const VE=(0,oe.Z)(WE,[["render",_],["__scopeId","data-v-361daf28"],["__file","Editor.vue"]]);var GE=VE;const qE={class:"home"},KE={class:"home-content"},YE={key:0,class:"home-top"},XE={class:"home-top-text"},QE=["innerHTML"],JE={class:"home-top-text__description"},eD=["src"],tD={class:"px-20",style:{boxSizing:"border-box"}},nD={key:1,class:"home-block"},rD={key:0,class:"template-list"},iD={class:"template-list__content"},oD={class:"template-list__gallery"},sD=["onClick"];function aD(e,t,n,r,i,o){const s=(0,P.up)("nu-header"),a=(0,P.up)("animation"),l=(0,P.up)("router-link"),c=(0,P.up)("scroll-list"),d=(0,P.up)("ta-block"),u=(0,P.up)("hashtag-category-row"),g=(0,P.up)("template-waterfall"),p=(0,P.up)("nu-footer");return(0,P.wg)(),(0,P.iD)("div",qE,[(0,P.Wm)(s,{showCloseIcon:e.showTemplateList,onClose:t[0]||(t[0]=t=>e.showTemplateList=!1)},null,8,["showCloseIcon"]),(0,P._)("div",KE,[e.inBrowserMode&&!e.isLogin?((0,P.wg)(),(0,P.iD)("div",YE,[(0,P._)("div",XE,[(0,P._)("span",{class:"home-top-text__title",innerHTML:e.$t("NN0464")},null,8,QE),(0,P._)("span",JE,(0,k.zw)(e.$t("NN0465")),1),((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.colorBlock,(e=>((0,P.wg)(),(0,P.j4)(a,{key:e,class:(0,k.C_)(`home-top-text__colorBlock ${e.replace(".json","")}`),path:"/lottie/"+e},null,8,["class","path"])))),128))]),(0,P._)("iframe",{class:"home-top__yt",title:"Vivipic",src:`https://www.youtube.com/embed/${e.ytId}?playsinline=1&autoplay=1&mute=${e.isMobile?0:1}&rel=0`,frameborder:"0",allowfullscreen:"",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"},null,8,eD),e.inBrowserMode&&!e.$isTouchDevice()?((0,P.wg)(),(0,P.j4)(l,{key:0,class:"home-top__button rounded btn-primary-sm btn-LG",to:"/editor?type=new-design-size&width=1080&height=1080"},{default:(0,P.w5)((()=>[(0,P._)("span",null,(0,k.zw)(e.$t("NN0391")),1)])),_:1})):(0,P.kq)("",!0)])):(0,P.kq)("",!0),(0,P._)("div",{class:(0,k.C_)(["home-list",[e.isMobileSize?"mt-10":" mt-100"]])},[e.isLogin||!e.isMobile?((0,P.wg)(),(0,P.j4)(c,{key:0,gridMode:!0,type:"theme"})):(0,P.kq)("",!0),e.isLogin&&e.inBrowserMode&&!e.isMobile?((0,P.wg)(),(0,P.j4)(c,{key:1,class:"mt-100 mb-65",type:"mydesign"})):(0,P.kq)("",!0),(0,P._)("div",tD,[e.isLogin?(0,P.kq)("",!0):((0,P.wg)(),(0,P.j4)(d,{key:0,class:(0,k.C_)(["tag-title",[e.isMobileSize?"mt-35":" mt-100"]]),content:e.templateBlock,"desktop-max-width":"100%"},null,8,["class","content"]))]),(0,P.Wm)(u,{class:"home-list__hashtag",style:(0,k.j5)({position:e.isMobile?"sticky":"relative"}),type:"tag",title:"",list:e.homeTags,defaultSelection:[],shinkWidth:0,onSelect:e.handleSelectTags},null,8,["style","list","onSelect"]),0!==e.selectedTags.length?((0,P.wg)(),(0,P.j4)(g,{key:2,waterfallTemplates:e.waterfallTemplates,isTemplateReady:e.isTemplateReady,useScrollablePreview:!e.isMobile,useScrollSpace:e.isMobile,themes:e.themes,onLoadMore:e.handleLoadMore,onClickWaterfall:e.handleClickWaterfall},null,8,["waterfallTemplates","isTemplateReady","useScrollablePreview","useScrollSpace","themes","onLoadMore","onClickWaterfall"])):((0,P.wg)(!0),(0,P.iD)(P.HY,{key:3},(0,P.Ko)(e.themeList,(e=>((0,P.wg)(),(0,P.j4)(c,{type:"template",theme:`${e}`,key:e,shuffle:!0},null,8,["theme"])))),128))],2),!e.inBrowserMode||e.isMobile&&e.isLogin?(0,P.kq)("",!0):((0,P.wg)(),(0,P.iD)("div",nD,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.blocklist,(e=>((0,P.wg)(),(0,P.j4)(d,{key:e.title,content:e},null,8,["content"])))),128))])),!e.inBrowserMode||e.isMobile&&e.isLogin?(0,P.kq)("",!0):((0,P.wg)(),(0,P.j4)(p,{key:2,isHome:!0}))]),(0,P.Wm)(Z.uT,{name:"fade-slide"},{default:(0,P.w5)((()=>[e.showTemplateList&&e.isMobile?((0,P.wg)(),(0,P.iD)("div",rD,[(0,P._)("div",iD,[(0,P._)("div",oD,[((0,P.wg)(!0),(0,P.iD)(P.HY,null,(0,P.Ko)(e.contentIds,(t=>((0,P.wg)(),(0,P.iD)("div",{class:"template-list__gallery-item",key:t.id,style:(0,k.j5)(`background-image: url(${e.getPrevUrl(t,2)})`),onClick:n=>e.handleTemplateClick(t)},null,12,sD)))),128))])])])):(0,P.kq)("",!0)])),_:1})])}var lD=n(35670),cD=n(20951);class dD{data(){return[{title:r.Z.global.t("NN0480"),description:r.Z.global.t("NN0481"),img:{name:"remover.mp4",width:500,height:374.48},colorBlock:[{name:"oval_blue2.svg",top:120,left:297}],align:"row"},{title:r.Z.global.t("NN0471"),description:r.Z.global.t("NN0472"),img:{name:"bundle.json",width:500},colorBlock:[{name:"vector_blue1.svg",top:-11,left:-77}],align:"alternately"},{title:r.Z.global.t("NN0473"),description:r.Z.global.t("NN0474"),img:{name:"multiple-sizes.json",width:500},colorBlock:[{name:"vector_purple1.svg",top:-32,left:331}],align:"alternately"},{title:r.Z.global.t("NN0475"),description:r.Z.global.t("NN0476"),link:{text:r.Z.global.t("NN0477"),to:"/templates?q="+("tw"===r.Z.global.locale?"九宮格":"storytelling")},img:{name:"storytelling.mp4",width:488,height:520},colorBlock:[{name:"oval_orange2.svg",top:-69,left:-95},{name:"oval_lightblue2.svg",top:-59.25,left:-79.07},{name:"oval_brown1.svg",top:33.34,left:8.65}],align:"alternately"},{title:r.Z.global.t("NN0468"),description:r.Z.global.t("NN0469"),link:{text:r.Z.global.t("NN0470"),to:"/templates"},img:{name:"business.json",width:500},colorBlock:[{name:"oval_blue1.svg",top:-107,left:-96},{name:"oval_orange1.svg",top:-107,left:-96},{name:"oval_pink2.svg",ref:"img",top:351,left:329}],align:"alternately"},{title:r.Z.global.t("NN0478"),description:r.Z.global.t("NN0479"),link:{text:r.Z.global.t("NN0477"),to:"/templates?themes=7"},img:{name:"e-commerce.json",width:500},colorBlock:[{name:"vector_yellow1.svg",ref:"img",top:-128,left:0}],align:"alternately"},{title:r.Z.global.t("NN0482"),description:r.Z.global.t("NN0483"),img:{name:"brandkit.json",width:500},colorBlock:[{name:"vector_orange1.svg",top:-64,left:-50}],align:"alternately"},{title:r.Z.global.t("NN0484"),description:r.Z.global.t("NN0485"),img:{name:"comment.json",width:2700,height:318},colorBlock:[{name:"oval_lightblue3.svg",top:-6,left:331},{name:"oval_pink3.svg",top:48,left:310}],align:"column"}]}}var uD=new dD,gD=n(8295),pD=Object.defineProperty,hD=Object.defineProperties,mD=Object.getOwnPropertyDescriptors,yD=Object.getOwnPropertySymbols,fD=Object.prototype.hasOwnProperty,bD=Object.prototype.propertyIsEnumerable,vD=(e,t,n)=>t in e?pD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wD=(e,t)=>{for(var n in t||(t={}))fD.call(t,n)&&vD(e,n,t[n]);if(yD)for(var n of yD(t))bD.call(t,n)&&vD(e,n,t[n]);return e},ND=(e,t)=>hD(e,mD(t));const SD=(0,P.aZ)({emits:[],name:"Home",components:{NuHeader:lD.Z,Animation:Zk.Z,ScrollList:(0,P.RC)((()=>n.e(671).then(n.bind(n,98671)))),TaBlock:(0,P.RC)((()=>n.e(282).then(n.bind(n,57282)))),NuFooter:(0,P.RC)((()=>n.e(267).then(n.bind(n,15267)))),HashtagCategoryRow:(0,P.RC)((()=>n.e(972).then(n.bind(n,50972)))),TemplateWaterfall:(0,P.RC)((()=>n.e(291).then(n.bind(n,92291))))},data(){return{colorBlock:["vector_lightblue2.json","vector_pink1.json","oval_pink4.json","oval_yellow1.json"],waterfallTemplatesPC:[],waterfallTemplatesTAB:[],waterfallTemplatesMOBILE:[],isMobileSize:!1,isPCSize:!1,isTemplateReady:!1,selectedTags:[],contentIds:[],groupId:"",showTemplateList:!1,matchedThemes:[],selectedTheme:void 0,modalTemplate:{},contentBuffer:void 0}},metaInfo(){return{title:`${this.$t("SE0001")}`,meta:[{name:"description",content:`${this.$t("SE0002")}`,vmid:"description"},{property:"og:title",content:`${this.$t("OG0001")}`,vmid:"og:title"},{property:"og:image",content:`${this.$t("OG0003")}`,vmid:"og:image"},{name:"description",content:`${this.$t("SE0002")}`,vmid:"description"},{property:"twitter:title",content:`${this.$t("OG0001")}`,vmid:"twitter:title"},{property:"twitter:image",content:`${this.$t("OG0003")}`,vmid:"twitter:image"},{property:"twitter:description",content:`${this.$t("OG0002")}`,vmid:"twitter:description"},{property:"og:url",content:`${this.$t("OG0005")}`,vmid:"og:url"}]}},mounted(){window.addEventListener("resize",this.handleResize),this.handleResize()},unmounted(){window.removeEventListener("resize",this.handleResize)},computed:ND(wD(wD(ND(wD({},(0,ze.Se)({isLogin:"user/isLogin",inBrowserMode:"webView/getInBrowserMode",_themeList:"getShuffledThemesIds",themes:"getMainHiddenThemes",userInfo:"webView/getUserInfo"})),{statusbarHeight(){var e;return`${null!=(e=this.userInfo.statusBarHeight)?e:0}px`}}),(0,ze.rn)({isMobile:"isMobile",_homeTags:"homeTags"})),(0,ze.rn)("templates",{templates:"searchResult"})),{homeTags(){return this._homeTags.map((e=>({name:e})))},blocklist(){const e=uD.data().filter((e=>{var t;return!("us"===this.$i18n.locale&&"e-commerce.json"===(null==(t=e.img)?void 0:t.name))}));for(let t=1;t<e.length;t++)"alternately"===e[t].align&&(e[t].align="row"===e[t-1].align?"row-reverse":"row");return e},templateBlock(){return{title:this.$t("NN0466"),description:this.$t("NN0467"),colorBlock:[{name:"oval_lightblue1.svg",top:-13,left:17},{name:"oval_pink1.svg",top:-13,left:17}],align:"column"}},ytId(){return"us"===this.$i18n.locale?"GRSlz37Njo0":"jp"===this.$i18n.locale?"FzPHWU0O1uI":"tw"===this.$i18n.locale?"BBVAwlBk_zA":"GRSlz37Njo0"},waterfallTemplates(){return this.isPCSize?this.waterfallTemplatesPC:this.isMobileSize?this.waterfallTemplatesMOBILE:this.waterfallTemplatesTAB},themeList(){return this._themeList&&"us"===this.$i18n.locale?this._themeList.filter((e=>"7"!==e)):this._themeList}}),methods:ND(wD({},(0,ze.nv)("templates",{getTemplates:"getThemeContent",getMoreTemplates:"getMoreContent"})),{handleLoadMore(){this.isTemplateReady=!1,this.getMoreTemplates().then((()=>{this.waterfallTemplatesPC=gD.Z.generateWaterfall(this.templates,6),this.waterfallTemplatesTAB=gD.Z.generateWaterfall(this.templates,3),this.waterfallTemplatesMOBILE=gD.Z.generateWaterfall(this.templates,2,2),this.isTemplateReady=!0}))},handleResize(){this.isMobileSize=l.Z.getWidth()<=540,this.isPCSize=l.Z.getWidth()>=976},handleSelectTags(e){this.selectedTags=[...e.selection],this.composeKeyword()},composeKeyword(){const e=["group::0"],t=[this.selectedTags.join(" ")];t.length>0&&e.push("tag::"+t.join("&&")),e.push("order_by::popular"),this.waterfallTemplatesPC=[],this.waterfallTemplatesTAB=[],this.waterfallTemplatesMOBILE=[],this.isTemplateReady=!1,this.getTemplates({keyword:e.join(";;"),theme:""}).then((()=>{this.waterfallTemplatesPC=gD.Z.generateWaterfall(this.templates,6),this.waterfallTemplatesTAB=gD.Z.generateWaterfall(this.templates,3),this.waterfallTemplatesMOBILE=gD.Z.generateWaterfall(this.templates,2,2),this.isTemplateReady=!0}))},handleClickWaterfall(e){var t,n;if(1===e.group_type){if(this.$isTouchDevice())return void ei.Z.setModalInfo(`${this.$t("NN0808")}`,[],{msg:`${this.$t("NN0358")}`,class:"btn-blue-mid",action:()=>!1});if(!gs.Z.checkProTemplate(e))return;const t=this.$router.resolve({name:"Editor",query:{type:"product-page-template",design_id:e.group_id,themeId:e.content_ids[0].themes.join(",")}});return this.openTemplate(t.href),void l.Z.fbq("track","AddToWishlist",{content_ids:[e.group_id]})}if(1===e.content_ids.length){if(!gs.Z.checkProTemplate(e))return;const n=this.themes.find((t=>t.id.toString()===e.theme_id)),r=n?{width:n.width.toString(),height:n.height.toString()}:{width:e.width.toString(),height:e.height.toString()},i=this.$router.resolve({name:"Editor",query:wD({type:"new-design-template",design_id:e.id,themeId:e.content_ids[0].themes.join(","),width:r.width,height:r.height,unit:null!=(t=null==n?void 0:n.unit)?t:"px"},"px"!==(null==n?void 0:n.unit)&&void 0!==(null==n?void 0:n.bleed)?{bleeds:cD.ZP.convertBleedsToQuery(n.bleed)}:{})});this.openTemplate(i.href),l.Z.fbq("track","AddToWishlist",{content_ids:[e.id]})}else this.groupId=null!=(n=e.group_id)?n:"",this.contentIds=e.content_ids,this.modalTemplate=e,this.showTemplateList=!0},handleTemplateClick(e){if(!gs.Z.checkProGroupTemplate(this.modalTemplate,e))return;this.matchedThemes=this.themes.filter((t=>e.themes.includes(t.id.toString())));const t=this.matchedThemes.reduce(((e,t)=>[e[0]&&(void 0===e[1]||e[1]===t.width&&e[2]===t.height),t.width,t.height]),[!0,void 0,void 0])[0];if(e.themes.length>1&&!t){if(this.isMobileSize){const t=this.$router.resolve({name:"Editor",query:{type:"new-design-template",design_id:e.id,width:this.matchedThemes[0].width.toString(),height:this.matchedThemes[0].height.toString(),group_id:this.groupId}});return this.openTemplate(t.href),void l.Z.fbq("track","AddToWishlist",{content_ids:[e.id]})}this.contentBuffer=e,this.selectedTheme=void 0}else{const t=this.themes.find((t=>t.id.toString()===e.themes[0])),n=t?{width:t.width.toString(),height:t.height.toString()}:{width:e.width.toString(),height:e.height.toString()},r=this.$router.resolve({name:"Editor",query:{type:"new-design-template",design_id:e.id,width:n.width,height:n.height,group_id:this.groupId}});this.openTemplate(r.href),l.Z.fbq("track","AddToWishlist",{content_ids:[e.id]})}},openTemplate(e){S.Z.openOrGoto(e)},getPrevUrl(e,t){return e?gD.Z.getPrevUrl(e,t):""}})}),xD=()=>{(0,Z.sj)((e=>({d5655378:e.statusbarHeight})))},PD=SD.setup;SD.setup=PD?(e,t)=>(xD(),PD(e,t)):xD;var ID=SD;const _D=(0,oe.Z)(ID,[["render",aD],["__scopeId","data-v-334be4a2"],["__file","Home.vue"]]);var kD=_D,ZD=n(28339),CD=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));function zD(e,t,n){return CD(this,null,(function*(){try{n();const{query:t}=e,r=new URLSearchParams;Object.entries(t).forEach((([e,t])=>{r.append(e,t)}));const a=r.get("type"),c=r.get("design_id"),d=r.get("team_id"),u=r.get("panel"),g=r.get("url"),h=r.get("width"),m=r.get("height"),y=r.get("unit"),f=r.get("themeId"),b=r.get("bleeds"),v=b?b.split(",").map((e=>parseFloat(e))):null,w=v?{top:v[0],right:v[1],bottom:v[2],left:v[3]}:void 0;if(a&&c)switch(a){case"export":Qe.Z.getExport(r);break;case"design":d&&cD.ZP.fetchDesign(d,c,{width:h,height:m}).then((()=>{ke.Z.handleContentScaleRatio(0)}));break;default:yield Qe.Z.getDesign(a,{designId:c},{width:h,height:m,unit:y||"px",bleeds:w}),i.Z.commit("file/SET_setLayersDone")}else"new-design-size"===a&&h&&m?(cD.ZP.newDesign(parseFloat(h),parseFloat("0"===m?h:m),y||"px",w),"7"===f&&(i.Z.commit("SET_groupType",1),l.Z.isTouchDevice()&&p.Z.fillPage())):i.Z.commit("file/SET_setLayersDone");if(u&&u in o.iI&&(i.Z.commit("SET_currSidebarPanelType",o.iI[u]),(0,P.Y3)((()=>{ke.Z.setCurrActivePanel(u)}))),i.Z.commit("page/SET_isShowPagePreview",!1),i.Z.commit("page/SET_showPagePanel",!1),g){const e=-1!==g.indexOf("token=");let t="",n=g;if(e){t=g.match("&token")?"&token=":"?token=",n=g.substring(0,e?g.indexOf(t):void 0);const r=g.substring((n+t).length,g.indexOf("&team_id=")),o=g.substr((n+t+r+"&team_id=").length);i.Z.commit("user/SET_STATE",{token:r,teamId:o})}fetch(`https://${n}`).then((e=>e.json())).then((e=>{s.ZP.addTemplate(e)})).then((()=>{l.Z.isTouchDevice()&&ke.Z.handleContentScaleRatio(0)})),i.Z.commit("user/SET_STATE",{userId:"backendRendering"}),i.Z.commit("SET_currSidebarPanelType",-1)}}catch(t){d.Z.setLogForError(t)}}))}var TD=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const LD=["Home","TemplateCenter","Settings","SignUp","Login","MobileWarning","Preview","MobileEditor","MyDesign","Pricing"],ED=[{path:"",name:"Home",component:kD,beforeEnter:(e,t,n)=>TD(void 0,null,(function*(){try{n()}catch(e){d.Z.setLogForError(e)}}))},{path:"editor",name:"Editor",component:GE,beforeEnter:zD},{path:"preview",name:"Preview",component:()=>n.e(968).then(n.bind(n,69968)),beforeEnter:(e,t,n)=>TD(void 0,null,(function*(){var e,t,r,a;try{const c=new URLSearchParams(window.location.search),d=c.get("url"),u=c.get("team_id"),g=c.get("token"),p=+(null!=(e=c.get("dpi"))?e:-1),h=!!+(null!=(t=c.get("bleed"))?t:0),m=!!+(null!=(r=c.get("trim"))?r:0),y=c.get("margin"),f=y?y.split(","):[],b=c.get("renderForPDF"),v=c.get("unit_scale");i.Z.commit("user/SET_STATE",{renderForPDF:"true"===b}),i.Z.commit("user/SET_STATE",{unitScale:"1"===v});const w=()=>{console.log("all resize done");const e=document.createElement("div");e.id="vivipic-text-done",e.innerHTML="xxx",e.style.position="fixed",e.style.top="100%",e.style.left="100%",document.body.appendChild(e)};if(g&&u&&d){i.Z.commit("user/SET_STATE",{token:g,teamId:u,dpi:p,backendRenderParams:{isBleed:h,isTrim:m,margin:{bottom:+f[0]||0,right:+f[1]||0}}}),i.Z.commit("user/SET_STATE",{userId:"backendRendering"});const e=yield(yield fetch(`https://${d}`)).json();l.Z.initializeFlags(o.F5.text,[e],w),yield s.ZP.addTemplate(e,{pageIndex:0}),i.Z.commit("file/SET_setLayersDone")}else if(d){const e=-1!==d.indexOf("token=");let t="",n=d;if(e){t=d.match("&token")?"&token=":"?token=",n=d.substring(0,d.indexOf(t));const e={};d.split("?")[1].split("&").forEach((t=>{const[n,r]=t.split("=");e[n]=r}));const r=e.token,o=e.team_id,s=+(null!=(a=e.dpi)?a:-1),l=!!+e.bleed,c=!!+e.trim,u=e.margin,g=u?u.split(","):[];i.Z.commit("user/SET_STATE",{token:r,teamId:o,dpi:s,backendRenderParams:{isBleed:l,isTrim:c,margin:{bottom:+g[0]||0,right:+g[1]||0}}})}i.Z.commit("user/SET_STATE",{userId:"backendRendering"});const r=yield(yield fetch(`https://${n}`)).json();l.Z.initializeFlags(o.F5.text,[r],w),yield s.ZP.addTemplate(r,{pageIndex:0}),i.Z.commit("file/SET_setLayersDone")}n()}catch(c){d.Z.setLogForError(c)}}))},{path:"signup",name:"SignUp",props:e=>({redirect:e.query.redirect}),component:()=>n.e(65).then(n.bind(n,3065)),beforeEnter:(e,t,n)=>TD(void 0,null,(function*(){try{i.Z.getters["user/isLogin"]?n({path:t.query.redirect||"/"}):n()}catch(e){d.Z.setLogForError(e)}}))},{path:"login",name:"Login",props:e=>({redirect:e.query.redirect}),component:()=>n.e(108).then(n.bind(n,46108)),beforeEnter:(e,t,n)=>TD(void 0,null,(function*(){try{e.query.type?n():i.Z.getters["user/isLogin"]?n({path:t.query.redirect||"/"}):n()}catch(r){d.Z.setLogForError(r)}}))},{path:"mydesign/:view?",name:"MyDesign",component:()=>n.e(817).then(n.bind(n,29817)),props:!0},{path:"templates",name:"TemplateCenter",component:()=>n.e(309).then(n.bind(n,35309))},{path:"settings/:view?",name:"Settings",component:()=>n.e(987).then(n.bind(n,86987)),props:!0},{path:"mobilewarning",name:"MobileWarning",component:()=>n.e(664).then(n.bind(n,47664))},{path:"browserwarning",name:"BrowserWarning",component:()=>n.e(825).then(n.bind(n,93825))},{path:"brandkit",name:"BrandKit",component:()=>n.e(821).then(n.bind(n,82821)),beforeEnter:(e,t,n)=>TD(void 0,null,(function*(){try{a.Z.isBrandkitAvailable?n():n({path:"/"})}catch(e){d.Z.setLogForError(e)}}))},{path:"pricing",name:"Pricing",component:()=>n.e(484).then(n.bind(n,39484))}];"vivipic.com"!==window.location.host&&(ED.push({path:"svgicon",name:"SvgIconView",component:()=>n.e(382).then(n.bind(n,93382))}),ED.push({path:"copytool",name:"CopyTool",component:()=>n.e(625).then(n.bind(n,21625))}),ED.push({path:"nubtnlist",name:"NubtnList",component:()=>n.e(193).then(n.bind(n,90193))}),ED.push({path:"nativeevttest",name:"NativeEventTester",component:()=>n.e(161).then(n.bind(n,43161))}));const DD=(0,ZD.p7)({history:(0,ZD.PO)("/"),routes:[{path:`/:locale${c.Z.getLocaleRegex()}?`,component:{render(){return(0,P.h)((0,P.up)("router-view"))}},beforeEnter(e,t,n){return TD(this,null,(function*(){"NativeEventTester"===e.name&&S.Z.enterEventTestMode(),d.Z.getLog()&&d.Z.uploadLog(),d.Z.setLog("App Start"),S.Z.inBrowserMode||S.Z.registerCallbacks("router"),yield S.Z.getUserInfo();let t=!1;try{const e=(yield fetch(`https://media.vivipic.cc/hello.txt?ver=${l.Z.generateRandomString(12)}`)).status;200!==e&&(t=!0,d.Z.setLog(`Cannot connect to argo, use non-argo domain instead, status code: ${e}`))}catch(s){t=!0,d.Z.setLogForError(s),d.Z.setLog(`Cannot connect to argo, use non-argo domain instead, error: ${s.message}`)}finally{i.Z.commit("text/SET_isArgoAvailable",!t)}let o=localStorage.getItem("locale");""!==o&&o?o&&["tw","us","jp"].includes(o)&&o!==r.Z.global.locale&&(r.Z.global.locale=o,localStorage.setItem("locale",o)):(o=e.params.locale,r.Z.global.locale=""!==o&&o?o:c.Z.getBrowserLang()),S.Z.updateLocale(r.Z.global.locale),n(),void 0===window.__PRERENDER_INJECTED&&DD.currentRoute.value.params.locale&&(delete DD.currentRoute.value.params.locale,DD.replace({query:DD.currentRoute.value.query,params:DD.currentRoute.value.params}))}))},children:ED}]});DD.beforeEach(((e,t,n)=>TD(void 0,null,(function*(){var t,r,o;d.Z.setLog(`navigate to route: ${e.path}`),S.Z.detectIfInApp(),yield S.Z.changeStatusBarTextColor(null!=(r=null==(t=e.name)?void 0:t.toString())?r:"");const s=new URLSearchParams(window.location.search),a=s.get("campaign");if(a&&localStorage.setItem("campaign",a),["Settings","MyDesign","BrandKit","Editor"].includes(e.name)&&("Settings"!==e.name||i.Z.getters["webView/getInBrowserMode"])&&void 0===window.__PRERENDER_INJECTED){if(!i.Z.getters["user/isLogin"]){const t=localStorage.getItem("token");if(""===t||!t)return void n({name:"SignUp",query:{redirect:e.fullPath}});yield i.Z.dispatch("user/login",{token:t})}}else if(!i.Z.getters["user/isLogin"]){const e=localStorage.getItem("token");e&&e.length>0&&(yield i.Z.dispatch("user/login",{token:e}))}if(0===i.Z.getters["user/getImgSizeMap"].length&&void 0===window.__PRERENDER_INJECTED){const e=yield fetch(`https://template.vivipic.com/static/app.json?ver=${l.Z.generateRandomString(6)}`),t=yield e.json();i.Z.commit("SET_showGlobalErrorModal",1===t.show_error_modal),i.Z.commit("user/SET_STATE",{verUni:t.ver_uni,verApi:t.ver_api,imgSizeMap:t.image_size_map,imgSizeMapExtra:t.image_size_map_extra,dimensionMap:t.dimension_map}),x.Z.updateFillCategory(t.text_effect,t.text_effect_admin),N.updateOverlayCategory(t.overlay);let n=t.default_font;/Firefox/i.test(navigator.userAgent||navigator.vendor)&&(n=n.filter((e=>"zVUjQ0MaGOm7HOJXv5gB"!==e.id))),n.forEach((e=>{const t={type:"public",face:e.id,ver:e.ver};i.Z.commit("text/UPDATE_DEFAULT_FONT",{font:t})}))}if(!LD.includes(null!=(o=String(e.name))?o:"")&&("Editor"===e.name||!localStorage.getItem("not-mobile"))){let t=!1;const r=navigator.userAgent||navigator.vendor;if(d.Z.setLog(`Read device width: ${window.screen.width}`),d.Z.setLog(`User agent: ${r}`),(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r)||r.indexOf("Mac OS X")>0&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)&&(t=!0),t){if(d.Z.setLog("=> as mobile"),"Editor"!==e.name)return void n({name:"MobileWarning",query:{width:window.screen.width.toString(),url:e.fullPath}});{const t=l.Z.isTablet();if(t){if(d.Z.setLog("=> as tablet"),!localStorage.getItem("not-mobile"))return void n({name:"MobileWarning",query:{width:window.screen.width.toString(),url:e.fullPath}});i.Z.commit("SET_useMobileEditor",!0)}else d.Z.setLog("=> as smartphone"),i.Z.commit("SET_useMobileEditor",!0)}}else{if("Editor"===e.name){const e=localStorage.getItem("hasShownBrowserWarning");if(!["Microsoft Edge","Chrome"].includes(i.Z.getters["user/getBrowserInfo"].name)&&"1"!==e)return void n({name:"BrowserWarning"})}d.Z.setLog("=> as non-mobile")}}n()}))));var OD=DD},89497:function(e,t,n){"use strict";n.d(t,{Z:function(){return Gi}});var r=n(72625),i=n(85132),o=i.Z.apply({api:e=>r.Z.getBackground(e),namespace:"background"});const s=20,a=()=>({inBgRemoveMode:!1,brushSize:16,showInitImage:!1,clearMode:!0,restoreInitState:!1,canvas:null,autoRemoveResult:null,modifiedFlag:!1,loading:!1,prevPageScaleRatio:100,preScrollPos:{top:-1,left:-1},steps:[],currStep:-1,isProcessing:!1,idInfo:{pageId:-1,layerId:-1}}),l=a(),c={getInBgRemoveMode(e){return e.inBgRemoveMode},getBrushSize(e){return e.brushSize},getShowInitImage(e){return e.showInitImage},getClearMode(e){return e.clearMode},getRestoreInitState(e){return e.restoreInitState},getCanvas(e){return e.canvas},getAutoRemoveResult(e){return e.autoRemoveResult},getModifiedFlag(e){return e.modifiedFlag},getLoading(e){return e.loading},getPrevPageScaleRatio(e){return e.prevPageScaleRatio},getPrevScrollPos(e){return e.preScrollPos},getSteps(e){return e.steps},getCurrStep(e){return e.currStep},inLastStep(e){return e.currStep===e.steps.length-1},inFirstStep(e){return 0===e.currStep},getIsProcessing(e){return e.isProcessing},getIdInfo(e){return e.idInfo}},d={SET_inBgRemoveMode(e,t){t||Object.assign(e,{inBgRemoveMode:!1,brushSize:16,showInitImage:!1,clearMode:!0,restoreInitState:!1,canvas:null,autoRemoveResult:null,modifiedFlag:!1,loading:!1,step:[],currStep:-1}),e.inBgRemoveMode=t},SET_brushSize(e,t){e.brushSize=t},SET_showInitImage(e,t){e.showInitImage=t},SET_clearMode(e,t){e.clearMode=t},SET_restoreInitState(e,t){e.restoreInitState=t},SET_canvas(e,t){e.canvas=t},SET_autoRemoveResult(e,t){e.autoRemoveResult=t},SET_modifiedFlag(e,t){e.modifiedFlag=t},SET_loading(e,t){e.loading=t},SET_prevPageScaleRatio(e,t){e.prevPageScaleRatio=t},SET_prevScrollPos(e,t){Object.assign(e.preScrollPos,t)},CLEAR_bgRemoveState(e){Object.assign(e,{inBgRemoveMode:!1,brushSize:16,showInitImage:!1,clearMode:!0,restoreInitState:!1,canvas:null,autoRemoveResult:null,modifiedFlag:!1,loading:!1,prevPageScaleRatio:100,preScrollPos:{top:-1,left:-1}})},ADD_step(e,t){e.steps.length=e.currStep+1,e.steps.length===s&&e.steps.shift(),e.steps.push(t),e.currStep=e.steps.length-1},CLEAR_steps(e){e.steps=[],e.currStep=-1},SET_currStep(e,t){e.currStep=t},SET_isProcessing(e,t){e.isProcessing=t},SET_idInfo(e,{pageId:t,layerId:n}){Object.assign(e.idInfo,{pageId:t,layerId:n})}};var u={namespaced:!0,state:l,getters:c,mutations:d},g=n(60410),p=n.n(g),h=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const m=()=>({defaultColors:["#FFFFFF","#E4E8EB","#C9D0D8","#646C77","#505760","#31363c","#000000","#EB5757","#F76C83","#FE7565","#F2994A","#FCAC3B","#FECD56","#FFD79A","#B23871","#782B76","#363F78","#007ABE","#006977","#00C6C5","#C0E1D8"],defaultBgColors:["#EB5757","#F76C83","#FFA89E","#F2994A","#F0AE53","#FECD56","#FFD79A","#B23871","#782B76","#363F78","#007ABE","#006977","#00C6C5","#C0E1D8","#FFFFFF","#E4E8EB","#C9D0D8","#646C77","#505760","#000000"],brandColors:[],documentColors:["#2D9CDB","#56CCF2","#9B51E0","#BB6BD9","#4F4F4F","#828282","#F2F2F2"],recentlyColors:[],currEvent:"",currColor:"#ffffff"}),y=m(),f={getDefaultColors(e){return e.defaultColors},getDefaultBgColors(e){return e.defaultBgColors},getBrandColors(e){return e.brandColors},getDocumentColors(e,t,n){const r=n.pages[Gi.getters.getCurrFocusPageIndex].config.documentColors;return r.length?n.pages[Gi.getters.getCurrFocusPageIndex].config.documentColors:e.documentColors},getRecentlyColors(e){return e.recentlyColors},currEvent(e){return e.currEvent},currColor(e){return e.currColor}},b={SET_STATE(e,t){const n=t||m(),r=Object.keys(n);r.forEach((t=>{t in e&&(e[t]=n[t])}))},SET_defaultColor(e,t){e.defaultColors[t.index]=t.color},SET_recentlyColors(e,t){e.recentlyColors=t}},v={initRecentlyColors(e){return h(this,arguments,(function*({commit:e}){if(y.recentlyColors.length)return;let t=(yield r.Z.getRecentlyUsedColor()).data.data.content;t=t.map((e=>`#${e}`)),e("SET_recentlyColors",t)}))},addRecentlyColors({commit:e},t){r.Z.addRecentlyUsedColor(t.replace("#",""));let n=y.recentlyColors;n=p().without(n,t),n=[t].concat(n),e("SET_recentlyColors",n)}};var w={namespaced:!0,state:y,getters:f,mutations:b,actions:v},N=n(32905);const S=()=>({}),x=S(),P={},I={},_={importDesign(e,t){Gi.commit("SET_pages",N.Z.newPages(t))}};var k={namespaced:!0,state:x,getters:P,mutations:I,actions:_},Z=n(90469),C=n(52495),z=n(20951),T=n(78871),L=n(53074),E=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const D=()=>({currLocation:"",moveToFolderSelectInfo:"",folders:[],copiedFolders:[],allDesigns:[],allFolders:[],draggingType:"",draggingFolder:void 0,draggingDesign:void 0,selectedDesigns:{},selectedFolders:{},isDesignsLoading:!1,isFoldersLoading:!1,sortByField:"update",sortByDescending:!0,designsPageIndex:0,isErrorShowing:!1,folderDesignCount:0,folderFolderCount:0,bottomMenu:"",mobileDesignBuffer:void 0,mobileFolderBuffer:void 0,mobilePathBuffer:[]}),O=D(),M={getCurrLocation(e){return e.currLocation},getMoveToFolderSelectInfo(e){return e.moveToFolderSelectInfo},getFolders(e){return e.folders},getCopiedFolders(e){return e.copiedFolders},getAllDesigns(e){return e.allDesigns},getAllFolders(e){return e.allFolders},getDraggingType(e){return e.draggingType},getDraggingFolder(e){return e.draggingFolder},getDraggingDesign(e){return e.draggingDesign},getSelectedDesigns(e){return e.selectedDesigns},getSelectedFolders(e){return e.selectedFolders},getIsDesignsLoading(e){return e.isDesignsLoading},getIsFoldersLoading(e){return e.isFoldersLoading},getSortByField(e){return e.sortByField},getSortByDescending(e){return e.sortByDescending},getDesignsPageIndex(e){return e.designsPageIndex},getIsErrorShowing(e){return e.isErrorShowing},getItemCount(e){return e.folderDesignCount+e.folderFolderCount},getBottomMenu(e){return e.bottomMenu},getMobileDesignBuffer(e){return e.mobileDesignBuffer},getMobileFolderBuffer(e){return e.mobileFolderBuffer},getMobilePathBuffer(e){return e.mobilePathBuffer}},A={fetchDesign(e,t){return E(this,arguments,(function*({commit:e,getters:t},{teamId:n,assetId:r}){try{const{data:e}=yield Z.Z.getDesign(n,r);return e}catch(i){L.Z.setLogForError(i)}}))},fetchDesigns(e,t){return E(this,arguments,(function*({commit:e,getters:t},{path:n}){const{getSortByField:r,getSortByDescending:i}=t;try{const{data:t}=yield Z.Z.getDesigns(Z.Z.getToken(),n,0,r,i);e("SET_designsPageIndex",t.next_page);const o=t.data.design.content.map((e=>z.ZP.apiDesign2IDesign(e)));e("SET_allDesigns",o)}catch(o){L.Z.setLogForError(o)}}))},fetchMoreDesigns(e,t){return E(this,arguments,(function*({commit:e,getters:t},{path:n}){const r=t.getDesignsPageIndex;if(r<0)return;const{getSortByField:i,getSortByDescending:o}=t;try{const{data:s}=yield Z.Z.getDesigns(Z.Z.getToken(),n,0,i,o,{page_index:r});e("SET_designsPageIndex",s.next_page);const a=s.data.design.content.map((e=>z.ZP.apiDesign2IDesign(e)));e("SET_allDesigns",t.getAllDesigns.concat(a))}catch(s){L.Z.setLogForError(s)}}))},fetchPageFolders(e,t){return E(this,arguments,(function*({getters:e},{path:t,pageIndex:n}){const{getSortByField:r,getSortByDescending:i}=e,{data:o}=yield Z.Z.getDesigns(Z.Z.getToken(),t,1,r,i,{page_index:n});return o}))},fetchFolders(e,t){return E(this,arguments,(function*({dispatch:e},{path:t}){let n=0,r=[];while(n>=0)try{const i=yield e("fetchPageFolders",{path:t,pageIndex:n});r=r.concat(i.data.design.folder.map((e=>z.ZP.apiFolder2IFolder(e)))),n=i.next_page}catch(i){L.Z.setLogForError(i),n=-1}return r}))},fetchItemCount(e,t){return E(this,arguments,(function*({commit:e},{path:t}){try{e("SET_itemCount",{designCount:-1,folderCount:-1});const{data:n}=yield Z.Z.getDesigns(Z.Z.getToken(),t,3,"update",!0);e("SET_itemCount",{designCount:n.data.design.file_count,folderCount:n.data.design.folder_count})}catch(n){L.Z.setLogForError(n)}}))},fetchStructuralFolders(e,t){return E(this,arguments,(function*({commit:e,dispatch:t},{path:n}){const r=yield t("fetchFolders",{path:n});return e("UPDATE_folders",{path:n,folders:null!=r?r:[]}),void 0===r}))},fetchCopiedStructuralFolders(e,t){return E(this,arguments,(function*({commit:e,dispatch:t},{path:n}){const r=yield t("fetchFolders",{path:n});return e("UPDATE_copiedFolders",{path:n,folders:null!=r?r:[]}),void 0===r}))},fetchFoldersAlong(e,t){return E(this,arguments,(function*({commit:e,dispatch:t,getters:n},{pathNodes:r}){const i=[];let o=n.getFolders[0];for(const s of r){const n=o.subFolders.findIndex((e=>e.id===s));if(n<0)return!1;i.push(s),yield t("fetchStructuralFolders",{path:i.join(",")}),o=o.subFolders[n],e("SET_expand",{path:[z.ZP.ROOT,...i],isExpanded:!0})}return!0}))},fetchTrashFolders(e){return E(this,arguments,(function*({commit:e,dispatch:t}){var n;const r=null!=(n=yield t("fetchFolders",{path:"trash"}))?n:[];e("SET_allFolders",r)}))},fetchFolderFolders(e,t){return E(this,arguments,(function*({commit:e,dispatch:t},{path:n}){var r;const i=null!=(r=yield t("fetchFolders",{path:n}))?r:[];e("SET_allFolders",i),e("UPDATE_folders",{path:n,folders:i})}))},fetchAllDesigns(e){return E(this,arguments,(function*({dispatch:e}){yield e("fetchDesigns",{path:""})}))},fetchFavoriteDesigns(e){return E(this,arguments,(function*({dispatch:e}){yield e("fetchDesigns",{path:"favor"})}))},fetchTrashDesigns(e){return E(this,arguments,(function*({dispatch:e}){yield e("fetchDesigns",{path:"trash"})}))},fetchFolderDesigns(e,t){return E(this,arguments,(function*({dispatch:e},{path:t}){yield e("fetchDesigns",{path:t})}))},fetchMoreAllDesigns(e){return E(this,arguments,(function*({dispatch:e}){yield e("fetchMoreDesigns",{path:""})}))},fetchMoreFavoriteDesigns(e){return E(this,arguments,(function*({dispatch:e}){yield e("fetchMoreDesigns",{path:"favor"})}))},fetchMoreTrashDesigns(e){return E(this,arguments,(function*({dispatch:e}){yield e("fetchMoreDesigns",{path:"trash"})}))},fetchMoreFolderDesigns(e,t){return E(this,arguments,(function*({dispatch:e},{path:t}){yield e("fetchMoreDesigns",{path:t})}))},fetchAllExpandedFolders(e){return E(this,arguments,(function*({dispatch:e,getters:t}){const n=t.getFolders;yield e("fetchStructuralFolders",{path:"root"});const r=[{parents:[],folder:n[0]}];while(r.length>0){const t=r.shift();if(!t)break;const{parents:n,folder:i}=t;for(const o of i.subFolders)if(o.isExpanded){const t=z.ZP.appendPath(n,o);r.push({parents:t,folder:o}),yield e("fetchStructuralFolders",{path:t.join(",")})}}}))},copyDesign(e,t){return E(this,arguments,(function*({commit:e},t){const n=T.Z.generateAssetId()+"_new",r=T.Z.deepCopy(t);r.id=n,r.name="...",r.createdTime=(new Date).toString(),r.lastUpdatedTime=r.createdTime,r.asset_index=-1,Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"copy",Z.Z.getAssetIndex(t),null,"").then((t=>{if(0!==t.data.flag)return console.log(t.data.msg),e("UPDATE_deleteDesign",r),void e("SET_isErrorShowing",!0);e("UPDATE_replaceDesign",{id:n,design:z.ZP.apiDesign2IDesign(t.data.data)})})).catch((t=>{L.Z.setLogForError(t),e("UPDATE_deleteDesign",r),e("SET_isErrorShowing",!0)})),e("UPDATE_addDesign",r)}))},favorDesign(e,t){return E(this,arguments,(function*({commit:e},t){Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"favor",Z.Z.getAssetIndex(t),null,"1").then((n=>{0!==n.data.flag&&(console.log(n.data.msg),t.favorite=!1,e("SET_isErrorShowing",!0))})).catch((n=>{L.Z.setLogForError(n),t.favorite=!1,e("SET_isErrorShowing",!0)})),t.favorite=!0}))},favorDesigns(e,t){return E(this,arguments,(function*({commit:e},t){Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"favor",Z.Z.getAssetIndices(t),null,"1").then((n=>{if(0!==n.data.flag){console.log(n.data.msg);for(const e of t)e.favorite=!1;e("SET_isErrorShowing",!0)}})).catch((n=>{L.Z.setLogForError(n);for(const e of t)e.favorite=!1;e("SET_isErrorShowing",!0)}));for(const n of t)n.favorite=!0}))},unfavorDesign(e,t){return E(this,arguments,(function*({commit:e,getters:t},n){Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"favor",Z.Z.getAssetIndex(n),null,"0").then((r=>{0!==r.data.flag&&(console.log(r.data.msg),n.favorite=!0,"h"===t.getCurrLocation&&e("UPDATE_addDesign",n),e("SET_isErrorShowing",!0))})).catch((r=>{L.Z.setLogForError(r),n.favorite=!0,"h"===t.getCurrLocation&&e("UPDATE_addDesign",n),e("SET_isErrorShowing",!0)})),n.favorite=!1,"h"===t.getCurrLocation&&e("UPDATE_deleteDesign",n)}))},unfavorDesigns(e,t){return E(this,arguments,(function*({commit:e,getters:t},n){Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"favor",Z.Z.getAssetIndices(n),null,"0").then((r=>{if(0!==r.data.flag){console.log(r.data.msg);const i="h"===t.getCurrLocation;for(const t of n)t.favorite=!0,i&&e("UPDATE_addDesign",t);e("SET_isErrorShowing",!0)}})).catch((r=>{L.Z.setLogForError(r);const i="h"===t.getCurrLocation;for(const t of n)t.favorite=!0,i&&e("UPDATE_addDesign",t);e("SET_isErrorShowing",!0)}));const r="h"===t.getCurrLocation;for(const i of n)i.favorite=!1,r&&e("UPDATE_deleteDesign",i)}))},setDesignName(e,t){return E(this,arguments,(function*({commit:e},{design:t,name:n}){const r=t.name,i=t.lastUpdatedTime;Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"rename",Z.Z.getAssetIndex(t),null,n).then((n=>{0!==n.data.flag&&(console.log(n.data.msg),t.name=r,t.lastUpdatedTime=i,e("UPDATE_deleteDesign",t),e("UPDATE_addDesign",t),e("SET_isErrorShowing",!0))})).catch((n=>{L.Z.setLogForError(n),t.name=r,t.lastUpdatedTime=i,e("UPDATE_deleteDesign",t),e("UPDATE_addDesign",t),e("SET_isErrorShowing",!0)})),t.name=n,t.lastUpdatedTime=(new Date).toISOString(),e("UPDATE_deleteDesign",t),e("UPDATE_addDesign",t)}))},deleteDesign(e,t){return E(this,arguments,(function*({commit:e},t){Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"delete",Z.Z.getAssetIndex(t),null,"1").then((n=>{0!==n.data.flag&&(console.log(n.data.msg),e("UPDATE_addDesign",t),e("SET_isErrorShowing",!0))})).catch((n=>{L.Z.setLogForError(n),e("UPDATE_addDesign",t),e("SET_isErrorShowing",!0)})),e("UPDATE_deleteDesign",t)}))},deleteDesigns(e,t){return E(this,arguments,(function*({commit:e},t){Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"delete",Z.Z.getAssetIndices(t),null,"1").then((n=>{if(0!==n.data.flag){console.log(n.data.msg);for(const n of t)e("UPDATE_addDesign",n);e("SET_isErrorShowing",!0)}})).catch((n=>{L.Z.setLogForError(n);for(const r of t)e("UPDATE_addDesign",r);e("SET_isErrorShowing",!0)}));for(const n of t)e("UPDATE_deleteDesign",n)}))},recoverDesign(e,t){return E(this,arguments,(function*({commit:e,dispatch:t,getters:n},{design:r,deletionLocation:i}){if(void 0!==i)n.getCurrLocation===i?e("UPDATE_addDesign",r):"t"===n.getCurrLocation&&e("UPDATE_deleteDesign",r);else switch(n.getCurrLocation){case"t":e("UPDATE_deleteDesign",r);break}try{const t=yield Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"delete",Z.Z.getAssetIndex(r),"","0");if(0!==t.data.flag){if(console.log(t.data.msg),void 0!==i)n.getCurrLocation===i?e("UPDATE_deleteDesign",r):"t"===n.getCurrLocation&&e("UPDATE_addDesign",r);else switch(n.getCurrLocation){case"t":e("UPDATE_addDesign",r);break}return e("SET_isErrorShowing",!0),""}return t.data.data.msg}catch(o){if(L.Z.setLogForError(o),void 0!==i)n.getCurrLocation===i?e("UPDATE_deleteDesign",r):"t"===n.getCurrLocation&&e("UPDATE_addDesign",r);else switch(n.getCurrLocation){case"t":e("UPDATE_addDesign",r);break}return e("SET_isErrorShowing",!0),""}}))},recoverAll(e,t){return E(this,arguments,(function*({commit:e,dispatch:t,getters:n},{designs:r,folders:i}){switch(n.getCurrLocation){case"t":for(const t of r)e("UPDATE_deleteDesign",t);for(const t of i)e("UPDATE_deleteFolder",t);break}try{const o=yield Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"delete",Z.Z.getAssetIndices(r),Z.Z.getFolderIds(i),"0");if(0!==o.data.flag){switch(console.log(o.data.msg),n.getCurrLocation){case"t":for(const t of r)e("UPDATE_addDesign",t);for(const t of i)e("UPDATE_addFolder",t);break}return e("SET_isErrorShowing",!0),""}return i.length>0&&t("fetchAllExpandedFolders"),o.data.data.msg}catch(o){switch(L.Z.setLogForError(o),n.getCurrLocation){case"t":for(const t of r)e("UPDATE_addDesign",t);for(const t of i)e("UPDATE_addFolder",t);break}return e("SET_isErrorShowing",!0),""}}))},deleteDesignForever(e,t){return E(this,arguments,(function*({commit:e},t){Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"delete",Z.Z.getAssetIndex(t),"","2").then((n=>{0!==n.data.flag&&(console.log(n.data.msg),e("UPDATE_addDesign",t),e("SET_isErrorShowing",!0))})).catch((n=>{L.Z.setLogForError(n),e("UPDATE_addDesign",t),e("SET_isErrorShowing",!0)})),e("UPDATE_deleteDesign",t)}))},deleteAllForever(e,t){return E(this,arguments,(function*({commit:e},{designs:t,folders:n}){Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"delete",Z.Z.getAssetIndices(t),Z.Z.getFolderIds(n),"2").then((r=>{if(0!==r.data.flag){console.log(r.data.msg);for(const n of t)e("UPDATE_addDesign",n);for(const t of n)e("UPDATE_addFolder",t);e("SET_isErrorShowing",!0)}})).catch((r=>{L.Z.setLogForError(r);for(const n of t)e("UPDATE_addDesign",n);for(const t of n)e("UPDATE_addFolder",t);e("SET_isErrorShowing",!0)}));for(const r of t)e("UPDATE_deleteDesign",r);for(const r of n)e("UPDATE_deleteFolder",r)}))},moveDesign(e,t){return E(this,arguments,(function*({commit:e,getters:t},{design:n,destination:r}){Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"move",Z.Z.getAssetIndex(n),null,r.slice(1).join(",")).then((i=>{0!==i.data.flag&&(console.log(i.data.msg),t.getCurrLocation.startsWith("f")&&t.getCurrLocation!==`f:${r.join("/")}`&&e("UPDATE_addDesign",n),e("SET_isErrorShowing",!0))})).catch((i=>{L.Z.setLogForError(i),t.getCurrLocation.startsWith("f")&&t.getCurrLocation!==`f:${r.join("/")}`&&e("UPDATE_addDesign",n),e("SET_isErrorShowing",!0)})),t.getCurrLocation.startsWith("f")&&t.getCurrLocation!==`f:${r.join("/")}`&&e("UPDATE_deleteDesign",n)}))},moveDesigns(e,t){return E(this,arguments,(function*({commit:e,getters:t},{designs:n,destination:r}){if(Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"move",Z.Z.getAssetIndices(n),null,r.slice(1).join(",")).then((i=>{if(0!==i.data.flag){if(console.log(i.data.msg),t.getCurrLocation.startsWith("f")&&t.getCurrLocation!==`f:${r.join("/")}`)for(const t of n)e("UPDATE_addDesign",t);e("SET_isErrorShowing",!0)}})).catch((i=>{if(L.Z.setLogForError(i),t.getCurrLocation.startsWith("f")&&t.getCurrLocation!==`f:${r.join("/")}`)for(const t of n)e("UPDATE_addDesign",t);e("SET_isErrorShowing",!0)})),t.getCurrLocation.startsWith("f")&&t.getCurrLocation!==`f:${r.join("/")}`)for(const i of n)e("UPDATE_deleteDesign",i)}))},createFolder(e,t){return E(this,arguments,(function*({commit:e,getters:t},{path:n,folder:r,name:i}){let o;r.name=i;try{const e=yield Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"create",null,i,n);o=e.data.data}catch(a){L.Z.setLogForError(a),o=void 0}const s=""===n?[]:n.split(",");if(o){const n=z.ZP.apiFolder2IFolder(o);e("UPDATE_replaceFolder",{parents:[z.ZP.ROOT,...s],id:r.id,folder:n}),t.getCurrLocation===`f:${[z.ZP.ROOT,...s,r.id].join("/")}`&&e("SET_currLocation",`f:${[z.ZP.ROOT,...s,n.id].join("/")}`)}else e("UPDATE_removeFolder",{parents:[z.ZP.ROOT,...s],folder:r}),e("UPDATE_deleteFolder",r),t.getCurrLocation===`f:${[z.ZP.ROOT,...s,r.id].join("/")}`&&e("SET_currLocation","a"),e("SET_isErrorShowing",!0)}))},setFolderName(e,t){return E(this,arguments,(function*({commit:e},{folder:t,name:n,parents:r}){const i=t.name,o=t.lastUpdatedTime;Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"rename",null,t.id,n).then((n=>{0!==n.data.flag&&(console.log(n.data.msg),e("UPDATE_setFolderName",{parents:r,folder:t,name:i,lastUpdatedTime:o}),e("SET_isErrorShowing",!0))})).catch((n=>{L.Z.setLogForError(n),e("UPDATE_setFolderName",{parents:r,folder:t,name:i,lastUpdatedTime:o}),e("SET_isErrorShowing",!0)})),e("UPDATE_setFolderName",{parents:r,folder:t,name:n,lastUpdatedTime:(new Date).toISOString()})}))},moveFolder(e,t){return E(this,arguments,(function*({commit:e,getters:t},{parents:n,folder:r,destination:i}){const o=n;Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"move",null,r.id,i.slice(1).join(",")).then((s=>{0!==s.data.flag&&(console.log(s.data.msg),t.getCurrLocation===`f:${i.join("/")}`?e("UPDATE_deleteFolder",r):(t.getCurrLocation===`f:${o.join("/")}`||"l"===t.getCurrLocation&&1===o.length)&&e("UPDATE_addFolder",r),e("UPDATE_removeFolder",{parents:i,folder:r}),e("UPDATE_insertFolder",{parents:n,folder:r}),e("SET_isErrorShowing",!0))})).catch((s=>{L.Z.setLogForError(s),t.getCurrLocation===`f:${i.join("/")}`?e("UPDATE_deleteFolder",r):(t.getCurrLocation===`f:${o.join("/")}`||"l"===t.getCurrLocation&&1===o.length)&&e("UPDATE_addFolder",r),e("UPDATE_removeFolder",{parents:i,folder:r}),e("UPDATE_insertFolder",{parents:n,folder:r}),e("SET_isErrorShowing",!0)})),t.getCurrLocation===`f:${i.join("/")}`?e("UPDATE_addFolder",r):(t.getCurrLocation===`f:${o.join("/")}`||"l"===t.getCurrLocation&&1===o.length)&&e("UPDATE_deleteFolder",r),e("UPDATE_removeFolder",{parents:n,folder:r}),e("UPDATE_insertFolder",{parents:i,folder:r})}))},deleteFolder(e,t){return E(this,arguments,(function*({commit:e,dispatch:t,getters:n},r){(n.getCurrLocation.startsWith("f")&&n.getCurrLocation===`f:${r.parents.join("/")}`||"l"===n.getCurrLocation&&1===r.parents.length)&&e("UPDATE_deleteFolder",r.folder),"t"===n.getCurrLocation&&e("UPDATE_addFolder",r.folder),yield Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"delete",null,r.folder.id,"1").then((t=>{0!==t.data.flag&&(console.log(t.data.msg),(n.getCurrLocation.startsWith("f")&&n.getCurrLocation===`f:${r.parents.join("/")}`||"l"===n.getCurrLocation&&1===r.parents.length)&&e("UPDATE_addFolder",r.folder),"t"===n.getCurrLocation&&e("UPDATE_deleteFolder",r.folder),e("SET_isErrorShowing",!0))})).catch((t=>{L.Z.setLogForError(t),(n.getCurrLocation.startsWith("f")&&n.getCurrLocation===`f:${r.parents.join("/")}`||"l"===n.getCurrLocation&&1===r.parents.length)&&e("UPDATE_addFolder",r.folder),"t"===n.getCurrLocation&&e("UPDATE_deleteFolder",r.folder),e("SET_isErrorShowing",!0)})),t("fetchStructuralFolders",{path:1===r.parents.length?"root":r.parents.slice(1).join(",")})}))},checkEmpty(e,t){return E(this,arguments,(function*({commit:e},t){var n;const{data:r}=yield Z.Z.getDesigns(Z.Z.getToken(),z.ZP.createPath(t).slice(1).join(","),2,"update",!0),i=null==(n=r.data)?void 0:n.design;return i?i.content.length+i.folder.length===0:(e("SET_isErrorShowing",!0),!0)}))},recoverFolder(e,t){return E(this,arguments,(function*({commit:e,dispatch:t,getters:n},{folder:r,deletionLocation:i}){if(void 0!==i)n.getCurrLocation===i?e("UPDATE_addFolder",r):"t"===n.getCurrLocation&&e("UPDATE_deleteFolder",r);else switch(n.getCurrLocation){case"t":e("UPDATE_deleteFolder",r);break}try{const o=yield Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"delete","",r.id,"0");if(0!==o.data.flag){if(console.log(o.data.msg),void 0!==i)n.getCurrLocation===i?e("UPDATE_deleteFolder",r):"t"===n.getCurrLocation&&e("UPDATE_addFolder",r);else switch(n.getCurrLocation){case"t":e("UPDATE_addFolder",r);break}return e("SET_isErrorShowing",!0),""}return t("fetchAllExpandedFolders"),o.data.data.msg}catch(o){if(L.Z.setLogForError(o),void 0!==i)n.getCurrLocation===i?e("UPDATE_deleteFolder",r):"t"===n.getCurrLocation&&e("UPDATE_addFolder",r);else switch(n.getCurrLocation){case"t":e("UPDATE_addFolder",r);break}return e("SET_isErrorShowing",!0),""}}))},deleteFolderForever(e,t){return E(this,arguments,(function*({commit:e},t){Z.Z.updateDesigns(Z.Z.getToken(),Z.Z.getLocale(),Z.Z.getUserId(),"delete","",t.id,"2").then((n=>{0!==n.data.flag&&(console.log(n.data.msg),e("UPDATE_addFolder",t),e("SET_isErrorShowing",!0))})).catch((n=>{L.Z.setLogForError(n),e("UPDATE_addFolder",t),e("SET_isErrorShowing",!0)})),e("UPDATE_deleteFolder",t)}))}},$={SET_currLocation(e,t){if(e.currLocation===t)return;const n=T.Z.deepCopy(e.folders);let r;switch(z.ZP.dislocateFrom(n,e.currLocation),z.ZP.locateTo(n,t),e.currLocation=t,e.folders=n,e.sortByField="update",e.sortByDescending=!0,t){case"a":r="/mydesign/all";break;case"h":r="/mydesign/favor";break;case"t":r="/mydesign/trash";break;case"l":r="/mydesign/list";break;default:r=`/mydesign/${z.ZP.makePath(t).slice(1).join("&")}`}C.Z.currentRoute.value.path!==r&&C.Z.replace({path:r})},SET_moveToFolderSelectInfo(e,t){const n=T.Z.deepCopy(e.copiedFolders);z.ZP.dislocateFrom(n,e.moveToFolderSelectInfo),z.ZP.locateTo(n,t),e.moveToFolderSelectInfo=t,e.copiedFolders=n},SET_expand(e,t){const n=z.ZP.search(e.folders,t.path);n&&(n.isExpanded=t.isExpanded)},SET_copiedExpand(e,t){const n=z.ZP.search(e.copiedFolders,t.path);n&&(n.isExpanded=t.isExpanded)},SET_folders(e,t){e.folders=t},SET_allDesigns(e,t){e.allDesigns=t},SET_allFolders(e,t){e.allFolders=t},SET_draggingFolder(e,t){e.draggingType=t?"folder":"",e.draggingFolder=t},SET_draggingDesign(e,t){e.draggingType=t?"design":"",e.draggingDesign=t},SET_isDesignsLoading(e,t){e.isDesignsLoading=t},SET_isFoldersLoading(e,t){e.isFoldersLoading=t},SET_sortByField(e,t){e.sortByField=t},SET_sortByDescending(e,t){e.sortByDescending=t},SET_designsPageIndex(e,t){e.designsPageIndex=t},SET_isErrorShowing(e,t){e.isErrorShowing=t},SET_itemCount(e,t){e.folderDesignCount=t.designCount,e.folderFolderCount=t.folderCount},SET_bottomMenu(e,t){e.bottomMenu=t},SET_mobileDesignBuffer(e,t){e.mobileDesignBuffer=t},SET_mobileFolderBuffer(e,t){e.mobileFolderBuffer=t},SET_mobilePathBuffer(e,t){e.mobilePathBuffer=t},UPDATE_setDesignThumbnail(e,t){const n=e.allDesigns.find((e=>e.asset_index===t.asset_index));n&&(n.thumbnail=t.thumbnail)},UPDATE_folders(e,t){let n;n="root"===t.path?[z.ZP.ROOT]:[z.ZP.ROOT,...t.path.split(",")];const r=z.ZP.search(e.folders,n);r&&(r.subFolders=z.ZP.updateFolders(r.subFolders,t.folders))},UPDATE_copiedFolders(e,t){const n=t.path.split(","),r=z.ZP.search(e.copiedFolders,n);r&&(r.subFolders=z.ZP.updateFolders(r.subFolders,t.folders))},UPDATE_snapshotFolders(e){const t=T.Z.deepCopy(e.folders),n=t[0];n?(z.ZP.dislocateFrom(t,e.currLocation),e.copiedFolders=n.subFolders):e.copiedFolders=[],e.moveToFolderSelectInfo=""},UPDATE_currLocation(e){const t=T.Z.deepCopy(e.folders);z.ZP.locateTo(t,e.currLocation),e.folders=t},UPDATE_addDesign(e,t){const n=z.ZP.getInsertIndex(e.allDesigns,e.sortByField,e.sortByDescending,t);e.allDesigns=[...e.allDesigns.slice(0,n),t,...e.allDesigns.slice(n)],e.folderDesignCount+=1},UPDATE_replaceDesign(e,t){const n=e.allDesigns.findIndex((e=>e.id===t.id));e.allDesigns=[...e.allDesigns.slice(0,n),t.design,...e.allDesigns.slice(n+1)]},UPDATE_deleteDesign(e,t){const n=e.allDesigns.findIndex((e=>e.asset_index===t.asset_index));n>=0&&(e.allDesigns=[...e.allDesigns.slice(0,n),...e.allDesigns.slice(n+1)],e.folderDesignCount-=1)},UPDATE_setFolderName(e,t){const n=z.ZP.search(e.folders,z.ZP.appendPath(t.parents,t.folder));n&&(n.name=t.name,n.lastUpdatedTime=t.lastUpdatedTime);const r=e.allFolders.findIndex((e=>e.id===t.folder.id));if(r>=0){const n=e.allFolders[r];e.allFolders=[...e.allFolders.slice(0,r),...e.allFolders.slice(r+1)],n.name=t.name,n.lastUpdatedTime=t.lastUpdatedTime;const i=z.ZP.getInsertIndex(e.allFolders,e.sortByField,e.sortByDescending,n);e.allFolders=[...e.allFolders.slice(0,i),n,...e.allFolders.slice(i)]}},UPDATE_addFolder(e,t){const n=e.allFolders.findIndex((e=>e.id===t.id));if(n>=0)return;const r=z.ZP.getInsertIndex(e.allFolders,e.sortByField,e.sortByDescending,t);e.allFolders=[...e.allFolders.slice(0,r),t,...e.allFolders.slice(r)],e.folderFolderCount+=1},UPDATE_deleteFolder(e,t){const n=e.allFolders.findIndex((e=>e.id===t.id));n>=0&&(e.allFolders=[...e.allFolders.slice(0,n),...e.allFolders.slice(n+1)],e.folderFolderCount-=1)},UPDATE_removeFolder(e,t){const n=z.ZP.search(e.folders,t.parents);if(n){const e=n.subFolders.findIndex((e=>e.id===t.folder.id));e>=0&&(n.subFolders=[...n.subFolders.slice(0,e),...n.subFolders.slice(e+1)])}},UPDATE_insertFolder(e,t){const n=z.ZP.search(e.folders,t.parents);n&&n.subFolders.push(t.folder)},UPDATE_insertFolderToCopied(e,t){if(0===t.parents.length)e.copiedFolders.push(t.folder);else{const n=z.ZP.search(e.copiedFolders,t.parents);n&&n.subFolders.push(t.folder)}},UPDATE_replaceFolder(e,t){const n=e.allFolders.findIndex((e=>e.id===t.id));n>=0&&(e.allFolders=[...e.allFolders.slice(0,n),t.folder,...e.allFolders.slice(n+1)]);const r=z.ZP.search(e.folders,t.parents);if(r){const e=r.subFolders.findIndex((e=>e.id===t.id));r.subFolders=[...r.subFolders.slice(0,e),t.folder,...r.subFolders.slice(e+1)]}if(1===t.parents.length){const n=e.copiedFolders.findIndex((e=>e.id===t.id));e.copiedFolders=[...e.copiedFolders.slice(0,n),t.folder,...e.copiedFolders.slice(n+1)]}else{const n=z.ZP.search(e.copiedFolders,t.parents.slice(1));if(n){const e=n.subFolders.findIndex((e=>e.id===t.id));n.subFolders=[...n.subFolders.slice(0,e),t.folder,...n.subFolders.slice(e+1)]}}},UPDATE_addToSelection(e,t){e.selectedDesigns[t.asset_index.toString()]=t},UPDATE_removeFromSelection(e,t){delete e.selectedDesigns[t.asset_index.toString()]},UPDATE_addFolderToSelection(e,t){e.selectedFolders[t.id]=t},UPDATE_removeFolderFromSelection(e,t){delete e.selectedFolders[t.id]},UPDATE_metaSelect(e,t){const{designs:n,index:r}=t;if(0===Object.keys(e.selectedDesigns).length)e.selectedDesigns[n[r].asset_index.toString()]=n[r];else{let t=-1;const i=[[r,0]];while(i.length){const r=i.shift();if(void 0===r)break;const[o,s]=r,a=n[o];if(e.selectedDesigns[a.asset_index.toString()]){t=o;break}s>=0&&o+1<n.length&&i.push([o+1,1]),s<=0&&o-1>=0&&i.push([o-1,-1])}if(e.selectedDesigns={},-1===t)e.selectedDesigns[n[r].asset_index.toString()]=n[r];else{const[i,o]=[t,r].sort(((e,t)=>e-t));for(let t=i;t<=o;t++)e.selectedDesigns[n[t].asset_index.toString()]=n[t]}}},UPDATE_metaSelectFolder(e,t){const{folders:n,index:r}=t;if(0===Object.keys(e.selectedFolders).length)e.selectedFolders[n[r].id]=n[r];else{let t=-1;const i=[[r,0]];while(i.length){const r=i.shift();if(void 0===r)break;const[o,s]=r,a=n[o];if(e.selectedFolders[a.id]){t=o;break}s>=0&&o+1<n.length&&i.push([o+1,1]),s<=0&&o-1>=0&&i.push([o-1,-1])}if(e.selectedFolders={},-1===t)e.selectedFolders[n[r].id]=n[r];else{const[i,o]=[t,r].sort(((e,t)=>e-t));for(let t=i;t<=o;t++)e.selectedFolders[n[t].id]=n[t]}}},UPDATE_clearSelection(e){e.selectedDesigns={},e.selectedFolders={}},UPDATE_clearBuffers(e){e.mobileDesignBuffer=void 0,e.mobileFolderBuffer=void 0,e.mobilePathBuffer=[]},UPDATE_resetState(e){const t=D();for(const[n,r]of Object.entries(t))e[n]=r}};var F={namespaced:!0,state:O,getters:M,mutations:$,actions:A},j=n(50719),B=n(71684);class R{getFiles(e){return j.Z.request({url:"/list-asset",method:"POST",data:{token:(0,B.Z)().token||"",type:"image",page_index:e.pageIndex}})}}var H=new R,U=n(72869),W=n(3806),V=n(47931),G=n(95264),q=Object.defineProperty,K=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,Q=(e,t,n)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J=(e,t)=>{for(var n in t||(t={}))Y.call(t,n)&&Q(e,n,t[n]);if(K)for(var n of K(t))X.call(t,n)&&Q(e,n,t[n]);return e},ee=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const te=()=>({myfileImages:[],editorViewImages:{},checkedAssets:[],pending:!0,initialized:!1,setLayersDone:!1,pageIndex:0,uploadingAssets:[]}),ne=te();function re(){return Gi.getters["user/isAdmin"]}function ie(e){const t=Gi.getters["user/getTeamId"],n=Gi.getters["user/getTeamId"];return e.map((e=>{var r,i,o,s,a,l,c,d,u,g,p,h,m,y;const f=e.width/e.height,b=e.width>e.height?e.width:384*f,v=e.height>e.width?e.height:384/f;return{width:e.width,height:e.height,id:e.id,assetIndex:e.asset_index,preview:{width:b,height:v},urls:{prev:re()?`https://template.vivipic.com/admin/${t||n}/asset/image/${e.id}/prev`:null!=(i=null==(r=e.signed_url)?void 0:r.prev)?i:"",full:re()?`https://template.vivipic.com/admin/${t||n}/asset/image/${e.id}/full`:null!=(s=null==(o=e.signed_url)?void 0:o.full)?s:"",larg:re()?`https://template.vivipic.com/admin/${t||n}/asset/image/${e.id}/larg`:null!=(l=null==(a=e.signed_url)?void 0:a.larg)?l:"",original:re()?`https://template.vivipic.com/admin/${t||n}/asset/image/${e.id}/original`:null!=(d=null==(c=e.signed_url)?void 0:c.original)?d:"",midd:re()?`https://template.vivipic.com/admin/${t||n}/asset/image/${e.id}/midd`:null!=(g=null==(u=e.signed_url)?void 0:u.midd)?g:"",smal:re()?`https://template.vivipic.com/admin/${t||n}/asset/image/${e.id}/smal`:null!=(h=null==(p=e.signed_url)?void 0:p.smal)?h:"",tiny:re()?`https://template.vivipic.com/admin/${t||n}/asset/image/${e.id}/tiny`:null!=(y=null==(m=e.signed_url)?void 0:m.tiny)?y:""}}}))}function oe(e){return e&&"private"===e.type?e.assetId.toString():""}function se(e,t){const n={};for(const r of e)n[r.asset_index]=r.signed_url;re()||Gi.commit("file/SET_STATE",{editorViewImages:Object.assign({},ne.editorViewImages,n)}),Gi.commit("file/SET_STATE",{myfileImages:ne.myfileImages.concat(ie(e)),pageIndex:t,pending:!1,initialized:!0})}const ae={getMoreMyfiles(e){return ee(this,arguments,(function*({commit:e}){const{pageIndex:t}=ne;if(-1!==t){e("SET_STATE",{pending:!0});try{const e=yield V.Z.requestWithRetry((()=>H.getFiles({pageIndex:t})));se(e.data.data.image.content,e.data.next_page)}catch(n){L.Z.setLogForError(n),(0,G.Tb)(n)}}}))},deleteAssets(e){return ee(this,arguments,(function*({commit:e}){try{const t=ne.checkedAssets.join(","),n={token:U.Z.getToken(),locale:U.Z.getLocale(),team_id:U.Z.getTeamId(),type:"image",update_type:"delete",src_asset:t,target:"2"};U.Z.updateAsset(J({},n)).then((()=>{e("SET_STATE",{checkedAssets:[],myfileImages:ne.myfileImages.filter((e=>!ne.checkedAssets.includes(e.assetIndex)))})}))}catch(t){L.Z.setLogForError(t)}}))},updatePageImages(e,t){return ee(this,arguments,(function*({dispatch:e},{pageIndex:t}){const{layers:n,backgroundImage:r}=Gi.state.pages[t].config,i=new Set;i.add(oe(r.config.srcObj));const o=n.flatMap((e=>"group"===e.type?e.layers:[e]));for(const s of o)switch(s.type){case"image":i.add(oe(s.srcObj));break;case"frame":for(const e of s.clips)i.add(oe(e.srcObj));break;case"text":{const e=s.styles.textFill.customImg;(0,W.F)(e)&&!e.id&&i.add(`${e.assetIndex}`);break}}i.delete(""),yield e("updateImages",{assetSet:i}).catch((e=>console.log("updatePageImages",e)))}))},updateImages(e,t){return ee(this,arguments,(function*({commit:e},{assetSet:t}){const n=U.Z.getToken();t=p().difference(Array.from(t),Object.keys(ne.editorViewImages)),t=Array.from(t).join(","),0!==t.length&&(yield V.Z.requestWithRetry((()=>U.Z.getAllAssets(n,{asset_list:t}))).then((t=>{const n=t.data.url_map;if("backendRendering"===Gi.getters["user/getUserId"]){const e=Gi.getters["user/getToken"];Object.entries(n).forEach((([t,r])=>{const i=r.full,o=i.substring("https://asset.vivipic.com/".length,i.indexOf("/asset/image/")),s=i.substring(i.indexOf("/asset/image/")+"/asset/image/".length,i.indexOf("/full?"));n[t].ext1=`https://template.vivipic.com/pdf/${o}/asset/image/${s}/ext1?token=${e}`,n[t].ext2=`https://template.vivipic.com/pdf/${o}/asset/image/${s}/ext2?token=${e}`,n[t].ext3=`https://template.vivipic.com/pdf/${o}/asset/image/${s}/ext3?token=${e}`}))}const r=Object.assign({},ne.editorViewImages,t.data.url_map);e("SET_STATE",{editorViewImages:r})})))}))},initImages(e,{imgs:t}){ne.initialized||se(t,t.length)}},le={SET_setLayersDone(e){e.setLayersDone=!0},SET_STATE(e,t){const n=t||te(),r=Object.keys(n);r.forEach((t=>{t in e&&(e[t]=n[t])}))},UPDATE_CHECKED_ASSETS(e,t){e.checkedAssets=[...t]},ADD_CHECKED_ASSETS(e,t){e.checkedAssets.push(t)},DELETE_CHECKED_ASSETS(e,t){const n=e.checkedAssets.findIndex((e=>e===t));e.checkedAssets.splice(n,1)},CLEAR_CHECKED_ASSETS(e){e.checkedAssets=[]},ADD_PREVIEW(e,{width:t,height:n,src:r,assetId:i}){const o={width:t,height:n,id:i,assetIndex:i,progress:0,preview:{width:t,height:n},urls:{prev:r,full:r,larg:r,original:r,midd:r,smal:r,tiny:r}};e.myfileImages=[o,...e.myfileImages]},DEL_PREVIEW(e,{assetId:t}){e.myfileImages=e.myfileImages.filter((e=>e.assetIndex!==t))},UPDATE_PROGRESS(e,{assetId:t,progress:n}){const r=e.myfileImages.findIndex((e=>e.id===t));e.myfileImages[r].progress=n},UPDATE_IMAGE_URLS(e,{assetId:t,urls:n,assetIndex:r,width:i,height:o}){const{myfileImages:s}=e,a=e.myfileImages.findIndex((e=>re()?e.id===t:e.assetIndex===t)),l=ie([{width:null!=i?i:s[a].width,height:null!=o?o:s[a].height,id:re()?t:void 0,asset_index:null!=r?r:t,signed_url:n}]);-1===a?e.myfileImages.unshift(l[0]):(e.myfileImages[a].urls=l[0].urls,e.myfileImages[a].id=re()?t:void 0,e.myfileImages[a].assetIndex=null!=r?r:t,e.myfileImages[a].width=null!=i?i:s[a].width,e.myfileImages[a].height=null!=o?o:s[a].height),e.editorViewImages[l[0].assetIndex]=l[0].urls},SET_UPLOADING_IMGS(e,{id:t,adding:n,pageIndex:r}){const i=e.uploadingAssets.findIndex((e=>e.id===t));n?-1===i&&e.uploadingAssets.push({id:t,pageIndex:r}):-1!==i&&e.uploadingAssets.splice(i,1)}},ce={getSetLayersDone(e){return e.setLayersDone},getImages(e){return e.myfileImages},getCheckedAssets(e){return e.checkedAssets},getEditorViewImages:e=>t=>t?e.editorViewImages[t]:e.editorViewImages,getUploadingImgs(e){return e.uploadingAssets}};var de={namespaced:!0,state:ne,getters:ce,mutations:le,actions:ae},ue=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const ge="SET_MORE_CATEGORY",pe=i.Z.apply({api:e=>r.Z.getFont(e),namespace:"font"}),he=pe.actions,me=pe.mutations,ye=pe.getters;he.getMoreCategory=e=>ue(void 0,[e],(function*({commit:e,getters:t,state:n}){const{nextParams:i,hasNextPage:o}=t,{pending:s}=n;if(o&&!s){e("SET_STATE",{pending:!0}),i.keyword=void 0;try{const{data:t}=yield r.Z.getFont(i);e(ge,t.data)}catch(a){L.Z.setLogForError(a),(0,G.Tb)(a)}}})),me[ge]=function(e,t){for(let n=0;n<t.content.length;n++)e.categories[n].list=e.categories[n].list.concat(t.content[n].list);e.pending=!1,e.nextPage=t.next_page},ye.getFont=function(e){return t=>{for(const n of e.categories)for(const e of n.list)if(e.id===t)return e}};var fe=pe,be=n(37658);class ve{getFontTags(){const e={token:"1",locale:be.Z.currLocale(),type:"fonttag",cache:!0,platform:window.location.host,ver:Gi.getters["user/getVerApi"]};return j.Z.request({url:"/list-design",method:"GET",params:e})}}var we=new ve,Ne=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const Se="ADD_FONT_TAGS",xe="SET_SHOW_MORE",Pe={locale:be.Z.currLocale(),showMore:!1,tags:[]},Ie={[xe](e,t){e.showMore=t}},_e={[Se](e){return Ne(this,arguments,(function*({state:e}){const t=yield V.Z.requestWithRetry(we.getFontTags),{data:n}=t;0===n.flag?e.tags=e.tags.concat(n.data.content):console.error("can not get the api data: font-tags")}))}};var ke={namespaced:!0,state:Pe,mutations:Ie,actions:_e},Ze=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const Ce=()=>({locale:"tw",keyword:"",isShowPagePreview:!1,pagesPerRow:(0,g.floor)((window.screen.width-130)/180)}),ze=Ce(),Te={getPagesPerRow(e){return e.pagesPerRow}},Le={getTagContent(e,t){return Ze(this,arguments,(function*({commit:e},{keyword:t,theme:n,cache:i,shuffle:o}){const s=be.Z.currLocale();try{const{data:e}=yield r.Z.getTemplate({locale:s,keyword:t.includes("::")?t:`tag::${t}`,theme:n,shuffle:o,cache:i});return Promise.resolve(e)}catch(a){L.Z.setLogForError(a),(0,G.Tb)(a)}}))}};var Ee={namespaced:!0,state:ze,getters:Te,actions:Le},De=n(62013),Oe=n(70118),Me=n(75231),Ae=n(52632),$e=n(6400);const Fe="SET_CONFIG",je="SET_BG_CONFIG",Be="UPDATE_CONFIG",Re="SET_IsBgCtrlImgLoaded",He={image:void 0,image_ori:void 0,primaryLayer:void 0,layerInfo:{pageIndex:-1,layerIndex:-1,subLayerIdx:-1},isBgCtrlImgLoaded:!1},Ue={imgControlPageIdx(e){return e.layerInfo.pageIndex},isImgCtrl(e){return void 0!==e.image&&-1!==e.layerInfo.layerIndex},isBgImgCtrl(e){return void 0!==e.image&&-1===e.layerInfo.layerIndex},isBgCtrlImgLoaded(e){return e.isBgCtrlImgLoaded}},We={[Fe](e,t){if("reset"===t)return e.image=void 0,e.image_ori=void 0,void(e.layerInfo={pageIndex:-1,layerIndex:-1,subLayerIdx:-1});const{pageIndex:n=-1,layerIndex:r=-1,subLayerIdx:i=-1}=t||{};if(-1!==n&&-1!==r){if(e.primaryLayer=Me.ZP.getLayer(n,r)||void 0,!e.primaryLayer||![$e.F5.frame,$e.F5.group,$e.F5.image].includes(e.primaryLayer.type))return e.image=void 0,void(e.layerInfo={pageIndex:-1,layerIndex:-1,subLayerIdx:-1});let t;"undefined"!==typeof i&&-1!==i?e.primaryLayer.type===$e.F5.group?t=e.primaryLayer.layers[i]:e.primaryLayer.type===$e.F5.frame&&(t=e.primaryLayer.clips[i]):t=Me.ZP.getLayer(n,r),e.image=Ge(e.primaryLayer,T.Z.deepCopy(t)),e.image_ori=T.Z.deepCopy(e.image),e.layerInfo={pageIndex:n,layerIndex:r,subLayerIdx:i}}else e.image&&qe()&&(Ke(e.layerInfo,e.image,e.primaryLayer),Ae.Z.record()),e.image=void 0,e.image_ori=void 0,e.layerInfo={pageIndex:-1,layerIndex:-1,subLayerIdx:-1}},[je](e,t){return"reset"===t?(e.image=void 0,e.image_ori=void 0,void(e.layerInfo={pageIndex:-1,layerIndex:-1,subLayerIdx:-1})):void 0===t?(e.image&&qe()&&(Ve(e),Ae.Z.record()),e.image=void 0,e.image_ori=void 0,e.layerInfo={pageIndex:-1,layerIndex:-1,subLayerIdx:-1},void(e.isBgCtrlImgLoaded=!1)):(e.image=T.Z.deepCopy(N.Z.getPage(t).backgroundImage.config),e.image.styles.imgX=N.Z.getPage(t).backgroundImage.posX,e.image.styles.imgY=N.Z.getPage(t).backgroundImage.posY,e.image_ori=T.Z.deepCopy(e.image),void(e.layerInfo={pageIndex:t,layerIndex:-1,subLayerIdx:-1}))},[Be](e,t){const{image:n}=e;n&&Object.entries(t).forEach((([e,t])=>{n.styles[e]=t}))},[Re](e,t){e.isBgCtrlImgLoaded=t}},Ve=function(e){const{image:t}=e,n=e.layerInfo.pageIndex;if(t){const{imgX:e,imgY:r,imgWidth:i,imgHeight:o}=t.styles;N.Z.updateBackgroundImagePos(n,e,r),N.Z.updateBackgroundImageStyles(n,{imgWidth:i,imgHeight:o})}},Ge=function(e,t){switch(t.styles.adjust.blur=0,e.type){case $e.F5.frame:if(De.Z.isImageFrame(e)){t.styles.x=e.styles.x,t.styles.y=e.styles.y,t.styles.scale=e.styles.scale;const n=e.styles.verticalFlip,r=e.styles.horizontalFlip,i=t.styles.verticalFlip,o=t.styles.horizontalFlip;return t.styles.verticalFlip=(n||i)&&!(n&&i),t.styles.horizontalFlip=(r||o)&&!(r&&o),t.styles.rotate=e.styles.rotate,n&&(t.styles.imgY=t.styles.height-t.styles.imgHeight-t.styles.imgY),r&&(t.styles.imgX=t.styles.width-t.styles.imgWidth-t.styles.imgX),t}{if(t.styles.x*=e.styles.scale,t.styles.y*=e.styles.scale,e.styles.horizontalFlip||e.styles.verticalFlip){const{imgX:n,imgY:r,imgWidth:i,imgHeight:o,width:s,height:a}=t.styles,[l,c]=[-(i-s)/2,-(o-a)/2],[d,u]=[n-l,r-c];t.styles.imgX-=e.styles.horizontalFlip?2*d:0,t.styles.imgY-=e.styles.verticalFlip?2*u:0}const n=Oe.Z.mapLayersToPage([t],e)[0];return n}case $e.F5.group:{const n=t.styles.scale;t.styles.scale=1,t.styles.x*=e.styles.scale,t.styles.y*=e.styles.scale;const r=Oe.Z.mapLayersToPage([t],e)[0];return r.styles.scale=n,r}case $e.F5.image:return t}return t},qe=function(){const{image:e,image_ori:t}=He;return!(!e||!t)&&(e.styles.imgX!==t.styles.imgX||e.styles.imgY!==t.styles.imgY||e.styles.imgWidth!==t.styles.imgWidth||e.styles.imgHeight!==t.styles.imgHeight)},Ke=function(e,t,n){const{layerIndex:r,pageIndex:i,subLayerIdx:o}=e,s=null!=n?n:Me.ZP.getLayer(i,r);switch(s.type){case $e.F5.frame:{if(De.Z.isImageFrame(s)){let{styles:{imgX:e,imgY:n,imgWidth:o,imgHeight:a,width:l,height:c}}=t;return s.styles.verticalFlip&&(n=c-a-n),s.styles.horizontalFlip&&(e=l-o-e),void De.Z.updateFrameLayerStyles(i,r,0,{imgX:e,imgY:n,imgHeight:a,imgWidth:o})}const e=Oe.Z.mapLayersToTmp([t],s.styles)[0];let{styles:{imgX:n,imgY:a,imgWidth:l,imgHeight:c,width:d,height:u}}=e;s.styles.horizontalFlip&&(n=d-l-n),s.styles.verticalFlip&&(a=u-c-a),n/=s.styles.scale,a/=s.styles.scale,l/=s.styles.scale,c/=s.styles.scale,De.Z.updateFrameLayerStyles(i,r,null!=o?o:0,{imgX:n,imgY:a,imgHeight:c,imgWidth:l});break}case $e.F5.group:{const e=Oe.Z.mapLayersToTmp([t],s.styles)[0];let{styles:{imgX:n,imgY:a,imgWidth:l,imgHeight:c}}=e;n/=s.styles.scale,a/=s.styles.scale,l/=s.styles.scale,c/=s.styles.scale,Me.ZP.updateLayerStyles(i,r,{imgX:n,imgY:a,imgHeight:c,imgWidth:l},o);break}case $e.F5.image:{const{styles:{imgX:e,imgY:n,imgWidth:o,imgHeight:s}}=t;Me.ZP.updateLayerStyles(i,r,{imgX:e,imgY:n,imgHeight:s,imgWidth:o})}}};var Ye={namespaced:!0,state:He,getters:Ue,mutations:We},Xe=i.Z.apply({api:e=>r.Z.getLayout(e),namespace:"layouts"}),Qe=i.Z.apply({api:e=>r.Z.getMarker(e),namespace:"markers"});const Je=()=>({closeMobilePanelFlag:!1,mobileAllPageMode:!1,inMultiSelectionMode:!1,currCardIndex:0,currActivePanel:"none",currActiveSubPanel:"none",inBgSettingMode:!1,showMobilePanel:!1,pageCenterPos:{x:-1,y:-1},isPinchingEditor:!1,pinchScale:1,showMobileSubPanel:!1}),et=Je(),tt={getInMultiSelectionMode(e){return e.inMultiSelectionMode},getCurrCardIndex(e){return e.currCardIndex},getCurrActivePanel(e){return e.currActivePanel},getCurrActiveSubPanel(e){return e.currActiveSubPanel},getMobileAllPageMode(e){return e.mobileAllPageMode},getInBgSettingMode(e){return e.inBgSettingMode},getShowMobilePanel(e){return e.showMobilePanel},getIsPinchingEditor(e){return e.isPinchingEditor}},nt={SET_STATE(e,t){const n=t||Je(),r=Object.keys(n);r.forEach((t=>{t in e&&(e[t]=n[t])}))},SET_closeMobilePanelFlag(e,t){e.closeMobilePanelFlag=t},SET_mobileAllPageMode(e,t){e.mobileAllPageMode=t},SET_inMultiSelectionMode(e,t){e.inMultiSelectionMode=t},SET_currCardIndex(e,t){e.currCardIndex=t},SET_currActivePanel(e,t){e.currActivePanel=t},SET_currActiveSubPanel(e,t){e.currActiveSubPanel=t},SET_showMobilePanel(e,t){e.showMobilePanel=t},SET_isPinchingEditor(e,t){e.isPinchingEditor=t},SET_pageCenterPos(e,t){e.pageCenterPos.x=t.x,e.pageCenterPos.y=t.y},UPDATE_pinchScale(e,t){e.pinchScale=t},SET_showMobileSubPanel(e,t){e.showMobileSubPanel=t},INIT_STATE(e){e.closeMobilePanelFlag=!1,e.mobileAllPageMode=!1,e.inMultiSelectionMode=!1,e.currCardIndex=0,e.currActivePanel="none",e.currActiveSubPanel="none",e.inBgSettingMode=!1,e.showMobilePanel=!1}},rt={};var it={namespaced:!0,state:et,getters:tt,mutations:nt,actions:rt};const ot="SET_MODAL_INFO",st="SET_MODAL_OPEN",at="SET_IS_PENDING",lt=()=>({modalInfo:{title:"",content:[""],confirmButton:{msg:"",action:()=>!1},cancelButton:{msg:"",action:()=>!1}},modalOpen:!1,pending:!1}),ct=lt(),dt={getModalInfo(e){return e.modalInfo},getModalOpen(e){return e.modalOpen},getIsPending(e){return e.pending}},ut={[ot](e,t){Object.entries(t).forEach((([t,n])=>{e.modalInfo[t]=n}))},[st](e,t){e.modalOpen=t},[at](e,t){e.pending=t}},gt={};var pt={namespaced:!0,state:ct,getters:dt,mutations:ut,actions:gt},ht=i.Z.apply({api:e=>r.Z.getSvg(e),namespace:"objects"});const mt=()=>({isShowPagePreview:!1,pagesPerRow:(0,g.floor)((document.body.clientWidth-130)/180),showPagePanel:!1,isDragged:!1,topBound:-1,bottomBound:Number.MAX_SAFE_INTEGER}),yt=mt(),ft={getIsShowPagePreview(e){return e.isShowPagePreview},getPagesPerRow(e){return e.pagesPerRow},getShowPagePanel(e){return e.showPagePanel},getIsDragged(e){return e.isDragged},getTopBound(e){return e.topBound},getBottomBound(e){return e.bottomBound}},bt={SET_STATE(e,t){const n=t||mt(),r=Object.keys(n);r.forEach((t=>{t in e&&(e[t]=n[t])}))},SET_isShowPagePreview(e,t){e.isShowPagePreview=t,t?Oe.Z.deselect():(N.Z.fitPage(),setTimeout((()=>{N.Z.scrollIntoPage(N.Z.currActivePageIndex,"auto"),T.Z.scrollToCenter(void 0,!1,!0)}),0))},SET_PagesPerRow(e,t){e.pagesPerRow=t},SET_showPagePanel(e,t){e.showPagePanel=t},SET_IsDragged(e,t){e.isDragged=t}};var vt={namespaced:!0,state:yt,getters:ft,mutations:bt},wt=n(23931),Nt=Object.defineProperty,St=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,It=(e,t,n)=>t in e?Nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_t=(e,t)=>{for(var n in t||(t={}))xt.call(t,n)&&It(e,n,t[n]);if(St)for(var n of St(t))Pt.call(t,n)&&It(e,n,t[n]);return e};class kt{planList(e){return j.Z.request({url:"/billing-info",method:"POST",data:{locale:wt.Z.global.locale,type:"list",country:e}})}billingInfo(){return j.Z.request({url:"/billing-info",method:"POST",data:{token:(0,B.Z)().token||"",locale:wt.Z.global.locale,type:"status"}})}billingHistory(e){return j.Z.request({url:"/billing-info",method:"POST",data:{token:(0,B.Z)().token||"",locale:wt.Z.global.locale,type:"history",page_index:e}})}updateBillingInfo(e){return j.Z.request({url:"/billing-info",method:"POST",data:_t({token:(0,B.Z)().token||"",locale:wt.Z.global.locale,type:"update"},e)})}init(){return j.Z.request({url:"/payment",method:"POST",data:{token:(0,B.Z)().token||"",locale:wt.Z.global.locale,action:"init"}})}tappayAdd(e){return j.Z.request({url:"/payment",method:"POST",data:_t({token:(0,B.Z)().token||"",locale:wt.Z.global.locale,action:"add_card",type:"tappay",campaign:localStorage.getItem("campaign")||void 0,device:Gi.getters["user/getDevice"],app:Gi.getters["webView/getInBrowserMode"]?0:1},e)})}stripeAdd(e){return j.Z.request({url:"/payment",method:"POST",data:_t({token:(0,B.Z)().token||"",locale:wt.Z.global.locale,action:"add_card",type:"stripe",campaign:localStorage.getItem("campaign")||void 0,device:Gi.getters["user/getDevice"],app:Gi.getters["webView/getInBrowserMode"]?0:1},e)})}tappayUpdate(e){return j.Z.request({url:"/payment",method:"POST",data:_t({token:(0,B.Z)().token||"",locale:wt.Z.global.locale,action:"update_card",type:"tappay"},e)})}stripeUpdate(){return j.Z.request({url:"/payment",method:"POST",data:{token:(0,B.Z)().token||"",locale:wt.Z.global.locale,action:"update_card",type:"stripe"}})}getSwitchPrice(e){return j.Z.request({url:"/payment",method:"POST",data:_t({token:(0,B.Z)().token||"",locale:wt.Z.global.locale,action:"switch",dry_run:1},e)})}switch(e){return j.Z.request({url:"/payment",method:"POST",data:_t({token:(0,B.Z)().token||"",locale:wt.Z.global.locale,action:"switch",dry_run:0},e)})}cancel(e){return j.Z.request({url:"/payment",method:"POST",data:{token:(0,B.Z)().token||"",locale:wt.Z.global.locale,action:"cancel",reason:e}})}resume(){return j.Z.request({url:"/payment",method:"POST",data:{token:(0,B.Z)().token||"",locale:wt.Z.global.locale,action:"resume"}})}deleteCard(){return j.Z.request({url:"/payment",method:"POST",data:{token:(0,B.Z)().token||"",locale:wt.Z.global.locale,action:"delete_card"}})}calcUserAsset(e){return j.Z.request({url:"/calc-user-asset",method:"POST",data:{token:(0,B.Z)().token||"",locale:wt.Z.global.locale,team_id:Gi.getters["user/getTeamId"],proc_id:e}})}calcDone(e,t){const n=new WebSocket(`wss://proc.vivipic.com?token=${(0,B.Z)().token||""}&proc_id=${e}`);n.onmessage=t,n.onerror=e=>{console.log("socket error",e)}}verifyCoupon(e){return j.Z.request({url:"/verify-coupon",method:"POST",data:{token:(0,B.Z)().token||"",locale:wt.Z.global.locale,add:0,coupon:e}})}applyCoupon(e,t,n){return j.Z.request({url:"/verify-coupon",method:"POST",data:{token:(0,B.Z)().token||"",locale:wt.Z.global.locale,add:0,coupon:e,plan_id:t,is_bundle:n}})}}var Zt=new kt,Ct=n(27502),zt=n(99504),Tt=n(47147),Lt=n(50559),Et=n(53813),Dt=Object.defineProperty,Ot=Object.defineProperties,Mt=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable,jt=(e,t,n)=>t in e?Dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bt=(e,t)=>{for(var n in t||(t={}))$t.call(t,n)&&jt(e,n,t[n]);if(At)for(var n of At(t))Ft.call(t,n)&&jt(e,n,t[n]);return e},Rt=(e,t)=>Ot(e,Mt(t)),Ht=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const Ut={0:"invalid",1:"valid",2:"none"},Wt={0:"not used",1:"using",2:"ended"},Vt={0:"",1:"tappay",2:"stripe",3:"tcloud"};function Gt(e,t,n){return e||t||2!==n?e||t||0!==n?e||t||1!==n?!e&&t&&2===n?"Initial":!e&&t&&0===n?"Leave":!e&&t&&1===n?"Abort":e&&!t&&2===n?"-2":e&&!t&&0===n?"-3":e&&!t&&1===n?"Subscribed":e&&t&&2===n?"Deleted":e&&t&&0===n?"-4":e&&t&&1===n?"Canceled":"-?":"Transient":"Fail":"-1"}function qt(e,t){"not used"===e&&(zt.Z.startTrial(14),Tt.Z.inBrowserMode?Tt.Z.sendAdEvent("startTrial",{value:0,currency:"USD",predicted_ltv:0}):Ct.Z.startTrial()),zt.Z.subscribe(t),Ct.Z.subscribe(t)}const Kt=()=>({isLoading:!1,initView:"brandkit",templateImg:"",status:"Loading",plans:{"":{name:"",monthly:{original:"",now:"",nextPaid:0},yearly:{original:"",now:"",nextPaid:0}}},stripeClientSecret:"",prime:"",isPro:!1,isCancelingPro:!1,trialStatus:"",trialDay:14,paymentPaidDate:"",myPaidDate:"",myPrice:"",switchPaidDate:"",switchPrice:"",usage:{bgrmRemain:0,diskLoading:!1,diskUsed:0,diskTotal:100},cardInfo:{status:"none",issuer:"",last4:"",date:""},coupon:{input:"",msg:"",status:"input",discount:0,paymentPaidDate:""},billingHistory:[],planSelected:"",periodUi:"yearly",periodInfo:"monthly",userCountryUi:"",userCountryInfo:"",billingInfo:{email:"",name:"",company:"",address1:"",address2:"",city:"",state:"",zip:"",phone:"",GUI:""},billingInfoInvalid:{email:!1,zip:!1,phone:!1,GUI:!1}}),Yt=Kt();function Xt(e){const t=[1,2,1,2,1,2,4,1],n=5;if(""===e)return!0;if(8!==e.length)return!1;const r=e.split("").map(((e,n)=>parseInt(e)*t[n])).map((e=>(e/10>>0)+e%10)).reduce(((e,t)=>e+t));return"7"===e[6]?r%n===0||(r+1)%n===0:r%n===0}function Qt(e){return new Date(e).toLocaleDateString("us"===wt.Z.global.locale?"en":"zh",{year:"numeric",month:"long",day:"numeric"})}const Jt={getPrice(e,t){return Ht(this,arguments,(function*({commit:e},t){return""===t&&(e("SET_state",{userCountryUi:wt.Z.global.locale}),t=wt.Z.global.locale),Zt.planList(t).then((t=>{const n=t.data.data;e("SET_state",{planSelected:n[0].plan_id,trialDay:t.data.trial_day,plans:n.reduce(((e,t)=>Rt(Bt({},e),{[t.plan_id]:{name:t.plan_id,monthly:{original:t.price_month_original,now:t.price_month_discount,nextPaid:t.price_month_discount},yearly:{original:t.price_month_bundle_original,now:t.price_month_bundle_discount,nextPaid:t.price_bundle_discount}}})),{})})}))}))},getBillingInfo(e){return Ht(this,arguments,(function*({commit:e}){return e("SET_state",{isLoading:!0}),Zt.billingInfo().then((t=>{const n=t.data.data;e("SET_state",{status:Gt(n.plan_subscribe,n.plan_stop_subscribe,n.card_valid),isPro:1===n.plan_subscribe,periodInfo:n.plan_next_bundle?"yearly":"monthly",isCancelingPro:1===n.plan_stop_subscribe,trialStatus:Wt[n.trial_status],myPrice:"$"+n.price,myPaidDate:n.plan_due_time,userCountryInfo:n.country,usage:{bgrmRemain:n.bg_credit_current,diskLoading:!1,diskUsed:n.capacity_current,diskTotal:n.capacity},cardInfo:{status:Ut[n.card_valid],issuer:n.brand,last4:n.last4,date:n.valid_thru},billingInfo:{email:n.email,name:n.name,company:n.company,address1:n.address_line1,address2:n.address_line2,city:n.address_city,state:n.address_state,zip:n.postal_code,phone:n.phone,GUI:n.tax_id}})})).finally((()=>{e("SET_state",{isLoading:!1})}))}))},getBillingHistroy(e){return Ht(this,arguments,(function*({commit:e}){return e("SET_state",{isLoading:!0}),Zt.billingHistory(0).then((t=>{e("SET_state",{billingHistory:t.data.data.map((e=>{const t=new Date(e.create_time).toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric"});return{success:1===e.success,payType:Vt[e.pay_type],url:e.signed_url,date:t,description:e.title,price:e.price,id:e.order_id,name:e.name,company:e.company,address:"us"!==e.country?e.address_line1:`${e.address_line1}${e.address_line2?`, ${e.address_line2}`:""}\n${e.address_city}, ${e.address_state} ${e.postal_code} US`,email:e.email,couponCentent:e.coupon_content,items:[{description:e.title,date:t,price:e.price}]}}))})})).finally((()=>{e("SET_state",{isLoading:!1})}))}))},checkBillingInfo({commit:e},t){let n;switch(t){case"email":n=!Yt.billingInfo.email.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);break;case"zip":n=!Yt.billingInfo.zip.match(/^([0-9]{5}|[0-9]{9})$/);break;case"phone":n=!Yt.billingInfo.phone.match(/^[-0-9]{9,12}$/);break;case"GUI":e("DEL_guiWhiteSpace"),n=!Xt(Yt.billingInfo.GUI);break}return e("SET_state",{billingInfoInvalid:{[t]:n}}),Yt.billingInfoInvalid[t]},updateBillingInfo(e){return Ht(this,arguments,(function*({commit:e}){return e("SET_state",{isLoading:!0}),Zt.updateBillingInfo({meta:JSON.stringify({country:Yt.userCountryInfo,email:Yt.billingInfo.email,name:Yt.billingInfo.name,company:Yt.billingInfo.company,address_line1:Yt.billingInfo.address1,address_line2:Yt.billingInfo.address2,address_city:Yt.billingInfo.city,address_state:Yt.billingInfo.state,postal_code:Yt.billingInfo.zip,phone:Yt.billingInfo.phone,tax_id:Yt.billingInfo.GUI})}).then((({data:e})=>{if(e.flag)throw Error(e.msg)})).then((()=>{(0,Lt.h4)({group:"copy",text:"Success"})})).catch((e=>{(0,Lt.h4)({group:"error",text:e})})).finally((()=>{e("SET_state",{isLoading:!1})}))}))},init(e){return Ht(this,arguments,(function*({commit:e}){e("SET_state",{stripeClientSecret:Zt.init().then((({data:t})=>{if(t.flag)throw Error(t.msg);e("SET_state",{stripeClientSecret:t.client_secret,paymentPaidDate:t.charge_time})})).then((()=>{const t=Yt.billingInfo.email||Gi.getters["user/getEmail"],n=Yt.billingInfo.name||Gi.getters["user/getUname"];e("SET_state",{billingInfo:Object.assign(Yt.billingInfo,{email:t,name:n})})})).catch((e=>{(0,Lt.h4)({group:"error",text:e})}))})}))},tappayAdd(e){return Ht(this,arguments,(function*({commit:e,getters:t}){return e("SET_state",{isLoading:!0}),Zt.tappayAdd({country:Yt.userCountryUi,plan_id:Yt.planSelected,is_bundle:Number("yearly"===Yt.periodUi),prime:Yt.prime,email:Yt.billingInfo.email,coupon:Yt.coupon.input}).then((({data:e})=>{if(e.flag)throw Error(e.msg);qt(Yt.trialStatus,t.getIsBundle)})).then((()=>Zt.updateBillingInfo({meta:JSON.stringify({email:Yt.billingInfo.email,name:Yt.billingInfo.name,phone:Yt.billingInfo.phone,tax_id:Yt.billingInfo.GUI})}))).finally((()=>{e("SET_state",{isLoading:!1})}))}))},stripeAdd(e){return Ht(this,arguments,(function*({commit:e,getters:t}){return e("SET_state",{isLoading:!0}),Zt.stripeAdd({country:Yt.userCountryUi,plan_id:Yt.planSelected,is_bundle:Number("yearly"===Yt.periodUi),email:Yt.billingInfo.email,coupon:Yt.coupon.input}).then((({data:e})=>{if(e.flag)throw Error(e.msg);qt(Yt.trialStatus,t.getIsBundle)})).then((()=>Zt.updateBillingInfo({meta:JSON.stringify({email:Yt.billingInfo.email,name:Yt.billingInfo.name})}))).finally((()=>{e("SET_state",{isLoading:!1})}))}))},tappayUpdate(e){return Ht(this,arguments,(function*({dispatch:e,commit:t}){return t("SET_state",{isLoading:!0}),Zt.tappayUpdate({prime:Yt.prime}).then((t=>(e("getBillingInfo"),(0,Lt.h4)({group:"copy",text:wt.Z.global.t("NN0630")}),t))).finally((()=>{t("SET_state",{isLoading:!1})}))}))},stripeUpdate(e){return Ht(this,arguments,(function*({dispatch:e,commit:t}){return t("SET_state",{isLoading:!0}),Zt.stripeUpdate().then((t=>(e("getBillingInfo"),(0,Lt.h4)({group:"copy",text:wt.Z.global.t("NN0630")}),t))).finally((()=>{t("SET_state",{isLoading:!1})}))}))},getSwitchPrice(e){return Ht(this,arguments,(function*({commit:e,getters:t}){return Zt.getSwitchPrice({plan_id:Yt.planSelected,is_bundle:1-Number(t.getIsBundle)}).then((({data:t})=>{if(t.flag)throw Error(t.msg);e("SET_state",{switchPaidDate:t.charge_time,switchPrice:t.price})})).catch((e=>{(0,Lt.h4)({group:"error",text:e})}))}))},switch(e){return Ht(this,arguments,(function*({getters:e,dispatch:t,commit:n}){return n("SET_state",{isLoading:!0}),Zt["switch"]({plan_id:Yt.planSelected,is_bundle:1-Number(e.getIsBundle)}).then((({data:n})=>{if(n.flag)throw Error(n.msg);(0,Lt.h4)({group:"copy",text:wt.Z.global.t("NN0627",{period:e.getIsBundle?wt.Z.global.t("NN0514"):wt.Z.global.t("NN0515")})}),t("getBillingInfo")})).catch((e=>{(0,Lt.h4)({group:"error",text:e})})).finally((()=>{n("SET_state",{isLoading:!1})}))}))},cancel(e,t){return Ht(this,arguments,(function*({dispatch:e,commit:t},n){return t("SET_state",{isLoading:!0}),Zt.cancel(n).then((({data:t})=>{if(t.flag)throw Error(t.msg);e("getBillingInfo"),(0,Lt.h4)({group:"copy",text:wt.Z.global.t("NN0628")})})).catch((e=>{(0,Lt.h4)({group:"error",text:e})})).finally((()=>{t("SET_state",{isLoading:!1})}))}))},resume(e){return Ht(this,arguments,(function*({dispatch:e,commit:t}){return t("SET_state",{isLoading:!0}),Zt.resume().then((({data:t})=>{if(t.flag)throw Error(t.msg);e("getBillingInfo"),(0,Lt.h4)({group:"copy",text:wt.Z.global.t("NN0629")})})).catch((e=>{(0,Lt.h4)({group:"error",text:e})})).finally((()=>{t("SET_state",{isLoading:!1})}))}))},deleteCard(e){return Ht(this,arguments,(function*({dispatch:e,commit:t}){return t("SET_state",{isLoading:!0}),Zt.deleteCard().then((({data:t})=>{if(t.flag)throw Error(t.msg);e("getBillingInfo"),(0,Lt.h4)({group:"copy",text:wt.Z.global.t("NN0631")})})).catch((e=>{(0,Lt.h4)({group:"error",text:e})})).finally((()=>{t("SET_state",{isLoading:!1})}))}))},reloadDiskCapacity({commit:e}){e("SET_diskLoading",!0);const t=Gi.getters["user/getTeamId"],n=T.Z.generateTimeStamp(),r=`${t}${n}reloadDiskCapacity`,i=t=>{const n=JSON.parse(JSON.parse(t.data).message).payload;n.flag?(0,Lt.h4)({group:"error",text:n.msg}):e("SET_state",{usage:Object.assign(Yt.usage,{diskUsed:Number(n.size)/1024})}),e("SET_diskLoading",!1)};Zt.calcUserAsset(r),Zt.calcDone(r,i)},verifyCoupon({commit:e}){e("SET_coupon",{msg:"",status:"loading"}),Zt.verifyCoupon(Yt.coupon.input).then((({data:t})=>{e("SET_coupon",{msg:t.flag?wt.Z.global.t("NN0698"):t.msg,status:t.flag?"error":"accept"})}))},applyCoupon({commit:e}){"accept"===Yt.coupon.status&&Zt.applyCoupon(Yt.coupon.input,Yt.planSelected,Number("yearly"===Yt.periodUi)).then((({data:t})=>{e("SET_coupon",{discount:t.price_original-t.price,paymentPaidDate:Qt(t.charge_time)})})).catch((e=>{(0,Lt.h4)({group:"error",text:e})}))},resetCouponResult({commit:e}){e("SET_coupon",{msg:"",status:"input",discount:0,paymentPaidDate:""})}},en={updateField:Et.L4,SET_state(e,t){const n=t||Kt(),r=Object.keys(n);r.forEach((t=>{["paymentPaidDate","myPaidDate","switchPaidDate"].includes(t)&&n[t]?e[t]=Qt(n[t]):t in e&&(e[t]=n[t])}))},SET_diskLoading(e,t){e.usage.diskLoading=t},REDUCE_bgrmRemain(e){e.usage.bgrmRemain-=1},SET_isLoading(e,t){e.isLoading=t},SET_initView(e,t){e.initView=t},SET_templateImg(e,t){e.templateImg=t},DEL_guiWhiteSpace(e){e.billingInfo.GUI=e.billingInfo.GUI.replace(/\s/g,"")},SET_prime(e,t){e.prime=t},SET_coupon(e,t){Object.assign(e.coupon,t)}},tn={getField:Et.rz,getStatus(e){return e.status},getDiskPercent(e){return e.usage.diskUsed/e.usage.diskTotal},getDiskUsedUi(e){return Number(e.usage.diskUsed.toFixed(2))},getIsBundle(e){return"yearly"===e.periodInfo},isUiTW(e){return"tw"===e.userCountryUi},getIsPro(e){return e.isPro},getPaidDate(e){return e.coupon.paymentPaidDate||e.paymentPaidDate}};var nn={namespaced:!0,state:Yt,getters:tn,mutations:en,actions:Jt};const rn={value:0,min:0,max:0,step:1,noText:!1,width:150},on=()=>({isPopupOpen:!1,popupComponent:{component:"",properties:{},props:{},closeHandler:()=>!1},sliderConfig:Object.assign({},rn)}),sn=on(),an={getIsPopupOpen(e){return e.isPopupOpen},getPopupComponent(e){return e.popupComponent},getSliderConfig(e){return e.sliderConfig}},ln={SET_isPopupOpen(e,t){e.isPopupOpen=t},SET_popupComponent(e,t){Object.assign(e.popupComponent,t)},SET_sliderConfig(e,t){Object.assign(e.sliderConfig,t)},UPDATE_clearSliderConfig(e){e.sliderConfig=Object.assign({},rn)}},cn={openPopup({commit:e},t){e("SET_isPopupOpen",!0),e("SET_popupComponent",t)},closePopup({commit:e}){e("SET_isPopupOpen",!1),e("SET_popupComponent",{component:"",properties:{},closeHandler:()=>!1})}};var dn={namespaced:!0,state:sn,getters:an,mutations:ln,actions:cn},un=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const gn="SET_UPLOAD_ID",pn="SET_PROCESS_ID",hn="SET_HANDLE_ID",mn="ADD_UPLOAD_IMG",yn="ADD_SHADOW_IMG",fn="SET_UPLOADING_CB",bn={isUploading(e){return""!==e.uploadId.pageId&&""!==e.uploadId.layerId},isProcessing(e){return""!==e.processId.pageId&&""!==e.processId.layerId},isHandling(e){return""!==e.handleId.pageId&&""!==e.handleId.layerId},shadowImgs(e){return e.shadowImgs},uploadingCallback(e){return e.uploadingCallback}},vn={uploadId:{pageId:"",layerId:"",subLayerId:""},processId:{pageId:"",layerId:"",subLayerId:""},handleId:{pageId:"",layerId:"",subLayerId:""},uploadShadowImgs:[],shadowImgs:new Map,uploadingCallback:new Map},wn={[gn](e,t){Object.assign(e.uploadId,t)},[pn](e,t){Object.assign(e.processId,t)},[hn](e,t){Object.assign(e.handleId,t)},[mn](e,t){e.uploadShadowImgs.push(t)},[fn](e,t){t.cb?e.uploadingCallback.set(t.id,t.cb):e.uploadingCallback.delete(t.id)}},Nn={[yn](e,t){return un(this,arguments,(function*({state:e},t){yield V.Z.requestWithRetry((()=>U.Z.getAllAssets(Gi.getters["user/getToken"]||(0,B.Z)().token||"",{asset_list:t.join(",")}))).then((n=>{for(let r=0;r<t.length;r++){const i=n.data.url_map[t[r]];if("backendRendering"===Gi.getters["user/getUserId"]){const e=Gi.getters["user/getToken"],t=i.full,n=t.substring("https://asset.vivipic.com/".length,t.indexOf("/asset/image/")),r=t.substring(t.indexOf("/asset/image/")+"/asset/image/".length,t.indexOf("/full?"));i.ext1=`https://template.vivipic.com/pdf/${n}/asset/image/${r}/ext1?token=${e}`,i.ext2=`https://template.vivipic.com/pdf/${n}/asset/image/${r}/ext2?token=${e}`,i.ext3=`https://template.vivipic.com/pdf/${n}/asset/image/${r}/ext3?token=${e}`}e.shadowImgs.set(t[r],{urls:n.data.url_map[t[r]]})}})).catch((e=>{console.error(e)}))}))}};var Sn={namespaced:!0,state:vn,actions:Nn,getters:bn,mutations:wn},xn=i.Z.apply({api:e=>r.Z.getTemplate(e),namespace:"templates"}),Pn=i.Z.apply({api:e=>r.Z.getText(e),namespace:"text"});class In{getList(e){const t={token:"1",type:e.type,locale:e.locale||"tw",page_index:e.pageIndex,keyword:e.keyword,cache:!0,ver:Gi.getters["user/getVerApi"],platform:window.location.host};return j.Z.request({url:"/list-lib-photo",method:"GET",params:t})}getUnsplash(e){return e.type="unsplash",this.getList(e)}getPexels(e){return e.type="pexels",this.getList(e)}}var _n=new In,kn=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const Zn="SET_STATE",Cn=/[\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f]/,zn=()=>({content:[],searchResult:[],keyword:"",locale:"",nextPage:1,nextSearch:1,pending:!1}),Tn={init({dispatch:e,state:t}){0===t.content.length&&e("getPhotos",{keyword:""})},getPhotos(e){return kn(this,arguments,(function*({commit:e},t={}){const n=wt.Z.global.locale.split("-").slice(-1)[0].toLowerCase();let{locale:r=n,pageIndex:i=1,keyword:o}=t;o&&Cn.test(o)&&(r="ja"),e(Zn,{pending:!0,locale:r}),o&&e("SET_STATE",{keyword:o});try{const{data:{data:t}}=yield _n.getUnsplash({locale:r,pageIndex:i,keyword:o});e("SET_CONTENT",{data:t,isSearch:!!o})}catch(s){L.Z.setLogForError(s),(0,G.Tb)(s)}}))},getMorePhotos(e){return kn(this,arguments,(function*({commit:e,getters:t}){const{locale:n,pageIndex:r,keyword:i}=t.getNextParams;if(!(void 0===r||r<0)){e(Zn,{pending:!0});try{const{data:{data:t}}=yield _n.getUnsplash({locale:n,pageIndex:r,keyword:i});e("SET_CONTENT",{data:t,isSearch:!!i})}catch(o){L.Z.setLogForError(o),(0,G.Tb)(o)}}}))},resetSearch(e){return kn(this,arguments,(function*({commit:e}){e("SET_STATE",{keyword:"",searchResult:[]})}))}},Ln={[Zn](e,t){const n=t||zn(),r=Object.keys(n);r.forEach((t=>{t in e&&(e[t]=n[t])}))},SET_CONTENT(e,{data:t,isSearch:n}){const{searchResult:r,content:i}=e,{next_page:o}=t,s=(n?r:i).concat(t.content[0].list);n?(e.searchResult=s,e.nextSearch=o):(e.content=s,e.nextPage=o),e.pending=!1}},En={getCurrentPagePhotos(e){const{nextPage:t,content:n}=e;return n[t]||[]},getNextParams(e){const{keyword:t,nextPage:n,nextSearch:r,locale:i}=e;return{keyword:t,locale:i,pageIndex:t?r:n}}};var Dn={namespaced:!0,state:zn,getters:En,mutations:Ln,actions:Tn},On=n(20083),Mn=n(98824),An=n(4821),$n=n(44306),Fn=Object.defineProperty,jn=Object.getOwnPropertySymbols,Bn=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,Hn=(e,t,n)=>t in e?Fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Un=(e,t)=>{for(var n in t||(t={}))Bn.call(t,n)&&Hn(e,n,t[n]);if(jn)for(var n of jn(t))Rn.call(t,n)&&Hn(e,n,t[n]);return e},Wn=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const Vn="SET_TOKEN",Gn="SET_STATE",qn="SET_ADMIN_MODE",Kn="SET_BroswerInfo",Yn=()=>({browserInfo:{name:"",version:"",os:{family:"",version:""}},token:"",uname:"",shortName:"",userId:"",teamId:"",role:-1,roleRaw:-1,adminMode:!0,enableAdminView:"true"===localStorage.getItem("enableAdminView"),isAuthenticated:!1,account:"",email:"",upassUpdate:"",subscribe:1,userAssets:{design:{content:[],title:""},font:{content:[],title:""},image:{content:[],title:""},video:{content:[],title:""}},downloadUrl:"",verUni:"",verApi:"",imgSizeMap:[],imgSizeMapExtra:[],avatar:{prev:"",prev_2x:"",prev_4x:""},viewGuide:+localStorage.guest_view_guide||0,isUpdateDesignOpen:!1,updateDesignId:"",updateDesignType:"",dimensionMap:{},dpi:-1,renderForPDF:!1,unitScale:!1,backendRenderParams:{isBleed:!1,isTrim:!1,margin:{bottom:0,right:0}}}),Xn=Yn(),Qn={isLogin:e=>e.token.length>0,getUserId:e=>e.userId,getTeamId:e=>e.teamId?e.teamId:e.userId,getToken(e){return e.token},getAccount(e){return e.account},getEmail(e){return e.email},getUname(e){return e.uname},getUpassUpdate(e){return e.upassUpdate},getSubscribe(e){return e.subscribe},getUserAssets(e){return e.userAssets},getDownloadUrl(e){return e.downloadUrl},getAssetDesign(e){return e.userAssets.design.content},getAssetFonts(e){const{role:t,teamId:n,userId:r,userAssets:i}=e,o=0===t;return i.font.content.map((e=>{var t,i,s,a,l,c,d,u,g,p,h,m;return{original:o?`https://template.vivipic.com/admin/${n||r}/asset/font/${e.id}/original`:null!=(i=null==(t=e.signed_url)?void 0:t.original)?i:"",font:o?`https://template.vivipic.com/admin/${n||r}/asset/font/${e.id}/font`:null!=(a=null==(s=e.signed_url)?void 0:s.font)?a:"","prev-name":o?`https://template.vivipic.com/admin/${n||r}/asset/font/${e.id}/prev-name`:null!=(c=null==(l=e.signed_url)?void 0:l["prev-name"])?c:"","prev_2x-name":o?`https://template.vivipic.com/admin/${n||r}/asset/font/${e.id}/prev_2x-name`:null!=(u=null==(d=e.signed_url)?void 0:d["prev_2x-name"])?u:"","prev-sample":o?`https://template.vivipic.com/admin/${n||r}/asset/font/${e.id}/prev-sample`:null!=(p=null==(g=e.signed_url)?void 0:g["prev-sample"])?p:"","prev-2x-sample":o?`https://template.vivipic.com/admin/${n||r}/asset/font/${e.id}/prev-2x-sample`:null!=(m=null==(h=e.signed_url)?void 0:h["prev-2x-sample"])?m:""}}))},getVerUni(e){return e.verUni},getVerApi(e){return e.verApi},isAdmin(e){return 0===e.role},isOutsourcer(e){return 0===e.role&&3===e.roleRaw},getAvatar(e){return e.avatar},hasAvatar(e){return void 0!==e.avatar.prev_2x},getViewGuide(e){return e.viewGuide},getImgSizeMap(e){return e.imgSizeMap},getIsUpdateDesignOpen(e){return e.isUpdateDesignOpen},getUpdateDesignId(e){return e.updateDesignId},getUpdateDesignType(e){return e.updateDesignType},getDimensionMap(e){return e.dimensionMap},getBackendRenderParams(e){return e.backendRenderParams},getRenderForPDF(e){return e.renderForPDF},getUnitScale(e){return e.unitScale},showAdminTool(e){return 0===e.role&&e.adminMode&&e.enableAdminView},showAllAdminTool(e){return 0===e.role&&e.enableAdminView},getBrowserInfo(e){return e.browserInfo},getDevice(e){const t=e.browserInfo.os.family;switch(t){case"OS X":return On.Y.Mac;case"iOS":return T.Z.isTablet()?On.Y.iPad:On.Y.iPhone;case"Android":return T.Z.isTablet()?On.Y.AndroidTablet:On.Y.AndroidPhone;default:return(null==t?void 0:t.includes("Windows"))?On.Y.Win:On.Y.Other}}},Jn={[Vn](e,t){e.token=t,localStorage.setItem("token",t)},[Gn](e,t){const n=t||Yn(),r=Object.keys(n);r.forEach((t=>{t in e&&(e[t]=n[t])}))},[qn](e,t){e.adminMode=t},[Kn](e,t){e.browserInfo=Un(Un({},e.browserInfo),t)}},er={getAllAssets(e,t){return Wn(this,arguments,(function*({commit:e,dispatch:t},{token:n}){try{const{data:r}=yield U.Z.getAllAssets(n);e(Gn,{pending:!0,contents:[],userAssets:r.data}),t("file/initImages",{imgs:r.data.image.content},{root:!0})}catch(r){L.Z.setLogForError(r)}}))},groupDesign(e,t){return Wn(this,arguments,(function*({commit:e,dispatch:t},n){var r;try{const{data:t}=yield U.Z.groupDesign(n),{flag:i,group_id:o,msg:s}=t,a=0===(null==(r=n.list)?void 0:r.length)&&1===n.update;0===i?(e("SET_groupId",o,{root:!0}),a?(Mn.Z.setModalInfo("刪除成功",[]),e("SET_groupId","",{root:!0}),e("SET_groupType",0,{root:!0})):(Mn.Z.setModalInfo("上傳成功",[`Group ID: ${o}`]),e("SET_groupType",n.ecomm,{root:!0})),An.Z.fetchTemplateContent()):1===i?(Mn.Z.setModalInfo("上傳失敗",[`Error msg: ${s}`]),e("SET_groupId","",{root:!0}),console.log(`Failed: ${s}`)):2===i&&(Mn.Z.setModalInfo("上傳失敗",[`Error msg: ${s}`]),e("SET_groupId","",{root:!0}))}catch(i){L.Z.setLogForError(i)}}))},putAssetDesign(e,t){return Wn(this,arguments,(function*({dispatch:e},{assetId:t,type:n,wait:r}){try{0===n?L.Z.setLog("Update DB"):1===n?L.Z.setLog("Update preview"):2===n&&L.Z.setLog("Update DB and preview");const{data:i}=yield U.Z.putAssetDesign(Xn.token,Xn.teamId||Xn.userId,t,n,r),{flag:o,msg:s}=i;return 0===o&&(L.Z.setLog(`Put asset success: ${s}`),e("getAllAssets",{token:Xn.token})),1===o?(L.Z.setLog(`Put asset failed: ${s}`),(0,Lt.h4)({group:"error",text:`${wt.Z.global.t("NN0360")}`})):2===o&&(L.Z.setLog(`Token invalid!: ${s}`),(0,Lt.h4)({group:"error",text:`${wt.Z.global.t("NN0360")}`})),i}catch(i){L.Z.setLog(i)}}))},login(e,t){return Wn(this,arguments,(function*({commit:e,dispatch:t},{token:n,account:r,password:i}){try{const{data:e}=yield U.Z.login(n,r,i);return yield t("loginSetup",{data:e}),Promise.resolve(e)}catch(o){return L.Z.setLogForError(o),Promise.reject(o)}}))},register(e,t){return Wn(this,arguments,(function*({commit:e},{uname:t,account:n,upass:r,locale:i}){try{const e={uname:t,account:n,upass:r,locale:i},{data:o}=yield U.Z.register("token",JSON.stringify(e));return Promise.resolve(o)}catch(o){return L.Z.setLogForError(o),Promise.reject(o)}}))},loginSetup(e,t){return Wn(this,arguments,(function*({commit:e,dispatch:t},{data:n}){if(0===n.flag){L.Z.setLogAndConsoleLog("login success (loginSetup)");const r=n.data.token,i=n.data.complete,o=n.data.user_name,s=o.substring(0,1).toUpperCase(),a=localStorage.guest_view_guide;let l=n.data.view_guide;G.YA("user_name",o),G.YA("user_id",n.data.user_id),["1","2"].includes(a)&&0===l&&(l=+a,localStorage.removeItem("guest_view_guide"),U.Z.updateUserViewGuide(r,l)),e("SET_STATE",{uname:o,shortName:s,userId:n.data.user_id,role:n.data.role,roleRaw:n.data.roleRaw,account:n.data.account,email:n.data.email,upassUpdate:n.data.upass_update,subscribe:n.data.subscribe,avatar:n.data.avatar,viewGuide:l});const c=localStorage.getItem("locale");c!==n.data.locale&&(wt.Z.global.locale=n.data.locale,localStorage.setItem("locale",n.data.locale)),Tt.Z.updateUserInfo({locale:n.data.locale,userId:n.data.user_id}),$n.Z.setLoginOutput(n.data),e("SET_TOKEN",r),t("payment/getBillingInfo",{},{root:!0}),t("getAllAssets",{token:r}),0===i&&Tt.Z.sendStatistics()}else L.Z.setLogAndConsoleLog("login failed (loginSetup)"),e("SET_TOKEN","")}))},sendVcode(e,t){return Wn(this,arguments,(function*({commit:e},{uname:t,account:n,upass:r,register:i,vcode_only:o,type:s,token:a,locale:l}){try{const{data:e}=yield U.Z.sendVcode(t,n,r,i,o,s,a,l);return Promise.resolve(e)}catch(c){return L.Z.setLogForError(c),Promise.reject(c)}}))},verifyVcode(e,t){return Wn(this,arguments,(function*({commit:e},{account:t,vcode:n,token:r,type:i,locale:o}){try{const{data:e}=yield U.Z.verifyVcode(t,n,r,i,o);return Promise.resolve(e)}catch(s){return L.Z.setLogForError(s),Promise.reject(s)}}))},updateUser(e,t){return Wn(this,arguments,(function*({commit:e},{token:t,account:n,upass:r,uname:i,locale:o,subscribe:s,country:a,device:l,app:c}){try{const{data:e}=yield U.Z.updateUser(t,n,r,i,o,s,a,l,c);return Promise.resolve(e)}catch(d){return L.Z.setLogForError(d),Promise.reject(d)}}))},removeBg(e,t){return Wn(this,arguments,(function*({state:e},{srcObj:t,aspect:n}){try{t=JSON.stringify(t);const{data:e}=yield U.Z.removeBg(t,n);return e}catch(r){L.Z.setLogForError(r)}}))}};var tr={namespaced:!0,state:Xn,getters:Qn,mutations:Jn,actions:er};const nr=()=>({userInfo:Tt.Z.getDefaultUserInfo(),inBrowserMode:!0,inReviewMode:!1,inDevMode:!1,callbackRecords:[]}),rr=nr(),ir={getUserInfo(e){return e.userInfo},getInDevMode(e){return e.inDevMode},getInBrowserMode(e){return e.inBrowserMode},getInReviewMode(e){return e.inReviewMode},getCallbackRecords(e){return e.callbackRecords}},or={SET_userInfo(e,t){e.userInfo=t},UPDATE_userInfo(e,t){Object.assign(e.userInfo,t)},UPDATE_detectIfInReviewMode(e,t){e.inReviewMode=t===e.userInfo.appVer},SET_inBrowserMode(e,t){e.inBrowserMode=t},UPDATE_addCallbackRecord(e,t){e.callbackRecords.push(t)},UPDATE_clearCallbackRecords(e){e.callbackRecords=[]}};var sr={namespaced:!0,state:rr,getters:ir,mutations:or},ar=n(36830),lr=n.n(ar),cr=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const dr={baseURL:"https://api.pexels.com/v1/",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"563492ad6f917000010000015127aeffafd440fd8aff2407235209ec"}},ur=lr().create(dr),gr=/[\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f]/;function pr(e){return e.map((e=>({width:e.width,height:e.height,id:`${e.id}`,user:{name:e.photographer,link:e.photographer_url},urls:{full:e.src.original,raw:e.src.original,regular:e.src.medium,small:e.src.medium,thumb:e.src.small},tags:[],vendor:"pexels"})))}var hr={getCuratedPhoto:e=>cr(void 0,null,(function*(){const t={page:e.page||1,per_page:e.perPage,locale:"zh-TW"},{data:n}=yield ur.request({url:"/curated",method:"GET",params:t});return{results:pr(n.photos)}})),getPhotos:e=>cr(void 0,null,(function*(){const t={page:e.page||1,per_page:e.perPage,query:e.query||"random",locale:"zh-TW"};gr.test(e.query)&&(t.locale="ja-JP");const{data:n}=yield ur.request({url:"/search",method:"GET",params:t});return{results:pr(n.photos)}}))},mr=Object.defineProperty,yr=Object.getOwnPropertySymbols,fr=Object.prototype.hasOwnProperty,br=Object.prototype.propertyIsEnumerable,vr=(e,t,n)=>t in e?mr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wr=(e,t)=>{for(var n in t||(t={}))fr.call(t,n)&&vr(e,n,t[n]);if(yr)for(var n of yr(t))br.call(t,n)&&vr(e,n,t[n]);return e},Nr=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const Sr={baseURL:"https://api.unsplash.com/"},xr=lr().create(Sr),Pr=/[\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f]/;function Ir(e){return e.map((e=>{var t;return{width:e.width,height:e.height,id:`${e.id}`,user:{name:e.user.name,link:e.user.links.html},tags:(null==(t=e.tags)?void 0:t.map((e=>e.title)))||[],urls:wr({},e.urls),vendor:"unsplash"}}))}var _r={getPopularPhoto:e=>Nr(void 0,null,(function*(){const t={page:e.page||1,per_page:e.perPage,order_by:"popular",lang:"zh-TW",client_id:"-7OObRotlL9UUXO4YspkINrFbbMEPSKkreEfWirPtX8"},{data:n}=yield xr.request({url:"/photos",method:"GET",params:t});return{results:Ir(n)}})),getPhotos:e=>Nr(void 0,null,(function*(){const t={page:e.page||1,per_page:e.perPage,query:e.query||"random",order_by:e.orderBy||"relevant",lang:"zh-TW",client_id:"-7OObRotlL9UUXO4YspkINrFbbMEPSKkreEfWirPtX8"};Pr.test(e.query)&&(t.lang="ja");const{data:n}=yield xr.request({url:"/search/photos",method:"GET",params:t});return{results:Ir(n.results)}}))},kr=Object.defineProperty,Zr=Object.getOwnPropertySymbols,Cr=Object.prototype.hasOwnProperty,zr=Object.prototype.propertyIsEnumerable,Tr=(e,t,n)=>t in e?kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lr=(e,t)=>{for(var n in t||(t={}))Cr.call(t,n)&&Tr(e,n,t[n]);if(Zr)for(var n of Zr(t))zr.call(t,n)&&Tr(e,n,t[n]);return e},Er=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const Dr=30,Or=50,Mr="SET_STATE",Ar="SET_TOTAL_PAGES",$r=()=>({list:[],query:"",page:0,perPage:0,totalPages:0,pending:!1}),Fr={getPhotosFromUnsplash(e){return Er(this,arguments,(function*({commit:e},t={}){e(Mr,{pending:!0,list:[]}),t.perPage||(t.perPage=Dr);try{const{results:n}=yield t.query?_r.getPhotos(t):_r.getPopularPhoto(t);e(Mr,Lr({list:n,page:1,pending:!1},t))}catch(n){L.Z.setLogForError(n)}}))},getMorePhotosFromUnsplash(e){return Er(this,arguments,(function*({commit:e,getters:t,state:n}){const{list:r}=n,{getNextParams:i}=t;e(Mr,{pending:!0});try{const{results:t}=yield i.query?_r.getPhotos(i):_r.getPopularPhoto(i);e(Mr,Lr({list:r.concat(t),pending:!1},i))}catch(o){L.Z.setLogForError(o)}}))},getPhotosFromPexels(e){return Er(this,arguments,(function*({commit:e},t={}){e(Mr,{pending:!0,list:[]}),t.perPage||(t.perPage=Or);try{const{results:n}=yield t.query?hr.getPhotos(t):hr.getCuratedPhoto(t);e(Mr,Lr({list:n,page:1,pending:!1},t))}catch(n){L.Z.setLogForError(n)}}))},getMorePhotosFromPexels(e){return Er(this,arguments,(function*({commit:e,getters:t,state:n}){const{list:r}=n,{getNextParams:i}=t;e(Mr,{pending:!0});try{const{results:t}=yield i.query?hr.getPhotos(i):hr.getCuratedPhoto(i);e(Mr,Lr({list:r.concat(t),pending:!1},i))}catch(o){L.Z.setLogForError(o)}}))}},jr={[Mr](e,t){const n=t||$r(),r=Object.keys(n);r.forEach((t=>{t in e&&(e[t]=n[t])}))},[Ar](e,t){e.totalPages=t}},Br={getPhotos(e){return e.list},getCurrentPagePhotos(e){const{page:t,list:n,perPage:r}=e;return n.slice((t-1)*r)},getNextParams(e){const{query:t,page:n,perPage:r}=e;return{query:t,perPage:r,page:n+1}}};var Rr={namespaced:!0,state:$r,getters:Br,mutations:jr,actions:Fr},Hr=n(23579);const Ur="UPDATE_shadowEffect",Wr="UPDATE_shadowProps",Vr="UPDATE_shadowStyles",Gr="SET_shadowEffectState",qr="SET_srcObj",Kr="SET_srcState",Yr="SET_old",Xr={[Ur](e,t){const{layerInfo:n,payload:r}=t,{pageIndex:i,layerIndex:o,subLayerIdx:s}=n;-1!==i&&-1!==o&&("undefined"!==typeof s&&-1!==s?Object.assign(e.pages[i].config.layers[o].layers[s].styles.shadow.effects,r):Object.assign(e.pages[i].config.layers[o].styles.shadow.effects,r))},[Gr](e,t){const{layerInfo:n,payload:r}=t,{pageIndex:i,layerIndex:o,subLayerIdx:s}=n;if(-1!==i&&-1!==o)if("undefined"!==typeof s&&-1!==s){const t=e.pages[i].config.layers[o].layers[s].styles.shadow;t?Object.assign(t,r):e.pages[i].config.layers[o].layers[s].styles.shadow=r}else Object.assign(e.pages[i].config.layers[o].styles.shadow,r)},[Wr](e,t){const{layerInfo:n,payload:r}=t,{pageIndex:i,layerIndex:o,subLayerIdx:s}=n;if(-1!==i&&-1!==o)if("undefined"!==typeof s&&-1!==s){const t=e.pages[i].config.layers[o].layers[s].styles.shadow;Object.assign(t,r)}else Object.assign(e.pages[i].config.layers[o].styles.shadow,r)},[Vr](e,t){const{layerInfo:n,payload:r}=t,{pageIndex:i,layerIndex:o,subLayerIdx:s}=n;if(-1!==i&&-1!==o)if("undefined"!==typeof s&&-1!==s){const t=e.pages[i].config.layers[o].layers[s].styles.shadow.styles;Object.assign(t,r)}else Object.assign(e.pages[i].config.layers[o].styles.shadow.styles,r)},[qr](e,t){const{layerInfo:n,srcObj:r}=t,{pageIndex:i,layerIndex:o,subLayerIdx:s}=n;if(-1!==i&&-1!==o)if("undefined"!==typeof s&&-1!==s){const t=e.pages[i].config.layers[o].layers[s].styles.shadow.srcObj;Object.assign(t,r)}else Object.assign(e.pages[i].config.layers[o].styles.shadow.srcObj,r)},[Kr](e,t){const{layerInfo:{pageIndex:n,layerIndex:r,subLayerIdx:i},effect:o,effects:s,layerSrcObj:a,shadowSrcObj:l,layerState:c}=t;if(-1===n||-1===r)return;let d;d="undefined"!==typeof i&&-1!==i?e.pages[n].config.layers[r].layers[i]:e.pages[n].config.layers[r],d.styles.shadow.srcState?Object.assign(d.styles.shadow.srcState,{effect:o,effects:s,layerSrcObj:a,shadowSrcObj:l,layerState:c}):d.styles.shadow.srcState={effect:o,effects:s,layerSrcObj:a,shadowSrcObj:l,layerState:c}},[Yr](e,t){const{pageIndex:n,layerIndex:r,subLayerIdx:i}=t;if(-1===n||-1===r)return;let o;o="undefined"!==typeof i&&-1!==i?e.pages[n].config.layers[r].layers[i]:e.pages[n].config.layers[r],o.styles.shadow.old={currentEffect:o.styles.shadow.currentEffect,effects:T.Z.deepCopy(o.styles.shadow.effects)}}};var Qr=Xr,Jr=n(89995),ei=n(82289),ti=n(56556),ni=n(38058),ri=n(77891),ii=Object.defineProperty,oi=Object.getOwnPropertySymbols,si=Object.prototype.hasOwnProperty,ai=Object.prototype.propertyIsEnumerable,li=(e,t,n)=>t in e?ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ci=(e,t)=>{for(var n in t||(t={}))si.call(t,n)&&li(e,n,t[n]);if(oi)for(var n of oi(t))ai.call(t,n)&&li(e,n,t[n]);return e},di=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),ui={getToken(){return Gi.getters["user/getToken"]},getLocale(){return wt.Z.global.locale},getUserId(){return Gi.getters["user/getUserId"]},getTeamId(){return Gi.getters["user/getTeamId"]},sendApi(e,t){return di(this,null,(function*(){return yield V.Z.requestWithRetry((()=>(0,j.Z)(e,{method:"POST",data:t})))}))},getBrands(e,t){return di(this,null,(function*(){return yield this.sendApi("/list-brand",{token:null!=e?e:this.getToken(),team_id:null!=t?t:this.getTeamId()})}))},getLogos(e,t,n){return di(this,arguments,(function*(e,t,n,r={}){return yield this.sendApi("/list-logo",ci({token:null!=t?t:this.getToken(),team_id:null!=n?n:this.getTeamId(),brand_id:e},r))}))},getPalettes(e,t,n){return di(this,arguments,(function*(e,t,n,r={}){return yield this.sendApi("/list-palette",ci({token:null!=t?t:this.getToken(),team_id:null!=n?n:this.getTeamId(),brand_id:e},r))}))},getFonts(e,t){return di(this,arguments,(function*(e,t,n={}){return yield this.sendApi("/list-asset",ci({token:null!=e?e:this.getToken(),team_id:null!=t?t:this.getTeamId(),type:"font"},n))}))},getAsset(e,t,n,r){return di(this,null,(function*(){return yield this.sendApi("/list-asset",{token:null!=n?n:this.getToken(),team_id:null!=r?r:this.getTeamId(),type:e,asset_list:t})}))},getFont(e,t,n){return di(this,null,(function*(){return yield this.getAsset("font",e,t,n)}))},getLogo(e,t,n){return di(this,null,(function*(){return yield this.getAsset("logo",e,t,n)}))},deleteAsset(e,t,n,r,i){return di(this,null,(function*(){return yield this.sendApi("/update-asset",{type:e,token:null!=n?n:this.getToken(),locale:null!=r?r:this.getLocale(),team_id:null!=i?i:this.getTeamId(),update_type:"delete",target:1,src_asset:t})}))},deleteFont(e,t,n,r){return di(this,null,(function*(){return yield this.deleteAsset("font",e,t,n,r)}))},deleteLogo(e,t,n,r){return di(this,null,(function*(){return yield this.deleteAsset("logo",e,t,n,r)}))},getTestingBrands(e){return di(this,null,(function*(){return new Promise((e=>{setTimeout((()=>e([ri.Z.createDefaultBrand()])),1e3)}))}))},updateBrands(e,t,n,r){return di(this,null,(function*(){return r.type?yield V.Z.requestWithRetry((()=>{const i={method:"POST",data:{token:e,locale:t,team_id:n}};return Object.assign(i.data,r),(0,j.Z)("/update-brand",i)})):{data:{flag:0}}}))},updateApiWrapper(e,t,n,r,i){return di(this,null,(function*(){t();try{const t=yield e();if(0!==t.data.flag)return n(),r(t.data.msg),!1;i&&i(t.data)}catch(o){return L.Z.setLogForError(o),n(),r(o.message),!1}return!0}))},updateBrandsWrapper(e,t,n,r,i){return di(this,null,(function*(){return yield this.updateApiWrapper((()=>di(this,null,(function*(){return yield this.updateBrands(this.getToken(),this.getLocale(),this.getUserId(),e)}))),t,n,r,i)}))}},gi=n(58559),pi=Object.defineProperty,hi=Object.defineProperties,mi=Object.getOwnPropertyDescriptors,yi=Object.getOwnPropertySymbols,fi=Object.prototype.hasOwnProperty,bi=Object.prototype.propertyIsEnumerable,vi=(e,t,n)=>t in e?pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wi=(e,t)=>{for(var n in t||(t={}))fi.call(t,n)&&vi(e,n,t[n]);if(yi)for(var n of yi(t))bi.call(t,n)&&vi(e,n,t[n]);return e},Ni=(e,t)=>hi(e,mi(t)),Si=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const xi=ri.Z.createNullBrand(),Pi=()=>{(0,Lt.h4)({group:"error",text:`${wt.Z.global.t("NN0242")}`})},Ii=()=>({brands:[],currentBrandId:"",isDefaultSelected:!1,isBrandsLoading:!1,isLogosLoading:!1,isPalettesLoading:!1,isFontsLoading:!1,selectedTab:ri.Z.getTabKeys()[0],fonts:[],fetchedFonts:{},logosPageIndex:0,palettesPageIndex:0,fontsPageIndex:0,isSettingsOpen:!1,isMobileConfirmOpen:!1,mobileDeleteBuffer:void 0,editorViewLogos:{}});function _i(e){return e&&"logo-private"===e.type?e.assetId.toString():""}function ki(e){if("NOT_SUBSCRIBED"===e)return gi.Z.errorHandler(e),void Gi.commit("brandkit/SET_isSettingsOpen",!1);Pi()}const Zi=Ii(),Ci={getBrands(e){return e.brands},getCurrentBrandId(e){return e.currentBrandId},getCurrentBrand(e){var t,n;return null!=(n=null!=(t=ri.Z.findBrand(e.brands,e.currentBrandId))?t:e.brands[0])?n:xi},getIsDefaultSelected(e){return e.isDefaultSelected},getIsBrandsLoading(e){return e.isBrandsLoading},getIsLogosLoading(e){return e.isLogosLoading},getIsPalettesLoading(e){return e.isPalettesLoading},getIsFontsLoading(e){return e.isFontsLoading},getSelectedTab(e){return e.selectedTab},getLogos(e){return t=>{const n=ri.Z.findBrand(e.brands,t);return n?n.logos:[]}},getPalettes(e){return t=>{const n=ri.Z.findBrand(e.brands,t);return n?n.colorPalettes:[]}},getFonts(e){return e.fonts},getLogosPageIndex(e){return e.logosPageIndex},getPalettesPageIndex(e){return e.palettesPageIndex},getFontsPageIndex(e){return e.fontsPageIndex},getFontUrlMap(e){return t=>e.fetchedFonts[t]},getIsSettingsOpen(e){return e.isSettingsOpen},getIsMobileConfirmOpen(e){return e.isMobileConfirmOpen},getMobileDeleteBuffer(e){return e.mobileDeleteBuffer},getEditorViewLogos:e=>t=>t?e.editorViewLogos[t]:e.editorViewLogos},zi={fetchBrands(e){return Si(this,arguments,(function*({commit:e}){var t;try{const{data:n}=yield ui.getBrands();if(0!==n.flag)throw new Error("fetch brands request failed");const r=n.brands;e("SET_brands",r),e("SET_currentBrand",null!=(t=r[0])?t:{id:""})}catch(n){L.Z.setLogForError(n),Pi()}}))},fetchLogos(e){return Si(this,arguments,(function*({commit:e,state:t}){try{const{data:n}=yield ui.getLogos(t.currentBrandId);if(0!==n.flag)throw new Error("fetch brands request failed");const r=n.logos.map((e=>ri.Z.apiLogo2IBrandLogo(e)));if(e("SET_logosPageIndex",n.next_page),e("SET_logos",{brandId:t.currentBrandId,logos:r}),!Gi.getters["user/isAdmin"]){const n={};for(const e of r)n[e.asset_index]=e.signed_url;e("SET_editorViewLogos",Object.assign({},t.editorViewLogos,n))}}catch(n){L.Z.setLogForError(n),Pi()}}))},fetchMoreLogos(e){return Si(this,arguments,(function*({commit:e,state:t,getters:n}){const r=n.getLogosPageIndex;if(!(r<0))try{const{data:i}=yield ui.getLogos(t.currentBrandId,void 0,void 0,{page_index:r});if(0!==i.flag)throw new Error("fetch brands request failed");const o=i.logos.map((e=>ri.Z.apiLogo2IBrandLogo(e)));if(e("SET_logosPageIndex",i.next_page),e("SET_logos",{brandId:t.currentBrandId,logos:n.getLogos(t.currentBrandId).concat(o)}),!Gi.getters["user/isAdmin"]){const n={};for(const e of o)n[e.asset_index]=e.signed_url;e("SET_editorViewLogos",Object.assign({},t.editorViewLogos,n))}}catch(i){L.Z.setLogForError(i),Pi()}}))},fetchPalettes(e){return Si(this,arguments,(function*({commit:e,state:t}){try{const{data:n}=yield ui.getPalettes(t.currentBrandId);if(0!==n.flag)throw new Error("fetch brands request failed");const r=n.palettes;e("SET_palettes",{brandId:t.currentBrandId,palettes:r})}catch(n){L.Z.setLogForError(n),Pi()}}))},fetchFonts(e){return Si(this,arguments,(function*({commit:e}){try{const{data:t}=yield ui.getFonts();if(0!==t.flag)throw new Error("fetch fonts request failed");const n=t.data.font.content.map((e=>ri.Z.apiFont2IBrandFont(e)));if(e("SET_fontsPageIndex",t.next_page),e("SET_fonts",n),!Gi.getters["user/isAdmin"]){const t={};for(const e of n)t[e.asset_index]=e.signed_url;e("UPDATE_setFetchedFont",t)}}catch(t){L.Z.setLogForError(t),Pi()}}))},fetchMoreFonts(e){return Si(this,arguments,(function*({commit:e,getters:t}){const n=t.getFontsPageIndex;if(!(n<0))try{const{data:r}=yield ui.getFonts(void 0,void 0,{page_index:n});if(0!==r.flag)throw new Error("fetch fonts request failed");const i=r.data.font.content.map((e=>ri.Z.apiFont2IBrandFont(e)));if(e("SET_fontsPageIndex",r.next_page),e("SET_fonts",t.getFonts.concat(i)),!Gi.getters["user/isAdmin"]){const t={};for(const e of i)t[e.asset_index]=e.signed_url;e("UPDATE_setFetchedFont",t)}}catch(r){L.Z.setLogForError(r),Pi()}}))},setBrandName(e,t){return Si(this,arguments,(function*({commit:e},t){const{brand:n,newName:r}=t,i=n.name;ui.updateBrandsWrapper({type:"brand",update_type:"rename",src:n.id,target:r},(()=>{n.name=r}),(()=>{n.name=i}),ki)}))},createBrand(e,t){return Si(this,arguments,(function*({commit:e},t){const n=ri.Z.createDefaultBrand();t&&(n.name=t),ui.updateBrandsWrapper({type:"brand",update_type:"create",src:n.id,target:n.name},(()=>{e("UPDATE_addBrand",n),e("SET_currentBrand",n)}),(()=>{e("UPDATE_deleteBrand",n)}),ki,(t=>{const r=t.createTime;e("UPDATE_replaceBrandTime",{brand:n,createTime:r})}))}))},copyBrand(e,t){return Si(this,arguments,(function*({commit:e},t){const n=T.Z.deepCopy(t);n.id="new_"+T.Z.generateAssetId(),n.createTime=(new Date).toISOString(),ui.updateBrandsWrapper({type:"brand",update_type:"copy",src:t.id},(()=>{e("UPDATE_addBrand",n)}),(()=>{e("UPDATE_deleteBrand",n)}),ki,(t=>{e("UPDATE_replaceBrand",{id:n.id,brand:t.data})}))}))},removeBrand(e,t){return Si(this,arguments,(function*({commit:e,state:t},n){const r=t.brands.length<=1,i=yield ui.updateBrandsWrapper({type:"brand",update_type:"delete",src:n.id},(()=>{r?e("SET_isBrandsLoading",!0):e("UPDATE_deleteBrand",n)}),(()=>{r?e("SET_isBrandsLoading",!1):e("UPDATE_addBrand",n)}),ki);return r&&i}))},removeLogo(e,t){return Si(this,arguments,(function*({commit:e},t){const n=ri.Z.findBrand(Zi.brands,Zi.currentBrandId);n&&ui.updateApiWrapper((()=>Si(this,null,(function*(){return yield ui.deleteLogo(t.asset_index.toString())}))),(()=>{e("UPDATE_deleteLogo",{brand:n,logo:t})}),(()=>{e("UPDATE_addLogo",{brand:n,logo:t})}),ki)}))},removePalette(e,t){return Si(this,arguments,(function*({commit:e},t){const n=ri.Z.findBrand(Zi.brands,Zi.currentBrandId);n&&ui.updateBrandsWrapper({type:"palette",update_type:"delete",src:t.id},(()=>{e("UPDATE_deletePalette",{brand:n,palette:t})}),(()=>{e("UPDATE_addPalette",{brand:n,palette:t})}),ki)}))},createPalette(e){return Si(this,arguments,(function*({commit:e}){const t=ri.Z.findBrand(Zi.brands,Zi.currentBrandId);if(!t)return;const n=ri.Z.createDefaultPalette();return ui.updateBrandsWrapper({type:"palette",update_type:"create",src:`${t.id},${n.id},${n.colors[0].id}`},(()=>{e("UPDATE_addPalette",{brand:t,palette:n})}),(()=>{e("UPDATE_deletePalette",{brand:t,palette:n})}),ki,(r=>{const i=r.createTime;e("UPDATE_replacePaletteTime",{brand:t,palette:n,createTime:i})})),n.id}))},setPaletteName(e,t){return Si(this,arguments,(function*({commit:e},t){const{palette:n,newName:r}=t,i=n.name;ui.updateBrandsWrapper({type:"palette",update_type:"rename",src:n.id,target:r},(()=>{n.name=r}),(()=>{n.name=i}),ki)}))},removeColor(e,t){return Si(this,arguments,(function*({state:e,commit:t},n){const r=ri.Z.findBrand(e.brands,e.currentBrandId);r&&ui.updateBrandsWrapper({type:"color",update_type:"delete",src:n.color.id},(()=>{t("UPDATE_deleteColor",wi({brand:r},n))}),(()=>{t("UPDATE_addColor",wi({brand:r},n))}),ki)}))},createColor(e,t){return Si(this,arguments,(function*({state:e,commit:t},n){const r=ri.Z.findBrand(e.brands,e.currentBrandId);if(!r)return;const i=ri.Z.getColorPalette(r.colorPalettes,n);if(!i)return;const o=ri.Z.duplicateEnd(i.colors);ui.updateBrandsWrapper({type:"color",update_type:"create",src:`${i.id},${o.id}`,target:o.color},(()=>{t("UPDATE_addColor",{brand:r,paletteId:n,color:o})}),(()=>{t("UPDATE_deleteColor",{brand:r,paletteId:n,color:o})}),ki,(e=>{const n=e.createTime;t("UPDATE_replaceColorTime",{brand:r,palette:i,color:o,createTime:n})}))}))},updateColor(e,t){return Si(this,arguments,(function*({commit:e},t){return yield ui.updateBrandsWrapper({type:"color",update_type:"update",src:t.id,target:t.color},(()=>{}),(()=>{}),ki)}))},updateColorTemp(e,t){return Si(this,arguments,(function*({state:e,commit:t},n){const r=ri.Z.findBrand(e.brands,e.currentBrandId);r&&t("UPDATE_setColor",wi({brand:r},n))}))},removeFont(e,t){return Si(this,arguments,(function*({commit:e},t){ui.updateApiWrapper((()=>Si(this,null,(function*(){return yield ui.deleteFont(t.asset_index.toString())}))),(()=>{e("UPDATE_deleteFont",t)}),(()=>{e("UPDATE_addFont",t)}),ki)}))},updateTextStyle(e,t){return Si(this,arguments,(function*({state:e,commit:t},n){const r=ri.Z.findBrand(e.brands,e.currentBrandId);if(!r)return;ri.Z.setDefaultFontInfo(r,n);const i=ri.Z.getUpdateStyleAPIEncoding(n.style),o=ri.Z.getCurrentValues(r,n);yield ui.updateBrandsWrapper({type:"text",update_type:"update",src:`${r.id},${n.type}`,target:i},(()=>{t("UPDATE_updateTextStyle",{brand:r,type:n.type,style:Ni(wi({},n.style),{isDefault:!1})})}),(()=>{t("UPDATE_updateTextStyle",{brand:r,type:n.type,style:o})}),ki)}))},refreshFontAsset(e,t){return Si(this,arguments,(function*({commit:e},t){const n="string"===typeof t?t:t.asset_index.toString();let r;r="string"===typeof t?ri.Z.getFont(t):t;const{data:i}=yield ui.getFont(n);if(0===i.flag){const t=i.url_map[n];return r&&e("UPDATE_replaceFontUrl",{font:r,urlMap:t}),e("UPDATE_addFetchedFont",{index:n,urlMap:t}),t}return{}}))},refreshLogoAsset(e,t){return Si(this,arguments,(function*({commit:e},t){const n=t.logoAssetIndex.toString(),{data:r}=yield ui.getLogo(n);if(0===r.flag){const i=r.url_map[n];return e("UPDATE_replaceLogoUrl",{brand:t.brand,assetIndex:n,urlMap:i}),i}return{}}))},updatePageFonts(e,t){return Si(this,arguments,(function*({dispatch:e},{pageIndex:t}){const{layers:n}=Gi.state.pages[t].config,r=new Set;for(const i of n){const e="group"===i.type?i.layers:[i];for(const t of e)if("text"===t.type){const e=t.paragraphs;for(const t of e){t.styles.font&&"private"===t.styles.type&&r.add(t.styles.assetId);for(const e of t.spans)e.styles.font&&"private"===e.styles.type&&r.add(e.styles.assetId)}}}r.delete(""),yield e("updateFonts",{assetSet:r})}))},updateFonts(e,t){return Si(this,arguments,(function*({commit:e},{assetSet:t}){const n=p().difference(Array.from(t),Object.keys(Zi.fetchedFonts)),r=n.join(",");if(0===r.length)return;const{data:i}=yield ui.getFont(r);0===i.flag&&e("UPDATE_setFetchedFont",i.url_map)}))},updatePageLogos(e,t){return Si(this,arguments,(function*({dispatch:e},{pageIndex:t}){const{layers:n,backgroundImage:r}=Gi.state.pages[t].config,i=new Set;i.add(_i(r.config.srcObj));for(const o of n){const e="group"===o.type?o.layers:[o];for(const t of e)switch(t.type){case"image":i.add(_i(t.srcObj));break;case"frame":for(const e of t.clips)i.add(_i(e.srcObj));break}}i.delete(""),yield e("updateLogos",{assetSet:i})}))},updateLogos(e,t){return Si(this,arguments,(function*({commit:e},{assetSet:t}){const n=U.Z.getToken();t=p().difference(Array.from(t),Object.keys(Zi.editorViewLogos)),t=Array.from(t).join(","),0!==t.length&&(yield V.Z.requestWithRetry((()=>U.Z.getAllAssets(n,{asset_list:t}))).then((t=>{e("SET_editorViewLogos",Object.assign({},Zi.editorViewLogos,t.data.url_map))})))}))}},Ti={SET_brands(e,t){e.brands=t},SET_logos(e,t){const n=ri.Z.findBrand(e.brands,t.brandId);n&&(n.logos=t.logos)},SET_palettes(e,t){const n=ri.Z.findBrand(e.brands,t.brandId);n&&(n.colorPalettes=t.palettes)},SET_currentBrand(e,t){e.currentBrandId=t.id},SET_isDefaultSelected(e,t){e.isDefaultSelected=t},SET_isBrandsLoading(e,t){e.isBrandsLoading=t},SET_isLogosLoading(e,t){e.isLogosLoading=t},SET_isPalettesLoading(e,t){e.isPalettesLoading=t},SET_isFontsLoading(e,t){e.isFontsLoading=t},SET_selectedTab(e,t){e.selectedTab=t},SET_fonts(e,t){e.fonts=t},SET_logosPageIndex(e,t){e.logosPageIndex=t},SET_palettesPageIndex(e,t){e.palettesPageIndex=t},SET_fontsPageIndex(e,t){e.fontsPageIndex=t},SET_isSettingsOpen(e,t){e.isSettingsOpen=t},SET_isMobileConfirmOpen(e,t){e.isMobileConfirmOpen=t},SET_mobileDeleteBuffer(e,t){e.mobileDeleteBuffer=t},SET_editorViewLogos(e,t){e.editorViewLogos=t},UPDATE_addBrand(e,t){const n=ri.Z.findInsertIndex(e.brands,t,!0);e.brands=[...e.brands.slice(0,n),t,...e.brands.slice(n)]},UPDATE_deleteBrand(e,t){const n=e.brands.findIndex((e=>e.id===t.id));n<0||(e.brands=[...e.brands.slice(0,n),...e.brands.slice(n+1)],e.currentBrandId===t.id&&e.brands.length>0&&(e.currentBrandId=e.brands[0].id))},UPDATE_replaceBrand(e,t){const n=e.brands.findIndex((e=>e.id===t.id));n<0||(e.brands=[...e.brands.slice(0,n),t.brand,...e.brands.slice(n+1)])},UPDATE_replaceBrandTime(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);n&&(n.createTime=t.createTime)},UPDATE_addLogo(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=ri.Z.findInsertIndex(n.logos,t.logo);n.logos=[...n.logos.slice(0,r),t.logo,...n.logos.slice(r)]},UPDATE_deleteLogo(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=n.logos.findIndex((e=>e.id===t.logo.id));r<0||(n.logos=[...n.logos.slice(0,r),...n.logos.slice(r+1)])},UPDATE_replaceLogo(e,t){const n=ri.Z.findBrand(e.brands,t.brandId);if(!n)return;const r=n.logos.findIndex((e=>e.id===t.id));r<0||(n.logos=[...n.logos.slice(0,r),t.logo,...n.logos.slice(r+1)])},UPDATE_addPalette(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=ri.Z.findInsertIndex(n.colorPalettes,t.palette);n.colorPalettes=[...n.colorPalettes.slice(0,r),t.palette,...n.colorPalettes.slice(r)]},UPDATE_deletePalette(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=n.colorPalettes.findIndex((e=>e.id===t.palette.id));r<0||(n.colorPalettes=[...n.colorPalettes.slice(0,r),...n.colorPalettes.slice(r+1)])},UPDATE_replacePaletteTime(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=n.colorPalettes.find((e=>e.id===t.palette.id));r&&(r.createTime=t.createTime)},UPDATE_addColor(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=n.colorPalettes.find((e=>e.id===t.paletteId));if(!r)return;const i=ri.Z.findInsertIndex(r.colors,t.color,!0);r.colors=[...r.colors.slice(0,i),t.color,...r.colors.slice(i)]},UPDATE_deleteColor(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=n.colorPalettes.find((e=>e.id===t.paletteId));if(!r)return;const i=r.colors.findIndex((e=>e.id===t.color.id));i<0||(r.colors=[...r.colors.slice(0,i),...r.colors.slice(i+1)])},UPDATE_setColor(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=n.colorPalettes.find((e=>e.id===t.paletteId));if(!r)return;const i=r.colors.findIndex((e=>e.id===t.id));if(i<0)return;const o=r.colors[i];r.colors=[...r.colors.slice(0,i),Ni(wi({},o),{color:t.color}),...r.colors.slice(i+1)]},UPDATE_replaceColorTime(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=n.colorPalettes.find((e=>e.id===t.paletteId));if(!r)return;const i=r.colors.findIndex((e=>e.id===t.color.id));if(i<0)return;const o=r.colors[i];o.createTime=t.createTime},UPDATE_deleteFont(e,t){const n=e.fonts.findIndex((e=>e.id===t.id));n<0||(e.fonts=[...e.fonts.slice(0,n),...e.fonts.slice(n+1)])},UPDATE_addFont(e,t){const n=ri.Z.findInsertIndex(e.fonts,t);e.fonts=[...e.fonts.slice(0,n),t,...e.fonts.slice(n)]},UPDATE_replaceFont(e,t){const n=e.fonts.findIndex((e=>e.id===t.id));n<0||(e.fonts=[...e.fonts.slice(0,n),t.font,...e.fonts.slice(n+1)])},UPDATE_replaceFontUrl(e,t){var n;const r=e.fonts.find((e=>e.id===t.font.id));if(r&&r.signed_url)for(const i of Object.keys(r.signed_url))r.signed_url[i]=null!=(n=t.urlMap[i])?n:""},UPDATE_replaceLogoUrl(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=n.logos.find((e=>e.asset_index.toString()===t.assetIndex));r&&r.signed_url&&(r.signed_url=t.urlMap)},UPDATE_addFetchedFont(e,t){e.fetchedFonts[t.index]=t.urlMap},UPDATE_setFetchedFont(e,t){Object.assign(e.fetchedFonts,t)},UPDATE_updateTextStyle(e,t){const n=ri.Z.findBrand(e.brands,t.brand.id);if(!n)return;const r=n.textStyleSetting[`${t.type}Style`];if(r)for(const[i,o]of Object.entries(t.style))r[i]=o}};var Li={namespaced:!0,state:Zi,getters:Ci,mutations:Ti,actions:zi},Ei=Object.defineProperty,Di=Object.defineProperties,Oi=Object.getOwnPropertyDescriptors,Mi=Object.getOwnPropertySymbols,Ai=Object.prototype.hasOwnProperty,$i=Object.prototype.propertyIsEnumerable,Fi=(e,t,n)=>t in e?Ei(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ji=(e,t)=>{for(var n in t||(t={}))Ai.call(t,n)&&Fi(e,n,t[n]);if(Mi)for(var n of Mi(t))$i.call(t,n)&&Fi(e,n,t[n]);return e},Bi=(e,t)=>Di(e,Oi(t));const Ri=()=>({sessionId:T.Z.generateRandomString(12),pages:[{config:N.Z.newPage({}),modules:{snapUtils:new ei.Z(-1)}}],designId:"",groupId:"",groupType:-1,assetId:"",assetIndex:-1,exportIds:"",folderInfo:{isRoot:!0,parentFolder:"",path:"root"},name:"",currSidebarPanelType:$e.iI.template,mobileSidebarPanelOpen:!1,showColorSlips:!1,currFunctionPanelType:$e.UJ.none,pageScaleRatio:100,pinchScaleRatio:100,isSettingScaleRatio:!1,middlemostPageIndex:0,currActivePageIndex:-1,currFocusPageIndex:0,currHoveredPageIndex:-1,lastSelectedLayerIndex:-1,clipboard:[],currSelectedInfo:{pageIndex:-1,index:-1,layers:[],types:new Set,id:""},currDraggedPhoto:{srcObj:{type:"",assetId:"",userId:""},styles:{width:0,height:0},isTransparent:!1,isPreview:!1,previewSrc:""},currSubSelectedInfo:{index:-1,type:""},isColorPanelOpened:!1,currSelectedResInfo:{},asset:{},textInfo:{heading:[],subheading:[],body:[]},isMoving:!1,showRuler:"true"===localStorage.getItem("showRuler"),showGuideline:!0,lockGuideline:!1,isDraggingGuideline:!1,themes:[],homeTags:[],shuffledThemesIds:[],hasCopiedFormat:!1,inGestureToolMode:!1,isMobile:T.Z.getWidth()<=768,isLargeDesktop:T.Z.getWidth()>=1440,isGlobalLoading:!1,useMobileEditor:!1,_3dEnabledPageIndex:-1,enalbleComponentLog:!1,inScreenshotPreviewRoute:!1,cursor:"",isPageScaling:!1,isGettingDesign:!1,showGlobalErrorModal:!1,newTemplateShownMode:!0}),Hi=Ri(),Ui={getPage(e){return t=>e.pages[t]?e.pages[t].config:void 0},getPageState(e){return t=>e.pages[t]},getPages(e){return e.pages.map((e=>e.config))},getPagesState(e){return e.pages},getPagesName(e){return e.name},getPagesLength(e){return e.pages.length},getDesignId(e){return e.designId},getAssetId(e){return e.assetId},getAssetIndex(e){return e.assetIndex},getGroupId(e){return e.groupId},getGroupType(e){return e.groupType},getFolderInfo(e){return e.folderInfo},getPageSize(e){return t=>{const{width:n,height:r,physicalWidth:i,physicalHeight:o,unit:s}=e.pages[t].config;return{width:n,height:r,physicalWidth:i,physicalHeight:o,unit:s}}},getCurrSidebarPanelType(e){return e.currSidebarPanelType},getMobileSidebarPanelOpen(e){return e.mobileSidebarPanelOpen},getCurrFunctionPanelType(e){return e.currFunctionPanelType},getPageScaleRatio(e){return e.pageScaleRatio},getIsSettingScaleRatio(e){return e.isSettingScaleRatio},getLayer(e){return(t,n)=>{var r,i;const o=null==(r=e.pages[t])?void 0:r.config;return null!=(i=null==o?void 0:o.layers[n])?i:{}}},getLayers(e){return t=>e.pages[t]?e.pages[t].config.layers:[]},getLayersNum(e){return(t=e.middlemostPageIndex)=>e.pages[t].config.layers.length},getBackgroundImage(e){return t=>e.pages[t].config.backgroundImage},getBackgroundColor(e){return t=>e.pages[t].config.backgroundColor},getMiddlemostPageIndex(e){return e.middlemostPageIndex},getCurrActivePageIndex(e){return e.currActivePageIndex},getCurrFocusPageIndex(e){return e.currFocusPageIndex},getCurrHoveredPageIndex(e){return e.currHoveredPageIndex},getLastSelectedLayerIndex(e){return e.lastSelectedLayerIndex},getClipboard(e){return e.clipboard},getCurrSelectedInfo(e){return e.currSelectedInfo},getCurrSubSelectedInfo(e){return e.currSubSelectedInfo},getCurrSelectedPageIndex(e){return e.currSelectedInfo.pageIndex},getCurrSelectedIndex(e){return e.currSelectedInfo.index},getCurrSelectedLayers(e){return e.currSelectedInfo.layers},getCurrSelectedTypes(e){return e.currSelectedInfo.types},getCurrSelectedResInfo(e){return e.currSelectedResInfo},getAsset(e){return t=>e.asset[t]},getTextInfo(e){return e.textInfo},getShowRuler(e){return e.showRuler},getShowGuideline(e){return e.showGuideline},getLockGuideline(e){return e.lockGuideline},getIsDraggingGuideline(e){return e.isDraggingGuideline},getThemes(e){return e.themes},getMainHiddenThemes(e){return e.themes.filter((e=>0===e.mainHidden))},getEditThemes(e){return e.themes.filter((e=>0===e.editHidden))},getHomeTags(e){return e.homeTags},getShuffledThemesIds(e){return e.shuffledThemesIds},getHasCopiedFormat(e){return e.hasCopiedFormat},getInGestureToolMode(e){return e.inGestureToolMode},getIsGlobalLoading(e){return e.isGlobalLoading},getUseMobileEditor(e){return e.useMobileEditor},getContentScaleRatio(e){const t=-1===Me.ZP.pageIndex?0:Me.ZP.pageIndex;return e.pages[t].config.contentScaleRatio},get3dEnabledPageIndex(e){return e.useMobileEditor?-1:e._3dEnabledPageIndex},getEnalbleComponentLog(e){return e.enalbleComponentLog},getInScreenshotPreview(e){return e.inScreenshotPreviewRoute},getHasBleed(e){return e.pages.some((e=>e.config.isEnableBleed))},getShowGlobalErrorModal(e){return e.showGlobalErrorModal},getNewTemplateShownMode(e){return e.newTemplateShownMode},getIsMobile(e){return e.isMobile},getIsLargeDesktop(e){return e.isLargeDesktop}},Wi=Bi(ji({SET_STATE(e,t){const n=t||Ri(),r=Object.keys(n);r.forEach((t=>{t in e&&(e[t]=n[t])}))},SET_pages(e,t){if(Oe.Z.reset(),Array.isArray(t)){const n=t.reduce(((e,t)=>(e.push({config:t,modules:{snapUtils:new ei.Z(e.length)}}),e)),[]);e.pages=n}else e.pages=(t.loadDesign?N.Z.newPages(t.pages):t.pages).reduce(((e,t)=>(e.push({config:t,modules:{snapUtils:new ei.Z(e.length)}}),e)),[]),e.groupId=t.groupId||e.groupId,e.groupType=t.groupType||e.groupType,e.exportIds=t.exportIds||e.exportIds;e.middlemostPageIndex=0,e.currActivePageIndex=-1},SET_pageToPos(e,t){e.pages.splice(t.pos,1,{config:t.newPage,modules:{snapUtils:new ei.Z(t.pos)}})},ADD_page(e,t){e.pages.push({config:t,modules:{snapUtils:new ei.Z(e.pages.length)}})},ADD_pages(e,t){e.pages=[...e.pages,...t.map(((t,n)=>({config:t,modules:{snapUtils:new ei.Z(e.pages.length+n)}})))]},ADD_pageToPos(e,t){e.pages.splice(t.pos,0,{config:t.newPage,modules:{snapUtils:new ei.Z(-1)}})},DELETE_page(e,t){e.pages=e.pages.slice(0,t).concat(e.pages.slice(t+1))},SET_pagesName(e,t){e.name=t},SET_pageSize(e,t){e.pages[t.index].config.width=t.width,e.pages[t.index].config.height=t.height,e.pages[t.index].config.physicalWidth=t.physicalWidth,e.pages[t.index].config.physicalHeight=t.physicalHeight,e.pages[t.index].config.unit=t.unit},SET_designId(e,t){e.designId=t},SET_assetId(e,t){e.assetId=t},SET_assetIndex(e,t){e.assetIndex=t},SET_groupId(e,t){e.groupId=t},ADD_exportIds(e,t){const n=e.exportIds.split(",").filter((e=>0!==e.length));n.push(t),n.length>10&&n.shift(),e.exportIds=n.join(",")},SET_groupType(e,t){e.groupType=t},SET_folderInfo(e,t){Object.assign(e.folderInfo,t)},SET_pageDesignId(e,t){e.pages[t.pageIndex].config.designId=t.designId},UPDATE_pageProps(e,t){Object.entries(t.props).forEach((([n,r])=>{e.pages[t.pageIndex].config[n]=r}))},SET_layers(e,t){e.pages[t.pageIndex].config.layers=[...t.newLayers]},SET_currSidebarPanelType(e,t){e.currSidebarPanelType=t},SET_mobileSidebarPanelOpen(e,t){e.mobileSidebarPanelOpen=t},SET_currFunctionPanelType(e,t){e.currFunctionPanelType=t},SET_pageScaleRatio(e,t){e.pageScaleRatio=t},SET_pinchScaleRatio(e,t){e.pinchScaleRatio=t},SET_isSettingScaleRatio(e,t){e.isSettingScaleRatio=t},SET_middlemostPageIndex(e,t){e.middlemostPageIndex=t;const{pageIndex:n}=e.currSelectedInfo;-1===e.currActivePageIndex&&-1===n&&e.currFocusPageIndex!==t&&(e.currFocusPageIndex=t)},SET_currActivePageIndex(e,t){e.currActivePageIndex=t;const{pageIndex:n}=e.currSelectedInfo;-1===n&&e.currFocusPageIndex!==t&&(e.currFocusPageIndex=-1===t?e.middlemostPageIndex:t)},SET_lastSelectedLayerIndex(e,t){e.lastSelectedLayerIndex=t},SET_currHoveredPageIndex(e,t){e.currHoveredPageIndex=t},SET_backgroundColor(e,t){e.pages[t.pageIndex].config.backgroundColor=t.color,e.pages[t.pageIndex].config.backgroundImage.config.srcObj={type:"",userId:"",assetId:""},e.pages[t.pageIndex].config.backgroundImage.config.styles.adjust.halation=0},SET_backgroundImage(e,t){const{pageIndex:n,config:r,bgColorReset:i=!0}=t;Object.assign(e.pages[n].config.backgroundImage.config,r),i&&(e.pages[n].config.backgroundColor="#ffffff")},SET_backgroundImageSrc(e,t){const{pageIndex:n,srcObj:r,previewSrc:i,panelPreviewSrc:o}=t;Object.assign(e.pages[n].config.backgroundImage.config.srcObj,r),i&&(e.pages[n].config.backgroundImage.config.previewSrc=i),o&&(e.pages[n].config.backgroundImage.config.panelPreviewSrc=o),e.pages[n].config.backgroundColor="#ffffff"},SET_backgroundImagePos(e,t){e.pages[t.pageIndex].config.backgroundImage.posX=t.imagePos.x,e.pages[t.pageIndex].config.backgroundImage.posY=t.imagePos.y},SET_backgroundImageStyles(e,t){const{pageIndex:n,styles:r}=t;Object.assign(e.pages[n].config.backgroundImage.config.styles,r)},SET_backgroundImageMode(e,t){e.pages[t.pageIndex].config.backgroundImage.newDisplayMode=t.newDisplayMode},SET_backgroundImageControl(e,t){e.pages[t.pageIndex].config.backgroundImage.config.imgControl=t.imgControl},SET_allBackgroundImageControl(e,t){e.pages.forEach((e=>{e.config.backgroundImage.config.imgControl=t}))},SET_backgroundOpacity(e,t){e.pages[t.pageIndex].config.backgroundImage.config.styles.opacity=t.opacity},REMOVE_background(e,t){e.pages[t.pageIndex].config.backgroundColor="#ffffff",e.pages[t.pageIndex].config.backgroundImage.config.srcObj={type:"",userId:"",assetId:""},e.pages[t.pageIndex].config.backgroundImage.config.styles.opacity=100},SET_pageIsModified(e,{pageIndex:t,modified:n}){e.pages[t].config.modified=n},SET_textInfo(e,t){Object.entries(t).forEach((([t,n])=>{Object.keys(e.textInfo).includes(t)&&Object.assign(e.textInfo,{[t]:n})}))},SET_currDraggedPhoto(e,t){t.srcObj&&(e.currDraggedPhoto.srcObj=ji(ji({},e.currDraggedPhoto.srcObj),t.srcObj)),t.styles&&(e.currDraggedPhoto.styles=ji(ji({},e.currDraggedPhoto.styles),t.styles)),"undefined"!==typeof t.isPreview&&(e.currDraggedPhoto.isPreview=t.isPreview),t.previewSrc&&(e.currDraggedPhoto.previewSrc=t.previewSrc),"undefined"!==typeof t.isTransparent&&(e.currDraggedPhoto.isTransparent=t.isTransparent)},SET_hasCopiedFormat(e,t){e.hasCopiedFormat=t,e.cursor=t?`url(${n(91183)}) 2 2, pointer`:""},ADD_newLayers(e,t){t.layers.forEach((n=>{e.pages[t.pageIndex].config.layers.push(n)}))},ADD_layersToPos(e,t){e.pages[t.pageIndex].config.layers.splice(t.pos,0,...t.layers)},DELETE_layer(e,t){e.pages[t.pageIndex].config.layers.splice(t.layerIndex,1)},DELETE_subLayer(e,t){const{pageIndex:n,primaryIndex:r,subIndex:i}=t,{currSelectedInfo:o,pages:s}=e,a=s[n].config.layers[r];a.layers.splice(i,1)},REPLACE_layer(e,t){const{pageIndex:n,layerIndex:r,layer:i}=t;e.pages[n].config.layers.splice(r,1,i)},UPDATE_layerProps(e,t){const{pageIndex:n,layerIndex:r}=t;Object.entries(t.props).forEach((([n,r])=>{e.pages[t.pageIndex].config.layers[t.layerIndex]&&(e.pages[t.pageIndex].config.layers[t.layerIndex][n]=r)}))},UPDATE_subLayerProps(e,t){const n=e.pages[t.pageIndex].config.layers[t.layerIndex];if(!n||!n.layers)return;const r=n.layers[t.targetIndex];Object.entries(t.props).forEach((([e,t])=>{r[e]=t}))},UPDATE_frameLayerProps(e,t){const{pageIndex:n,layerIndex:r,targetIndex:i,props:o,preprimaryLayerIndex:s}=t;let a;if(-1!==s?e.pages[n].config.layers[s].type===$e.F5.group&&(a=e.pages[n].config.layers[s].layers[r]):a=e.pages[n].config.layers[r],a&&a.type===$e.F5.frame){const e=a.clips[i];Object.entries(o).forEach((([t,n])=>{e[t]=n}))}},UPDATE_groupLayerProps(e,t){Object.entries(t.props).forEach((([t,n])=>{e.pages[e.middlemostPageIndex].config.layers[e.currSelectedInfo.index].layers.forEach((e=>{e[t]=n}))}))},UPDATE_selectedLayerProps(e,t){Object.entries(t.props).forEach((([n,r])=>{e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index].layers[t.layerIndex][n]=r}))},UPDATE_textProps(e,t){e.pages[t.pageIndex].config.layers[t.layerIndex].paragraphs=t.paragraphs},UPDATE_paragraphStyles(e,t){Object.entries(t.styles).forEach((([n,r])=>{e.pages[t.pageIndex].config.layers[t.layerIndex].paragraphs[t.pIndex].styles[n]=r}))},UPDATE_layerStyles(e,t){Object.entries(t.styles).forEach((([n,r])=>{e.pages[t.pageIndex].config.layers[t.layerIndex].styles[n]=r}))},UPDATE_layerOrders(e,t){e.pages[t.pageIndex].config.layers.sort(((e,t)=>e.styles.zindex-t.styles.zindex))},UPDATE_layerOrder(e,t){const n=e.currSelectedInfo.index,r=e.pages[e.currSelectedInfo.pageIndex].config.layers.length;switch(t.type){case"front":{const t=e.pages[e.currSelectedInfo.pageIndex].config.layers.splice(n,1);e.pages[e.currSelectedInfo.pageIndex].config.layers.push(t[0]),e.currSelectedInfo.index=r-1,ti.Z.reassignZindex(e.currSelectedInfo.pageIndex);break}case"back":{const t=e.pages[e.currSelectedInfo.pageIndex].config.layers.splice(n,1);e.pages[e.currSelectedInfo.pageIndex].config.layers.unshift(t[0]),e.currSelectedInfo.index=0,ti.Z.reassignZindex(e.currSelectedInfo.pageIndex);break}case"forward":{if(n===r-1){ti.Z.reassignZindex(e.currSelectedInfo.pageIndex);break}const t=e.pages[e.currSelectedInfo.pageIndex].config.layers.splice(n,1);e.pages[e.currSelectedInfo.pageIndex].config.layers.splice(n+1,0,...t),e.currSelectedInfo.index=n+1,ti.Z.reassignZindex(e.currSelectedInfo.pageIndex);break}case"backward":{if(0===n)break;const t=e.pages[e.currSelectedInfo.pageIndex].config.layers.splice(n,1);e.pages[e.currSelectedInfo.pageIndex].config.layers.splice(n-1,0,...t),e.currSelectedInfo.index=n-1,ti.Z.reassignZindex(e.currSelectedInfo.pageIndex);break}}},UPDATE_tmpLayerStyles(e,t){const n=e.pages[t.pageIndex].config.layers[e.currSelectedInfo.index];n&&Object.entries(t.styles).forEach((([e,t])=>{"number"===typeof t?n.styles[e]+=t:n.styles[e]=t}))},UPDATE_groupLayerStyles(e,t){Object.entries(t.styles).forEach((([t,n])=>{e.pages[e.middlemostPageIndex].config.layers[e.currSelectedInfo.index].layers.forEach((e=>{e.styles[t]=n}))}))},UPDATE_selectedLayersStyles(e,t){Object.entries(t.styles).forEach((([n,r])=>{"undefined"!==typeof t.layerIndex?e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index].layers[t.layerIndex].styles[n]=r:e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index].layers.forEach((e=>{e.styles[n]=r}))})),"group"===e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index].type?e.currSelectedInfo.layers=[e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index]]:e.currSelectedInfo.layers=e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index].layers},UPDATE_selectedTextParagraphs(e,t){e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index].layers[t.tmpLayerIndex].paragraphs=t.paragraphs,"group"===e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index].type?e.currSelectedInfo.layers=[e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index]]:e.currSelectedInfo.layers=e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index].layers},UPDATE_tmpLayersZindex(e){const t=e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index];t.layers.forEach((t=>{t.styles.zindex=e.currSelectedInfo.index+1})),Object.assign(e.currSelectedInfo,{layers:e.pages[e.currSelectedInfo.pageIndex].config.layers[e.currSelectedInfo.index].layers})},DELETE_selectedLayer(e){const t=e.currSelectedInfo.index;t<0?console.log("You didn't select any layer"):e.pages[e.currSelectedInfo.pageIndex].config.layers.splice(t,1)},SET_clipboard(e,t){e.clipboard=[JSON.parse(JSON.stringify(t))]},CLEAR_clipboard(e){e.clipboard=[]},SET_currSelectedInfo(e,t){Object.assign(e.currSelectedInfo,t);const{pageIndex:n,layers:r}=e.currSelectedInfo,i=r.length,o=i>1&&i<=50?n:-1;e.currFocusPageIndex=-1===n?-1===e.currActivePageIndex?e.middlemostPageIndex:e.currActivePageIndex:n,o!==e._3dEnabledPageIndex&&(e._3dEnabledPageIndex=o)},SET_currSubSelectedInfo(e,t){Object.assign(e.currSubSelectedInfo,t)},SET_isColorPanelOpened(e,t){e.isColorPanelOpened=t},SET_currSelectedResInfo(e,t){e.currSelectedResInfo=t},SET_subLayerStyles(e,t){const{pageIndex:n,primaryLayerIndex:r,subLayerIndex:i,styles:o}=t,s=e.pages[n].config.layers[r].layers;Object.assign(s[i].styles,o)},SET_frameLayerStyles(e,t){const{pageIndex:n,primaryLayerIndex:r,subLayerIndex:i,styles:o}=t,s=e.pages[n].config.layers[r].clips;Object.assign(s[i].styles,o)},SET_frameLayerAllClipsStyles(e,t){const{pageIndex:n,primaryLayerIndex:r,styles:i}=t,o=e.pages[n].config.layers[r].clips;for(const s of o)Object.assign(s.styles,T.Z.deepCopy(i))},SET_subFrameLayerStyles(e,t){const{pageIndex:n,primaryLayerIndex:r,subLayerIndex:i,targetIndex:o,styles:s}=t,a=e.pages[n].config.layers[r];if("group"===a.type){const e=a.layers[i].clips;Object.assign(e[o].styles,s)}},SET_frameDecorColors(e,t){const{pageIndex:n,layerIndex:r,subLayerIdx:i,payload:o}=t,{decorationColors:s,decorationTopColors:a}=o,l=-1===i?e.pages[n].config.layers[r]:e.pages[n].config.layers[r].layers[i];s&&(l.decoration.color=s),a&&(l.decorationTop.color=a)},SET_subFrameLayerAllClipsStyles(e,t){const{pageIndex:n,primaryLayerIndex:r,subLayerIndex:i,styles:o}=t,s=e.pages[n].config.layers[r];if("group"===s.type){const e=s.layers[i].clips;for(const t of e)Object.assign(t.styles,T.Z.deepCopy(o))}},SET_assetJson(e,t){Object.keys(t).forEach((n=>{Object.assign(e.asset,{[n]:t[n]})}))},SET_moving(e,t){e.isMoving=t},UPDATE_specLayerData(e,t){const{pageIndex:n,layerIndex:r,subLayerIndex:i,props:o,styles:s,type:a}=t,l=e.pages[n].config.layers[r];l&&(l.layers?l.layers.forEach(((e,t)=>{const n=!a||a.includes(e.type),r="undefined"===typeof i||t===i;n&&r&&(o&&Object.assign(l.layers[t],T.Z.deepCopy(o)),s&&Object.assign(l.layers[t].styles,T.Z.deepCopy(s)))})):(o&&Object.assign(l,o),s&&Object.assign(l.styles,s)))},DELETE_previewSrc(e,{type:t,userId:n,assetId:r,assetIndex:i}){for(const s of e.pages){const e=s.config.backgroundImage;if(e.config.previewSrc&&e.config.srcObj.assetId===r)return delete e.config.previewSrc,void Object.assign(e.config.srcObj,{type:t,userId:n,assetId:$n.Z.isAdmin?r:i})}const o=e=>{switch(e.type){case $e.F5.image:e.srcObj.assetId===r&&e.previewSrc&&(Object.assign(e.srcObj,{type:t,userId:n,assetId:$n.Z.isAdmin?r:i}),Object.assign(e,{previewSrc:""}),$n.Z.uploadDesign());break;case $e.F5.tmp:case $e.F5.group:e.layers.forEach((e=>o(e)));break;case $e.F5.frame:e.clips.forEach((e=>o(e)))}};e.pages.forEach((e=>{e.config.layers.forEach((e=>o(e)))}))},ADD_guideline(e,t){const{pos:n,type:r,pageIndex:i}=t,{pages:o}=e,s=void 0!==i?i:N.Z.currFocusPageIndex;switch(r){case"v":o[s].config.guidelines.v.push(n);break;case"h":o[s].config.guidelines.h.push(n);break}},SET_guideline(e,{guidelines:t,pageIndex:n}){const{pages:r}=e,i=null!=n?n:N.Z.currFocusPageIndex;r[i].config.guidelines=t},DELETE_guideline(e,t){const{pageIndex:n,index:r,type:i}=t,{pages:o}=e;o[n].config.guidelines[i].splice(r,1)},CLEAR_guideline(e,t){const{pages:n}=e,r=null!=t?t:N.Z.currFocusPageIndex;n[r].config.guidelines.v=[],n[r].config.guidelines.h=[]},SET_isEnableBleed(e,t){const{pages:n}=e,{value:r,pageIndex:i}=t;i?n[i].config.isEnableBleed=r:n.forEach((e=>{e.config.isEnableBleed=r}))},SET_bleeds(e,t){const{pages:n}=e,{pageIndex:r,bleeds:i,physicalBleeds:o}=t;n[r].config.bleeds=ji({},i),n[r].config.physicalBleeds=ji({},o)},SET_showRuler(e,t){e.showRuler=t},SET_showGuideline(e,t){e.showGuideline=t},SET_isDraggingGuideline(e,t){e.isDraggingGuideline=t},SET_lockGuideline(e,t){e.lockGuideline=t},CLEAR_pagesInfo(e){e.designId="",e.assetId="",e.groupId="",e.groupType=-1,e.name="",e.exportIds="",Object.assign(e.folderInfo,{isRoot:!0,parentFolder:"",path:"root"})},UPDATE_documentColors(e,t){e.pages[t.pageIndex].config.documentColors=(0,Jr.Ik)(t.pageIndex,t.color)},SET_themes(e,t){e.themes=t},SET_homeTags(e,t){e.homeTags=t},SET_shuffledThemesIds(e,t){e.shuffledThemesIds=t},UPDATE_frameClipSrc(e,t){const{pageIndex:n,subLayerIndex:r,layerIndex:i,srcObj:o}=t;Object.assign(e.pages[n].config.layers[i].clips[r].srcObj,o)},UPDATE_frameBlendLayer(e,t){const{pageIndex:n,preprimaryLayerIndex:r=-1,layerIndex:i,subLayerIdx:o,shape:s}=t;let a;a=-1!==r?e.pages[n].config.layers[r].layers[i]:e.pages[n].config.layers[i],a.type===$e.F5.frame&&(-1===o?a.blendLayers.push(s):Object.assign(a.blendLayers[o],s))},CLEAR_state(e){const t=e.useMobileEditor;Object.assign(e,Ri()),e.useMobileEditor=t},SET_inGestureMode(e,t){e.inGestureToolMode=t},SET_isGlobalLoading(e,t){e.isGlobalLoading=t},SET_useMobileEditor(e,t){e.useMobileEditor=t},SET_3dEnabledPageIndex(e,t){t!==e._3dEnabledPageIndex&&(e._3dEnabledPageIndex=this.useMobileEditor?-1:t)},SET_enalbleComponentLog(e,t){e.enalbleComponentLog=t},SET_inScreenshotPreview(e,t){e.inScreenshotPreviewRoute=t},SET_cursor(e,t){e.cursor=t},SET_isPageScaling(e,t){e.isPageScaling=t},SET_isGettingDesign(e,t){e.isGettingDesign=t},UPDATE_pagePos(e,t){const{pageIndex:n,styles:r}=t,i=e.pages[n];Object.entries(r).forEach((([e,t])=>{Object.prototype.hasOwnProperty.call(i.config,e)&&(i.config[e]=t)}))},UPDATE_pageInitPos(e,t){const{pageIndex:n,initPos:r}=t,i=e.pages[n];i.config.initPos.x=r.x,i.config.initPos.y=r.y},UPDATE_snapUtilsIndex(e,t){e.pages[t].modules.snapUtils.pageIndex=t},SET_contentScaleRatio4Page(e,t){const{pageIndex:n,contentScaleRatio:r}=t;e.pages[n].config.contentScaleRatio=r}},Qr),{ADD_subLayer:Me.vA,SET_showGlobalErrorModal(e,t){e.showGlobalErrorModal=t},SET_newTemplateShownMode(e,t){e.newTemplateShownMode=t},SET_isMobile(e,t){e.isMobile=t},SET_isLargeDesktop(e,t){e.isLargeDesktop=t}}),Vi=(0,ni.MT)({state:Hi,getters:Ui,mutations:Wi,modules:{user:tr,photos:Rr,text:Hr.Z,font:fe,color:w,objects:ht,templates:xn,textStock:Pn,background:o,mobileEditor:it,modal:pt,popup:dn,page:vt,homeTemplate:Ee,design:F,layouts:Xe,markers:Qe,brandkit:Li,unsplash:Dn,bgRemove:u,file:de,payment:nn,shadow:Sn,fontTag:ke,imgControl:Ye,webView:sr,cypress:k}});var Gi=Vi},85132:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(23931),i=n(89497),o=n(37658),s=n(53074),a=n(4821),l=n(95264),c=n(60410),d=Object.defineProperty,u=Object.defineProperties,g=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&y(e,n,t[n]);if(p)for(var n of p(t))m.call(t,n)&&y(e,n,t[n]);return e},b=(e,t)=>u(e,g(t)),v=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));function w(){const e=()=>({content:{},categories:[],searchResult:{},searchCategoryInfo:{categoryName:"",tags:[],url:""},tags:[],keyword:"",theme:"",page:0,perPage:0,nextCategory:0,nextPage:0,nextSearch:0,pending:!1,locale:"",error:"",sum:0,favorites:{items:{order:[],obj:{}},tags:{order:[],obj:{}},categories:{order:[],obj:{}},nextItems:[],nextTags:[],nextCategories:[],itemsContent:{},tagsContent:{},categoriesContent:{},searchTarget:"",pending:!1}}),t={getRecently:(e,...t)=>v(this,[e,...t],(function*({commit:e,state:t},n=!0){const{theme:r}=t,a=o.Z.currLocale();e("SET_STATE",{pending:!0,categories:[],locale:a});try{const t={token:i.Z.getters["user/getToken"],locale:a,theme:r,listAll:0,listCategory:0},{data:o}=yield this.api(t);if(s.Z.setLog(`api(${JSON.stringify(t)}): content = [${o.data.content.map((e=>`${e.title}[${e.list.slice(0,3).map((e=>e.id))}...]`))}]`),!n)return o.data;e("SET_RECENTLY",o.data)}catch(c){s.Z.setLogForError(c),(0,l.Tb)(c)}})),getCategories:(e,...t)=>v(this,[e,...t],(function*({commit:e,dispatch:t,state:n},r=!0){const{theme:a}=n,c=o.Z.currLocale();e("SET_STATE",{pending:!0,locale:c});try{const o=i.Z.getters["user/isAdmin"],l={token:"1",locale:c,theme:a,listAll:0,listCategory:1,pageIndex:n.nextCategory,cache:!o},{data:d}=yield this.api(l);if(s.Z.setLog(`api(${JSON.stringify(l)}): contentTitle = [${d.data.content.map((e=>e.title))}]`),!r)return d.data;e("SET_CATEGORIES",d.data),0===d.data.content.length&&t("getMoreContent")}catch(d){s.Z.setLogForError(d),(0,l.Tb)(d)}})),getRecAndCate:(e,...t)=>v(this,[e,...t],(function*({dispatch:e,commit:t},{reset:n=!0}={}){n&&e("resetContent"),yield Promise.all([e("getRecently",!1),e("getCategories",!1)]).then((([n,r])=>{const i=(0,c.cloneDeep)(r);i.content=n.content.concat(r.content),t("SET_CATEGORIES",i),0===r.content.length&&e("getMoreContent")}))})),getContent:(e,...t)=>v(this,[e,...t],(function*({commit:e,state:t},n={}){var r;const{theme:a}=t,{keyword:d}=n,u=n.locale||o.Z.currLocale();e("SET_STATE",{pending:!0,locale:u}),d&&e("SET_STATE",{keyword:d});try{const n=i.Z.getters["user/isAdmin"],o=!(d&&(null==(r=(0,c.find)(t.categories,["title",d]))?void 0:r.is_recent)||n),l={token:o?"1":i.Z.getters["user/getToken"],locale:u,keyword:d,theme:a,listAll:1,listCategory:0,cache:o},{data:g}=yield this.api(l);s.Z.setLog(`api(${JSON.stringify(l)}): contentId = [${g.data.content[0].list.slice(0,3).map((e=>e.id))}...], amount: ${g.data.content[0].list.length}`),e("SET_CONTENT",{objects:g.data,isSearch:!!d})}catch(g){s.Z.setLogForError(g),(0,l.Tb)(g)}})),getThemeContent:(e,...t)=>v(this,[e,...t],(function*({commit:e},t={}){const{keyword:n,theme:r}=t,i=o.Z.currLocale();e("SET_STATE",{pending:!0,keyword:n,theme:r,locale:i,content:{}});try{const t={token:"1",locale:i,keyword:n,theme:r,listAll:1,listCategory:0,cache:!0},{data:o}=yield this.api(t);s.Z.setLog(`api(${JSON.stringify(t)}): contentId = [${o.data.content[0].list.slice(0,3).map((e=>e.id))}...], amount: ${o.data.content[0].list.length}`),e("SET_CONTENT",{objects:o.data,isSearch:!!n})}catch(a){s.Z.setLogForError(a),(0,l.Tb)(a)}})),getTagContent:(e,...t)=>v(this,[e,...t],(function*({commit:e,state:t},n={}){let{theme:r}=t,{keyword:c}=n;const d=o.Z.currLocale();c=c.includes("::")?c:`tag::${c}`,e("SET_STATE",{pending:!0,keyword:c,locale:d}),"templates"===this.namespace&&(r=a.Z.sortSelectedTheme(r));const u=i.Z.getters["user/isAdmin"];try{const t={token:u?i.Z.getters["user/getToken"]:"1",locale:d,theme:r,keyword:c,listAll:1,listCategory:0,cache:!u},{data:n}=yield this.api(t);s.Z.setLog(`api(${JSON.stringify(t)}): contentId = [${n.data.content[0].list.slice(0,3).map((e=>e.id))}...], amount: ${n.data.content[0].list.length}`),e("SET_CONTENT",{objects:n.data,isSearch:!0})}catch(g){s.Z.setLogForError(g),(0,l.Tb)(g)}})),getMoreContent:e=>v(this,[e],(function*({commit:e,getters:t,dispatch:n,state:r}){const{nextParams:i,hasNextPage:o}=t,{pending:a,keyword:c}=r;if(o&&!a)if(!c&&r.categories.length>0&&-1!==r.nextCategory)n("getCategories");else if(c||0!==r.nextPage){e("SET_STATE",{pending:!0});try{const{data:t}=yield this.api(i);s.Z.setLog(`api(${JSON.stringify(i)}): contentId = [${t.data.content[0].list.slice(0,3).map((e=>e.id))}...], amount: ${t.data.content[0].list.length}`),e("SET_MORE_CONTENT",t.data)}catch(d){s.Z.setLogForError(d),(0,l.Tb)(d)}}else n("getContent")})),resetContent({commit:e}){e("SET_STATE",{content:{},categories:[],keyword:"",page:0,nextCategory:0,nextPage:0})},resetSearch:e=>v(this,[e],(function*({commit:e}){e("SET_STATE",{searchResult:{},nextSearch:0,keyword:""})})),getSum:(e,...t)=>v(this,[e,...t],(function*({commit:e,state:t},n={}){let{theme:r}=t;const{keyword:c}=n,d=o.Z.currLocale();e("SET_STATE",{locale:d,sum:-1}),c&&"templates"===this.namespace&&(r=a.Z.sortSelectedTheme(r));try{const{data:t}=yield this.api({token:i.Z.getters["user/getToken"],locale:d,theme:r,keyword:(c.includes("::")?c:`tag::${c}`).concat(";;sum::1"),listAll:1,listCategory:0,cache:!1});e("SET_STATE",{sum:t.data.sum})}catch(u){s.Z.setLogForError(u),(0,l.Tb)(u)}}))},n={SET_STATE(t,n){const r=n||e(),i=Object.keys(r);i.forEach((e=>{e in t&&(t[e]=r[e])}))},SET_RECENTLY(e,t){e.categories=t.content.concat(e.categories)||[],t.next_page&&(e.nextPage=t.next_page),e.pending=!1},SET_CATEGORIES(e,t){e.categories=e.categories.concat(t.content)||[],e.nextCategory=t.next_page,e.pending=!1},UPDATE_RECENTLY_PAGE(e,{index:t,format:n}){var i;const o=null==(i=e.categories.find((e=>e.title===`${r.Z.global.t("NN0024")}`)))?void 0:i.list;o&&(o.splice(t,1),o.unshift(n))},SET_CONTENT(e,{objects:t,isSearch:n=!1}){var r,i;const{content:o=[],next_page:s=0}=t||{},a=o.filter((e=>"asset"===e.title)),l=o.filter((e=>"asset"!==e.title)),c={title:null!=(i=null==(r=o[0])?void 0:r.title)?i:"",list:a.flatMap((e=>e.list)).concat(l.flatMap((e=>e.list)))};n?(e.searchResult=c,e.nextSearch=s):(e.content=c,e.nextPage=s),e.pending=!1},SET_MORE_CONTENT(e,t){const n=Boolean(e.keyword),{list:r=[]}=n?e.searchResult:e.content,{content:i,next_page:o=0}=t,s=i.flatMap((e=>e.list)),a=b(f({},e.content),{list:r.concat(s)});n?(e.searchResult=a,e.nextSearch=o):(e.content=a,e.nextPage=o),e.pending=!1}},d={nextParams:e=>{var t;let{nextPage:n,nextSearch:r,keyword:o,theme:s,locale:l}=e;const d=i.Z.getters["user/isAdmin"],u=!(o&&(null==(t=(0,c.find)(e.categories,["title",o]))?void 0:t.is_recent)||d);return o&&o.startsWith("tag::")&&"templates"===this.namespace&&(s=a.Z.sortSelectedTheme(s)),{token:u?"1":i.Z.getters["user/getToken"],locale:l,keyword:o,theme:s,listAll:1,listCategory:0,pageIndex:o?r:n,cache:u}},hasNextPage(e){return e.keyword?e.nextSearch>0:void 0!==e.nextPage&&e.nextPage>=0||e.nextCategory>0}};return{namespaced:!0,state:e,getters:d,mutations:n,actions:t}}},23579:function(e,t,n){"use strict";var r=n(52495),i=n(89497),o=n(77891),s=n(98979),a=n(78871),l=n(53074),c=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const d="UPDATE_STATE",u="UPDATE_FONTFACE",g="UPDATE_DEFAULT_FONT",p=()=>({sel:{start:{pIndex:NaN,sIndex:NaN,offset:NaN},end:{pIndex:NaN,sIndex:NaN,offset:NaN}},props:{textAlign:"center",fontSize:"--",fontSpacing:"--",lineHeight:"--",font:"multi-fonts",color:"#000000",weight:"normal",style:"normal",decoration:"none",isVertical:!1,type:"public",assetId:"",userId:""},pending:"",fontStore:[],defaultFonts:[],paragraphs:[],firstLoad:!1,isFontLoading:!1,isArgoAvailable:!1}),h=p(),m={getDefaultFonts(e){return e.defaultFonts.map((e=>e.face)).join(",")},getDefaultFontsList(e){return e.defaultFonts},paragraphs(e){return e.paragraphs},getIsFontLoading(e){return e.isFontLoading},getIsArgoAvailable(e){return e.isArgoAvailable}},y={UPDATE_selection(e,t){Object.assign(e.sel.start,t.start),Object.assign(e.sel.end,t.end)},[d](e,t){const n=Object.keys(t);n.forEach((n=>{n in e&&(e[n]=t[n])}))},UPDATE_props(e,t){Object.entries(t).forEach((([t,n])=>{e.props[t]=n}))},[u](e,t){const n=e.fontStore.find((e=>e.face===t.face));n?Object.assign(n,t):e.fontStore.push(t)},[g](e,t){t.priority?e.defaultFonts.splice(t.priority,0,t.font):e.defaultFonts.push(t.font)},SET_default(e){const t=p();Object.entries(t.props).forEach((([t,n])=>{e.props[t]=n}));const n={pIndex:NaN,sIndex:NaN,offset:NaN};Object.assign(e.sel.start,n),Object.assign(e.sel.end,n)},SET_firstLoad(e,t){e.firstLoad=t},SET_isFontLoading(e,t){e.isFontLoading=t},SET_isArgoAvailable(e,t){e.isArgoAvailable=t}},f={addFont(e,t){return c(this,arguments,(function*({state:e,commit:t},n){const{face:r,type:i,url:o,userId:s,assetId:a,ver:l}=n;if(r&&"undefined"!==r&&!e.fontStore.some((e=>e.face===r&&e.loaded))){const n=e.fontStore.find((e=>e.face===r));if(n)return new Promise((e=>{const t=window.setInterval((()=>{n.loaded&&(clearInterval(t),e())}),100)}));{e.pending=r,t(u,{name:r,face:r,loaded:!1});const n=yield b(i,o,r,s,a,null!=l?l:0);if(""!==n){const i=document.createElement("link");return i.href=n,i.rel="stylesheet",document.head.appendChild(i),new Promise((i=>{const o=window.setInterval((()=>{Array.from(document.styleSheets).find((e=>e.href===n))&&(clearInterval(o),t(u,{name:r,face:r,loaded:!0}),e.pending="",i())}),100)}))}t(u,{name:r,face:r,loaded:!0}),e.pending=""}}}))},checkFontLoaded(e,t){return c(this,arguments,(function*({state:e},t){return Promise.race([new Promise((n=>{const r=()=>{const n=e.fontStore.find((e=>e.face===t));return null==n?void 0:n.loaded};if(r())n(!0);else{const e=window.setInterval((()=>{r()&&(clearInterval(e),n(!0))}),100)}})),new Promise((e=>{setTimeout((()=>{e(!1)}),6e4)}))])}))}},b=(e,t,n,a,d,u=0)=>c(void 0,null,(function*(){let c,g;const p="Preview"===r.Z.currentRoute.value.name,h="https://template.vivipic.com/",m="https://media.vivipic.cc/",y=i.Z.getters["text/getIsArgoAvailable"];switch(e){case"public":if(c=N(`${p||!y?h:m}font/${n}/subset/font.css?ver=${u}&origin=true`),p)return c;try{if(g=yield fetch(v(c)),g.ok)return c;throw Error(g.status.toString())}catch(f){f instanceof Error&&"404"===f.message&&s.Z.addMissingDesign("font",n),l.Z.setLogForError(f)}return"";case"admin":if(c=N(`https://template.vivipic.com/admin/${a}/asset/font/${d}/subset/font.css?ver=${u}&origin=true`),p)return c;try{if(g=yield fetch(v(c)),g.ok)return c;throw Error(g.status.toString())}catch(f){f instanceof Error&&"404"===f.message&&s.Z.addMissingDesign("asset-font",d),l.Z.setLogForError(f)}return"";case"private":{let e=o.Z.getFontUrlMap(d);return e?(c=w(e,u),p?c:(g=yield fetch(v(c)),g.ok?c:(e=yield o.Z.refreshFontAsset(d),w(e,u)))):(e=yield o.Z.refreshFontAsset(d),w(e,u))}case"URL":return t}if(c=`${p||!y?h:m}font/${n}/subset/font.css?ver=${u}&origin=true`,p)return c;try{if(g=yield fetch(c),g.ok)return c;throw Error(g.status.toString())}catch(f){f instanceof Error&&"404"===f.message&&s.Z.addMissingDesign("font",n),l.Z.setLogForError(f)}return""})),v=e=>e.replace(/ver=[0-9a-zA-Z]+/g,`ver=${a.Z.generateRandomString(6)}`),w=(e,t)=>{const n=e.css;return n?N(`${n}&ver=${t}&origin=true`):""},N=e=>e.includes("?")?`${e}&platform=${window.location.hostname}`:`${e}?platform=${window.location.hostname}`;t["Z"]={namespaced:!0,state:h,getters:m,mutations:y,actions:f}},6400:function(e,t,n){"use strict";n.d(t,{F5:function(){return l},Q8:function(){return c},Tg:function(){return d},UJ:function(){return i},_2:function(){return a},gQ:function(){return o},iI:function(){return r},pp:function(){return s}});var r=(e=>(e[e["template"]=0]="template",e[e["photo"]=1]="photo",e[e["object"]=2]="object",e[e["bg"]=3]="bg",e[e["text"]=4]="text",e[e["file"]=5]="file",e[e["overlay"]=6]="overlay",e[e["brand"]=7]="brand",e[e["page"]=8]="page",e))(r||{}),i=(e=>(e[e["none"]=0]="none",e[e["group"]=1]="group",e[e["textSetting"]=2]="textSetting",e[e["pageSetting"]=3]="pageSetting",e[e["photoSetting"]=4]="photoSetting",e[e["photoShadow"]=5]="photoShadow",e[e["fonts"]=6]="fonts",e[e["backgroundSetting"]=7]="backgroundSetting",e))(i||{}),o=(e=>(e["text"]="setTextColor",e["textEffect"]="setTextEffectColor",e["textBg"]="setTextBg",e["shape"]="setShapeColor",e["background"]="setBackgroundColor",e["photoShadow"]="setPhotoEffectColor",e))(o||{}),s=(e=>(e["palette"]="color-palette",e["picker"]="color-picker",e["more"]="color-more",e))(s||{}),a=(e=>(e["stop"]="changeStop",e["opacity"]="setLayerOpacity",e["lineHeight"]="setTextLineHeight",e["letterSpacing"]="setTextSpacing",e["lineWidth"]="setlineWidth",e["cornerRadius"]="setCornerRadius",e))(a||{}),l=(e=>(e["image"]="image",e["shape"]="shape",e["text"]="text",e["group"]="group",e["frame"]="frame",e["tmp"]="tmp",e))(l||{}),c=(e=>(e["imgShadow"]="imgShadow",e["bgRemove"]="bgRemove",e["none"]="",e))(c||{}),d=(e=>(e["type1"]="type1",e["type2"]="type2",e))(d||{})},47931:function(e,t){"use strict";var n=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const r=3;class i{requestWithRetry(e){return n(this,arguments,(function*(e,t=r,n=0){try{return yield e()}catch(i){if(console.log("design API failed:",i),n>=t)throw i;return console.log(`retrying: ${n+1}/${t}`),yield new Promise((r=>{setTimeout((()=>{r(this.requestWithRetry(e,t,n+1))}),1e3)}))}}))}}t["Z"]=new i},86052:function(e,t,n){"use strict";n.d(t,{RU:function(){return U},cX:function(){return H},dL:function(){return R}});var r=n(72625),i=n(89497),o=n(53074),s=n(50559),a=n(95264),l=n(60410),c=n(29651),d=n(95918),u=n(40881),g=n(93261),p=n(98979),h=n(78871),m=n(70118),y=n(99504),f=n(3162),b=n(13637),v=n(75231),w=n(35426),N=n(32905),S=n(53089),x=n(15820),P=n(52632),I=n(70488),_=n(23917),k=n(89456),Z=n(46921),C=n(56556),z=Object.defineProperty,T=Object.defineProperties,L=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,M=(e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))D.call(t,n)&&M(e,n,t[n]);if(E)for(var n of E(t))O.call(t,n)&&M(e,n,t[n]);return e},$=(e,t)=>T(e,L(t)),F=(e,t)=>{var n={};for(var r in e)D.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&E)for(var r of E(e))t.indexOf(r)<0&&O.call(e,r)&&(n[r]=e[r]);return n},j=(e,t,n)=>(M(e,"symbol"!==typeof t?t+"":t,n),n),B=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const R={tw:"OOcHgnEpk9RHYBOiWllz",us:"cRgaSK5ZVXnLDpWTL8MN",en:"cRgaSK5ZVXnLDpWTL8MN",jp:"OyDbjZxjk9r14eZnPELb"},H=.55,U=.8,W=.55;class V{constructor(){j(this,"host","https://template.vivipic.com"),j(this,"data","config.json"),j(this,"preview","prev")}get getAsset(){return i.Z.getters.getAsset}get getPage(){return i.Z.getters.getPage}get pageSize(){return i.Z.getters.getPageSize(N.Z.currFocusPageIndex)}get getLayer(){return i.Z.getters.getLayer}get layerIndex(){return i.Z.getters.getCurrSelectedIndex}get getLayers(){return i.Z.getters.getLayers}get getPages(){return i.Z.getters.getPages}get(e,t){const n=this.getAsset(e.id);return n&&n.ver===e.ver?Promise.resolve(h.Z.deepCopy(n)):this.fetch(e,t)}getTypeCategory(e){const t={0:"font",1:"background",5:"svg",6:"template",7:"text",8:"svg",9:"svg",10:"svg",11:"svg",14:"svg",15:"svg",16:"giphy"};return t[e]}getLayerType(e){const t={5:"shape",7:"text",8:"frame",9:"shape",10:"shape",11:"shape"};return t[e]}getTypeModule(e){const t={0:"font",1:"background",6:"templates",7:"textStock",5:"objects",8:"objects",9:"objects",10:"objects",11:"objects",14:"objects",15:"objects",16:"giphy"};return t[e]}getFontMap(){return R}fetch(e,t){const n=e,{id:r,type:o,ver:a}=n,l=F(n,["id","type","ver"]),c=null!=t?t:this.getTypeCategory(o),d=A({id:r,type:o,ver:a,urls:{prev:[this.host,c,r,this.preview].join("/"),json:[this.host,c,r,this.data].join("/")}},l);switch(o){case 1:{const e={type:c,assetId:r,userId:""};return d.urls.full=f.Z.getSrc({srcObj:e}),i.Z.commit("SET_assetJson",{[r]:d}),Promise.resolve(d)}case 15:return Promise.resolve(d);default:return Promise.race([fetch(d.urls.json+`?ver=${a}`),new Promise(((e,t)=>setTimeout((()=>t(new Error("timeout"))),3e4)))]).then((e=>{if(!e.ok)throw new Error(e.status.toString());return e.json()})).then((e=>(d.jsonData=e,i.Z.commit("SET_assetJson",{[r]:d}),d))).catch((e=>(5===d.type&&"404"===e.message?p.Z.addMissingDesign("svg",d.id):(0,s.h4)({group:"error",text:`網路異常，請確認網路正常後再嘗試。(ErrorCode: ${"Failed to fetch"===e.message?19:e.message})`}),d)))}}addTemplate(e,t,n=!0){return B(this,null,(function*(){var r;const o=null!=(r=null==t?void 0:t.pageIndex)?r:N.Z.addAssetTargetPageIndex,s=this.getPage(o);e=yield this.updateBackground(h.Z.deepCopy(e)),v.ZP.setAutoResizeNeededForLayersInPage(e,!0);const a=b.Z.newTemplate(I.Z.updateTemplate(e));if(N.Z.updateSpecPage(o,a),(null==t?void 0:t.width)&&(null==t?void 0:t.height)&&S.Z.resizePage(o,a,{width:t.width,height:t.height,physicalWidth:t.physicalWidth,physicalHeight:t.physicalHeight,unit:t.unit}),"backendRendering"===i.Z.getters["user/getUserId"]){const{isBleed:t,isTrim:n}=i.Z.getters["user/getBackendRenderParams"];t||n?(N.Z.setIsEnableBleed(!0,o),e.bleeds&&e.physicalBleeds&&N.Z.setBleeds(o,e.physicalBleeds,e.bleeds)):N.Z.setIsEnableBleed(!1,o)}else if(t&&t.width&&t.height){let n;if(s.bleeds&&s.physicalBleeds){const e=this.getPage(o),r=N.Z.getPageDPI(e);n="px"===e.unit?s.bleeds:s.unit===(null==t?void 0:t.unit)?s.physicalBleeds:Object.fromEntries(Object.entries(s.physicalBleeds).map((([t,n])=>[t,Z.ZP.convert(n,s.unit,e.unit,"left"===t||"right"===t?r.width:r.height)])))}N.Z.setIsEnableBleed(!!s.isEnableBleed,o),n&&N.Z.setBleeds(o,n),e.backgroundImage.config.srcObj.assetId&&d.Z.fitPageBackground(o)}m.Z.deselect(),i.Z.commit("SET_currActivePageIndex",o),n&&P.Z.record()}))}addTemplateToAllPages(e){return B(this,arguments,(function*(e,t={},n=!0){const{width:r,height:i}=t,o=N.Z.pageNum;for(let s=0;s<o;s++){e=yield this.updateBackground(h.Z.deepCopy(e)),v.ZP.setAutoResizeNeededForLayersInPage(e,!0);const t=b.Z.newTemplate(I.Z.updateTemplate(e));N.Z.updateSpecPage(s,t),r&&i&&S.Z.resizePage(s,t,{width:r,height:i})}n&&P.Z.record()}))}svgJsonInit(e,t={}){const{pageIndex:n,styles:r={}}=t,i=null!=n?n:N.Z.addAssetTargetPageIndex,{vSize:o=[]}=e,s=this.getPage(i),a=H,l=s.width/s.height,c=o?o[0]/o[1]:1,d=c>l?s.width*a:s.height*a*c,u=c>l?s.width*a/c:s.height*a;return e.ratio=1,e.className=x.Z.classGenerator(),$(A({},e),{styles:A({x:s.width/2-d/2,y:s.height/2-u/2,width:d,height:u,initWidth:o[0],initHeight:o[1],scale:d/o[0],color:e.color,vSize:o},r)})}addSvg(e,t={}){const{pageIndex:n}=t,r=null!=n?n:N.Z.addAssetTargetPageIndex,i=this.getPage(r),o=this.svgJsonInit(e,t),s=v.ZP.getObjectInsertionLayerIndex(i.layers,o)+1;m.Z.deselect(),v.ZP.addLayersToPos(r,[b.Z.newShape(o)],s),C.Z.reassignZindex(r),m.Z.select(r,[s]),P.Z.record()}addLine(e){return B(this,arguments,(function*(e,t={}){const{pageIndex:n,styles:r={}}=t,i=null!=n?n:N.Z.addAssetTargetPageIndex,o=e.point,{width:s,height:a}=x.Z.lineDimension(o),l=this.getPage(i),c=H,d=l.width/l.height,u=s/a,g=u>d?l.width*c:l.height*c*u,p=u>d?l.width*c/u:l.height*c;e.ratio=1,yield x.Z.addComputableInfo(e);const h=x.Z.getLineQuadrant(e.point),{point:y,realWidth:f,realHeight:w}=x.Z.computePointForDimensions(h,e.size[0],g,p);e.point=y,e.className=x.Z.classGenerator();const S=$(A({},e),{styles:A({x:l.width/2-f/2,y:l.height/2-w/2,width:f,height:w,initWidth:f,initHeight:w,scale:1,color:e.color},r)}),I=v.ZP.getObjectInsertionLayerIndex(l.layers,S)+1;m.Z.deselect(),v.ZP.addLayersToPos(i,[b.Z.newShape(S)],I),C.Z.reassignZindex(i),m.Z.select(i,[I]),P.Z.record()}))}addBasicShape(e){return B(this,arguments,(function*(e,t={}){const{pageIndex:n,styles:r={}}=t,i=null!=n?n:N.Z.addAssetTargetPageIndex,{vSize:o=[]}=e,s=this.getPage(i),a=H,l=s.width/s.height,c=o?o[0]/o[1]:1,d=c>l?s.width*a:s.height*a*c,g=c>l?s.width*a/c:s.height*a;e.ratio=1,yield x.Z.addComputableInfo(e),e.className=x.Z.classGenerator();const p=$(A({},e),{vSize:[d,g],size:[e.size[0],u.Z.getCorRadValue([d,g],u.Z.getCorRadPercentage(e.vSize,e.size,e.shapeType),e.shapeType)],styles:A({x:s.width/2-d/2,y:s.height/2-g/2,width:d,height:g,initWidth:d,initHeight:g,scale:1,color:e.color,vSize:o},r)}),h=v.ZP.getObjectInsertionLayerIndex(s.layers,p)+1;m.Z.deselect(),v.ZP.addLayersToPos(i,[b.Z.newShape(p)],h),C.Z.reassignZindex(i),m.Z.select(i,[h]),P.Z.record()}))}addFrame(e,t={}){const{pageIndex:n,styles:r={}}=t,i=null!=n?n:N.Z.addAssetTargetPageIndex,o=this.getPage(i),s=e.width/e.height,a=.7*(s>1?o.width:o.height)/(s>1?e.width:e.height),l=e.width*a,c=e.height*a,d=A({styles:A({x:o.width/2-l/2,y:o.height/2-c/2,width:l,height:c,initWidth:e.width,initHeight:e.height,scale:a},r)},e),u=v.ZP.getObjectInsertionLayerIndex(o.layers,d)+1;m.Z.deselect(),v.ZP.addLayersToPos(i,[b.Z.newFrame(d)],u),C.Z.reassignZindex(i),m.Z.select(i,[u]),P.Z.record()}addBackground(e,t={}){const{pageIndex:n,ver:r,previewSrc:o,imgSrcSize:s}=t,a=null!=n?n:N.Z.addAssetTargetPageIndex,{width:l=0,height:c=0}=s||{width:0,height:0},d=i.Z.getters.getPage(a),{width:u,height:g,posX:p,posY:h}=f.Z.adaptToPage({width:l,height:c},d),y=b.Z.newImage({styles:{width:u,height:g,imgWidth:u,imgHeight:g,initWidth:u,initHeight:g,scale:1,x:200,y:200},srcObj:{type:"background",assetId:f.Z.getAssetId(e,"background"),userId:""},ver:r,previewSrc:o});i.Z.commit("SET_backgroundImage",{pageIndex:a,config:y}),i.Z.commit("SET_backgroundImagePos",{pageIndex:a,imagePos:{x:p,y:h}}),i.Z.commit("SET_backgroundImageMode",{pageIndex:a,newDisplayMode:!0}),m.Z.deselect(),P.Z.record()}updateBackground(e){return B(this,null,(function*(){var t,n;if(""!==(null!=(n=null==(t=e.backgroundImage.config.srcObj)?void 0:t.assetId)?n:"")&&!e.backgroundImage.newDisplayMode){const{width:t,height:n}=yield f.Z.getImageSize(f.Z.getSrc(e.backgroundImage.config),e.backgroundImage.config.styles.width,e.backgroundImage.config.styles.height),{width:r,height:i,posX:o,posY:s}=f.Z.adaptToSize({width:t,height:n},e);e.backgroundImage.config.styles.imgWidth=r,e.backgroundImage.config.styles.imgHeight=i,e.backgroundImage.config.styles.initWidth=t,e.backgroundImage.config.styles.initHeight=n,e.backgroundImage.posX=o,e.backgroundImage.posY=s,e.backgroundImage.newDisplayMode=!0}return e}))}addText(e,t={}){e=h.Z.deepCopy(e);const{pageIndex:n,styles:r={}}=t,{x:i,y:o}=r,{width:s,height:a,scale:l}=e.styles,c=null!=n?n:N.Z.addAssetTargetPageIndex,d=this.getPage(c),u=W,g=d.width/d.height,p=s/a,m=p>g?d.width*u:d.height*u*p,y=p>g?d.width*u/p:d.height*u,f=m/s,w=$(A({},e),{styles:$(A({},e.styles),{width:m,height:y,scale:l*f})});if("text"===w.type)Object.assign(w,{widthLimit:-1===w.widthLimit?-1:w.widthLimit*f,isAutoResizeNeeded:!_.Z.isCurvedText(w.styles.textShape)});else if("group"===w.type)for(const h of w.layers)"text"===h.type&&Object.assign(h,{isAutoResizeNeeded:!_.Z.isCurvedText(h.styles.textShape)});Object.assign(w.styles,"undefined"===typeof o||"undefined"===typeof i?k.Z.getAddPosition(m,y,c):{x:i,y:o});const S="group"===w.type?b.Z.newGroup(w,w.layers,"1.0.0"):b.Z.newText(w,"1.0.0");v.ZP.addLayers(c,[k.Z.resetScaleForLayer(S,!0)])}addStandardText(e,t){return B(this,arguments,(function*(e,t,r="tw",i,s={},a={}){const l=null!=i?i:N.Z.addAssetTargetPageIndex;try{const i=yield n(59450)(`./${e}.json`),o={heading:"isHeading",subheading:"isSubheading",body:"isBody"},c=o[e],d=h.Z.deepCopy(i.default);d.paragraphs[0].spans[0].text=t,"tw"===r&&(d.paragraphs[0].spans[0].styles.weight="normal"),d.paragraphs[0].spans[0].styles.font=R[r],s.styles&&Object.assign(d.styles,s.styles),a&&Object.assign(d.paragraphs[0].spans[0].styles,a),k.Z.resetTextField(d,l,c),v.ZP.addLayers(l,[b.Z.newText(Object.assign(d,{editing:!1,contentEditable:!h.Z.isTouchDevice(),isCompensated:!0}))]),g.Z.setCloseMobilePanelFlag(!0)}catch(c){o.Z.setLogForError(c),console.log("Cannot find the file")}}))}addImage(e,t,n={},r=-1){i.Z.commit("SET_mobileSidebarPanelOpen",!1);const{pageIndex:o,isPreview:s,assetId:a,assetIndex:l,styles:c,previewSrc:d}=n,u=this.pageSize.width/this.pageSize.height;let g={width:0,height:0,initWidth:0,initHeight:0,imgWidth:0,imgHeight:0};if(c&&14===r){const{width:e,height:n}=w.ZP.getBounding(c);t=e/n;const r=t>u?this.pageSize.width*U:this.pageSize.height*U*t,i=t>u?this.pageSize.width*U/t:this.pageSize.height*U,{width:o=r,height:s=i,imgWidth:a=r,imgHeight:l=i,imgX:d=0,imgY:p=0}=c,h=r/e;g={width:o*h,height:s*h,initWidth:o*h,initHeight:s*h,imgWidth:a*h,imgHeight:l*h,imgX:d*h,imgY:p*h}}else{const e=t>u?this.pageSize.width*U:this.pageSize.height*U*t,n=t>u?this.pageSize.width*U/t:this.pageSize.height*U;g={width:e,height:n,initWidth:e,initHeight:n,imgWidth:e,imgHeight:n}}const p=null!=o?o:N.Z.addAssetTargetPageIndex;let h,y="";if("string"===typeof e){const t=f.Z.getSrcType(e);y=s?a:f.Z.getAssetId(e,t),h={type:t,userId:f.Z.getUserId(e,t),assetId:null!=l?l:null!=a?a:f.Z.getAssetId(e,t),brandId:f.Z.getBrandId(e,t)}}else h=e;const S=this.getLayers(p),x=S.filter((e=>"image"===e.type&&("image"===e.type&&!e.moved&&e.srcObj.assetId===y))),I=0===x.length?this.pageSize.width/2-g.width/2:x[x.length-1].styles.x+20,_=0===x.length?this.pageSize.height/2-g.height/2:x[x.length-1].styles.y+20,k=$(A(A({},s&&{previewSrc:e}),(14===r||15===r)&&{categoryType:r}),{srcObj:h,previewSrc:d,styles:A($(A({},c),{x:I,y:_}),g)}),Z=v.ZP.getObjectInsertionLayerIndex(this.getPage(p).layers,k)+1;m.Z.deselect(),v.ZP.addLayersToPos(p,[b.Z.newImage(k)],Z),C.Z.reassignZindex(p),m.Z.select(p,[Z]),P.Z.record()}addGroupTemplate(e,t,n){const{content_ids:r=[],type:o,group_id:s,group_type:a}=e,u=i.Z.getters.getGroupType,p=1===a||1===u;i.Z.commit("SET_groupId",s),i.Z.commit("SET_mobileSidebarPanelOpen",!1),p||i.Z.commit("SET_groupType",a);const m=null==r?void 0:r.filter((e=>!t||e.id===t)).map((e=>this.get($(A({},e),{type:o}))));return this.addAssetToRecentlyUsed(e),Promise.all(m).then((e=>{const t=e.map((e=>this.updateBackground(h.Z.deepCopy(e.jsonData)||{}).then((e=>b.Z.newTemplate(I.Z.updateTemplate(e))))));return Promise.all(t)})).then((e=>{const r=this.getPage(N.Z.currFocusPageIndex);let o,s=N.Z.currFocusPageIndex,a=!0;if(!t&&r&&r.layers.length&&(s=this.getPages.length,a=!1),p){o=r.physicalBleeds;const e=this.getPages;o=$(A({},o),{top:e[0].physicalBleeds.top,bottom:e[e.length-1].physicalBleeds.bottom})}v.ZP.setAutoResizeNeededForLayersInPages(e,!0),N.Z.appendPagesTo(e,s,a),(0,c.Y3)((()=>{var t,c,u;if(N.Z.scrollIntoPage(s),n&&S.Z.resizePage(s,this.getPage(s),n),p&&!n){const{width:t=1e3,physicalWidth:n=t,unit:r="px"}=this.getPage(N.Z.currFocusPageIndex),i="px"===r?0:Z.cB;for(const o in e){const{height:a,width:c,physicalWidth:d=c,physicalHeight:u=a,unit:g="px"}=e[o],p=Z.ZP.convertSize(d,u,g,r),h=+o+s,m={physicalHeight:(0,l.round)(p.height*n/p.width,i),physicalWidth:n},y={height:(0,l.round)(a*t/c),width:t};S.Z.resizePage(h,this.getPage(h),$(A(A({},y),m),{unit:r}))}}if(n&&Object.keys(n).length>0||p){let i;if(r.bleeds&&r.physicalBleeds){i=p?o:r.physicalBleeds;const s=N.Z.getPageDPI(r),a=null!=(u=null!=(c=null==n?void 0:n.unit)?c:p?r.unit:null==(t=e[0])?void 0:t.unit)?u:"px";r.unit!==a&&(i=Object.fromEntries(Object.entries(i).map((([e,t])=>[e,Z.ZP.convert(t,r.unit,a,"left"===e||"right"===e?s.width:s.height)]))))}for(const t in e){const e=+t+s;if(N.Z.setIsEnableBleed(!!r.isEnableBleed,e),!i)continue;let n=i;p&&(n=$(A({},n),{top:0===e?i.top:0,bottom:e===this.getPages.length-1?i.bottom:0})),N.Z.setBleeds(e,n)}p&&!a&&N.Z.setBleeds(s-1,$(A({},this.getPage(s-1).physicalBleeds),{bottom:0})),d.Z.fitPageBackground(s)}i.Z.commit("SET_currActivePageIndex",s),P.Z.record(),h.Z.isTouchDevice()&&g.Z.setCloseMobilePanelFlag(!0)}))}))}addAsset(e){return B(this,arguments,(function*(e,t={}){var n,r,s,l,c;try{i.Z.commit("SET_mobileSidebarPanelOpen",!1);const o=yield this.get(e,t.db);switch(o.type){case 1:(null==(n=t.imgSrcSize)?void 0:n.width)&&t.imgSrcSize.height||(t.imgSrcSize=yield f.Z.getImageSize(f.Z.getSrc({srcObj:{type:"background",assetId:f.Z.getAssetId(o.urls.prev,"background"),userId:""}},"prev",t.ver),null!=(r=o.width)?r:0,null!=(s=o.height)?s:0)),this.addBackground(o.urls.prev,$(A({},t),{styles:{width:o.width,height:o.height},ver:e.ver}));break;case 5:case 9:this.addSvg($(A({},o.jsonData),{designId:e.id,db:"svg"}),t);break;case 6:y.Z.trackTemplateDownload(e.id),this.addTemplate(o.jsonData,t);break;case 7:this.addText($(A({},o.jsonData),{designId:e.id}),t);break;case 8:this.addFrame($(A({},o.jsonData),{designId:e.id}),t);break;case 10:this.addLine(o.jsonData,t);break;case 11:this.addBasicShape(o.jsonData,t);break;case 14:switch(o.jsonData.type){case"image":{const{srcObj:e,styles:t}=o.jsonData;this.addImage(e,t.width/t.height,{styles:t},14);break}case"group":this.addText($(A({},o.jsonData),{designId:e.id}),t)}break;case 15:this.addImage(o.urls.prev,(null!=(l=o.width)?l:1)/(null!=(c=o.height)?c:1),{},15);break;default:throw new Error(`"${o.type}" is not a type of asset`)}1!==o.type&&g.Z.setCloseMobilePanelFlag(!0),this.addAssetToRecentlyUsed(o)}catch(d){o.Z.setLogForError(d),(0,a.Tb)(d)}}))}addAssetToRecentlyUsed(e){const{id:t,type:n,width:o,height:s,plan:a,content_ids:l,match_cover:c,user_id:d,asset_id:u,asset_index:g,src:p,ver:m,signed_url:y}=e,f=this.getTypeCategory(n),b=this.getTypeModule(n);if(f&&b){const e=h.Z.deepCopy(i.Z.state[b].categories),v=e.find((e=>1===e.is_recent));if(v){const r=v.list.findIndex((e=>e.id===t));r>=0&&v.list.splice(r,1),v.list.unshift({id:t,plan:a,type:n,width:o,height:s,content_ids:l,match_cover:c,src:p,user_id:d,asset_id:u,asset_index:g,signed_url:y,ver:m}),i.Z.commit(`${b}/SET_STATE`,{categories:e})}const w={};"font"===f&&(w.is_asset="private"===p||"admin"===p?1:0),r.Z.addDesign(t,f,w)}}addTemplateToRecentlyUsedPure(e){return r.Z.addDesign(e,"template")}}t["ZP"]=new V},95918:function(e,t,n){"use strict";var r=n(23931),i=n(89497),o=n(50559),s=n(86052),a=n(93261),l=n(78871),c=n(3162),d=n(13637),u=n(75231),g=n(32905),p=n(77804),h=n(52632),m=Object.defineProperty,y=Object.defineProperties,f=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,N=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>{for(var n in t||(t={}))v.call(t,n)&&N(e,n,t[n]);if(b)for(var n of b(t))w.call(t,n)&&N(e,n,t[n]);return e},x=(e,t)=>y(e,f(t));class P{get inBgSettingMode(){return i.Z.getters["mobileEditor/getInBgSettingMode"]}get hasBgImage(){var e;return""!==(null==(e=this.backgroundImage.config.srcObj)?void 0:e.assetId)}get currPage(){return g.Z.getPage(g.Z.currFocusPageIndex)}get backgroundColor(){return this.currPage.backgroundColor}get backgroundOpacity(){const{styles:{opacity:e}}=this.currPage.backgroundImage.config;return e}get backgroundAdjust(){const{styles:{adjust:e}}=this.currPage.backgroundImage.config;return e}get backgroundLocked(){const{locked:e}=this.currPage.backgroundImage.config;return e}get backgroundImage(){return this.currPage.backgroundImage}get backgroundImageControl(){return this.backgroundImage.config.imgControl}get backgroundImgControl(){var e,t;return null!=(t=null==(e=this.currPage.backgroundImage.config)?void 0:e.imgControl)&&t}get backgroundImgFlip(){var e;const{horizontalFlip:t=!1,verticalFlip:n=!1}=(null==(e=this.currPage.backgroundImage.config)?void 0:e.styles)||{};return[t,n]}handleImageFlip(e){const[t,n]=this.backgroundImgFlip;this.setBgImageStyles({pageIndex:g.Z.currFocusPageIndex,styles:{horizontalFlip:"flip-h"===e?!t:t,verticalFlip:"flip-v"===e?!n:n}}),h.Z.record()}handleChangeBgAdjust(e){this.setBgImageStyles({pageIndex:g.Z.currFocusPageIndex,styles:{adjust:S({},e)}})}handleLockBackground(){this.setBgImage({pageIndex:g.Z.currFocusPageIndex,config:{locked:!this.backgroundLocked},bgColorReset:!1}),this.setBgImageControl({pageIndex:g.Z.currFocusPageIndex,imgControl:!1}),h.Z.record()}handleDeleteBackground(){if(this.backgroundLocked)return this.handleLockedNotify();i.Z.commit("REMOVE_background",{pageIndex:g.Z.currFocusPageIndex}),g.Z.updateBackgroundImageStyles(g.Z.currFocusPageIndex,{adjust:{}}),h.Z.record()}handleLockedNotify(){(0,o.h4)({group:"copy",text:r.Z.global.tc("NN0804")})}setBgImage(e){i.Z.commit("SET_backgroundImage",e)}setBgImageStyles(e){i.Z.commit("SET_backgroundImageStyles",e)}setBgImageControl(e){i.Z.commit("SET_backgroundImageControl",e)}setAllBackgroundImageControlDefault(){i.Z.commit("SET_allBackgroundImageControl",!1)}detachBgImage(){const e=l.Z.deepCopy(this.backgroundImage);if(e.config.srcObj.assetId){const t=c.Z.getSrc(e.config,c.Z.getSrcSize(e.config.srcObj,50));c.Z.imgLoadHandler(t,(n=>{const r=n.naturalWidth/n.naturalHeight;s.ZP.addImage(t,r,x(S({pageIndex:u.ZP.pageIndex},e.config.srcObj),{styles:e.config.styles,previewSrc:e.config.previewSrc})),this.setBgImage({pageIndex:g.Z.currFocusPageIndex,config:d.Z.newImage({srcObj:{type:"",userId:"",assetId:""},styles:{width:0,height:0,zindex:-1,opacity:100}})})}),{crossOrigin:!0})}}setBgImageSrc(){const e=u.ZP.pageIndex,t=u.ZP.getCurrConfig;i.Z.commit("SET_backgroundImageSrc",{pageIndex:e,srcObj:t.srcObj,previewSrc:t.previewSrc});const n=l.Z.deepCopy(t);n.styles.width=n.styles.imgWidth,n.styles.height=n.styles.imgHeight,n.styles.initWidth=n.styles.imgWidth,n.styles.initHeight=n.styles.imgHeight,n.styles.rotate=0,n.styles.imgX=0,n.styles.imgY=0;const{width:r,height:o,posX:s,posY:d}=c.Z.adaptToPage(n.styles,i.Z.getters.getPage(e)),{adjust:h,horizontalFlip:m,verticalFlip:y}=n.styles;g.Z.updateBackgroundImageStyles(e,{width:r,height:o,adjust:h,horizontalFlip:m,verticalFlip:y,imgWidth:r,imgHeight:o,scale:1}),g.Z.updateBackgroundImagePos(e,s,d),g.Z.updateBackgroundImageMode(e,!0),p.Z.del(),l.Z.isTouchDevice()&&a.Z.setInBgSettingMode(!0)}fitPageBackground(e){const t=g.Z.getPage(e),{width:n,height:r,posX:i,posY:o}=c.Z.adaptToPage({width:t.backgroundImage.config.styles.initWidth||t.backgroundImage.config.styles.width,height:t.backgroundImage.config.styles.initHeight||t.backgroundImage.config.styles.height},t);g.Z.updateBackgroundImagePos(e,i,o),g.Z.updateBackgroundImageStyles(e,{width:n,height:r,imgWidth:n,imgHeight:r})}}const I=new P;t["Z"]=I},77891:function(e,t,n){"use strict";var r=n(23931),i=n(89497),o=n(86052),s=n(78871),a=n(3162),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))g.call(t,n)&&h(e,n,t[n]);if(u)for(var n of u(t))p.call(t,n)&&h(e,n,t[n]);return e},y=(e,t)=>c(e,d(t)),f=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const b={logo:"NN0399",color:"NN0401",text:"NN0400"},v={logo:"NN0493",color:"NN0495",text:"NN0494"},w={tw:"思源黑體-標準",us:"Roboto-Regular",jp:"裝甲明朝"};class N{get isBrandkitAvailable(){return!s.Z.isTouchDevice()}createTestingDefaultBrand(){const e=Date.now();return{id:s.Z.generateAssetId(),createTime:new Date(e).toISOString(),name:"",logos:[{team_id:"",name:"logo-horizontal.png",id:s.Z.generateAssetId(),createTime:new Date(e+30).toISOString(),signed_url:{full:n(17076),larg:n(17076),midd:n(17076),original:n(17076),prev:n(17076),smal:n(17076),tiny:n(17076)},asset_index:0,width:171,height:132,ver:0},{team_id:"",name:"logo-square.png",id:s.Z.generateAssetId(),createTime:new Date(e+20).toISOString(),signed_url:{full:n(26182),larg:n(26182),midd:n(26182),original:n(26182),prev:n(26182),smal:n(26182),tiny:n(26182)},asset_index:1,width:131,height:131,ver:0},{team_id:"",name:"logo-vertical.png",id:s.Z.generateAssetId(),createTime:new Date(e+10).toISOString(),signed_url:{full:n(80142),larg:n(80142),midd:n(80142),original:n(80142),prev:n(80142),smal:n(80142),tiny:n(80142)},asset_index:2,width:75,height:171,ver:0}],textStyleSetting:{headingStyle:this.createDefaultTextStyle("heading"),subheadingStyle:this.createDefaultTextStyle("subheading"),bodyStyle:this.createDefaultTextStyle("body")},colorPalettes:[{id:s.Z.generateAssetId(),createTime:new Date(e+50).toISOString(),name:"",colors:this.generateBrandColors(["#3C64B1","#276AEA","#19C84A","#FE7565","#FECD56","#FFCECE","#C9DBFF","#6B798B","#50A2D8","#409CB5","#00A0E9","#40A95E","#969BAB","#C3CBCD","#C3CBCD","#FFFFFF","#4469A0","#1877F2","#FF9900","#43EEED","#68B82B"])},{id:s.Z.generateAssetId(),createTime:new Date(e+40).toISOString(),name:"",colors:this.generateBrandColors(["#3C64B1","#276AEA","#19C84A","#FE7565","#FECD56","#FFCECE","#C9DBFF","#6B798B","#50A2D8","#409CB5","#00A0E9","#40A95E","#969BAB","#C3CBCD","#C3CBCD","#FFFFFF","#4469A0","#1877F2","#FF9900","#43EEED","#68B82B","#F84343","#EA273E","#55400C"])}]}}createDefaultBrand(){return{id:s.Z.generateAssetId(),createTime:(new Date).toISOString(),name:"",logos:[],textStyleSetting:{headingStyle:this.createDefaultTextStyle("heading"),subheadingStyle:this.createDefaultTextStyle("subheading"),bodyStyle:this.createDefaultTextStyle("body")},colorPalettes:[]}}createNullBrand(){return{id:"null",createTime:"",name:"",logos:[],textStyleSetting:{headingStyle:this.createDefaultTextStyle("heading"),subheadingStyle:this.createDefaultTextStyle("subheading"),bodyStyle:this.createDefaultTextStyle("body")},colorPalettes:[]}}createDefaultTextStyle(e){const t={fontId:"",fontUserId:"",fontAssetId:"",fontType:"",fontName:"",bold:!1,underline:!1,italic:!1,size:-1,isDefault:!0};switch(e){case"heading":t.size=60;break;case"subheading":t.size=34;break;case"body":t.size=24;break}return t}createDefaultPalette(){return{id:s.Z.generateAssetId(),createTime:(new Date).toISOString(),name:"",colors:[this.createDefaultColor()]}}createDefaultColor(){return{id:s.Z.generateAssetId(),createTime:(new Date).toISOString(),color:"#4EABE6"}}createDefaultFont(e){return{asset_index:-1,author:"",createTime:(new Date).toISOString(),favorite:0,file_ext:"",file_name:"",id:"new_"+e,name:"",team_id:"",updateTime:"",ver:0,font_family:""}}createDefaultLogo(e){return{team_id:"",name:"",id:"new_"+e,createTime:(new Date).toISOString(),asset_index:-1,width:24,height:24,ver:0}}checkIsNullBrand(e){return"null"===e.id}generateBrandColors(e){const t=Date.now();return e.map(((e,n)=>({id:s.Z.generateAssetId(),createTime:new Date(t+10*n).toISOString(),color:e})))}getTabNames(e){return e.includes("editor")?v:b}getTabKeys(){return Object.keys(b)}setBrandName(e,t){i.Z.dispatch("brandkit/setBrandName",{brand:e,newName:t})}addNewBrand(e){i.Z.dispatch("brandkit/createBrand",e)}copyBrand(e){i.Z.dispatch("brandkit/copyBrand",e)}removeBrand(e){i.Z.dispatch("brandkit/removeBrand",e).then((e=>{e&&this.fetchBrands((()=>f(this,null,(function*(){yield i.Z.dispatch("brandkit/fetchBrands")}))))}))}removeLogo(e){i.Z.dispatch("brandkit/removeLogo",e)}removePalette(e){i.Z.dispatch("brandkit/removePalette",e)}createPalette(){return f(this,null,(function*(){return yield i.Z.dispatch("brandkit/createPalette")}))}setPaletteName(e,t){i.Z.dispatch("brandkit/setPaletteName",{palette:e,newName:t})}removeColor(e,t){i.Z.dispatch("brandkit/removeColor",{paletteId:e,color:t})}updateColor(e,t){return f(this,null,(function*(){return yield i.Z.dispatch("brandkit/updateColor",{id:e,color:t})}))}updateColorTemp(e,t,n){i.Z.dispatch("brandkit/updateColorTemp",{paletteId:e,id:t,color:n})}createColor(e){i.Z.dispatch("brandkit/createColor",e)}removeFont(e){i.Z.dispatch("brandkit/removeFont",e)}deleteFont(e){i.Z.commit("brandkit/UPDATE_deleteFont",{id:e})}deleteLogo(e,t){i.Z.commit("brandkit/UPDATE_deleteLogo",{brand:{id:e},logo:{id:t}})}replaceFont(e,t){i.Z.commit("brandkit/UPDATE_replaceFont",{id:e,font:this.apiFont2IBrandFont(t)})}replaceLogo(e,t,n){const r=this.apiLogo2IBrandLogo(t);if(void 0===r.width||void 0===r.height){const t=this.getLogoUrl(r,n,"tiny");a.Z.getImageSize(t,24,24).then((t=>{t.exists?(r.width=t.width,r.height=t.height,i.Z.commit("brandkit/UPDATE_replaceLogo",{id:e,logo:r,brandId:n})):this.deleteLogo(n,e)}))}else i.Z.commit("brandkit/UPDATE_replaceLogo",{id:e,logo:r,brandId:n})}updateTextStyle(e,t){return f(this,null,(function*(){yield i.Z.dispatch("brandkit/updateTextStyle",{type:e,style:t})}))}createTempFont(e){const t=this.createDefaultFont(e);return i.Z.commit("brandkit/UPDATE_addFont",t),t.id}createTempLogo(e,t){const n=this.createDefaultLogo(t);return i.Z.commit("brandkit/UPDATE_addLogo",{brand:{id:e},logo:n}),n.id}fetchBrands(e,t=!0){t&&i.Z.commit("brandkit/SET_brands",[]),i.Z.commit("brandkit/SET_isBrandsLoading",!0),e().then((()=>{i.Z.commit("brandkit/SET_isBrandsLoading",!1)}))}fetchLogos(e,t=!0){t&&i.Z.commit("brandkit/SET_logos",[]),i.Z.commit("brandkit/SET_isLogosLoading",!0),e().then((()=>{i.Z.commit("brandkit/SET_isLogosLoading",!1)}))}fetchPalettes(e,t=!0){t&&i.Z.commit("brandkit/SET_palettes",[]),i.Z.commit("brandkit/SET_isPalettesLoading",!0),e().then((()=>{i.Z.commit("brandkit/SET_isPalettesLoading",!1)}))}fetchFonts(e,t=!0){t&&i.Z.commit("brandkit/SET_fonts",[]),i.Z.commit("brandkit/SET_isFontsLoading",!0),e().then((()=>{i.Z.commit("brandkit/SET_isFontsLoading",!1)}))}findInsertIndex(e,t,n=!1){const r=e.findIndex((e=>n!==Date.parse(e.createTime)<Date.parse(t.createTime)));return-1===r?e.length:r}findBrand(e,t){return e.find((e=>e.id===t))}getColor(e,t){const n=e.colorPalettes.find((e=>e.id===t.paletteId));if(n)return n.colors.find((e=>e.id===t.id))}getColorPalette(e,t){return e.find((e=>e.id===t))}getFont(e){return i.Z.getters["brandkit/getFonts"].find((t=>t.id===e))}getFontUrlMap(e){return i.Z.getters["brandkit/getFontUrlMap"](e)}refreshFontAsset(e){return f(this,null,(function*(){return yield i.Z.dispatch("brandkit/refreshFontAsset",e)}))}fillFontVer(e){if(void 0!==e.ver)return e;{const t=i.Z.getters["font/getFont"](e.fontFamily);return t?Object.assign({},e,{ver:t.ver}):Object.assign({},e,{ver:i.Z.getters["user/getVerUni"]})}}getFontPrevUrlByFontFamily({fontFamily:e,type:t,userId:n,assetId:r,ver:i},o){switch(t){case"public":return`https://template.vivipic.com/font/${e}/${o}?ver=${null!=i?i:s.Z.generateRandomString(6)}`;case"admin":return`https://template.vivipic.com/admin/${n}/asset/font/${r}/${o}?ver=${null!=i?i:s.Z.generateRandomString(6)}`;case"private":{const e=this.getFontUrlMap(r),t=null==e?void 0:e[o];return t?`${t}&ver=${null!=i?i:s.Z.generateRandomString(6)}`:""}default:return""}}getLogoByAssetIndex(e){return i.Z.getters["brandkit/getLogos"](i.Z.getters["brandkit/getCurrentBrandId"]).find((t=>t.asset_index===e))}duplicateEnd(e){var t;return y(m({},null!=(t=e[e.length-1])?t:this.createDefaultColor()),{id:s.Z.generateAssetId(),createTime:(new Date).toISOString()})}getCurrentValues(e,t){const n=e.textStyleSetting[`${t.type}Style`];if(!n)return{};const r={};for(const i of Object.keys(t.style))r[i]=n[i];return r.isDefault=n.isDefault,r}setDefaultFontInfo(e,t){const n=e.textStyleSetting[`${t.type}Style`];n&&(""!==n.fontId||t.style.fontId||(t.style.fontId=o.dL[`${r.Z.global.locale}`],t.style.fontName=w[`${r.Z.global.locale}`],t.style.fontType="public"))}extractFonts(e){return[this.extractFontsFromStyle(e.headingStyle),this.extractFontsFromStyle(e.subheadingStyle),this.extractFontsFromStyle(e.bodyStyle)]}extractFontsFromStyle(e){return{type:e.fontType,face:e.fontId,url:"",userId:e.fontUserId,assetId:e.fontAssetId,ver:i.Z.getters["user/getVerUni"]}}getUpdateStyleAPIEncoding(e){const t=Object.entries(e).map((([e,t])=>`${e}@${t}@`));return t.push("isDefault@false@"),t.join(",")}composeSettingText(e,t){return`${t},${e.fontName},${e.size}`}getDefaultFontId(e){return o.dL[e]}getDefaultFontName(e){return w[e]}getDefaultFontSize(e){return this.createDefaultTextStyle(e).size}getLogoUrl(e,t,n){return e.signed_url?e.signed_url[n]:`https://template.vivipic.com/admin/${e.team_id}/asset/logo/${t}/${e.id}/${n}?origin=true&ver=${e.ver}`}getDisplayedBrandName(e){return this.checkIsNullBrand(e)||""!==e.name?e.name:`${r.Z.global.t("NN0397")}`}getDisplayedPaletteName(e){return""===e.name?`${r.Z.global.t("NN0405")}`:e.name}getDisplayedName(e,t){switch(e){case"brand":return this.getDisplayedBrandName(t);case"palette":return this.getDisplayedPaletteName(t);default:return t.name}}apiLogo2IBrandLogo(e){var t;const n=m({},e);return delete n.create_time,delete n.asset_id,y(m({},n),{id:null!=(t=e.id)?t:e.asset_index.toString(),createTime:e.create_time})}apiFont2IBrandFont(e){var t;const n=m({},e);return delete n.create_time,delete n.update_time,y(m({},n),{id:null!=(t=e.id)?t:e.asset_index.toString(),createTime:e.create_time,updateTime:e.update_time})}setMobileDeleteItemFromPhoto(e){const t=this.getLogoByAssetIndex(e);if(!t)return console.log(`logo with assetIndex: ${e} is not found`);this.setMobileDeleteItem({type:"logo",content:t})}setMobileDeleteItem(e){i.Z.commit("brandkit/SET_mobileDeleteBuffer",e),i.Z.commit("brandkit/SET_isMobileConfirmOpen",!0)}}t["Z"]=new N},89995:function(e,t,n){"use strict";n.d(t,{G3:function(){return h},Ik:function(){return p},Rw:function(){return P},p3:function(){return k},pK:function(){return f}});var r=n(89497),i=n(75231),o=n(53650),s=n(60410),a=n(32905),l=Object.defineProperty,c=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t,n)=>(c(e,"symbol"!==typeof t?t+"":t,n),n);const u="_st";class g{constructor(){d(this,"event"),d(this,"eventHash"),d(this,"colorMap"),this.event=new o.EventEmitter,this.eventHash={},this.colorMap=new Map([["blue-1","#4EABE6"],["blue-2","#7190CC"],["blue-3","#C9DBFF"],["blue-4","#E7EFFF"],["blue-5","#ebf4fa"],["blue-hover","#2DB3FF"],["blue-active","#4279CC"],["dark-blue","#113251"],["dark-blue-2","#09467E"],["bu","#3C64B1"],["gray-0","#000000"],["gray-1","#18191F"],["gray-1-5","#2C2F43"],["gray-2-7","#828282"],["gray-2-5","#7f8186"],["gray-2","#474A57"],["gray-3","#969BAB"],["gray-4","#D9DBE1"],["gray-5","#EEEFF4"],["gray-6","#F4F5F7"],["gray-7","#F8F8F8"],["light-gray","#C3CBCD"],["white","#FFFFFF"],["nav","#14182A"],["nav-design","#373B53"],["nav-active","#2C2F43"],["nav-input","#2D3143"],["sidebar-panel","#2C2F43"],["red","#EB5757"],["red-1","#C74848"],["red-2","#F05B5B"],["green-1","#4DB433"],["green-2","#27ae60"],["yellow","#FFECA8"],["orange","#F28606"],["alarm","#FFBA49"]])}get currPageBackgroundColor(){return a.Z.currFocusPage.backgroundColor}get currEvent(){return r.Z.getters["color/currEvent"]}get currColor(){return r.Z.getters["color/currColor"]}get currStopEvent(){return this.currEvent+u}get globalSelectedColor(){const e=i.ZP.getCurrPage,{subLayerIdx:t}=i.ZP;let n=i.ZP.getCurrLayer;"group"!==n.type&&"tmp"!==n.type||-1===t||(n=n.layers[t]);let o=[],a=[];const l=this.currColor;function c(e){return 0===e.length?"none":1===e.length?e[0]:"multi"}switch(n.type){case"text":o=(0,s.uniq)((0,s.flatten)(n.paragraphs.map((e=>e.spans.map((e=>e.styles.color))))));break;case"frame":{const{decoration:e,decorationTop:t}=n;a=[...(null==e?void 0:e.color)||[],...(null==t?void 0:t.color)||[]];break}case"image":a=[n.styles.shadow.effects.color];break;case"shape":a=n.color;break;case"tmp":case"group":{const e=n.layers.filter((e=>"shape"===e.type&&1===e.color.length)),t=n.layers.filter((e=>"shape"===e.type&&1!==e.color.length)),r=0!==n.layers.filter((e=>"image"===e.type)).length,i=(0,s.uniq)(e.map((e=>e.color[0])));a=r||0===e.length&&1!==t.length?[]:0===e.length&&1===t.length?t[0].color:i;const l=(0,s.filter)(n.layers,{type:"text"});o=(0,s.uniq)((0,s.flatten)((0,s.flatten)(l.map((e=>e.paragraphs.map((e=>e.spans.map((e=>e.styles.color)))))))));break}default:{const t=e.backgroundImage.config.srcObj.assetId?["none","none"]:[e.backgroundColor];a=r.Z.getters["mobileEditor/getInBgSettingMode"]?t:[]}}const d=c(o),u=c(a);return{textColor:d,textColors:o,color:u,colors:a,currEventColor:l}}on(e,t){this.eventHash[e]&&(this.event.off(e,this.eventHash[e]),delete this.eventHash[e]),this.event.on(e,t),this.eventHash[e]=t}onStop(e,t){this.on(e+u,t)}offStop(e,t){this.event.off(e+u,t)}setCurrEvent(e){r.Z.commit("color/SET_STATE",{currEvent:e})}setCurrColor(e){/^#[0-9A-F]{6}$/i.test(e)&&r.Z.commit("color/SET_STATE",{currColor:e})}setCurrPageBackgroundColor(e){r.Z.commit("SET_backgroundColor",{pageIndex:a.Z.currFocusPageIndex,color:e})}}function p(e,t){const n=r.Z.getters.getPage(e),i=new Set,o=e=>{e.forEach((e=>{switch(e.type){case"text":e.paragraphs.forEach((e=>{e.spans.forEach((e=>{i.has(e.styles.color)||i.add(e.styles.color)}))}));break;case"shape":{const t=e;for(let e=0;t.color&&e<t.color.length&&e<20;e++)i.has(t.color[e])||i.add(t.color[e])}break;case"group":o(e.layers)}}))};return o(n.layers),i.delete(t),t?[t,...i].splice(0,50):[...i].splice(0,50)}function h(e){return null!==e.toUpperCase().match(/^#[0-9A-F]{6}$/)}function m(e){return 1===e.toString(16).length?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase()}function y(e){const t=e.match(/\d+/g);return t&&3===t.length?"#"+m(parseInt(t[0]))+m(parseInt(t[1]))+m(parseInt(t[2])):e}function f(e){return h(e)?e:y(e)}function b(e){const t=e.replace("#","").toUpperCase().match(/[0-9A-F]{2}/g);return 3!==(null==t?void 0:t.length)?[255,255,255]:t.map((e=>parseInt(e,16)))}function v(e){const[t,n,r]=b(e).map((e=>e/255)).map((e=>e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)).map((e=>100*e));return[.412453*t+.35758*n+.180423*r,.212671*t+.71516*n+.072169*r,.019334*t+.119193*n+.950227*r]}t["ZP"]=new g;const w=95.047,N=100,S=108.883;function x(e){function t(e){return e>.008856?Math.pow(e,1/3):7.787*e+16/116}let[n,r,i]=e;n=t(n/w),r=t(r/N),i=t(i/S);const o=116*r-16,s=500*(n-r),a=200*(r-i);return[o,s,a]}function P(e){return x(v(e))}function I(e){function t(e){return Math.pow(e,3)>.008856?Math.pow(e,3):(e-16/116)/7.787}const[n,r,i]=e;let o=(n+16)/116;const s=t(r/500+o)*w,a=t(o-i/200)*S;return o=t(o)*N,[s,o,a]}function _(e){e=e.map((e=>e/100));const[t,n,r]=e;let i=[3.240479*t+-1.53715*n+-.498535*r,-.969256*t+1.875991*n+.041556*r,.055648*t+-.204043*n+1.057311*r];return i=i.map((e=>e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e)).map((e=>255*e)).map((e=>(0,s.clamp)(e,0,255))),y(`rgb(${i[0]}, ${i[1]}, ${i[2]})`)}function k(e){return _(I(e))}},20083:function(e,t,n){"use strict";n.d(t,{Y:function(){return x}});var r=n(23931),i=n(28253),o=n(52495),s=n(89497),a=n(6295),l=n(65144),c=n(86914),d=n(60410),u=n.n(d),g=n(47147),p=n(4821),h=Object.defineProperty,m=Object.defineProperties,y=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,w=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t)=>{for(var n in t||(t={}))b.call(t,n)&&w(e,n,t[n]);if(f)for(var n of f(t))v.call(t,n)&&w(e,n,t[n]);return e},S=(e,t)=>m(e,y(t)),x=(e=>(e[e["iPhone"]=0]="iPhone",e[e["iPad"]=1]="iPad",e[e["AndroidPhone"]=2]="AndroidPhone",e[e["AndroidTablet"]=3]="AndroidTablet",e[e["Mac"]=4]="Mac",e[e["Win"]=5]="Win",e[e["Other"]=6]="Other",e))(x||{});class P{get isLogin(){return s.Z.getters["user/isLogin"]}headerItems(e=!1){const t=window.location.host,n=`http${t.startsWith("localhost")?"":"s"}://${t}`;function i(e){var t,r,i,o;if(e instanceof Array){let o=null==(r=null==(t=u().filter(s.Z.getters.getEditThemes,(t=>e.includes(t.id))))?void 0:t[0])?void 0:r.title;return o=null==(i=null==o?void 0:o.split("("))?void 0:i[0],{label:o,url:`${n}/templates?themes=${e.join(",")}&sort=recent`}}{const t=null==(o=u().filter(s.Z.getters.getEditThemes,["id",e]))?void 0:o[0];return{label:null==t?void 0:t.title,url:`${n}/templates?themes=${e}&sort=recent`}}}const a={tw:[{label:r.Z.global.t("NN0667"),content:[{label:"FB 貼文",url:"https://blog.vivipic.com/tw/facebook-post/"},{label:"FB 粉絲頁封面",url:"https://blog.vivipic.com/tw/facebook-cover-2/"},{label:"IG 貼文",url:"https://blog.vivipic.com/tw/ig-post-design/"},...[3,9,4].map((e=>i(e))),{label:"LINE 圖文選單",url:"https://blog.vivipic.com/tw/line-official-account/"},...[21].map((e=>i(e)))]},{label:r.Z.global.t("NN0668"),content:[{label:"電商商品圖",url:"https://blog.vivipic.com/tw/ecimage/"},{label:"電商 Banner",url:"https://blog.vivipic.com/tw/ec-banner/"},{label:"電商詳情頁",url:"https://blog.vivipic.com/tw/ec-landingpage/"}]},{label:r.Z.global.t("NN0669"),content:[{label:"喜帖",url:"https://blog.vivipic.com/tw/wedding-invitation/"},{label:"結婚書約",url:"https://blog.vivipic.com/tw/marriage-contract/"},{label:"邀請卡",url:"https://blog.vivipic.com/tw/invitation-card/"},...[20,19,18,22].map((e=>i(e))),{label:r.Z.global.t("NN0790",{type:r.Z.global.tc("NN0001",3)}),url:r.Z.global.t("NN0791"),newTab:!0}]}],us:[{label:r.Z.global.t("NN0667"),content:[...[1].map((e=>i(e))),{label:"Facebook Cover",url:"https://blog.vivipic.com/us/facebook-cover/"},...[2,3].map((e=>i(e))),{label:"Youtube Thumbnail",url:"https://blog.vivipic.com/us/youtube-thumbnail/"},{label:"Profile Picture (PFP)",url:"https://blog.vivipic.com/us/pfp-profile-pictures/"}]},{label:r.Z.global.t("NN0668"),content:[5,6].map((e=>i(e)))},{label:r.Z.global.t("NN0669"),content:[{label:"Invitation",url:"https://blog.vivipic.com/us/invitations/"},{label:"Polaroid Frame",url:"https://blog.vivipic.com/us/free-polaroid-frame-templates/"},{label:r.Z.global.t("NN0790",{type:r.Z.global.tc("NN0001",3)}),url:r.Z.global.t("NN0791"),newTab:!0}]}],jp:[{label:r.Z.global.t("NN0667"),content:[...[1,8,2,3,4,9].map((e=>i(e))),{label:"プロフィール写真",url:"https://blog.vivipic.com/jp/pfp-profile-pictures-2/"}]},{label:r.Z.global.t("NN0668"),content:[5,6,7].map((e=>i(e)))},{label:r.Z.global.t("NN0669"),content:[{label:"ポラロイドフレーム",url:"https://blog.vivipic.com/jp/free-polaroid-frame-templates-2/"},{label:"招待状",url:"https://blog.vivipic.com/jp/invitation/"},{label:r.Z.global.t("NN0790",{type:r.Z.global.tc("NN0001",3)}),url:r.Z.global.t("NN0791"),newTab:!0}]}]}[r.Z.global.locale],l={tw:[{label:r.Z.global.t("NN0671"),url:"https://blog.vivipic.com/tw/"},{label:r.Z.global.t("NN0672"),content:[{label:r.Z.global.t("NN0673"),url:"https://blog.vivipic.com/tw/tutorial/"},{label:r.Z.global.t("NN0147"),url:"https://blog.vivipic.com/tw/faq/"},{label:"特色功能",url:"https://blog.vivipic.com/tw/features/"},{label:r.Z.global.t("NN0790",{type:r.Z.global.tc("NN0793",1)}),url:r.Z.global.t("NN0791"),newTab:!0}]},{label:r.Z.global.t("NN0674"),content:[{label:r.Z.global.t("NN0675"),url:"https://blog.vivipic.com/tw/新手入門/"},{label:r.Z.global.t("NN0676"),url:"https://blog.vivipic.com/tw/設計教學/"},{label:r.Z.global.t("NN0677"),url:"https://blog.vivipic.com/tw/數位行銷/"},{label:r.Z.global.t("NN0678"),url:"https://blog.vivipic.com/tw/趨勢分享/"}]}],us:[{label:"Features",content:[{label:"Objects",url:"https://blog.vivipic.com/us/objects/"}]},{label:r.Z.global.t("NN0672"),content:[{label:r.Z.global.t("NN0673"),url:"https://blog.vivipic.com/us/us-tutorial/"},{label:r.Z.global.t("NN0147"),url:"https://blog.vivipic.com/us/us-faq/"},{label:r.Z.global.t("NN0790",{type:r.Z.global.tc("NN0793",1)}),url:r.Z.global.t("NN0791"),newTab:!0}]},{label:r.Z.global.t("NN0671"),url:"https://blog.vivipic.com/us/",content:[{label:r.Z.global.t("NN0675"),url:"https://blog.vivipic.com/us/category/tutorial-us/"},{label:r.Z.global.t("NN0676"),url:"https://blog.vivipic.com/us/category/design-us/"},{label:r.Z.global.t("NN0677"),url:"https://blog.vivipic.com/us/category/digital-marketing-us/"},{label:r.Z.global.t("NN0678"),url:"https://blog.vivipic.com/us/category/trend-us/"}]}],jp:[{label:r.Z.global.t("NN0671"),url:"https://blog.vivipic.com/jp/"},{label:r.Z.global.t("NN0672"),content:[{label:r.Z.global.t("NN0673"),url:"https://blog.vivipic.com/jp/4step/"},{label:r.Z.global.t("NN0790",{type:r.Z.global.tc("NN0793",1)}),url:r.Z.global.t("NN0791"),newTab:!0}]},{label:r.Z.global.t("NN0674"),content:[{label:r.Z.global.t("NN0677"),url:"https://blog.vivipic.com/jp/category/digital-marketing-jp/"}]}]}[r.Z.global.locale],c="tw"===r.Z.global.locale?{singleLayer:!0,label:r.Z.global.t("NN0643"),content:[{label:r.Z.global.t("NN0643"),url:"/pricing"},{label:"政府輔助方案",url:"https://blog.vivipic.com/tw/tcloud/"}]}:{name:"Pricing",url:"/pricing",label:r.Z.global.t("NN0643")},d=[{label:r.Z.global.t("NN0666"),content:a},{name:"TemplateCenter",url:"TemplateCenter"===o.Z.currentRoute.value.name?`${n}/templates`:"/templates",label:r.Z.global.t("NN0145")},{label:r.Z.global.t("NN0670"),content:l},...g.Z.inReviewMode?[]:[c],{hidden:!this.isLogin,name:"MyDesign",url:"/mydesign",label:r.Z.global.t("NN0080")},{hidden:!this.isLogin,name:"BrandKit",url:"/brandkit",label:r.Z.global.t("NN0007")}];return p.Z.checkThemeState(),e?u().filter(d,(e=>"BrandKit"!==e.name)):d}toOptions(e,t=""){const o={distance:r.Z.global.tc("NN0063"),angle:r.Z.global.tc("NN0064"),blur:r.Z.global.tc("NN0065"),opacity:r.Z.global.tc("NN0066"),color:r.Z.global.tc("NN0067"),colorOut:r.Z.global.tc("NN0890"),colorIn:r.Z.global.tc("NN0891"),spread:r.Z.global.tc("NN0068"),stroke:r.Z.global.tc("NN0069"),strokeOut:r.Z.global.tc("NN0892"),strokeIn:r.Z.global.tc("NN0893"),shape:r.Z.global.tc("NN0070"),bend:r.Z.global.tc("NN0071"),bStroke:r.Z.global.tc("NN0733"),bColor:r.Z.global.tc("NN0734"),bRadius:r.Z.global.tc("NN0086"),pStrokeY:r.Z.global.tc("NN0319"),pColor:r.Z.global.tc("NN0735"),height:r.Z.global.tc("NN0319"),yOffset:r.Z.global.tc("NN0424"),xOffset200:r.Z.global.tc("NN0425"),yOffset200:r.Z.global.tc("NN0424"),distanceInverse:r.Z.global.tc("NN0737"),textStrokeColor:r.Z.global.tc("NN0739"),shadowStrokeColor:r.Z.global.tc("NN0740"),endpoint:r.Z.global.tc("NN0738"),size:r.Z.global.tc("NN0815"),lineHeight:r.Z.global.tc("NN0110"),fontSpacing:r.Z.global.tc("NN0109"),img:r.Z.global.t("NN0870"),customImg:r.Z.global.t("NN0871"),tailOffset:r.Z.global.tc("NN0886"),tailPosition:r.Z.global.tc("NN0887")};return e.map((e=>{const s={key:e,label:o[e],type:"range"};switch(e.toLocaleLowerCase().includes("color")&&(s.type="color"),"customImg"===e&&(s.type="img"),e){case"endpoint":s.type="select",s.select=["triangle","rounded","square"].map(((e,t)=>({key:e,plan:0,img:n(79127)(`./endpoint-${e}.svg`),label:r.Z.global.tc(`NN073${t}`),preset:{endpoint:e}})));break;case"tailPosition":s.type="select",s.select=i.eg.map((e=>({key:e,plan:0,img:n(10564)(`./tail${"speech-bubble-triangle"===t?"-triangle":""}-${e}.png`),label:e,preset:{tailPosition:e}})));break;case"angle":Object.assign(s,{min:-180,max:180});break;case"bend":case"xOffset200":case"yOffset200":Object.assign(s,{min:-100,max:100});break;case"size":"fill-img"===t?Object.assign(s,{min:100,max:200}):Object.assign(s,{min:50,max:250});break;case"lineHeight":Object.assign(s,S(N({},l.h.lineHeight),{isPStyle:!0}));break;case"fontSpacing":Object.assign(s,S(N({},l.h.letterSpacing),{isPStyle:!0}));break;default:Object.assign(s,{min:0,max:100});break}return s}))}textEffects(){function e(e){const t=[];e.forEach((e=>{e.plan=e.plan||0}));while(e.length)t.push(e.splice(0,3));return t}const t=this.toOptions,n=[{name:"shadow",label:r.Z.global.t("NN0112"),effects2d:e([{key:"none",label:r.Z.global.t("NN0111"),options:[]},{key:"shadow",label:r.Z.global.t("NN0112"),options:t(["distance","angle","blur","opacity","color"])},{key:"lift",label:r.Z.global.t("NN0113"),options:t(["spread"])},{key:"hollow",label:r.Z.global.t("NN0114"),options:t(["stroke"])},{key:"splice",label:r.Z.global.t("NN0115"),options:t(["stroke","distance","angle","color"])},{key:"echo",label:r.Z.global.t("NN0116"),options:t(["distance","angle","color"])},{key:"funky3d",label:r.Z.global.tc("NN0728"),options:t(["distance","distanceInverse","angle","opacity","color"])},{key:"bold3d",label:r.Z.global.tc("NN0729"),options:t(["distance","angle","opacity","textStrokeColor","shadowStrokeColor","color"])},{key:"outline",label:r.Z.global.tc("NN0894"),options:t(["strokeOut","strokeIn","opacity","colorOut","colorIn"])}])},{name:"shape",label:r.Z.global.t("NN0070"),effects2d:e([{key:"none",label:r.Z.global.t("NN0117"),options:[]},{key:"curve",label:r.Z.global.t("NN0118"),options:t(["bend"])}])},{name:"bg",label:r.Z.global.tc("NN0719"),effects2d:e([{key:"none",label:r.Z.global.t("NN0111"),options:[]},{key:"square-borderless",label:r.Z.global.tc("NN0720"),options:t(["opacity","pStrokeY","pColor"])},{key:"rounded-borderless",label:r.Z.global.tc("NN0721"),options:t(["opacity","bRadius","pStrokeY","pColor"])},{key:"square-hollow",label:r.Z.global.tc("NN0722"),options:t(["opacity","bStroke","pStrokeY","bColor"])},{key:"rounded-hollow",label:r.Z.global.tc("NN0723"),options:t(["opacity","bRadius","bStroke","pStrokeY","bColor"])},{key:"square-both",label:r.Z.global.tc("NN0724"),options:t(["opacity","bStroke","pStrokeY","bColor","pColor"])},{key:"rounded-both",label:r.Z.global.tc("NN0725"),options:t(["opacity","bRadius","bStroke","pStrokeY","bColor","pColor"])},{key:"speech-bubble",label:r.Z.global.tc("NN0884"),options:t(["tailPosition","tailOffset","pStrokeY","opacity","pColor"],"speech-bubble")},{key:"speech-bubble-triangle",label:r.Z.global.tc("NN0885"),options:t(["tailPosition","tailOffset","bRadius","pStrokeY","opacity","pColor"],"speech-bubble-triangle")},{key:"gooey",label:r.Z.global.tc("NN0726"),options:t(["distance","bRadius","opacity","color"])},{key:"underline",label:r.Z.global.tc("NN0727"),plan:1,options:t(["endpoint","height","yOffset","opacity","color"])},...a.Z.getEffects()])},{name:"fill",label:r.Z.global.t("NN0868"),effects2d:e([{key:"none",label:r.Z.global.t("NN0111"),options:[]},{key:"custom-fill-img",label:r.Z.global.t("NN0869"),plan:1,options:[...t(["customImg","xOffset200","yOffset200","size","opacity"])]},...c.Z.fillCategories])}];return n}settingsItems(){const e=[{name:"account",label:r.Z.global.tc("NN0165",1),icon:"settings"},{name:"security",label:r.Z.global.tc("NN0166",1),icon:"lock"},...g.Z.inReviewMode?[]:[{name:"hr"},{name:"payment",label:r.Z.global.t("NN0585"),icon:"pro"},{name:"billing",label:r.Z.global.t("NN0614"),icon:"invoice"}]];return e}pricingColorBlock(){return[{name:"vector_pink1.svg",top:171,left:-129},{name:"vector_green1.svg",top:82,left:70},{name:"vector_blue2.svg",top:-27,left:363},{name:"oval_yellow1.svg",top:73,left:597}]}periodOptions(){return[{label:r.Z.global.t("NN0514"),value:"monthly"},{label:r.Z.global.t("NN0515"),value:"yearly"}]}compareTable(){return[r.Z.global.t("NN0520"),r.Z.global.t("NN0521"),r.Z.global.t("NN0522"),r.Z.global.t("NN0523"),"-",!0,r.Z.global.t("NN0524"),!0,!0,r.Z.global.t("NN0525"),!0,!0,r.Z.global.t("NN0526"),"1GB","100GB",r.Z.global.t("NN0527"),!0,!0,r.Z.global.t("NN0528"),"-",!0,r.Z.global.t("NN0529"),"-",!0,r.Z.global.t("NN0530"),"-",!0,r.Z.global.t("NN0531"),!0,!0,r.Z.global.t("NN0532"),!0,!0]}addLink(e){var t,n;const r=null==(t=e.match(/(https:\/\/[\w./]+)/))?void 0:t[0];e=e.replace(r,`<a href=${r}>${r}</a>`);const i=null==(n=e.match(/([\w]+@vivipic.com)/))?void 0:n[0];return e=e.replace(i,`<a href=mailto:${i}>${i}</a>`),e}faqs(){return[{Q:r.Z.global.t("NN0534"),A:r.Z.global.t("NN0535")},{Q:r.Z.global.t("NN0536"),A:this.addLink(r.Z.global.t("NN0537"))},{Q:r.Z.global.t("NN0538"),A:this.addLink(r.Z.global.t("NN0539"))},{Q:r.Z.global.t("NN0540"),A:r.Z.global.t("NN0541")},{Q:r.Z.global.t("NN0542"),A:r.Z.global.t("NN0543")},{isPath:!0,Q:r.Z.global.t("NN0650"),A:"NN0651"}]}cancel1(){return[r.Z.global.t("NN0570"),r.Z.global.t("NN0571"),r.Z.global.t("NN0572"),r.Z.global.t("NN0573"),r.Z.global.t("NN0769"),r.Z.global.t("NN0805"),r.Z.global.t("NN0842"),r.Z.global.t("NN0844")]}cancel2(){return[r.Z.global.t("NN0577"),r.Z.global.t("NN0578"),r.Z.global.t("NN0579"),r.Z.global.t("NN0580"),r.Z.global.t("NN0581"),r.Z.global.t("NN0582")]}tappayConfig(){return{fields:{number:{element:"#card-number",placeholder:"💳 信用卡卡號"},expirationDate:{element:"#card-date",placeholder:"到期日(MM / YY)"},ccv:{element:"#card-ccv",placeholder:"信用卡安全碼"}},styles:{input:{color:"#969BAB","font-size":"16px"},":focus":{color:"black"},".valid":{color:"green"},".invalid":{color:"red"}}}}stripeOption(){return{fields:{billingDetails:{address:{country:"never"}}},terms:{card:"never"},wallets:{applePay:"never",googlePay:"never"}}}country(){return[{label:"country",key:"country"}]}gerneral(){return[{label:r.Z.global.tc("NN0173",1),ph:r.Z.global.t("NN0602"),key:"email",error:r.Z.global.t("NN0297")},{label:r.Z.global.t("NN0172"),ph:r.Z.global.t("NN0603"),key:"name"}]}TWonly(){return[{label:r.Z.global.t("NN0557"),ph:r.Z.global.t("NN0557"),key:"phone",error:r.Z.global.t("NN0632")},{label:r.Z.global.t("NN0558"),ph:r.Z.global.t("NN0559"),key:"GUI",optional:!0,error:r.Z.global.t("NN0633")}]}USonly(){return[{label:r.Z.global.t("NN0604"),ph:r.Z.global.t("NN0605"),key:"company",optional:!0},{label:r.Z.global.t("NN0608",{number:1}),ph:r.Z.global.t("NN0609"),key:"address1"},{label:r.Z.global.t("NN0608",{number:2}),ph:r.Z.global.t("NN0610"),key:"address2",optional:!0},{label:r.Z.global.t("NN0611"),ph:r.Z.global.t("NN0611"),key:"city"},{label:"state & zip",key:"zip",error:r.Z.global.t("NN0634")}]}others(){return[{label:r.Z.global.t("NN0604"),ph:r.Z.global.t("NN0605"),key:"company",optional:!0},{label:r.Z.global.t("NN0606"),ph:r.Z.global.t("NN0607"),key:"address1"}]}countryList(){return[{value:"af",label:"Afghanistan"},{value:"ax",label:"Åland Islands"},{value:"al",label:"Albania"},{value:"dz",label:"Algeria"},{value:"as",label:"American Samoa"},{value:"ad",label:"Andorra"},{value:"ao",label:"Angola"},{value:"ai",label:"Anguilla"},{value:"aq",label:"Antarctica"},{value:"ag",label:"Antigua and Barbuda"},{value:"ar",label:"Argentina"},{value:"am",label:"Armenia"},{value:"aw",label:"Aruba"},{value:"au",label:"Australia"},{value:"at",label:"Austria"},{value:"az",label:"Azerbaijan"},{value:"bs",label:"Bahamas"},{value:"bh",label:"Bahrain"},{value:"bd",label:"Bangladesh"},{value:"bb",label:"Barbados"},{value:"by",label:"Belarus"},{value:"be",label:"Belgium"},{value:"bz",label:"Belize"},{value:"bj",label:"Benin"},{value:"bm",label:"Bermuda"},{value:"bt",label:"Bhutan"},{value:"bo",label:"Bolivia"},{value:"bq",label:"Bonaire, Sint Eustatius and Saba"},{value:"ba",label:"Bosnia and Herzegovina"},{value:"bw",label:"Botswana"},{value:"br",label:"Brazil"},{value:"io",label:"British Indian Ocean Territory"},{value:"bn",label:"Brunei Darussalam"},{value:"bg",label:"Bulgaria"},{value:"bf",label:"Burkina Faso"},{value:"bi",label:"Burundi"},{value:"kh",label:"Cambodia"},{value:"cm",label:"Cameroon"},{value:"ca",label:"Canada"},{value:"cv",label:"Cape Verde"},{value:"ky",label:"Cayman Islands"},{value:"cf",label:"Central African Republic"},{value:"td",label:"Chad"},{value:"cl",label:"Chile"},{value:"cn",label:"China"},{value:"cx",label:"Christmas Island"},{value:"cc",label:"Cocos (Keeling) Islands"},{value:"co",label:"Colombia"},{value:"km",label:"Comoros"},{value:"cg",label:"Congo"},{value:"cd",label:"Congo, The Democratic Republic of the"},{value:"ck",label:"Cook Islands"},{value:"cr",label:"Costa Rica"},{value:"ci",label:"Côte d'Ivoire"},{value:"hr",label:"Croatia"},{value:"cu",label:"Cuba"},{value:"cw",label:"Curaçao"},{value:"cy",label:"Cyprus"},{value:"cz",label:"Czech Republic"},{value:"dk",label:"Denmark"},{value:"dj",label:"Djibouti"},{value:"dm",label:"Dominica"},{value:"do",label:"Dominican Republic"},{value:"ec",label:"Ecuador"},{value:"eg",label:"Egypt"},{value:"sv",label:"El Salvador"},{value:"gq",label:"Equatorial Guinea"},{value:"er",label:"Eritrea"},{value:"ee",label:"Estonia"},{value:"sz",label:"Eswatini"},{value:"et",label:"Ethiopia"},{value:"fk",label:"Falkland Islands (Malvinas)"},{value:"fo",label:"Faroe Islands"},{value:"fj",label:"Fiji"},{value:"fi",label:"Finland"},{value:"fr",label:"France"},{value:"gf",label:"French Guiana"},{value:"pf",label:"French Polynesia"},{value:"tf",label:"French Southern Territories"},{value:"ga",label:"Gabon"},{value:"gm",label:"Gambia"},{value:"ge",label:"Georgia"},{value:"de",label:"Germany"},{value:"gh",label:"Ghana"},{value:"gi",label:"Gibraltar"},{value:"gr",label:"Greece"},{value:"gl",label:"Greenland"},{value:"gd",label:"Grenada"},{value:"gp",label:"Guadeloupe"},{value:"gu",label:"Guam"},{value:"gt",label:"Guatemala"},{value:"gg",label:"Guernsey"},{value:"gn",label:"Guinea"},{value:"gw",label:"Guinea-Bissau"},{value:"gy",label:"Guyana"},{value:"ht",label:"Haiti"},{value:"hm",label:"Heard Island and McDonald Islands"},{value:"va",label:"Holy See (Vatican City State)"},{value:"hn",label:"Honduras"},{value:"hk",label:"Hong Kong"},{value:"hu",label:"Hungary"},{value:"is",label:"Iceland"},{value:"in",label:"India"},{value:"id",label:"Indonesia"},{value:"xz",label:"Installations in International Waters"},{value:"ir",label:"Iran, Islamic Republic of"},{value:"iq",label:"Iraq"},{value:"ie",label:"Ireland"},{value:"im",label:"Isle of Man"},{value:"il",label:"Israel"},{value:"it",label:"Italy"},{value:"jm",label:"Jamaica"},{value:"jp",label:"Japan"},{value:"je",label:"Jersey"},{value:"jo",label:"Jordan"},{value:"kz",label:"Kazakhstan"},{value:"ke",label:"Kenya"},{value:"ki",label:"Kiribati"},{value:"kp",label:"Korea, Democratic People's Republic of"},{value:"kr",label:"Korea, Republic of"},{value:"kw",label:"Kuwait"},{value:"kg",label:"Kyrgyzstan"},{value:"la",label:"Lao People's Democratic Republic"},{value:"lv",label:"Latvia"},{value:"lb",label:"Lebanon"},{value:"ls",label:"Lesotho"},{value:"lr",label:"Liberia"},{value:"ly",label:"Libya"},{value:"li",label:"Liechtenstein"},{value:"lt",label:"Lithuania"},{value:"lu",label:"Luxembourg"},{value:"mo",label:"Macao"},{value:"mg",label:"Madagascar"},{value:"mw",label:"Malawi"},{value:"my",label:"Malaysia"},{value:"mv",label:"Maldives"},{value:"ml",label:"Mali"},{value:"mt",label:"Malta"},{value:"mh",label:"Marshall Islands"},{value:"mq",label:"Martinique"},{value:"mr",label:"Mauritania"},{value:"mu",label:"Mauritius"},{value:"yt",label:"Mayotte"},{value:"mx",label:"Mexico"},{value:"fm",label:"Micronesia, Federated States of"},{value:"md",label:"Moldova, Republic of"},{value:"mc",label:"Monaco"},{value:"mn",label:"Mongolia"},{value:"me",label:"Montenegro"},{value:"ms",label:"Montserrat"},{value:"ma",label:"Morocco"},{value:"mz",label:"Mozambique"},{value:"mm",label:"Myanmar"},{value:"na",label:"Namibia"},{value:"nr",label:"Nauru"},{value:"np",label:"Nepal"},{value:"nl",label:"Netherlands"},{value:"nc",label:"New Caledonia"},{value:"nz",label:"New Zealand"},{value:"ni",label:"Nicaragua"},{value:"ne",label:"Niger"},{value:"ng",label:"Nigeria"},{value:"nu",label:"Niue"},{value:"nf",label:"Norfolk Island"},{value:"mk",label:"North Macedonia"},{value:"mp",label:"Northern Mariana Islands"},{value:"no",label:"Norway"},{value:"om",label:"Oman"},{value:"pk",label:"Pakistan"},{value:"pw",label:"Palau"},{value:"ps",label:"Palestine, State of"},{value:"pa",label:"Panama"},{value:"pg",label:"Papua New Guinea"},{value:"py",label:"Paraguay"},{value:"pe",label:"Peru"},{value:"ph",label:"Philippines"},{value:"pn",label:"Pitcairn"},{value:"pl",label:"Poland"},{value:"pt",label:"Portugal"},{value:"pr",label:"Puerto Rico"},{value:"qa",label:"Qatar"},{value:"re",label:"Reunion"},{value:"ro",label:"Romania"},{value:"ru",label:"Russian Federation"},{value:"rw",label:"Rwanda"},{value:"bl",label:"Saint Barthélemy"},{value:"sh",label:"Saint Helena, Ascension and Tristan Da Cunha"},{value:"kn",label:"Saint Kitts and Nevis"},{value:"lc",label:"Saint Lucia"},{value:"mf",label:"Saint Martin (French Part)"},{value:"pm",label:"Saint Pierre and Miquelon"},{value:"vc",label:"Saint Vincent and the Grenadines"},{value:"ws",label:"Samoa"},{value:"sm",label:"San Marino"},{value:"st",label:"Sao Tome and Principe"},{value:"sa",label:"Saudi Arabia"},{value:"sn",label:"Senegal"},{value:"rs",label:"Serbia"},{value:"sc",label:"Seychelles"},{value:"sl",label:"Sierra Leone"},{value:"sg",label:"Singapore"},{value:"sx",label:"Sint Maarten (Dutch Part)"},{value:"sk",label:"Slovakia"},{value:"si",label:"Slovenia"},{value:"sb",label:"Solomon Islands"},{value:"so",label:"Somalia"},{value:"za",label:"South Africa"},{value:"gs",label:"South Georgia and the South Sandwich Islands"},{value:"ss",label:"South Sudan"},{value:"es",label:"Spain"},{value:"lk",label:"Sri Lanka"},{value:"sd",label:"Sudan"},{value:"sr",label:"Suriname"},{value:"sj",label:"Svalbard and Jan Mayen"},{value:"se",label:"Sweden"},{value:"ch",label:"Switzerland"},{value:"sy",label:"Syrian Arab Republic"},{value:"tw",label:"Taiwan"},{value:"tj",label:"Tajikistan"},{value:"tz",label:"Tanzania, United Republic of"},{value:"th",label:"Thailand"},{value:"tl",label:"Timor-Leste"},{value:"tg",label:"Togo"},{value:"tk",label:"Tokelau"},{value:"to",label:"Tonga"},{value:"tt",label:"Trinidad and Tobago"},{value:"tn",label:"Tunisia"},{value:"tr",label:"Turkey"},{value:"tm",label:"Turkmenistan"},{value:"tc",label:"Turks and Caicos Islands"},{value:"tv",label:"Tuvalu"},{value:"ug",label:"Uganda"},{value:"ua",label:"Ukraine"},{value:"ae",label:"United Arab Emirates"},{value:"gb",label:"United Kingdom"},{value:"us",label:"United States"},{value:"um",label:"United States Minor Outlying Islands"},{value:"uy",label:"Uruguay"},{value:"uz",label:"Uzbekistan"},{value:"vu",label:"Vanuatu"},{value:"ve",label:"Venezuela"},{value:"vn",label:"Viet Nam"},{value:"vg",label:"Virgin Islands, British"},{value:"vi",label:"Virgin Islands, U.S."},{value:"wf",label:"Wallis and Futuna"},{value:"eh",label:"Western Sahara"},{value:"ye",label:"Yemen"},{value:"zm",label:"Zambia"},{value:"zw",label:"Zimbabwe"}]}usState(){return[{value:"Alabama",label:"Alabama"},{value:"Alaska",label:"Alaska"},{value:"Arizona",label:"Arizona"},{value:"Arkansas",label:"Arkansas"},{value:"California",label:"California"},{value:"Colorado",label:"Colorado"},{value:"Connecticut",label:"Connecticut"},{value:"Delaware",label:"Delaware"},{value:"Florida",label:"Florida"},{value:"Georgia",label:"Georgia"},{value:"Hawaii",label:"Hawaii"},{value:"Idaho",label:"Idaho"},{value:"Illinois",label:"Illinois"},{value:"Indiana",label:"Indiana"},{value:"Iowa",label:"Iowa"},{value:"Kansas",label:"Kansas"},{value:"Kentucky",label:"Kentucky"},{value:"Louisiana",label:"Louisiana"},{value:"Maine",label:"Maine"},{value:"Maryland",label:"Maryland"},{value:"Massachusetts",label:"Massachusetts"},{value:"Michigan",label:"Michigan"},{value:"Minnesota",label:"Minnesota"},{value:"Mississippi",label:"Mississippi"},{value:"Missouri",label:"Missouri"},{value:"Montana",label:"Montana"},{value:"Nebraska",label:"Nebraska"},{value:"Nevada",label:"Nevada"},{value:"New Hampshire",label:"New Hampshire"},{value:"New Jersey",label:"New Jersey"},{value:"New Mexico",label:"New Mexico"},{value:"New York",label:"New York"},{value:"North Carolina",label:"North Carolina"},{value:"North Dakota",label:"North Dakota"},{value:"Ohio",label:"Ohio"},{value:"Oklahoma",label:"Oklahoma"},{value:"Oregon",label:"Oregon"},{value:"Pennsylvania",label:"Pennsylvania"},{value:"Rhode Island",label:"Rhode Island"},{value:"South Carolina",label:"South Carolina"},{value:"South Dakota",label:"South Dakota"},{value:"Tennessee",label:"Tennessee"},{value:"Texas",label:"Texas"},{value:"Utah",label:"Utah"},{value:"Vermont",label:"Vermont"},{value:"Virginia",label:"Virginia"},{value:"Washington",label:"Washington"},{value:"West Virginia",label:"West Virginia"},{value:"Wisconsin",label:"Wisconsin"},{value:"Wyoming",label:"Wyoming"}]}}t["Z"]=new P},40881:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(865),i=n(89497),o=n(62013),s=n(78871),a=n(15820),l=n(23917);const c='\n<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g filter="url(#filter0_d_14371_175374)">\n<path d="M10.3051 19.5172C10.6087 14.1664 14.8942 9.88093 20.245 9.57736C20.4462 9.56589 20.649 9.56015 20.853 9.56015H21.6509L21.2087 9.11802L20.853 8.76233L20.6465 8.55576L20.4972 8.40654L21.2087 7.69506L21.9202 8.40654L22.3623 8.84866L22.8654 9.35176L23.0738 9.56015L23.2211 9.70746L23.5769 10.0632L23.2211 10.4189L23.0738 10.5663L22.8654 10.7747L22.3623 11.2778L21.9202 11.7199L21.2087 12.4313L20.4972 11.7199L20.642 11.5751L20.853 11.3642L21.2087 11.0084L21.6509 10.5663H20.853C20.6357 10.5663 20.4201 10.5736 20.2063 10.5879C15.4424 10.9061 11.6339 14.7146 11.3157 19.4785C11.3014 19.6922 11.2941 19.9079 11.2941 20.1253V20.923L11.7362 20.4809L12.092 20.1253L12.3029 19.9143L12.4476 19.7695L13.1591 20.4809L12.4476 21.1925L12.0056 21.6345L11.5025 22.1376L11.2941 22.346L11.1467 22.4934L10.791 22.8491L10.4353 22.4934L10.2879 22.346L10.0795 22.1376L9.57641 21.6345L9.13435 21.1925L8.42285 20.4809L9.13435 19.7695L9.28351 19.9187L9.49009 20.1253L9.84584 20.4809L10.2879 20.923V20.1253C10.2879 19.9212 10.2937 19.7184 10.3051 19.5172Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.7911 24.272L10.0796 23.5605L9.72389 23.2047L7.71149 21.1923L7 20.4808L7.71149 19.7693L8.42298 19.0579L9.4805 17.9788L9.48778 17.9404C10.3706 13.32 14.0011 9.67483 18.6138 8.77036L18.6986 8.74248L19.0744 8.40641L19.7859 7.69493L20.4974 6.98344L21.2088 6.27196L21.9203 6.98344L23.9327 8.99585L24.2885 9.35164L25 10.0631L24.2885 10.7746L23.9327 11.1303L21.9203 13.1427L21.2088 13.8542L20.4974 13.1427L19.7859 12.4312L19.1057 11.751C15.7843 12.4406 13.1686 15.0563 12.479 18.3777L13.1592 19.0579L13.8708 19.7693L14.5823 20.4808L13.8708 21.1923L11.8584 23.2047L11.5026 23.5605L10.7911 24.272ZM10.288 20.1251V20.9229L9.84597 20.4808L9.49022 20.1251L9.28363 19.9186L9.13447 19.7693L8.42298 20.4808L9.13447 21.1923L9.57654 21.6344L10.0796 22.1375L10.288 22.3459L10.4354 22.4932L10.7911 22.849L11.1468 22.4932L11.2942 22.3459L11.5026 22.1375L12.0057 21.6344L12.4478 21.1923L13.1592 20.4808L12.4478 19.7693L12.303 19.9141L12.0921 20.1251L11.7363 20.4808L11.2942 20.9229V20.1251C11.2942 19.9078 11.3015 19.6922 11.3158 19.4784C11.634 14.7145 15.4425 10.906 20.2064 10.5878C20.4202 10.5735 20.6358 10.5662 20.8531 10.5662H21.651L21.2088 11.0082L20.8531 11.364L20.6421 11.5749L20.4974 11.7197L21.2088 12.4312L21.9203 11.7197L22.3624 11.2777L22.8655 10.7746L23.0739 10.5662L23.2212 10.4188L23.577 10.0631L23.2212 9.70733L23.0739 9.56002L22.8655 9.35164L22.3624 8.84854L21.9203 8.40641L21.2088 7.69493L20.4974 8.40641L20.6466 8.55563L20.8531 8.76221L21.2088 9.1179L21.651 9.56002H20.8531C20.6491 9.56002 20.4463 9.56576 20.2451 9.57723C14.8943 9.8808 10.6088 14.1663 10.3052 19.5171C10.2938 19.7183 10.288 19.9211 10.288 20.1251Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2089 12.8556L20.0731 11.7199L20.9266 10.8664L20.8532 10.8664C15.7396 10.8664 11.5943 15.0117 11.5943 20.1253V20.1988L12.4478 19.3452L13.5835 20.481L10.7912 23.2734L7.99873 20.481L9.13448 19.3452L9.98804 20.1988V20.1253C9.98804 14.1246 14.8525 9.26016 20.8532 9.26016H20.9267L20.0731 8.40655L21.2089 7.27081L24.0013 10.0633L21.2089 12.8556Z" fill="black"/>\n</g>\n<defs>\n<filter id="filter0_d_14371_175374" x="4" y="4.27197" width="24" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dy="1"/>\n<feGaussianBlur stdDeviation="1.5"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_14371_175374"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_14371_175374" result="shape"/>\n</filter>\n</defs>\n</svg>\n',d='\n<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g filter="url(#filter0_d_14371_175369)">\n<path d="M8.97127 14.2469C12.9695 10.678 19.0301 10.678 23.0284 14.2469C23.1788 14.3811 23.3262 14.5204 23.4705 14.6647L24.0346 15.2289V14.6036L24.0346 14.1006L24.0346 13.8084L24.0346 13.5974H25.0408L25.0408 14.6036L25.0408 15.2289V15.9404L25.0408 16.2351V16.4434V16.9465L24.5377 16.9465L24.3293 16.9465H24.0346H23.3231L22.698 16.9465L21.6918 16.9465V15.9403L21.8965 15.9403L22.1949 15.9404L22.698 15.9403L23.3231 15.9404L22.759 15.3762C22.6053 15.2225 22.4477 15.0752 22.2864 14.9341C18.6928 11.7906 13.3068 11.7906 9.71324 14.9341C9.55202 15.0751 9.39435 15.2225 9.24067 15.3762L8.67656 15.9403L9.30172 15.9403L9.80481 15.9404L10.1031 15.9403L10.3079 15.9403L10.3079 16.9465L9.30169 16.9465L8.67655 16.9465L7.96506 16.9465L7.67035 16.9465L7.46193 16.9465L6.95886 16.9465L6.95884 16.4434L6.95884 16.235L6.95884 15.9403L6.95884 15.2288L6.95884 14.6036L6.95885 13.5974L7.96505 13.5974L7.96501 13.8084L7.96502 14.1006L7.96506 14.6036L7.96504 15.2288L8.52916 14.6647C8.67345 14.5204 8.8209 14.3811 8.97127 14.2469Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.95284 17.9527L5.95283 16.9465L5.95283 16.4434L5.95283 13.5974L5.95284 12.5912L6.95904 12.5912L7.96523 12.5912L9.47601 12.576L9.50834 12.554C13.3997 9.91116 18.5444 9.90078 22.4456 12.5229L22.5252 12.5631L23.0286 12.5912L24.0348 12.5912L25.041 12.5912L26.0472 12.5912L26.0472 13.5974L26.0472 16.4434L26.0472 16.9465L26.0472 17.9527L25.041 17.9527L24.5379 17.9527H21.6919H20.6857L20.6857 16.9465V15.9403V14.9783C17.8496 13.1174 14.1504 13.1174 11.3143 14.9783L11.3143 15.9403L11.3143 16.9465L11.3143 17.9527L10.3081 17.9527L7.46217 17.9527L6.95903 17.9527L5.95284 17.9527ZM8.52935 14.6647L7.96523 15.2288L7.96525 14.6036L7.9652 14.1006L7.9652 13.8084L7.96524 13.5974L6.95904 13.5974L6.95903 14.6036L6.95903 15.2288L6.95903 15.9403L6.95903 16.235L6.95903 16.4434L6.95903 16.9465L7.4621 16.9465L7.67053 16.9465L7.96523 16.9465H8.67672L9.30187 16.9465L10.3081 16.9465L10.3081 15.9403H10.1033L9.80498 15.9403L9.30189 15.9403L8.67673 15.9403L9.24084 15.3762C9.39453 15.2225 9.55212 15.0752 9.71335 14.9341C13.307 11.7906 18.693 11.7906 22.2866 14.9341C22.4479 15.0752 22.6055 15.2225 22.7592 15.3762L23.3233 15.9403L22.6981 15.9403L22.195 15.9403L21.8967 15.9403L21.6919 15.9403L21.6919 16.9465H22.6981L23.3233 16.9465H24.0348H24.3295L24.5379 16.9465L25.041 16.9465L25.041 16.4434V16.235V15.9403V15.2288L25.041 14.6036V13.5974L24.0348 13.5974L24.0348 13.8084L24.0348 14.1006V14.6036V15.2288L23.4707 14.6647C23.3264 14.5204 23.179 14.3811 23.0285 14.2469C19.0303 10.678 12.9697 10.678 8.97146 14.2469C8.82109 14.3811 8.67364 14.5204 8.52935 14.6647Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21.3917 17.2465V15.6403L22.5988 15.6403L22.5468 15.5883C18.931 11.9725 13.0686 11.9725 9.45275 15.5883L9.40078 15.6403L10.6079 15.6403V17.2465L6.65881 17.2466L6.65882 13.2974H8.26501L8.265 14.5046L8.31698 14.4526C12.5601 10.2095 19.4395 10.2095 23.6826 14.4526L23.7345 14.5046L23.7346 13.2974L25.3408 13.2974V17.2466L21.3917 17.2465Z" fill="black"/>\n</g>\n<defs>\n<filter id="filter0_d_14371_175369" x="0.272095" y="0.543945" width="31.4559" height="31.4561" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dy="1"/>\n<feGaussianBlur stdDeviation="1.5"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_14371_175369"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_14371_175369" result="shape"/>\n</filter>\n</defs>\n</svg>\n',u='\n<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g filter="url(#filter0_d_13207_174939)">\n<path d="M11.7548 9.57707C17.1055 9.88065 21.391 14.1662 21.6946 19.517C21.7061 19.7182 21.7118 19.921 21.7118 20.125V20.9228L22.1539 20.4807L22.5096 20.125L22.7162 19.9184L22.8654 19.7692L23.5769 20.4807L22.8654 21.1922L22.4233 21.6343L21.9202 22.1374L21.7118 22.3458L21.5645 22.4931L21.2087 22.8489L20.853 22.4931L20.7056 22.3458L20.4972 22.1374L19.9941 21.6343L19.5521 21.1922L18.8406 20.4807L19.5521 19.7692L19.6969 19.914L19.9078 20.125L20.2636 20.4807L20.7056 20.9228V20.125C20.7056 19.9077 20.6984 19.692 20.6841 19.4782C20.3658 14.7144 16.5574 10.9059 11.7935 10.5876C11.5798 10.5734 11.3641 10.5661 11.1467 10.5661H10.3489L10.791 11.0081L11.1467 11.3639L11.3577 11.5748L11.5025 11.7196L10.791 12.4311L10.0795 11.7196L9.63745 11.2776L9.13435 10.7745L8.92595 10.5661L8.7786 10.4187L8.42285 10.063L8.7786 9.70723L8.92595 9.55988L9.13435 9.35148L9.63745 8.84838L10.0795 8.40632L10.791 7.69482L11.5025 8.40632L11.3533 8.55548L11.1467 8.76206L10.791 9.11781L10.3489 9.55988H11.1467C11.3508 9.55988 11.5535 9.56566 11.7548 9.57707Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7 10.0631L7.71149 9.35161L8.06724 8.99587L10.0796 6.98347L10.7912 6.27197L11.5026 6.98347L12.2141 7.69495L13.2932 8.75247L13.3316 8.75975C17.952 9.64261 21.5971 13.2731 22.5016 17.8858L22.5295 17.9705L22.8656 18.3464L23.577 19.0578L24.2885 19.7693L25 20.4808L24.2885 21.1923L22.2761 23.2047L21.9203 23.5605L21.2089 24.272L20.4974 23.5605L20.1417 23.2047L18.1293 21.1923L17.4178 20.4808L18.1293 19.7693L18.8408 19.0578L19.5209 18.3777C18.8314 15.0563 16.2157 12.4406 12.8943 11.751L12.2141 12.4312L11.5026 13.1428L10.7912 13.8543L10.0796 13.1428L8.06724 11.1304L7.71149 10.7746L7 10.0631ZM11.1468 9.56H10.3491L10.7912 9.11794L11.1468 8.76219L11.3534 8.5556L11.5026 8.40645L10.7912 7.69495L10.0796 8.40645L9.63757 8.84851L9.13447 9.35161L8.92608 9.56L8.77873 9.70735L8.42298 10.0631L8.77873 10.4188L8.92608 10.5662L9.13447 10.7746L9.63757 11.2777L10.0796 11.7197L10.7912 12.4312L11.5026 11.7197L11.3578 11.5749L11.1468 11.364L10.7912 11.0082L10.3491 10.5662H11.1468C11.3642 10.5662 11.5798 10.5735 11.7935 10.5877C16.5575 10.906 20.366 14.7145 20.6842 19.4783C20.6985 19.6921 20.7057 19.9078 20.7057 20.1251V20.9229L20.2637 20.4808L19.9079 20.1251L19.697 19.9141L19.5522 19.7693L18.8408 20.4808L19.5522 21.1923L19.9943 21.6344L20.4974 22.1375L20.7057 22.3459L20.8532 22.4932L21.2089 22.849L21.5646 22.4932L21.712 22.3459L21.9203 22.1375L22.4234 21.6344L22.8656 21.1923L23.577 20.4808L22.8656 19.7693L22.7163 19.9185L22.5098 20.1251L22.1541 20.4808L21.712 20.9229V20.1251C21.712 19.9211 21.7062 19.7183 21.6947 19.5171C21.3912 14.1663 17.1057 9.88078 11.7549 9.5772C11.5537 9.56579 11.3509 9.56 11.1468 9.56Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.4162 20.4806L19.552 19.3449L20.4055 20.1984L20.4055 20.125C20.4055 15.0114 16.2601 10.866 11.1466 10.866H11.0731L11.9266 11.7195L10.7909 12.8553L7.99843 10.063L10.7909 7.27052L11.9266 8.40627L11.0731 9.25983H11.1466C17.1472 9.25983 22.0117 14.1243 22.0117 20.125V20.1984L22.8653 19.3449L24.001 20.4806L21.2086 23.2731L18.4162 20.4806Z" fill="black"/>\n</g>\n<defs>\n<filter id="filter0_d_13207_174939" x="4" y="4.27197" width="24" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dy="1"/>\n<feGaussianBlur stdDeviation="1.5"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_13207_174939"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_13207_174939" result="shape"/>\n</filter>\n</defs>\n</svg>\n',g='\n<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g filter="url(#filter0_d_14375_175362)">\n<path d="M17.0251 8.24312C20.594 12.2414 20.5939 18.302 17.025 22.3002C16.8909 22.4506 16.7515 22.5981 16.6073 22.7423L16.0431 23.3065H16.6684L17.1714 23.3065L17.4635 23.3065L17.6746 23.3065V24.3127L16.6684 24.3127L16.0431 24.3127H15.3316L15.0369 24.3127H14.8286H14.3254L14.3255 23.8096L14.3254 23.6012V23.3065V22.595L14.3255 21.9698L14.3255 20.9636H15.3317L15.3317 21.1684L15.3316 21.4667L15.3317 21.9698L15.3316 22.595L15.8958 22.0309C16.0494 21.8772 16.1968 21.7196 16.3379 21.5583C19.4814 17.9647 19.4814 12.5787 16.3379 8.98509C16.1969 8.82387 16.0494 8.6662 15.8958 8.51252L15.3316 7.94841L15.3317 8.57357L15.3316 9.07666L15.3317 9.37499L15.3317 9.57976L14.3255 9.57976L14.3255 8.57354L14.3254 7.9484L14.3254 7.23691L14.3254 6.9422L14.3255 6.73378L14.3254 6.23071L14.8286 6.23069L15.037 6.23069L15.3317 6.23069L16.0432 6.23069L16.6683 6.23069L17.6746 6.2307L17.6745 7.2369L17.4636 7.23686L17.1714 7.23687L16.6683 7.23691L16.0432 7.23689L16.6073 7.80101C16.7516 7.9453 16.8908 8.09275 17.0251 8.24312Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M13.3193 5.22469L14.3255 5.22468L14.8286 5.22468L17.6745 5.22468L18.6807 5.2247L18.6807 6.23089L18.6807 7.23708L18.696 8.74786L18.718 8.78019C21.3608 12.6716 21.3712 17.8162 18.7491 21.7175L18.7089 21.7971L18.6808 22.3005L18.6808 23.3067L18.6808 24.3129L18.6808 25.319L17.6746 25.319L14.8286 25.319L14.3254 25.319L13.3193 25.319L13.3193 24.3129L13.3193 23.8098V20.9638V19.9576L14.3255 19.9576H15.3317H16.2936C18.1546 17.1215 18.1546 13.4223 16.2936 10.5861L15.3317 10.5861L14.3254 10.5862L13.3193 10.5862L13.3192 9.57998L13.3192 6.73402L13.3193 6.23089L13.3193 5.22469ZM16.6073 7.8012L16.0432 7.23708L16.6683 7.2371L17.1714 7.23705L17.4636 7.23705L17.6745 7.23709L17.6746 6.23089L16.6683 6.23088L16.0432 6.23088L15.3317 6.23088L15.037 6.23088L14.8286 6.23088L14.3255 6.23089L14.3255 6.73395L14.3255 6.94238L14.3255 7.23708V7.94858L14.3255 8.57372L14.3255 9.57993L15.3317 9.57993V9.37516L15.3316 9.07684L15.3317 8.57374L15.3317 7.94858L15.8958 8.51269C16.0495 8.66638 16.1968 8.82397 16.3378 8.9852C19.4814 12.5789 19.4814 17.9649 16.3379 21.5585C16.1968 21.7197 16.0495 21.8773 15.8958 22.031L15.3316 22.5952L15.3317 21.97L15.3316 21.4669L15.3317 21.1686L15.3317 20.9638L14.3255 20.9638V21.97L14.3254 22.5952V23.3067V23.6014L14.3255 23.8098L14.3254 24.3129L14.8286 24.3129H15.0369H15.3316H16.0431L16.6684 24.3129H17.6746L17.6746 23.3067L17.4635 23.3067L17.1714 23.3067H16.6684H16.0431L16.6073 22.7425C16.7516 22.5982 16.8909 22.4508 17.0251 22.3004C20.594 18.3022 20.594 12.2415 17.0251 8.24331C16.8908 8.09294 16.7516 7.94549 16.6073 7.8012Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M14.0253 20.6636H15.6314L15.6314 21.8706L15.6834 21.8187C19.2992 18.2028 19.2992 12.3404 15.6834 8.7246L15.6314 8.67263L15.6315 9.87971H14.0253L14.0252 5.93066L17.9743 5.93067V7.53686L16.7672 7.53685L16.8192 7.58883C21.0623 11.8319 21.0622 18.7113 16.8191 22.9544L16.7672 23.0064L17.9743 23.0064L17.9743 24.6126H14.0251L14.0253 20.6636Z" fill="black"/>\n</g>\n<defs>\n<filter id="filter0_d_14375_175362" x="0.272095" y="0.543945" width="31.4558" height="31.4561" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dy="1"/>\n<feGaussianBlur stdDeviation="1.5"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_14375_175362"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_14375_175362" result="shape"/>\n</filter>\n</defs>\n</svg>\n',p='\n<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g filter="url(#filter0_d_14371_175399)">\n<path d="M21.6949 11.0267C21.3913 16.3775 17.1058 20.663 11.755 20.9666C11.5538 20.9781 11.351 20.9838 11.147 20.9838H10.3491L10.7913 21.4259L11.147 21.7816L11.3535 21.9882L11.5028 22.1374L10.7913 22.8489L10.0798 22.1374L9.63766 21.6953L9.13456 21.1922L8.92618 20.9838L8.77887 20.8365L8.42308 20.4807L8.77887 20.125L8.92618 19.9776L9.13456 19.7692L9.63766 19.2661L10.0798 18.8241L10.7913 18.1126L11.5028 18.8241L11.358 18.9689L11.147 19.1798L10.7913 19.5356L10.3491 19.9776H11.147C11.3643 19.9776 11.5799 19.9704 11.7937 19.9561C16.5576 19.6378 20.3661 15.8293 20.6843 11.0655C20.6986 10.8518 20.7059 10.636 20.7059 10.4187V9.62091L20.2638 10.063L19.908 10.4187L19.6971 10.6297L19.5524 10.7745L18.8409 10.063L19.5524 9.35148L19.9944 8.90942L20.4975 8.40632L20.7059 8.19792L20.8533 8.05058L21.209 7.69482L21.5647 8.05058L21.7121 8.19792L21.9205 8.40632L22.4236 8.90942L22.8657 9.35148L23.5771 10.063L22.8657 10.7745L22.7165 10.6253L22.5099 10.4187L22.1542 10.063L21.7121 9.62091V10.4187C21.7121 10.6227 21.7063 10.8255 21.6949 11.0267Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2089 6.27197L21.9204 6.98347L22.2761 7.33921L24.2885 9.35161L25 10.0631L24.2885 10.7746L23.577 11.4861L22.5195 12.5651L22.5122 12.6036C21.6294 17.224 17.9989 20.8691 13.3862 21.7736L13.3014 21.8015L12.9256 22.1375L12.2141 22.849L11.5026 23.5605L10.7912 24.272L10.0797 23.5605L8.06728 21.5481L7.71148 21.1923L7 20.4808L7.71148 19.7693L8.06728 19.4136L10.0797 17.4012L10.7912 16.6898L11.5026 17.4012L12.2141 18.1127L12.8943 18.7929C16.2157 18.1034 18.8314 15.4877 19.521 12.1663L18.8408 11.4861L18.1292 10.7746L17.4177 10.0631L18.1292 9.35161L20.1416 7.33921L20.4974 6.98347L21.2089 6.27197ZM21.712 10.4188V9.62104L22.154 10.0631L22.5098 10.4188L22.7164 10.6254L22.8655 10.7746L23.577 10.0631L22.8655 9.35161L22.4235 8.90955L21.9204 8.40645L21.712 8.19805L21.5646 8.0507L21.2089 7.69495L20.8532 8.0507L20.7058 8.19805L20.4974 8.40645L19.9943 8.90955L19.5522 9.35161L18.8408 10.0631L19.5522 10.7746L19.697 10.6298L19.9079 10.4188L20.2637 10.0631L20.7058 9.62104V10.4188C20.7058 10.6362 20.6985 10.8518 20.6842 11.0655C20.366 15.8295 16.5575 19.6379 11.7936 19.9562C11.5798 19.9705 11.3642 19.9777 11.1469 19.9777H10.349L10.7912 19.5357L11.1469 19.1799L11.3579 18.969L11.5026 18.8242L10.7912 18.1127L10.0797 18.8242L9.63755 19.2662L9.13445 19.7693L8.92607 19.9777L8.77876 20.1251L8.42297 20.4808L8.77876 20.8366L8.92607 20.9839L9.13445 21.1923L9.63755 21.6954L10.0797 22.1375L10.7912 22.849L11.5026 22.1375L11.3534 21.9883L11.1469 21.7817L10.7912 21.426L10.349 20.9839H11.1469C11.3509 20.9839 11.5537 20.9782 11.7549 20.9667C17.1057 20.6631 21.3912 16.3776 21.6948 11.0269C21.7062 10.8256 21.712 10.6229 21.712 10.4188Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.7912 17.6883L11.927 18.8241L11.0734 19.6776L11.1469 19.6776C16.2604 19.6776 20.4058 15.5322 20.4058 10.4187V10.3452L19.5523 11.1987L18.4165 10.063L21.2089 7.27053L24.0013 10.063L22.8656 11.1987L22.012 10.3452V10.4187C22.012 16.4193 17.1475 21.2838 11.1469 21.2838H11.0734L11.9269 22.1374L10.7912 23.2731L7.99872 20.4807L10.7912 17.6883Z" fill="black"/>\n</g>\n<defs>\n<filter id="filter0_d_14371_175399" x="4" y="4.27197" width="24" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dy="1"/>\n<feGaussianBlur stdDeviation="1.5"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_14371_175399"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_14371_175399" result="shape"/>\n</filter>\n</defs>\n</svg>\n',h='\n<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g filter="url(#filter0_d_14371_175389)">\n<path d="M23.0287 16.297C19.0305 19.8659 12.9699 19.8659 8.97163 16.297C8.82122 16.1628 8.6738 16.0235 8.52951 15.8792L7.96536 15.3151V15.9403L7.96537 16.4434L7.96537 16.7355L7.96537 16.9465H6.95917L6.95917 15.9403L6.95917 15.3151V14.6036L6.95917 14.3089V14.1006V13.5974L7.46227 13.5975L7.67067 13.5974H7.96536H8.67686L9.30204 13.5975L10.3082 13.5975V14.6037L10.1035 14.6037L9.80514 14.6036L9.30204 14.6037L8.67686 14.6036L9.241 15.1677C9.39468 15.3214 9.55228 15.4688 9.71357 15.6099C13.3072 18.7534 18.6932 18.7534 22.2868 15.6099C22.448 15.4688 22.6056 15.3214 22.7593 15.1677L23.3234 14.6036L22.6983 14.6037L22.1952 14.6036L21.8969 14.6037L21.6921 14.6037L21.6921 13.5975L22.6983 13.5974L23.3235 13.5974L24.0349 13.5974L24.3296 13.5974L24.5381 13.5975L25.0411 13.5974L25.0412 14.1005L25.0412 14.3089L25.0412 14.6036L25.0412 15.3151L25.0412 15.9403L25.0411 16.9465L24.0349 16.9465L24.035 16.7355L24.035 16.4434L24.0349 15.9403L24.035 15.3151L23.4708 15.8792C23.3266 16.0235 23.1791 16.1628 23.0287 16.297Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M26.0472 12.5912L26.0472 13.5974L26.0472 14.1005L26.0472 16.9465L26.0472 17.9527L25.041 17.9527L24.0348 17.9527L22.524 17.9679L22.4917 17.99C18.6003 20.6328 13.4556 20.6432 9.55438 18.021L9.47476 17.9808L8.97138 17.9527L7.96519 17.9527L6.959 17.9527L5.95281 17.9527L5.95281 16.9465L5.95281 14.1006L5.95281 13.5974L5.95281 12.5912L6.959 12.5912L7.4621 12.5913H10.3081H11.3143L11.3143 13.5975V14.6037V15.5656C14.1504 17.4266 17.8496 17.4266 20.6857 15.5656L20.6857 14.6037L20.6857 13.5974L20.6857 12.5912L21.6919 12.5912L24.5378 12.5912L25.041 12.5912L26.0472 12.5912ZM23.4707 15.8792L24.0348 15.3151L24.0348 15.9403L24.0348 16.4434L24.0348 16.7355L24.0348 16.9465L25.041 16.9465L25.041 15.9403L25.041 15.3151L25.041 14.6036L25.041 14.3089L25.041 14.1005L25.041 13.5974L24.5379 13.5975L24.3295 13.5974L24.0348 13.5974H23.3233L22.6981 13.5975L21.6919 13.5975L21.6919 14.6037H21.8967L22.195 14.6036L22.6981 14.6037L23.3233 14.6036L22.7592 15.1677C22.6055 15.3214 22.4479 15.4688 22.2867 15.6098C18.693 18.7534 13.307 18.7534 9.7134 15.6099C9.5521 15.4688 9.39451 15.3214 9.24082 15.1677L8.67668 14.6036L9.30187 14.6037L9.80496 14.6036L10.1033 14.6037L10.3081 14.6037L10.3081 13.5975H9.30187L8.67668 13.5974H7.96519H7.67049L7.4621 13.5975L6.959 13.5974L6.959 14.1006V14.3089V14.6036V15.3151L6.959 15.9404V16.9465L7.96519 16.9465L7.96519 16.7355L7.96519 16.4434V15.9404V15.3151L8.52933 15.8792C8.67362 16.0235 8.82104 16.1628 8.97145 16.297C12.9697 19.8659 19.0303 19.8659 23.0285 16.297C23.1789 16.1628 23.3264 16.0235 23.4707 15.8792Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.6083 13.2975V14.9037L9.40124 14.9037L9.45318 14.9556C13.069 18.5714 18.9314 18.5714 22.5472 14.9556L22.5992 14.9036L21.3921 14.9037V13.2975L25.3412 13.2974L25.3412 17.2465H23.735L23.735 16.0394L23.683 16.0914C19.4399 20.3345 12.5605 20.3345 8.31742 16.0914L8.26545 16.0394L8.2654 17.2465L6.65922 17.2465V13.2974L10.6083 13.2975Z" fill="black"/>\n</g>\n<defs>\n<filter id="filter0_d_14371_175389" x="0.272095" y="0.543945" width="31.4558" height="31.4561" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dy="1"/>\n<feGaussianBlur stdDeviation="1.5"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_14371_175389"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_14371_175389" result="shape"/>\n</filter>\n</defs>\n</svg>\n',m='\n<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g filter="url(#filter0_d_14371_175394)">\n<path d="M20.2452 20.9669C14.8945 20.6633 10.609 16.3778 10.3054 11.027C10.2939 10.8257 10.2882 10.623 10.2882 10.4189V9.62112L9.84605 10.0632L9.49036 10.4189L9.28379 10.6255L9.13457 10.7747L8.42308 10.0632L9.13457 9.35176L9.57669 8.90963L10.0798 8.40653L10.2882 8.19815L10.4355 8.05084L10.7913 7.69505L11.147 8.05084L11.2944 8.19815L11.5028 8.40653L12.0059 8.90963L12.4479 9.35176L13.1594 10.0632L12.4479 10.7747L12.3031 10.6299L12.0922 10.4189L11.7364 10.0632L11.2944 9.62112V10.4189C11.2944 10.6363 11.3016 10.8519 11.3159 11.0657C11.6342 15.8296 15.4426 19.638 20.2065 19.9563C20.4202 19.9706 20.6359 19.9778 20.8533 19.9778H21.6511L21.209 19.5358L20.8533 19.18L20.6423 18.9691L20.4975 18.8243L21.209 18.1128L21.9205 18.8243L22.3626 19.2664L22.8657 19.7695L23.074 19.9778L23.2214 20.1252L23.5771 20.4809L23.2214 20.8367L23.074 20.9841L22.8657 21.1925L22.3626 21.6956L21.9205 22.1376L21.209 22.8491L20.4975 22.1376L20.6467 21.9885L20.8533 21.7819L21.209 21.4261L21.6511 20.9841H20.8533C20.6492 20.9841 20.4465 20.9783 20.2452 20.9669Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M25 20.4808L24.2885 21.1923L23.9328 21.5481L21.9204 23.5605L21.2088 24.272L20.4974 23.5605L19.7859 22.849L18.7068 21.7915L18.6684 21.7842C14.048 20.9013 10.4029 17.2709 9.49838 12.6581L9.47051 12.5734L9.13444 12.1976L8.42296 11.4861L7.71147 10.7746L6.99999 10.0631L7.71147 9.35165L9.72387 7.33925L10.0797 6.98346L10.7912 6.27197L11.5026 6.98346L11.8583 7.33925L13.8707 9.35165L14.5822 10.0631L13.8707 10.7746L13.1592 11.4861L12.4791 12.1663C13.1686 15.4877 15.7843 18.1034 19.1057 18.7929L19.7859 18.1127L20.4974 17.4012L21.2088 16.6897L21.9204 17.4012L23.9328 19.4136L24.2885 19.7693L25 20.4808ZM20.8532 20.9839H21.6509L21.2088 21.426L20.8532 21.7818L20.6466 21.9883L20.4974 22.1375L21.2088 22.849L21.9204 22.1375L22.3624 21.6954L22.8655 21.1923L23.0739 20.9839L23.2213 20.8366L23.577 20.4808L23.2213 20.1251L23.0739 19.9777L22.8655 19.7693L22.3624 19.2662L21.9204 18.8242L21.2088 18.1127L20.4974 18.8242L20.6422 18.969L20.8532 19.1799L21.2088 19.5357L21.6509 19.9777H20.8532C20.6358 19.9777 20.4202 19.9705 20.2065 19.9562C15.4425 19.6379 11.634 15.8295 11.3158 11.0656C11.3015 10.8518 11.2943 10.6362 11.2943 10.4188V9.62101L11.7363 10.0631L12.0921 10.4188L12.303 10.6298L12.4478 10.7746L13.1592 10.0631L12.4478 9.35165L12.0057 8.90953L11.5026 8.40643L11.2943 8.19804L11.1468 8.05073L10.7912 7.69494L10.4354 8.05073L10.288 8.19804L10.0797 8.40643L9.57657 8.90953L9.13444 9.35165L8.42296 10.0631L9.13444 10.7746L9.28366 10.6254L9.49023 10.4188L9.84593 10.0631L10.288 9.62101V10.4188C10.288 10.6229 10.2938 10.8256 10.3053 11.0269C10.6088 16.3776 14.8943 20.6632 20.2451 20.9667C20.4463 20.9782 20.6491 20.9839 20.8532 20.9839Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5838 10.0633L12.448 11.199L11.5945 10.3455L11.5945 10.419C11.5945 15.5325 15.7399 19.6779 20.8534 19.6779H20.9269L20.0734 18.8244L21.2091 17.6886L24.0016 20.481L21.2091 23.2734L20.0734 22.1377L20.9269 21.2841H20.8534C14.8528 21.2841 9.98831 16.4196 9.98831 10.419V10.3455L9.1347 11.199L7.99896 10.0633L10.7914 7.27081L13.5838 10.0633Z" fill="black"/>\n</g>\n<defs>\n<filter id="filter0_d_14371_175394" x="4" y="4.27197" width="24" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dy="1"/>\n<feGaussianBlur stdDeviation="1.5"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_14371_175394"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_14371_175394" result="shape"/>\n</filter>\n</defs>\n</svg>\n',y='\n<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g filter="url(#filter0_d_14371_175379)">\n<path d="M14.9749 22.3008C11.406 18.3026 11.4061 12.2419 14.975 8.24372C15.1091 8.09331 15.2485 7.94589 15.3927 7.8016L15.9569 7.23746H15.3316L14.8286 7.23746L14.5365 7.23746L14.3254 7.23746V6.23127L15.3316 6.23127L15.9569 6.23127H16.6684L16.9631 6.23127H17.1714H17.6746L17.6745 6.73436L17.6746 6.94276V7.23746V7.94895L17.6745 8.57414L17.6745 9.58033H16.6683L16.6683 9.37556L16.6684 9.07723L16.6683 8.57414L16.6684 7.94895L16.1042 8.51309C15.9506 8.66677 15.8032 8.82437 15.6621 8.98567C12.5186 12.5793 12.5186 17.9653 15.6621 21.5589C15.8031 21.7201 15.9506 21.8777 16.1042 22.0314L16.6684 22.5955L16.6683 21.9704L16.6684 21.4673L16.6683 21.169L16.6683 20.9642L17.6745 20.9642L17.6745 21.9704L17.6746 22.5955L17.6746 23.307L17.6746 23.6017L17.6745 23.8102L17.6746 24.3132L17.1714 24.3133L16.963 24.3133L16.6683 24.3133L15.9568 24.3133L15.3317 24.3133L14.3254 24.3132L14.3255 23.307L14.5364 23.3071L14.8286 23.3071L15.3317 23.307L15.9568 23.3071L15.3927 22.7429C15.2484 22.5986 15.1092 22.4512 14.9749 22.3008Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.6807 25.3193L17.6745 25.3193L17.1714 25.3193L14.3255 25.3193L13.3193 25.3193L13.3193 24.3131L13.3193 23.3069L13.304 21.7961L13.282 21.7638C10.6392 17.8724 10.6288 12.7277 13.2509 8.82647L13.2911 8.74686L13.3192 8.24348L13.3192 7.23728L13.3192 6.23109L13.3192 5.2249L14.3254 5.2249L17.1714 5.2249L17.6746 5.2249L18.6807 5.2249L18.6807 6.2311L18.6807 6.73419V9.58015V10.5863L17.6745 10.5863H16.6683H15.7064C13.8454 13.4225 13.8454 17.1217 15.7064 19.9578L16.6683 19.9578L17.6746 19.9578L18.6807 19.9578L18.6808 20.964L18.6808 23.8099L18.6807 24.3131L18.6807 25.3193ZM15.3927 22.7427L15.9568 23.3069L15.3317 23.3068L14.8286 23.3069L14.5364 23.3069L14.3255 23.3069L14.3254 24.3131L15.3317 24.3131L15.9568 24.3131L16.6683 24.3131L16.963 24.3131L17.1714 24.3131L17.6745 24.3131L17.6745 23.81L17.6745 23.6016L17.6745 23.3069V22.5954L17.6745 21.9702L17.6745 20.964L16.6683 20.964V21.1688L16.6684 21.4671L16.6683 21.9702L16.6683 22.5954L16.1042 22.0313C15.9505 21.8776 15.8032 21.72 15.6622 21.5587C12.5186 17.9651 12.5186 12.5791 15.6621 8.98549C15.8032 8.8242 15.9505 8.6666 16.1042 8.51292L16.6684 7.94878L16.6683 8.57396L16.6684 9.07706L16.6683 9.37539L16.6683 9.58015L17.6745 9.58016V8.57396L17.6746 7.94878V7.23729V6.94259L17.6745 6.73419L17.6746 6.23109L17.1714 6.2311H16.9631H16.6684H15.9569L15.3316 6.23109H14.3254L14.3254 7.23729L14.5365 7.23729L14.8286 7.23729H15.3316H15.9569L15.3927 7.80143C15.2484 7.94572 15.1091 8.09314 14.9749 8.24355C11.406 12.2418 11.406 18.3024 14.9749 22.3006C15.1092 22.451 15.2484 22.5985 15.3927 22.7427Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17.9747 9.88038H16.3685L16.3685 8.67334L16.3166 8.72527C12.7007 12.3411 12.7007 18.2035 16.3166 21.8193L16.3685 21.8713L16.3685 20.6642H17.9747L17.9748 24.6133L14.0256 24.6133V23.0071L15.2328 23.0071L15.1808 22.9551C10.9377 18.712 10.9377 11.8326 15.1808 7.58952L15.2328 7.53755L14.0256 7.5375L14.0256 5.93132H17.9748L17.9747 9.88038Z" fill="black"/>\n</g>\n<defs>\n<filter id="filter0_d_14371_175379" x="0.272095" y="0.543945" width="31.4558" height="31.4561" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dy="1"/>\n<feGaussianBlur stdDeviation="1.5"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_14371_175379"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_14371_175379" result="shape"/>\n</filter>\n</defs>\n</svg>\n';var f=n(93261),b=n(75231),v=n(35426),w=Object.defineProperty,N=(e,t,n)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t,n)=>(N(e,"symbol"!==typeof t?t+"":t,n),n);const x=new Blob([c],{type:"image/svg+xml"}),P=new Blob([d],{type:"image/svg+xml"}),I=new Blob([u],{type:"image/svg+xml"}),_=new Blob([g],{type:"image/svg+xml"}),k=new Blob([p],{type:"image/svg+xml"}),Z=new Blob([h],{type:"image/svg+xml"}),C=new Blob([m],{type:"image/svg+xml"}),z=new Blob([y],{type:"image/svg+xml"}),T=`url("${window.URL.createObjectURL(x)}") 14 14, auto`,L=`url("${window.URL.createObjectURL(P)}") 16 14, auto`,E=`url("${window.URL.createObjectURL(I)}") 18 14, auto`,D=`url("${window.URL.createObjectURL(_)}") 18 16, auto`,O=`url("${window.URL.createObjectURL(k)}") 16 16, auto`,M=`url("${window.URL.createObjectURL(Z)}") 18 18, auto`,A=`url("${window.URL.createObjectURL(C)}") 16 18, auto`,$=`url("${window.URL.createObjectURL(z)}") 14 18, auto`;class F{constructor(){S(this,"getCornerRatater",(e=>{const t=f.Z.contentScaleRatio;i.Z.getters.getPageScaleRatio;return[{cursor:T,styles:{width:`${e}px`,height:`${e}px`,left:"0",top:"0",transform:`translate(-50%,-50%) scale(${t})`,borderRadius:"50%",clipPath:'path("M 0 0 v 48 h 24 v -24 h 24 v -24 z")'},scalerSize:e},{cursor:E,styles:{width:`${e}px`,height:`${e}px`,transform:`translate(50%,-50%) scale(${t})`,right:"0",top:"0",borderRadius:"50%",clipPath:'path("M 0 0 v 24 h 24 v 24 h 24 v -48 z")'},scalerSize:e},{cursor:O,styles:{width:`${e}px`,height:`${e}px`,transform:`translate(50%,50%) scale(${t})`,right:"0",bottom:"0",borderRadius:"50%",clipPath:'path("M 0 24 v 24 h 48 v -48 h -24 v 24 z")'},scalerSize:e},{cursor:A,styles:{width:`${e}px`,height:`${e}px`,transform:`translate(-50%,50%) scale(${t})`,left:"0",bottom:"0",borderRadius:"50%",clipPath:'path("M 0 0 v 48 h 48 v -24 h -24 v -24 z")'},scalerSize:e}]})),S(this,"getScalers",((e,t=!1)=>[{cursor:0,styles:{w:e,h:e,width:`${e}px`,height:`${e}px`,left:"0",top:"0",transform:"translate(-50%,-50%)",borderRadius:"50%",opacity:t?"0":"1"},scalerSize:e},{cursor:2,styles:{w:e,h:e,width:`${e}px`,height:`${e}px`,transform:"translate(50%,-50%)",right:"0",top:"0",borderRadius:"50%",opacity:t?"0":"1"},scalerSize:e},{cursor:4,styles:{w:e,h:e,width:`${e}px`,height:`${e}px`,transform:"translate(50%,50%)",right:"0",bottom:"0",borderRadius:"50%",opacity:t?"0":"1"},scalerSize:e},{cursor:6,styles:{w:e,h:e,width:`${e}px`,height:`${e}px`,transform:"translate(-50%,50%)",left:"0",bottom:"0",borderRadius:"50%",opacity:t?"0":"1"},scalerSize:e}])),S(this,"getLineEnds",((e,t=!1)=>[{width:`${e}px`,height:`${e}px`,transform:"translate(-50%,-50%)",left:"0",top:"50%",borderRadius:"50%",opacity:t?"0":"1"},{width:`${e}px`,height:`${e}px`,transform:"translate(50%,-50%)",right:"0",top:"50%",borderRadius:"50%",opacity:t?"0":"1"}])),S(this,"getResizers",((e,t,n=!1)=>[{type:"H",cursor:7,styles:{w:e,h:t,height:`${t}px`,width:`${e}px`,left:"0",transform:n?"translate(-75%, 0%)":"translate(-50%, 0%)",opacity:n?"0":"1",borderRadius:e/2+"px"}},{type:"H",cursor:3,styles:{w:e,h:t,height:`${t}px`,width:`${e}px`,right:"0",transform:n?"translate(75%, 0%)":"translate(50%, 0%)",opacity:n?"0":"1",borderRadius:e/2+"px"}},{type:"V",cursor:5,styles:{w:t,h:e,width:`${t}px`,height:`${e}px`,bottom:"0",transform:n?"translate(0%, 75%)":"translate(0%, 50%)",opacity:n?"0":"1",borderRadius:e/2+"px"}},{w:t,h:e,type:"V",cursor:1,styles:{width:`${t}px`,height:`${e}px`,top:"0",transform:n?"translate(0%, -75%)":"translate(0%, -50%)",opacity:n?"0":"1",borderRadius:e/2+"px"}}]))}getLength(e){const t=Math.pow(e.x,2)+Math.pow(e.y,2);return Math.sqrt(t)}getNoRotationPos(e,t,n){return{x:e.x*Math.cos(-n)-e.y*Math.sin(-n)+t.x,y:e.y*Math.cos(-n)+e.x*Math.sin(-n)+t.y}}getRectCenter(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}get getCornerRataterMap(){return[T,L,E,D,O,M,A,$]}getControlPoints(){const e=8,t=20,n=12;return{scalers:this.getScalers(n),scalerTouchAreas:this.getScalers(3*n,!0),cornerRotaters:this.getCornerRatater(4*n),lineEnds:this.getLineEnds(n),lineEndTouchAreas:this.getLineEnds(3*n,!0),resizers:this.getResizers(e,t),resizerTouchAreas:this.getResizers(3*e,3*t,!0),cursors:["nwse-resize","ns-resize","nesw-resize","ew-resize","nwse-resize","ns-resize","nesw-resize","ew-resize"]}}getResizerProfile(e){var t,n;const i={start:-1,end:-1,moveBarStart:-1,moveBarEnd:-1,hasHorizontal:!1,hasVertical:!1};switch(e.type){case"image":e.styles.shadow.currentEffect===r.w.none&&(i.hasHorizontal=!0,i.hasVertical=!0);break;case"text":l.Z.isCurvedText(e.styles.textShape)||(e.styles.writingMode.includes("vertical")?i.hasVertical=!0:i.hasHorizontal=!0);break;case"shape":Object.assign(i,this.shapeCategorySorter(e.category,null!=(t=e.scaleType)?t:1));break;case"tmp":case"group":break;case"frame":if(o.Z.isImageFrame(e)){const t=e.styles.shadow;t&&(null==(n=t.srcObj)?void 0:n.type)||(i.hasHorizontal=!0,i.hasVertical=!0)}}return i.hasHorizontal&&(i.start=0,i.end=2,i.moveBarStart=2,i.moveBarEnd=4),i.hasVertical&&(i.start=-1===i.start?2:i.start,i.end=4,i.moveBarStart=0,i.moveBarEnd=-1===i.moveBarStart?2:i.moveBarStart),i}getTranslateCompensation(e,t){return{x:-t.width/2+e.xSign*(t.width/2)*Math.cos(e.angle)-e.ySign*(t.height/2)*Math.sin(e.angle)+e.x,y:-t.height/2+e.xSign*(t.width/2)*Math.sin(e.angle)+e.ySign*(t.height/2)*Math.cos(e.angle)+e.y}}getAbsPointByQuadrant(e,t,n,r){const{width:i,height:o,baseDegree:s}=a.Z.lineDimension(e),l=2*n*Math.sin(s),c=2*n*Math.cos(s),d=t.width/t.initWidth;switch(r){case 1:return{x:t.x+l*d,y:t.y+(c+o)*d};case 2:return{x:t.x+(l+i)*d,y:t.y+(c+o)*d};case 3:return{x:t.x+(l+i)*d,y:t.y+c*d};case 4:return{x:t.x+l*d,y:t.y+c*d};default:return{x:t.x+l*d,y:t.y+c*d}}}getAbsPointWithRespectToReferencePoint(e,t,n,r,i){const{width:o,height:s,baseDegree:l}=a.Z.lineDimension(t),c=2*r*Math.sin(l),d=2*r*Math.cos(l),u=n.width/n.initWidth;switch(i){case 1:return{x:e.x-c*u,y:e.y-(d+s)*u};case 2:return{x:e.x-(c+o)*u,y:e.y-(d+s)*u};case 3:return{x:e.x-(c+o)*u,y:e.y-d*u};case 4:return{x:e.x-c*u,y:e.y-d*u};default:return{x:e.x-c*u,y:e.y-d*u}}}getTranslateCompensationForLine(e,t,n,r,i){const o=a.Z.getLineQuadrant(i),s=0===e?(o-1+2)%4+1:o;return this.getAbsPointWithRespectToReferencePoint(t,i,n,r,s)}getControllerStyleParameters(e,t,n,r,o){if(n){o=null!=o?o:1;const{x:n,y:l,width:c,height:d}=t,u=t.width/t.initWidth,g=Math.max(o,s.Z.fixSize((r?60:16)/i.Z.getters.getContentScaleRatio))*u,{xDiff:p,yDiff:h}=a.Z.lineDimension(e),m=Math.sqrt(Math.pow(p,2)+Math.pow(h,2))*u,y=Math.atan2(h,p)/Math.PI*180;return{x:n+(c-m)/2,y:l+(d-g)/2,width:m,height:g,rotate:y}}return t}getMarkerIndex(e,t){return[2,3].includes(t)?(1-e.xSign)/2:(e.xSign+1)/2}getCorRadPercentage(e,t,n){const r=a.Z.getMaxCorRad(n,e);return 100*t[1]/r}getCorRadValue(e,t,n){const r=a.Z.getMaxCorRad(n,e);return t*r/100}shapeCategorySorter(e,t){switch(e){case"A":return{hasHorizontal:!1,hasVertical:!1};case"B":case"C":case"E":case"G":switch(t){case 1:return{hasHorizontal:!0,hasVertical:!0};case 2:return{hasHorizontal:!0,hasVertical:!1};case 3:return{hasHorizontal:!1,hasVertical:!0}}return{hasHorizontal:!1,hasVertical:!1};default:return{hasHorizontal:!1,hasVertical:!1}}}resizeShapeHandler(e,t,n,r,i){var o,s,a,l,c,d,u,g;const p=30;switch(e.category){case"A":console.warn("shape of category A should not have resizer!");break;case"B":{let e=t.scaleX,o=t.scaleY;e=r/n.width===1?e:r/n.width*e,o=i/n.height===1?o:i/n.height*o,this.updateLayerScale(b.ZP.pageIndex,b.ZP.layerIndex,e,o);break}case"C":{const t=e.styles.scale;let n=r*e.ratio/t-e.vSize[0],o=i*e.ratio/t-e.vSize[1];const s=e.pSize;switch(e.scaleType){case 1:s&&(s[0]+n<p||s[1]+o<p)&&(n=s[0]+n<p?p-s[0]:n,o=s[1]+o<p?p-s[1]:o,r=n===p-s[0]?(n+e.vSize[0])*t/e.ratio:r,i=o===p-s[1]?(o+e.vSize[1])*t/e.ratio:i);break;case 2:s&&s[0]+n<p&&(n=s[0]+n<p?p-s[0]:n,r=n===p-s[0]?(n+e.vSize[0])*t/e.ratio:r);break;case 3:s&&s[1]+o<p&&(o=s[1]+o<p?p-s[1]:o,i=o===p-s[1]?(o+e.vSize[1])*t/e.ratio:i)}this.updateShapePatchDiff(b.ZP.pageIndex,b.ZP.layerIndex,[n,o]),this.updateLayerInitSize(b.ZP.pageIndex,b.ZP.layerIndex,r/t,i/t,t);break}case"G":{const t=e.styles.scale;let n=r*e.ratio/t-e.vSize[0],p=i*e.ratio/t-e.vSize[1];const h=e.pDiff;switch(e.scaleType){case 1:h&&(n=Math.max(n,null!=(s=null==(o=e.pDiffLimits)?void 0:o[0])?s:0),p=Math.max(p,null!=(l=null==(a=e.pDiffLimits)?void 0:a[1])?l:0),r=(n+e.vSize[0])*t/e.ratio,i=(p+e.vSize[1])*t/e.ratio);break;case 2:h&&(n=Math.max(n,null!=(d=null==(c=e.pDiffLimits)?void 0:c[0])?d:0),r=(n+e.vSize[0])*t/e.ratio);break;case 3:h&&(p=Math.max(p,null!=(g=null==(u=e.pDiffLimits)?void 0:u[1])?g:0),i=(p+e.vSize[1])*t/e.ratio)}this.updateShapePatchDiff(b.ZP.pageIndex,b.ZP.layerIndex,[n,p]),this.updateLayerInitSize(b.ZP.pageIndex,b.ZP.layerIndex,r/t,i/t,t);break}}return[r,i]}isOnLeftHandSide(e,t,n){const r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return r.x*i.y-r.y*i.x>0}isClickOnController(e,t=b.ZP.layerIndex,n=b.ZP.subLayerIdx){var r;let i=document.getElementById(`nu-layer_${b.ZP.pageIndex}_${t}_${n}`);if(i){const o=b.ZP.getCurrLayer;let s=o.styles.rotate;if(a.Z.isLine(o)){i=document.getElementById(`nu-layer__line-mover_${b.ZP.pageIndex}_${t}_${n}`);const{xDiff:e,yDiff:l}=a.Z.lineDimension(null!=(r=o.point)?r:[]);s=Math.atan2(l,e)/Math.PI*180}const l=i.getBoundingClientRect(),c={x:e.clientX,y:e.clientY},{x:d,y:u,width:g,height:p}=l,h=v.ZP.sin((s+360)%90),m=v.ZP.cos((s+360)%90),y=(p*h-g*m)/(h*h-m*m),f=(p*m-g*h)/(m*m-h*h),w=u,N=u+p,S=d,x=d+g,P={x:S+f*h,y:w},I={x:x,y:w+y*h},_={x:x-f*h,y:N},k={x:S,y:N-y*h};return this.isOnLeftHandSide(P,I,c)&&this.isOnLeftHandSide(I,_,c)&&this.isOnLeftHandSide(_,k,c)&&this.isOnLeftHandSide(k,P,c)}return!1}updateImgPos(e,t,n,r){i.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:{imgX:n,imgY:r}})}updateImgSize(e,t,n,r){i.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:{imgWidth:n,imgHeight:r}})}updateLayerProps(e,t,n){i.Z.commit("UPDATE_layerProps",{pageIndex:e,layerIndex:t,props:n})}updateLayerPos(e,t,n,r){i.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:{x:n,y:r}})}updateLayerSize(e,t,n,r,o){i.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:{width:n,height:r,scale:o}})}updateLayerScale(e,t,n,r){i.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:{scaleX:n,scaleY:r}})}updateLayerRotate(e,t,n){i.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:{rotate:n}})}updateLayerInitSize(e,t,n,r,o){i.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:{initWidth:n,initHeight:r,initSize:o}})}updateImgClipPath(e,t,n){i.Z.commit("UPDATE_layerProps",{pageIndex:e,layerIndex:t,props:{clipPath:n}})}updateShapePatchDiff(e,t,n){i.Z.commit("UPDATE_layerProps",{pageIndex:e,layerIndex:t,props:{pDiff:n}})}updateShapeLinePoint(e,t,n){i.Z.commit("UPDATE_layerProps",{pageIndex:e,layerIndex:t,props:{point:n}})}updateShapeVSize(e,t,n){i.Z.commit("UPDATE_layerProps",{pageIndex:e,layerIndex:t,props:{vSize:n}})}updateShapeCorRad(e,t,n,r){i.Z.commit("UPDATE_layerProps",{pageIndex:e,layerIndex:t,props:{size:[n[0],r]}})}}var j=new F},71446:function(e,t,n){"use strict";var r=n(89497),i=Object.defineProperty,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))a.call(t,n)&&l(e,n,t[n]);return e};const d=["font","weight","align","lineHeight","fontSpacing","size","writingMode","decoration","color","style","caretColor","min-width","min-height","backgroundImage","backgroundSize","backgroundPosition","opacity","webkitTextFillColor","webkitBackgroundClip","filter","--base-stroke","webkitTextStrokeColor","textShadow","willChange","type","assetId","userId","fontUrl"],u=Object.assign({},...d.map((e=>({[e]:e.replace(/([A-Z]|webkit)/g,(e=>`-${e.toLowerCase()}`))}))),{x:"translateX",y:"translateY",scaleX:"scaleX",scaleY:"scaleY",font:"font-family",weight:"-webkit-text-stroke-width",align:"text-align",fontSpacing:"letter-spacing",size:"font-size",decoration:"text-decoration-line",style:"font-style",type:"font-type",assetId:"asset-id",userId:"user-id",fontUrl:"font-url"});class g{convertTransformStyle(e,t,n,r,i=!1,o=1){return{transform:i?`translate(${e*o}px, ${t*o}px) rotate(${r}deg)`:`translate3d(${e*o}px, ${t*o}px, ${n}px) rotate(${r}deg)`}}convertFlipStyle(e,t){return e&&t?{transform:"scaleX(-1) scaleY(-1)"}:e?{transform:"scaleX(-1)"}:t?{transform:"scaleY(-1)"}:{transform:""}}convertFontStyle(e){const t={};return d.forEach((n=>{void 0!==e[n]&&("size"===n?t[u[n]]=1.333333*e[n]+"px":"weight"===n?t[u[n]]="bold"===e[n]?`calc(var(--base-stroke) + ${e.size/32}px)`:"calc(var(--base-stroke))":"fontSpacing"===n?t[u[n]]="number"===typeof e[n]?`${e[n]}em`:`${e[n]}`:"font"===n?t[u[n]]=this.getFontFamily(e[n]):"color"===n?(t[u[n]]=`${e[n]}`,t["text-decoration-color"]=`${e[n]}`):["min-width","min-height"].includes(n)?(t[n]=`${e[n]}`,t.display="inline-block",t["letter-spacing"]="0",t["text-align"]="center"):["lineHeight","opacity"].includes(n)?t[u[n]]=`${e[n]}`:t[u[n]]="number"===typeof e[n]?`${e[n]}px`:`${e[n]}`)})),t}convertVerticalStyle(e){return{writingMode:e.includes("vertical")?"vertical-rl":"initial"}}getFontFamily(e){return(e+",").concat(r.Z.getters["text/getDefaultFonts"])}convertDefaultStyle(e,t=!1,n=1){const r={};return Object.assign(r,c(c({width:"number"===typeof e.width?e.width*n+"px":"initial",height:"number"===typeof e.height?e.height*n+"px":"initial"},100!==e.opacity&&{opacity:""+e.opacity/100}),this.convertTransformStyle(e.x,e.y,e.zindex,e.rotate,t,n))),r}}t["Z"]=new g},20951:function(e,t,n){"use strict";n.d(t,{T$:function(){return k},vg:function(){return Z}});var r=n(90469),i=n(23931),o=n(52495),s=n(89497),a=n(50559),l=n(53650),c=n(60410),d=n.n(c),u=n(86052),g=n(93261),p=n(78871),h=n(32905),m=n(52632),y=n(4821),f=n(46921),b=n(44306),v=Object.defineProperty,w=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,x=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P=(e,t)=>{for(var n in t||(t={}))N.call(t,n)&&x(e,n,t[n]);if(w)for(var n of w(t))S.call(t,n)&&x(e,n,t[n]);return e},I=(e,t,n)=>(x(e,"symbol"!==typeof t?t+"":t,n),n),_=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));function k(){const e=["deleteItem","deleteForever","recoverItem","moveDesignToFolder","downloadDesign","favorDesign","unfavorDesign","rootDesign"];return e}function Z(){const e=["deleteFolderForever","recoverItem"];return e}class C{constructor(){I(this,"ROOT","$ROOT$"),I(this,"event",new l.EventEmitter),I(this,"eventHash",{})}get isLogin(){return s.Z.getters["user/isLogin"]}get teamId(){return s.Z.getters["user/getTeamId"]}get ROOT_DISPLAY(){return i.Z.global.t("NN0187")}on(e,t){this.eventHash[e]&&(this.event.off(e,this.eventHash[e]),delete this.eventHash[e]),this.event.on(e,t),this.eventHash[e]=t}off(e){this.eventHash[e]&&(this.event.off(e,this.eventHash[e]),delete this.eventHash[e])}emit(e){this.event.emit(e)}apiDesign2IDesign(e){return{id:e.id,asset_index:e.asset_index,name:e.name,width:e.width,height:e.height,unit:e.unit,createdTime:e.create_time,lastUpdatedTime:e.update_time,favorite:e.favorite>0,ver:e.ver,thumbnail:"",signedUrl:e.signed_url,pageNum:e.page_num,polling:e.polling,group_type:e.group_type}}apiFolder2IFolder(e){return{id:e.id,name:e.name,createdTime:e.create_time,lastUpdatedTime:e.update_time,author:e.author,subFolders:[],isExpanded:!1,isCurrLocation:!1}}updateFolders(e,t){const n={},r=[];for(const i of t)n[i.id]={seen:!1,folder:i};for(const[i,o]of e.entries())void 0!==n[o.id]?(n[o.id].seen=!0,n[o.id].folder.name!==o.name&&(o.name=n[o.id].folder.name)):r.unshift(i);for(const i of r)e.splice(i,1);for(const{seen:i,folder:o}of Object.values(n))i||e.push(o);return e}getInsertIndex(e,t,n,r){const i=n?-1:1,o="name"===t?e=>e.name.localeCompare(r.name)*i>0:e=>(Date.parse(e.lastUpdatedTime)-Date.parse(r.lastUpdatedTime))*i>0,s=e.findIndex(o);return s>=0?s:e.length}sortByCreateTime(e){return e.sort(((e,t)=>Date.parse(t.createdTime)-Date.parse(e.createdTime))),e}newFolder(e,t,n=!1,r=!1){const i=n?new Date(p.Z.generateRandomTime(new Date(2021,1,1),new Date)).toISOString():(new Date).toISOString();return{id:r?this.ROOT:p.Z.generateAssetId()+"_new",name:e,author:t,createdTime:i,lastUpdatedTime:i,isExpanded:!1,isCurrLocation:!1,subFolders:[]}}newFolders(e,t){const n=e.split("/"),r=this.newFolder(n[0],t);let i=r;for(let o=1;o<n.length;o++)i.subFolders.push(this.newFolder(n[o],t,!0)),i=i.subFolders[0];return r}makeDesignsForTesting(){const e=[];return e[0]=this.newFolder(this.ROOT,"SYSTEM",!0,!0),e[0].subFolders=[this.newFolders("Toby/素材2/材質3/材質4/材質5","Daniel"),this.newFolder("日本行銷","Daniel",!0)],e}initializeFolders(){return[this.newFolder(this.ROOT,"SYSTEM",!0,!0)]}makePath(e){return e.substring(2).split("/")}appendPath(e,t){return[...e,t.id]}createPath(e){return this.appendPath(e.parents,e.folder)}makeNormalMenuItems(){return[{icon:"copy",text:`${i.Z.global.t("NN0251")}`},{icon:"folder",text:`${i.Z.global.t("NN0206")}`,extendable:!0},{icon:"trash",text:`${i.Z.global.t("NN0034")}`}]}makeFavoriteMenuItems(){return[{icon:"trash",text:`${i.Z.global.t("NN0034")}`}]}makeTrashMenuItems(){return[{icon:"reduction",text:`${i.Z.global.t("NN0204")}`},{icon:"trash",text:`${i.Z.global.t("NN0200")}`}]}makeMobileNormalMenuItems(e,t){const n=[{icon:"copy",text:`${i.Z.global.t("NN0251")}`},{icon:"folder",text:`${i.Z.global.t("NN0206")}`},{icon:e?"favorites-fill":"favorites",text:e?`${i.Z.global.t("NN0207")}`:`${i.Z.global.t("NN0205")}`},{icon:"confirm-circle",text:`${i.Z.global.t("NN0680")}`},{icon:"trash",text:`${i.Z.global.t("NN0034")}`}];return t&&n.splice(2,0,{icon:"folder_minus",text:`${i.Z.global.t("NN0692")}`}),n}makeMobileFavoriteMenuItems(){return[{icon:"favorites-fill",text:`${i.Z.global.t("NN0207")}`},{icon:"confirm-circle",text:`${i.Z.global.t("NN0680")}`},{icon:"trash",text:`${i.Z.global.t("NN0034")}`}]}makeMobileTrashMenuItems(){return[{icon:"undo",text:`${i.Z.global.t("NN0204")}`},{icon:"confirm-circle",text:`${i.Z.global.t("NN0680")}`},{icon:"trash",text:`${i.Z.global.t("NN0200")}`}]}makeMobileNormalFolderMenuItems(e){const t=[{icon:"folder",text:`${i.Z.global.t("NN0206")}`},{icon:"trash",text:`${i.Z.global.t("NN0034")}`}];return e&&t.splice(1,0,{icon:"folder_minus",text:`${i.Z.global.t("NN0692")}`}),t}makeMobileTrashFolderMenuItems(){return[{icon:"undo",text:`${i.Z.global.t("NN0204")}`},{icon:"confirm-circle",text:`${i.Z.global.t("NN0690")}`},{icon:"trash",text:`${i.Z.global.t("NN0200")}`}]}findFolder(e,t){for(const n of e)if(n.id===t)return n}findFolders(e,t){for(const n of e)if(n.id===t)return n.subFolders;return[]}search(e,t){if(0===t.length)return;const n=t.slice(0,t.length-1),r=t[t.length-1];let i=e;for(const o of n)i=this.findFolders(i,o);return this.findFolder(i,r)}goTo(e,t){let n=e;for(const r of t)n=this.findFolders(n,r);return n}getFolderNames(e,t){const n=[];let r=e;for(const i of t){const e=this.findFolder(r,i);if(!e)break;n.push(e.name),r=e.subFolders}return n}dislocateFrom(e,t){if(t.startsWith("f")){const n=this.search(e,this.makePath(t));n&&(n.isCurrLocation=!1)}}locateTo(e,t){if(t.startsWith("f")){const n=this.search(e,this.makePath(t));n&&(n.isCurrLocation=!0)}}isParentOrEqual(e,t){const n=this.createPath(e).join("/"),r=this.createPath(t).join("/");return r.startsWith(n)}dispatchDesignMenuAction(e,t,n){switch(e){case"copy":s.Z.dispatch("design/copyDesign",t).then((()=>{n()}));break;case"trash":this.delete(t),n({event:"deleteItem",payload:{type:"design",data:t,dest:s.Z.getters["design/getCurrLocation"]}});break;case"delete":n({event:"deleteForever",payload:t});break;case"reduction":this.recover(t).then((e=>{""!==e&&n({event:"recoverItem",payload:{type:"design",data:t,dest:e}})}));break;case"undo":this.recover(t),n({event:"recoverItem",payload:{type:"design",data:t}});break;case"folder":n({event:"moveDesignToFolder",payload:t});break;case"download":n({event:"downloadDesign",payload:t});break;case"favorites":this.addToFavorite(t),n({event:"favorDesign",payload:t});break;case"favorites-fill":this.removeFromFavorite(t),n({event:"unfavorDesign",payload:t});break;case"confirm-circle":s.Z.commit("design/UPDATE_addToSelection",t),n();break;case"folder_minus":this.move(t,[this.ROOT]),n({event:"rootDesign",payload:void 0});break}}dispatchFolderMenuAction(e,t,n){switch(e){case"delete":n({event:"deleteFolderForever",payload:t});break;case"undo":this.recoverFolder(t),n({event:"recoverItem",payload:{type:"folder",data:t}});break;case"reduction":this.recoverFolder(t).then((e=>{""!==e&&n({event:"recoverItem",payload:{type:"folder",data:t,dest:e}})}));break}}dispatchMobileFolderMenuAction(e,t,n){switch(e){case"folder":n({event:"moveDesignToFolder",payload:void 0});break;case"trash":this.checkEmpty(t).then((e=>{e?(this.deleteFolder(t),n({event:"deleteItem",payload:{type:"folder",data:t.folder}})):n({event:"deleteFolder",payload:t})}));break;case"confirm-circle":s.Z.commit("design/UPDATE_addFolderToSelection",t.folder),n();break;case"folder_minus":this.moveFolder(t,[this.ROOT]),n({event:"rootFolder",payload:void 0});break;default:this.dispatchFolderMenuAction(e,t.folder,n)}}addNewFolder(e,t=!1,n,r=!1){const o=this.newFolder(null!=n?n:`${i.Z.global.t("NN0249")}`,"SYSTEM");return s.Z.commit("design/UPDATE_insertFolder",{parents:e,folder:o}),r&&s.Z.commit("design/UPDATE_insertFolderToCopied",{parents:e.slice(1),folder:o}),t&&s.Z.commit("design/UPDATE_addFolder",o),o.id}move(e,t){s.Z.dispatch("design/moveDesign",{design:e,destination:t})}moveAll(e,t){s.Z.dispatch("design/moveDesigns",{designs:e,destination:t})}moveFolder(e,t){return _(this,null,(function*(){yield s.Z.dispatch("design/moveFolder",{parents:e.parents,folder:e.folder,destination:t})}))}delete(e){s.Z.dispatch("design/deleteDesign",e)}deleteAll(e){s.Z.dispatch("design/deleteDesigns",e)}deleteFolder(e){return _(this,null,(function*(){yield s.Z.dispatch("design/deleteFolder",e)}))}deleteForever(e){s.Z.dispatch("design/deleteDesignForever",e)}deleteAllForever(e,t){s.Z.dispatch("design/deleteAllForever",{designs:e,folders:t})}deleteFolderForever(e){s.Z.dispatch("design/deleteFolderForever",e)}recover(e,t){return _(this,null,(function*(){return yield s.Z.dispatch("design/recoverDesign",{design:e,deletionLocation:t})}))}recoverAll(e,t){return _(this,null,(function*(){return yield s.Z.dispatch("design/recoverAll",{designs:e,folders:t})}))}recoverFolder(e,t){return _(this,null,(function*(){return yield s.Z.dispatch("design/recoverFolder",{folder:e,deletionLocation:t})}))}removeFromFavorite(e){s.Z.dispatch("design/unfavorDesign",e)}removeAllFromFavorite(e){s.Z.dispatch("design/unfavorDesigns",e)}addToFavorite(e){s.Z.dispatch("design/favorDesign",e)}addAllToFavorite(e){s.Z.dispatch("design/favorDesigns",e)}setDesignName(e,t){s.Z.dispatch("design/setDesignName",{design:e,name:t})}setFolderName(e,t,n){s.Z.dispatch("design/setFolderName",{folder:e,name:t,parents:n})}createFolder(e,t,n){s.Z.dispatch("design/createFolder",{path:e.slice(1).join(","),folder:t,name:n})}checkEmpty(e){return _(this,null,(function*(){return yield s.Z.dispatch("design/checkEmpty",e)}))}isMaxLevelReached(e){return e>=4}fetchDesign(e,t,n){return _(this,null,(function*(){const r=yield s.Z.dispatch("design/fetchDesign",{teamId:e,assetId:t}),l=e===this.teamId,c=r.status;switch(c){case 0:return l&&(s.Z.commit("SET_folderInfo",{isRoot:r.is_root,parentFolder:r.parent_folder,path:r.path}),s.Z.commit("SET_pagesName",r.name),s.Z.commit("SET_assetIndex",r.asset_index)),yield b.Z.getDesign("design",{designId:t,teamId:e,fetchTarget:r.url_map["config.json"]},n),void(l||(yield b.Z.uploadDesign(b.Z.PutAssetDesignType.UPDATE_BOTH)));case 1:(0,a.h4)({group:"error",text:i.Z.global.t("SKT0019")});break;case 2:(0,a.h4)({group:"error",text:i.Z.global.t("SHR0020")});break}s.Z.commit("SET_assetId",""),s.Z.commit("file/SET_setLayersDone"),yield o.Z.replace({query:Object.assign({})}),yield y.Z.refreshTemplateState()}))}fetchDesigns(e,t=!0){t&&s.Z.commit("design/SET_allDesigns",[]),s.Z.commit("design/SET_isDesignsLoading",!0),e().then((()=>{s.Z.commit("design/SET_isDesignsLoading",!1)}))}fetchFolders(e){s.Z.commit("design/SET_allFolders",[]),s.Z.commit("design/SET_isFoldersLoading",!0),e().then((()=>{s.Z.commit("design/SET_isFoldersLoading",!1)}))}getDesignPreview(e,t=2,n,r,i=0){var o;const s=`${i}_prev${1===t?"":`_${t}x`}`,a=null!=(o=null==n?void 0:n.toString())?o:p.Z.generateRandomString(6);if(void 0!==e){const t=`https://template.vivipic.com/${b.Z.loginOutput.upload_map.path}asset/design/${e}/${s}?ver=${a}`;return t}return r?r[s]+`&ver=${a}`:""}getDesignPreviews(e,t,n=2,r,i){return Array(e).fill("").map(((e,o)=>this.getDesignPreview(t,n,r,i,o)))}convertBleedsToQuery(e){return`${e.top},${e.right},${e.bottom},${e.left}`}newDesignWithLoginRedirect(e=1080,t=1080,n="px",r,i,s,a){const l=P({type:"new-design-size",width:e.toString(),height:"7"===(null==r?void 0:r.toString())?e.toString():t.toString(),unit:n,themeId:r?r.toString():void 0,path:i,folderName:s},void 0!==a&&{bleeds:this.convertBleedsToQuery(a)});o.Z.push({name:"Editor",query:l})}newDesign(e=1080,t=1080,n="px",r){s.Z.commit("file/SET_setLayersDone");const i=f.ZP.convertSize(e,t,n,"px"),o=h.Z.getPageDefaultBleeds({physicalWidth:e,physicalHeight:t,unit:n},"px");if(h.Z.setPages([h.Z.newPage({width:i.width,height:i.height,physicalWidth:e,physicalHeight:t,bleeds:o,physicalBleeds:"px"===n?o:h.Z.getPageDefaultBleeds({physicalWidth:e,physicalHeight:t,unit:n}),unit:n})]),r){const e="px"===n?0:f.cB,t="px"===n?h.Z.MAX_BLEED.px:(0,c.floor)(f.ZP.convert(h.Z.MAX_BLEED.mm,"mm",n),e);Object.keys(r).forEach((e=>{r[e]=Math.min(r[e],t)})),h.Z.setBleeds(0,r),h.Z.setIsEnableBleed(!0,0)}h.Z.clearPagesInfo(),g.Z.handleContentScaleRatio(0)}newDesignWithTemplate(e,t,n,r,i,a){console.log(n);const l=f.ZP.convertSize(e,t,i,"px");this.newDesign(e,t,i,a),u.ZP.addTemplateToRecentlyUsedPure(r).then((()=>{u.ZP.addTemplate(n,{width:l.width,height:l.height,physicalWidth:e,physicalHeight:t,unit:i},!1).then((()=>{if(g.Z.handleContentScaleRatio(0),m.Z.reset(),this.isLogin){s.Z.commit("SET_assetId",p.Z.generateAssetId());const e=d().omit(o.Z.currentRoute.value.query,["width","height"]);e.type="design",e.design_id=b.Z.assetId,e.team_id=b.Z.teamId,o.Z.replace({query:e}).then((()=>{b.Z.uploadDesign(b.Z.PutAssetDesignType.UPDATE_BOTH)}))}}))}))}setDesign(e){var t;const n=e.id?e.id:this.getPrivateDesignId(null==(t=e.signedUrl)?void 0:t["config.json"]);o.Z.push({name:"Editor",query:{type:"design",design_id:n,team_id:this.teamId}})}getPrivateDesignId(e){var t,n;return null!=(n=null==(t=(null!=e?e:"").match(/design\/(.*)\/config\.json/))?void 0:t[1])?n:""}getDesignName(){return s.Z.getters.getPagesName}renameDesign(e){return _(this,null,(function*(){s.Z.getters.getAssetId||(yield b.Z.uploadDesign(b.Z.PutAssetDesignType.UPDATE_BOTH));let t=s.Z.getters.getAssetIndex;if(-1===t){const e=r.Z.getTeamId(),n=s.Z.getters.getAssetId,i=yield s.Z.dispatch("design/fetchDesign",{teamId:e,assetId:n});t=i.asset_index,s.Z.commit("SET_assetIndex",t)}yield r.Z.updateDesigns(r.Z.getToken(),r.Z.getLocale(),r.Z.getTeamId(),"rename",t.toString(),null,e),s.Z.commit("SET_pagesName",e)}))}}t["ZP"]=new C},3716:function(e,t){"use strict";var n=Object.defineProperty,r=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,i=(e,t,n)=>(r(e,"symbol"!==typeof t?t+"":t,n),n);class o{constructor(){i(this,"prev"),this.prev={el:null,time:0,timer:0}}click(e,{doubleClickCallback:t=(()=>{}),clickCallback:n=(()=>{}),delay:r=500,clickWaitForDelay:i=!0}){"click"===e.type&&console.error("!! Don't use click event in doubleTapUtils. Use pointerdown instead. !!");const o=Date.now();this.prev.el===e.target&&o-this.prev.time<r?(clearTimeout(this.prev.timer),t(),this.prev={el:null,time:0,timer:0}):(i||n(),this.prev={el:e.target,time:o,timer:i?window.setTimeout(n,r):0})}}t["Z"]=new o},49901:function(e,t,n){"use strict";var r=n(23931),i=n(865),o=n(89497),s=n(60410),a=n(86052),l=n(67579),c=n(75231),d=n(98824),u=n(50543),g=n(32905),p=n(52632),h=n(46921),m=Object.defineProperty,y=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,v=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||(t={}))f.call(t,n)&&v(e,n,t[n]);if(y)for(var n of y(t))b.call(t,n)&&v(e,n,t[n]);return e},N=(e,t,n)=>(v(e,"symbol"!==typeof t?t+"":t,n),n);class S{constructor(e="",t=""){N(this,"imgBuff",{layerId:"",subLayerId:"",styles:{},srcObj:{type:"",assetId:"",userId:""},shadow:{srcObj:{type:"",assetId:"",userId:""}}}),this.imgBuff.layerId=e,this.imgBuff.subLayerId=t}itemDragStart(e,t,n,r,i){const{width:s,height:a,x:l,y:d}=e.target.getBoundingClientRect(),{offsetX:u=10,offsetY:g=15,previewSrc:p="",resizeRatio:h=.5,aspectRatio:m=s/a}=i||{},y=m>1?s:a*m,f=y/m;let{width:b,height:v}=i||{};if("undefined"===typeof b||"undefined"===typeof v){const e=o.Z.getters.getPage(c.ZP.pageIndex),t=e.width/e.height;b=m>t?e.width*h:e.height*h*m,v=m>t?e.width*h/m:e.height*h}const N=w({type:t,styles:{x:(e.clientX-l)*(o.Z.getters.getPageScaleRatio/100),y:(e.clientY-d)*(o.Z.getters.getPageScaleRatio/100),width:b,height:v},previewSrc:p},n),S=e.dataTransfer;S.dropEffect="move",S.effectAllowed="move",S.setData("data",JSON.stringify(N));const x=new Image;x.src=r,x.crossOrigin="anonymous",x.setAttribute("style",`width: 100%;height: 100%;position: absolute;transform: translate(${u}px, ${g}px);`);const P=document.createElement("div");P.appendChild(x),P.setAttribute("style",`width: ${Math.floor(y)}px;height: ${Math.floor(f)}px;position: absolute;`),document.body.appendChild(P),S.setDragImage(P,0,0),setTimeout((()=>{document.body.removeChild(P)}),0)}textItemDragStart(e,t,n,r){const{offsetX:i=10,offsetY:s=15}=r||{},a=o.Z.getters.getPageScaleRatio,{x:l,y:c}=e.target.getBoundingClientRect(),d=w({type:t,styles:{x:(e.clientX-l)*(a/100),y:(e.clientY-c)*(a/100)}},n),u=e.dataTransfer;u.dropEffect="move",u.effectAllowed="move",u.setData("data",JSON.stringify(d));const g=document.createElement("div");g.appendChild((()=>{var t,r;let o=e.target;while(o&&"BUTTON"!==o.nodeName)o=o.firstChild;!o&&(o=e.target);const a=null==(t=o.lastChild)?void 0:t.cloneNode(!0);return a.classList.add(`btn-text-${null==(r=n.type)?void 0:r.toLocaleLowerCase()}`),a.setAttribute("style",`color: black;position: absolute;transform: translate(${i}px, ${s}px);white-space: nowrap`),a})()),g.setAttribute("style","position: absolute;padding: 1px;"),document.body.appendChild(g),u.setDragImage(g,0,0),setTimeout((()=>{document.body.removeChild(g)}),0)}itemOnDrop(e,t){const n=e.dataTransfer?e.dataTransfer.getData("data"):null;if(null===n||"string"!==typeof n)return;const i=JSON.parse(n);if("image"===i.type)u.Z.onDrop(e,t);else{const n=document.querySelector(`.nu-page-content-${t}`),l={x:n.getBoundingClientRect().x,y:n.getBoundingClientRect().y},c={x:(e.clientX-l.x)*(100/o.Z.state.pageScaleRatio),y:(e.clientY-l.y)*(100/o.Z.state.pageScaleRatio)};if("standardText"===i.type){const{textType:e,text:n,locale:r,spanStyles:o}=i;a.ZP.addStandardText(e,n,r,t,{styles:c},o)}else if(6===i.type){const e=i.groupChildId?e=>a.ZP.addGroupTemplate(i,i.groupChildId,e):e=>a.ZP.addAsset(i,w({styles:c,pageIndex:t},e)),n=i.groupChildId?g.Z.currFocusPageSize:g.Z.getPageSize(t),o=i.groupChildId?i.content_ids.findIndex((e=>e.id===i.groupChildId)):0,{height:l,width:u,unit:p}=i.content_ids[o];let m=n;if(g.Z.isDetailPage){const t=l/u,r="px"===n.unit?0:h.cB;return m={width:n.width,height:(0,s.round)(n.width*t,r),physicalWidth:n.physicalWidth,physicalHeight:(0,s.round)(n.physicalWidth*t,r),unit:n.unit},void e(m)}const y=n.physicalWidth===u&&n.physicalHeight===l&&n.unit===p;y?e():d.Z.setModalInfo(r.Z.global.t("NN0695"),[`${r.Z.global.t("NN0209",{tsize:`${u}x${l} ${p}`,psize:`${(0,s.round)(n.physicalWidth,h.cB)}x${(0,s.round)(n.physicalHeight,h.cB)} ${n.unit}`})}`],{msg:`${r.Z.global.t("NN0021")}`,class:"btn-light-mid",style:{border:"1px solid #4EABE6"},action:()=>e(m)},{msg:`${r.Z.global.t("NN0208")}`,action:()=>e()})}else a.ZP.addAsset(i,{styles:c,pageIndex:t})}}onImageDragEnter(e,t,n){const r=o.Z.state.currDraggedPhoto.srcObj,s=o.Z.state.currDraggedPhoto.previewSrc,{layerId:a,subLayerId:d}=this.imgBuff;if(o.Z.state.currDraggedPhoto.srcObj.type){const{imgWidth:e,imgHeight:p}=n.styles,h=`path('M0,0h${e}v${p}h${-e}z`,m=w(w({},n.styles),u.Z.clipperHandler(o.Z.state.currDraggedPhoto,h,n.styles).styles);Object.assign(this.imgBuff,{srcObj:w({},n.srcObj),styles:{imgX:n.styles.imgX,imgY:n.styles.imgY,imgWidth:n.styles.imgWidth,imgHeight:n.styles.imgHeight,initWidth:n.styles.initWidth,initHeight:n.styles.initHeight},shadow:{srcObj:w({},n.styles.shadow.srcObj)},previewSrc:n.previewSrc});const{layerIndex:y,subLayerIdx:f}=c.ZP.getLayerInfoById(g.Z.getPage(t).id,a,d);c.ZP.updateLayerProps(t,y,{srcObj:r,previewSrc:s},f),c.ZP.updateLayerStyles(t,y,m,f);const b=n.styles.shadow.currentEffect===i.w.floating;b||!n.styles.shadow.isTransparent&&n.styles.shadow.currentEffect!==i.w.imageMatched||l.ZP.updateShadowSrc({pageIndex:t,layerIndex:y,subLayerIdx:f},{type:"",assetId:"",userId:""})}}onImageDragLeave(e,t){const{layerId:n,subLayerId:r,styles:i,srcObj:s,shadow:a,previewSrc:d}=this.imgBuff,{layerIndex:u,subLayerIdx:p}=c.ZP.getLayerInfoById(g.Z.getPage(t).id,n,r);o.Z.state.currDraggedPhoto.srcObj.type&&s.type&&(c.ZP.updateLayerProps(t,u,{srcObj:s,previewSrc:d},p),c.ZP.updateLayerStyles(t,u,i,p),l.ZP.updateShadowSrc({pageIndex:t,layerIndex:u,subLayerIdx:p},a.srcObj))}onImgDrop(e){o.Z.state.currDraggedPhoto.srcObj.type&&(e.stopPropagation(),p.Z.record())}}t["Z"]=S},93261:function(e,t,n){"use strict";var r=n(89497),i=n(78871),o=n(32905),s=Object.defineProperty,a=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t,n)=>(a(e,"symbol"!==typeof t?t+"":t,n),n);class c{constructor(){l(this,"_mobileSize",{width:0,height:0}),l(this,"_mobileCenterPos",{x:0,y:0}),l(this,"_mobileTopLeftPos",{x:0,y:0})}get mobileSize(){return this._mobileSize}get mobileCenterPos(){return this._mobileCenterPos}get mobileTopLeftPos(){return this._mobileTopLeftPos}get mobileAllPageMode(){return r.Z.getters["mobileEditor/getMobileAllPageMode"]}get currActivePanel(){return r.Z.getters["mobileEditor/getCurrActivePanel"]}get currActiveSubPanel(){return r.Z.getters["mobileEditor/getCurrActiveSubPanel"]}get showMobilePanel(){return r.Z.getters["mobileEditor/getShowMobilePanel"]}get enalbleComponentLog(){return r.Z.getters.getEnalbleComponentLog}get contentScaleRatio(){return r.Z.getters.getContentScaleRatio}get showColorSlips(){return r.Z.state.showColorSlips}setMobilePhysicalData(e){const{size:t,centerPos:n,pos:r}=e;t&&(this._mobileSize.width=t.width,this._mobileSize.height=t.height),n&&(this._mobileCenterPos.x=n.x,this._mobileCenterPos.y=n.y),r&&(this._mobileTopLeftPos.x=r.x,this._mobileTopLeftPos.y=r.y)}setMobileCenterPos(e){e.x&&(this._mobileCenterPos.x=e.x),e.y&&(this._mobileCenterPos.y=e.y)}handleContentScaleCalc(e){var t;const{hasBleed:n}=o.Z;let{width:r,height:i}=n&&!o.Z.inBgRemoveMode?o.Z.getPageSizeWithBleeds(e):e;const s=r/i;o.Z.inBgRemoveMode&&(r=1600,i=r/s);const a=null==(t=document.getElementsByClassName("mobile-panel")[0])?void 0:t.clientHeight;if(!this.mobileSize.height||!this.mobileSize.width){const e=document.getElementById("mobile-editor__content");e&&this.setMobilePhysicalData({size:{width:e.clientWidth,height:e.clientHeight-a-(o.Z.inBgRemoveMode?60:0)}})}const l=.926*(this.mobileSize.width||Number.MAX_SAFE_INTEGER),c=.926*(this.mobileSize.height||Number.MAX_SAFE_INTEGER);if(r>l||i>c){if(r>=i)return l/r;{const e=c/i;return r*e>l?l/r:e}}return 1}handleContentScaleRatio(e){if(i.Z.isTouchDevice()){const t=o.Z.getPage(e),n=this.handleContentScaleCalc(o.Z.inBgRemoveMode?r.Z.getters["bgRemove/getAutoRemoveResult"]:t);r.Z.commit("SET_contentScaleRatio4Page",{pageIndex:e,contentScaleRatio:n});const i={x:.5*(d.mobileSize.width-t.width*this.contentScaleRatio),y:.5*(d.mobileSize.height-t.height*this.contentScaleRatio)};return o.Z.updatePagePos(e,i),o.Z.updatePageInitPos(e,i),n}return 1}toggleColorSlips(e){r.Z.commit("SET_STATE",{showColorSlips:e})}setState(e){r.Z.commit("mobileEditor/SET_STATE",e)}setCloseMobilePanelFlag(e){i.Z.isTouchDevice()&&r.Z.commit("mobileEditor/SET_closeMobilePanelFlag",e)}setMobileAllPageMode(e){i.Z.isTouchDevice()&&(r.Z.commit("mobileEditor/SET_mobileAllPageMode",e),e&&this.setCloseMobilePanelFlag(!0))}setInMultiSelectionMode(e){i.Z.isTouchDevice()&&r.Z.commit("mobileEditor/SET_inMultiSelectionMode",e)}setCurrActivePanel(e){i.Z.isTouchDevice()&&(r.Z.commit("mobileEditor/SET_currActivePanel","bg"===e?e.replace("bg","background"):e),"none"===e?this.setShowMobilePanel(!1):this.setShowMobilePanel(!0))}setCurrActiveSubPanel(e){i.Z.isTouchDevice()&&r.Z.commit("mobileEditor/SET_currActiveSubPanel",e),"none"===e?this.setShowMobileSubPanel(!1):this.setShowMobileSubPanel(!0)}setCurrCardIndex(e){i.Z.isTouchDevice()&&r.Z.commit("mobileEditor/SET_currCardIndex",e)}setInBgSettingMode(e){i.Z.isTouchDevice()&&this.setState({inBgSettingMode:e})}setShowMobilePanel(e){i.Z.isTouchDevice()&&r.Z.commit("mobileEditor/SET_showMobilePanel",e)}setShowMobileSubPanel(e){i.Z.isTouchDevice()&&r.Z.commit("mobileEditor/SET_showMobileSubPanel",e)}}const d=new c;t["Z"]=d},98979:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(50719),i=n(71684);class o{addMissingDesign(e){const{token:t="",type:n,design_id:o}=e;return r.Z.request({url:"/add-missing-design",method:"POST",data:{token:t||(0,i.Z)().token,type:n,design_id:o}})}}var s=new o;class a{addMissingDesign(e,t){s.addMissingDesign({token:"",type:e,design_id:t})}}var l=new a},2531:function(e,t,n){"use strict";n.d(t,{rZ:function(){return d}});var r=n(53650),i=n(78871),o=Object.defineProperty,s=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t,n)=>(s(e,"symbol"!==typeof t?t+"":t,n),n);const l={pointerup:"mouseup",pointermove:"mousemove",pointerdown:"mousedown"},c={pointerup:"touchstart",pointermove:"touchmove",pointerdown:"touchend"};var d=(e=>(e["showPhotoShadow"]="showPhotoShadow",e["switchTab"]="switchTab",e))(d||{});class u{constructor(){a(this,"event"),a(this,"eventHash"),this.event=new r.EventEmitter,this.eventHash={}}checkIsMultiTouch(e){switch(g.getEventType(e)){case"pointer":if(!e.isPrimary)return!0;break;case"touch":if(e.touches.length>1)return!0;break}return!1}getEventType(e){return e.type.includes("pointer")?"pointer":e.type.includes("touch")?"touch":"mouse"}addPointerEvent(e,t){if(window.PointerEvent)window.addEventListener(e,t);else{const n=i.Z.isTouchDevice()?c[e]:l[e];window.addEventListener(n,t)}}removePointerEvent(e,t){if(window.PointerEvent)window.removeEventListener(e,t);else{const n=i.Z.isTouchDevice()?c[e]:l[e];window.removeEventListener(n,t)}}on(e,t){this.off(e),this.event.on(e,t),this.eventHash[e]=t}emit(e,...t){this.eventHash[e]&&this.event.emit(e,...t)}off(e){this.eventHash[e]&&(this.event.off(e,this.eventHash[e]),delete this.eventHash[e])}}const g=new u;t["ZP"]=g},27502:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(50719),i=n(23931),o=n(89497),s={getToken(){return o.Z.getters["user/getToken"]},getLocale(){return i.Z.global.locale},getTeamId(){return o.Z.getters["user/getTeamId"]},fbTracking(e){return console.log(e),r.Z.request({url:"/fb-send-event",method:"POST",data:e,withCredentials:!0})}},a=n(78871),l=n(47147),c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(d)for(var n of d(t))g.call(t,n)&&p(e,n,t[n]);return e},m=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class y{get userId(){return o.Z.getters["user/getUserId"]}get teamId(){return o.Z.getters["user/getTeamId"]||this.userId}get email(){return o.Z.getters["user/getEmail"]}get groupId(){return o.Z.getters.getGroupId}get isAdmin(){return o.Z.getters["user/isAdmin"]}get isLogin(){return o.Z.getters["user/isLogin"]}fbq(e,t,n={},r={}){window.fbq(e,t,n,r);const{eventID:i}=r;if(i){console.log("send fb tacking api");const e=h({event_name:t,event_id:i,url:window.location.href,email:this.email,custom_data:JSON.stringify(n)},n.subscription_id&&{subscription_id:n.subscription_id});console.log(e),this.fbTracking(e)}}fbTracking(e){return m(this,null,(function*(){const t=yield s.fbTracking(e);return console.log(t),t}))}signUp(){const e=a.Z.generateRandomString(8);this.fbq("track","CompleteRegistration",{},{eventID:e})}startTrial(){const e=a.Z.generateRandomString(8);this.fbq("track","StartTrial",{value:0,currency:"USD",predicted_ltv:0},{eventID:e})}subscribe(e){const t=a.Z.generateRandomString(8),n=e?79.99:8.99;l.Z.inBrowserMode?this.fbq("track","Subscribe",{subscription_id:this.userId,value:0,currency:"USD",predicted_ltv:0},{eventID:t}):(l.Z.sendAdEvent("subscribe",{subscription_id:this.userId,value:n,currency:"USD",predicted_ltv:0}),l.Z.sendAdEvent("purchased",{subscription_id:this.userId,value:n,currency:"USD",predicted_ltv:0}))}}var f=new y},7230:function(e,t,n){"use strict";var r=n(28253),i=n(89497),o=n(60410),s=n(62013),a=n(83122),l=n(75231),c=n(52632),d=n(23917),u=n(89456),g=n(16290),p=Object.defineProperty,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&f(e,n,t[n]);if(h)for(var n of h(t))y.call(t,n)&&f(e,n,t[n]);return e},v=(e,t,n)=>(f(e,"symbol"!==typeof t?t+"":t,n),n);class w{constructor(){v(this,"copiedFormat"),v(this,"APPLICABLE_TYPES",{image:["image","frame"],text:["text"]})}isCurveText(e){return d.Z.isCurvedText(e)}isApplicableType(e,t){var n;return(null!=(n=this.APPLICABLE_TYPES[e])?n:[]).includes(t)}extractTextFormat(e){const t=e.paragraphs,n=t[t.length-1],i=n.spans,s=i[i.length-1],a=Object.fromEntries(r.KS.map((t=>[t,(0,o.cloneDeep)(e.styles[t])])));return b({paragraphStyle:(0,o.cloneDeep)(n.styles),spanStyle:(0,o.cloneDeep)(s.styles)},a)}extractImageFormat(e){return(0,o.cloneDeep)(e.styles.adjust)}copyTextFormat(e){const t=this.extractTextFormat(e);this.saveFormat({type:"text",content:t})}copyImageFormat(e){const t=this.extractImageFormat(e);this.saveFormat({type:"image",content:t})}saveFormat(e){i.Z.commit("SET_hasCopiedFormat",!0),this.copiedFormat=e}applyTextParagraphsStyles(e,t){const{paragraphStyle:n,spanStyle:r}=e,i=(0,o.cloneDeep)(t);for(const s of i){s.styles=(0,o.cloneDeep)(n),s.spanStyle&&(s.spanStyle=g.Z.textStyles(r));for(const e of s.spans)e.styles=(0,o.cloneDeep)(r)}return i}applyTextStyles(e,t,n,i,s=-1){const a=(0,o.pick)(e,r.KS),c=this.applyTextParagraphsStyles((0,o.pick)(e,["paragraphStyle","spanStyle"]),t.paragraphs),g=d.Z.getPreParams(t),p=-1!==s;if(l.ZP.updateSpecLayerData(b({pageIndex:n,layerIndex:i,styles:(0,o.cloneDeep)(a),props:{paragraphs:c}},p?{subLayerIndex:s,type:["text"]}:{})),this.isCurveText(a.textShape)){const e=d.Z.getCurveTextProps(t);g.wasCurveText&&Object.assign(e,d.Z.getNewAnchoredPosition(d.Z.getPostParams(t,g,e))),l.ZP.updateLayerStyles(n,i,e,s),l.ZP.updateLayerProps(n,i,{widthLimit:-1},s)}else{const e=u.Z.getTextHW(t,t.widthLimit);l.ZP.updateLayerStyles(n,i,b({width:e.width,height:e.height},d.Z.getNewAnchoredPosition(d.Z.getPostParams(t,g,e))),s),l.ZP.updateLayerProps(n,i,{spanDataList:e.spanDataList},s)}}applyImageStylesToFrame(e,t,n,r=-1,i=!1){i||-1===r?s.Z.updateFrameLayerAllClipsStyles(t,n,{adjust:(0,o.cloneDeep)(e)},r):s.Z.updateFrameLayerStyles(t,n,r,{adjust:(0,o.cloneDeep)(e)})}applyFormatIfCopied(e,t,n=-1){if(!this.copiedFormat)return;const r=this.copiedFormat.type,s=i.Z.getters.getLayer(e,t);if("group"===s.type){const i=s.layers,a=n>=0;let d;if(a){const e=i[n];if(!this.isApplicableType(r,e.type))return;d=[e]}else d=i;if("text"===r){const r=this.copiedFormat.content;for(const i in d){const o=n>=0?n:+i,s=d[i];"text"===s.type&&this.applyTextStyles(r,s,e,t,o)}u.Z.updateGroupLayerSize(e,t)}if("image"===r){const r=this.copiedFormat.content;l.ZP.updateSpecLayerData({pageIndex:e,layerIndex:t,subLayerIndex:n>=0?n:void 0,type:["image"],styles:{adjust:(0,o.cloneDeep)(r)}});for(const i in d){const o=n>=0?n:+i,s=d[i];"frame"===s.type&&this.applyImageStylesToFrame(r,e,t,o,!0)}}c.Z.record()}else{if(!this.isApplicableType(r,s.type))return;if("text"===r){const n=this.copiedFormat.content;this.applyTextStyles(n,s,e,t)}if("image"===r){const r=this.copiedFormat.content;"image"===s.type?a.Z.setAdjust({pageIndex:e,layerIndex:t,adjust:(0,o.cloneDeep)(r)}):this.applyImageStylesToFrame(r,e,t,n,!1)}c.Z.record()}}clearCopiedFormat(){i.Z.commit("SET_hasCopiedFormat",!1),this.copiedFormat=void 0}}t["Z"]=new w},62013:function(e,t,n){"use strict";var r=n(23931),i=n(865),o=n(89497),s=n(6400),a=n(50559),l=n(78871),c=n(3162),d=n(13637),u=n(75231),g=n(52632),p=n(56556),h=Object.defineProperty,m=Object.defineProperties,y=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,w=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t)=>{for(var n in t||(t={}))b.call(t,n)&&w(e,n,t[n]);if(f)for(var n of f(t))v.call(t,n)&&w(e,n,t[n]);return e},S=(e,t)=>m(e,y(t));class x{isImageFrame(e){return e.type===s.F5.frame&&1===e.clips.length&&e.clips[0].isFrameImg}frameClipFormatter(e){return"<path d='"+(null!=e?e:"")+"'></path>"}updateFrameLayer(e,t){const n=`M0,0h${e}v${t}h${-e}z`;this.updateFrameLayerProps(u.ZP.pageIndex,u.ZP.layerIndex,0,{clipPath:n}),u.ZP.updateLayerStyles(u.ZP.pageIndex,u.ZP.layerIndex,{initWidth:e,initHeight:t})}frameResizeHandler(e,t,n,r){c.Z.imgResizeHandler(e,t,n,r,((n,r)=>{this.updateFrameLayerStyles(u.ZP.pageIndex,u.ZP.layerIndex,0,{imgX:n,imgY:r}),this.updateFrameLayer(e,t)}),((n,r)=>{this.updateFrameLayerStyles(u.ZP.pageIndex,u.ZP.layerIndex,0,{imgWidth:n,imgHeight:r,width:e,height:t}),this.updateFrameLayer(e,t)}))}detachImage(e){const t=u.ZP.getLayer(u.ZP.pageIndex,e);let n=1===t.clips.length&&"frame"!==t.clips[0].srcObj.type?0:-1;if(-1===n){if(e!==u.ZP.layerIndex)return;n=t.clips.findIndex((e=>e.active&&"frame"!==e.srcObj.type))}if(-1!==n){const r=l.Z.deepCopy(t.clips[n]),{imgWidth:i,imgHeight:o,width:s,height:a,adjust:c}=r.styles;u.ZP.addLayers(u.ZP.pageIndex,[d.Z.newImage({srcObj:N({},r.srcObj),styles:{x:t.styles.x+(r.styles.x+s/4)*t.styles.scale,y:t.styles.y+(r.styles.y+a/4)*t.styles.scale,width:i*t.styles.scale,height:o*t.styles.scale,horizontalFlip:t.styles.horizontalFlip,verticalFlip:t.styles.verticalFlip,opacity:r.styles.opacity,adjust:c}})]),this.updateFrameLayerStyles(u.ZP.pageIndex,e,n,{imgWidth:r.styles.width,imgHeight:r.styles.height,imgX:0,imgY:0,opacity:100,adjust:{}}),this.updateFrameLayerProps(u.ZP.pageIndex,e,n,{srcObj:{type:"frame",userId:"",assetId:""}});const g=document.getElementById(`nu-clipper-${e}`);g&&g.classList.remove("layer-flip"),u.ZP.updateLayerStyles(u.ZP.pageIndex,e,{horizontalFlip:t.styles.horizontalFlip,verticalFlip:t.styles.verticalFlip}),u.ZP.updateLayerStyles(u.ZP.pageIndex,e,{horizontalFlip:!1,verticalFlip:!1}),setTimeout((()=>{const t=document.getElementById(`nu-clipper-${e}`);t&&t.classList.add("layer-flip")}),0)}o.Z.commit("SET_popupComponent",{layerIndex:-1})}updateImgToFrame(){const e=l.Z.deepCopy(u.ZP.getCurrLayer);if("image"===e.type){let t;const n=e.styles.shadow;if(n&&n.currentEffect!==i.w.none){if(["","upload"].includes(n.srcObj.type))return void(0,a.h4)({group:"copy",text:`${r.Z.global.t("NN0665")}`});t=l.Z.deepCopy(n),t.styles.imgHeight*=e.styles.scale,t.styles.imgWidth*=e.styles.scale,t.styles.imgX*=e.styles.scale,t.styles.imgY*=e.styles.scale}const{width:o,height:s,x:c,y:h,rotate:m}=e.styles,{designId:y}=e,f=u.ZP.layerIndex,b=u.ZP.pageIndex;Object.assign(e.styles,{x:0,y:0,zindex:0,rotate:0,shadow:d.Z.newImage({styles:{}}).styles.shadow});const v=d.Z.newFrame({designId:y,styles:{initWidth:o,initHeight:s,width:o,height:s,rotate:m,x:c,y:h,shadow:t},clips:[S(N({},e),{isFrameImg:!0})]});u.ZP.deleteLayer(b,f),u.ZP.addLayersToPos(b,[v],f),u.ZP.updateLayerProps(b,f,{active:!0}),p.Z.reassignZindex(b),g.Z.record()}}updateFrameLayerStyles(e,t,n,r){o.Z.commit("SET_frameLayerStyles",{pageIndex:e,primaryLayerIndex:t,subLayerIndex:n,styles:r})}updateFrameLayerAllClipsStyles(e,t,n,r=-1){-1===r||"undefined"===typeof r?o.Z.commit("SET_frameLayerAllClipsStyles",{pageIndex:e,primaryLayerIndex:t,styles:n}):this.updateSubFrameLayerAllClipsStyles(e,t,r,n)}updateFrameLayerProps(e,t,n,r,i=-1){-1!==n&&o.Z.commit("UPDATE_frameLayerProps",{pageIndex:e,layerIndex:t,targetIndex:n,preprimaryLayerIndex:i,props:r})}updateSubFrameLayerStyles(e,t,n,r,i){o.Z.commit("SET_subFrameLayerStyles",{pageIndex:e,primaryLayerIndex:t,subLayerIndex:n,targetIndex:r,styles:i})}updateSubFrameLayerAllClipsStyles(e,t,n,r){o.Z.commit("SET_subFrameLayerAllClipsStyles",{pageIndex:e,primaryLayerIndex:t,subLayerIndex:n,styles:r})}updateFrameClipSrc(e,t,n,r){o.Z.commit("UPDATE_frameClipSrc",{pageIndex:e,layerIndex:t,subLayerIndex:n,srcObj:N({},r)})}updateFrameDecorColor(e,t){const{pageIndex:n,layerIndex:r,subLayerIdx:i}=e;o.Z.commit("SET_frameDecorColors",{pageIndex:n,layerIndex:r,subLayerIdx:i,payload:t})}checkIsRect(e){if(e.length>200)return!1;for(const t of e)if(Number.isNaN(+t)&&![",","-","."].includes(t)&&!["M","h","v","z"].includes(t))return!1;return!0}}t["Z"]=new x},45157:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(60410),i=Object.defineProperty,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))a.call(t,n)&&l(e,n,t[n]);return e},d=(e,t,n)=>(l(e,"symbol"!==typeof t?t+"":t,n),n);class u{constructor(e,t,n){d(this,"minHeight",100),d(this,"margin",0),d(this,"galleryWidth",300),this.galleryWidth=e||this.galleryWidth,this.minHeight=t||this.minHeight,this.margin=n||this.margin}resizeToMinHeight(e){for(let t=0;t<e.length;t++){const n=e[t];n.preview={width:n.width*this.minHeight/n.height,height:this.minHeight}}}createRows(e){var t,n;const r=[],i={imgs:[],sumOfWidth:0};for(let o=0;o<e.length;o++){const s=e[o],a=e[o+1]||{},l=(null==(t=a.preview)?void 0:t.width)||0;i.sumOfWidth+=(null==(n=s.preview)?void 0:n.width)||0,i.imgs.push(s);const d=i.imgs.length*this.margin,u=!l||i.sumOfWidth+l+d>this.galleryWidth;u&&(r.push(c({},i)),i.imgs=[],i.sumOfWidth=0)}return r}createRowsForLogos(e){var t,n;const r=[],i={imgs:[],sumOfWidth:0};for(let o=0;o<e.length;o++){const s=e[o],a=e[o+1]||{},l=(null==(t=a.preview)?void 0:t.width)||0;i.sumOfWidth+=(null==(n=s.preview)?void 0:n.width)||0,i.imgs.push(s);const d=i.imgs.length*this.margin,u=!l||i.sumOfWidth+l+d>this.galleryWidth;u&&(r.push(c({},i)),i.imgs=[],i.sumOfWidth=0)}return r}generate(e){return e=(0,r.cloneDeep)(e),this.resizeToMinHeight(e),this.createRows(e).map((e=>{for(let t=0;t<e.imgs.length;t++){const n=e.imgs[t],r=(e.imgs.length-1)*this.margin,i=this.galleryWidth-r;n.preview.width=n.preview.width*(i/e.sumOfWidth),n.preview.height=n.preview.height*(i/e.sumOfWidth)}return e.imgs}))}generateForLogo(e){return e=(0,r.cloneDeep)(e),this.resizeToMinHeight(e),this.createRowsForLogos(e).map((e=>{for(let t=0;t<e.imgs.length;t++){const n=e.imgs[t],r=(e.imgs.length-1)*this.margin,i=this.galleryWidth-r;n.preview&&(n.preview.width=n.preview.width*(i/e.sumOfWidth),n.preview.height=n.preview.height*(i/e.sumOfWidth))}return e.imgs}))}}},78871:function(e,t,n){"use strict";var r=n(52495),i=n(89497),o=n(60410),s=n.n(o),a=n(29651),l=n(98824),c=n(32905),d=Object.defineProperty,u=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))g.call(t,n)&&h(e,n,t[n]);if(u)for(var n of u(t))p.call(t,n)&&h(e,n,t[n]);return e},y=(e,t,n)=>(h(e,"symbol"!==typeof t?t+"":t,n),n),f=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class b{constructor(){y(this,"flags",[]),y(this,"flagsCallback")}get scaleRatio(){return i.Z.getters.getPageScaleRatio}get isSuperUser(){return 0===i.Z.state.user.role}get browserInfo(){return i.Z.getters["user/getBrowserInfo"]}get safariLike(){return"Safari"===this.browserInfo.name||"iOS"===this.browserInfo.os.family}isJsonString(e){try{JSON.parse(e)}catch(t){return!1}return!0}deepCopy(e){var t;return null!=(t=s().cloneDeep(e))?t:{}}objHasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exact(e){return 1===e.filter((e=>!0===e)).length}scaleFromCenter(e){const t=2*e.scrollLeft+e.clientWidth,n=2*e.scrollTop+e.clientHeight,r=e.scrollWidth,i=e.scrollHeight;(0,a.Y3)((()=>{e.scrollLeft=Math.round((t*e.scrollWidth/r-e.clientWidth)/2),e.scrollTop=Math.round((n*e.scrollHeight/i-e.clientHeight)/2)}))}scrollToCenter(e,t=!0,n=!0){const r=void 0!==e?e:document.querySelector(".editor-view");(0,a.Y3)((()=>{r&&(t&&(r.scrollTop=(r.scrollHeight-r.clientHeight)/2),n&&(r.scrollLeft=(r.scrollWidth-r.clientWidth)/2))}))}generateAssetId(){const e=new Date,t=this.formatStr((e.getFullYear()-2e3).toString(),2),n=this.formatStr((e.getMonth()+1).toString(),2),r=this.formatStr(e.getDate().toString(),2),i=this.formatStr(e.getHours().toString(),2),o=this.formatStr(e.getMinutes().toString(),2),s=this.formatStr(e.getSeconds().toString(),2),a=this.formatStr(e.getMilliseconds().toString(),3);return t+n+r+i+o+s+a+this.generateRandomString(8)}generateTimeStamp(){const e=new Date,t=this.formatStr(e.getFullYear().toString(),4),n=this.formatStr((e.getMonth()+1).toString(),2),r=this.formatStr(e.getDate().toString(),2),i=this.formatStr(e.getHours().toString(),2),o=this.formatStr(e.getMinutes().toString(),2),s=this.formatStr(e.getSeconds().toString(),2);return`${t}-${n}-${r}-${i}-${o}-${s}`}generateRandomString(e){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length;for(let i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t}generateRandomTime(e,t){return e.getTime()+Math.random()*(t.getTime()-e.getTime())}asyncForEach(e,t){return f(this,null,(function*(){for(let n=0;n<e.length;n++)yield t(e[n],n,e)}))}formatStr(e,t){if(e.length===t)return e;{const n=t-e.length,r=new Array(n).fill(0).join("");return r+e}}isValidInt(e){return e.match(/^-?\d+$/)}isValidFloat(e){return e.match(/[+-]?\d+(\.\d+)?/)}boundValue(e,t,n){return Math.max(Math.min(e,n),t)}copyText(e){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);const t=document.createElement("textarea");return t.value=e,t.style.display="none",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),t.remove(),Promise.resolve()}arrayCompare(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}createGroups(e,t){const n=e.length;if(n<t)return[e.slice(0)];const r=Math.ceil(e.length/t);return new Array(r).fill("").map(((n,r)=>e.slice(r*t,(r+1)*t)))}fixSize(e){return e*(100/this.scaleRatio)}scaledSize(e){return e*(this.scaleRatio/100)}test(){const e=[],t=c.Z.getPages;t.forEach(((t,n)=>{t.modified&&e.push(n)})),console.log(t),l.Z.setModalInfo("測試",[`修改過的 templates: ${e.join(" ")}`,`數量: ${e.length}`])}downloadImage(e,t="image.png"){const n=document.createElement("a");n.href=e,n.download=t,n.click()}isTouchDevice(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())}isTablet(){return/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(navigator.userAgent.toLowerCase())}getListRowItemSize(){return this.isTouchDevice()?window.innerWidth>=600?(window.innerWidth-50)/3:(window.innerWidth-40)/2:145}getEventType(e){switch(e.type){case"touchstart":case"touchmove":case"touchend":return"touch";case"mousedown":case"mousemove":case"mouseup":return"mouse"}}assertUnreachable(e){throw new Error("Didn't expect to get here")}getScrollbarSize(e){return{width:e.scrollWidth-e.clientWidth,height:e.scrollHeight-e.clientHeight}}dataURLtoBlob(e){const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]);let i=r.length;const o=new Uint8Array(i);while(i--)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})}toDataURL(e,t){const n=new Image;n.crossOrigin="Anonymous",n.onload=()=>{const e=document.createElement("canvas"),r=e.getContext("2d");e.height=n.naturalHeight,e.width=n.naturalWidth,null==r||r.drawImage(n,0,0);const i=e.toDataURL("image/png");t(i)},n.src=e}fbq(e,t,n){n?window.fbq(e,t,n):window.fbq(e,t)}getFileImageTypeByByte(e){return f(this,null,(function*(){return new Promise((t=>{const n=new FileReader;n.onloadend=function(e){let n="";const r=new Uint8Array(e.target.result).subarray(0,4);let i="";for(let t=0;t<r.length;t+=1)i+=r[t].toString(16);switch(i){case"89504e47":n="png";break;case"47494638":n="gif";break;case"3c3f786d":case"3c737667":n="svg";break;case"ffd8ffdb":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":n="jpeg";break;default:n="unknown";break}t(n)},n.readAsArrayBuffer(e)}))}))}panelInit(e,t,n,i){return f(this,null,(function*(){const o=new URLSearchParams(window.location.search),a=o.get("panel"),l=o.get("category"),c=o.get("category_locale"),d=o.get("search");a!==e?i({reset:!0}):l&&c?(yield n(l,c),i({reset:!1})):d?(yield t(d),i({reset:!1})):i({reset:!0});const u=s().omit(r.Z.currentRoute.value.query,["panel","category","category_locale","search"]);r.Z.replace({query:u})}))}downloadTextFile(e,t){const n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}capitalize(e){return 0===e.length?e:e[0].toUpperCase()+e.substring(1).toLowerCase()}capitalizeFirstWord(e){const t=e.split(" ").map((e=>e.toLowerCase())),n=t[0];return t[0]=n[0].toUpperCase()+n.substring(1),t.join(" ")}getWidth(){return Math.max(document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}getHeight(){return Math.max(document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}isWatcherTriggerByUndoRedo(e,t){return e!==t&&s().isEqual(e,t)}unproxify(e){return Array.isArray(e)?e.map((e=>this.unproxify(e))):"object"===typeof e?Object.fromEntries(Object.entries(m({},e)).map((([e,t])=>[e,this.unproxify(t)]))):e}versionCheck(e){var t,n,r,o;const{lessThan:s,greaterThan:a}=e;let{version:l}=e;l||(l=i.Z.getters["user/getBrowserInfo"].version);const c=l.split(".");if(s){const e=s.split(".");for(let r=0;r<Math.max(c.length,e.length);r++){const i=null!=(t=e[r])?t:"0",o=null!=(n=c[r])?n:"0";if(+i>+o)break;if(+i<+o)return!1}}if(a){const e=a.split(".");for(let t=0;t<Math.max(c.length,e.length);t++){const n=null!=(r=e[t])?r:"0",i=null!=(o=c[t])?o:"0";if(+n<+i)break;if(+n>+i)return!1}}return!0}resetFlags(){this.flags=[]}initializeFlags(e,t,n){t=null!=t?t:i.Z.getters.getPages;const r=t.length,o=this.getlayerIndexes(t,e);this.resetFlags();for(let i=0;i<r;i++){const e={};for(let t=0;t<o[i].length;t++)e[o[i][t]]=!1;this.flags.push(e)}this.flagsCallback=n,this.flags.every((e=>0===Object.keys(e).length))&&(this.flagsCallback&&this.flagsCallback(),this.resetFlags())}setDoneFlag(e,t,n){const r=`${t},${null!=n?n:-1}`;this.flags[e]&&void 0!==this.flags[e][r]&&(this.flags[e][r]=!0,this.flags.every((e=>Object.values(e).every((e=>e))))&&(this.flagsCallback&&this.flagsCallback(),this.resetFlags()))}getlayerIndexes(e,t){const n=[];for(const r of e){const e=[];for(const[n,i]of r.layers.entries())if(i.type===t&&e.push(`${n},-1`),"group"===i.type)for(const[r,o]of i.layers.entries())o.type===t&&e.push(`${n},${r}`);n.push(e)}return n}getSliderWidth(){let e;const t=document.querySelector(".function-panel__content");if(t){const n=window.getComputedStyle(t,null);e=parseInt(n.getPropertyValue("width").replace("px",""))}return e}sleep(e){return f(this,null,(function*(){yield new Promise((t=>setTimeout(t,e)))}))}}const v=new b;t["Z"]=v},70118:function(e,t,n){"use strict";n.d(t,{O:function(){return w}});var r=n(89497),i=n(6400),o=n(78871),s=n(13637),a=n(75231),l=n(65144),c=n(35426),d=n(56556),u=n(60410),g=n.n(u),p=n(95918),h=n(93261),m=n(3162),y=n(32905),f=n(15820),b=n(52632),v=n(89456);function w(e,t=1){let n=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;return e=JSON.parse(JSON.stringify(e)),e.forEach((e=>{if(0===e.styles.rotate)n=Math.min(n,e.styles.x),r=Math.min(r,e.styles.y);else{const t=c.ZP.getBounding(e.styles);n=Math.min(n,t.x),r=Math.min(r,t.y)}})),e.forEach((e=>{if(0===e.styles.rotate)i=Math.max(i,e.styles.x+e.styles.width-n),o=Math.max(o,e.styles.y+e.styles.height-r);else{const t=c.ZP.getBounding(e.styles);i=Math.max(i,t.x+t.width-n),o=Math.max(o,t.y+t.height-r)}})),{x:n,y:r,width:i*t,height:o*t,initWidth:i*t,initHeight:o*t}}class N{get pageIndex(){return r.Z.getters.getCurrSelectedPageIndex}get layerIndex(){return r.Z.getters.getCurrSelectedIndex}get currSelectedInfo(){return r.Z.getters.getCurrSelectedInfo}get getLayer(){return r.Z.getters.getLayer}get getCurrLayer(){return r.Z.getters.getLayer(this.pageIndex,this.layerIndex)}get getPage(){return r.Z.getters.getPage}get currSubSelectedInfo(){return r.Z.getters.getCurrSubSelectedInfo}get tmpLayer(){return r.Z.getters.getLayer(r.Z.getters.getCurrSelectedPageIndex,r.Z.getters.getCurrSelectedIndex)}get inMultiSelecitonMode(){return r.Z.getters["mobileEditor/getInMultiSelectionMode"]}calcType(e){const t=new Set;return 0===e.length?t:1===e.length?(t.add(e[0].type),t):(e.forEach((e=>{t.has(e.type)||t.add(e.type)})),t)}group(){const e=o.Z.deepCopy(r.Z.getters.getCurrSelectedInfo);if(e.layers.length<2)return void console.log("You need to select at least 2 layers!");this.currSelectedInfo.types.has("group")&&this.ungroupInnerGroup();const t=e.pageIndex,n=e.index;a.ZP.updateLayerProps(t,n,{type:"group",active:!1,shown:!1}),this.reset(),this.select(t,[n]),d.Z.reassignZindex(t);const i=a.ZP.getLayer(t,n);i.layers.forEach(((e,r)=>{if("text"===e.type){const{width:i,height:o,writingMode:s}=e.styles;a.ZP.updateSubLayerProps(t,n,r,{widthLimit:s.includes("vertical")?o:i,isTyping:!1,shown:!1,moved:!1})}})),b.Z.record()}ungroup(){const{pageIndex:e,index:t}=this.currSelectedInfo,n=r.Z.getters.getLayer(e,t);if("group"===n.type){n.layers.forEach(((e,t)=>{e.styles.zindex=n.styles.zindex+t,e.active=!1})),a.ZP.updateLayerProps(e,t,{type:"tmp",active:!0}),a.ZP.updateLayerStyles(e,t,{zindex:0});const r=this.currSelectedInfo.pageIndex,i=this.currSelectedInfo.index;this.reset(),this.set(r,i,n.layers),b.Z.record()}}ungroupInnerGroup(){while(this.currSelectedInfo.types.has("group")){const e=this.currSelectedInfo.layers.findIndex((e=>"group"===e.type)),t=o.Z.deepCopy(this.currSelectedInfo.layers);t.splice(e,1,...this.mapGroupLayersToTmp(this.currSelectedInfo.layers[e])),a.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{layers:t}),this.set(this.currSelectedInfo.pageIndex,this.currSelectedInfo.index,t)}}select(e,t){if(this.currSelectedInfo.index<0)if(1===t.length){a.ZP.updateLayerProps(e,t[0],{active:!0});const n=[...l.Z.mappingLayers(e,t)];this.set(e,t[0],n)}else{const n=l.Z.mappingLayers(e,t).filter((e=>!(null==e?void 0:e.locked))),i=w(n),o=this.mapLayersToTmp(n,i),c=Math.max(...t),d=n.length,u=c-d+1,g=r.Z.getters.getLayers(e).filter(((e,n)=>!t.includes(n))),p=s.Z.newTmp(i,o);r.Z.commit("SET_layers",{pageIndex:e,newLayers:g}),a.ZP.addLayersToPos(e,[p],u),this.set(e,u,o)}else if(1===r.Z.getters.getCurrSelectedLayers.length){const n=[this.currSelectedInfo.index,...t];this.deselect();const i=l.Z.mappingLayers(e,n),o=w(i),c=this.mapLayersToTmp(i,o),d=Math.max(...n),u=i.length,g=d-u+1,p=r.Z.getters.getLayers(e).filter(((e,t)=>!n.includes(t))),h=s.Z.newTmp(o,c);r.Z.commit("SET_layers",{pageIndex:e,newLayers:p}),a.ZP.addLayersToPos(e,[h],g),this.set(e,g,c)}else{const n=l.Z.mappingLayers(e,t),i=this.tmpLayer,o=w([...this.mapLayersToPage(r.Z.getters.getCurrSelectedLayers,this.tmpLayer),...n]),c=this.mapLayersToTmp([...this.mapLayersToPage(r.Z.getters.getCurrSelectedLayers,i),...n],o),d=Math.max(this.currSelectedInfo.index,...t),u=1+t.length,g=[this.currSelectedInfo.index,...t],p=d-u+1,h=r.Z.getters.getLayers(e).filter(((e,t)=>!g.includes(t))),m=s.Z.newTmp(o,c);r.Z.commit("SET_layers",{pageIndex:e,newLayers:h}),a.ZP.addLayersToPos(e,[m],p),this.set(e,p,c)}p.Z.inBgSettingMode&&h.Z.setInBgSettingMode(!1),r.Z.commit("SET_currActivePageIndex",e)}selectAll(){this.deselect();const e=[...Array(r.Z.getters.getLayersNum(y.Z.currFocusPageIndex)).keys()].filter((e=>!y.Z.currFocusPage.layers[e].locked));0!==e.length&&this.select(y.Z.currFocusPageIndex,e)}deselect(){const e=this.currSelectedInfo.pageIndex;if(-1!==this.currSelectedInfo.index){const t=r.Z.getters.getCurrSelectedLayers;if(1===t.length){const{pageIndex:e,index:n}=this.currSelectedInfo;"text"===t[0].type&&v.Z.isEmptyText(t[0])?(r.Z.commit("DELETE_selectedLayer"),r.Z.commit("SET_lastSelectedLayerIndex",-1)):(a.ZP.updateLayerProps(e,n,{active:!1}),m.Z.setImgControlDefault())}else{const e=this.tmpLayer;e.layers.forEach(((t,n)=>{t.type===i.F5.image&&a.ZP.updateLayerStyles(this.pageIndex,a.ZP.layerIndex,{scale:t.styles.scale*e.styles.scale},n),a.ZP.updateLayerProps(this.pageIndex,a.ZP.layerIndex,{parentLayerStyles:void 0},n)})),r.Z.commit("DELETE_selectedLayer"),r.Z.commit("SET_lastSelectedLayerIndex",-1),a.ZP.addLayersToPos(this.currSelectedInfo.pageIndex,[...this.mapLayersToPage(r.Z.getters.getCurrSelectedLayers,e)],r.Z.getters.getCurrSelectedIndex),a.ZP.updateLayersOrder(this.currSelectedInfo.pageIndex)}this.reset(),d.Z.reassignZindex(e)}}deselectTargetLayer(e){const{index:t,pageIndex:n,layers:r}=this.currSelectedInfo,i=a.ZP.getSelectedLayer(),s=this.mapLayersToPage([o.Z.deepCopy(this.currSelectedInfo.layers[e])],i);s[0].styles.zindex;if(a.ZP.deleteSubLayer(n,t,e),1===r.length){const e=this.mapLayersToPage(r,i)[0];e.active=!0,a.ZP.replaceLayer(n,t,e),a.ZP.addLayersToPos(n,s,0),a.ZP.updateLayersOrder(n),this.set(n,e.styles.zindex-1,r)}else a.ZP.addLayersToPos(n,s,0),a.ZP.updateLayersOrder(n),this.set(n,0,r),this.reselect()}reselect(){const e=this.currSelectedInfo.layers.map(((e,t)=>e.styles.zindex-1)),t=this.currSelectedInfo.pageIndex;this.deselect(),this.select(t,[...e])}set(e,t,n){r.Z.commit("SET_currSelectedInfo",{pageIndex:e,index:t,layers:n,types:this.calcType(n),id:a.ZP.getLayer(e,t).id||""})}reset(){r.Z.commit("SET_currSelectedInfo",{pageIndex:-1,index:-1,layers:[],types:new Set,id:""}),r.Z.commit("SET_currSubSelectedInfo",{index:-1,type:""})}movingTmp(e,t){r.Z.commit("UPDATE_tmpLayerStyles",{pageIndex:e,styles:t})}mapLayersToTmp(e,t){return e=o.Z.deepCopy(e.sort(((e,t)=>e.styles.zindex-t.styles.zindex))),e.forEach((e=>{e.styles.x-=t.x,e.styles.y-=t.y})),e}mapLayersToPage(e,t){return e=JSON.parse(JSON.stringify(e)),e.forEach((e=>{var n,r,o,s,a,l,d,u,p,h,m,y,b,v;if("image"===e.type)e.styles.width=e.styles.width*t.styles.scale,e.styles.height=e.styles.height*t.styles.scale,e.styles.imgHeight*=t.styles.scale,e.styles.imgWidth*=t.styles.scale,e.styles.imgX*=t.styles.scale,e.styles.imgY*=t.styles.scale;else if("shape"===e.type)if("D"===e.category){const[i]=null!=(n=e.size)?n:[1],o=null!=(r=e.point)?r:[],s=g().round(i*t.styles.scale,2);e.size=[s];const{width:a,height:l}=f.Z.lineDimension(o),[c,d]=[a*t.styles.scale,l*t.styles.scale],{point:u,realWidth:p,realHeight:h}=f.Z.computePointForDimensions(f.Z.getLineQuadrant(o),s,c,d);e.point=u,e.styles.width=p,e.styles.height=h,e.styles.initWidth=p,e.styles.initHeight=h,e.styles.scale=1;const m=t.styles.scale,[y,b]=[e.styles.x,e.styles.y],[v,w]=[y*m,b*m];e.styles.x=v,e.styles.y=w}else if("E"===e.category){e.styles.width=e.styles.width*t.styles.scale,e.styles.height=e.styles.height*t.styles.scale,e.styles.initWidth=e.styles.width,e.styles.initHeight=e.styles.height,e.vSize=[e.styles.width,e.styles.height];const[n,r]=null!=(o=e.size)?o:[1,0];e.size=[g().round(n*t.styles.scale,2),r*t.styles.scale],e.styles.scale=1;const i=t.styles.scale,[s,a]=[e.styles.x,e.styles.y],[l,c]=[s*i,a*i];e.styles.x=l,e.styles.y=c}else e.styles.width=e.styles.width*t.styles.scale,e.styles.height=e.styles.height*t.styles.scale,e.styles.scale*=t.styles.scale;else{if(e.styles.width=e.styles.width*t.styles.scale,e.styles.height=e.styles.height*t.styles.scale,e.styles.scale*=t.styles.scale,e.type===i.F5.frame&&e.clips[0].isFrameImg){const n=e.clips[0];n.styles.width=e.styles.width,n.styles.height=e.styles.height,n.styles.imgWidth*=t.styles.scale,n.styles.imgHeight*=t.styles.scale,n.styles.imgX*=t.styles.scale,n.styles.imgY*=t.styles.scale}if("text"===e.type){const{widthLimit:n,styles:r}=e;e.widthLimit=-1===n?r.writingMode.includes("vertical")?r.height:r.width:e.widthLimit*t.styles.scale}}if(1!==e.styles.scale){const n=t.styles.scale,[r,i]=[e.styles.x,e.styles.y],[o,s]=[r*n,i*n];e.styles.x=o,e.styles.y=s}const w={x:e.styles.x+e.styles.width/2,y:e.styles.y+e.styles.height/2};e.styles.x+=t.styles.x,e.styles.y+=t.styles.y;const N=c.ZP.getRotatedPoint(t.styles.rotate,c.ZP.getCenter(t.styles),c.ZP.getCenter(e.styles));if(e.styles.x=N.x-e.styles.width/2,e.styles.y=N.y-e.styles.height/2,"shape"===e.type&&"D"===e.category){const{point:n,realWidth:r,realHeight:i,dx:o,dy:c}=f.Z.lineCenterRotate(null!=(s=e.point)?s:[],t.styles.rotate,null!=(l=null==(a=e.size)?void 0:a[0])?l:1);e.point=n,e.styles.width=r,e.styles.height=i,e.styles.initWidth=r,e.styles.initHeight=i,e.styles.x+=o,e.styles.y+=c}else e.styles.rotate=(e.styles.rotate+t.styles.rotate)%360;const S=t.styles.rotate/180*Math.PI;if(t.styles.horizontalFlip){const n=t.styles.width-2*w.x,[r,i]=[n*Math.cos(S),n*Math.sin(S)];if(e.styles.x+=r,e.styles.y+=i,"shape"===e.type&&"D"===e.category){const n=e,{angle:r}=f.Z.lineDimension(null!=(d=n.point)?d:[]),{point:i,realWidth:o,realHeight:s,dx:a,dy:l}=f.Z.lineCenterRotate(null!=(u=n.point)?u:[],180-r/Math.PI*180+2*t.styles.rotate,null!=(h=null==(p=n.size)?void 0:p[0])?h:1,!1);e.point=i,e.styles.width=o,e.styles.height=s,e.styles.initWidth=o,e.styles.initHeight=s,e.styles.x+=a,e.styles.y+=l}else e.styles.horizontalFlip=!e.styles.horizontalFlip,e.styles.rotate=360-e.styles.rotate+2*t.styles.rotate}if(t.styles.verticalFlip){const n=t.styles.height-2*w.y,[r,i]=[-n*Math.sin(S),n*Math.cos(S)];if(e.styles.x+=r,e.styles.y+=i,"shape"===e.type&&"D"===e.category){const n=e,{angle:r}=f.Z.lineDimension(null!=(m=n.point)?m:[]),{point:i,realWidth:o,realHeight:s,dx:a,dy:l}=f.Z.lineCenterRotate(null!=(y=n.point)?y:[],360-r/Math.PI*180+2*t.styles.rotate,null!=(v=null==(b=n.size)?void 0:b[0])?v:1,!1);e.point=i,e.styles.width=o,e.styles.height=s,e.styles.initWidth=o,e.styles.initHeight=s,e.styles.x+=a,e.styles.y+=l}else e.styles.verticalFlip=!e.styles.verticalFlip,e.styles.rotate=360-e.styles.rotate+2*t.styles.rotate}e.shown=!1,e.locked=t.locked,e.moved=t.moved,e.styles.opacity*=t.styles.opacity/100})),e}mapGroupLayersToTmp(e){const t=JSON.parse(JSON.stringify(e.layers));return t.forEach((t=>{var n,r,i,o,s,a,l,d,u,p,h,m,y,b;if("image"===t.type){const n=t.styles.width*e.styles.scale,r=t.styles.height*e.styles.scale;t.styles.width=n,t.styles.height=r,t.styles.imgHeight*=e.styles.scale,t.styles.imgWidth*=e.styles.scale,t.styles.imgX*=e.styles.scale,t.styles.imgY*=e.styles.scale,t.clipPath=`M0,0h${n}v${r}h${-n}z`;const i=e.styles.scale,[o,s]=[t.styles.x,t.styles.y],[a,l]=[o*i,s*i];t.styles.x=a,t.styles.y=l}else if("shape"===t.type)if("D"===t.category){const[i]=null!=(n=t.size)?n:[1],o=null!=(r=t.point)?r:[],s=g().round(i*e.styles.scale,2);t.size=[s];const{width:a,height:l}=f.Z.lineDimension(o),[c,d]=[a*e.styles.scale,l*e.styles.scale],{point:u,realWidth:p,realHeight:h}=f.Z.computePointForDimensions(f.Z.getLineQuadrant(o),s,c,d);t.point=u,t.styles.width=p,t.styles.height=h,t.styles.initWidth=p,t.styles.initHeight=h,t.styles.scale=1;const m=e.styles.scale,[y,b]=[t.styles.x,t.styles.y],[v,w]=[y*m,b*m];t.styles.x=v,t.styles.y=w}else if("E"===t.category){t.styles.width=t.styles.width*e.styles.scale,t.styles.height=t.styles.height*e.styles.scale,t.styles.initWidth=t.styles.width,t.styles.initHeight=t.styles.height,t.vSize=[t.styles.width,t.styles.height];const[n,r]=null!=(i=t.size)?i:[1,0];t.size=[g().round(n*e.styles.scale,2),r*e.styles.scale],t.styles.scale=1;const o=e.styles.scale,[s,a]=[t.styles.x,t.styles.y],[l,c]=[s*o,a*o];t.styles.x=l,t.styles.y=c}else t.styles.width=t.styles.width*e.styles.scale,t.styles.height=t.styles.height*e.styles.scale,t.styles.scale*=e.styles.scale;else t.styles.width=t.styles.width*e.styles.scale,t.styles.height=t.styles.height*e.styles.scale,t.styles.scale*=e.styles.scale;if(1!==t.styles.scale){const n=e.styles.scale,[r,i]=[t.styles.x,t.styles.y],[o,s]=[r*n,i*n];t.styles.x=o,t.styles.y=s}const v={x:t.styles.x+t.styles.width/2,y:t.styles.y+t.styles.height/2};t.styles.x+=e.styles.x,t.styles.y+=e.styles.y;const w=c.ZP.getRotatedPoint(e.styles.rotate,c.ZP.getCenter(e.styles),c.ZP.getCenter(t.styles));if(t.styles.x=w.x-t.styles.width/2,t.styles.y=w.y-t.styles.height/2,"shape"===t.type&&"D"===t.category){const{point:n,realWidth:r,realHeight:i,dx:l,dy:c}=f.Z.lineCenterRotate(null!=(o=t.point)?o:[],e.styles.rotate,null!=(a=null==(s=t.size)?void 0:s[0])?a:1);t.point=n,t.styles.width=r,t.styles.height=i,t.styles.initWidth=r,t.styles.initHeight=i,t.styles.x+=l,t.styles.y+=c}else t.styles.rotate=(t.styles.rotate+e.styles.rotate)%360;const N=e.styles.rotate/180*Math.PI;if(e.styles.horizontalFlip){const n=e.styles.width-2*v.x,[r,i]=[n*Math.cos(N),n*Math.sin(N)];if(t.styles.x+=r,t.styles.y+=i,"shape"===t.type&&"D"===t.category){const n=t,{angle:r}=f.Z.lineDimension(null!=(l=n.point)?l:[]),{point:i,realWidth:o,realHeight:s,dx:a,dy:c}=f.Z.lineCenterRotate(null!=(d=n.point)?d:[],180-r/Math.PI*180+2*e.styles.rotate,null!=(p=null==(u=n.size)?void 0:u[0])?p:1,!1);t.point=i,t.styles.width=o,t.styles.height=s,t.styles.initWidth=o,t.styles.initHeight=s,t.styles.x+=a,t.styles.y+=c}else t.styles.horizontalFlip=!t.styles.horizontalFlip,t.styles.rotate=360-t.styles.rotate+2*e.styles.rotate}if(e.styles.verticalFlip){const n=e.styles.height-2*v.y,[r,i]=[-n*Math.sin(N),n*Math.cos(N)];if(t.styles.x+=r,t.styles.y+=i,"shape"===t.type&&"D"===t.category){const n=t,{angle:r}=f.Z.lineDimension(null!=(h=n.point)?h:[]),{point:i,realWidth:o,realHeight:s,dx:a,dy:l}=f.Z.lineCenterRotate(null!=(m=n.point)?m:[],360-r/Math.PI*180+2*e.styles.rotate,null!=(b=null==(y=n.size)?void 0:y[0])?b:1,!1);t.point=i,t.styles.width=o,t.styles.height=s,t.styles.initWidth=o,t.styles.initHeight=s,t.styles.x+=a,t.styles.y+=l}else t.styles.verticalFlip=!t.styles.verticalFlip,t.styles.rotate=360-t.styles.rotate+2*e.styles.rotate}t.shown=!1,t.locked=e.locked,t.moved=e.moved,t.styles.opacity*=e.styles.opacity/100})),t}}const S=new N;t["Z"]=S},99504:function(e,t,n){"use strict";var r=n(89497);class i{get userId(){return r.Z.getters["user/getUserId"]}get teamId(){return r.Z.getters["user/getTeamId"]||this.userId}get groupId(){return r.Z.getters.getGroupId}get isAdmin(){return r.Z.getters["user/isAdmin"]}get isLogin(){return r.Z.getters["user/isLogin"]}track(e,t){}trackTemplateDownload(e){}trackPageDownload(e){}subscribe(e){}startTrial(e){}signUp(e){}}t["Z"]=new i},83122:function(e,t,n){"use strict";var r=n(23931),i=n(89497),o=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&c(e,n,t[n]);if(s)for(var n of s(t))l.call(t,n)&&c(e,n,t[n]);return e};class u{getFields(){return[{name:"brightness",label:`${r.Z.global.t("NN0055")}`,max:100,min:-100},{name:"contrast",label:`${r.Z.global.t("NN0056")}`,max:100,min:-100},{name:"saturate",label:`${r.Z.global.t("NN0057")}`,max:100,min:-100},{name:"hue",label:`${r.Z.global.t("NN0058")}`,max:100,min:-100},{name:"blur",label:`${r.Z.global.t("NN0059")}`,max:100,min:-100},{name:"halation",label:`${r.Z.global.t("NN0060")}`,max:100,min:0},{name:"warm",label:`${r.Z.global.t("NN0061")}`,max:100,min:-100}]}getDefaultProps(){return this.getFields().reduce(((e,t)=>(e[t.name]=0,e)),{})}createSvgFilter(e){const{tag:t,attrs:n={},child:r=[]}=e;return{tag:t,attrs:n,child:r}}getBrightness(e){const t=.005*e;return[this.createSvgFilter({tag:"feComponentTransfer",child:["feFuncR","feFuncG","feFuncB"].map((e=>this.createSvgFilter({tag:e,attrs:{type:"linear",slope:1,intercept:t}})))})]}getContrast(e){const t=e>0?1.5:.6,n=e>0?.75:.3,r=1+e*t/100,i=0-e*n/100;return[this.createSvgFilter({tag:"feComponentTransfer",child:["feFuncR","feFuncG","feFuncB"].map((e=>this.createSvgFilter({tag:e,attrs:{type:"linear",slope:r,intercept:i}})))})]}getSaturate(e){const t=(e+100)/100;return[this.createSvgFilter({tag:"feColorMatrix",attrs:{type:"saturate",values:t}})]}getHue(e){const t=e>0?.1*Math.max(e-66,0)/33:.1*Math.min(Math.abs(e/33),1),n=Math.abs(e)>33?.1*(1-Math.min(Math.abs(e/33)-1,1)):.1,r=e>0?.1*Math.min(e/33,1):.1*Math.max(Math.abs(e)-66,0)/33,i=[t,n,r];return[this.createSvgFilter({tag:"feComponentTransfer",child:["feFuncR","feFuncG","feFuncB"].map(((e,t)=>this.createSvgFilter({tag:e,attrs:{type:"linear",slope:.9,intercept:i[t]}})))})]}getBlur(e,t){if(e<0)return[this.createSvgFilter({tag:"feComponentTransfer",attrs:{result:"preblur"}}),this.createSvgFilter({tag:"feGaussianBlur",attrs:{stdDeviation:1.2}}),this.createSvgFilter({tag:"feComposite",attrs:{operator:"arithmetic",k1:0,k4:0,in2:"preblur",k2:.06*e,k3:Math.abs(.06*e)+1}})];const n=[this.createSvgFilter({tag:"feGaussianBlur",attrs:{stdDeviation:.275*e}})];return t&&!1===t.styles.shadow.isTransparent&&n.push(this.createSvgFilter({tag:"feComponentTransfer",child:[this.createSvgFilter({tag:"feFuncA",attrs:{type:"linear",slope:0,intercept:1}})]})),n}getWarm(e){const t=["1 0 0 0 "+e/1e3,"0 1 0 0 0","0 0 1 0 "+e/-1e3,"0 0 0 1 0"];return[this.createSvgFilter({tag:"feColorMatrix",attrs:{type:"matrix",values:t.join(" ")}})]}getHalation(e,t){const{width:n,x:r,y:o}=t,s=.7*e/100,a=d({background:`radial-gradient(${n}px at ${r}px ${o}px, rgba(0, 0, 0, 0) 70%, rgba(0, 0, 0, ${s}) 130%)`,position:"absolute",top:0,left:0,right:0,bottom:0},"backendRendering"===i.Z.getters["user/getUserId"]&&{"-webkit-filter":"opacity(1)"});return[{tag:"div",attrs:{style:a}}]}getSvgFilter(e,t,n){if(0===t)return[];switch(e){case"brightness":return this.getBrightness(t);case"contrast":return this.getContrast(t);case"saturate":return this.getSaturate(t);case"hue":return this.getHue(t);case"blur":return this.getBlur(t,n);case"warm":return this.getWarm(t);default:return[]}}convertAdjustToSvgFilter(e,t){return Object.entries(e).flatMap((([e,n])=>this.getSvgFilter(e,n,t)))}setAdjust(e){const{adjust:t,pageIndex:n,layerIndex:r,subLayerIndex:o}=e;i.Z.commit("UPDATE_specLayerData",{pageIndex:n,layerIndex:r,subLayerIndex:o,styles:{adjust:t},type:["image"]})}}t["Z"]=new u},30544:function(e,t,n){"use strict";var r=n(865),i=n(89497),o=n(6400),s=n(89995),a=n(78871),l=n(67579),c=n(3162),d=n(75231),u=n(53074),g=n(32905),p=n(52632),h=n(44306),m=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));t["Z"]=new class{get fieldRange(){return l.yG}get currentStyle(){const{styles:e}=d.ZP.getCurrConfig;return e||{}}get currentEffect(){const{shadow:e}=this.currentStyle;return e&&e.currentEffect||r.w.none}mount(){s.ZP.on(o.gQ.photoShadow,(e=>this.handleColorUpdate(e))),i.Z.commit("SET_currFunctionPanelType",o.UJ.photoShadow);const e=d.ZP.getCurrConfig;e&&e.type===o.F5.image?"undefined"!==typeof d.ZP.subLayerIdx&&-1!==d.ZP.subLayerIdx?l.ZP.setHandleId({pageId:g.Z.currFocusPage.id,layerId:d.ZP.getCurrLayer.id||"",subLayerId:e.id||""}):l.ZP.setHandleId({pageId:g.Z.currFocusPage.id,layerId:e.id||"",subLayerId:""}):console.error("The layer should be image layer")}checkIfSameEffect(e){if(e.type!==o.F5.image)return!1;const t=e.styles.shadow;if(t.srcState){const n=t.currentEffect;if(n===r.w.none)return!1;const i=Object.entries(t.effects[n]).every((([e,r])=>t.srcState.effects[n][e]===r)),o=!t.isTransparent&&t.currentEffect!==r.w.imageMatched||t.srcState.layerState&&Object.entries(t.srcState.layerState).every((([t,n])=>e.styles[t]===n)),s=t.currentEffect===r.w.frame?t.effects.frameColor===t.srcState.effects.frameColor:t.effects.color===t.srcState.effects.color,a=t.currentEffect!==r.w.imageMatched||t.srcState.layerSrcObj.type===e.srcObj.type&&t.srcState.layerSrcObj.userId===e.srcObj.userId&&t.srcState.layerSrcObj.assetId===e.srcObj.assetId;return t.currentEffect===t.srcState.effect&&i&&o&&s&&a}return!1}handleShadowUpload(e,t=!1){return m(this,null,(function*(){try{this._handleShadowUpload(e,t)}catch(n){l.ZP.clearLayerData(),l.ZP.setUploadId({pageId:"",layerId:"",subLayerId:""}),l.ZP.setHandleId({pageId:"",layerId:"",subLayerId:""}),l.ZP.setUploadProcess(!1)}}))}_handleShadowUpload(e,t=!1){return m(this,null,(function*(){var n;s.ZP.event.off(o.gQ.photoShadow,(e=>this.handleColorUpdate(e)));let g=(()=>{const e=i.Z.state.shadow.handleId;if(e){const{pageId:t,layerId:n,subLayerId:r}=e,i=r&&n!==r;if(i){const{pageIndex:i,layerIndex:o,subLayerIdx:s}=d.ZP.getLayerInfoById(t,n,r),a=d.ZP.getLayer(i,o).layers[s];return{pageId:t,primarylayerId:e.layerId,config:a}}{const{pageIndex:e,layerIndex:r}=d.ZP.getLayerInfoById(t,n),i=d.ZP.getLayer(e,r);return t?{pageId:t,parimarylayerId:"",config:i}:void 0}}})();if(g=null!=(n=null!=g?g:e)?n:l.ZP.layerData,u.Z.setLog("phase: start upload shadow"),(0,l.YG)("upload",0),g){l.ZP.clearHandler();const{config:e,primarylayerId:n,pageId:s}=g,y=a.Z.deepCopy(e),f=n||y.id||"",b=n?y.id:"",v=y.styles.shadow,{pageIndex:w,layerIndex:N,subLayerIdx:S}=d.ZP.getLayerInfoById(s,f,b),x=y.styles.shadow.srcState&&y.styles.shadow.srcState.layerSrcObj.assetId===y.srcObj.assetId;if(!t&&x&&this.checkIfSameEffect(y)){const{shadowSrcObj:e}=y.styles.shadow.srcState,t={pageIndex:w,layerIndex:N,subLayerIdx:S};return l.ZP.clearLayerData(),l.ZP.updateShadowSrc(t,e),l.ZP.setUploadProcess(!1),l.ZP.setUploadId({pageId:"",layerId:"",subLayerId:""}),l.ZP.setHandleId({pageId:"",layerId:"",subLayerId:""}),void l.ZP.setProcessId({pageId:"",layerId:"",subLayerId:""})}if(v.currentEffect===r.w.none)return l.ZP.clearLayerData(),l.ZP.setUploadId({pageId:"",layerId:"",subLayerId:""}),l.ZP.setHandleId({pageId:"",layerId:"",subLayerId:""}),l.ZP.setProcessId({pageId:"",layerId:"",subLayerId:""}),void l.ZP.setUploadProcess(!1);n?this.setIsUploading(s,n,y.id,!0):this.setIsUploading(s,y.id,"",!0);const P=a.Z.generateRandomString(6);this.setUploadingData({pageId:s,layerId:f,subLayerId:b},P),p.Z.record();const I=a.Z.generateAssetId();i.Z.commit("file/SET_UPLOADING_IMGS",{id:I,adding:!0,pageIndex:w}),l.ZP.setUploadProcess(!0),l.ZP.setHandleId({pageId:s,layerId:f,subLayerId:b}),l.ZP.setUploadId({pageId:s,layerId:n||y.id||"",subLayerId:n&&y.id||""});const _=document.createElement("canvas");let k={},Z=0,C=0;const z=v.currentEffect===r.w.floating||!v.isTransparent&&[r.w.shadow,r.w.frame,r.w.blur].includes(v.currentEffect);(0,l.YG)("upload",1);const T=new Image;if(T.crossOrigin="anonynous",T.src=c.Z.getSrc(y,["unsplash","pexles"].includes(y.srcObj.type)?1600:"larg")+`${T.src.includes("?")?"&":"?"}ver=${a.Z.generateRandomString(6)}`,yield new Promise(((e,t)=>{T.onload=()=>m(this,null,(function*(){const t=yield this.isSVG(T.src,y);t?yield this.svgImageSizeFormatter(T,l.M6,(()=>{T.onload=()=>{e()},T.onerror=()=>{const e="error: isSVG img loading error, src: "+T.src;u.Z.setLog(e),console.log(e)}})):e()})),T.onerror=e=>{const n="error: img is svg check error, can not load img. img.src: "+T.src+"error:"+e.toString();u.Z.setLog(n),console.log(n,e),t(e)}})),u.Z.setLog("phase: finish load max size img"),(0,l.YG)("upload",2),z){const{width:e,height:t,imgWidth:n,imgHeight:i}=y.styles,o=v.currentEffect===r.w.floating?n/i:e/t;C=Math.round(o>1?1600:1600*o),Z=Math.round(o>1?1600/o:1600);const s=C+l.j_,a=Z+l.j_;_.setAttribute("width",`${s}`),_.setAttribute("height",`${a}`)}else{const{width:e,height:t,imgWidth:n,imgHeight:r}=y.styles;C=Math.round(e/n*T.naturalWidth),Z=Math.round(t/r*T.naturalHeight);const i=Math.round(T.naturalWidth+l.j_),o=Math.round(T.naturalHeight+l.j_);_.setAttribute("width",`${i}`),_.setAttribute("height",`${o}`)}switch(k={timeout:0,drawCanvasW:C,drawCanvasH:Z},l.ZP.drawingInit(_,T,y,k),y.styles.shadow.currentEffect){case r.w.shadow:case r.w.blur:case r.w.frame:yield l.ZP.drawShadow([_],T,y,k);break;case r.w.imageMatched:yield l.ZP.drawImageMatchedShadow([_],T,y,k);break;case r.w.floating:yield l.ZP.drawFloatingShadow([_],T,y,k);break;case r.w.none:return;default:u.Z.setLog("Error: effect type error: "+y.styles.shadow.currentEffect),a.Z.assertUnreachable(y.styles.shadow.currentEffect)}u.Z.setLog("phase: finish drawing"),(0,l.YG)("upload",3);const{right:L,left:E,top:D,bottom:O}=l.ZP.getImgEdgeWidth(_),M=(.5*(_.width-C)-E)/C,A=(.5*(_.height-Z)-D)/Z;u.Z.setLog("phase: finish calculate edge"),(0,l.YG)("upload",4);const $=document.createElement("canvas");$.setAttribute("width",(_.width-E-L).toString()),$.setAttribute("height",(_.height-D-O).toString());const F=$.getContext("2d");F.drawImage(_,E,D,$.width,$.height,0,0,$.width,$.height),u.Z.setLog("phase: start uploading result");const j=[$.toDataURL("image/png;base64",1)];(0,l.YG)("upload",5),h.Z.uploadAsset("image",j,{addToPage:!1,needCompressed:!1,id:I,isShadow:!0,pollingCallback:t=>{u.Z.setLog("phase: finish uploading"),(0,l.YG)("upload",6);const n=i.Z.getters["user/isAdmin"],a={type:n?"public":"shadow-private",userId:t.data.team_id||"",assetId:n&&t.data.id||t.data.asset_index},g=y.styles.width/y.styles.scale,p=y.styles.height/y.styles.scale,h=Math.ceil((_.width-L-E)/C*g),w=Math.ceil((_.height-D-O)/Z*p);let N=.5*h-g*(M+.5),S=.5*w-p*(A+.5);[r.w.frame,r.w.blur].includes(v.currentEffect)&&!v.isTransparent&&(N=0,S=0),new Promise((e=>{n?e():i.Z.dispatch("shadow/ADD_SHADOW_IMG",[a.assetId],{root:!0}).then((()=>e()))})).then((()=>m(this,null,(function*(){return yield c.Z.imgLoadHandler(c.Z.getSrc(a,c.Z.getSrcSize(a,Math.max(h,w))),(()=>{try{if(e.styles.shadow.currentEffect===y.styles.shadow.currentEffect){const{pageIndex:e,layerIndex:t,subLayerIdx:n}=d.ZP.getLayerInfoById(s,f,b);d.ZP.updateLayerProps(e,t,{isUploading:!1,inProcess:o.Q8.none},n);const r={imgWidth:h,imgHeight:w,imgX:N,imgY:S};l.ZP.addUploadImg({id:P,owner:{pageId:s,layerId:f,subLayerId:b},srcObj:a,styles:r});const i=y.styles.shadow;l.ZP.updateShadowSrc({pageIndex:e,layerIndex:t,subLayerIdx:n},a),l.ZP.updateShadowStyles({pageIndex:e,layerIndex:t,subLayerIdx:n},r),l.ZP.setShadowSrcState({pageIndex:e,layerIndex:t,subLayerIdx:n},{effect:i.currentEffect,effects:i.effects,shadowSrcObj:a,layerSrcObj:y.srcObj,layerState:{imgWidth:y.styles.imgWidth,imgHeight:y.styles.imgHeight,imgX:y.styles.imgX,imgY:y.styles.imgY}}),u.Z.setLog(`phase: finish whole process, srcObj: { userId: ${a.userId}, assetId: ${a.assetId}}\n                  src: ${c.Z.getSrc(a,c.Z.getSrcSize(a,Math.max(h,w)))}\n                  pageIndex: ${e}, layerIndex: ${t}, subLayerIndex: ${n}\n                  pageId: ${s}, layerId: ${f}, subLayerId: ${b}`),(0,l.YG)("upload",7),(0,l.iZ)("upload")}}catch(t){console.error("exception fallback: save to main page as uploading img"),u.Z.setLog("errorexception fallback: save to main page as uploading img")}}),{error:()=>{console.error("can not load the uploaded image shadow"),u.Z.setLog("errorcan not load the uploaded image shadow");const{pageIndex:e,layerIndex:t,subLayerIdx:n}=d.ZP.getLayerInfoById(s,f,b);l.ZP.updateShadowSrc({pageIndex:e,layerIndex:t,subLayerIdx:n},{type:"",assetId:"",userId:""}),l.ZP.updateEffectState({pageIndex:e,layerIndex:t,subLayerIdx:n},r.w.none)}})})))).catch((e=>{console.error(e),u.Z.setLog("error"+e.message)})).finally((()=>{l.ZP.clearLayerData(),l.ZP.setUploadId({pageId:"",layerId:"",subLayerId:""}),l.ZP.setHandleId({pageId:"",layerId:"",subLayerId:""}),l.ZP.setProcessId({pageId:"",layerId:"",subLayerId:""}),l.ZP.setUploadProcess(!1)}))}})}else u.Z.setLog("layerData is undefined"),console.log("layerData is undefined"),l.ZP.clearLayerData(),l.ZP.setHandleId({pageId:"",layerId:"",subLayerId:""}),l.ZP.setUploadId({pageId:"",layerId:"",subLayerId:""}),l.ZP.setProcessId({pageId:"",layerId:"",subLayerId:""})}))}isSVG(e,t){return m(this,null,(function*(){if(e.includes("https")&&["public","public-logo","private","private-logo","background"].includes(t.srcObj.type)){e.includes("?")?e+=`&isSvgRand=${a.Z.generateRandomString(6)}`:e+=`?isSvgRand=${a.Z.generateRandomString(6)}`;const t=yield new Promise((t=>t(fetch(e,{method:"HEAD"}))));return"image/svg+xml"===(yield t.headers.get("Content-Type"))}return!1}))}svgImageSizeFormatter(e){return m(this,arguments,(function*(e,t=l.M6,n){return new Promise((r=>{fetch(e.src).then((i=>m(this,null,(function*(){const o=yield i.text(),s=document.createElement("div");s.innerHTML=o;const a=s.getElementsByTagName("svg")[0];if(a){const r=t/Math.max(e.naturalWidth,e.naturalHeight);a.setAttribute("width",(e.naturalWidth*r).toString()+"px"),a.setAttribute("height",(e.naturalHeight*r).toString()+"px");const i=new Blob([s.innerHTML],{type:"image/svg+xml;charset=utf-8"}),o=window.URL||window.webkitURL||window,l=o.createObjectURL(i);e.src=l,n&&n()}r()}))))}))}))}handleEffectUpdate(e,t){const{currentEffect:n,fieldRange:i}=this,{max:o,min:s}=i[this.currentEffect][e];if(n!==r.w.none){const r=a.Z.deepCopy(d.ZP.getCurrConfig.styles.shadow.effects[n]);l.ZP.setEffect(n,{[n]:Object.assign(r,{[e]:+t>o?o:+t<s?s:+t})})}}handleColorUpdate(e,t=this.currentEffect){t===r.w.frame?l.ZP.setEffect(t,{frameColor:e}):l.ZP.setEffect(t,{color:e})}reset(e=r.w.none,t){let{pageIndex:n,layerIndex:i,subLayerIdx:o}=d.ZP;if(t&&({pageIndex:n,layerIndex:i,subLayerIdx:o=-1}=t),e===r.w.none&&(-1===o?e=-1!==n&&-1!==i?d.ZP.getLayer(n,i).styles.shadow.currentEffect:this.currentEffect:-1!==n&&-1!==i&&(e=d.ZP.getLayer(n,i).layers[o].styles.shadow.currentEffect)),e!==r.w.none){const t=l.ZP.getDefaultEffect(e)[e];l.ZP.setEffect(e,{[e]:t,color:"#000000"},{pageIndex:n,layerIndex:i,subLayerIdx:o})}}setIsUploading(e,t,n,r){const{pageIndex:i,layerIndex:o,subLayerIdx:s}=d.ZP.getLayerInfoById(e,t,n);d.ZP.updateLayerProps(i,o,{isUploading:r},s)}setUploadingData(e,t){const{pageId:n,layerId:r,subLayerId:i}=e,{pageIndex:o,layerIndex:s,subLayerIdx:a}=d.ZP.getLayerInfoById(n,r,i||"");l.ZP.updateShadowSrc({pageIndex:o,layerIndex:s,subLayerIdx:a},{type:"upload",assetId:t,userId:""})}}},67579:function(e,t,n){"use strict";n.d(t,{M6:function(){return A},hI:function(){return M},j_:function(){return $},ZP:function(){return q},yG:function(){return G},iZ:function(){return U},YG:function(){return H},Dm:function(){return V}});var r=n(865),i=n(89497),o=n(6400);const s=function(e,t,n=1){const{mapX:r,mapY:i}=c(e,t),{data:o,width:s,height:a}=e,l=1,d=1/l;return e=>{e*=n;for(let t=0;t<a;t++){const n=t*s;for(let t=0;t<s;t++){const s=n+t,a=4*s,c=Math.sqrt(r[s]*r[s]+i[s]*i[s]);o[a]=0,o[a+1]=0,o[a+2]=0,o[a+3]=c>e+l?0:c>=e?255*(1-(c-e)*d):255}}return o}},a=function(e,t,n=1){const r=l(e,t),{data:i,width:o,height:s}=e;return e=>{e*=n;for(let t=0;t<s;t++){const n=t*o;for(let t=0;t<o;t++){const o=n+t,s=4*o;i[s]=0,i[s+1]=0,i[s+2]=0,r[o]>=e?i[s+3]=0:i[s+3]=255}}return i}},l=function(e,t){const n=128,r=[],{data:i,width:o,height:s}=e;for(let a=0;a<s;a++){const e=a*o;for(let t=0;t<o;t++){const l=e+t,c=4*l;if(i[c+3]>0)r[l]=0;else{if(r[l]=n,t>0&&t<o-1&&a>0&&a<s-1&&r[l-o]===r[l-1]&&r[l-o]===r[l-o-1]+1){r[l]=r[l-o];continue}t>0&&(r[l]=Math.min(r[l],r[l-1]+1)),a>0&&(r[l]=Math.min(r[l],r[l-o]+1))}}}for(let a=Math.floor(s/2);a>=0;a--){const e=a*o;for(let t=Math.floor(o/2);t>=0;t--){const n=e+t;t>0&&t<o-1&&a>0&&a<s-1&&r[n+o]===r[n+1]&&r[n+o]===r[n+o+1]+1?r[n]=r[n+o]:(t+1<o&&(r[n]=Math.min(r[n],r[n+1]+1)),a+1<s&&(r[n]=Math.min(r[n],r[n+o]+1)))}}for(let a=Math.floor(s/2);a<s;a++){const e=a*o;for(let t=Math.floor(o/2);t>=0;t--){const n=e+t;t>0&&t<o-1&&a>0&&a<s-1&&r[n-o]===r[n+1]&&r[n+1]===r[n-o+1]+1?r[n]=r[n+1]:(t+1<o&&(r[n]=Math.min(r[n],r[n+1]+1)),a>0&&(r[n]=Math.min(r[n],r[n-o]+1)))}}for(let a=Math.floor(s/2);a>=0;a--){const e=a*o;for(let t=Math.floor(o/2);t<o;t++){const n=e+t;t>0&&t<o-1&&a>0&&a<s-1&&r[n+o]===r[n-1]&&r[n-1]===r[n+o-1]+1?r[n]=r[n-1]:(t>0&&(r[n]=Math.min(r[n],r[n-1]+1)),a+1<s&&(r[n]=Math.min(r[n],r[n+o]+1)))}}return r};function c(e,t){const n=128,r=[],i=[],{data:o,width:s,height:a}=e;for(let l=0;l<a;l++){const e=l*s;for(let t=0;t<s;t++){const c=e+t,d=4*c;if(o[d+3]>32)r[c]=1-o[d+3]/255,i[c]=r[c];else{r[c]=s>n?n:s,i[c]=a>n?n:a;let e=s>n?n:s,o=a>n?n:a;if(t>0){const t=r[c-1]+1,n=i[c-1];(t<e||n<o)&&t*t+n*n<e*e+o*o&&(e=t,o=n)}if(l>0){const t=r[c-s],n=i[c-s]+1;(t<e||n<o)&&t*t+n*n<e*e+o*o&&(e=t,o=n)}r[c]=e,i[c]=o}}}for(let l=a-1;l>=0;l--){const e=l*s;for(let t=s-1;t>=0;t--){const n=e+t;let o=r[n],c=i[n];if(t+1<s){const e=r[n+1]+1,t=i[n+1];(e<o||t<c)&&e*e+t*t<o*o+c*c&&(o=e,c=t)}if(l+1<a){const e=r[n+s],t=i[n+s]+1;(e<o||t<c)&&e*e+t*t<o*o+c*c&&(o=e,c=t)}r[n]=o,i[n]=c}}for(let l=0;l<a;l++){const e=l*s;for(let t=s-1;t>=0;t--){const n=e+t;let o=r[n],a=i[n];if(t+1<s){const e=r[n+1]+1,t=i[n+1];(e<o||t<a)&&e*e+t*t<o*o+a*a&&(o=e,a=t)}if(l>0){const e=r[n-s],t=i[n-s]+1;(e<o||t<a)&&e*e+t*t<o*o+a*a&&(o=e,a=t)}r[n]=o,i[n]=a}}for(let l=a-1;l>=0;l--){const e=l*s;for(let t=0;t<s;t++){const n=e+t;let o=r[n],c=i[n];if(t>0){const e=r[n-1]+1,t=i[n-1];(e<o||t<c)&&e*e+t*t<o*o+c*c&&(o=e,c=t)}if(l+1<a){const e=r[n+s],t=i[n+s]+1;(e<o||t<c)&&e*e+t*t<o*o+c*c&&(o=e,c=t)}r[n]=o,i[n]=c}}return{mapX:r,mapY:i}}function d(e,t,n,r=1){return t?a(e,n,r):s(e,n,r)}var u=n(78871),g=n(75231),p=n(53074),h=n(35426),m=n(32905),y=Object.defineProperty,f=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t,n)=>(f(e,"symbol"!==typeof t?t+"":t,n),n),v=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const w=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],N=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];class S{constructor(){b(this,"r",0),b(this,"g",0),b(this,"b",0),b(this,"a",0),b(this,"next",null),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}}function x(e,t,n,r){const i=e.data,o=2*r+1,s=t-1,a=n-1,l=r+1,c=l*(l+1)/2,d=new S;let u,g=d;for(let w=1;w<o;w++)g=g.next=new S,w===l&&(u=g);g.next=d;let p=null,h=null,m=0,y=0;const f=w[r],b=N[r],v=16,x=Math.ceil(n/v);for(let w=0;w<v;w++)for(let e=x*w;e<x*(w+1)&&e<n;e++){g=d;const e=i[y+3];for(let t=0;t<l;t++)g.a=e,g=g.next;let n=0,o=l*e,a=c*e;for(let t=1;t<l;t++){const e=y+((s<t?s:t)<<2),r=(i[e],i[e+1],i[e+2],i[e+3]),o=l-t;a+=(g.a=r)*o,n+=r,g=g.next}p=d,h=u;for(let l=0;l<t&&p&&h;l++){const e=a*f>>b;i[y+3]=e,a-=o,o-=p.a;let t=l+r+1;t=m+(t<s?t:s)<<2,n+=p.a=i[t+3],a+=n,p=p.next;const{r:c,g:d,b:u,a:g}=h;o+=g,n-=g,h=h.next,y+=4}m+=t}const P=Math.ceil(t/v);for(let w=0;w<v;w++)for(let e=P*w;e<P*(w+1)&&e<t;e++){y=e<<2;let o=i[y+3],s=l*o,m=c*o;g=d;for(let e=0;e<l;e++)g.a=o,g=g.next;let v=t,w=0;for(let n=1;n<=r;n++){y=v+e<<2;const r=l-n;m+=(g.a=o=i[y+3])*r,w+=o,g=g.next,n<a&&(v+=t)}y=e,p=d,h=u;for(let r=0;r<n&&p&&h;r++){let n=y<<2;i[n+3]=o=m*f>>b,m-=s,s-=p.a,n=e+((n=r+l)<a?n:a)*t<<2,m+=w+=p.a=i[n+3],p=p.next,s+=o=h.a,w-=o,h=h.next,y+=t}}return e}function P(e,t,n,r,i){return v(this,null,(function*(){const o=e.data,{getHandlerId:s}=q,a=s.bind(q),l=2*r+1,c=t-1,d=n-1,u=r+1,g=u*(u+1)/2,p=new S;let h,m=p;for(let e=1;e<l;e++)m=m.next=new S,e===u&&(h=m);m.next=p;let y=null,f=null,b=0,v=0;const x=w[r],P=N[r];for(let e=0;e<t*n*4;e+=4)o[e]=o[e]*o[e+3]/255,o[e+1]=o[e+1]*o[e+3]/255,o[e+2]=o[e+2]*o[e+3]/255;const I=16,_=Math.ceil(n/I);for(let e=0;e<I;e++)if(yield q.asyncProcessing((()=>{for(let i=_*e;i<_*(e+1)&&i<n;i++){m=p;const e=o[v],n=o[v+1],i=o[v+2],s=o[v+3];for(let t=0;t<u;t++)m.r=e,m.g=n,m.b=i,m.a=s,m=m.next;let a=0,l=0,d=0,w=0,N=u*e,S=u*n,I=u*i,_=u*s,k=g*e,Z=g*n,C=g*i,z=g*s;for(let t=1;t<u;t++){const e=v+((c<t?c:t)<<2),n=o[e],r=o[e+1],i=o[e+2],s=o[e+3],g=u-t;k+=(m.r=n)*g,Z+=(m.g=r)*g,C+=(m.b=i)*g,z+=(m.a=s)*g,a+=n,l+=r,d+=i,w+=s,m=m.next}y=p,f=h;for(let u=0;u<t&&y&&f;u++){const e=z*x>>P;if(o[v+3]=e,0!==e){o[v]=k*x>>P,o[v+1]=Z*x>>P,o[v+2]=C*x>>P}else o[v]=o[v+1]=o[v+2]=0;k-=N,Z-=S,C-=I,z-=_,N-=y.r,S-=y.g,I-=y.b,_-=y.a;let t=u+r+1;t=b+(t<c?t:c)<<2,a+=y.r=o[t],l+=y.g=o[t+1],d+=y.b=o[t+2],w+=y.a=o[t+3],k+=a,Z+=l,C+=d,z+=w,y=y.next;const{r:n,g:i,b:s,a:g}=f;N+=n,S+=i,I+=s,_+=g,a-=n,l-=i,d-=s,w-=g,f=f.next,v+=4}b+=t}})),i!==a())return;const k=Math.ceil(t/I);for(let e=0;e<I;e++)if(yield q.asyncProcessing((()=>{for(let i=k*e;i<k*(e+1)&&i<t;i++){v=i<<2;let e=o[v],s=o[v+1],a=o[v+2],l=o[v+3],c=u*e,b=u*s,w=u*a,N=u*l,S=g*e,I=g*s,_=g*a,k=g*l;m=p;for(let t=0;t<u;t++)m.r=e,m.g=s,m.b=a,m.a=l,m=m.next;let Z=t,C=0,z=0,T=0,L=0;for(let n=1;n<=r;n++){v=Z+i<<2;const r=u-n;S+=(m.r=e=o[v])*r,I+=(m.g=s=o[v+1])*r,_+=(m.b=a=o[v+2])*r,k+=(m.a=l=o[v+3])*r,L+=e,C+=s,z+=a,T+=l,m=m.next,n<d&&(Z+=t)}v=i,y=p,f=h;for(let r=0;r<n&&y&&f;r++){let n=v<<2;o[n+3]=l=k*x>>P,l>0?(l=255/l,o[n]=S*x>>P,o[n+1]=I*x>>P,o[n+2]=_*x>>P):o[n]=o[n+1]=o[n+2]=0,S-=c,I-=b,_-=w,k-=N,c-=y.r,b-=y.g,w-=y.b,N-=y.a,n=i+((n=r+u)<d?n:d)*t<<2,S+=L+=y.r=o[n],I+=C+=y.g=o[n+1],_+=z+=y.b=o[n+2],k+=T+=y.a=o[n+3],y=y.next,c+=e=f.r,b+=s=f.g,w+=a=f.b,N+=l=f.a,L-=e,C-=s,z-=a,T-=l,f=f.next,v+=t}}})),i!==a())return;for(let e=0;e<t*n*4;e+=4)o[e]=255*o[e]/o[e+3],o[e+1]=255*o[e+1]/o[e+3],o[e+2]=255*o[e+2]/o[e+3];return e}))}var I=Object.defineProperty,_=Object.defineProperties,k=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L=(e,t)=>{for(var n in t||(t={}))C.call(t,n)&&T(e,n,t[n]);if(Z)for(var n of Z(t))z.call(t,n)&&T(e,n,t[n]);return e},E=(e,t)=>_(e,k(t)),D=(e,t,n)=>(T(e,"symbol"!==typeof t?t+"":t,n),n),O=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const M=510,A=1600,$=800,F=30,j=100,B={shadow:["start drawing shadow","before handle spread","after handle spread; before handle blur","after handle blur; before handle overlay, opacity...","finishing shadow drawing"],imageMatched:["start drawing imageMatched","before handle blur","after handle blur; before handle offset/overlay","finishing imageMatched drawing"],floating:["start drawing floating","before handle geometry and blur","after handle geometry and blur; before handle distance/overlay","finishing floating drawing"],upload:["start uploading","before load max size img","after load max size img, before drawing","after drawing, before calculate edge","after calculate edge , before drawing new canvas and convert to png","png uploading","finish uploading","finish whole uploading process"]},R=[],H=function(e,t){R.push({time:Date.now(),log:`${e}: `+B[e][t]})},U=function(...e){e.forEach((e=>{p.Z.setLog(e)}));const t=[];for(let n=0;n<R.length-1;n++)t.push({log:"FROM: "+R[n].log+"\nTO:   "+R[n+1].log,duration:R[n+1].time-R[n].time});t.push({log:"FROM: "+R[0].log+"\nTO:   "+R[R.length-1].log,duration:R[R.length-1].time-R[0].time}),t.forEach((e=>{const t=`${e.log}\n-> ${e.duration.toFixed(2)} ms`;p.Z.setLog(t)})),R.length=0};class W{constructor(){D(this,"SPREAD_RADIUS",1),D(this,"canvasT",document.createElement("canvas")),D(this,"canvasMaxSize",document.createElement("canvas")),D(this,"_draw"),D(this,"_layerData",null),D(this,"_inUploadProcess",!1),D(this,"dilate"),D(this,"handlerId",""),D(this,"imageDataCache",{data:null,identifier:""})}get layerData(){return this._layerData}get inUploadProcess(){return this._inUploadProcess}setUploadProcess(e){this._inUploadProcess=e}getHandlerId(){return(null==this?void 0:this.handlerId)||""}getImageMatchedIdentifier(e){const{styles:{shadow:{effects:t,currentEffect:n}}}=e,{radius:r,size:i}=t[n];return e.srcObj.type+e.srcObj.assetId+e.srcObj.userId+"-"+r.toString()+"-"+i.toString()}drawingInit(e,t,n,i){const{canvasT:o,canvasMaxSize:s}=this,{styles:{width:a,height:l,imgWidth:c,imgHeight:u,imgX:p,imgY:h,shadow:y}}=n,{maxsize:f=1600,middsize:b=510}=y,v=this.canvasT.getContext("2d",{willReadFrequently:!0});this._layerData=E(L({},this._layerData),{config:n,pageId:i.pageId||m.Z.currFocusPage.id});const{layerInfo:w}=i||{};if(w){const e=g.ZP.getLayer(w.pageIndex,w.layerIndex).id;this._layerData.primarylayerId=e,this.setProcessId({pageId:m.Z.currFocusPage.id,layerId:e||n.id||"",subLayerId:-1!==w.subLayerIdx&&n.id||""})}o.setAttribute("width",`${e.width}`),o.setAttribute("height",`${e.height}`);const N=t.naturalWidth/t.naturalHeight,S=y.currentEffect===r.w.floating||!y.isTransparent&&[r.w.shadow,r.w.frame,r.w.blur].includes(y.currentEffect);if(S){const e=y.currentEffect===r.w.floating?N:a/l,t=Math.round((e>1?1600:1600*e)+$),n=Math.round((e>1?1600/e:1600)+$);s.setAttribute("width",t.toString()),s.setAttribute("height",n.toString())}else if(0!==i.timeout){const e=t.naturalWidth/t.naturalHeight,n=Math.round((e>1?f:f*e)+$),r=Math.round((e>1?f/e:f)+$);s.setAttribute("width",n.toString()),s.setAttribute("height",r.toString())}else s.setAttribute("width",e.width.toString()),s.setAttribute("height",e.height.toString());if([r.w.shadow,r.w.blur,r.w.frame].includes(n.styles.shadow.currentEffect)){const{drawCanvasW:s,drawCanvasH:g,timeout:m=F}=i,y=n.styles.shadow.currentEffect===r.w.frame&&!n.styles.shadow.isTransparent;if(y){const n=t.naturalWidth,r=t.naturalHeight,i=.5*(e.width-s),a=.5*(e.height-g);v.clearRect(0,0,o.width,o.height),v.drawImage(t,0,0,n,r,i,a,s,g)}else{const n=a/c*t.naturalWidth,r=l/u*t.naturalHeight,i=t.naturalWidth/c,d=.5*(e.width-s),m=.5*(e.height-g);v.clearRect(0,0,o.width,o.height),v.drawImage(t,-p*i,-h*i,n,r,d,m,s,g)}const w=v.getImageData(0,0,o.width,o.height);this.dilate=d(w,y,void 0,S||m?1:f/b),v.clearRect(0,0,o.width,o.height)}i&&0!==i.timeout&&(this._layerData.options=L(L({},this._layerData.options),i)),this._draw&&clearTimeout(this._draw)}drawFloatingShadow(e,t,n,i){return O(this,null,(function*(){const o=e[0]||void 0;if(!o||![r.w.floating].includes(n.styles.shadow.currentEffect))return o?p.Z.setLog("Exception: drawFloatingShadow with wrong effect type:"+n.styles.shadow.currentEffect):p.Z.setLog("Error: input canvas is undefined"),void(i.layerInfo&&this.setIsProcess(i.layerInfo,!1));const{timeout:s=F}=i;s?(clearTimeout(this._draw),this._draw=window.setTimeout((()=>{this.floatingHandler(e,t,n,i)}),s)):this.floatingHandler(e,t,n,i)}))}floatingHandler(e,t,n,r){var i,o,s,a,l,c,d,u;p.Z.setLog("canvas drawing: floatingHandler start:");const g=e[0]||void 0;H("floating",0);const{canvasT:h,canvasMaxSize:m}=this,y=h.getContext("2d"),f=m.getContext("2d",{willReadFrequently:!0});if(!y||!f)return void p.Z.setLog("Error: "+(y?"canvasMaxSize":"ctxT")+"is undefined");y.clearRect(0,0,h.width,h.height),f.clearRect(0,0,m.width,m.height),f.beginPath();const{styles:b}=n,{timeout:v=F,cb:w}=r,{imgWidth:N,imgHeight:S,shadow:P,imgX:I,imgY:_}=b,{effects:k,currentEffect:Z}=P,C=1600,{x:z,y:T,radius:L,opacity:E,size:D,thinkness:O}=k[Z];let{drawCanvasW:M,drawCanvasH:A,layerInfo:$}=r||{};A&&M||(A=null!=(s=null==(o=null==(i=this.layerData)?void 0:i.options)?void 0:o.drawCanvasH)?s:0,M=null!=(c=null==(l=null==(a=this.layerData)?void 0:a.options)?void 0:l.drawCanvasW)?c:0),$&&Object.keys($)||($=null==(u=null==(d=this.layerData)?void 0:d.options)?void 0:u.layerInfo);const B=N/S,R=B>1?1600/B:1600,W=.5*m.width,V=.5*(m.height-R)+R;$&&v&&this.setIsProcess($,!0);const q=z*G.floating.x.weighting,Y=T*G.floating.y.weighting,X=C*(B>1?1:B)*(.01*D)*.5,Q=j*(.01*O);f.clearRect(0,0,m.width,m.height),f.ellipse(q+W,Y+V,X,Q,0,0,2*Math.PI+20),f.fill();const J=f.getImageData(0,0,m.width,m.height);H("floating",1);const ee=x(J,m.width,m.height,Math.ceil(L*G.floating.radius.weighting));H("floating",2),f.putImageData(ee,0,0),y.drawImage(m,0,0,m.width,m.height,0,0,h.width,h.height),y.globalCompositeOperation="source-in",y.fillStyle=k.color+K(E),y.fillRect(0,0,h.width,h.height),y.globalAlpha=1,y.globalCompositeOperation="source-over",e.forEach((e=>{const t=e.getContext("2d");t.clearRect(0,0,g.width,g.height),t.drawImage(h,0,0)})),$&&v&&this.setIsProcess($,!1),this.setProcessId({pageId:"",layerId:"",subLayerId:""}),w&&w(),H("floating",3),U("floating",`CANVAS_MAX_SIZE: (${m.width}, ${m.height})`,`CANVANST: (${h.width}, ${h.height}) `)}drawImageMatchedShadow(e,t,n,i){const o=e[0]||void 0;if(!o||![r.w.imageMatched].includes(n.styles.shadow.currentEffect))return o?p.Z.setLog("Exception: drawImageMatchedShadow with wrong effect type:"+n.styles.shadow.currentEffect):p.Z.setLog("Error: input canvas is undefined"),void(i.layerInfo&&this.setIsProcess(i.layerInfo,!1));const{timeout:s=F}=i;if(s){clearTimeout(this._draw);const r=u.Z.generateRandomString(6);this.handlerId=r,this._draw=window.setTimeout((()=>{this.imageMathcedHandler(e,t,n,i,r)}),s)}else this.imageMathcedHandler(e,t,n,i)}imageMathcedHandler(e,t,n,r,i){return O(this,null,(function*(){var o,s,a,l,c,d,u,g;p.Z.setLog("canvas drawing: drawImageMatchedShadow start:");const m=e[0]||void 0;H("imageMatched",0);const{canvasT:y,canvasMaxSize:f}=this,b=y.getContext("2d"),v=f.getContext("2d",{willReadFrequently:!0});if(!b||!v)return void p.Z.setLog("Error: "+(b?"canvasMaxSize":"ctxT")+"is undefined");b.clearRect(0,0,y.width,y.height),v.clearRect(0,0,f.width,f.height);const{styles:w}=n,{timeout:N=F,cb:S}=r,{width:x,height:I,imgWidth:_,imgHeight:k,shadow:Z,imgX:C,imgY:z}=w,{effects:T,currentEffect:L}=Z,{distance:E,angle:D,radius:O,opacity:M,size:A}=T[L],$=t.naturalWidth/_,j=C*$,B=z*$,R=x/_*t.naturalWidth,W=I/k*t.naturalHeight;let{drawCanvasW:V,drawCanvasH:q,layerInfo:K}=r||{};q&&V||(q=null!=(a=null==(s=null==(o=this.layerData)?void 0:o.options)?void 0:s.drawCanvasH)?a:0,V=null!=(d=null==(c=null==(l=this.layerData)?void 0:l.options)?void 0:c.drawCanvasW)?d:0),V*=.01*A,q*=.01*A;const Y=.5*(m.width-V),X=.5*(m.height-q);K&&Object.keys(K)||(K=null==(g=null==(u=this.layerData)?void 0:u.options)?void 0:g.layerInfo),K&&N&&this.setIsProcess(K,!0),b.drawImage(t,-j,-B,R,W,Y,X,V,q),v.drawImage(y,0,0,y.width,y.height,0,0,f.width,f.height);const Q=v.getImageData(0,0,f.width,f.height);let J;if(H("imageMatched",1),this.imageDataCache.identifier===this.getImageMatchedIdentifier(n))J=this.imageDataCache.data;else{if(J=yield P(Q,f.width,f.height,Math.ceil(1.5*O),i),!J)return;this.imageDataCache.identifier=this.getImageMatchedIdentifier(n),this.imageDataCache.data=J}H("imageMatched",2);const ee=x/_,te=I/k,ne=E&&E>0?E*h.ZP.cos(D)*G.imageMatched.distance.weighting:0,re=E&&E>0?E*h.ZP.sin(D)*G.imageMatched.distance.weighting:0;v.putImageData(J,ne*ee,re*te),b.clearRect(0,0,m.width,m.height),b.globalAlpha=.01*M,b.drawImage(f,0,0,f.width,f.height,0,0,y.width,y.height),b.globalAlpha=1,e.forEach((e=>{const t=e.getContext("2d");t.clearRect(0,0,m.width,m.height),t.drawImage(y,0,0)})),K&&N&&this.setIsProcess(K,!1),this.setProcessId({pageId:"",layerId:"",subLayerId:""}),S&&S(),H("imageMatched",3),U("imageMatched",`CANVAS_MAX_SIZE: (${f.width}, ${f.height})`,`CANVANST: (${y.width}, ${y.height}) `)}))}drawShadow(e,t,n,o){const s=e[0]||void 0,{timeout:a=F,cb:l}=o,{shadow:c}=n.styles,{currentEffect:d}=c;if(s&&[r.w.shadow,r.w.blur,r.w.frame].includes(d))a&&i.Z.getters["shadow/isUploading"]||(a?(clearTimeout(this._draw),this._draw=window.setTimeout((()=>{this.shadowHandler(e,t,n,o)}),a)):this.shadowHandler(e,t,n,o));else{if(s){const e="Exception: drawShadow with wrong effect type:"+d;console.log(e),p.Z.setLog(e)}else{const e="Error: input canvas is undefined";console.log(e),p.Z.setLog(e)}o.layerInfo&&this.setIsProcess(o.layerInfo,!1)}}shadowHandler(e,t,n,i){var o,s;const a=e[0]||void 0,{timeout:l=F,cb:c}=i,{width:d,height:u,imgWidth:g,imgHeight:m,shadow:y,imgX:f,imgY:b}=n.styles,{effects:v,currentEffect:w}=y,{distance:N,angle:S,radius:P,spread:I,opacity:_}=v[w];p.Z.setLog("canvas drawing: draw shadow start:"),H("shadow",0);const{canvasT:k,canvasMaxSize:Z}=this,C=k.getContext("2d"),z=Z.getContext("2d",{willReadFrequently:!0});if(!this.dilate)return;if(!C)return void p.Z.setLog("Error: "+(C?"canvasMaxSize":"ctxT")+"is undefined");C.clearRect(0,0,k.width,k.height),z.clearRect(0,0,Z.width,Z.height);let{layerInfo:T}=i||{};T&&Object.keys(T)||(T=null==(s=null==(o=this.layerData)?void 0:o.options)?void 0:s.layerInfo),T&&l&&this.setIsProcess(T,!0),H("shadow",1);const L=!y.isTransparent,E=L?G.frame.spread.weighting:Math.min(d/g,u/m),D=new ImageData(this.dilate(I*E),k.width,k.height);C.putImageData(D,0,0),H("shadow",2),z.drawImage(k,0,0,k.width,k.height,0,0,Z.width,Z.height);const O=z.getImageData(0,0,Z.width,Z.height);let M;M=P>0?x(O,Z.width,Z.height,Math.ceil(1.5*P)):O;const A=N&&N>0?N*h.ZP.cos(S)*G.shadow.distance.weighting:0,$=N&&N>0?N*h.ZP.sin(S)*G.shadow.distance.weighting:0;z.putImageData(M,A,$),C.clearRect(0,0,k.width,k.height),C.drawImage(Z,0,0,Z.width,Z.height,0,0,k.width,k.height),H("shadow",3),C.globalCompositeOperation="source-in",C.fillStyle=(w===r.w.frame&&v.frameColor||v.color)+K(_),C.fillRect(0,0,k.width,k.height),C.globalAlpha=1,C.globalCompositeOperation="source-over",e.forEach((e=>{const t=e.getContext("2d");t.clearRect(0,0,a.width,a.height),t.drawImage(k,0,0)})),T&&l&&this.setIsProcess(T,!1),this.setProcessId({pageId:"",layerId:"",subLayerId:""});Date.now();c&&c(),H("shadow",4),U("shadow")}clearHandler(){clearTimeout(this._draw)}asyncProcessing(e,t=!1){return O(this,null,(function*(){return t?e():new Promise((t=>{setTimeout((()=>{e(),t()}),0)}))}))}storeEffectsAttrs(e){const{currentEffect:t,effects:n}=e.styles.shadow;t!==r.w.none&&(localStorage.setItem(t,JSON.stringify(n[t])),t===r.w.frame?localStorage.setItem("shadow-color-frame",n.frameColor||n.color):localStorage.setItem("shadow-color",n.color))}getLocalEffectAttrs(e){const t=localStorage.getItem(e);return t&&Object.keys(JSON.parse(t)).length?JSON.parse(t):null}getLocalEffectColor(e){const t=e===r.w.frame?"shadow-color-frame":"shadow-color";return localStorage.getItem(t)||""}isTransparentBg(e){let t;if(e instanceof HTMLImageElement){t=document.createElement("canvas");const{naturalWidth:n,naturalHeight:r}=e;t.setAttribute("width",n.toString()),t.setAttribute("height",r.toString());const i=t.getContext("2d");i.drawImage(e,0,0,n,r)}else t=e;const n=t.getContext("2d",{willReadFrequently:!0}),{width:r,height:i}=t,o=n.getImageData(0,0,r,i).data;return 255!==o[3]||255!==o[4*r-1]||255!==o[o.length-1]||255!==o[o.length-4*r+3]}setIsProcess(e,t){const{pageIndex:n,layerIndex:r,subLayerIdx:i}=e;g.ZP.updateLayerProps(n,r,{inProcess:t?o.Q8.imgShadow:o.Q8.none},i)}clearLayerData(){this._layerData=null}setEffect(e,t={},n){let{pageIndex:r,layerIndex:i,subLayerIdx:s}=g.ZP;n&&({pageIndex:r,layerIndex:i,subLayerIdx:s=-1}=n);let a=g.ZP.getLayer(r,i);if(-1!==s)if(a.type===o.F5.group)a=g.ZP.getLayer(r,i).layers[s];else if(a.type===o.F5.frame)return;const l=a;if(l.type===o.F5.image){const{shadow:n}=l.styles,{effects:o}=n,a={pageIndex:r,layerIndex:i,subLayerIdx:s};if(this.updateShadowOld(a),1!==l.styles.scale){let{imgWidth:e,imgHeight:t,imgX:n,imgY:o}=l.styles.shadow.styles;e*=l.styles.scale,t*=l.styles.scale,n*=l.styles.scale,o*=l.styles.scale,this.updateShadowStyles({pageIndex:r,layerIndex:i,subLayerIdx:s},{imgWidth:e,imgHeight:t,imgX:n,imgY:o}),g.ZP.updateLayerStyles(r,i,{scale:1},s)}l.styles.shadow.currentEffect!==e&&this.updateEffectState(a,e),this.updateEffect(a,L(L({},o),t)),this.storeEffectsAttrs(l)}}getImgEdgeWidth(e){const t=e.getContext("2d",{willReadFrequently:!0}),n=t.getImageData(0,0,e.width,e.height),r=n.data.length/n.height,i=n.data.length/n.width;let o=!1,s=-1;while(!o&&s<i){s++;for(let e=s*r+3;e<(s+1)*r+3;e+=4)if(0!==n.data[e]){o=!0;break}}o=!1;let a=-1;while(!o&&a<i){a++;for(let e=a*r;e<(a+1)*r;e+=4)if(0!==n.data[n.data.length-e-1]){o=!0;break}}o=!1;let l=-1;while(!o&&l<r){l++;for(let e=4*l+3;e<n.data.length;e+=r)if(0!==n.data[e]){o=!0;break}}o=!1;let c=-1;while(!o&&c<r){c++;for(let e=4*c;e<n.data.length;e+=r)if(0!==n.data[n.data.length-e-1]){o=!0;break}}return{top:s,right:c,bottom:a,left:l}}getDefaultEffect(e){let t={};switch(e){case r.w.shadow:t={distance:50,angle:20,radius:50,spread:0,opacity:40};break;case r.w.floating:t={x:0,y:0,radius:60,size:100,thinkness:50,opacity:65};break;case r.w.blur:t={radius:50,spread:10,opacity:40};break;case r.w.frame:t={radius:0,spread:20,opacity:100};break;case r.w.imageMatched:t={distance:60,angle:40,radius:50,size:100,opacity:60};break;case r.w.none:return{};default:return u.Z.assertUnreachable(e)}const{getCurrLayer:n}=g.ZP,i=n.type===o.F5.image&&n.styles.shadow.effects.color||"#000000";return{[e]:t,color:i}}getKeysOf(e){return[...Object.keys(e===r.w.none?{}:this.getDefaultEffect(e)[e])]}updateEffect(e,t){i.Z.commit("UPDATE_shadowEffect",{layerInfo:e,payload:t})}updateEffectState(e,t){i.Z.commit("SET_shadowEffectState",{layerInfo:e,payload:{currentEffect:t}})}updateEffectProps(e,t){i.Z.commit("UPDATE_shadowProps",{layerInfo:e,payload:t})}updateShadowStyles(e,t){i.Z.commit("UPDATE_shadowStyles",{layerInfo:e,payload:t})}updateShadowSrc(e,t){i.Z.commit("SET_srcObj",{layerInfo:e,srcObj:t})}updateShadowOld(e){i.Z.commit("SET_old",e)}setShadowSrcState(e,t){const{effect:n,effects:r,layerSrcObj:o,shadowSrcObj:s,layerState:a}=t;i.Z.commit("SET_srcState",{layerInfo:e,effect:n,effects:r,layerSrcObj:o,shadowSrcObj:s,layerState:a})}setUploadId(e){e||(e={pageId:"",layerId:"",subLayerId:""}),i.Z.commit("shadow/SET_UPLOAD_ID",e)}setProcessId(e){e||(e={pageId:"",layerId:"",subLayerId:""}),i.Z.commit("shadow/SET_PROCESS_ID",e)}setHandleId(e){e||(e={pageId:"",layerId:"",subLayerId:""}),i.Z.commit("shadow/SET_HANDLE_ID",e)}addUploadImg(e){i.Z.commit("shadow/ADD_UPLOAD_IMG",e)}TEST_showtTestCanvas(e){const t=document.createElement("canvas");t.setAttribute("width",e.width.toString()),t.setAttribute("height",e.height.toString());const n=t.getContext("2d");n.drawImage(e,0,0),document.body.appendChild(t),setTimeout((()=>document.body.removeChild(t)),1e4),t.style.position="absolute",t.style.top="0",t.style.zIndex="10000",t.style.width=(e.width/4).toString()+"px",t.style.height=(e.height/4).toString()+"px"}}const V={none:{_effectName:"NN0428"},shadow:{distance:"NN0431",angle:"NN0432",radius:"NN0426",spread:"NN0421",opacity:"NN0427",_effectName:"NN0429"},blur:{radius:"NN0426",spread:"NN0421",opacity:"NN0427",_effectName:"NN0418"},imageMatched:{distance:"NN0431",angle:"NN0432",size:"NN0422",radius:"NN0426",opacity:"NN0427",_effectName:"NN0419"},frame:{radius:"NN0426",spread:"NN0423",opacity:"NN0427",_effectName:"NN0430"},floating:{x:"NN0425",y:"NN0424",radius:"NN0426",opacity:"NN0427",thinkness:"NN0423",size:"NN0422",_effectName:"NN0420"}},G={shadow:{distance:{max:100,min:0,weighting:2.2},angle:{max:180,min:-180,weighting:1},radius:{max:100,min:0,weighting:1.5},opacity:{max:100,min:0,weighting:1},spread:{max:20,min:0,weighting:1}},blur:{radius:{max:100,min:0,weighting:2},spread:{max:30,min:5,weighting:.72},opacity:{max:100,min:0,weighting:.01}},imageMatched:{distance:{max:100,min:0,weighting:2},angle:{max:180,min:-180,weighting:1},size:{max:110,min:70,weighting:.01},radius:{max:100,min:0,weighting:1.5},opacity:{max:100,min:0,weighting:.01}},frame:{spread:{max:30,min:0,weighting:2},opacity:{max:100,min:0,weighting:.01},radius:{max:100,min:0,weighting:2}},floating:{opacity:{max:100,min:0,weighting:.01},radius:{max:100,min:0,weighting:1.5},thinkness:{max:100,min:0},size:{max:110,min:25},x:{max:100,min:-100,weighting:3},y:{max:100,min:-100,weighting:1.8}}};var q=new W;function K(e){return 50===e?"80":90===e?"E6":`0${Math.round(2.55*e).toString(16)}`.slice(-2).toUpperCase()}},3162:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(50719),i=n(71684),o=n(89497),s=new class{getImgSize(e){const{token:t,type:n,asset_index:s,team_id:a,asset_id:l,key_id:c,cache:d}=e;return r.Z.request({url:"/get-image-size",method:"GET",params:{token:t||(0,i.Z)().token,type:n,asset_index:s,team_id:a,asset_id:l,key_id:c,cache:d,ver:d?o.Z.getters["user/getVerApi"]:null}})}},a=n(60410),l=n(62013),c=n(78871),d=n(75231),u=n(50543),g=n(32905),p=Object.defineProperty,h=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t,n)=>(h(e,"symbol"!==typeof t?t+"":t,n),n),y=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const f="v7576";class b{constructor(){m(this,"initLayerSize",{width:0,height:0}),m(this,"initImgPos",{x:0,y:0}),m(this,"initImgSize",{width:0,height:0}),m(this,"imgBuffer",{width:0,height:0,x:0,y:0}),m(this,"isHorizon",!1),m(this,"xSign",0),m(this,"ySign",0)}imgLoadHandler(e,t,n){return y(this,null,(function*(){const{error:r,crossOrigin:i=!1}=n||{};return new Promise(((n,o)=>{const s=new Image;i&&!e.includes("data:image/png;base64")&&(s.crossOrigin="anonymous"),s.onload=()=>n(t(s)),s.onerror=()=>o(r&&r(s)),s.src=e}))}))}getImgIdentifier(e,...t){return[e.type,e.userId,e.assetId,...t].join(",")}isImgControl(e=d.ZP.pageIndex){if(e===d.ZP.pageIndex&&d.ZP.getCurrLayer){const e=d.ZP.getCurrLayer;switch(e.type){case"image":return e.imgControl;case"group":return e.layers.some((e=>"image"===e.type&&e.imgControl));case"frame":return e.clips.some((e=>"image"===e.type&&e.imgControl))}}return!1}isSrcObj(e){return"undefined"!==typeof e.assetId&&"undefined"!==typeof e.userId&&"undefined"!==typeof e.type}appendQuery(e,t,n){return""===e||e.includes("data:image/")?"":e.includes("?")?e+`&${t}=${n}`:e+`?${t}=${n}`}getSrc(e,t,r,i){var s;let{type:a,userId:l,assetId:d,brandId:u,updateQuery:g,maxSize:p}={},h=1;if(this.isSrcObj(e))({type:a,userId:l,assetId:d,brandId:u,maxSize:p}=e);else{if(!e.srcObj&&!e.src_obj)return"";const n=e.srcObj||e.src_obj;if(({type:a,userId:l,assetId:d,brandId:u,updateQuery:g,maxSize:p}=n),"undefined"===typeof t&&e.styles){const{imgWidth:r,imgHeight:i}=e.styles;t=this.getSrcSize(n,e.styles?this.getSignificantDimension(r,i)*o.Z.getters.getPageScaleRatio*.01:0)}h=e.styles?e.styles.imgHeight/e.styles.imgWidth:1}"xtra"===t&&p&&"xtra"!==p&&(t=p);let m="";switch(a){case"public":if("string"===typeof t&&t.includes("ext"))m=`https://template.vivipic.com/admin/${l}/asset/image/${d}/${t}`;else{const e=i?`?rand_ver=${c.Z.generateRandomString(6)}`:"?origin=true";m=`https://template.vivipic.com/admin/${l}/asset/image/${d}/${t||"midd"}${e+(g||"")}`}break;case"private":{const e=o.Z.getters["file/getEditorViewImages"],n=i?`&rand_ver=${c.Z.generateRandomString(6)}`:"&origin=true";m=e(d)?e(d)[t]+n:"";break}case"logo-public":m=(t.includes("ext"),`https://template.vivipic.com/admin/${l}/asset/logo/${u}/${d}/${t}?origin=true`);break;case"logo-private":{const e=o.Z.getters["brandkit/getEditorViewLogos"];m=e(d)?e(d)[t]+"&origin=true":"";break}case"unsplash":m=`https://images.unsplash.com/${d}?cs=tinysrgb&q=80&${h>=1?"h":"w"}=${t||766}&origin=true`;break;case"pexels":m=`https://images.pexels.com/photos/${d}/pexels-photo-${d}.jpeg?auto=compress&cs=tinysrgb&${h>=1?"h":"w"}=${t||766}&origin=true`;break;case"background":m=`https://template.vivipic.com/background/${d}/${t||"full"}?origin=true&ver=${o.Z.getters["user/getVerUni"]}`;break;case"frame":m=n(70865);break;case"shadow-private":{const e=o.Z.getters["shadow/shadowImgs"];if("number"===typeof d&&e.has(d)){m=(null==(s=e.get(d))?void 0:s.urls[t||"midd"])||"";break}m="";break}case"svg":m=`https://template.vivipic.com/svg/${d}/${t||"full"}?origin=true&ver=${o.Z.getters["user/getVerUni"]}`;break;default:m=""}return m||this.isSrcObj(e)||!e.previewSrc?this.appendRefreshAppver(m):this.appendRefreshAppver(e.previewSrc||"")}getSrcSize(e,t,n=""){const{type:r}=e;if(!r)return 0;const i="pexels"===r||"unsplash"===r?"size":"key",s=(0,a.cloneDeep)(o.Z.state.user.imgSizeMap);if("backendRendering"===o.Z.getters["user/getUserId"]&&s.unshift(...o.Z.state.user.imgSizeMapExtra),null==s?void 0:s.length){let e=0;return"number"===typeof t?(e=(0,a.findLastIndex)(s,(e=>t<=e.size)),e=Math.max(e,0)):"string"===typeof t&&(e=Math.max(s.findIndex((e=>e[i]===t),0))),n?"pre"===n?s[e+1>=s.length-1?s.length-1:e+1][i]:s[e-1<=0?0:e-1][i]:s[e][i]}return"pexels"===r||"unsplash"===r?1080:"full"}getSignificantDimension(e,t){return Math.max(e,t)}getSrcType(e){return e.includes("unsplash")?"unsplash":e.includes("pexels")?"pexels":e.includes("template.vivipic.com/background")?"background":e.includes("template.vivipic.com/svg")?"svg":e.includes("template.vivipic.com/admin")?e.includes("logo")?"logo-public":"public":e.includes("asset.vivipic")?e.includes("logo")?"logo-private":"private":""}getUserId(e,t){switch(t){case"logo-public":case"public":{const t="admin/",n="/asset";return e.substring(e.indexOf(t)+t.length,e.indexOf(n))}case"pexels":return e.includes("jpeg")?"jpeg":"png";default:return""}}getAssetId(e,t=this.getSrcType(e)){switch(t){case"logo-public":{const t="logo/",n="/full",r=e.substring(e.indexOf(t)+t.length,e.indexOf(n));return r.split("/")[1]}case"public":{const t="image/",n="/full";return e.substring(e.indexOf(t)+t.length,e.indexOf(n))}case"unsplash":{const t="com/",n="?";return e.substring(e.indexOf(t)+t.length,e.indexOf(n))}case"pexels":{const t="photos/",n="/pexels";return e.substring(e.indexOf(t)+t.length,e.indexOf(n))}case"background":{const t="background/";return e.substring(e.indexOf(t)+t.length,-1===e.indexOf("/prev")?e.indexOf("/larg"):e.indexOf("/prev"))}case"svg":{const t="svg/";return e.substring(e.indexOf(t)+t.length,-1===e.indexOf("/prev")?e.indexOf("/larg"):e.indexOf("/prev"))}case"logo-private":case"private":return e;default:return""}}getImgSize(e,t=!0){const{type:n,assetId:r,userId:i}=e;switch(n){case"private":case"public":case"logo-private":case"logo-public":{const e=n.includes("logo")?"logo":"image";if(!i&&"number"===typeof r)return s.getImgSize({token:"",type:e,asset_index:r,cache:t});if("string"===typeof i&&"string"===typeof r)return s.getImgSize({token:"",type:e,asset_id:r,team_id:i,cache:t});break}case"background":if("string"===typeof r)return s.getImgSize({token:"",type:"background",key_id:r,cache:t});break;case"svg":if("string"===typeof r)return s.getImgSize({token:"",type:"svg",key_id:r,cache:t})}}getBrandId(e,t){if("logo-public"!==t)return;const n=e.split("/");return n[n.length-3]}setImgControlDefault(e=!0){const{pageIndex:t,layerIndex:n,getCurrLayer:r}=d.ZP;if(r)switch(r.type){case"image":d.ZP.updateLayerProps(t,n,{imgControl:!1});break;case"group":{const i=r;for(let r=0;r<i.layers.length;r++){const o={};"image"===i.layers[r].type&&(o.imgControl=!1),e&&(o.active=!1),d.ZP.updateSubLayerProps(t,n,r,o)}break}case"frame":{const e=r;for(let r=0;r<e.clips.length;r++)l.Z.updateFrameLayerProps(t,n,r,{active:!1,imgControl:!1})}}}resizeExceedLimit(e,t,n,r){const i={x:this.initImgPos.x,y:this.initImgPos.y};if(this.isHorizon&&this.xSign<0||!this.isHorizon&&this.ySign<0){if(i.x+=n,i.y+=r,i.x>0||i.y>0)return!0}else{if(e+=n,t+=r,this.isHorizon&&e-i.x>this.initImgSize.width)return!0;if(!this.isHorizon&&t-i.y>this.initImgSize.height)return!0}return!1}imgResizeHandler(e,t,n,r,i=null,o=null){let s,a;(this.isHorizon&&this.xSign<0||!this.isHorizon&&this.ySign<0)&&(s=n,a=r),this.resizeExceedLimit(this.initLayerSize.width,this.initLayerSize.height,n,r)?(0===this.imgBuffer.width&&0===this.imgBuffer.height&&(this.imgScaling(e+n,t+r,0,0),this.imgBuffer.width=n,this.imgBuffer.height=r),this.imgScaling(e,t,n-this.imgBuffer.width,r-this.imgBuffer.height,i,o)):this.imgClipping(e,t,s,a,i,o)}imgScaling(e,t,n,r,i=null,o=null){let s=this.initImgSize.width,a=this.initImgSize.height;const l={x:this.initImgPos.x,y:this.initImgPos.y},c=a/s,u=e,g=t;this.isHorizon?(s+=n,a=s*c):(a+=r,s=a/c),a<t?(a=t,s=t/c):s<e&&(s=e,a=e*c),this.isHorizon?(l.y-=(a-this.initImgSize.height)/2,l.x=this.xSign>0?-(s-u):0):(l.x-=(s-this.initImgSize.width)/2,l.y=this.ySign>0?-(a-g):0),0===this.imgBuffer.x&&0===this.imgBuffer.y&&(this.imgBuffer.x=-(s-this.initImgSize.width)/2,this.imgBuffer.y=-(a-this.initImgSize.height)/2),i?i(l.x>0?0:l.x,l.y>0?0:l.y):this.updateImgPos(d.ZP.pageIndex,d.ZP.layerIndex,l.x>0?0:l.x,l.y>0?0:l.y),o?o(s,a):this.updateImgSize(d.ZP.pageIndex,d.ZP.layerIndex,s,a)}imgClipping(e,t,n,r,i=null,o=null){const s=this.initImgPos.x,a=this.initImgPos.y;i?i((null!=n?n:0)+s,(null!=r?r:0)+a):this.updateImgPos(d.ZP.pageIndex,d.ZP.layerIndex,(null!=n?n:0)+s,(null!=r?r:0)+a),o?o(this.initImgSize.width,this.initImgSize.height):this.updateImgSize(d.ZP.pageIndex,d.ZP.layerIndex,this.initImgSize.width,this.initImgSize.height)}updateImgPos(e,t,n,r){o.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:{imgX:n,imgY:r}})}updateImgSize(e,t,n,r){o.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:{imgWidth:n,imgHeight:r}})}getImageSize(e,t,n,r=!0){return y(this,null,(function*(){const r=new Promise(((t,n)=>{e.includes("appver")||(e=this.appendQuery(e,"appver",f)),this.imgLoadHandler(e,(e=>t(e)),{error:()=>n(new Error("Could not load image")),crossOrigin:!0})}));try{const e=yield r;return{width:e.width,height:e.height,exists:!0}}catch(i){return{width:t,height:n,exists:!1}}}))}adaptToSize(e,t){if(!e.width||!e.height)return{width:e.width,height:e.height,posX:0,posY:0};const n=e.width/e.height,r=t.width/t.height;let i=0,o=0;n>r?(i=t.height*n,o=t.height):(i=t.width,o=t.width/n);const s=(t.width-i)/2,a=(t.height-o)/2;return{width:i,height:o,posX:s,posY:a}}adaptToPage(e,t){let{width:n,height:r,posX:i,posY:o}=this.adaptToSize(e,"px"===t.unit?t:g.Z.getPageSizeWithBleeds(t));return t.unit&&"px"!==t.unit&&t.bleeds&&(i-=t.bleeds.left,o-=t.bleeds.top),{width:n,height:r,posX:i,posY:o}}getClipImgDimension(e,t){return y(this,null,(function*(){return this.imgLoadHandler(t,(n=>{const r={srcObj:{type:this.getSrcType(t),userId:"",assetId:this.getAssetId(t)},styles:{width:n.width,height:n.height}};return u.Z.clipperHandler(r,e.clipPath,e.styles).styles}))}))}getBgRemoveInfo(e,t){var n,r,i,s,a,l,c,d,u,g,p,h,m,y,f;const b=o.Z.getters["user/isAdmin"],v=null!=(n=e.team_id)?n:o.Z.getters["user/getTeamId"],w=o.Z.getters["user/getTeamId"];return{width:e.width,height:e.height,id:e.id,assetIndex:e.asset_index,teamId:e.team_id,urls:{prev:b?`https://template.vivipic.com/admin/${v||w}/asset/image/${e.id}/prev`:null!=(i=null==(r=e.signed_url)?void 0:r.prev)?i:"",full:b?`https://template.vivipic.com/admin/${v||w}/asset/image/${e.id}/full`:null!=(a=null==(s=e.signed_url)?void 0:s.full)?a:"",larg:b?`https://template.vivipic.com/admin/${v||w}/asset/image/${e.id}/larg`:null!=(c=null==(l=e.signed_url)?void 0:l.larg)?c:"",original:b?`https://template.vivipic.com/admin/${v||w}/asset/image/${e.id}/original`:null!=(u=null==(d=e.signed_url)?void 0:d.original)?u:"",midd:b?`https://template.vivipic.com/admin/${v||w}/asset/image/${e.id}/midd`:null!=(p=null==(g=e.signed_url)?void 0:g.midd)?p:"",smal:b?`https://template.vivipic.com/admin/${v||w}/asset/image/${e.id}/smal`:null!=(m=null==(h=e.signed_url)?void 0:h.smal)?m:"",tiny:b?`https://template.vivipic.com/admin/${v||w}/asset/image/${e.id}/tiny`:null!=(f=null==(y=e.signed_url)?void 0:y.tiny)?f:""},initSrc:t}}appendOriginQuery(e){return!e||e.includes("data:image/")||e.includes("origin=true")?e:e.includes("?")?`${e}&origin=true`:`${e}?origin=true`}appendRandomQuery(e){return e.includes("data:image/")?e:e.includes("?")?`${e}&rand_ver=${c.Z.generateRandomString(6)}`:`${e}?rand_ver=${c.Z.generateRandomString(6)}`}appendRefreshAppver(e){return e.includes("data:image/")?e:this.appendQuery(e,"appver",f)}appendCompQuery(e){return e.includes("comp=0")?e:e.includes("?")?`${e}&comp=0`:`${e}?comp=0`}appendCompQueryForVivipic(e){return e.includes("asset.vivipic.com")||e.includes("template.vivipic.com")?this.appendCompQuery(e):e}}var v=new b},13637:function(e,t,n){"use strict";var r=n(865),i=n(94733),o=n(6400),s=n(78871),a=n(15820),l=n(90272),c=n(89456),d=n(60410),u=n(86052),g=n(37658),p=n(50543),h=n(74041),m=n(56556),y=Object.defineProperty,f=Object.defineProperties,b=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,S=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||(t={}))w.call(t,n)&&S(e,n,t[n]);if(v)for(var n of v(t))N.call(t,n)&&S(e,n,t[n]);return e},P=(e,t)=>f(e,b(t));class I{newImage(e){var t,n;const{width:a=0,height:l=0,initWidth:c=0,initHeight:d=0,imgWidth:u=0,imgHeight:g=0,imgX:h=0,imgY:m=0,zindex:y=0,opacity:f=0,scale:b=1}=e.styles,v=P(x({type:"image"},e.previewSrc&&{previewSrc:e.previewSrc}),{srcObj:x({},e.srcObj),id:e.id||s.Z.generateRandomString(8),clipPath:null!=(t=e.clipPath)?t:`M0,0h${a}v${l}h${-a}z`,active:!1,shown:!1,locked:!1,moved:!1,moving:!1,imgControl:!1,inProcess:o.Q8.none,trace:null!=(n=e.trace)?n:0,isClipper:!0,dragging:!1,designId:"",categoryType:e.categoryType,jsonVer:i.Z,jsonVer_origin:i.Z,overlay:{id:"none",xOffset:0,yOffset:0,opacity:100,content:null},styles:{x:0,y:0,scale:b,scaleX:1,scaleY:1,rotate:0,width:a,height:l,initWidth:a,initHeight:l,imgX:0,imgY:0,imgWidth:c||a,imgHeight:d||l,zindex:null!=y?y:-1,opacity:f||100,horizontalFlip:!1,verticalFlip:!1,adjust:{},shadow:{currentEffect:"none",effects:x({color:"#000000",frameColor:"#000000"},Object.keys(r.w).reduce(((e,t)=>P(x({},e),{[t]:{}})),{})),srcObj:{type:"",assetId:"",userId:""},styles:{imgWidth:0,imgHeight:0,imgX:0,imgY:0},old:{}}}});e.styles.shadow&&!Object.prototype.hasOwnProperty.call(e.styles.shadow,"srcObj")&&(e.styles.shadow=v.styles.shadow);const w=!u||!g||u+1<Math.abs(h)+a||g+1<Math.abs(m)+l;if(w){const t={styles:{width:v.styles.imgWidth,height:v.styles.imgHeight}},n={width:v.styles.width,height:v.styles.height,scale:1},r=p.Z.clipperHandler(t,"",n),{styles:{imgWidth:i,imgHeight:o,imgX:s,imgY:a}}=r;e.styles.imgWidth=i,e.styles.imgHeight=o,e.styles.imgX=s,e.styles.imgY=a}Object.assign(v.styles,e.styles),delete e.styles;const N=Object.assign(v,e,{jsonVer:i.Z});return N}newFrame(e){var t,n,r,o,a,l,c,d;const{designId:u,clips:g,decoration:p,decorationTop:h,styles:m,locked:y,blendLayers:f}=s.Z.deepCopy(e);let{width:b,height:v,initWidth:w,initHeight:N}=m;if(w=w||b,N=N||v,p||h||u&&""!==u||1!==g.length||g[0].clipPath||(g[0].isFrameImg=!0),g.length&&!g[0].isFrameImg?g.forEach(((e,t)=>{var n;e.styles.zindex=t;const r={isFrame:!0,clipPath:e.clipPath,styles:e.styles,srcObj:null!=(n=e.srcObj)?n:{type:"frame",assetId:"",userId:""}};Object.assign(e,this.newImage(r))})):g.length?(g[0].styles.width=m.width,g[0].styles.height=m.height,g[0].styles.initHeight=m.initHeight,g[0].styles.initWidth=m.initWidth,g[0]=this.newImage(g[0]),g[0].isFrameImg=!0):(m.scale=1,m.scaleX=1,m.scaleY=1,w=b,N=v,g.push(this.newImage({styles:{width:b,height:v,initWidth:b,initHeight:v},srcObj:{type:"frame",assetId:"",userId:""},isFrameImg:!0}))),g.some((e=>0!==e.styles.rotate))){const e=g.find((e=>0!==e.styles.rotate));m.rotate=e.styles.rotate,e.styles.rotate=0}const S=f?f.map((e=>{const t={};return t.width=b/m.scale,t.height=v/m.scale,t.initWidth=b/m.scale,t.initHeight=v/m.scale,t.blendMode=e.blendMode,e.styles=t,e.vSize=[t.width,t.height],e.frameDecType="blend",this.newShape(e)})):void 0,x={type:"frame",id:e.id||s.Z.generateRandomString(8),active:!1,shown:!1,locked:null!=y&&y,moved:!1,moving:!1,dragging:!1,designId:null!=u?u:"",jsonVer:i.Z,jsonVer_origin:null!=(t=e.jsonVer_origin)?t:i.Z,styles:{x:null!=(n=m.x)?n:0,y:null!=(r=m.y)?r:0,scale:null!=(o=m.scale)?o:1,scaleX:null!=(a=m.scaleX)?a:1,scaleY:null!=(l=m.scaleY)?l:1,rotate:null!=(c=m.rotate)?c:0,width:b,height:v,initWidth:w,initHeight:N,zindex:null!=(d=m.zindex)?d:-1,opacity:m.opacity||100,horizontalFlip:m.horizontalFlip||!1,verticalFlip:m.verticalFlip||!1,shadow:m.shadow},clips:g,blendLayers:S,decoration:p&&!g[0].isFrameImg?this.newShape((()=>(p.vSize=[w,N],p.frameDecType="decoration",p.styles={width:w,height:N,initWidth:w,initHeight:N},p))()):void 0,decorationTop:h&&!g[0].isFrameImg?this.newShape((()=>(h.vSize=[w,N],h.frameDecType="decorationTop",h.styles={width:w,height:N,initWidth:w,initHeight:N},h))()):void 0};return x.clips.forEach((e=>e.parentLayerStyles=x.styles)),(x.decoration&&!x.decoration.svg||x.decorationTop&&!x.decorationTop.svg||g.some((e=>!e.clipPath&&!e.isFrameImg)))&&(x.needFetch=!0),x}newText(e,t=i.Z){var n,r,o,a,c,p,m,y,f;const b={type:"text",id:e.id||s.Z.generateRandomString(8),widthLimit:-1,isTyping:!1,active:!1,shown:!1,locked:!1,moved:!1,moving:!1,editing:!1,dragging:!1,designId:"",isEdited:!1,contentEditable:null!=(n=e.contentEditable)&&n,jsonVer:i.Z,jsonVer_origin:i.Z,styles:{x:null==(r=e.styles)?void 0:r.x,y:null==(o=e.styles)?void 0:o.y,scale:1,scaleX:1,scaleY:1,rotate:0,width:(null==(a=e.styles)?void 0:a.width)?e.styles.width:0,height:(null==(c=e.styles)?void 0:c.width)?e.styles.width:0,initWidth:(null==(p=e.styles)?void 0:p.width)?e.styles.width:0,initHeight:(null==(m=e.styles)?void 0:m.height)?e.styles.height:0,zindex:-1,writingMode:"initial",align:"center",horizontalFlip:!1,verticalFlip:!1,textEffect:{name:"none"},textBg:{name:"none"},textShape:{name:"none"},textFill:{name:"none",customImg:null}},paragraphs:[{styles:{fontSpacing:0,lineHeight:-1},spans:[{text:"",styles:{opacity:1,font:"normal",userId:"",assetId:"",fontUrl:"",type:"public",weight:"normal",color:"#000000",size:72,decoration:"none",style:"normal"}}]}],selection:{from:0,to:0},isAutoResizeNeeded:!1,isCompensated:!0,isDraggingCursor:!1,isFlipping:!1};if(Object.assign(b.styles,e.styles),delete e.styles,b.styles.writingMode.includes("vertical-")&&(b.styles.writingMode="vertical"),e.paragraphs){const t=e.paragraphs;for(let e=0;e<t.length;e++){const n=t[e].spans;if(0===n.length)t.splice(e,1),e--;else if(1===n.length){const r=n[0];void 0===r.text&&(t.splice(e,1),e--)}else for(let e=0;e<n.length;e++){const t=n[e];!t.text&&n.length>1&&(n.splice(e,1),e--)}}const n=b.styles.writingMode.includes("vertical"),r=Object.keys(u.dL).includes(g.Z.currLocale())?u.dL[g.Z.currLocale()]:u.dL.tw;if(h.Z.removeInvalidStyles(e.paragraphs,n,e.isCompensated,{pHandler:e=>{var t,n,i,o;if(e.spans.length>0){const s=e.spans[0].styles;s.font?(e.styles.font=s.font,e.styles.type=null!=(t=s.type)?t:"public",e.styles.userId=null!=(n=s.userId)?n:"",e.styles.assetId=null!=(i=s.assetId)?i:"",e.styles.fontUrl=null!=(o=s.fontUrl)?o:""):(e.styles.font=r,e.styles.type="public",e.styles.userId="",e.styles.assetId="",e.styles.fontUrl=""),e.styles.font.includes(",")&&(e.styles.font=e.styles.font.split(",")[0]),(e.spans.length>1||""!==e.spans[0].text)&&e.spanStyle&&delete e.spanStyle}},spanHandler:e=>{e.text=e.text.replace(/[\ufe0e\ufe0f]/g,"").replace(/\xa0/g," ")},spanPostHandler:e=>{e.styles.font.includes(",")&&(e.styles.font=e.styles.font.split(",")[0])}}),e.isCompensated){const t=h.Z.getBaseFontSizeOfParagraphs(e.paragraphs),n=h.Z.getScaleCompensation(t);n.needCompensation&&(b.styles.scale*=n.scale,e.paragraphs=h.Z.propAppliedParagraphs(e.paragraphs,"size",0,(e=>e/n.scale)))}}for(const i of["textShape","textEffect"])(0,d.isEqual)(b.styles[i],{})&&(b.styles[i]={name:"none"});if(s.Z.versionCheck({version:null!=(y=e.jsonVer)?y:t,lessThan:"1.0.7"})){const t=l.Z.getLayerFontSize(e.paragraphs)/60,n=/(square-borderless|rounded-borderless|square-hollow|rounded-hollow|square-both|rounded-both)/,r=[{category:"textEffect",effect:/(funky3d|bold3d)/,option:"distance"},{category:"textEffect",effect:/funky3d/,option:"distanceInverse"},{category:"textBg",effect:/gooey/,option:"distance"},{category:"textBg",effect:n,option:"bStroke"},{category:"textBg",effect:n,option:"pStrokeY"},{category:"textBg",effect:n,option:"pStrokeX"},{category:"textShape",effect:/curve/,option:"bend",modFunc:e=>e*Math.pow(t,1/.6)}];for(const e of r){const n=b.styles[e.category];if(e.effect.test(n.name)){const r=n,i=null!=(f=e.modFunc)?f:e=>e/t;r[e.option]=i(r[e.option])}}}return Object.assign(b,e,{jsonVer:i.Z})}newGroup(e,t,n=i.Z){var r,a,l,c,d,u,g,p;const h={type:"group",id:e.id||s.Z.generateRandomString(8),active:!1,shown:!1,locked:null!=(r=e.locked)&&r,moved:!1,moving:!1,dragging:!1,designId:e.designId,db:e.db,jsonVer:i.Z,jsonVer_origin:null!=(a=e.jsonVer_origin)?a:i.Z,styles:{x:e.styles.x,y:e.styles.y,scale:null!=(l=e.styles.scale)?l:1,scaleX:null!=(c=e.styles.scaleX)?c:1,scaleY:null!=(d=e.styles.scaleY)?d:1,rotate:null!=(u=e.styles.rotate)?u:1,width:e.styles.width,height:e.styles.height,initWidth:null!=(g=e.styles.initWidth)?g:e.styles.width,initHeight:null!=(p=e.styles.initHeight)?p:e.styles.height,zindex:-1,opacity:e.styles.opacity||1,horizontalFlip:e.styles.horizontalFlip||!1,verticalFlip:!1},layers:t.flatMap(((e,t)=>{if(e.type===o.F5.shape){const n=e;if(!n.designId&&!n.svg&&!["D","E"].includes(n.category))return console.warn("layer in group at index:",t,"has no designId and empty svg, it has been removed!"),[];!n.designId&&!n.svg&&!["D","E"].includes(n.category)&&console.warn("layer in group at index:",t,"has no designId!")}return[this.newByLayerType(e,n)]}))};return h.layers.forEach((e=>{e.type===o.F5.image&&(e.parentLayerStyles=h.styles)})),h}newTmp(e,t){const n={type:"tmp",id:s.Z.generateRandomString(8),active:!0,shown:!1,locked:!1,moved:!1,moving:!1,dragging:!1,designId:"",jsonVer:i.Z,jsonVer_origin:i.Z,styles:{x:e.x,y:e.y,scale:e.scale||1,scaleX:e.scaleX||1,scaleY:e.scaleY||1,rotate:e.rotate||0,width:e.width,height:e.height,initWidth:e.width,initHeight:e.height,zindex:0,opacity:e.opacity||100,horizontalFlip:!1,verticalFlip:!1},layers:t};return n.layers.forEach((e=>e.type===o.F5.image&&(e.parentLayerStyles=n.styles))),n}newShape(e){var t,n,r,o,l,c,d,u;e=e||{};const{styles:g={}}=s.Z.deepCopy(e),p=P(x({type:"shape",id:s.Z.generateRandomString(8),active:!1,shown:!1,path:"",color:[],size:[],styleArray:[],svg:"",vSize:null!=(t=g.vSize)?t:[0,0],cSize:[0,0],pSize:[0,0],pDiff:[0,0],ratio:1,category:"",className:a.Z.classGenerator(),locked:!1,moved:!1,moving:!1,dragging:!1,designId:e.designId||""},"E"===e.category&&{filled:!1}),{jsonVer:i.Z,jsonVer_origin:i.Z,styles:{x:null!=(n=g.x)?n:0,y:null!=(r=g.y)?r:0,scale:null!=(o=g.scale)?o:1,scaleX:null!=(l=g.scaleX)?l:1,scaleY:null!=(c=g.scaleY)?c:1,rotate:null!=(d=g.rotate)?d:0,width:g.width||0,height:g.height||0,initWidth:g.initWidth||0,initHeight:g.initHeight||0,zindex:-1,opacity:null!=(u=g.opacity)?u:100,horizontalFlip:g.horizontalFlip||!1,verticalFlip:g.verticalFlip||!1,blendMode:g.blendMode||""}});return"A"===e.category&&g.scale&&g.initWidth&&g.initHeight&&(p.styles.width=g.initWidth*g.scale,p.styles.height=g.initHeight*g.scale),delete e.styles,Object.assign(p,e,{jsonVer:i.Z})}newTemplate(e){const t=e=>{switch(e.type){case"frame":{const t=e;t.clips[0].isFrameImg||(t.needFetch=!0)}break;case"group":{const n=e;n.layers.forEach((e=>t(e)))}}};if(void 0===e.layers)return e;for(const r in e.layers){if(e.layers[r]=this.newByLayerType(e.layers[r],e.jsonVer),e.layers[r].type===o.F5.shape){const t=e.layers[r];if(!t.designId&&!["D","E"].includes(t.category)&&!t.svg){e.layers.splice(+r,1),console.warn("layer:",r,"has no designId and empty svg, it has been removed!");continue}!t.designId&&!["D","E"].includes(t.category)&&console.warn("layer:",r,"has no designId!")}t(e.layers[r])}e.layers=m.Z.assignTemplateZidx(e.layers);const n=e.backgroundImage.config;return e.backgroundImage.config.styles.imgWidth=+e.backgroundImage.config.styles.imgWidth,e.backgroundImage.config.styles.imgHeight=+e.backgroundImage.config.styles.imgHeight,n.id=s.Z.generateRandomString(8),n.srcObj.type&&(n.srcObj.userId||n.srcObj.assetId||(e.backgroundImage.config.srcObj={type:"",userId:"",assetId:""})),e.backgroundImage.config=this.newImage(e.backgroundImage.config),e.jsonVer=i.Z,c.Z.resetScale(e,!0),e}newByLayerType(e,t){switch(this.paramsExaminer(e),e.type){case"shape":return this.newShape(e);case"text":return this.newText(e,t);case"image":return this.newImage(e);case"frame":return this.newFrame(e);case"group":return this.newGroup(e,e.layers,t);case"tmp":for(const n in e.layers)e.layers[n]=this.newByLayerType(e.layers[n],t);return console.error("Basically, the template should not have the layer type of tmp"),this.newTmp(e.styles,e.layers);default:throw new Error(`Unknown layer type: ${e.type}`)}}paramsExaminer(e){const{styles:t}=e,{opacity:n}=t;"number"!==typeof n&&(t.opacity=parseFloat(n))}}const _=new I;t["Z"]=_},75231:function(e,t,n){"use strict";n.d(t,{vA:function(){return w}});var r=n(89497),i=n(6400),o=n(70118),s=n(56556),a=n(60410),l=n(29651),c=n(40881),d=n(62013),u=n(35426),g=n(50543),p=n(32905),h=n(15820),m=n(52632),y=n(70488),f=n(44306);class b{get currSelectedInfo(){return r.Z.getters.getCurrSelectedInfo}get currSubSelectedInfo(){return r.Z.getters.getCurrSubSelectedInfo}get pageIndex(){return p.Z.currFocusPageIndex}get scaleRatio(){return r.Z.getters.getPageScaleRatio}get layerIndex(){return r.Z.getters.getCurrSelectedIndex}get getCurrLayer(){return this.getLayer(this.pageIndex,this.layerIndex)}get getPage(){return r.Z.getters.getPage}get getCurrPage(){return this.getPage(this.pageIndex)}get getLayer(){return r.Z.getters.getLayer}get getLayers(){return r.Z.getters.getLayers}get hasSelectedLayer(){return this.currSelectedInfo.layers.length>0}get getCurrOpacity(){const e=this.getCurrLayer,{subLayerIdx:t}=this;if(-1===this.currSelectedInfo.pageIndex)return 1;if(!e.type)return 0;switch(e.type){case"tmp":return Math.max(...this.getCurrLayer.layers.map((e=>e.styles.opacity)));case"group":return-1!==t?e.layers[t].styles.opacity:e.styles.opacity;case"frame":return-1!==t?e.clips[t].styles.opacity:e.styles.opacity;default:return this.currSelectedInfo.layers[0].styles.opacity}}get subLayerIdx(){const{type:e}=this.getCurrLayer;return"group"===e?this.getCurrLayer.layers.findIndex((e=>e.active)):"frame"===e?this.getCurrLayer.clips.findIndex((e=>e.active)):-1}get getCurrConfig(){return-1===this.subLayerIdx?this.getCurrLayer:(()=>"group"===this.getCurrLayer.type?this.getCurrLayer.layers[this.subLayerIdx]:this.getCurrLayer.clips[this.subLayerIdx])()}updatecCurrTypeLayerProp(e){const{getCurrLayer:t,pageIndex:n,layerIndex:r,subLayerIdx:i}=this;switch(t.type){case"group":try{this.updateSubLayerProps(n,r,i,e)}catch(o){console.log(o)}break;default:["tmp","frame"].includes(t.type)||this.updateLayerProps(n,r,e)}}updatecCurrTypeLayerStyles(e,t=this.layerIndex){const{getCurrLayer:n,pageIndex:r,subLayerIdx:i}=this;switch(n.type){case"group":try{this.updateSubLayerStyles(r,t,i,e)}catch(o){console.log(o)}break;default:["tmp","frame"].includes(n.type)||this.updateLayerStyles(r,t,e)}}addLayers(e,t){r.Z.commit("ADD_newLayers",{pageIndex:e,layers:[...t]}),s.Z.reassignZindex(e),o.Z.deselect(),r.Z.commit("SET_currActivePageIndex",e),o.Z.select(e,[r.Z.getters.getLayers(e).length-1]),(0,l.Y3)((()=>{m.Z.record()}))}addLayersToPos(e,t,n){r.Z.commit("ADD_layersToPos",{pageIndex:e,layers:t,pos:n})}deleteSelectedLayer(e=!0){r.Z.commit("DELETE_selectedLayer"),s.Z.reassignZindex(this.currSelectedInfo.pageIndex),y.Z.updateTextInfoTarget(),e&&(o.Z.reset(),m.Z.record())}deleteLayer(e,t){r.Z.commit("DELETE_layer",{pageIndex:e,layerIndex:t})}deleteLayerByAssetId(e){const t=r.Z.getters.getPages;t.forEach(((t,n)=>{for(let i=t.layers.length-1;i>=0;i--){const o=t.layers[i];o.srcObj&&o.srcObj.assetId===e&&r.Z.commit("DELETE_layer",{pageIndex:n,layerIndex:i})}})),f.Z.uploadDesign(f.Z.PutAssetDesignType.UPDATE_BOTH)}deleteSubLayer(e,t,n){r.Z.commit("DELETE_subLayer",{pageIndex:e,primaryIndex:t,subIndex:n})}addSubLayer(e,t,n,i){r.Z.commit("ADD_subLayer",{layerInfo:{pageIndex:e,layerIndex:t,subLayerIdx:n},config:i})}replaceLayer(e,t,n){r.Z.commit("REPLACE_layer",{pageIndex:e,layerIndex:t,layer:n})}getSelectedLayer(){return r.Z.getters.getLayer(r.Z.getters.getCurrSelectedPageIndex,r.Z.getters.getCurrSelectedIndex)}updateLayersOrder(e){r.Z.commit("UPDATE_layerOrders",{pageIndex:e})}updateLayerStyles(e,t,n,i=-1){-1===i||"undefined"===typeof i?r.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:n}):this.updateSubLayerStyles(e,t,i,n)}updateLayerProps(e,t,n,i=-1){-1===i||"undefined"===typeof i?r.Z.commit("UPDATE_layerProps",{pageIndex:e,layerIndex:t,props:n}):this.updateSubLayerProps(e,t,i,n)}updateAllGroupStyles(e){r.Z.commit("UPDATE_groupLayerStyles",{styles:e})}updateAllGroupProps(e){r.Z.commit("UPDATE_groupLayerProps",{props:e})}updateSubLayerStyles(e,t,n,i){r.Z.commit("SET_subLayerStyles",{pageIndex:e,primaryLayerIndex:t,subLayerIndex:n,styles:i})}updateSubLayerProps(e,t,n,i){r.Z.commit("UPDATE_subLayerProps",{pageIndex:e,layerIndex:t,targetIndex:n,props:i})}setCurrSubSelectedInfo(e,t){r.Z.commit("SET_currSubSelectedInfo",{index:e,type:t})}updateSelectedLayerProps(e,t,n){r.Z.commit("UPDATE_selectedLayerProps",{pageIndex:e,layerIndex:t,props:n})}updateSpecLayerData(e){const{pageIndex:t,layerIndex:n,subLayerIndex:i,styles:o,props:s,type:a}=e;r.Z.commit("UPDATE_specLayerData",{pageIndex:t,layerIndex:n,subLayerIndex:i,props:s,styles:o,type:a})}getLayerPageIntersectRatio(e,t){const n=r.Z.getters.getPage(e),i={x:0,y:0,width:n.width,height:n.height,scale:0,rotate:0},o=u.ZP.generatePolygon(i),s=u.ZP.generatePolygon(t.styles),a=u.ZP.getIntersectArea(o,s);return a/s.area()}resizeLayerConfig(e,t,n=!1,i=.8){var o,s,l,g;const{width:p,height:m}=u.ZP.getBounding(t.styles),y=p/m,f=r.Z.getters.getPageSize(e),b=f.width/f.height,v=y>b?f.width*i:f.height*i*y,w=y>b?f.width*i/y:f.height*i,N=v/p,S=t.styles.width*N,x=t.styles.height*N,P=t.styles.scale*N,I={width:S,height:x,scale:P};if(n){const e=f.width/2-v/2,n=f.height/2-w/2;Object.assign(I,u.ZP.getRotatedPoint(-t.styles.rotate,{x:f.width/2,y:f.height/2},{x:e,y:n}))}switch(t.type){case"image":{const{width:e,height:n,imgWidth:r,imgHeight:i,imgX:o,imgY:s}=t.styles;Object.assign(t.styles,I,{initWidth:e*N,initHeight:n*N,imgWidth:r*N,imgHeight:i*N,imgX:o*N,imgY:s*N});break}case"text":-1!==t.widthLimit&&(t.widthLimit=t.styles.writingMode.includes("vertical")?x:S),Object.assign(t.styles,I);break;case"frame":if(d.Z.isImageFrame(t)){let{imgWidth:e,imgHeight:n,imgX:r,imgY:i}=t.clips[0].styles;const o=t.styles.width*N,s=t.styles.height*N;e*=N,n*=N,i*=N,r*=N,Object.assign(t.styles,I,{initWidth:o,initHeight:s}),Object.assign(t.clips[0].styles,{width:o,height:s,imgWidth:e,imgHeight:n,imgX:r,imgY:i})}else Object.assign(t.styles,I);break;case void 0:case"shape":if("D"===t.category){const e=h.Z.getLineQuadrant(null!=(o=t.point)?o:[]),{width:n,height:r}=h.Z.lineDimension(null!=(s=t.point)?s:[]),{size:i}=t;if(!i)break;const l=i[0],c=(0,a.round)(l*N,2),{point:d,realWidth:u,realHeight:g}=h.Z.computePointForDimensions(e,c,n*N,r*N);t.point=d,I.width=u,I.height=g,I.scale=t.styles.scale,Object.assign(t.styles,{initWidth:I.width,initHeight:I.height}),t.size=[c]}if("E"===t.category){const{size:e}=t;if(!e)break;const n=e[0],r=(0,a.round)(n*N,2);I.scale=t.styles.scale;const i=c.Z.getCorRadValue([S,x],c.Z.getCorRadPercentage(t.vSize,e,null!=(l=t.shapeType)?l:""),null!=(g=t.shapeType)?g:"");t.vSize=[S,x],t.size=[r,i]}Object.assign(t.styles,I);break;default:Object.assign(t.styles,I)}if(n){const{x:e,y:n}=u.ZP.getCenter(t.styles);e!==f.width/2&&n!==f.height/2&&(t.styles.x+=f.width/2-e,t.styles.y+=f.height/2-n)}return t}isOutOfBoundary(e,t){const n=r.Z.getters.getPage(null!=e?e:this.currSelectedInfo.pageIndex),i=null!=t?t:this.getSelectedLayer();return i.styles.x>n.width||i.styles.y>n.height||i.styles.x+i.styles.width<0||i.styles.y+i.styles.height<0}isClickOutOfPagePart(e,t,n){let{x:r,y:i}=g.Z.getMouseRelPoint(e,t);const o=this.getPage(this.currSelectedInfo.pageIndex),s=o.width,a=o.height;return r=r*(100/this.scaleRatio)+n.styles.x,i=i*(100/this.scaleRatio)+n.styles.y,r<0||i<0||r>s||i>a}resetLayerWidth(e,t){const n=this.getLayer(e,t);r.Z.commit("UPDATE_layerStyles",{pageIndex:e,layerIndex:t,styles:{initWidth:n.styles.width}})}getGroupLayerTypes(){const{layers:e,types:t}=this.currSelectedInfo;return 1===e.length&&t.has("group")?o.Z.calcType(e[0].layers):new Set}updateImageLayerUrls(e,t){r.Z.commit("UPDATE_imageLayerUrl",{id:e,flag:t})}getUpmostNonTextLayerIndex(e){for(let t=e.length-1;t>=0;t--){const n=e[t];if("text"!==n.type){if("group"===n.type){const e=n,t=e.layers.map((e=>e.type));if(t.includes("text"))continue}return t}}return-1}getLayerIndexById(e,t,n){return(n?n[e].layers:this.getLayers(e)).findIndex((e=>e.id===t))}getLayerIndexByIdAsSubLayer(e,t,n){const r=n?n[e].layers:this.getLayers(e);for(const[i,o]of r.entries()){if("tmp"!==o.type&&"group"!==o.type)continue;const e=o.layers.findIndex((e=>e.id===t));if(-1!==e)return{layerIndex:i,subLayerIdx:e}}return{layerIndex:-1,subLayerIdx:-1}}getSubLayerIndexById(e,t,n,r){const o=r?r[e].layers[t]:this.getLayer(e,t);return[i.F5.group,i.F5.tmp].includes(o.type)?o.layers.findIndex((e=>e.id===n)):o.type===i.F5.frame?o.clips.findIndex((e=>e.id===n)):-1}getLayerInfoById(e,t,n="",r){const o=e?p.Z.getPageIndexById(e,r):this.pageIndex;let s,a;if(n)s=this.getLayerIndexById(o,n,r),-1===s&&(s=this.getLayerIndexById(o,t,r));else{const e=this.getLayerIndexByIdAsSubLayer(o,t,r);if(-1!==e.layerIndex)return{pageIndex:o,layerIndex:e.layerIndex,subLayerIdx:e.subLayerIdx};s=this.getLayerIndexById(o,t,r)}return-1===s?(s=(r?r[o]:p.Z.getPage(o)).layers.findIndex((e=>[i.F5.group,i.F5.tmp].includes(e.type)&&e.layers.find((e=>e.id===t)))),a=this.getSubLayerIndexById(o,s,t,r)):a=this.getSubLayerIndexById(o,s,n,r),{pageIndex:o,layerIndex:s,subLayerIdx:a}}getObjectInsertionLayerIndex(e,t){const n=this.getUpmostNonTextLayerIndex(e);let r=n;for(let i=n+1;i<e.length;i++){const n=e[i];if("group"===n.type){const e=n,t=e.layers.map((e=>e.type));if(!t.includes("text"))continue}else if("text"!==n.type)continue;const o=this.calculateIntersectAreaRatio(t,n);o>.8&&i>r&&(r=i)}return r}calculateIntersectAreaRatio(e,t){const n=u.ZP.generatePolygon(e.styles),r=u.ZP.generatePolygon(t.styles),i=n.area(),o=u.ZP.getIntersectArea(n,r);return o/i}updateLayerOpacity(e){e>100&&(e=100);const{getCurrLayer:t,subLayerIdx:n,layerIndex:i}=this;-1===n?1===this.currSelectedInfo.layers.length?this.updateLayerStyles(this.currSelectedInfo.pageIndex,this.currSelectedInfo.index,{opacity:e}):r.Z.commit("UPDATE_selectedLayersStyles",{styles:{opacity:e}}):-1!==n?("group"===t.type&&this.updateSubLayerStyles(this.pageIndex,i,n,{opacity:e}),"frame"===t.type&&d.Z.updateFrameLayerStyles(this.pageIndex,i,n,{opacity:e})):this.updateLayerStyles(this.currSelectedInfo.pageIndex,this.currSelectedInfo.index,{opacity:e})}isOfLayerType(e,t,n=-1,r=!1){return e.type===t||!!["group","tmp"].includes(e.type)&&(-1!==n?e.layers[n].type===t:r)}setAutoResizeNeededForLayersInPages(e,t){for(const n of e)this.setAutoResizeNeededForLayersInPage(n,t)}setAutoResizeNeededForLayersInPage(e,t){const n=e.layers;for(const r of n)this.setAutoResizeNeededForLayer(r,t)}setAutoResizeNeededForLayer(e,t){switch(e.type){case i.F5.text:this.setAutoResizeNeededForTextLayer(e,t);break;case i.F5.group:case i.F5.tmp:for(const n of e.layers)this.setAutoResizeNeededForLayer(n,t);break}}setAutoResizeNeededForTextLayer(e,t){e.isAutoResizeNeeded=t}}const v=new b;t["ZP"]=v;const w=function(e,t){const{layerInfo:n,config:r}=t,{pageIndex:o,layerIndex:s,subLayerIdx:a}=n,l=e.pages[o].config.layers[s];l.type!==i.F5.group&&l.type!==i.F5.tmp||"undefined"===typeof a||-1===a||l.layers.splice(a,0,r)}},6295:function(e,t,n){"use strict";n.d(t,{G:function(){return y}});var r=n(23931),i=n(20083),o=n(89456),s=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,g=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))d.call(t,n)&&g(e,n,t[n]);if(c)for(var n of c(t))u.call(t,n)&&g(e,n,t[n]);return e},h=(e,t)=>a(e,l(t)),m=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const y=["rainbow","rainbow-dark","circle","cloud","text-book","penguin","planet","heart","heart-warm","heart-custom","gummybear","leaf","butter-flower","flower-frame","flower-frame-custom","vintage-flower","vintage-flower-custom","cat-paw","bread","bear","bear-custom","cat","cat-custom","rabbit","rabbit-custom","dog","dog-custom","star","baby","paper-tap","paper-tap-point","paper-tap-stripe","paper-tap-grid","triangle-flag","triangle-flag-custom","rectangle-flag","rectangle-flag-custom"];class f{getEffects(){const e=i.Z.toOptions;return[{key:"rainbow",label:r.Z.global.tc("NN0816"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"rainbow-dark",label:r.Z.global.tc("NN0817"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"circle",label:r.Z.global.tc("NN0820"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"heart",label:r.Z.global.tc("NN0847"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"heart-warm",label:r.Z.global.tc("NN0848"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"heart-custom",label:r.Z.global.tc("NN0849"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"cloud",label:r.Z.global.tc("NN0818"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"text-book",label:r.Z.global.tc("NN0819"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"penguin",label:r.Z.global.tc("NN0821"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"planet",label:r.Z.global.tc("NN0822"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"leaf",label:r.Z.global.tc("NN0851"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"gummybear",label:r.Z.global.tc("NN0850"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"butter-flower",label:r.Z.global.tc("NN0852"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"flower-frame",label:r.Z.global.tc("NN0853"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"flower-frame-custom",label:r.Z.global.tc("NN0854"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"vintage-flower",label:r.Z.global.tc("NN0855"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"vintage-flower-custom",label:r.Z.global.tc("NN0856"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"cat-paw",label:r.Z.global.tc("NN0864"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"bread",label:r.Z.global.tc("NN0865"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"bear",label:r.Z.global.tc("NN0874"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"bear-custom",label:r.Z.global.tc("NN0875"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"cat",label:r.Z.global.tc("NN0876"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"cat-custom",label:r.Z.global.tc("NN0877"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"rabbit",label:r.Z.global.tc("NN0878"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"rabbit-custom",label:r.Z.global.tc("NN0879"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"dog",label:r.Z.global.tc("NN0880"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"dog-custom",label:r.Z.global.tc("NN0881"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"star",label:r.Z.global.tc("NN0882"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"baby",label:r.Z.global.tc("NN0883"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"paper-tap",label:r.Z.global.tc("NN0895"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"paper-tap-point",label:r.Z.global.tc("NN0896"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"paper-tap-stripe",label:r.Z.global.tc("NN0897"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"paper-tap-grid",label:r.Z.global.tc("NN0898"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"triangle-flag",label:r.Z.global.tc("NN0900"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"triangle-flag-custom",label:r.Z.global.tc("NN0901"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])},{key:"rectangle-flag",label:r.Z.global.tc("NN0902"),plan:1,options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight"])},{key:"rectangle-flag-custom",label:r.Z.global.tc("NN0903"),options:e(["xOffset200","yOffset200","size","opacity","fontSpacing","lineHeight","color"])}]}getLetterBgSetting(e,t,n,r){let[i,o]=[e.name,e.color];switch(e.name){case"rainbow":i="rainbow-circle",o=["#FFA19B","#FFC89F","#F7DE97","#C5DFAE","#B5D0F9","#EDD4F6"][t%6];break;case"rainbow-dark":i="rainbow-circle",o=["#D0B0B1","#DCC9BF","#EBDEBB","#BECBBC","#B0BCC5","#D1CADF"][t%6];break;case"circle":i="rainbow-circle";break;case"heart":i="solid-heart",o=["#BFE29A","#ABDAED","#FFBDC5","#FFE299","#CDBFDD","#9BBCDD","#F2C3AF"][t%7];break;case"heart-warm":i="solid-heart",o=["#9B5642","#E48479","#F7C3B0","#D6805B","#D45847","#FAAE9F","#F7C3B0"][t%7];break;case"heart-custom":i="solid-heart";break;case"flower-frame":i="flower-frame"+t%5,o=["#F4D0E0","#BDDBD0","#D9CCED","#C7DAEF","#F4CAC1"][t%5];break;case"flower-frame-custom":i="flower-frame"+t%5;break;case"vintage-flower":o=["#E8A98E","#EE8854","#F3B132","#94A084","#B17357"][t%5];break;case"bear":case"rabbit":case"dog":case"star":i+=t%3;break;case"cloud":case"triangle-flag":i+=t%4;break;case"penguin":case"planet":case"gummybear":case"leaf":case"butter-flower":case"cat-paw":case"bread":case"cat":case"baby":case"rectangle-flag":i+=t%5;break;case"paper-tap":case"paper-tap-point":case"paper-tap-stripe":case"paper-tap-grid":i+=n?"-head":r?"-tail":"0";break;default:}return{href:i,color:o}}getDeafultOptions(){const e={xOffset200:0,yOffset200:0,size:100,opacity:100,fixedWidth:!0,color:""};return{rainbow:e,"rainbow-dark":e,circle:h(p({},e),{color:"#EEDFD1"}),cloud:h(p({},e),{size:180,fixedWidth:!1,
//!
color:"#D3E2E3"}),"text-book":h(p({},e),{size:125,color:"#93BAA6"}),penguin:h(p({},e),{yOffset200:-1,size:200}),planet:h(p({},e),{size:135}),heart:h(p({},e),{yOffset200:-3,size:135}),"heart-warm":h(p({},e),{yOffset200:-3,size:135}),"heart-custom":h(p({},e),{yOffset200:-3,size:135,color:"#FFB6C4"}),gummybear:h(p({},e),{yOffset200:-15,size:150}),leaf:h(p({},e),{yOffset200:-7,size:165}),"butter-flower":h(p({},e),{size:140,color:"#F4E4BD"}),"flower-frame":h(p({},e),{size:140}),"flower-frame-custom":h(p({},e),{size:140,color:"#BDDBD0"}),"vintage-flower":h(p({},e),{yOffset200:-3,size:160}),"vintage-flower-custom":h(p({},e),{yOffset200:-3,size:130,color:"#E8A98E"}),"cat-paw":h(p({},e),{size:135}),bread:h(p({},e),{size:155}),bear:h(p({},e),{yOffset200:-4,size:150}),"bear-custom":h(p({},e),{yOffset200:-4,size:150,color:"#D2B29A"}),cat:h(p({},e),{yOffset200:-8,size:155}),"cat-custom":h(p({},e),{yOffset200:-8,size:155,color:"#EADAD0"}),rabbit:h(p({},e),{yOffset200:-15,size:150}),"rabbit-custom":h(p({},e),{yOffset200:-15,size:150,color:"#F2D7D1"}),dog:h(p({},e),{size:160}),"dog-custom":h(p({},e),{size:160,color:"#CCA08F"}),star:h(p({},e),{size:170,color:"#FFD95F"}),baby:h(p({},e),{yOffset200:-3,size:160}),"paper-tap":h(p({},e),{size:150,color:"#F9DDC5"}),"paper-tap-point":h(p({},e),{size:150,color:"#FFCFCF"}),"paper-tap-stripe":h(p({},e),{size:150,color:"#C7DDD8"}),"paper-tap-grid":h(p({},e),{size:150,color:"#D3DDAC"}),"triangle-flag":h(p({},e),{yOffset200:60,size:225}),"triangle-flag-custom":h(p({},e),{yOffset200:50,size:200,color:"#99D3D3"}),"rectangle-flag":h(p({},e),{yOffset200:20,size:155}),"rectangle-flag-custom":h(p({},e),{yOffset200:20,size:155,color:"#FFBBD0"})}}setExtraDefaultAttrs(e){return m(this,null,(function*(){var t;const n={rainbow:{lineHeight:1.78,fontSpacing:585},"rainbow-dark":{lineHeight:1.78,fontSpacing:585},circle:{lineHeight:1.78,fontSpacing:585},cloud:{lineHeight:1.54,fontSpacing:186},"text-book":{lineHeight:1.96,fontSpacing:665},penguin:{lineHeight:1.96,fontSpacing:800},planet:{lineHeight:1.96,fontSpacing:410},heart:{lineHeight:1.96,fontSpacing:505},"heart-warm":{lineHeight:1.96,fontSpacing:505},"heart-custom":{lineHeight:1.96,fontSpacing:505},gummybear:{lineHeight:1.96,fontSpacing:800},leaf:{lineHeight:1.96,fontSpacing:800},"butter-flower":{lineHeight:1.96,fontSpacing:900},"flower-frame":{lineHeight:1.96,fontSpacing:950},"flower-frame-custom":{lineHeight:1.96,fontSpacing:950},"vintage-flower":{lineHeight:1.96,fontSpacing:1300},"vintage-flower-custom":{lineHeight:1.96,fontSpacing:950},"cat-paw":{lineHeight:1.96,fontSpacing:950},bread:{lineHeight:1.96,fontSpacing:1200},bear:{lineHeight:1.96,fontSpacing:1300},"bear-custom":{lineHeight:1.96,fontSpacing:1300},cat:{lineHeight:1.96,fontSpacing:1300},"cat-custom":{lineHeight:1.96,fontSpacing:1300},rabbit:{lineHeight:1.96,fontSpacing:1200},"rabbit-custom":{lineHeight:1.96,fontSpacing:1200},dog:{lineHeight:1.96,fontSpacing:1350},"dog-custom":{lineHeight:1.96,fontSpacing:1350},star:{lineHeight:1.96,fontSpacing:1350},baby:{lineHeight:1.96,fontSpacing:1300},"paper-tap":{lineHeight:2.4,fontSpacing:350},"paper-tap-point":{lineHeight:2.4,fontSpacing:430},"paper-tap-stripe":{lineHeight:2,fontSpacing:85},"paper-tap-grid":{lineHeight:2.4,fontSpacing:240},"triangle-flag":{lineHeight:1.96,fontSpacing:2e3},"triangle-flag-custom":{lineHeight:1.96,fontSpacing:1650},"rectangle-flag":{lineHeight:1.96,fontSpacing:1010},"rectangle-flag-custom":{lineHeight:1.96,fontSpacing:1010}};for(const[r,i]of Object.entries(null!=(t=n[e])?t:{}))yield o.Z.setParagraphProp(r,i)}))}fixedHeadTail(e){return/(paper-tap)/.test(e)}isColorChangeable(e){return/(cloud|rainbow-circle|solid-heart|text-book|butter-flower|flower-frame|vintage-flower|-custom|star|paper-tap)/.test(e)}bgNeedRotate(e){return/(paper-tap)/.test(e)}}t["Z"]=new f},33466:function(e,t,n){"use strict";var r=n(60410),i=n.n(r),o=Object.defineProperty,s=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t,n)=>(s(e,"symbol"!==typeof t?t+"":t,n),n);class l{constructor(){a(this,"defaultValue",{textEffectSetting:{tab:"shadow"}})}reset(e){localStorage.setItem(e,JSON.stringify(this.defaultValue[e]))}set(e,t,n){let r,o=localStorage.getItem(e);o||(this.reset(e),o=localStorage.getItem(e));try{r=JSON.parse(o)}catch(s){this.reset(e),r=this.defaultValue[e]}i().set(r,t,n),localStorage.setItem(e,JSON.stringify(r))}get(e,t){const n=localStorage.getItem(e);if(!n||"string"!==typeof n)return this.reset(e),i().get(this.defaultValue[e],t);try{const e=JSON.parse(n);return i().get(e,t)}catch(r){return this.reset(e),i().get(this.defaultValue[e],t)}}update(e,t,n){const r=this.get(e,t),i=n(r);return this.set(e,t,i),i}}t["Z"]=new l},37658:function(e,t,n){"use strict";var r=n(23931),i=Object.defineProperty,o=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s=(e,t,n)=>(o(e,"symbol"!==typeof t?t+"":t,n),n);class a{constructor(){s(this,"SUPPORTED_LOCALES"),s(this,"localeMap"),s(this,"defaultLocale"),this.SUPPORTED_LOCALES=[{abbreviation:"us",code:"us",base:"",name:"English"},{abbreviation:"tw",code:"tw",base:"/tw",name:"繁體中文"},{abbreviation:"jp",code:"jp",base:"/jp",name:"日本語"}],this.localeMap={tw:"tw",us:"us",jp:"jp"},this.defaultLocale="us"}isDefaultLocale(){return r.Z.global.locale===this.defaultLocale}currLocale(){return r.Z.global.locale}getLocaleRegex(){let e="|";return this.SUPPORTED_LOCALES.forEach(((t,n)=>{e=`${e}${t.abbreviation}${n!==this.SUPPORTED_LOCALES.length-1?"|":""}`})),`(${e})`}setLangAttr(e){document.documentElement.lang=e}getLocaleInfo(){return this.SUPPORTED_LOCALES.find((e=>e.code===r.Z.global.locale))}getBrowserLang(){return navigator.language.includes("zh")?"tw":navigator.language.includes("ja")?"jp":"us"}}t["Z"]=new a},53074:function(e,t,n){"use strict";var r=n(78871),i=n(44306),o=Object.defineProperty,s=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t,n)=>(s(e,"symbol"!==typeof t?t+"":t,n),n),l=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class c{constructor(){a(this,"logBuffer",""),a(this,"isUploadingLog",!1)}uploadLog(){return l(this,null,(function*(){if(!i.Z.isLogin)return;const e=this.getLog();this.isUploadingLog=!0;try{yield i.Z.uploadLog(e),this.clearLog(),this.appendBuffer(),this.isUploadingLog=!1}catch(t){console.log("Error happened while uploading log"),this.setLogForError(t),this.isUploadingLog=!1}}))}getLog(){var e;return null!=(e=localStorage.getItem("log"))?e:""}appendBuffer(){localStorage.setItem("log",`${this.getLog()}\n${this.logBuffer}`),this.logBuffer=""}setLog(e,t=!0){t&&(e=e.substring(0,500));const n=`[${r.Z.generateTimeStamp()}] ${e}`;try{if(this.isUploadingLog)return void(this.logBuffer=`${this.logBuffer}\n${n}`);this.logBuffer&&this.appendBuffer(),localStorage.setItem("log",`${this.getLog()}\n${n}`)}catch(o){if(o.name.includes("QuotaExceededError")){if(!i.Z.isLogin)return void this.clearLog();this.uploadLog();try{this.setLog(`##Log uploaded because of QuotaExceededError\n${n}`)}catch(s){console.log("Error happened again when setting log, discard the log"),console.error(s)}}else this.setLogForError(o)}}setLogAndConsoleLog(...e){console.log(...e),e=e.map((e=>"string"===typeof e?e:JSON.stringify(e))).map((e=>e.substring(0,500))),this.setLog(e.join(" "),!1)}setLogForError(e){console.error(e),this.setLog(`Error: ${e.name}, ${e.message}, ${e.cause}, ${e.stack}`,!1)}clearLog(){localStorage.setItem("log","")}consoleLog(){console.log(this.getLog())}consoleLogBuffer(){console.log(this.logBuffer)}}const d=new c;window.consoleLog=d.consoleLog.bind(d),window.consoleLogBuffer=d.consoleLogBuffer.bind(d),t["Z"]=d},3665:function(e,t,n){"use strict";var r=n(47147);class i{onFacebookClicked(e){let t;t=e?JSON.stringify({redirect:e.replaceAll("&","%26"),platform:"fb_vivipic"}):JSON.stringify({platform:"fb_vivipic"});const n=window.location.href.split("?")[0];window.location.href=`https://www.facebook.com/v11.0/dialog/oauth?scope=email,public_profile&response_type=code%20granted_scopes&state=${t}&redirect_uri=${n}&client_id=882063489184334`}onGoogleClicked(e){let t;t=e?JSON.stringify({redirect:e.replaceAll("&","%26"),platform:"google_vivipic"}):JSON.stringify({platform:"google_vivipic"});const n=window.location.href.split("?")[0];window.location.href=`https://accounts.google.com/o/oauth2/v2/auth?scope=https://www.googleapis.com/auth/userinfo.profile+https://www.googleapis.com/auth/userinfo.email&include_granted_scopes=true&response_type=code&prompt=select_account&state=${t}&redirect_uri=${n}&client_id=466177459396-dsb6mbvvea942on6miaqk8lerub0domq.apps.googleusercontent.com`}logout(){r.Z.updateUserInfo({userId:""}),localStorage.setItem("token",""),window.location.href="/"}}t["Z"]=new i},65144:function(e,t,n){"use strict";n.d(t,{Z:function(){return D},h:function(){return z}});var r=n(89497),i=n(70118),o=n(75231),s=n(35426);class a{get currSelectedInfo(){return r.Z.getters.getCurrSelectedInfo}get currPage(){return r.Z.getters.getPage(this.currSelectedInfo.pageIndex)}getTmpAlignPos(e,t,n){const r=s.ZP.getBounding(t.styles),i=t.styles.width,o=t.styles.height,a=0===t.styles.rotate?{x:0,y:0}:{x:t.styles.x-r.x,y:t.styles.y-r.y};switch(n){case"left":return{x:0+a.x};case"centerHr":return{x:e.width/2-i/2};case"right":return{x:e.width-r.width+a.x};case"top":return{y:0+a.y};case"centerVr":return{y:e.height/2-o/2};case"bottom":return{y:e.height-r.height+a.y};default:return{}}}getPageAlignPos(e){const t=this.currSelectedInfo.layers[0],n=s.ZP.getBounding(t.styles),r=t.styles.width,i=t.styles.height,o=this.currPage.width,a=this.currPage.height,l=0===t.styles.rotate?{x:0,y:0}:{x:t.styles.x-n.x,y:t.styles.y-n.y};switch(e){case"left":return{x:0+l.x};case"centerHr":return{x:o/2-r/2};case"right":return{x:o-n.width+l.x};case"top":return{y:0+l.y};case"centerVr":return{y:a/2-i/2};case"bottom":return{y:a-n.height+l.y};default:return{}}}align(e){const{layers:t,pageIndex:n,index:r}=this.currSelectedInfo;if(1===t.length){const t=this.getPageAlignPos(e);o.ZP.updateLayerStyles(n,r,t)}else{let t=o.ZP.getSelectedLayer().styles;const n=t.rotate;if(0!==n&&(i.Z.reselect(),t=o.ZP.getSelectedLayer().styles),this.currSelectedInfo.layers.forEach((n=>{Object.assign(n.styles,this.getTmpAlignPos(t,n,e))})),i.Z.reselect(),0!==n){o.ZP.updateLayerStyles(this.currSelectedInfo.pageIndex,this.currSelectedInfo.index,{rotate:-n});const e=s.ZP.getCenter(o.ZP.getSelectedLayer().styles);i.Z.reselect();const r=s.ZP.getCenter(o.ZP.getSelectedLayer().styles),a=s.ZP.getRotatedPoint(n,e,r);console.log(e,r,a);const l={x:a.x-r.x,y:a.y-r.y};t=o.ZP.getSelectedLayer().styles,o.ZP.updateLayerStyles(this.currSelectedInfo.pageIndex,this.currSelectedInfo.index,{x:t.x+l.x,y:t.y+l.y,rotate:n})}}}distribueHr(){let e=o.ZP.getSelectedLayer().styles;const t=e.rotate;0!==t&&(i.Z.reselect(),e=o.ZP.getSelectedLayer().styles);const n=e.width,r=this.currSelectedInfo.layers.reduce(((e,t)=>e+t.styles.width),0),s=(n-r)/(this.currSelectedInfo.layers.length-1);this.currSelectedInfo.layers.sort(((e,t)=>e.styles.x-t.styles.x));for(let i=0;i<this.currSelectedInfo.layers.length;i++)Object.assign(this.currSelectedInfo.layers[i].styles,{x:0===i?0:this.currSelectedInfo.layers[i-1].styles.x+this.currSelectedInfo.layers[i-1].styles.width+s});this.currSelectedInfo.layers.sort(((e,t)=>e.styles.zindex-t.styles.zindex))}distribueVr(){let e=o.ZP.getSelectedLayer().styles;const t=e.rotate;0!==t&&(i.Z.reselect(),e=o.ZP.getSelectedLayer().styles);const n=e.height,r=this.currSelectedInfo.layers.reduce(((e,t)=>e+t.styles.height),0),s=(n-r)/(this.currSelectedInfo.layers.length-1);this.currSelectedInfo.layers.sort(((e,t)=>e.styles.y-t.styles.y));for(let i=0;i<this.currSelectedInfo.layers.length;i++)Object.assign(this.currSelectedInfo.layers[i].styles,{y:0===i?0:this.currSelectedInfo.layers[i-1].styles.y+this.currSelectedInfo.layers[i-1].styles.height+s});this.currSelectedInfo.layers.sort(((e,t)=>e.styles.zindex-t.styles.zindex))}}const l=new a;var c=l,d=n(77804),u=n(95918),g=n(40881),p=n(15820),h=n(62013);class m{isGroup(e){return e.types.has("group")&&1===e.layers.length}checkKey(e){return{horizontalFlip:"horizontalFlip"in e,verticalFlip:"verticalFlip"in e}}applyFlip(e,t,n,r){var i;if(p.Z.isLine(n)){const{horizontalFlip:o,verticalFlip:s}=this.checkKey(r),a=p.Z.flipLine(null!=(i=n.point)?i:[],o,s);g.Z.updateShapeLinePoint(e,t,a)}else"text"===n.type&&(o.ZP.updateLayerProps(e,t,{isFlipping:!0}),window.setTimeout((()=>{o.ZP.updateLayerProps(e,t,{isFlipping:!1})}),300)),o.ZP.updateLayerStyles(e,t,r)}horizontalFlip(){const e=r.Z.getters.getCurrSelectedInfo,t=r.Z.getters.getLayer(e.pageIndex,e.index),n=()=>{this.applyFlip(e.pageIndex,e.index,t,{horizontalFlip:!t.styles.horizontalFlip})};switch(t.type){case"frame":if(-1!==o.ZP.subLayerIdx||h.Z.isImageFrame(o.ZP.getCurrLayer)){const n=Math.max(o.ZP.subLayerIdx,0),r=!t.clips[n].styles.horizontalFlip,{imgX:i,imgY:s}=this.imgFlipMapper(t.clips[n],"h");h.Z.updateFrameLayerStyles(e.pageIndex,e.index,n,{horizontalFlip:r,imgX:i,imgY:s})}else n();break;case"group":if(-1!==o.ZP.subLayerIdx){const n=!t.layers[o.ZP.subLayerIdx].styles.horizontalFlip,{imgX:r,imgY:i}=this.imgFlipMapper(t.layers[o.ZP.subLayerIdx],"h");o.ZP.updateLayerStyles(e.pageIndex,e.index,{horizontalFlip:n,imgX:r,imgY:i},o.ZP.subLayerIdx)}break;case"image":{const n=!t.styles.horizontalFlip,{imgX:r,imgY:i}=this.imgFlipMapper(t,"h");o.ZP.updateLayerStyles(e.pageIndex,e.index,{horizontalFlip:n,imgX:r,imgY:i});break}default:n()}}imgFlipMapper(e,t){const{styles:{imgHeight:n,imgWidth:r,width:i,height:o}}=e;let{styles:{imgX:s,imgY:a}}=e;return"h"===t?s=Math.abs(s)+i-r:a=Math.abs(a)+o-n,{imgX:s,imgY:a}}verticalFlip(){const e=r.Z.getters.getCurrSelectedInfo,t=r.Z.getters.getLayer(e.pageIndex,e.index),n=()=>{this.applyFlip(e.pageIndex,e.index,t,{verticalFlip:!t.styles.verticalFlip})};switch(t.type){case"frame":if(-1!==o.ZP.subLayerIdx||h.Z.isImageFrame(o.ZP.getCurrLayer)){const n=Math.max(o.ZP.subLayerIdx,0),r=!t.clips[n].styles.verticalFlip,{imgX:i,imgY:s}=this.imgFlipMapper(t.clips[n],"v");h.Z.updateFrameLayerStyles(e.pageIndex,e.index,n,{verticalFlip:r,imgX:i,imgY:s})}else n();break;case"group":if(-1!==o.ZP.subLayerIdx){const n=!t.layers[o.ZP.subLayerIdx].styles.verticalFlip,{imgX:r,imgY:i}=this.imgFlipMapper(t.layers[o.ZP.subLayerIdx],"v");o.ZP.updateLayerStyles(e.pageIndex,e.index,{verticalFlip:n,imgX:r,imgY:i},o.ZP.subLayerIdx)}break;case"image":{const n=!t.styles.verticalFlip,{imgX:r,imgY:i}=this.imgFlipMapper(t,"v");o.ZP.updateLayerStyles(e.pageIndex,e.index,{verticalFlip:n,imgX:r,imgY:i});break}default:n()}}}const y=new m;var f=y,b=n(52632);class v{bringToFront(){r.Z.commit("UPDATE_layerOrder",{type:"front"}),b.Z.record()}bringForward(){r.Z.commit("UPDATE_layerOrder",{type:"forward"}),b.Z.record()}bringBackward(){r.Z.commit("UPDATE_layerOrder",{type:"backward"}),b.Z.record()}bringToBack(){r.Z.commit("UPDATE_layerOrder",{type:"back"}),b.Z.record()}}const w=new v;var N=w,S=n(53556);const x=["left-align","center-horizontally","right-align","top-align","center-vertically","bottom-align"],P=["distribute-horizontally","distribute-vertically"],I=["layers-alt","copy","unlock","trash"],_=["layers-forward","layers-front","layers-backward","layers-back"],k=["bold","underline","italic","font-vertical"],Z=["text-align-left","text-align-center","text-align-right","text-align-justify"],C=[...Array(12).keys()].slice(1).map((e=>`line-template-${e}`)),z={opacity:{min:0,max:100},fontSize:{min:1,max:9999},lineHeight:{min:.5,max:2.5},letterSpacing:{min:-200,max:2e3},lineWidth:{min:1,max:100},cornerRadius:{min:0,max:100}},T={tw:"zh-TW",us:"en-US",jp:"ja-JP"};class L{mappingIconSet(e){switch(e){case"align":return x;case"distribute":return P;case"action":return I;case"order":return _;case"font":return k;case"font-align":return Z;case"lineTemplate":return C;default:return[]}}mappingIconAction(e){switch(e){case"left-align":c.align("left"),b.Z.record();break;case"center-horizontally":c.align("centerHr"),b.Z.record();break;case"right-align":c.align("right"),b.Z.record();break;case"top-align":c.align("top"),b.Z.record();break;case"center-vertically":c.align("centerVr"),b.Z.record();break;case"bottom-align":c.align("bottom"),b.Z.record();break;case"layers-front":return N.bringToFront;case"layers-forward":return N.bringForward;case"layers-backward":return N.bringBackward;case"layers-back":return N.bringToBack;case"distribute-vertically":c.distribueVr(),b.Z.record();break;case"distribute-horizontally":c.distribueHr(),b.Z.record();break;case"layers-alt":S.Z.openPopup("order");break;case"copy":d.Z.duplicate();break;case"unlock":if(u.Z.inBgSettingMode)u.Z.handleLockBackground();else{const{index:e,pageIndex:t}=o.ZP.currSelectedInfo;o.ZP.updateLayerProps(t,e,{locked:!0}),b.Z.record()}break;case"lock":if(u.Z.inBgSettingMode)u.Z.handleLockBackground();else{const{currSelectedInfo:{index:e,pageIndex:t},getCurrConfig:n}=o.ZP,r={locked:!1};"text"===n.type&&(r.editing=!1),o.ZP.updateLayerProps(t,e,r),b.Z.record()}break;case"group":i.Z.group();break;case"ungroup":i.Z.ungroup();break;case"trash":u.Z.inBgSettingMode?u.Z.handleDeleteBackground():d.Z.del();break;case"flip-h":f.horizontalFlip(),b.Z.record();break;case"flip-v":f.verticalFlip(),b.Z.record();break}}mappingLayers(e,t){const n=r.Z.getters.getLayers(e);return t.map((e=>n[e]))}mappingMinMax(e){return z[e]}mappingLocales(e){return T[e]}}const E=new L;var D=E},35426:function(e,t,n){"use strict";n.d(t,{E9:function(){return d},g7:function(){return u},y$:function(){return g}});var r=n(89497),i=n(66155),o=Object.defineProperty,s=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t,n)=>(s(e,"symbol"!==typeof t?t+"":t,n),n);class l{cos(e){const t=e*Math.PI/180;return Math.cos(t)}sin(e){const t=e*Math.PI/180;return Math.sin(t)}getCenter(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}getRotatedPoint(e,t,n){const r=n.x-t.x,i=n.y-t.y;return{x:t.x+r*this.cos(e)-i*this.sin(e),y:t.y+r*this.sin(e)+i*this.cos(e)}}getBounding(e){const t=e.rotate,n=this.getCenter(e),r={x:e.x,y:e.y,width:e.width,height:e.height},i=[[r.x,r.y],[r.x+r.width,r.y],[r.x,r.y+r.height],[r.x+r.width,r.y+r.height]];let o=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;return i.forEach((e=>{const r=this.getRotatedPoint(t,n,{x:e[0],y:e[1]});o=Math.min(o,r.x),s=Math.min(s,r.y),a=Math.max(a,r.x),l=Math.max(l,r.y)})),{x:o,y:s,width:a-o,height:l-s}}getActualMoveOffset(e,t,n=100/r.Z.getters.getPageScaleRatio){return{offsetX:e*n,offsetY:t*n}}clamp(e,t,n){return Math.min(Math.max(e,t),n)}doPolygonsIntersect(e,t){const n=[e,t];let r=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,a=0;for(let l=0;l<n.length;l++){const c=n[l];for(let n=0;n<c.length;n++){const l=(n+1)%c.length,d=c[n],u=c[l],g={x:u.y-d.y,y:d.x-u.x};for(let t=0;t<e.length;t++)a=g.x*e[t].x+g.y*e[t].y,(!r||a<r)&&(r=a),(!o||a>o)&&(o=a);for(let e=0;e<t.length;e++)a=g.x*t[e].x+g.y*t[e].y,(!i||a<i)&&(i=a),(!i||a>s)&&(s=a);if(o<i||s<r)return console.log("polygons don't intersect!"),!1}}return!0}multipy(e,t,n=[]){const r=Object.entries(t);if(!r.length)return{};const i=r.map((t=>{if("number"===typeof t)return t*e;if("number"!==typeof t[1]||n.includes(t[0]))return[t[0],t[1]];{const n=t[0],r=t[1];return[n,r*e]}}));return Array.isArray(i[0])?Object.fromEntries(i):i}generatePolygon(e){const{x:t,y:n,width:r,height:o,rotate:s=0}=e,a=s/180*Math.PI,l=new i.ZP.Polygon([i.ZP.point(t,n),i.ZP.point(t,n+o),i.ZP.point(t+r,n+o),i.ZP.point(t+r,n)]),c=i.ZP.point(t+r/2,n+o/2);return l.rotate(a,c)}getIntersectArea(e,t){const{intersect:n}=i.ZP.BooleanOperations;return n(e,t).area()}calculateIfIntersect(e,t){return e=e instanceof i.ZP.Polygon?e:this.generatePolygon(e),t=t instanceof i.ZP.Polygon?t:this.generatePolygon(t),this.getIntersectArea(e,t)>0}randnBm(){let e=0,t=0;while(0===e)e=Math.random();while(0===t)t=Math.random();let n=Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t);return n=n/10+.5,n>1||n<0?this.randnBm():n}}const c=new l;t["ZP"]=c;class d{constructor(e=0,t=0){a(this,"x"),a(this,"y"),this.x=e,this.y=t}middle(e){return new d((this.x+e.x)/2,(this.y+e.y)/2)}add(e){return new d(this.x+e.x,this.y+e.y)}sub(e){return new d(this.x-e.x,this.y-e.y)}mul(e){return new d(this.x*e,this.y*e)}dist(e=new d){return Math.pow(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2),.5)}rotate(e,t=new d){return u(c.getRotatedPoint(e,t,this))}toString(){return`${this.x} ${this.y}`}}function u(e){return new d(e.x,e.y)}class g{constructor(e){a(this,"pathArray",[]),a(this,"pointArray",[]),a(this,"currPos"),this.currPos=e,this.pointArray.push(this.currPos),this.pathArray.push(`M${e}`)}L(e){this.currPos.dist(e)<.1||(this.currPos=e,this.pointArray.push(this.currPos),this.pathArray.push(`L${e}`))}C(e,t,n){this.currPos.dist(n)<.1||(this.currPos=n,this.pointArray.push(this.currPos),this.pathArray.push(`C${e} ${t} ${n}`))}v(e){this.currPos=this.currPos.add(new d(0,e)),this.pointArray.push(this.currPos),this.pathArray.push(`v${e}`)}h(e){this.currPos=this.currPos.add(new d(e,0)),this.pointArray.push(this.currPos),this.pathArray.push(`h${e}`)}l(e){this.currPos=this.currPos.add(e),this.pointArray.push(this.currPos),this.pathArray.push(`l${e.x} ${e.y}`)}a(e,{rx:t=1,ry:n=1,largeArcFlac:r=0,sweepFlag:i=1,radius:o=1}={}){1!==o&&([t,n]=[o,o]),this.currPos=this.currPos.add(e),this.pointArray.push(this.currPos),this.pathArray.push(`a${t} ${n} 0 ${r}${i}${e.x} ${e.y}`)}largeArc(e,t=new d){const n=e>0,r=n?1:-1,i=this.currPos.dist(t);let o=0;e=Math.abs(e);while(o<e){const s=Math.min(e-o,180),a=this.currPos.rotate(s*r,t);this.a(a.sub(this.currPos),{sweepFlag:+n,radius:i}),o+=s}}q(e,t,n,r){e instanceof d&&t instanceof d&&([n,r]=[t.x,t.y],[e,t]=[e.x,e.y]),this.currPos=this.currPos.add(new d(n,r)),this.pointArray.push(this.currPos),this.pathArray.push(`q${e} ${t} ${n} ${r}`)}result(){return this.pathArray.join("\n")+"z"}toCircle(){return this.pointArray.map((e=>({tag:"circle",attrs:{cx:e.x,cy:e.y,r:"5",fill:"red"}})))}}},98824:function(e,t,n){"use strict";var r=n(89497);class i{setModalInfo(e,t,n,i){"string"===typeof t&&(t=[t]),r.Z.commit("modal/SET_MODAL_INFO",{title:e,content:t,confirmButton:void 0===n?this.generateIModalTemplate():n,cancelButton:void 0===i?this.generateIModalTemplate():i}),r.Z.commit("modal/SET_MODAL_OPEN",!0)}setIsPending(e){r.Z.commit("modal/SET_IS_PENDING",e)}setIsModalOpen(e){r.Z.commit("modal/SET_MODAL_OPEN",e)}clearModalInfo(){r.Z.commit("modal/SET_MODAL_INFO",{title:"",content:[""],confirmButton:{msg:"",action:()=>!1},cancelButton:{msg:"",action:()=>!1}})}generateIModalTemplate(){return{msg:"",action:()=>!1}}}const o=new i;t["Z"]=o},50543:function(e,t,n){"use strict";var r=n(94733),i=n(89497),o=n(6400),s=n(13637),a=n(75231),l=n(52632),c=n(86052),d=n(93261),u=n(78871),g=n(70118),p=n(56556);class h{getEventType(e){return e.type.includes("pointer")?"pointer":e.type.includes("mouse")?"mouse":e.type.includes("touch")?"touch":e.type.includes("pinch")?"pinch":"mouse"}getMouseAbsPoint(e){const t=this.getEventType(e);if("pinch"===t){const{x:t,y:n}=e;return{x:t,y:n}}{const n="pointer"===t||"mouse"===t?e.clientX:e.touches[0].clientX,r="pointer"===t||"mouse"===t?e.clientY:e.touches[0].clientY;return{x:n,y:r}}}getMouseRelPoint(e,t){let n,r;const i=this.getEventType(e),o="pointer"===i||"mouse"===i?e.clientX:e.touches[0].clientX,s="pointer"===i||"mouse"===i?e.clientY:e.touches[0].clientY;if(t instanceof HTMLElement){const e=t.getBoundingClientRect();n=o+t.scrollLeft-e.left,r=s+t.scrollTop-e.top}else n=o-t.x,r=s-t.y;return{x:n,y:r}}getMousePosInTarget(e,t){const n=this.getMouseRelPoint(e,t);return{x:n.x/(i.Z.getters.getPageScaleRatio*d.Z.contentScaleRatio/100),y:n.y/(i.Z.getters.getPageScaleRatio*d.Z.contentScaleRatio/100),xPercentage:n.x/t.clientWidth,yPercentage:n.y/t.clientHeight}}onDropClipper(e,t,n,r={x:0,y:0},i,o){"undefined"===typeof i&&(i=`path('M0 0 L0 ${o.height} ${o.width} ${o.height} ${o.width} 0Z')`);let s=this.onDropHandler(e,t,r);s&&o&&"image"===s.type&&(s=this.clipperHandler(s,i,o))}onDrop(e,t,n={x:0,y:0}){const r=this.onDropHandler(e,t,n);if(r){const e=a.ZP.getObjectInsertionLayerIndex(i.Z.getters.getPage(t).layers,r)+1;g.Z.deselect(),a.ZP.addLayersToPos(t,[r],e),p.Z.reassignZindex(t),g.Z.select(t,[e]),l.Z.record()}}onDropHandler(e,t,n={x:0,y:0}){const a=e.dataTransfer?e.dataTransfer.getData("data"):null;if(null===a||"string"!==typeof a)return;const l=JSON.parse(a),d=document.querySelector(`.nu-page-content-${t}`),u={x:d.getBoundingClientRect().x,y:d.getBoundingClientRect().y},g=(e.clientX-u.x+n.x)*(100/i.Z.state.pageScaleRatio),p=(e.clientY-u.y+n.y)*(100/i.Z.state.pageScaleRatio),h={type:l.type,pageIndex:t,active:!1,shown:!1,locked:!1,moved:!1,moving:!1,dragging:!1,designId:l.designId||"",jsonVer:r.Z,jsonVer_origin:r.Z,styles:{x:g,y:p,scale:1,scaleX:1,scaleY:1,rotate:0,width:l.styles.width,height:l.styles.height,initWidth:l.styles.initWidth||l.styles.width,initHeight:l.styles.initHeight||l.styles.height,zindex:-1,opacity:100,horizontalFlip:l.styles.horizontalFlip||!1,verticalFlip:l.styles.verticalFlip||!1},id:""};switch(l.type){case"image":if(i.Z.getters.getCurrSidebarPanelType===o.iI.bg){this.backgroundHandler(t,h);break}return Object.assign(h,{srcObj:l.srcObj}),s.Z.newImage(h);case"shape":return Object.assign(h,{category:l.category}),s.Z.newShape(h);default:c.ZP.addAsset(l,{pageIndex:t,styles:{x:g,y:p}})}}backgroundHandler(e,t){i.Z.commit("SET_backgroundImage",{pageIndex:e,config:t})}clipperHandler(e,t,n){const r=u.Z.deepCopy(e);"undefined"!==typeof n.imgX&&(n.initWidth=n.width/n.scale,n.initHeight=n.height/n.scale);const i={width:r.styles.width,height:r.styles.height},o=e=>{i.width*=e,i.height*=e};while(i.width<n.width||i.height<n.height)i.height<n.height?o(n.height/i.height):o(n.width/i.width);i.width>n.width&&i.height>n.height&&(n.width/i.width<n.height/i.height?o(n.height/i.height):o(n.width/i.width));const s={width:n.width,height:n.height,initWidth:i.width,initHeight:i.height,imgWidth:i.width,imgHeight:i.height,scale:n.scale,imgX:-i.width/2+n.width/2,imgY:-i.height/2+n.height/2};return Object.assign(r.styles,s),r.clipPath="path"===t.substring(0,4)?t:`path('${t}')`,r}}const m=new h;t["Z"]=m},26378:function(e,t,n){"use strict";n.d(t,{U:function(){return N}});var r=n(89497),i=n(6400),o=n(40881),s=n(93261),a=n(2531),l=n(7230),c=n(78871),d=n(70118),u=n(75231),g=n(35426),p=n(50543),h=n(32905),m=n(77804),y=n(52632),f=n(16290),b=Object.defineProperty,v=(e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t,n)=>(v(e,"symbol"!==typeof t?t+"":t,n),n);class N{constructor({_config:e,snapUtils:t,component:n,body:i,layerInfo:o}){w(this,"isControlling",!1),w(this,"component"),w(this,"eventTarget",null),w(this,"dblTabsFlag",!1),w(this,"_config",{config:null}),w(this,"initialPos",{x:0,y:0}),w(this,"initTranslate",{x:0,y:0}),w(this,"movingByControlPoint",!1),w(this,"isDoingGestureAction",!1),w(this,"isHandleMovingHandler",!1),w(this,"snapUtils",null),w(this,"body"),w(this,"_moving",null),w(this,"_moveEnd",null),w(this,"_cursorDragEnd",null),w(this,"layerInfo",{pageIndex:u.ZP.pageIndex,layerIndex:u.ZP.layerIndex,subLayerIdx:u.ZP.subLayerIdx}),w(this,"isTouchDevice",c.Z.isTouchDevice()),w(this,"isClickOnController",!1),w(this,"initPageTranslate",{x:0,y:0}),w(this,"randId",""),w(this,"setMoving",(e=>r.Z.commit("SET_moving",e))),w(this,"setBgConfig",(e=>r.Z.commit("imgControl/SET_BG_CONFIG",e))),w(this,"setLastSelectedLayerIndex",(e=>r.Z.commit("SET_lastSelectedLayerIndex",e))),this._config=e,this.snapUtils=t,this.body=i,this.randId=c.Z.generateRandomString(4),n&&(this.component=n),o&&(this.layerInfo=o)}get isBgImgCtrl(){return r.Z.getters["imgControl/isBgImgCtrl"]}get config(){return this._config.config}get inMultiSelectionMode(){return r.Z.getters["mobileEditor/getInMultiSelectionMode"]}get currFunctionPanelType(){return r.Z.getters.getCurrFunctionPanelType}get currSelectedInfo(){return r.Z.getters.getCurrSelectedInfo}get scaleRatio(){return r.Z.getters.getPageScaleRatio}get currHoveredPageIndex(){return r.Z.getters.getCurrHoveredPageIndex}get isActive(){return this.config.active}get getLayerType(){return this.config.type}get pageIndex(){return this.layerInfo.pageIndex}get layerIndex(){return this.layerInfo.layerIndex}get subLayerIdx(){var e;return null!=(e=this.layerInfo.subLayerIdx)?e:-1}get isLocked(){return this.config.locked}get contentEditable(){return this.config.contentEditable||!1}get getLayerPos(){return{x:this.config.styles.x,y:this.config.styles.y}}get isDragging(){return this.config.dragging}get isImgControl(){switch(this.getLayerType){case"image":return this.config.imgControl;case"group":return this.config.layers.some((e=>"image"===e.type&&e.imgControl));case"frame":return this.config.clips.some((e=>e.imgControl))}return!1}setCursorStyle(e,t){this.body&&(this.body.style.cursor=t)}updateProps({_config:e,body:t}){this._config=e,this.body=t}disableTouchEvent(e){this.isTouchDevice&&(e.preventDefault(),e.stopPropagation())}pageMoveStart(e){r.Z.getters["mobileEditor/getIsPinchingEditor"]||(this.initPageTranslate.x=h.Z.getCurrPage.x,this.initPageTranslate.y=h.Z.getCurrPage.y,this.removeListener(),"pinch"===e.type?this.initialPos=null:this.initialPos=p.Z.getMouseAbsPoint(e),this._moving=this.pageMoving.bind(this),this._moveEnd=this.pageMoveEnd.bind(this),a.ZP.addPointerEvent("pointerup",this._moveEnd),a.ZP.addPointerEvent("pointermove",this._moving))}pageMoving(e){r.Z.getters["mobileEditor/getIsPinchingEditor"]?this.removeListener():window.requestAnimationFrame((()=>{this.pageMovingHandler(e)}))}pageMoveEnd(e){this.removeListener()}moveStart(e){if(r.Z.getters["mobileEditor/getIsPinchingEditor"])return;this.initTranslate.x=this.getLayerPos.x,this.initTranslate.y=this.getLayerPos.y,this.initPageTranslate.x=h.Z.getCurrPage.x,this.initPageTranslate.y=h.Z.getCurrPage.y;const t=u.ZP.layerIndex;if(l.Z.applyFormatIfCopied(this.pageIndex,this.layerIndex),l.Z.clearCopiedFormat(),t!==this.layerIndex){const e=u.ZP.getLayer(this.pageIndex,t);"image"===e.type&&e.imgControl?u.ZP.updateLayerProps(this.pageIndex,t,{imgControl:!1}):"group"===e.type&&e.layers.forEach(((e,n)=>{"image"===e.type&&e.imgControl&&u.ZP.updateLayerProps(this.pageIndex,t,{imgControl:!1},n)}))}if(this.isBgImgCtrl&&this.setBgConfig(void 0),this.isImgControl)return;const n=a.ZP.getEventType(e);if(this.eventTarget=e.target,this.eventTarget.releasePointerCapture(e.pointerId),this.isTouchDevice&&!this.config.locked&&(this.isClickOnController=o.Z.isClickOnController(e),e.stopPropagation()),"pointer"===n){const t=e;if(0!==t.button)return}else if("mouse"===n){const t=e;if(0!==t.button)return}if(a.ZP.checkIsMultiTouch(e))return;if(this.currFunctionPanelType===i.UJ.photoShadow&&a.ZP.emit(a.rZ.showPhotoShadow,""),this.isTouchDevice&&!this.isActive&&!this.isLocked&&!this.inMultiSelectionMode)return this.eventTarget.addEventListener("touchstart",this.disableTouchEvent),this.initialPos=p.Z.getMouseAbsPoint(e),this._moving=this.moving.bind(this),this._moveEnd=this.moveEnd.bind(this),a.ZP.addPointerEvent("pointerup",this._moveEnd),void a.ZP.addPointerEvent("pointermove",this._moving);this.movingByControlPoint=!1;const s=c.Z.exact([e.altKey])&&!this.contentEditable,g=c.Z.exact([e.shiftKey,e.ctrlKey,e.metaKey])&&!this.contentEditable&&!s,{inMultiSelectionMode:y}=this;switch(this.isLocked||e.stopPropagation(),s&&m.Z.altDuplicate(this.pageIndex,this.layerIndex,this.config),this.getLayerType){case"text":{const t=e.target.classList,n=t.contains("control-point__move-bar"),r=t.contains("control-point__mover");if(this.isActive&&!g&&this.contentEditable&&!n&&!r)return u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{isDraggingCursor:!0}),this._cursorDragEnd=this.onCursorDragEnd.bind(this),void a.ZP.addPointerEvent("pointerup",this._cursorDragEnd);if(!this.isActive){let t=this.layerIndex;return g||y?this.pageIndex===h.Z.currFocusPageIndex&&d.Z.select(this.pageIndex,[t]):(d.Z.deselect(),t=this.config.styles.zindex-1,this.setLastSelectedLayerIndex(this.layerIndex),d.Z.select(this.pageIndex,[t])),void(this.config.locked||(this.isControlling=!0,this.initialPos=p.Z.getMouseAbsPoint(e),this._moving=this.moving.bind(this),this._moveEnd=this.moveEnd.bind(this),a.ZP.addPointerEvent("pointerup",this._moveEnd),a.ZP.addPointerEvent("pointermove",this._moving)))}r||n?this.movingByControlPoint=!0:this.isTouchDevice||u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{contentEditable:!0});break}}if(this.config.locked||g||(this.initialPos=p.Z.getMouseAbsPoint(e),this._moving=this.moving.bind(this),this._moveEnd=this.moveEnd.bind(this),a.ZP.addPointerEvent("pointerup",this._moveEnd),a.ZP.addPointerEvent("pointermove",this._moving)),"tmp"!==this.config.type){let e=this.layerIndex;this.isActive&&1===this.currSelectedInfo.layers.length?g&&(d.Z.deselect(),e=this.config.styles.zindex-1,this.setLastSelectedLayerIndex(this.layerIndex)):this.isActive||(this.currSelectedInfo.index>=0?g||y?this.pageIndex!==h.Z.currFocusPageIndex||this.config.locked||u.ZP.getCurrLayer.locked||d.Z.select(this.pageIndex,[e]):(d.Z.deselect(),e=this.config.styles.zindex-1,this.setLastSelectedLayerIndex(this.layerIndex),d.Z.select(this.pageIndex,[e])):(e=this.config.styles.zindex-1,this.setLastSelectedLayerIndex(this.layerIndex),d.Z.select(this.pageIndex,[e])))}}moving(e){if(a.ZP.checkIsMultiTouch(e)||r.Z.getters["mobileEditor/getIsPinchingEditor"]||null===this.initialPos)return;switch(this.isControlling=!0,this.config.type){case i.F5.group:if(this.config.layers.some((e=>e.active&&e.type===i.F5.text&&e.contentEditable&&e.isTyping)))return}const t={};if(this.isDragging||(t.dragging=!0),this.isActive){"touch"!==c.Z.getEventType(e)&&e.preventDefault(),this.setCursorStyle(e,"move"),this.isHandleMovingHandler||(window.requestAnimationFrame((()=>{this.movingHandler(e),this.isHandleMovingHandler=!1})),this.isHandleMovingHandler=!0);const n={x:Math.abs(this.getLayerPos.x-this.initTranslate.x),y:Math.abs(this.getLayerPos.y-this.initTranslate.y)},i=0!==n.x||0!==n.y;i&&(this.config.moving&&r.Z.state.isMoving||(t.moving=!0,this.setMoving(!0)),"text"===this.getLayerType&&this.config.contentEditable&&u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{contentEditable:!1}))}if(!this.isActive){const t={x:Math.abs(p.Z.getMouseAbsPoint(e).x-this.initialPos.x),y:Math.abs(p.Z.getMouseAbsPoint(e).y-this.initialPos.y)};if(this.isTouchDevice&&!this.isLocked){if(u.ZP.layerIndex!==this.layerIndex&&this.isClickOnController&&(t.x>1||t.y>1))return this.isDoingGestureAction=!0,void window.requestAnimationFrame((()=>{this.movingHandler(e),this.isHandleMovingHandler=!1}));const{mobileSize:n}=s.Z,{getCurrPage:r,scaleRatio:i}=h.Z,o=r.width*i*.01*r.contentScaleRatio<n.width&&r.height*i*.01*r.contentScaleRatio<n.height;o||window.requestAnimationFrame((()=>{this.pageMovingHandler(e)}))}else if(t.x<1&&t.y<1)return}u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,t)}movingHandler(e){if(null===this.initialPos)return;const t=this.layerIndex===u.ZP.layerIndex?this.config:u.ZP.getCurrLayer;if(0===Object.values(t).length)return a.ZP.removePointerEvent("pointerup",this._moveEnd),void a.ZP.removePointerEvent("pointermove",this._moving);this.config.moved||u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{moved:!0});const n=p.Z.getMouseRelPoint(e,this.initialPos);let i=100/r.Z.getters.getPageScaleRatio;c.Z.isTouchDevice()&&(i*=1/r.Z.getters.getContentScaleRatio);const o=g.ZP.getActualMoveOffset(n.x,n.y,i),s="shape"===t.type&&"D"===t.category,l={x:t.styles.x+o.offsetX,y:t.styles.y+o.offsetY,width:t.styles.width,height:t.styles.height,initWidth:t.styles.initWidth,initHeight:t.styles.initHeight,rotate:t.styles.rotate},d=this.snapUtils.calcMoveSnap(l,s?t:void 0),h={x:n.x+d.x/i,y:n.y+d.y/i};this.initialPos.x+=h.x,this.initialPos.y+=h.y,d.x||d.y?(this.snapUtils.event.emit(`getClosestSnaplines-${this.snapUtils.id}`),u.ZP.updateLayerStyles(this.pageIndex,u.ZP.layerIndex,{x:l.x+d.x,y:l.y+d.y})):u.ZP.updateLayerStyles(this.pageIndex,u.ZP.layerIndex,{x:l.x,y:l.y})}pageMovingHandler(e){if(r.Z.state.isPageScaling||this.scaleRatio<=h.Z.mobileMinScaleRatio)return;if(null===this.initialPos)return void(this.initialPos=p.Z.getMouseAbsPoint(e));const{getCurrPage:t}=h.Z,n=r.Z.getters.getContentScaleRatio,i=.01*r.Z.state.pageScaleRatio,o={x:.5*(s.Z.mobileSize.width-t.width*n),y:.5*(s.Z.mobileSize.height-t.height*n)},a=p.Z.getMouseRelPoint(e,this.initialPos),l=t.x>=o.x&&a.x>0,c=t.x<=s.Z.mobileSize.width-t.width*n*i-o.x&&a.x<0,d=t.y>=o.y&&a.y>0,u=t.y<=s.Z.mobileSize.height-t.height*n*i-o.y&&a.y<0;let g=-1,m=-1;g=c||l?c?s.Z.mobileSize.width-t.width*n*i-o.x:o.x:a.x+t.x,m=d||u?u?s.Z.mobileSize.height-t.height*n*i-o.y:o.y:a.y+t.y,h.Z.updatePagePos(this.pageIndex,{x:g,y:m}),l||c||(this.initialPos.x+=a.x),u||d||(this.initialPos.y+=a.y)}moveEnd(e){var t;if(a.ZP.checkIsMultiTouch(e)||null===this.initialPos)return this.removeListener();this.isControlling=!1,this.removeListener(),u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{moving:!1}),this.setMoving(!1);const n=this.isTouchDevice?{x:Math.abs(p.Z.getMouseAbsPoint(e).x-this.initialPos.x),y:Math.abs(p.Z.getMouseAbsPoint(e).y-this.initialPos.y)}:{x:Math.abs(this.getLayerPos.x-this.initTranslate.x),y:Math.abs(this.getLayerPos.y-this.initTranslate.y)},r={x:Math.abs(h.Z.getCurrPage.x-this.initPageTranslate.x),y:Math.abs(h.Z.getCurrPage.y-this.initPageTranslate.y)},i=n.x>1||n.y>1,o=0!==Math.round(r.x)||0!==Math.round(r.y);if(this.isActive){if(i)if(m.Z.offsetCount=0,u.ZP.isOutOfBoundary()&&-1===this.currHoveredPageIndex)u.ZP.deleteSelectedLayer();else if(u.ZP.isOutOfBoundary()&&-1!==this.currHoveredPageIndex&&this.currHoveredPageIndex!==this.pageIndex){const e=this.currSelectedInfo.layers.length;e>1&&d.Z.group();const n=c.Z.deepCopy(u.ZP.getCurrLayer),{top:r,left:i}=this.body.getBoundingClientRect(),o=null==(t=document.querySelector(`.nu-page-${this.currHoveredPageIndex}`))?void 0:t.getBoundingClientRect(),s=(i-o.left)*(100/this.scaleRatio),a=(r-o.top)*(100/this.scaleRatio);n.styles.x=s,n.styles.y=a,u.ZP.deleteSelectedLayer(!1),u.ZP.addLayers(this.currHoveredPageIndex,[n]),e>1&&d.Z.ungroup()}else this.config.isHoveringFrame||y.Z.asyncRecord();else if("text"===this.getLayerType&&(u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{isTyping:!0}),this.isTouchDevice?this.movingByControlPoint||u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{contentEditable:!0}):this.movingByControlPoint&&u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{contentEditable:!1}),this.config.contentEditable&&(f.Z.focus({scrollIntoView:!1},this.isTouchDevice?"end":null),this.config.isEdited||setTimeout((()=>{f.Z.agent((e=>!e.isDestroyed&&e.commands.selectAll()))}),100))),this.inMultiSelectionMode&&"tmp"!==this.config.type){let e=this.layerIndex;this.isActive&&1===this.currSelectedInfo.layers.length?(d.Z.deselect(),e=this.config.styles.zindex-1,this.setLastSelectedLayerIndex(this.layerIndex)):this.isActive||(this.currSelectedInfo.index>=0?this.pageIndex===h.Z.currFocusPageIndex&&d.Z.select(this.pageIndex,[e]):(e=this.config.styles.zindex-1,this.setLastSelectedLayerIndex(this.layerIndex),d.Z.select(this.pageIndex,[e])))}this.isControlling=!1,this.setCursorStyle(e,"")}if(!this.isActive){if(o)return;if(!this.isDoingGestureAction&&!this.isActive&&!i){if(this.eventTarget.removeEventListener("touchstart",this.disableTouchEvent),!this.inMultiSelectionMode){d.Z.deselect();const e=this.config.styles.zindex-1;this.setLastSelectedLayerIndex(this.layerIndex),d.Z.select(this.pageIndex,[e])}return this.setCursorStyle(e,""),u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{dragging:!1}),this.isDoingGestureAction=!1,void this.snapUtils.event.emit("clearSnapLines")}}this.isDragging&&u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{dragging:!1}),this.isDoingGestureAction=!1,this.snapUtils.event.emit("clearSnapLines")}onCursorDragEnd(e){u.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{isDraggingCursor:!1}),a.ZP.removePointerEvent("pointerup",this._cursorDragEnd)}removeListener(){this.isControlling=!1,a.ZP.removePointerEvent("pointerup",this._moveEnd),a.ZP.removePointerEvent("pointermove",this._moving),a.ZP.removePointerEvent("pointerup",this._cursorDragEnd)}}},50707:function(e,t,n){"use strict";var r=n(23931),i=n(50559),o=n(53650),s=Object.defineProperty,a=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t,n)=>(a(e,"symbol"!==typeof t?t+"":t,n),n);class c{constructor(){l(this,"event"),l(this,"online"),this.event=new o.EventEmitter,this.event.on("networkChange",(e=>{this.online=e,e||this.notifyNetworkError()})),this.online=navigator.onLine}registerNetworkListener(){window.addEventListener("online",(()=>{this.online=!0,this.event.emit("networkChange",this.online)})),window.addEventListener("offline",(()=>{this.online=!1,this.event.emit("networkChange",this.online)}))}unregisterNetworkListener(){window.removeEventListener("online",(()=>{console.log("online"),this.online=!0})),window.removeEventListener("offline",(()=>{console.log("offline"),this.online=!1}))}check(){return this.online}notifyNetworkError(){(0,i.h4)({group:"error",text:`${r.Z.global.t("NN0351")}`})}}const d=new c;t["Z"]=d},32905:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var r=n(23931),i=n(89497),o=n(6400),s=n(60410),a=n(29651),l=n(20951),c=n(93261);class d{focusElement(e,t){const n=document.querySelector(e);n&&n.focus({preventScroll:t})}}const u=new d;var g=u,p=n(78871),h=n(70118),m=n(13637),y=n(75231),f=n(53089),b=n(46921),v=Object.defineProperty,w=Object.defineProperties,N=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||(t={}))x.call(t,n)&&I(e,n,t[n]);if(S)for(var n of S(t))P.call(t,n)&&I(e,n,t[n]);return e},k=(e,t)=>w(e,N(t)),Z=(e,t,n)=>(I(e,"symbol"!==typeof t?t+"":t,n),n);class C{constructor(){Z(this,"mobileMinScaleRatio"),Z(this,"isSwitchingToEditor"),Z(this,"originPageSize",{width:-1,height:-1}),Z(this,"originEditorSize",{width:-1,height:-1}),Z(this,"pageEventPosOffset",null),Z(this,"pageCenterPos",{x:0,y:0}),Z(this,"originPageY",0),Z(this,"findCentralPageIndexInfo",(0,s.throttle)(this.findCentralPageIndexInfoHandler,100)),this.mobileMinScaleRatio=0,this.isSwitchingToEditor=!1}get MAX_WIDTH(){return 5200}get MAX_HEIGHT(){return 5200}get MAX_AREA(){return this.MAX_WIDTH*this.MAX_HEIGHT}get MAX_SIZE(){return 8e3}get MIN_SIZE(){return 40}get MAX_BLEED(){return{px:216,mm:18.288}}get MOBILE_CARD_PADDING(){return 16}get currSelectedInfo(){return i.Z.getters.getCurrSelectedInfo}get isDetailPage(){return 1===i.Z.getters.getGroupType}get isMobile(){return i.Z.getters.getUseMobileEditor}get isLogin(){return i.Z.getters["user/isLogin"]}get inBgRemoveMode(){return i.Z.getters["bgRemove/getInBgRemoveMode"]}get autoRemoveResult(){return i.Z.getters["bgRemove/getAutoRemoveResult"]}get getPage(){return i.Z.getters.getPage}get getCurrPage(){return this.getPage(y.ZP.pageIndex)}get getPageState(){return i.Z.getters.getPageState}get getPages(){return i.Z.getters.getPages}get hasBleed(){return i.Z.getters.getHasBleed}get pageNum(){return this.getPages.length}get getPageSize(){return i.Z.getters.getPageSize}get pagesName(){return i.Z.getters.getPagesName}get scaleRatio(){return i.Z.getters.getPageScaleRatio}get currFocusPageSize(){return i.Z.getters.getPageSize(this.currFocusPageIndex)}get currFocusPageSizeWithBleeds(){return this.getPageSizeWithBleeds(this.currFocusPage)}get defaultBleed(){return"us"===r.Z.global.locale?3:2}get isLastPage(){return this.pageNum-1===this.currFocusPageIndex}get middlemostPageIndex(){return i.Z.getters.getMiddlemostPageIndex}get currCardIndex(){return i.Z.getters["mobileEditor/getCurrCardIndex"]}get currActivePageIndex(){return i.Z.getters.getCurrActivePageIndex}get currHoveredPageIndex(){return i.Z.getters.getCurrHoveredPageIndex}get currFocusPageIndex(){return i.Z.getters.getCurrFocusPageIndex}get _3dEnabledPageIndex(){return i.Z.getters.get3dEnabledPageIndex}get currFocusPage(){return this.getPage(this.currFocusPageIndex)}get currFocusPageInViewRatio(){const e=document.getElementsByClassName("nu-page")[this.currFocusPageIndex],t=e.getBoundingClientRect(),n=window.innerHeight,r=Math.max(t.top,0),i=Math.min(t.bottom,n);return(i-r)/t.height}get addAssetTargetPageIndex(){return this.currFocusPageInViewRatio<.25?this.middlemostPageIndex:this.currFocusPageIndex}get pageRect(){var e,t;const{left:n,top:r,bottom:i,right:o}=null!=(t=null==(e=document.getElementsByClassName(`nu-page-bleed-${this.currFocusPageIndex}`)[0])?void 0:e.getBoundingClientRect())?t:document.getElementsByClassName(`nu-page-${this.currFocusPageIndex}`)[0].getBoundingClientRect();return{left:n,top:r,bottom:i,right:o}}get topBound(){return i.Z.getters["page/getTopBound"]}get bottomBound(){return i.Z.getters["page/getBottomBound"]}get getEditorRenderSize(){const e=document.getElementById(`nu-page_${y.ZP.pageIndex}`),t=document.getElementById("mobile-editor__content");return{pageRect:e.getBoundingClientRect(),editorRect:t.getBoundingClientRect()}}newPage(e){e.backgroundImage&&(e.backgroundImage.config.styles.scale=1),e.layers&&e.layers.forEach((e=>{e.id=p.Z.generateRandomString(8),e.type===o.F5.frame?e.clips.forEach((e=>e.id=p.Z.generateRandomString(8))):e.type===o.F5.group&&e.layers.forEach((e=>e.id=p.Z.generateRandomString(8)))})),e.width&&(e.physicalWidth||(e.physicalWidth=e.width)),e.height&&(e.physicalHeight||(e.physicalHeight=e.height)),e.unit||(e.unit="px");const t=this.getPageDefaultBleeds(),n={width:1080,height:1080,x:0,y:this.originPageY||0,physicalWidth:1080,physicalHeight:1080,unit:"px",backgroundColor:"#ffffff",backgroundImage:{config:m.Z.newImage({srcObj:{type:"",userId:"",assetId:""},styles:{width:0,height:0,scale:1,zindex:-1,opacity:100}}),posX:-1,posY:-1},name:"",layers:[],documentColors:[],designId:"",id:p.Z.generateRandomString(8),guidelines:{v:[],h:[]},initPos:{x:0,y:0},isEnableBleed:!1,bleeds:t,physicalBleeds:t,contentScaleRatio:1};return Object.assign(n,m.Z.newTemplate(e))}newPages(e){return e.map((e=>this.newPage(e)))}addPage(e){i.Z.commit("ADD_page",e)}addPages(e){i.Z.commit("ADD_pages",e)}duplicatePage1(e){h.Z.deselect();const t=p.Z.deepCopy(this.getPage(0)),n=new Array(e).fill({}).map((()=>this.newPage(t)));this.setPages(n)}clearAllPagesContent(){const e=new Array(this.pageNum).fill(this.newPage({}));this.setPages(e)}addTwentyPages(){const e=new Array(20).fill(this.newPage({}));this.addPages(e)}addPageToPos(e,t){i.Z.commit("ADD_pageToPos",{newPage:e,pos:t}),this.isDetailPage&&(0!==t?(this.setBleeds(t,_(k(_({},e.physicalBleeds),{top:0}),t!==this.pageNum-1&&{bottom:0})),this.setBleeds(t-1,k(_({},this.getPage(t-1).physicalBleeds),{bottom:0}))):this.pageNum>1&&(this.setBleeds(t,k(_({},e.physicalBleeds),{top:this.getPage(this.pageNum-1).physicalBleeds.bottom,bottom:0})),this.setBleeds(1,k(_({},this.getPage(1).physicalBleeds),{top:0}))))}deletePage(e){const t=this.getPage(e);i.Z.commit("DELETE_page",e),this.isDetailPage&&(1===this.pageNum?z.setBleeds(0,k(_({},t.physicalBleeds),{top:0===e?t.physicalBleeds.top:this.getPage(0).physicalBleeds.top,bottom:1===e?t.physicalBleeds.bottom:this.getPage(0).physicalBleeds.bottom})):0===e?z.setBleeds(0,t.physicalBleeds):e===this.pageNum&&z.setBleeds(this.pageNum-1,t.physicalBleeds))}setPages(e=[this.newPage({})]){i.Z.commit("SET_pages",e)}setPagesName(e){i.Z.commit("SET_pagesName",e),l.ZP.renameDesign(e)}setPageSize(e,t,n,r=t,o=n,s="px"){i.Z.commit("SET_pageSize",{index:e,width:t,height:n,physicalWidth:r,physicalHeight:o,unit:s}),this.getPage(e).isEnableBleed||this.resetBleeds(e)}resizePage(e){f.Z.resizePage(z.currFocusPageIndex,this.getPage(z.currFocusPageIndex),e),this.updatePageProps({pageIndex:z.currFocusPageIndex,props:{width:e.width,height:e.height}})}getPageIndexById(e,t){return(null!=t?t:this.getPages).findIndex((t=>t.id===e))}activePage(e){i.Z.commit("SET_currActivePageIndex",e)}activeMiddlemostPage(){const e=p.Z.isTouchDevice()&&this.isDetailPage?this.currActivePageIndex:this.middlemostPageIndex;return g.focusElement(`.nu-page-${e}`,!0),this.middlemostPageIndex}activeCurrActivePage(){g.focusElement(`.nu-page-${this.currFocusPageIndex}`,!0)}scrollIntoPage(e,t){const n=document.getElementsByClassName("nu-page")[e];void 0!==n&&(n.scrollIntoView({behavior:null!=t?t:"smooth",block:"center",inline:"center"}),this.findCentralPageIndexInfo())}clearPagesInfo(){i.Z.commit("CLEAR_pagesInfo")}updateSpecPage(e,t){const n=i.Z.getters.getPages,r=p.Z.deepCopy(n);if(r[e]){const n=r[e].name;t.name=n,r[e]=t,i.Z.commit("SET_pageToPos",{newPage:this.newPage(t),pos:e})}}startBackgroundImageControl(e){i.Z.commit("SET_backgroundImageControl",{pageIndex:e,imgControl:!0})}setBackgroundImageControlDefault(){i.Z.commit("SET_allBackgroundImageControl",!1),p.Z.isTouchDevice()&&c.Z.setShowMobilePanel(!1)}updateBackgroundImagePos(e,t,n){i.Z.commit("SET_backgroundImagePos",{pageIndex:e,imagePos:{x:t,y:n}})}updateBackgroundImageStyles(e,t){i.Z.commit("SET_backgroundImageStyles",{pageIndex:e,styles:t})}updateBackgroundImageMode(e,t){i.Z.commit("SET_backgroundImageMode",{pageIndex:e,newDisplayMode:t})}updatePageProps(e){i.Z.commit("UPDATE_pageProps",{pageIndex:this.currFocusPageIndex,props:e})}appendPagesTo(e,t,n){const r=i.Z.getters.getPages,o=this.newPages(e);let s=p.Z.deepCopy(r);s="number"===typeof t?s.slice(0,t).concat(o).concat(s.slice(n?t+1:t)):s.concat(o),i.Z.commit("SET_pages",s)}findCentralPageIndexInfoHandler(e=!1){const t=c.Z.showMobilePanel||c.Z.mobileAllPageMode,n=p.Z.isTouchDevice();if(n){if(!this.isDetailPage)return i.Z.commit("SET_middlemostPageIndex",this.currCardIndex),this.currCardIndex;if(t)return this.middlemostPageIndex}const r=[...document.getElementsByClassName("nu-page")].map((e=>{const t=e.getBoundingClientRect();return{top:t.top,bottom:t.bottom}})),o=this.isDetailPage&&n?"mobile-editor__content":"content__editor",s=document.getElementsByClassName(o)[0];if(void 0===s)return-1;const a=s.getBoundingClientRect(),l=(a.bottom-a.top)/2,d=Number.MAX_SAFE_INTEGER,u=this.searchMiddlemostPageIndex(r,l,d,-1);i.Z.commit("SET_middlemostPageIndex",u),n&&this.isDetailPage&&i.Z.commit("SET_currActivePageIndex",u),e||this.activeMiddlemostPage(),i.Z.commit("page/SET_STATE",{topBound:this.findBoundary(r,a,u-1,!0),bottomBound:this.findBoundary(r,a,u+1,!1)})}findBoundary(e,t,n,r){return n<0||n>=e.length?n:r?e[n].bottom<t.top?n:this.findBoundary(e,t,n-1,r):e[n].top>t.bottom?n:this.findBoundary(e,t,n+1,r)}isOutOfBound(e){return p.Z.isTouchDevice()&&!this.isDetailPage?e<=this.currCardIndex-2||e>=this.currCardIndex+2:e<=this.topBound-4||e>=this.bottomBound+4}searchMiddlemostPageIndex(e,t,n,r){const i=Math.floor(e.length/2);if(e[i].top<t&&e[i].bottom>t)return i;if(1===e.length)return i;const o=e[i].top>t,s=Math.min(Math.abs(t-e[i].top),Math.abs(t-e[i].bottom));return s<n&&(n=s),o?this.searchMiddlemostPageIndex(e.slice(0,i),t,n,i):i+this.searchMiddlemostPageIndex(e.slice(i,e.length),t,n,i)}setScaleRatio(e){i.Z.commit("SET_pageScaleRatio",e)}fitPage(e=!1){var t,n;if(c.Z.mobileAllPageMode||this.isSwitchingToEditor)return;const r=document.getElementsByClassName("editor-view")[0],o=null!=(n=null==(t=document.getElementsByClassName("mobile-panel")[0])?void 0:t.clientHeight)?n:0;if(!r)return;let{clientWidth:s,clientHeight:l}=r;const{width:d,height:u}=this.inBgRemoveMode?{width:1600,height:this.autoRemoveResult.height*(1600/this.autoRemoveResult.width)}:this.hasBleed?this.currFocusPageSizeWithBleeds:this.currFocusPageSize,g=this.isMobile?1:.8;this.isMobile&&(s-=2*this.MOBILE_CARD_PADDING,l-=2*this.MOBILE_CARD_PADDING);const h=Math.min(s/(d*(this.scaleRatio/100)),(l-o)/(u*(this.scaleRatio/100)))*g,m=Math.max(3,Math.round(this.scaleRatio*h));"backendRendering"===i.Z.state.user.userId||Number.isNaN(h)||p.Z.isTouchDevice()?i.Z.commit("SET_pageScaleRatio",100):i.Z.commit("SET_pageScaleRatio",m),this.inBgRemoveMode||this.findCentralPageIndexInfo(),e&&(0,a.Y3)((()=>{r.scrollTo((r.scrollWidth-s)/2,0)})),this.isDetailPage?(this.isSwitchingToEditor=!0,(0,a.Y3)((()=>{setTimeout((()=>{this.scrollIntoPage(this.currFocusPageIndex,"auto"),this.isSwitchingToEditor=!1}),0)}))):z.mobileMinScaleRatio=z.scaleRatio,p.Z.isTouchDevice()&&(c.Z.handleContentScaleRatio(this.currFocusPageIndex),i.Z.commit("SET_pageScaleRatio",100))}fillPage(){const e=document.getElementsByClassName("editor-view")[0],t=this.inBgRemoveMode?this.autoRemoveResult.width:this.getPage(this.middlemostPageIndex).width,n=e.clientWidth/(t*(this.scaleRatio/100))*.9;e.scrollTo((e.scrollWidth-e.clientWidth)/2,0),"backendRendering"===i.Z.state.user.userId?i.Z.commit("SET_pageScaleRatio",100):i.Z.commit("SET_pageScaleRatio",Math.round(this.scaleRatio*n)),this.inBgRemoveMode||this.findCentralPageIndexInfo()}getMinScaleRatio(e,t){var n;const r=c.Z.showMobilePanel?0:null==(n=document.getElementsByClassName("mobile-panel")[0])?void 0:n.clientHeight;let{clientWidth:i,clientHeight:o}=t;const{width:s,height:a}=e.config,l=this.isMobile?1:.8;this.isMobile&&(i-=2*this.MOBILE_CARD_PADDING,o-=2*this.MOBILE_CARD_PADDING);const d=Math.min(i/(s*(this.scaleRatio/100)),(o-r)/(a*(this.scaleRatio/100)))*l,u=Math.max(3,Math.round(this.scaleRatio*d));return u}isAllPageSizeEqual(){return 1===new Set(this.getPages.map((e=>e.width))).size}filterBrokenImageLayer(e){const t=p.Z.deepCopy(e);return t.map((e=>(e.layers=e.layers.filter((e=>"image"!==e.type||e.previewSrc)),e)))}hasDesignId(e){return""!==this.getPage(e).designId}getPageDPI(e=this.currFocusPageSize){return{width:e.width/b.ZP.convert(e.physicalWidth,e.unit,"in"),height:e.height/b.ZP.convert(e.physicalHeight,e.unit,"in")}}getImageDpiRatio(e){const t=i.Z.state.user.dpi;if(-1===t)return 1;const n=e.isEnableBleed?z.removeBleedsFromPageSize(e):e,{width:r,height:o,physicalHeight:s,physicalWidth:a,unit:l="px"}=n;if("px"!==l&&s&&a){const e=Math.max(o,r)/b.ZP.convert(Math.max(s,a),l,"in");return t/e}return t/96}getPageSizeWithBleeds(e=this.currFocusPage){const t={top:0,bottom:0,left:0,right:0},{width:n,height:r,physicalWidth:i,physicalHeight:o,unit:s}=e;let{bleeds:a,physicalBleeds:l}=e;return null!=a||(a=t),null!=l||(l=a),{width:n+a.left+a.right,height:r+a.top+a.bottom,physicalWidth:i+l.left+l.right,physicalHeight:o+l.top+l.bottom,bleeds:a,physicalBleeds:l,unit:s}}removeBleedsFromPageSize(e){const{width:t,height:n,physicalWidth:r,physicalHeight:i,bleeds:o,physicalBleeds:s,unit:a}=e;return o&&s?{width:t-o.left-o.right,height:n-o.top-o.bottom,physicalWidth:r-s.left-s.right,physicalHeight:i-s.top-s.bottom,bleeds:o,physicalBleeds:s,unit:a}:e}setIsEnableBleed(e,t){i.Z.commit("SET_isEnableBleed",{value:e,pageIndex:t})}setBleeds(e,t,n){const r=this.getPage(e),o=this.getPageDPI(r);t=Object.fromEntries(Object.entries(t).map((([e,t])=>[e,isNaN(t)?0:t])));const a=n||Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(0,s.round)(b.ZP.convert(t,r.unit,"px","left"===e||"right"===e?o.width:o.height))]))),l=t;i.Z.commit("SET_bleeds",{pageIndex:e,bleeds:a,physicalBleeds:l})}resetBleeds(e){var t;const n=this.getPage(e),r=this.getPageDefaultBleeds(n,"px"),o=null!=(t=n.unit)?t:"px",s=i.Z.getters.getPagesLength;r.top=this.isDetailPage&&0!==e?0:r.top,r.bottom=this.isDetailPage&&e!==s-1?0:r.bottom;const a="px"===o?r:this.getPageDefaultBleeds(n);"px"!==o&&(a.top=this.isDetailPage&&0!==e?0:a.top,a.bottom=this.isDetailPage&&e!==s-1?0:a.bottom),i.Z.commit("SET_bleeds",{pageIndex:e,bleeds:r,physicalBleeds:a})}fixPageSize(){const e=this.getPages;let t=!1;if(this.isDetailPage){let n=Number.POSITIVE_INFINITY;e.forEach((e=>{var r,i,o;if(e.width*e.height>this.MAX_AREA){const s={width:e.width,height:e.height,physicalWidth:null!=(r=e.physicalWidth)?r:e.width,physicalHeight:null!=(i=e.physicalHeight)?i:e.height,unit:null!=(o=e.unit)?o:"px"},a=Math.max(Math.min(s.width/s.height,this.MAX_SIZE/this.MIN_SIZE),this.MIN_SIZE/this.MAX_SIZE);s.width=Math.sqrt(this.MAX_AREA*a),s.height=Math.floor(s.width/a),s.width=Math.floor(s.width),Math.max(s.width,s.height)>this.MAX_SIZE&&(s.width=this.MAX_SIZE,a<1&&(s.width=Math.floor(s.width*a))),Math.min(s.width,s.height)<this.MIN_SIZE&&(s.width=this.MIN_SIZE,a<1&&(s.width=Math.floor(s.width*a))),n=Math.min(n,s.width),t=!0}})),t&&e.forEach(((e,t)=>{var r,i,o;const a={width:e.width,height:e.height,physicalWidth:null!=(r=e.physicalWidth)?r:e.width,physicalHeight:null!=(i=e.physicalHeight)?i:e.height,unit:null!=(o=e.unit)?o:"px"},l=a.width/a.height,c="px"===a.unit?0:b.cB;a.width=n,a.height=Math.max(Math.min(Math.floor(a.width/l),this.MAX_SIZE),this.MIN_SIZE),a.physicalWidth=(0,s.floor)(a.physicalWidth*a.width/e.width,c),a.physicalHeight=(0,s.floor)(a.physicalHeight*a.height/e.height,c),f.Z.resizePage(t,e,a)}))}else e.forEach(((e,n)=>{var r,i,o;if(e.width*e.height>this.MAX_AREA){const a={width:e.width,height:e.height,physicalWidth:null!=(r=e.physicalWidth)?r:e.width,physicalHeight:null!=(i=e.physicalHeight)?i:e.height,unit:null!=(o=e.unit)?o:"px"},l="px"===a.unit?0:b.cB,c=a.width/a.height;a.width=Math.sqrt(this.MAX_AREA*c),a.height=Math.floor(a.width/c),a.width=Math.floor(a.width);const d=this.clampSize(a.width,a.height);a.width=d.width,a.height=d.height;const u="px"===a.unit?{width:a.width,height:a.height}:b.ZP.convertSize(a.width,a.height,"px",a.unit);a.physicalWidth=(0,s.floor)(u.width,l),a.physicalHeight=(0,s.floor)(u.height,l),f.Z.resizePage(n,e,a),t=!0}}));return t}clampSize(e,t){const n=e/t;return Math.max(e,t)>this.MAX_SIZE&&(n>1?(e=this.MAX_SIZE,t=Math.ceil(e/n)):(t=this.MAX_SIZE,e=Math.ceil(t*n))),Math.min(e,t)<this.MIN_SIZE&&(n>1?(t=this.MIN_SIZE,e=Math.floor(t*n)):(e=this.MIN_SIZE,t=Math.floor(e/n))),Math.max(e,t)>this.MAX_SIZE&&(n>1?e=this.MAX_SIZE:t=this.MAX_SIZE),{width:e,height:t}}getPageDefaultBleeds(e={physicalWidth:1080,physicalHeight:1080,unit:"px"},t=e.unit){const n=this.defaultBleed,r="px"===t?0:b.cB,i=b.ZP.getConvertDpi(e);return{top:(0,s.round)(b.ZP.convert(n,"mm",t,i.height),r),bottom:(0,s.round)(b.ZP.convert(n,"mm",t,i.height),r),left:(0,s.round)(b.ZP.convert(n,"mm",t,i.width),r),right:(0,s.round)(b.ZP.convert(n,"mm",t,i.width),r)}}getDefaultBleedMap(e){const t=this.defaultBleed,n=t=>({top:this.isDetailPage&&0!==e?0:t,bottom:this.isDetailPage&&e!==i.Z.getters.getPagesLength-1?0:t,left:t,right:t}),r=this.getPageDefaultBleeds(this.getPageSize(e),"px");return this.isDetailPage&&(0!==e&&(r.top=0),e!==i.Z.getters.getPagesLength-1&&(r.bottom=0)),{px:r,cm:n((0,s.round)(b.ZP.convert(t,"mm","cm"),b.cB)),mm:n(t),in:n((0,s.round)(b.ZP.convert(t,"mm","in"),b.cB))}}updatePagePos(e,t){const{x:n,y:r}=t;i.Z.commit("UPDATE_pagePos",{pageIndex:e,styles:_(_({},"undefined"!==typeof n&&{x:n}),"undefined"!==typeof r&&{y:r})})}updatePageInitPos(e,t){i.Z.commit("UPDATE_pageInitPos",{pageIndex:e,initPos:t})}setMobilePhysicalPage(e){i.Z.commit("SET_pagePhysicalSize",e)}logPageIndexInfo(){console.log(this.middlemostPageIndex,this.currActivePageIndex,this.currFocusPageIndex,this.currSelectedInfo.pageIndex)}}const z=new C;var T=z},58559:function(e,t,n){"use strict";var r=n(23931),i=n(52495),o=n(89497),s=n(50559),a=n(98824),l=n(47147),c=n(53556);class d{get status(){return o.Z.getters["payment/getStatus"]}get isAdmin(){return o.Z.getters["user/isAdmin"]}get isPro(){return o.Z.getters["payment/getIsPro"]}openPayment(e,t=""){o.Z.commit("brandkit/SET_isSettingsOpen",!1),o.Z.commit("payment/SET_initView",e),o.Z.commit("payment/SET_templateImg",t),c.Z.openPopup("payment")}checkPro(e,t){return!(!this.isAdmin&&!l.Z.inReviewMode)||(!(1===e.plan&&!this.isPro)||(this.openPayment(t),!1))}checkProGroupTemplate(e,t){const n=`https://template.vivipic.com/template/${t.id}/prev_4x?ver=${t.ver}`;return this._checkProTemplate(e.plan,n)}checkProTemplate(e){return e.url?this._checkProTemplate(e.plan,e.url):this.checkProGroupTemplate(e,e)}_checkProTemplate(e,t){return!(!this.isAdmin&&!l.Z.inReviewMode)||(!(1===e&&!this.isPro)||(this.openPayment("pro-template",t),!1))}checkCoupon(){const e=e=>{a.Z.setModalInfo(r.Z.global.tc("NN0709"),r.Z.global.tc(e),{msg:r.Z.global.tc("NN0518"),style:{width:"300px"},action:()=>{i.Z.push("/settings/payment")}})};return["Fail","Subscribed"].includes(this.status)?(e("NN0711"),!1):!["Leave","Abort","Canceled"].includes(this.status)||(e("NN0710"),!1)}contactUsUrl(){switch(r.Z.global.locale){case"tw":return"https://blog.vivipic.com/tw/contactus/";case"jp":return"https://blog.vivipic.com/jp/help/";default:return"https://blog.vivipic.com/us/contact/"}}contactUs(){l.Z.openOrGoto(this.contactUsUrl())}errorHandler(e,t="brandkit"){switch(e){case"EXCEED_SIZE_LIMIT":a.Z.setModalInfo(r.Z.global.t("NN0137"),[r.Z.global.t("NN0645")]);break;case"EXCEED_CAPACITY":a.Z.setModalInfo(r.Z.global.t("NN0137"),[r.Z.global.t("NN0644")]);break;case"NOT_SUBSCRIBED":this.openPayment(t);break;case"BG_DEPLETED_FREE":this.openPayment("bgrm");break;case"BG_DEPLETED_TRIAL":case"BG_DEPLETED_YEAR":a.Z.setModalInfo(r.Z.global.t("NN0646"),[r.Z.global.t("NN0648")],{msg:r.Z.global.t("NN0642"),style:{width:"230px",height:"44px"},action:this.contactUs});break;case"BG_DEPLETED_MONTH":a.Z.setModalInfo(r.Z.global.t("NN0646"),[r.Z.global.t("NN0647")],{msg:r.Z.global.t("NN0642"),class:"btn-light-mid",style:{width:"140px",height:"44px",border:"1px solid #4EABE6"},action:this.contactUs},{msg:r.Z.global.t("NN0564",{period:r.Z.global.t("NN0515")}),style:{width:"243px",height:"44px"},action:()=>{this.openPayment("switch1")}});break;default:(0,s.h4)({group:"error",text:e})}}}t["Z"]=new d},47147:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(89497),i=n(78871),o=n(53074),s=Object.defineProperty,a=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t,n)=>(a(e,"symbol"!==typeof t?t+"":t,n),n),c=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class d{constructor(){l(this,"eventTestMode",!1),l(this,"callbackMap",{}),l(this,"eventMap",{}),l(this,"errorMessageMap",{}),l(this,"apiQueueMap",{})}enterEventTestMode(){this.eventTestMode=!0}callbackRecordHook(e,...t){r.Z.commit("webView/UPDATE_addCallbackRecord",{name:e,id:i.Z.generateRandomString(8),args:t})}filterLog(e,t){return!1}filterCallbackLog(e){return!1}registerCallbacks(e){for(const t of this.CALLBACK_MAPS[e])window[t]=(...e)=>{this.filterCallbackLog(t)||o.Z.setLogAndConsoleLog(t,...e),this.eventTestMode&&this.callbackRecordHook(t,...e);const n=this;n[t].bind(this)(...e)}}getDefaultUserInfo(){return this.STANDALONE_USER_INFO}getEmptyMessage(){return{empty:""}}sendToIOS(e,t,n=!1){this.filterLog(e,t)||o.Z.setLogAndConsoleLog(e,t);try{const n=window.webkit;if(!n)return;const r=n.messageHandlers[e];if(!r)throw new Error(`message type: ${e} does not exist!`);r.postMessage(i.Z.unproxify(t))}catch(r){if(n)throw r;o.Z.setLogForError(r)}}checkVersion(e){var t;const n=null!=(t=this.getUserInfoFromStore().appVer)?t:"0.0";return i.Z.versionCheck({greaterThan:e,version:n})}checkOSVersion(e){var t;const n=null!=(t=this.getUserInfoFromStore().osVer)?t:"0.0";return i.Z.versionCheck({greaterThan:e,version:n})}registerResolve(e,t){if(void 0!==this.callbackMap[e])throw new Error(`duplicate event callback: ${e} already exists!`);this.callbackMap[e]=t}callIOSAsAPI(...e){return c(this,null,(function*(){var t;const n=e[2],{cancelOnConfict:r=!1}=null!=(t=e[3])?t:{},o=i.Z.generateRandomString(12);void 0===this.apiQueueMap[n]&&(this.apiQueueMap[n]=[]),r&&void 0!==this.callbackMap[n]&&this.callbackMap[n]({data:null,isTimeouted:!1}),this.apiQueueMap[n].push({eventId:o,args:e});const s=yield new Promise((e=>{1===this.apiQueueMap[n].length&&this.processApiQueue(n),this.eventMap[o]=e}));return delete this.eventMap[o],s}))}processApiQueue(e){return c(this,null,(function*(){const t=this.apiQueueMap[e][0];if(t){const n=yield this.callIOSAsAPICore(...t.args);this.eventMap[t.eventId](n),this.apiQueueMap[e].shift(),this.processApiQueue(e)}}))}callIOSAsAPICore(e,t,n){return c(this,arguments,(function*(e,t,n,{timeout:r=5e3,retry:s=!1,retryTimes:a=0,cancelOnConfict:l=!1}={}){let c;try{if(-1===r)c=(yield new Promise((r=>{this.registerResolve(n,r),this.sendToIOS(e,t,!0)}))).data,delete this.callbackMap[n];else{const l=yield Promise.race([new Promise((r=>{this.registerResolve(n,r),this.sendToIOS(e,t,!0)})),new Promise((e=>{setTimeout((()=>{e({data:null,isTimeouted:!0})}),r)}))]);delete this.callbackMap[n],c=l.data,l.isTimeouted&&(o.Z.setLogAndConsoleLog(`${e} timeouted after ${r}ms with message:`,t),s&&a<2&&(o.Z.setLogAndConsoleLog(`retry: ${a+1}`),i.Z.sleep(1e3),c=yield this.callIOSAsAPI(e,t,n,{timeout:r,retry:s,retryTimes:a+1})))}}catch(d){o.Z.setLog(`Error occurs in callIOSAsAPI with type: ${e}, message: ${t}, event: ${n}`),o.Z.setLogForError(d),c=null}return c}))}handleCallback(e,t){this.callbackMap[e]&&this.callbackMap[e]({data:t,isTimeouted:!1})}}var u=Object.defineProperty,g=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=Reflect.get,v=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||(t={}))y.call(t,n)&&v(e,n,t[n]);if(h)for(var n of h(t))f.call(t,n)&&v(e,n,t[n]);return e},N=(e,t)=>g(e,p(t)),S=(e,t,n)=>(v(e,"symbol"!==typeof t?t+"":t,n),n),x=(e,t,n)=>b(m(e),n,t),P=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const I=["Editor"];class _ extends d{constructor(){super(...arguments),S(this,"appLoadedSent",!1),S(this,"toSendStatistics",!1),S(this,"STANDALONE_USER_INFO",{hostId:"",appVer:"100.0",locale:"us",isFirstOpen:!1,osVer:"100.0",statusBarHeight:0,homeIndicatorHeight:0,modelName:"web"}),S(this,"ROUTER_CALLBACKS",["launchResult","getStateResult","setStateDone"]),S(this,"MAIN_CALLBACKS",["updateInfoDone","loginResult","uploadImageURL"]),S(this,"CALLBACK_MAPS",{router:this.ROUTER_CALLBACKS,main:this.MAIN_CALLBACKS}),S(this,"sendToIOS",((...e)=>{this.inBrowserMode||super.sendToIOS(...e)})),S(this,"callIOSAsAPI",((...e)=>P(this,null,(function*(){if(!this.inBrowserMode)return x(_.prototype,this,"callIOSAsAPI").call(this,...e)}))))}get inBrowserMode(){return r.Z.getters["webView/getInBrowserMode"]}get inReviewMode(){return r.Z.getters["webView/getInReviewMode"]}detectIfInApp(){var e,t;void 0!==(null==(t=null==(e=window.webkit)?void 0:e.messageHandlers)?void 0:t.APP_LOADED)&&this.leaveBrowserMode()}leaveBrowserMode(){r.Z.commit("webView/SET_inBrowserMode",!1)}getUserInfoFromStore(){return r.Z.getters["webView/getUserInfo"]}openOrGoto(e){window.open(e,this.inBrowserMode?"_blank":"_self")}sendAppLoaded(){this.inBrowserMode||this.appLoadedSent||(this.sendToIOS("APP_LOADED",{hideReviewRequest:!1}),this.appLoadedSent=!0)}getUserInfo(){return P(this,null,(function*(){if(this.inBrowserMode)return this.getUserInfoFromStore();yield this.callIOSAsAPI("APP_LAUNCH",this.getEmptyMessage(),"launch");const e=this.getUserInfoFromStore(),t=yield fetch(`https://template.vivipic.com/static/appCaps.json?ver=${i.Z.generateRandomString(6)}`),n=yield t.json();return r.Z.commit("webView/UPDATE_detectIfInReviewMode",n.review_ver),this.sendStatistics(!0,e.country),e}))}launchResult(e){r.Z.commit("webView/SET_userInfo",e),this.handleCallback("launch")}login(e,t){return P(this,null,(function*(){const n=yield this.callIOSAsAPI("LOGIN",{type:e,locale:t},"login",{timeout:-1});if(n)return n;throw new Error("login failed")}))}loginResult(e){e.flag="string"===typeof e.flag?parseInt(e.flag):e.flag,this.handleCallback("login",e)}updateUserInfo(e){return P(this,null,(function*(){this.inBrowserMode||(r.Z.commit("webView/UPDATE_userInfo",e),yield this.callIOSAsAPI("UPDATE_USER_INFO",e,"update-user-info"))}))}updateLocale(e){return P(this,null,(function*(){this.inBrowserMode||(yield this.updateUserInfo({locale:e}))}))}updateInfoDone(e){var t;"0"!==e.flag&&(o.Z.setLogAndConsoleLog(e.msg),this.errorMessageMap.updateUserInfo=null!=(t=e.msg)?t:""),this.handleCallback("update-user-info")}uploadImageURL(e){this.handleCallback("upload-image",e)}setState(e,t){return P(this,null,(function*(){this.inBrowserMode||(yield this.callIOSAsAPI("SET_STATE",{key:e,value:t},"setState"))}))}setStateDone(){this.handleCallback("setState")}getState(e){return P(this,null,(function*(){if(!this.inBrowserMode)return this.checkVersion("1.0.3")?yield this.callIOSAsAPI("GET_STATE",{key:e},"getState",{retry:!0}):void 0}))}getStateResult(e){this.handleCallback("getState",e.value?JSON.parse(e.value):void 0)}changeStatusBarTextColor(e){return P(this,null,(function*(){if(this.inBrowserMode)return;const t=I.includes(e)?"white":"black";yield this.callIOSAsAPI("UPDATE_USER_INFO",{statusBarColor:t},"update-user-info")}))}switchDomain(e){this.inBrowserMode||this.sendToIOS("SWITCH_DOMAIN",{domain:e})}sendStatistics(e=!1,t){return P(this,null,(function*(){if(this.inBrowserMode||e){const e={token:r.Z.getters["user/getToken"],device:r.Z.getters["user/getDevice"]};yield r.Z.dispatch("user/updateUser",N(w({},e),{app:this.inBrowserMode?0:1,country:t})),this.toSendStatistics=!1}else this.toSendStatistics=!0}))}sendAdEvent(e,t={}){this.inBrowserMode||this.sendToIOS("SEND_AD_EVENT",{eventName:e,param:t})}ratingRequest(e){this.inBrowserMode||this.sendToIOS("RATING_REQUEST",{type:e})}getIosImg(e=1){return P(this,null,(function*(){var t;const{images:n}=null!=(t=yield this.callIOSAsAPI("UPLOAD_IMAGE",{limit:e},"upload-image",{timeout:6e4,cancelOnConfict:!0}))?t:{images:[]};return console.log(n),n}))}}var k=new _},53556:function(e,t,n){"use strict";var r=n(89497),i=n(53650),o=n(29651),s=n(1890),a=n(50543),l=Object.defineProperty,c=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t,n)=>(c(e,"symbol"!==typeof t?t+"":t,n),n),u=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class g{constructor(){d(this,"currPopupType"),d(this,"event"),d(this,"eventHash"),d(this,"currEvent"),d(this,"popupEl"),this.currPopupType="",this.event=new i.EventEmitter,this.eventHash={},this.currEvent="",this.popupEl=null}get isPopupOpen(){return r.Z.getters["popup/getIsPopupOpen"]}get popupComponent(){return r.Z.getters["popup/getPopupComponent"]}get sliderConfig(){return r.Z.getters["popup/getSliderConfig"]}on(e,t){this.eventHash[e]&&(this.event.off(e,this.eventHash[e]),delete this.eventHash[e]),this.event.on(e,t),this.eventHash[e]=t}setCurrEvent(e){this.currEvent=e}setSliderConfig(e){r.Z.commit("popup/SET_sliderConfig",e)}clearSliderConfig(){r.Z.commit("popup/UPDATE_clearSliderConfig")}openPopupNearTarget(e,t){(0,o.Y3)((()=>{var n;const[r,i]=[this.popupEl.offsetWidth,this.popupEl.offsetHeight],[o,s]=[window.innerWidth||document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight],{left:a,bottom:l,right:c,top:d}=null==(n=document.querySelector(e))?void 0:n.getBoundingClientRect();let u=0,g=0;const p="left"===t.x?a:c-r,h="bottom"===t.y?l:d-i;"left"===t.x&&a+r>o&&(u=a+r-o),"bottom"===t.y&&l+i>s&&(g=l+i-s),this.popupEl.style.transform=`translate3d(${p-u}px, ${h-g}px,0)`}))}openPopupOnMousePos(e){(0,o.Y3)((()=>{const[t,n]=[this.popupEl.offsetWidth,this.popupEl.offsetHeight],[r,i]=[window.innerWidth||document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight],o=a.Z.getMouseAbsPoint(e);let s=0,l=0;o.x+t>r&&(s=o.x+t-5-r),o.y+n>i&&(l=o.y+n-5-i),this.popupEl.style.transform=`translate3d(${o.x-s}px, ${o.y-l}px,0)`}))}openPopup(e,t,n={}){this.popupEl||(this.popupEl=document.querySelector(".popup"));const i=["order","align","flip","slider","file","line-template","download","page-scale"],o={order:".layers-alt",align:".btn-align",flip:".btn-flip",slider:".btn-opacity",file:".btn-file",download:".btn-download","page-scale":".btn-page-resize"},s=["layer","page","guideline","submit"];if(r.Z.dispatch("popup/openPopup",{component:`popup-${e}`,properties:t,props:n,closeHandler:()=>!1}),this.currPopupType=e,i.includes(e)){const n=(null==t?void 0:t.target)?t.target:o[e],r=(null==t?void 0:t.posX)?t.posX:"left",i=(null==t?void 0:t.posY)?t.posY:"bottom";this.openPopupNearTarget(n,{x:r,y:i})}else s.includes(e)&&(null==t?void 0:t.event)&&this.openPopupOnMousePos(t.event)}closePopup(){return u(this,null,(function*(){r.Z.dispatch("popup/closePopup"),this.currPopupType="",this.popupEl&&(this.popupEl.style.transform=""),this.clearSliderConfig()}))}}const p=new g;t["Z"]=(0,s.qj)(p)},60575:function(e,t,n){"use strict";n.d(t,{u:function(){return a}});var r=Object.defineProperty,i=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o=(e,t,n)=>(i(e,"symbol"!==typeof t?t+"":t,n),n);class s{constructor(e){o(this,"eventIds"),o(this,"eventMap"),o(this,"isHandlingAsyncTask"),o(this,"batchNum"),this.eventIds=[],this.eventMap=new Map,this.isHandlingAsyncTask=!1,this.batchNum=null!=e?e:3}push(e,t,n){this.eventMap.set(e,t),this.eventIds.push(e),this.isHandlingAsyncTask||(this.eventIds.length>=this.batchNum?this.handleAsyncTask():setTimeout((()=>{this.handleAsyncTask()}),10))}deleteEvent(e,t){this.eventMap.has(e)&&(this.eventMap.delete(e),this.eventIds.splice(this.eventIds.indexOf(e),1))}handleAsyncTask(){if(0===this.eventIds.length)return void(this.isHandlingAsyncTask=!1);this.isHandlingAsyncTask=!0;const e=[],t=[];for(let n=0;n<this.batchNum;n++){const n=this.eventIds.shift();if(void 0===n)break;{t.push(n);const r=this.eventMap.get(n);"function"===typeof r&&e.push(r())}}Promise.all(e).then((()=>{t.forEach((e=>{this.eventMap.delete(e)})),this.handleAsyncTask()}))}}const a=new s},53089:function(e,t,n){"use strict";var r=n(89497),i=n(40881),o=n(62013),s=n(3162),a=n(75231),l=n(32905),c=n(15820),d=n(46921),u=n(60410),g=n(89594);class p{scaleAndMoveLayer(e,t,n,r,l,d){var g,p,h,m;n.moved||(n.moved=!0);let y,f=n.styles.width*r,b=n.styles.height*r,v=n.styles.scale*r;switch(n.type){case"image":{y=n;const{imgWidth:i,imgHeight:o,imgX:a,imgY:l}=y.styles;s.Z.updateImgSize(e,t,i*r,o*r),s.Z.updateImgPos(e,t,a*r,l*r);break}case"text":y=n,-1!==y.widthLimit&&i.Z.updateLayerProps(e,t,{widthLimit:y.styles.writingMode.includes("vertical")?b:f});break;case"frame":if(y=n,o.Z.isImageFrame(y)){let{imgWidth:n,imgHeight:i,imgX:s,imgY:l}=y.clips[0].styles;n*=r,i*=r,l*=r,s*=r,a.ZP.updateLayerStyles(e,t,{initWidth:f,initHeight:b}),o.Z.updateFrameLayerStyles(e,t,0,{width:f,height:b,imgWidth:n,imgHeight:i,imgX:s,imgY:l})}break;case void 0:case"shape":if(y=n,"D"===y.category){const n=c.Z.getLineQuadrant(null!=(g=y.point)?g:[]),{width:o,height:s}=c.Z.lineDimension(null!=(p=y.point)?p:[]),{size:l}=y;if(!l)break;const d=l[0],h=(0,u.round)(d*r,2),{point:m,realWidth:w,realHeight:N}=c.Z.computePointForDimensions(n,h,o*r,s*r);i.Z.updateShapeLinePoint(e,t,m),f=w,b=N,a.ZP.updateLayerStyles(e,t,{initWidth:f,initHeight:b}),v=y.styles.scale,a.ZP.updateLayerProps(e,t,{size:[h]})}if("E"===y.category){const{size:n}=y;if(!n)break;const o=n[0],s=(0,u.round)(o*r,2);v=1;const l=i.Z.getCorRadValue([f,b],i.Z.getCorRadPercentage(y.vSize,n,null!=(h=y.shapeType)?h:""),null!=(m=y.shapeType)?m:"");i.Z.updateShapeVSize(e,t,[f,b]),a.ZP.updateLayerProps(e,t,{size:[s,l]})}break;case"tmp":throw new Error("Unexpected tmp layer encountered")}const w={x:n.styles.x*r+l,y:n.styles.y*r+d};i.Z.updateLayerSize(e,t,f,b,v),i.Z.updateLayerPos(e,t,w.x,w.y)}scaleAndMoveGuideLines(e,t,n,r){e.v=e.v.map((e=>e*t+n)),e.h=e.h.map((e=>e*t+r))}scaleAndMoveLayers(e,t,n,r,i){return t.layers.forEach(((t,o)=>{this.scaleAndMoveLayer(e,o,t,n,r,i)})),t.guidelines&&this.scaleAndMoveGuideLines(t.guidelines,n,r,i),t}scaleBackground(e,t,n){l.Z.updateBackgroundImagePos(e,t.backgroundImage.posX*n,t.backgroundImage.posY*n);const r=t.backgroundImage.config.styles.imgWidth*n,i=t.backgroundImage.config.styles.imgHeight*n;l.Z.updateBackgroundImageStyles(e,{width:r,height:i,imgWidth:r,imgHeight:i})}resizePage(e,t,n){n.physicalWidth&&n.physicalHeight&&n.unit||(n.physicalWidth=n.width,n.physicalHeight=n.height,n.unit="px");const i={top:0,bottom:0,left:0,right:0};let o=i,a=i;const c=l.Z.getPageDPI({width:n.width,height:n.height,physicalWidth:n.physicalWidth,physicalHeight:n.physicalHeight,unit:n.unit}),p=n.unit||"px";if(t.isEnableBleed&&t.bleeds&&t.physicalBleeds&&(o=t.bleeds,a=t.physicalBleeds,"px"!==t.unit||"px"!==p)){const i="px"===p?d.ZP.getConvertDpi({physicalWidth:n.physicalWidth,physicalHeight:n.physicalHeight,unit:n.unit}):c,s="px"===p?0:d.cB,g=e=>"left"===e||"right"===e?i.width:i.height,h="px"===p?l.Z.MAX_BLEED.px:(0,u.floor)(d.ZP.convert(l.Z.MAX_BLEED.mm,"mm",p),s),m=l.Z.getDefaultBleedMap(e),y=(0,u.isEqual)(m[t.unit],a),f=l.Z.isDetailPage&&"px"!==p;y?a=m[p]:Object.keys(a).forEach((e=>{a[e]=d.ZP.convert(a[e],t.unit,p,g(e)),a[e]=(0,u.round)(a[e],s),a[e]=Math.min(a[e],h)})),f||Object.keys(a).forEach((e=>{o[e]=d.ZP.convert(a[e],p,"px",g(e)),o[e]=(0,u.round)(o[e])})),Object.keys(o).forEach((e=>{const t=(0,u.floor)(d.ZP.convert(h,p,"px",g(e)));o[e]=Math.min(o[e],t)})),r.Z.commit("SET_bleeds",{pageIndex:e,bleeds:o,physicalBleeds:a})}const h=l.Z.getPageSizeWithBleeds(t),m=t.width/t.height,y=n.width/n.height;let f;y>m?(f=n.height/t.height,this.scaleAndMoveLayers(e,t,f,(t.height*y-t.width)/2*f,0)):(f=n.width/t.width,this.scaleAndMoveLayers(e,t,f,0,(t.width/y-t.height)/2*f));const b={width:n.width+h.bleeds.left+h.bleeds.right,height:n.height+h.bleeds.top+h.bleeds.bottom,physicalWidth:n.physicalWidth+h.physicalBleeds.left+h.physicalBleeds.right,physicalHeight:n.physicalHeight+h.physicalBleeds.top+h.physicalBleeds.bottom,unit:n.unit};if(Math.abs(y-m)<Number.EPSILON)this.scaleBackground(e,t,f);else{let{width:r,height:i,posX:o,posY:a}=s.Z.adaptToSize({width:t.backgroundImage.config.styles.imgWidth||t.backgroundImage.config.styles.width||t.width,height:t.backgroundImage.config.styles.imgHeight||t.backgroundImage.config.styles.height||t.height},"px"===n.unit?n:b);"px"!==n.unit&&(o-=t.bleeds.left,a-=t.bleeds.top),l.Z.updateBackgroundImagePos(e,o,a),l.Z.updateBackgroundImageStyles(e,{width:r,height:i,imgWidth:r,imgHeight:i})}g.Z.removeInvalidGuides(e,n),l.Z.setPageSize(e,n.width,n.height,n.physicalWidth,n.physicalHeight,n.unit)}testResizeAllPages(){const{getPages:e}=l.Z;e.forEach(((e,t)=>{this.resizePage(t,e,{width:116,height:116}),r.Z.commit("UPDATE_pageProps",{pageIndex:0,props:{width:116,height:116}})}))}}t["Z"]=new p},89594:function(e,t,n){"use strict";var r=n(89497),i=n(53650),o=n(50543),s=n(32905),a=n(46921),l=Object.defineProperty,c=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t,n)=>(c(e,"symbol"!==typeof t?t+"":t,n),n);class u{constructor(){d(this,"RULER_SIZE",20),d(this,"event"),d(this,"eventHash"),d(this,"templates"),d(this,"fbCover"),d(this,"lastMapedInfo"),this.event=new i.EventEmitter,this.eventHash={},this.lastMapedInfo={type:"v",index:-1,pageIndex:-1},this.templates={type1:[{v:[],h:[]},{v:[50],h:[]},{v:[],h:[50]},{v:[],h:[33.33,66.66]},{v:[50],h:[50]},{v:[50],h:[50]},{v:[],h:[50,75]},{v:[33.33,66.66],h:[50]},{v:[33.33,66.66],h:[33.33,66.66]}],type2:[{v:[33.33,66.66],h:[33.33,66.66]},{v:[50],h:[50]},{v:[50],h:[33.33,66.66]}]},this.fbCover={v:[],h:[120,573]}}get currFocusPage(){return s.Z.currFocusPage}get currFocusPageGuidelineNum(){return{v:this.currFocusPage.guidelines.v.length,h:this.currFocusPage.guidelines.h.length}}get scaleRatio(){return r.Z.getters.getPageScaleRatio}get showRuler(){return r.Z.getters.getShowRuler}get showGuideline(){return r.Z.getters.getShowGuideline}get lockGuideline(){return r.Z.getters.getLockGuideline}get isDragging(){return r.Z.getters.getIsDraggingGuideline}on(e,t){this.eventHash[e]&&(this.event.off(e,this.eventHash[e]),delete this.eventHash[e]),this.event.on(e,t),this.eventHash[e]=t}mapGuidelineToPage(e,t,n){var r,i,o,a;const l=e.getBoundingClientRect(),c=-1===n?s.Z.currFocusPageIndex:n,d=-1===n?this.currFocusPage:s.Z.getPage(c);switch(t){case"v":{const e=null!=(i=null==(r=document.getElementsByClassName(`nu-page-bleed-${c}`)[0])?void 0:r.getBoundingClientRect())?i:document.getElementsByClassName(`nu-page-${c}`)[0].getBoundingClientRect(),t=(l.left-e.left)/(this.scaleRatio/100);return{pos:t,outOfPage:t<0||t>d.width}}case"h":{const e=null!=(a=null==(o=document.getElementsByClassName(`nu-page-bleed-${c}`)[0])?void 0:o.getBoundingClientRect())?a:document.getElementsByClassName(`nu-page-${c}`)[0].getBoundingClientRect(),t=(l.top-e.top)/(this.scaleRatio/100);return{pos:t,outOfPage:t<0||t>d.height}}}return{pos:-1,outOfPage:!0}}getOverlappedPageIndex(e,t){const n=e.getBoundingClientRect();for(const[r,i]of s.Z.getPages.entries())switch(t){case"v":{const e=document.getElementsByClassName(`nu-page-${r}`)[0].getBoundingClientRect(),t=(n.left-e.left)/(this.scaleRatio/100);if(t>=0&&t<=i.width)return r;break}case"h":{const e=document.getElementsByClassName(`nu-page-${r}`)[0].getBoundingClientRect(),t=(n.top-e.top)/(this.scaleRatio/100);if(t>=0&&t<=i.height)return r;break}}return-1}getMouseOverPageIndex(e){const t=o.Z.getMouseAbsPoint(e);for(const n in s.Z.getPages){const e=document.getElementsByClassName(`nu-page-${n}`)[0].getBoundingClientRect();if(t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height)return parseInt(n,10)}return-1}getMostlyOverlappedPageIndex(e){const t=document.getElementsByClassName("editor-view")[0].getBoundingClientRect(),n=o.Z.getMouseAbsPoint(e);let r=[],i=-1;for(const o in s.Z.getPages){const e=document.getElementsByClassName(`nu-page-${o}`)[0].getBoundingClientRect(),s=parseInt(o,10);if(n.x<e.x||n.x>e.x+e.width||e.y>t.height||e.y+e.height<0)continue;const a=Math.min(e.y+e.height,t.height)-Math.max(e.y,0),l={index:s,yDiff:Math.min(Math.abs(n.y-e.y),Math.abs(n.y-e.y-e.height))};a>i?(i=a,r=[l]):a===i&&r.push(l)}if(0===r.length)return-1;let a=-1,l=Number.MAX_SAFE_INTEGER;for(const o of r)o.yDiff<l&&(a=o.index,l=o.yDiff);return a}mapSnaplineToGuidelineArea(e,t,n){var r,i,o,s;switch(t){case"v":{const t=null!=(i=null==(r=document.getElementsByClassName(`nu-page-bleed-${n}`)[0])?void 0:r.getBoundingClientRect())?i:document.getElementsByClassName(`nu-page-${n}`)[0].getBoundingClientRect(),o=e*(this.scaleRatio/100)+t.left;return o}case"h":{const t=null!=(s=null==(o=document.getElementsByClassName(`nu-page-bleed-${n}`)[0])?void 0:o.getBoundingClientRect())?s:document.getElementsByClassName(`nu-page-${n}`)[0].getBoundingClientRect(),r=e*(this.scaleRatio/100)+t.top;return r}}return-1}addGuidelineToPage(e,t,n){this.lastMapedInfo.index=this.currFocusPageGuidelineNum[t],this.lastMapedInfo.type=t,this.lastMapedInfo.pageIndex=void 0!==n?n:s.Z.currFocusPageIndex;const i=void 0!==n?n:s.Z.currFocusPageIndex;r.Z.commit("ADD_guideline",{pos:e,type:t,pageIndex:i})}clearGuidelines(e=!1){r.Z.commit("CLEAR_guideline",e?this.lastMapedInfo.pageIndex:void 0)}setShowRuler(e){r.Z.commit("SET_showRuler",e)}setShowGuideline(e){r.Z.commit("SET_showGuideline",e)}setLockGuideline(e){r.Z.commit("SET_lockGuideline",e)}setIsDragging(e){r.Z.commit("SET_isDraggingGuideline",e)}deleteGuideline(e,t,n){r.Z.commit("DELETE_guideline",{index:e,type:t,pageIndex:n})}setGuideline(e,t){r.Z.commit("SET_guideline",{guidelines:t,pageIndex:e})}deleteLastMapedGuideline(){const{index:e,type:t,pageIndex:n}=this.lastMapedInfo;this.deleteGuideline(e,t,n)}addLineTemplate(e,t){this.clearGuidelines(),this.setShowGuideline(!0);const n=this.templates[t][e],r=n.v.map((e=>this.currFocusPage.width*(e/100))),i=n.h.map((e=>this.currFocusPage.height*(e/100)));r.forEach((e=>{this.addGuidelineToPage(e,"v")})),i.forEach((e=>{this.addGuidelineToPage(e,"h")}))}addToSpecPos(e){this.clearGuidelines(),this.setShowGuideline(!0),e.v.forEach((e=>{this.addGuidelineToPage(e,"v")})),e.h.forEach((e=>{this.addGuidelineToPage(e,"h")}))}removeInvalidGuides(e,t){const{guidelines:n}=s.Z.getPage(e),{width:r,height:i}=t;this.setGuideline(e,{v:n.v.filter((e=>e<=r)),h:n.h.filter((e=>e<=i))})}adjRulerScale(e=("px"===this.currFocusPage.unit?20:1),t=s.Z.getPageDPI().width){const n="px"===this.currFocusPage.unit?20:1,r=5,i=30,o=()=>a.ZP.convert(e,this.currFocusPage.unit,"px",t)*this.scaleRatio/100;for(let s=0;s<r&&o()>2*i&&e>n;s++)"5"===e.toString()[0]&&(e=e/5*4),e=Math.floor(e/2);e<n&&(e=n);for(let s=0;s<r&&o()<i;s++)"2"===e.toString()[0]&&(e=e/2*2.5),e*=2;return e}}const g=new u;t["Z"]=g},15820:function(e,t,n){"use strict";var r=n(89497),i=n(86052),o=n(75231),s=n(65144),a=n(78871),l=n(32905),c=n(56556),d=n(13637),u=n(60410),g=n.n(u),p=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class h{get hasMultiColors(){const e=o.ZP.getCurrLayer;return("tmp"===e.type||"group"===e.type)&&(this.getSingleColorObjNum>=2&&!e.layers.some((e=>"shape"===e.type&&e.active)))}get getSingleColorObjNum(){const e=o.ZP.getCurrLayer;let t=0;for(const n of e.layers)"shape"===n.type&&n.color&&1===n.color.length&&t++;return t}addStyleTag(e){const t=document.createElement("style"),n=document.createTextNode(e);return t.appendChild(n),document.head.appendChild(t),n}classGenerator(){const e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t=e.length;let n="_";for(let r=0;r<8;r++){const r=Math.floor(Math.random()*t);n+=e[r]}return n}styleFormatter(e,t,n,r,i,o,s){var a;let l=t.join("!!");if(n)for(let c=0;c<n.length;c++){const e=new RegExp("\\$color\\["+c+"\\]","g");l=l.replace(e,n[c])}if(r)for(let c=0;c<r.length;c++){const e=new RegExp("\\$size\\["+c+"\\]","g");l=l.replace(e,r[c].toString())}if(i&&(l=l.replace(/\$dash/g,i.join(" ").replace("1",(2.5*(null!=(a=null==r?void 0:r[0])?a:1)).toString()))),o&&(l=l.replace(/\$cap/g,o)),void 0!==s){const e=s?n[0]:"none";l=l.replace(/\$fillcolor/g,e)}return l.split("!!")}transFormatter(e,t,n){let r=t.join("!!");const i=n.cSize,o=n.pSize,s=n.pDiff,a=1+s[0]/o[0],l=1+s[1]/o[1],c=i[0]*(1-a),d=i[1]*(1-l),u=-1*o[0]*(1-a),g=-1*o[1]*(1-l);return r=r.replace(/\$sx/g,a.toString()),r=r.replace(/\$sy/g,l.toString()),r=r.replace(/\$txp/g,c.toString()),r=r.replace(/\$typ/g,d.toString()),r=r.replace(/\$txc/g,u.toString()),r=r.replace(/\$tyc/g,g.toString()),r.split("!!")}svgFormatter(e,t,n,r,i,o,s){let a=e;for(let d=0;d<n.length;d++){const e=new RegExp("\\$style\\["+d+"\\]_ID","g");a=a.replace(e,`${t}S${d}_ID`);const r=new RegExp("\\$style\\["+d+"\\]","g");a=a.replace(r,`${n[d]}`)}for(let d=0;d<r.length;d++){const e=new RegExp("\\$trans\\["+d+"\\]","g");a=a.replace(e,`${r[d]}`)}for(let d=0;d<r.length;d++){const e=new RegExp("\\$mtrans\\["+d+"\\]","g");a=a.replace(e,`${r[d]}`)}if(a=a.replace(/\$svgId/g,`${t}SVG`),void 0!==(null==i?void 0:i.length))for(let d=0;d<i.length;d++){const e=new RegExp("\\$point\\["+d+"\\]","g");a=a.replace(e,i[d].toString())}if(void 0!==(null==o?void 0:o.length))for(let d=0;d<o.length;d++){const e=new RegExp("\\$svgParam\\["+d+"\\]","g");a=a.replace(e,o[d].toString())}void 0!==s&&(a=a.replace(/\$patchedX\(([.\d]+)\)/g,((e,t)=>Math.max(Number(t)+s[0],0).toString())),a=a.replace(/\$patchedY\(([.\d]+)\)/g,((e,t)=>Math.max(Number(t)+s[1],0).toString())));const l=(new DOMParser).parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">${a}</svg>`,"image/svg+xml"),c=l.childNodes[0];return this.mergeClassAndStyle(c),a=(new XMLSerializer).serializeToString(c),a=a.replace(/<svg[^>]*>/g,""),a=a.replace(/<\/svg>/g,""),a}mergeClassAndStyle(e){var t,n,r,i;for(const o of e.childNodes){const e=o;if(e.attributes){const o=null!=(n=null==(t=e.attributes.getNamedItem("class"))?void 0:t.value)?n:"",s=null!=(i=null==(r=e.attributes.getNamedItem("style"))?void 0:r.value)?i:"",a=o+s;e.removeAttribute("class"),a&&e.setAttribute("style",a)}o.hasChildNodes()&&this.mergeClassAndStyle(o)}}isSvgImg(e){return!!e.is_img}svgImgHandler(e,t){return p(this,null,(function*(){const{designId:n,styles:{x:r,y:i,width:s,height:a,horizontalFlip:l,verticalFlip:u,rotate:g,opacity:p}}=t,{pageIndex:h,layerIndex:m,subLayerIdx:y}=e;let f;"undefined"!==typeof y&&-1!==y&&(f=o.ZP.getLayer(h,m));const b={type:"svg",userId:"",assetId:n},v=d.Z.newImage({srcObj:b,styles:{x:r,y:i,width:s,height:a,horizontalFlip:l,verticalFlip:u,rotate:g,opacity:p},parentLayerStyles:null==f?void 0:f.styles});f?(o.ZP.deleteSubLayer(h,m,null!=y?y:-1),o.ZP.addSubLayer(h,m,null!=y?y:-1,v)):(o.ZP.deleteLayer(h,m),o.ZP.addLayersToPos(h,[v],m),c.Z.reassignZindex(h))}))}fetchSvg(e){return p(this,null,(function*(){const t={type:5,id:e.designId,ver:r.Z.getters["user/getVerUni"]};return(yield i.ZP.fetch(t)).jsonData}))}addComputableInfo(e){return p(this,null,(function*(){var t,n,o,s,a,l,c,d,u;if("shape"===e.type){const g=e,p=[];let h;switch(g.category){case"D":g.styleArray=["stroke:$color[0];stroke-width:$size[0];stroke-dasharray:$dash;stroke-linecap:$cap"],g.markerTransArray=["transform: translate($txmspx, $tymspx) rotate($romsdeg) $finetunes scale($size[0]);","transform: translate($txmepx, $tymepx) rotate($romedeg) $finetunee scale($size[0]);"],g.markerWidth=[],g.trimWidth=[],g.trimOffset=[];for(const e of null!=(t=g.markerId)?t:[])if("none"===e)g.styleArray.push(""),h=null==(n=g.markerWidth)?void 0:n.push(0),h=null==(o=g.trimWidth)?void 0:o.push(void 0),h=null==(s=g.trimOffset)?void 0:s.push(-1),p.push("");else{const t={id:e,type:9,ver:r.Z.getters["user/getVerUni"]},n=(yield i.ZP.get(t)).jsonData;g.styleArray.push(n.styleArray[0]),h=null==(a=g.markerWidth)?void 0:a.push(n.vSize[0]),h=null==(l=g.trimWidth)?void 0:l.push(n.trimWidth),h=null==(d=g.trimOffset)?void 0:d.push(null!=(c=n.trimOffset)?c:-1),p.push(n.svg)}g.svg=m.genLineSvgTemplate(p[0],p[1]),g.pDiff=[0,0],g.pSize=[0,0],g.cSize=[0,0],g.vSize=[0,0],g.className=g.className?g.className:m.classGenerator();break;case"E":g.styleArray=["fill:$fillcolor; stroke:$color[0]; stroke-width:calc(2*$size[0]px)"],g.svg=m.genBasicShapeSvgTemplate(null!=(u=g.shapeType)?u:""),g.pDiff=[0,0],g.pSize=[0,0],g.cSize=[0,0],g.className=g.className?g.className:m.classGenerator();break}}}))}markerTransFormatter(e,t,n,r,i){let o=t.join("!!");const s=this.getLineQuadrant(r),{width:a,height:l,baseDegree:c}=this.lineDimension(r),d=c/Math.PI*180;let u=0,g=0,p=0,h=0,m=0,y=0;switch(s){case 1:[p,h,m,y]=[0,l,a,0],g=-d;break;case 2:[p,h,m,y]=[a,l,0,0],g=d+180;break;case 3:[p,h,m,y]=[a,0,0,l],g=180-d;break;case 4:[p,h,m,y]=[0,0,a,l],g=d;break}u=g+180;for(let b=0;b<n.length;b++){const e=new RegExp("\\$size\\["+b+"\\]","g");o=o.replace(e,n[b].toString())}const f=n[0];return o=o.replace(/\$roms/g,u.toString()),o=o.replace(/\$rome/g,g.toString()),o=o.replace(/\$txms/g,p.toString()),o=o.replace(/\$tyms/g,h.toString()),o=o.replace(/\$txme/g,m.toString()),o=o.replace(/\$tyme/g,y.toString()),i&&i.length>1&&(o=o.replace(/\$finetunes/g,`translate(-${i[0]*f}px, -${2*f}px)`),o=o.replace(/\$finetunee/g,`translate(-${i[1]*f}px, -${2*f}px)`)),o.split("!!")}lineViewBoxFormatter(e,t){const{width:n,height:r,baseDegree:i}=this.lineDimension(e),o=2*t*Math.sin(i),s=2*t*Math.cos(i);return`${-o-1} ${-s-1} ${n+2*o+2} ${r+2*s+2}`}computePointForDimensions(e,t,n,r){const i=Math.atan2(r,n),o=2*t*Math.sin(i),s=2*t*Math.cos(i);let a;switch(e){case 1:a=[0,r,n,0];break;case 2:a=[n,r,0,0];break;case 3:a=[n,0,0,r];break;case 4:a=[0,0,n,r];break;default:a=[0,0,n,r];break}return{point:a,realWidth:n+2*o+2,realHeight:r+2*s+2}}computePointForAngle(e,t,n){const r=t*Math.PI/180,i=e*Math.cos(r),o=e*Math.sin(r),s=[0,0,i,o],{width:a,height:l,baseDegree:c}=this.lineDimension(s),d=2*n*Math.sin(c),u=2*n*Math.cos(c);return{point:s,realWidth:a+2*d+2,realHeight:l+2*u+2}}lineCenterRotate(e,t,n,r=!0){const{width:i,height:o,xDiff:s,yDiff:a,baseDegree:l}=this.lineDimension(e),c=2*n*Math.sin(l),d=2*n*Math.cos(l),u=Math.atan2(a,s),g=i+2*c+2,p=o+2*d+2,h=Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),m=r?(u/Math.PI*180+t)%360:t%360,{point:y,realWidth:f,realHeight:b}=this.computePointForAngle(h,m,n);return{point:y,realWidth:f,realHeight:b,dx:(g-f)/2,dy:(p-b)/2}}getLineQuadrant(e){if(4!==(null==e?void 0:e.length))throw new Error(`input point coordinates (${e}) are invalid`);const t=[[2,1],[3,4]],{xDiff:n,yDiff:r,width:i,height:o}=this.lineDimension(e),s=Math.round(((n+Number.EPSILON)/(i+Number.EPSILON)+1)/2),a=Math.round(((r+Number.EPSILON)/(o+Number.EPSILON)+1)/2);return t[a][s]}vectorAdd(e,t){const n=[];for(let r=0;r<e.length;r++)n[r]=e[r]+t[r];return n}vectorScale(e,t){const n=[];for(let r=0;r<e.length;r++)n[r]=e[r]*t;return n}pointPreprocess(e,t,n,r,i,o){if(void 0===t||void 0===n||void 0===o||2!==(null==o?void 0:o.length))return e;const{width:s,height:a,baseDegree:l}=this.lineDimension(e),[c,d]=o,u=Math.cos(l),g=Math.sin(l),p=r*t[0]*u,h=r*t[0]*g,m=r*t[1]*u,y=r*t[1]*g,f=r*c*u,b=r*c*g,v=r*d*u,w=r*d*g,N=r/2*u,S=r/2*g,x=this.getLineQuadrant(e);let P,I,_,k,Z,C,z;switch(x){case 1:P=[0,a],I=[s,0],_=[p,-h],k=[-m,y],C=[f,-b],z=[-v,w],Z=[N,-S];break;case 2:P=[s,a],I=[0,0],_=[-p,-h],k=[m,y],C=[-f,-b],z=[v,w],Z=[-N,-S];break;case 3:P=[s,0],I=[0,a],_=[-p,h],k=[m,-y],C=[-f,b],z=[v,-w],Z=[-N,S];break;case 4:P=[0,0],I=[s,a],_=[p,h],k=[-m,-y],C=[f,b],z=[-v,-w],Z=[N,S];break;default:P=[0,0],I=[s,a],_=[p,h],k=[-m,-y],C=[f,b],z=[-v,-w],Z=[N,S];break}return c>0?P=this.vectorAdd(P,C):n[0]?(P=this.vectorAdd(P,_),P=this.vectorAdd(P,this.vectorScale(Z,-1))):!1!==n[0]&&"round"!==i||(P=this.vectorAdd(P,Z)),d>0?I=this.vectorAdd(I,z):n[1]?(I=this.vectorAdd(I,k),I=this.vectorAdd(I,Z)):!1!==n[1]&&"round"!==i||(I=this.vectorAdd(I,this.vectorScale(Z,-1))),[...P,...I]}lineDimension(e){const t=e[2]-e[0],n=e[3]-e[1],r=Math.abs(t),i=Math.abs(n),o=Math.atan2(i,r),s=Math.atan2(n,t);return{xDiff:t,yDiff:n,width:r,height:i,baseDegree:o,angle:s}}updatedDimensions(e,t,n){const r=n.width/n.initWidth,{width:i,height:o,baseDegree:s}=this.lineDimension(e),a=2*t*Math.sin(s),l=2*t*Math.cos(s),c={initWidth:i+2*a+2,initHeight:o+2*l+2,width:0,height:0};return c.width=c.initWidth*r,c.height=c.initHeight*r,c}getTranslateCompensationForLineWidth(e,t,n,r){const{baseDegree:i}=this.lineDimension(e),o=2*(n-r)*Math.sin(i),s=2*(n-r)*Math.cos(i);return{x:t.x+o,y:t.y+s}}genLineSvgTemplate(e,t){return`<g class="$mtrans[0] $style[1]">${e}</g><line class="$style[0]" x1="$point[0]" y1="$point[1]" x2="$point[2]" y2="$point[3]"/><g class="$mtrans[1] $style[2]">${t}</g>`}genBasicShapeSvgTemplate(e){switch(e){case"e":return'<ellipse id="$svgId" cx="$svgParam[0]" cy="$svgParam[1]" rx="$svgParam[0]" ry="$svgParam[1]"/>';case"r":return'<path id="$svgId" d="M $svgParam[0] 0 a $svgParam[0] $svgParam[0] 0 0 0 -$svgParam[0] $svgParam[0] v $svgParam[2] a $svgParam[0] $svgParam[0] 0 0 0 $svgParam[0] $svgParam[0] h $svgParam[1] a $svgParam[0] $svgParam[0] 0 0 0 $svgParam[0] -$svgParam[0] v -$svgParam[2] a $svgParam[0] $svgParam[0] 0 0 0 -$svgParam[0] -$svgParam[0] z"/>';case"t":return'<path id="$svgId" d="M $svgParam[1] 0 m $svgParam[2] $svgParam[3] a $svgParam[0] $svgParam[0] 0 0 0 -$svgParam[9] 0 l -$svgParam[4] $svgParam[5] a $svgParam[0] $svgParam[0] 0 0 0 $svgParam[6] $svgParam[7] h $svgParam[8] a $svgParam[0] $svgParam[0] 0 0 0 $svgParam[6] -$svgParam[7] z"/>';default:return'<ellipse id="$svgId" cx="$svgParam[0]" cy="$svgParam[1]" rx="$svgParam[0]" ry="$svgParam[1]"/>'}}svgParameters(e,t,n){const r=this.clipCorRad(e,t,n);switch(e){case"e":return[t[0]/2,t[1]/2];case"r":return[r,t[0]-2*r,t[1]-2*r];case"t":return this.triangleSvgParameters(t,r);default:return[]}}triangleSvgParameters(e,t){const[n,r]=e,i=n/2,o=Math.sqrt(Math.pow(i,2)+Math.pow(r,2)),s=r/o,a=i/o,l=t*(r/i),c=t/Math.sqrt((1-a)/(1+a)),d=Math.max(o-c-l,0);return[t,i,l*a,l*s,d*a,d*s,c*(1-a),c*s,Math.max(n-2*c,0),2*l*a]}getMaxCorRad(e,t){let n,r,i,o;switch(e){case"r":return n=Math.min(...t),n/2;case"t":return r=t[0]/2,i=t[1],o=Math.sqrt(Math.pow(i,2)+Math.pow(r,2)),r*Math.sqrt((o-r)/(o+r));default:return Number.EPSILON}}clipCorRad(e,t,n){const r=this.getMaxCorRad(e,t);return Math.min(n[1],r)}flipLine(e,t,n){const r=[...e],{width:i,height:o,xDiff:s,yDiff:a}=this.lineDimension(e);return t&&(s>0?r[0]+=2*i:r[0]-=2*i),n&&(a>0?r[1]+=2*o:r[1]-=2*o),r}setLineWidth(e){var t;const{min:n,max:r}=s.Z.mappingMinMax("lineWidth"),i=g().floor(a.Z.boundValue(e,n,r),2),{getCurrLayer:c}=o.ZP,{point:d,styles:u,size:p}=c;o.ZP.updateLayerProps(l.Z.currFocusPageIndex,o.ZP.layerIndex,{size:[i,...(null!=p?p:[]).slice(1)]});const h="shape"===c.type&&"D"===c.category;if(h){const e=m.getTranslateCompensationForLineWidth(null!=d?d:[],u,null!=(t=null==p?void 0:p[0])?t:1,i);o.ZP.updateLayerStyles(l.Z.currFocusPageIndex,o.ZP.layerIndex,{x:e.x,y:e.y})}}isLine(e){return"shape"===e.type&&"D"===e.category}isBasicShape(e){return"shape"===e.type&&"E"===e.category}}const m=new h;t["Z"]=m},77804:function(e,t,n){"use strict";var r=n(89497),i=n(78871),o=n(70118),s=n(75231),a=n(52632),l=n(56556),c=n(29651),d=n(62013),u=n(13637),g=n(53074),p=n(32905),h=n(47147),m=n(15820),y=n(74041),f=n(89456),b=n(16290),v=n(44306),w=Object.defineProperty,N=(e,t,n)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t,n)=>(N(e,"symbol"!==typeof t?t+"":t,n),n),x=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class P{constructor(){S(this,"copySourcePageIndex"),S(this,"prevPasteTargetPageIndex"),S(this,"prevLayerId"),S(this,"offsetCount"),this.copySourcePageIndex=-1,this.prevPasteTargetPageIndex=-1,this.prevLayerId="",this.offsetCount=0}get currSelectedInfo(){return r.Z.getters.getCurrSelectedInfo}get currSelectedPageIndex(){return r.Z.getters.getCurrSelectedPageIndex}get currSelectedLayerIndex(){return r.Z.getters.getCurrSelectedIndex}get currSelectedLayerStyles(){return s.ZP.getSelectedLayer().styles}regenerateLayerInfo(e,t){const{toCenter:n=!1,offset:r=10,targetPageIndex:o}=t;let a=i.Z.deepCopy(e);switch(n&&void 0!==o?(a=s.ZP.resizeLayerConfig(o,i.Z.deepCopy(a),!0),a.styles.x+=r*this.offsetCount,a.styles.y+=r*this.offsetCount):(a.styles.x+=r*this.offsetCount,a.styles.y+=r*this.offsetCount),s.ZP.isOutOfBoundary(o,a)&&(a.styles.x-=r*this.offsetCount,a.styles.y-=r*this.offsetCount,this.offsetCount=0),a.id=i.Z.generateRandomString(8),a.shown=!1,a.type){case"image":return a.imgControl=!1,u.Z.newImage(a);case"shape":return a.className=m.Z.classGenerator(),u.Z.newShape(a);case"group":return a.layers.forEach((e=>{"shape"===e.type&&(e.className=m.Z.classGenerator()),e.id=i.Z.generateRandomString(8)})),u.Z.newGroup(a,a.layers);case"tmp":return a.layers.forEach((e=>{"shape"===e.type&&(e.className=m.Z.classGenerator()),e.id=i.Z.generateRandomString(8)})),u.Z.newTmp(a.styles,a.layers);case"text":return u.Z.newText(a);case"frame":return u.Z.newFrame(a)}}getClipboardContents(){return x(this,null,(function*(){try{const e=yield navigator.clipboard.read();for(const t of e)for(const e of t.types){const n=yield t.getType(e);if(n.type.includes("image"))return v.Z.uploadScreenShotImage(n),"image";if(n.type.includes("text"))return"text"}return""}catch(e){console.error(e)}}))}get scaleRatio(){return r.Z.getters.getPageScaleRatio}copy(){const{index:e,layers:t,pageIndex:n}=s.ZP.currSelectedInfo;if(this.prevPasteTargetPageIndex=-1,e>=0&&!s.ZP.getSelectedLayer().locked){const t=r.Z.getters.getLayer(n,e);this.prevLayerId!==t.id&&(this.offsetCount=0,this.prevLayerId=t.id),navigator.clipboard.writeText(JSON.stringify(i.Z.deepCopy(t))),this.copySourcePageIndex=n}else console.warn("You did't select any unlocked layer")}paste(e){return x(this,null,(function*(){const e=yield this.getClipboardContents();if("image"===e)return;const t=yield navigator.clipboard.readText();if(!i.Z.isJsonString(t))return;const{currFocusPageIndex:n,currHoveredPageIndex:d}=p.Z,u=d>=0?d:n;u===this.copySourcePageIndex?(-1!==this.prevPasteTargetPageIndex&&this.prevPasteTargetPageIndex!==u&&(this.offsetCount=0),this.offsetCount++):this.prevPasteTargetPageIndex!==u?this.offsetCount=0:this.offsetCount++;const g=[JSON.parse(t)].map((e=>{let t=!1;if(this.copySourcePageIndex!==u){const n=s.ZP.getLayerPageIntersectRatio(u,e),r=-1!==this.copySourcePageIndex?s.ZP.getLayerPageIntersectRatio(this.copySourcePageIndex,e):1;t=1!==n&&n!==r}return this.regenerateLayerInfo(e,{toCenter:t,targetPageIndex:u})})),h="tmp"===g[0].type;if(r.Z.getters.getCurrSelectedIndex>=0&&u===r.Z.getters.getCurrSelectedPageIndex){const e=r.Z.getters.getCurrSelectedIndex,t=r.Z.getters.getCurrSelectedLayers,n=h?t.length:1;o.Z.deselect(),h?(r.Z.commit("ADD_layersToPos",{pageIndex:u,layers:[...i.Z.deepCopy(g)],pos:e+n}),o.Z.set(u,e+n,i.Z.deepCopy(g[0].layers))):(r.Z.commit("ADD_layersToPos",{pageIndex:u,layers:[...i.Z.deepCopy(g)],pos:e+n}),o.Z.set(u,e+n,[...i.Z.deepCopy(g)])),l.Z.reassignZindex(u)}else r.Z.getters.getCurrSelectedIndex>=0&&o.Z.deselect(),h?(r.Z.commit("ADD_newLayers",{pageIndex:u,layers:[...i.Z.deepCopy(g)]}),o.Z.set(u,r.Z.getters.getLayersNum(u)-1,i.Z.deepCopy(g[0].layers))):(r.Z.commit("ADD_newLayers",{pageIndex:u,layers:[...i.Z.deepCopy(g)]}),o.Z.set(u,r.Z.getters.getLayersNum(u)-1,[...i.Z.deepCopy(g)])),l.Z.reassignZindex(u);this.prevPasteTargetPageIndex=u,(0,c.Y3)((()=>{a.Z.record()}))}))}duplicate(){const{getCurrLayer:e}=s.ZP;this.offsetCount=1;const t=this.regenerateLayerInfo(i.Z.deepCopy(e),{});this.offsetCount=0;const n=p.Z.currActivePageIndex,c="tmp"===e.type;if(r.Z.getters.getCurrSelectedIndex>=0&&n===r.Z.getters.getCurrSelectedPageIndex){const e=r.Z.getters.getCurrSelectedIndex,s=r.Z.getters.getCurrSelectedLayers,a=c?s.length:1;o.Z.deselect(),"tmp"===t.type?(r.Z.commit("ADD_layersToPos",{pageIndex:n,layers:[t],pos:e+a}),o.Z.set(n,e+a,i.Z.deepCopy(t.layers))):(r.Z.commit("ADD_layersToPos",{pageIndex:n,layers:[t],pos:e+a}),o.Z.set(n,e+a,[t])),l.Z.reassignZindex(n)}else{const e=r.Z.getters.currFocusPageIndex;r.Z.getters.getCurrSelectedIndex>=0&&o.Z.deselect(),"tmp"===t.type?(r.Z.commit("ADD_newLayers",{pageIndex:e,layers:[t]}),o.Z.set(e,r.Z.getters.getLayersNum(e)-1,i.Z.deepCopy(t.layers))):(r.Z.commit("ADD_newLayers",{pageIndex:e,layers:[t]}),o.Z.set(e,r.Z.getters.getLayersNum(e)-1,[t])),l.Z.reassignZindex(e)}a.Z.record()}altDuplicate(e,t,n){const a=n,c=this.regenerateLayerInfo(i.Z.deepCopy(n),{offset:0});c.active=!1;const d="tmp"===c.type,{index:u,layers:g}=s.ZP.currSelectedInfo,h=p.Z.currFocusPageIndex,m=u;d&&g.length;"tmp"!==c.type&&(r.Z.commit("ADD_layersToPos",{pageIndex:h,layers:[c],pos:m}),o.Z.set(h,m+1,[a]),l.Z.reassignZindex(h))}textCopy(){const e=window.getSelection();e&&navigator.clipboard.writeText(e.toString().replace(/\n\n/g,"\n"))}textCut(){const e=window.getSelection();e&&(navigator.clipboard.writeText(e.toString().replace(/\n\n/g,"\n")),b.Z.agent((e=>{e.commands.deleteSelection(),s.ZP.updatecCurrTypeLayerProp({isEdited:!0})})))}textPasteWith(e){b.Z.agent((t=>{e=e.replace(/\r/g,"");const n=e.split("\n");let r=t.chain().deleteSelection();n.forEach(((e,t)=>{r=r.insertPlainText(e),t!==n.length-1&&(r=r.enter())})),t.storage.nuTextStyle.pasting=!0,r.run(),t.storage.nuTextStyle.pasting=!1,(0,c.Y3)((()=>{t.commands.scrollIntoView()})),s.ZP.updatecCurrTypeLayerProp({isEdited:!0})}))}textPaste(){navigator.clipboard.readText().then((e=>{this.textPasteWith(e)}))}textSelectAll(e){const t=document.getElementById(`text-${null!=e?e:s.ZP.layerIndex}`),n=window.getSelection(),r=new Range;if(n){r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r);const e=s.ZP.getCurrLayer,i=e.paragraphs.length-1,o=e.paragraphs[i].spans.length-1,a=e.paragraphs[i].spans[o].text.length;f.Z.updateSelection({pIndex:0,sIndex:0,offset:0},{pIndex:i,sIndex:o,offset:a}),y.Z.updateTextPropsState()}}del(){let e=s.ZP.getCurrLayer;switch(e.type){case"frame":if(e.clips.some((e=>e.active))){const t=e.clips.findIndex((e=>e.active));if("frame"===e.clips[t].srcObj.type)return void s.ZP.deleteSelectedLayer();const n=i.Z.deepCopy(e.clips);return n[t].imgControl?void d.Z.updateFrameLayerProps(s.ZP.pageIndex,s.ZP.layerIndex,t,{imgControl:!1}):(n[t].srcObj={type:"frame",assetId:"",userId:""},s.ZP.updateLayerProps(s.ZP.pageIndex,s.ZP.layerIndex,{clips:n}),void a.Z.record())}break}s.ZP.deleteSelectedLayer()}cut(){this.copy(),this.del()}save(){return x(this,null,(function*(){f.Z.isFontLoading||(yield v.Z.uploadDesign(v.Z.PutAssetDesignType.UPDATE_BOTH),h.Z.ratingRequest("save_file"),g.Z.uploadLog())}))}selectAll(){o.Z.selectAll()}deselect(){o.Z.deselect()}group(){o.Z.group()}ungroup(){o.Z.ungroup()}undo(){return x(this,null,(function*(){if(!a.Z.isInFirstStep){const e=s.ZP.getCurrLayer;if(e)switch(e.type){case"frame":if(e.clips.some((e=>e.imgControl)))return;break;case"group":if(e.layers.some((e=>"image"===e.type&&e.imgControl)))return;break;case"image":if(e.imgControl)return}yield a.Z.undo(),(0,c.Y3)((()=>{b.Z.agent((e=>{const t=s.ZP.getCurrLayer;let n=t;if(t.active){if("group"===t.type){const e=s.ZP.subLayerIdx;if(-1===e)return;const r=t.layers[e];if(!r.active||"text"!==r.type)return;n=r}else if("text"!==t.type)return;e.commands.sync(),n.contentEditable&&e.commands.focus(null,{scrollIntoView:!1}),b.Z.updatePrevData(e),y.Z.updateTextPropsState()}}))}))}}))}redo(){return x(this,null,(function*(){a.Z.isInLastStep||(yield a.Z.redo(),(0,c.Y3)((()=>{b.Z.agent((e=>{const t=s.ZP.getCurrLayer;let n=t;if(t.active){if("group"===t.type){const e=s.ZP.subLayerIdx;if(-1===e)return;const r=t.layers[e];if(!r.active||"text"!==r.type)return;n=r}else if("text"!==t.type)return;e.commands.sync(),n.contentEditable&&e.commands.focus(null,{scrollIntoView:!1}),b.Z.updatePrevData(e),y.Z.updateTextPropsState()}}))})))}))}zoomIn(){r.Z.commit("SET_pageScaleRatio",Math.min(this.scaleRatio+10,500))}zoomOut(){r.Z.commit("SET_pageScaleRatio",Math.max(this.scaleRatio-10,10))}up(e=!1){const t=e?10:1;s.ZP.updateLayerStyles(this.currSelectedPageIndex,this.currSelectedLayerIndex,{y:this.currSelectedLayerStyles.y-t*(100/this.scaleRatio)}),a.Z.record()}down(e=!1){const t=e?10:1;s.ZP.updateLayerStyles(this.currSelectedPageIndex,this.currSelectedLayerIndex,{y:this.currSelectedLayerStyles.y+t*(100/this.scaleRatio)}),a.Z.record()}left(e=!1){const t=e?10:1;s.ZP.updateLayerStyles(this.currSelectedPageIndex,this.currSelectedLayerIndex,{x:this.currSelectedLayerStyles.x-t*(100/this.scaleRatio)}),a.Z.record()}right(e=!1){const t=e?10:1;s.ZP.updateLayerStyles(this.currSelectedPageIndex,this.currSelectedLayerIndex,{x:this.currSelectedLayerStyles.x+t*(100/this.scaleRatio)}),a.Z.record()}}const I=new P;t["Z"]=I},82289:function(e,t,n){"use strict";var r=n(89497),i=n(75231),o=n(35426),s=n(15820),a=n(53650),l=n(78871),c=n(32905),d=Object.defineProperty,u=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t,n)=>(u(e,"symbol"!==typeof t?t+"":t,n),n);class p{constructor(e){g(this,"id"),g(this,"event"),g(this,"pageIndex"),g(this,"_GUIDELINE_OFFSET"),g(this,"GUIDEANGLE_OFFSET"),g(this,"closestSnaplines"),g(this,"closestSnapAngle"),this.event=new a.EventEmitter,this.id=l.Z.generateRandomString(4),this.pageIndex=e,this._GUIDELINE_OFFSET=5,this.GUIDEANGLE_OFFSET=1,this.closestSnaplines={v:[],h:[]},this.closestSnapAngle=-1}get guidelinePos(){return c.Z.currFocusPage.guidelines}get GUIDELINE_OFFSET(){var e;return l.Z.isTouchDevice()?this._GUIDELINE_OFFSET/((null==(e=c.Z.getPage(c.Z.currActivePageIndex))?void 0:e.contentScaleRatio)||1):5}on(e,t){this.event.on(e,t)}off(e,t){this.event.off(e,t)}getSnaplinePos(){const e=r.Z.getters.getPages[this.pageIndex],t=[-1,e.width/2,e.width+1,...this.guidelinePos.v],n=[-1,e.height/2,e.height+1,...this.guidelinePos.h],i=r.Z.getters.getLayers(this.pageIndex);return i.forEach((e=>{if(!e.active)if("shape"===e.type&&"D"===e.category){const{point:r,size:i}=e,{x:o,y:a,width:l,initWidth:c}=e.styles,d=(null!=i?i:[1])[0],{width:u,height:g,baseDegree:p}=s.Z.lineDimension(null!=r?r:[]),h=l/c,m=2*d*Math.sin(p)*h,y=2*d*Math.cos(p)*h;t.push(o+m,o+m+u*h/2,o+m+u*h),n.push(a+y,a+y+g*h/2,a+y+g*h)}else{const r=o.ZP.getBounding(e.styles);t.push(r.x,r.x+r.width/2,r.x+r.width),n.push(r.y,r.y+r.height/2,r.y+r.height)}})),{v:t,h:n}}getLayerSnappingPos(e,t){const n=o.ZP.getBounding(e),{x:r,y:i}=e;return"move"===t?{v:[{pos:n.x,offset:r-n.x},{pos:n.x+n.width/2,offset:r-n.x-n.width/2},{pos:n.x+n.width,offset:r-n.x-n.width}],h:[{pos:n.y,offset:i-n.y},{pos:n.y+n.height/2,offset:i-n.y-n.height/2},{pos:n.y+n.height,offset:i-n.y-n.height}]}:{v:[{pos:n.x,offset:r-n.x},{pos:n.x+n.width,offset:r-n.x-n.width}],h:[{pos:n.y,offset:i-n.y},{pos:n.y+n.height,offset:i-n.y-n.height}]}}getLayerSnappingPos4Line(e,t,n){const{x:r,y:i}=e;if("move"===n&&"shape"===t.type&&"D"===t.category){const{point:n,size:o}=t,{width:a,initWidth:l}=e,c=(null!=o?o:[1])[0],{width:d,height:u,baseDegree:g}=s.Z.lineDimension(null!=n?n:[]),p=a/l,h=2*c*Math.sin(g)*p,m=2*c*Math.cos(g)*p;return{v:[{pos:r+h,offset:-h},{pos:r+h+d*p/2,offset:-h-d*p/2},{pos:r+h+d*p,offset:-h-d*p}],h:[{pos:i+m,offset:-m},{pos:i+m+u*p/2,offset:-m-u*p/2},{pos:i+m+u*p,offset:-m-u*p}]}}return{v:[],h:[]}}getClosestSnaplines(e,t){const n=[],r=[];e.v.forEach((e=>{t.v.forEach((t=>{const r=Math.abs(e-t.pos);r<l.Z.fixSize(this.GUIDELINE_OFFSET)&&n.push({pos:e,diff:r,offset:t.offset})}))})),e.h.forEach((e=>{t.h.forEach((t=>{const n=Math.abs(e-t.pos);n<l.Z.fixSize(this.GUIDELINE_OFFSET)&&r.push({pos:e,diff:n,offset:t.offset})}))}));const i=[],o=[],s=n.sort(((e,t)=>e.diff-t.diff))[0],a=r.sort(((e,t)=>e.diff-t.diff))[0];return s&&i.push({pos:s.pos,orientation:"V",offset:s.offset}),a&&o.push({pos:a.pos,orientation:"H",offset:a.offset}),this.closestSnaplines.v=[...i],this.closestSnaplines.h=[...o],{v:this.closestSnaplines.v,h:this.closestSnaplines.h}}getClosestSnapAngle(e,t,n=this.GUIDEANGLE_OFFSET){const r=Math.floor(e/t);let i=r*t;e-i>t/2&&(i+=t),Math.abs(e-i)<n?this.closestSnapAngle=i%360:this.closestSnapAngle=-1}getClosestSnapLineAngle(e,t,n,r=this.GUIDEANGLE_OFFSET){const{angle:i,xDiff:o,yDiff:a}=s.Z.lineDimension(t);let l=(i/Math.PI*180+360)%360;const c=Math.sqrt(Math.pow(a,2)+Math.pow(o,2));return 0===e&&(l=(l+180)%360),this.getClosestSnapAngle(l,n,r),{lineLength:c,lineAngle:l}}calcMoveSnap(e,t){const n=this.getSnaplinePos();let r=null;r=t?this.getLayerSnappingPos4Line(e,t,"move"):this.getLayerSnappingPos(e,"move");const i=this.getClosestSnaplines(n,r),o=[...i.v,...i.h],s={x:e.x,y:e.y},a={x:0,y:0};return 0===o.length||o.forEach((t=>{"V"===t.orientation?(s.x=t.pos+t.offset,a.x=s.x-e.x):(s.y=t.pos+t.offset,a.y=s.y-e.y)})),a}calcScaleSnap(e,t,n){const r=this.getSnaplinePos();let o=null;o=n?this.getLayerSnappingPos4Line(e,n,"move"):this.getLayerSnappingPos(e,"move");const s=this.getClosestSnaplines(r,o),a=[...s.v,...s.h],l={width:e.width,height:e.height,scale:e.scale},c={x:0,y:0,width:0,height:0};return 0===a.length||(a.forEach((t=>{if("V"===t.orientation){l.width=e.width+(t.pos-(e.x+e.width));const n=l.width/e.width;l.height=e.height*n,l.scale=e.scale*n}else{l.height=e.height+(t.pos-(e.y+e.height));const n=l.height/e.height;l.width=e.width*n,l.scale=e.scale*n}})),i.ZP.updateLayerStyles(this.pageIndex,t,{width:l.width,height:l.height,scale:l.scale})),c}calAngleSnap(e,t=!1){return this.getClosestSnapAngle(e,t?15:90,t?8:2),this.closestSnapAngle>=0?this.closestSnapAngle:e}calLineAngleSnap(e,t,n=!1){const{lineLength:r,lineAngle:i}=this.getClosestSnapLineAngle(e,t,n?15:90,n?8:void 0);if(this.closestSnapAngle>=0){const n=t.slice(2*(1-e),2*(1-e)+2),i=r*Math.cos(this.closestSnapAngle/180*Math.PI),o=r*Math.sin(this.closestSnapAngle/180*Math.PI),a=s.Z.vectorAdd(n,[i,o]),l=[...t];return l[2*e]=a[0],l[2*e+1]=a[1],{newPoint:l,lineLength:r,lineAngle:this.closestSnapAngle}}return{newPoint:t,lineLength:r,lineAngle:i}}clear(){this.closestSnaplines.v=[],this.closestSnaplines.h=[]}}t["Z"]=p},52632:function(e,t,n){"use strict";n.d(t,{Z:function(){return $}});var r=n(89497),i=n(6400),o=n(78871),s=n(70118),a=n(29651),l=n(1890),c=n(86052),d=n(13637),u=n(32905),g=n(53556),p=n(15820),h=n(74041),m=n(23917),y=n(89456),f=n(44306);function b(){return new Worker(n.p+"js/clneDeep.worker.07d379f6.worker.js")}var v=Object.defineProperty,w=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t,n)=>(w(e,"symbol"!==typeof t?t+"":t,n),n),S=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class x{constructor(){N(this,"cloneDeepWorker",new b)}asyncCloneDeep(e){return S(this,null,(function*(){return this.cloneDeepWorker&&this.cloneDeepWorker.terminate(),new Promise(((t,n)=>{this.cloneDeepWorker=new b;try{this.cloneDeepWorker.postMessage(e),this.cloneDeepWorker.addEventListener("message",(function(e){t(e.data)}),!1)}catch(r){n(r)}})).finally((()=>this.cloneDeepWorker&&this.cloneDeepWorker.terminate()))}))}}var P=new x,I=Object.defineProperty,_=Object.defineProperties,k=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L=(e,t)=>{for(var n in t||(t={}))C.call(t,n)&&T(e,n,t[n]);if(Z)for(var n of Z(t))z.call(t,n)&&T(e,n,t[n]);return e},E=(e,t)=>_(e,k(t)),D=(e,t,n)=>(T(e,"symbol"!==typeof t?t+"":t,n),n),O=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class M{constructor(){D(this,"steps"),D(this,"currStep"),D(this,"MAX_STORAGE_COUNT"),D(this,"timers"),this.steps=[],this.currStep=-1,this.MAX_STORAGE_COUNT=30,this.timers={}}get isPopupOpen(){return g.Z.isPopupOpen}get isInFirstStep(){return 0===this.currStep}get isInLastStep(){return this.currStep===this.steps.length-1}filterDataForLayer(e){let t,n;switch(e.type){case"shape":return t=e,t.designId&&""!==t.designId||["D","E"].includes(t.category)?(t.svg="",t):t;case"tmp":case"group":return t=e,n=t.layers.map((e=>this.filterDataForLayer(e))),t.layers=n,t;case"frame":return t=e,t.designId&&""!==t.designId?(t.decoration&&(t.decoration.svg=""),t.decorationTop&&(t.decorationTop.svg=""),t):t;case"text":return o.Z.isTouchDevice()?(t=e,t.contentEditable=!1,t):e;default:return e}}refetchForShape(e){return O(this,null,(function*(){var t,n;let r;switch(e.category){case"D":return yield p.Z.addComputableInfo(e),e;case"E":return yield p.Z.addComputableInfo(e),e;default:if(e.designId&&""!==e.designId){r=yield p.Z.fetchSvg(e),e.color&&e.color.length&&(r.color=e.color),!e.className&&(e.className=p.Z.classGenerator());const i=r.vSize;delete r.styles,Object.assign(e,r),Object.assign(e.styles,{initWidth:null!=(t=null==i?void 0:i[0])?t:0,initHeight:null!=(n=null==i?void 0:i[1])?n:0})}return e}}))}refetchForFrame(e){return O(this,null,(function*(){if(!e.designId||""===e.designId)return e;const t={type:8,id:e.designId,ver:r.Z.getters["user/getVerUni"]},n=yield c.ZP.get(t),i=n.jsonData;return e.clips.forEach(((e,t)=>{i.clips[t]&&(e.clipPath=i.clips[t].clipPath)})),e.decoration&&i.decoration&&(i.decoration.color=[...e.decoration.color],e.decoration=d.Z.newShape(E(L({},i.decoration),{vSize:[e.styles.initWidth,e.styles.initHeight],styles:{width:e.styles.initWidth,height:e.styles.initHeight,initWidth:e.styles.initWidth,initHeight:e.styles.initHeight}}))),e.decorationTop&&i.decorationTop&&(i.decorationTop.color=[...e.decorationTop.color],e.decorationTop=d.Z.newShape(E(L({},i.decorationTop),{vSize:[e.styles.initWidth,e.styles.initHeight],styles:{width:e.styles.initWidth,height:e.styles.initHeight,initWidth:e.styles.initWidth,initHeight:e.styles.initHeight}}))),e}))}fillLoadingSize(e,t=!1){return O(this,null,(function*(){if(m.Z.isCurvedText(e.styles.textShape))return e;const n=e.styles.writingMode.includes("vertical")?e.styles.height:e.styles.width,r={width:e.styles.width,height:e.styles.height,widthLimit:-1===e.widthLimit?-1:n,spanDataList:e.spanDataList};e.widthLimit=yield y.Z.autoResize(e,r);const i=yield y.Z.getTextHWAsync(e,e.widthLimit);return t||-1!==e.widthLimit||(e.styles.writingMode.includes("vertical")?e.styles.y=e.styles.y-(i.height-e.styles.height)/2:e.styles.x=e.styles.x-(i.width-e.styles.width)/2),e.styles.width=i.width,e.styles.height=i.height,e.spanDataList=i.spanDataList,e}))}fillDataForLayer(e,t=!1){return O(this,null,(function*(){let n;const r=[];switch(e.type){case"shape":return n=e,yield this.refetchForShape(n);case"text":return n=e,yield this.fillLoadingSize(n,t);case"tmp":case"group":n=e;for(const e of n.layers)r.push(yield this.fillDataForLayer(e,!0));n.layers=r;const{width:i,height:o}=(0,s.O)(n.layers,n.styles.scale);return n.styles.width=i,n.styles.height=o,n;case"frame":return n=e,yield this.refetchForFrame(n);default:return e}}))}filterDataForLayersInPages(e){for(const t of e){const e=t.layers.map((e=>this.filterDataForLayer(e)));t.layers=e}return e}fillDataForLayersInPages(e){return O(this,null,(function*(){const t=[];for(const[n,r]of e.entries())u.Z.isOutOfBound(n)||t.push(new Promise(((e,t)=>{try{const t=[];for(const e of r.layers)t.push(this.fillDataForLayer(e));Promise.all(t).then((t=>{r.layers=t,e(r)}))}catch(n){t(n)}})));return yield Promise.all(t),e}))}record(){const e=r.Z.getters.getLastSelectedLayerIndex,t=this.filterDataForLayersInPages(o.Z.deepCopy(r.Z.getters.getPages)),n=o.Z.deepCopy(r.Z.getters.getCurrSelectedInfo);this.currStep<0?(this.steps.push({pages:t,lastSelectedLayerIndex:e,currSelectedInfo:n}),this.currStep++):(this.steps.length=this.currStep+1,this.steps.length===this.MAX_STORAGE_COUNT&&this.steps.shift(),this.steps.push({pages:t,lastSelectedLayerIndex:e,currSelectedInfo:n}),this.currStep=this.steps.length-1,f.Z.isLogin&&f.Z.uploadDesign())}asyncRecord(){return O(this,null,(function*(){const e=o.Z.unproxify(r.Z.getters.getPages),t=o.Z.unproxify(r.Z.getters.getCurrSelectedInfo),n=yield P.asyncCloneDeep({pages_1:e,selectedInfo:t}),i=yield P.asyncCloneDeep(e);if(n){const e=this.filterDataForLayersInPages(n.pages_1),t=n.selectedInfo,o=r.Z.getters.getLastSelectedLayerIndex;1===t.layers.length&&(t.layers[0].active=!0),this.currStep<0?(this.steps.push({pages:e,lastSelectedLayerIndex:o,currSelectedInfo:t}),this.currStep++):(this.steps.length=this.currStep+1,this.steps.length===this.MAX_STORAGE_COUNT&&this.steps.shift(),this.steps.push({pages:e,lastSelectedLayerIndex:o,currSelectedInfo:t}),this.currStep=this.steps.length-1,f.Z.isLogin&&f.Z.uploadDesign(void 0,{clonedPages:i}))}}))}undo(){return O(this,null,(function*(){if(0===this.steps.length||0===this.currStep||y.Z.isFontLoading)return;this.isPopupOpen&&g.Z.closePopup(),this.currStep--;const e=u.Z.currActivePageIndex,t=yield this.fillDataForLayersInPages(o.Z.deepCopy(this.steps[this.currStep].pages));r.Z.commit("SET_pages",t),r.Z.commit("SET_lastSelectedLayerIndex",this.steps[this.currStep].lastSelectedLayerIndex);const{pageIndex:n,index:l}=this.steps[this.currStep].currSelectedInfo;let c;if(t[n]){const e=t[n].layers[l];c=e?"tmp"===e.type?e.layers:[e]:[]}else c=[];n>=0&&n!==u.Z.currFocusPageIndex?(r.Z.commit("SET_currActivePageIndex",n),u.Z.scrollIntoPage(n)):-1===n&&r.Z.commit("SET_currActivePageIndex",e),s.Z.set(n,l,c),this.currStep>0&&(0,a.Y3)((()=>{r.Z.state.currFunctionPanelType===i.UJ.textSetting&&h.Z.updateTextPropsState()})),f.Z.isLogin&&f.Z.uploadDesign()}))}delayedRecord(e,t=300){this.timers[e]&&(clearTimeout(this.timers[e]),delete this.timers[e]),this.timers[e]=window.setTimeout((()=>{this.record()}),t)}redo(){return O(this,null,(function*(){if(this.currStep===this.steps.length-1||y.Z.isFontLoading)return;this.isPopupOpen&&g.Z.closePopup(),this.currStep++;const e=u.Z.currActivePageIndex,t=yield this.fillDataForLayersInPages(o.Z.deepCopy(this.steps[this.currStep].pages));r.Z.commit("SET_pages",t),r.Z.commit("SET_lastSelectedLayerIndex",this.steps[this.currStep].lastSelectedLayerIndex);const{pageIndex:n,index:l}=this.steps[this.currStep].currSelectedInfo;let c;if(t[n]){const e=t[n].layers[l];c=e?"tmp"===e.type?e.layers:[e]:[]}else c=[];n>=0&&n!==u.Z.currFocusPageIndex?(r.Z.commit("SET_currActivePageIndex",n),u.Z.scrollIntoPage(n)):-1===n&&r.Z.commit("SET_currActivePageIndex",e),s.Z.set(n,l,c),(0,a.Y3)((()=>{r.Z.state.currFunctionPanelType===i.UJ.textSetting&&h.Z.updateTextPropsState()})),f.Z.isLogin&&f.Z.uploadDesign()}))}updateHead(e,t,n,r=-1){var i,o,s,a,l;if(this.currStep<0)return;const c=this.steps[this.currStep].pages,d=-1===r?null==(o=null==(i=c[e])?void 0:i.layers)?void 0:o[t]:null==(l=null==(a=null==(s=c[e])?void 0:s.layers)?void 0:a[t])?void 0:l.layers[r];if(d)for(const[u,g]of Object.entries(n))d[u]=g}getPrevPages(){return this.steps[this.currStep].pages}reset(){this.clearSteps(),this.record()}clearSteps(){this.steps=[],this.currStep=-1}clearCurrStep(){this.steps.splice(this.currStep--,1)}}const A=new M;var $=(0,l.qj)(A)},6891:function(e,t){"use strict";var n=Object.defineProperty,r=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,i=(e,t,n)=>(r(e,"symbol"!==typeof t?t+"":t,n),n);class o{constructor(){i(this,"icons"),this.icons=[]}setIcons(e){this.icons=e}pushIcon(e){this.icons.push(e)}}const s=new o;t["Z"]=s},8295:function(e,t){"use strict";class n{generateWaterfall(e,t,n=4){var r;const i=[],o=[];for(let a=0;a<t;a++)i.push([]),o.push(0);const s=null!=(r=e.list)?r:[];for(const a of s){const e=a.match_cover,{width:t,height:r}=e,s=r/t,l=this.lowestColumn(o);o[l]+=s,i[l].push(this.iAssetTemplate2Template(a,n))}return i}iAssetTemplate2Template(e,t){const n=e.match_cover,{width:r,height:i}=n,o=i/r;return{url:this.getPrevUrl(n,t),id:n.id,theme_id:n.theme_id,aspect_ratio:o,width:n.width,height:n.height,unit:n.unit,type:6,ver:n.ver,plan:e.plan,content_ids:e.content_ids,group_type:e.group_type,group_id:e.group_id}}getPrevUrl(e,t=4){const n=1===t?"prev":`prev_${t}x`;return`https://template.vivipic.com/template/${e.id}/${n}?ver=${e.ver}`}lowestColumn(e){let t=0,n=e[0];for(const r in e){const i=e[r];i<n&&(t=parseInt(r),n=i)}return t}}t["Z"]=new n},70488:function(e,t,n){"use strict";var r=n(89497),i=n(78871),o=n(75231),s=Object.defineProperty,a=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t,n)=>(a(e,"symbol"!==typeof t?t+"":t,n),n);class c{constructor(){l(this,"fields",["heading","subheading","body"]),l(this,"fieldsMap",{heading:"isHeading",subheading:"isSubheading",body:"isBody"})}get getTextInfo(){return r.Z.getters.getTextInfo}get pageIndex(){return r.Z.getters.getMiddlemostPageIndex}get getCurrPageLayers(){return r.Z.getters.getLayers(this.pageIndex)}updateTemplate(e){if(!e)return;const t=e.layers;for(const n of this.fields){let e=!1;for(const r of t)"text"===r.type&&Object.prototype.hasOwnProperty.call(r,this.fieldsMap[n])&&(r[this.fieldsMap[n]]=!e,e||(e=!0)),r.id=i.Z.generateRandomString(8)}return e}updateTextInfoTarget(){this.fields.forEach((e=>{this.textInfoUpdater(e,[]);for(const[t,n]of this.getCurrPageLayers.entries())if("text"===n.type&&Object.prototype.hasOwnProperty.call(n,this.fieldsMap[e])){o.ZP.updateLayerProps(this.pageIndex,t,{[e]:!0}),this.textInfoUpdater(e,n.paragraphs);break}}))}updateTextInfo(e){for(const t of this.fields)if(e[this.fieldsMap[t]]){this.textInfoUpdater(t,e.paragraphs);break}}setTextInfo(e){r.Z.commit("SET_textInfo",e)}textInfoUpdater(e,t){const n=[];for(const r of t){let e="";for(const t of r.spans)e+=t.text;n.push(e)}this.setTextInfo({[e]:n})}}t["Z"]=new c},80987:function(e,t,n){"use strict";var r=n(89497),i=n(78871),o=n(70118),s=n(75231),a=n(32905),l=n(52632),c=n(74041),d=n(89456),u=n(50559),g=n(60410),p=n(29651),h=Object.defineProperty,m=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t,n)=>(m(e,"symbol"!==typeof t?t+"":t,n),n),f=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class b{constructor(){y(this,"toShowTouchPoint"),y(this,"timer"),this.timer={},this.toShowTouchPoint=!1}start(e,t=!0){this.timer[e]={start:(new Date).getTime(),notify:t},console.log(`${e}: start`)}log(e,t){const n=this.timer[e],r=(new Date).getTime()-n.start,i=`${e}: ${t}, ${r}`;console.log(i),n.notify&&(0,u.h4)({group:"copy",text:i})}initializeFlags(e,t="flags",n){i.Z.initializeFlags(e,n,(()=>{this.log(t,"done rendering")})),this.start(t)}setDoneFlag(e,t,n){i.Z.setDoneFlag(e,t,n)}showTouchPoint(e){const t=20,n="rgba(255, 0, 0, 0.5)";document.querySelectorAll(".touch-point").forEach((e=>{e.remove()}));const r=document.createElement("div");r.classList.add("touch-point"),r.style.position="fixed",r.style.left=e.touches[0].clientX-t/2+"px",r.style.top=e.touches[0].clientY-t/2+"px",r.style.width=`${t}px`,r.style.height=`${t}px`,r.style.background=n,r.style.borderRadius="50%",r.style.zIndex="1000",r.style.pointerEvents="none",document.body.appendChild(r)}startShowingTouchPoint(){window.addEventListener("touchstart",this.showTouchPoint,{capture:!0}),this.toShowTouchPoint=!0}stopShowingTouchPoint(){window.removeEventListener("touchstart",this.showTouchPoint,{capture:!0}),this.toShowTouchPoint=!1}toggleShowingTouchPoint(){this.toShowTouchPoint?this.stopShowingTouchPoint():this.startShowingTouchPoint()}testAllFonts(e,t){return f(this,null,(function*(){var n,h,m;yield r.Z.dispatch("font/getCategories");while(-1!==r.Z.state.font.nextPage)console.log("get more font"),yield r.Z.dispatch("font/getMoreCategory");const y=r.Z.state.font.categories.flatMap((e=>e.is_recent?[]:e.list)),f=s.ZP.getCurrPage;let b=e;f.layers.forEach((e=>{"text"!==e.type&&(0,u.h4)("有圖片layer 請刪除")}));while(b<t){const{pageIndex:e}=s.ZP;for(let t=0;t<f.layers.length;t++){o.Z.select(e,[t]),yield i.Z.sleep(100);const s=y[b];c.Z.applyPropsToAll("span,paragraph",{type:s.src||s.fontType,fontUrl:null!=(n=s.fontUrl)?n:"",userId:null!=(h=s.userId)?h:"",assetId:null!=(m=s.assetId)?m:"",font:s.id}),console.log("set",s.name),yield r.Z.dispatch("text/addFont",{type:s.src||s.fontType,url:s.fontUrl,userId:s.userId,assetId:s.assetId,face:s.id,ver:s.ver}),yield d.Z.untilFontLoaded(f.layers[t].paragraphs),yield i.Z.sleep(500),d.Z.updateTextLayerSizeByShape(e,t,-1),o.Z.deselect(),o.Z.reset(),t%2&&b++}yield i.Z.sleep(1e3),a.Z.addPage(a.Z.newPage((0,g.cloneDeep)(f))),(0,p.Y3)((()=>{a.Z.scrollIntoPage(e+1),a.Z.activePage(e+1)})),yield i.Z.sleep(1e3)}l.Z.record()}))}}t["Z"]=new b},32490:function(e,t,n){"use strict";var r=n(28253),i=n(89497),o=n(71446),s=n(75231),a=n(6295),l=n(33466),c=n(35426),d=n(90272),u=n(23917),g=n(16290),p=n(60410),h=n.n(p),m=n(78871),y=n(89456),f=Object.defineProperty,b=Object.defineProperties,v=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,x=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P=(e,t)=>{for(var n in t||(t={}))N.call(t,n)&&x(e,n,t[n]);if(w)for(var n of w(t))S.call(t,n)&&x(e,n,t[n]);return e},I=(e,t)=>b(e,v(t)),_=(e,t,n)=>(x(e,"symbol"!==typeof t?t+"":t,n),n),k=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class Z{constructor(){_(this,"bodyRect",new DOMRect),_(this,"vertical",!1),_(this,"width",0),_(this,"height",0),_(this,"transform",""),_(this,"rows",[])}waitForRender(e){return k(this,null,(function*(){const t=m.Z.generateRandomString(12);return e.setAttribute("id",t),new Promise((n=>{y.Z.observerCallbackMap[t]=()=>{y.Z.observer.unobserve(e),n()},document.body.appendChild(e),y.Z.observer.observe(e)}))}))}init(e){return k(this,arguments,(function*(e,{splitSpan:t}={splitSpan:!1}){var n;this.vertical=e.styles.writingMode.includes("vertical");let r=document.createElement("div");r.classList.add("nu-text__body"),["test.vivipic.com","vivipic.com"].includes(window.location.host)&&(r.style.opacity="0"),e.paragraphs.forEach((n=>{const i=document.createElement("p");i.classList.add("nu-text__p");const o=g.Z.textStylesRaw(n.styles);Object.assign(i.style,o,{margin:0}),r.appendChild(i),n.spans.forEach((r=>{if(r.text){const o=T.isFixedWidth(e.styles),s=t?y.Z.splitter.splitGraphemes(r.text):[r.text];s.forEach((t=>{const s=y.Z.splitter.countGraphemes(r.text)>1,a=o&&s?{letterSpacing:0,display:"inline-block"}:o?T.fixedWidthStyle(r.styles,n.styles,e):{},l=document.createElement("span");l.classList.add("nu-text__span"),l.textContent=t;const c=g.Z.textStylesRaw(r.styles);c.textIndent=c["letter-spacing"]||"initial",Object.assign(l.style,c,a),i.appendChild(l)}))}else{const e=document.createElement("span");e.classList.add("nu-text__span"),e.appendChild(document.createElement("br")),i.appendChild(e)}}))}));const i=m.Z.safariLike?{lineBreak:"normal"}:{};Object.assign(r.style,i),r.style.writingMode=o.Z.convertVerticalStyle(e.styles.writingMode).writingMode;let{widthLimit:s}=e;"none"!==e.styles.textShape.name&&(s=-1);const{scale:a,height:l}=e.styles;this.vertical?(r.style.width="max-content",r.style.height=-1===s?"max-content":s/e.styles.scale+"px"):(r.style.width=-1===s?"max-content":s/e.styles.scale+"px",r.style.height="max-content"),yield this.waitForRender(r);const c=l/a,d=this.vertical?"height":"width";let u=1;while(-1!==s&&u<100&&Math.abs(r.clientHeight-c)>5*a)u++,r.clientHeight>c?s+=a*u:s-=a*u,r=r.cloneNode(!0),r.style[d]=s/a+"px",yield this.waitForRender(r);this.bodyRect=r.getClientRects()[0],this.width=this.bodyRect.width,this.height=this.bodyRect.height,this.transform=this.vertical?"rotate(90deg) scale(1,-1)":"",this.rows=[];for(let o=0;o<r.children.length;o++){const e=r.children[o],t=parseFloat(e.style.fontSize),i=parseFloat(e.style.letterSpacing),s=parseFloat(e.style.lineHeight),a=t*i;for(let r=0;r<e.children.length;r++){const t=e.children[r];for(const e of t.getClientRects()){const i="inline-block"===t.style.display;let{width:l,height:c,y:d,x:u}=e;i&&this.vertical?(l=l/s*1.4,u=e.x+(e.width-l)/2):i&&(c=c/s*1.4,d=e.y+(e.height-c)/2),this.rows.push({rect:e,spanData:[{x:u,y:d,width:l,height:c,text:null!=(n=t.textContent)?n:"",letterSpacing:a,pIndex:o,sIndex:r,lineHeight:s}]})}}}}))}xyExchange(){const{rows:e,bodyRect:t}=this;Object.assign(t,{x:t.y,y:t.x,width:t.height,height:t.width}),e.forEach((e=>{const{rect:t,spanData:n}=e;Object.assign(t,{x:t.y,y:t.x,width:t.height,height:t.width}),n.forEach((e=>{[e.x,e.y,e.height,e.width]=[e.y,e.x,e.width,e.height]}))}))}mergeLine(){const{rows:e}=this;e.forEach(((t,n)=>{const r=n+1;while(r<e.length){const n=t.rect,i=e[r].rect,o=n.y,s=n.y+n.height,a=i.y,l=i.y+i.height;if(!(a<=o&&o<=l&&a<=s&&s<=l||o<=a&&a<=s&&o<=l&&l<=s))break;n.y=Math.min(n.y,i.y),n.width+=i.width,n.height=Math.max(n.height,i.height),t.spanData=t.spanData.concat(e[r].spanData),e.splice(r,1)}}))}expandEmptyLine(){const{rows:e,bodyRect:t}=this,n={rect:{x:t.x,width:t.width},spanData:[]};e.forEach(((t,r)=>{var i,o;const{rect:s}=t;if(s.width<1){let a=r+1;while(a<e.length&&e[a].rect.width<1)a++;const l=null!=(i=e[a])?i:n,c=null!=(o=e[r-1])?o:n,d=c.rect.width<l.rect.width?c:l;s.x=d.rect.x,s.width=d.rect.width,t.spanData=[]}}))}coordinateInit(){const{rows:e,bodyRect:t}=this;e.forEach((e=>{const{rect:n}=e;n.x-=t.x,n.y-=t.y,e.spanData.forEach((e=>{e.x-=t.x,e.y-=t.y}))}))}preprocess(){const{vertical:e}=this;e&&this.xyExchange(),this.mergeLine(),this.expandEmptyLine(),this.coordinateInit()}get(){const{vertical:e,width:t,height:n,transform:r,rows:i}=this;return{vertical:e,width:t,height:n,transform:r,rows:i,rects:h().map(i,"rect")}}}class C{constructor(e,t){_(this,"controlPoints",[[],[]]),_(this,"bRadius"),this.bRadius=e.bRadius;const n=t[0];this.controlPoints[0].push({top:new c.E9(n.x+n.width,n.y),bottom:new c.E9(n.x+n.width,n.y),oldHeight:n.height}),this.controlPoints[1].push({top:new c.E9(n.x,n.y),bottom:new c.E9(n.x,n.y),oldHeight:n.height}),t.forEach((e=>{this.controlPoints[0].push({top:new c.E9(e.x,e.y),bottom:new c.E9(e.x,e.y+e.height),oldHeight:e.height}),this.controlPoints[1].push({top:new c.E9(e.x+e.width,e.y),bottom:new c.E9(e.x+e.width,e.y+e.height),oldHeight:e.height})}));const r=h().nth(t,-1);this.controlPoints[0].push({top:new c.E9(r.x+r.width,r.y+r.height),bottom:new c.E9(r.x+r.width,r.y+r.height),oldHeight:r.height}),this.controlPoints[1].push({top:new c.E9(r.x,r.y+r.height),bottom:new c.E9(r.x,r.y+r.height),oldHeight:r.height})}merge(){this.controlPoints[0].forEach(((e,t,n)=>{if(0===t||t===n.length-1||t===n.length-2)return;const r=this.controlPoints[0][t+1],i=Math.abs(e.bottom.x-r.top.x)<10?(e.bottom.y+r.top.y)/2:e.bottom.x<r.top.x?e.bottom.y:r.top.y;e.bottom.y=r.top.y=i})),this.controlPoints[1].forEach(((e,t,n)=>{if(0===t||t===n.length-1||t===n.length-2)return;const r=this.controlPoints[1][t+1],i=Math.abs(e.bottom.x-r.top.x)<10?(e.bottom.y+r.top.y)/2:e.bottom.x>r.top.x?e.bottom.y:r.top.y;e.bottom.y=r.top.y=i}))}delete(){let e=0;return this.controlPoints.forEach((t=>{for(let n=1;n<t.length-1;){const r=t[n];t.length>3&&r.bottom.y-r.top.y<.1*r.oldHeight?(t.splice(n,1),e++):n++}})),e}preprocess(){do{this.merge()}while(this.delete())}process(){const e=this.bRadius;let t=null,n=this.controlPoints[0];for(let r=1;r<n.length-1;r++){const i=n[r],o=n[r-1],s=o.bottom.middle(i.top),a=n[r+1],l=i.bottom.middle(a.top),d=Math.min(i.oldHeight*e*.005,i.top.dist(i.bottom)/2),u=o.bottom.x<i.top.x?-1:1,g=Math.min(d,i.top.dist(s))*u;1===r&&(t=new c.y$(s));const p=i.top.add({x:g,y:0}),h=i.top.add({x:0,y:d});let m=i.top.middle(p);const y=i.top.middle(h);let f=Math.abs(Math.atan(g/d)*(180/Math.PI));m=m.rotate((2*f-90)*u,p),t.L(p),t.C(m,y,h);const b=i.bottom.x<a.top.x?1:-1,v=Math.min(d,i.bottom.dist(l))*b,w=i.bottom.add({x:0,y:-d}),N=i.bottom.add({x:v,y:0}),S=i.bottom.middle(w);let x=i.bottom.middle(N);f=Math.abs(Math.atan(v/d)*(180/Math.PI)),x=x.rotate((90-2*f)*b,N),t.L(w),t.C(S,x,N)}n=this.controlPoints[1];for(let r=n.length-2;r>0;r--){const i=n[r],o=n[r-1],s=o.bottom.middle(i.top),a=n[r+1],l=i.bottom.middle(a.top),c=Math.min(i.oldHeight*e*.005,i.top.dist(i.bottom)/2),d=i.bottom.x<a.top.x?1:-1,u=Math.min(c,i.bottom.dist(l))*d,g=i.bottom.add({x:u,y:0}),p=i.bottom.add({x:0,y:-c});let h=i.bottom.middle(g);const m=i.bottom.middle(p);let y=Math.abs(Math.atan(u/c)*(180/Math.PI));h=h.rotate((90-2*y)*d,g),t.L(g),t.C(h,m,p);const f=o.bottom.x<i.top.x?-1:1,b=Math.min(c,i.top.dist(s))*f,v=i.top.add({x:0,y:c}),w=i.top.add({x:b,y:0}),N=i.top.middle(v);let S=i.top.middle(w);y=Math.abs(Math.atan(b/c)*(180/Math.PI)),S=S.rotate((2*y-90)*f,w),t.L(v),t.C(N,S,w)}return t}processWithShape(e,t,n,r){let{width:i,height:o,scale:s}=e.styles;i=i/s*r,o=o/s*r;const a=+e.styles.textShape.bend,l=d.Z.getLayerFontSize(e.paragraphs),g=e.styles.textBg.distance*l/60,h=(0,p.maxBy)(this.controlPoints[0].slice(1,-1),(e=>e.oldHeight)),m=h.top.dist(h.bottom),y=Math.min(h.oldHeight*this.bRadius*.005,m/2),f=u.Z.getRadiusByBend(a,l),b=[...n,g,g].map((e=>360*e/(2*f*Math.PI))),v=(0,p.sum)(b)*(a>=0?1:-1),w=360*y/(2*f*Math.PI)*(a>=0?1:-1),N=v-2*w,S=new c.E9(i/2,a>=0?t.height/2+f:o-t.height/2-f);t.height+=2*g,t.y-=g;const x=new c.E9(i/2,a>=0?t.y:o-t.height-t.y),P=x.rotate(-N/2,S),I=[x.rotate(v/2,S),x.add(new c.E9(0,1).mul(m)).rotate(v/2,S),x.add(new c.E9(0,1).mul(m)).rotate(-v/2,S),x.rotate(-v/2,S)],_=new c.E9(0,1).rotate(v/2),k=new c.E9(0,1).rotate(-v/2),Z=[I[0].rotate(-w,S),I[1].add(_.mul(-y)),I[2].rotate(w,S),I[3].add(k.mul(y))],C=[I[0].add(_.mul(y)),I[1].rotate(-w,S),I[2].add(k.mul(-y)),I[3].rotate(w,S)],z=new c.y$(P);return z.largeArc(N,S),z.C(Z[0].middle(I[0]),I[0].middle(C[0]),C[0]),z.L(Z[1]),z.C(Z[1].middle(I[1]),I[1].middle(C[1]),C[1]),z.largeArc(-N,S),z.C(Z[2].middle(I[2]),I[2].middle(C[2]),C[2]),z.L(Z[3]),z.C(Z[3].middle(I[3]),I[3].middle(C[3]),C[3]),this.controlPoints=[Array(3).fill({top:I[3],bottom:I[2],oldHeight:0}),Array(3).fill({top:I[0],bottom:I[1],oldHeight:0})],z}toCircle(){const e=[];return this.controlPoints.forEach((t=>{t.slice(1,-1).forEach((t=>{e.push({tag:"circle",attrs:{cx:t.top.x,cy:t.top.y,r:"5",fill:"green"}}),e.push({tag:"circle",attrs:{cx:t.bottom.x,cy:t.bottom.y,r:"5",fill:"blue"}})}))})),e}}class z{constructor(){_(this,"currColorKey",""),_(this,"rgba",((e,t)=>d.Z.convertColor2rgba(e,t)))}get effectDefaultOptions(){return P({none:{},"square-borderless":{opacity:100,bStroke:0,bRadius:0,bColor:"transparent",pStrokeX:20,pStrokeY:20,pColor:"fontColorL+-40/BC/00"},"rounded-borderless":{opacity:100,bStroke:0,bRadius:35,bColor:"transparent",pStrokeX:20,pStrokeY:20,pColor:"fontColorL+-40/BC/00"},"square-hollow":{opacity:100,bStroke:8,bRadius:0,bColor:"fontColorL+-40/BC/00",pStrokeX:20,pStrokeY:10,pColor:"transparent"},"rounded-hollow":{opacity:100,bStroke:8,bRadius:35,bColor:"fontColorL+-40/BC/00",pStrokeX:20,pStrokeY:10,pColor:"transparent"},"square-both":{opacity:100,bStroke:8,bRadius:0,bColor:"fontColor",pStrokeX:20,pStrokeY:10,pColor:"fontColorL+-40/BC/00"},"rounded-both":{opacity:100,bStroke:8,bRadius:35,bColor:"fontColor",pStrokeX:20,pStrokeY:10,pColor:"fontColorL+-40/BC/00"},"speech-bubble":{tailOffset:50,tailPosition:"right",bRadius:100,pStrokeX:20,pStrokeY:20,opacity:100,pColor:"fontColorL+-40/BC/00"},"speech-bubble-triangle":{tailOffset:50,tailPosition:"bottom",bRadius:100,pStrokeX:20,pStrokeY:20,opacity:100,pColor:"fontColorL+-40/BC/00"},underline:{endpoint:"rounded",height:20,yOffset:10,opacity:100,color:"fontColorL+-40/F1D289"},gooey:{distance:20,bRadius:40,opacity:100,color:"fontColorL+-40/BC/00"}},a.Z.getDeafultOptions())}inlineSvg(e){return e.replace(/\n[ ]*/g,"").replace(/#/g,"%23")}convertTextEffect(){return{}}isSplitSpan(e){return this.isFixedWidth(e)}isFixedWidth(e){const{textBg:t}=e;return(0,r.EE)(t)&&t.fixedWidth}fixedWidthStyle(e,t,n){if(!this.isFixedWidth(n.styles))return null;let[r,i]=["min-width","min-height"];return n.styles.writingMode.includes("vertical")&&([r,i]=[i,r]),{[r]:1.333333*e.size*(t.fontSpacing+1)+"px",display:"inline-block",letterSpacing:0,textAlign:"center"}}drawTextBg(e){return k(this,null,(function*(){var t;const i=1,{textBg:o,textShape:s}=e.styles;if("none"===o.name)return null;let{width:l,height:g,scale:h}=e.styles;l=l/h*i,g=g/h*i;const m=.01*o.opacity,y=d.Z.getLayerFontSize(e.paragraphs),f="none"!==s.name,b=+s.bend,v=new Z;let w={textWidth:[],textHeight:[],minHeight:-1};yield Promise.all([v.init(e,{splitSpan:(0,r.EE)(o)}),f&&((0,r.EE)(o)||(0,r.lJ)(o)||(0,r.Q)(o))?u.Z.getTextHWsAsync(e):{textWidth:[],textHeight:[],minHeight:-1}]).then((e=>{w=e[1]})),v.preprocess();const{vertical:N,width:S,height:x,transform:_,rects:k,rows:z}=v.get(),T=null!=(t=(0,p.maxBy)(z.flatMap((e=>e.spanData.map((t=>({height:t.height,y:t.y-e.rect.y}))))),(e=>e.height)))?t:{height:0,y:0};if((0,r.Q)(o)){const t=o.distance*y/60,n=d.Z.colorParser(o.color,e),r=this.rgba(n,m);k.forEach((e=>{e.x-=t,e.y-=t,e.width+=2*t,e.height+=2*t}));const s=new C(o,k);!f&&s.preprocess();const a=f?s.processWithShape(e,T,w.textWidth,i):s.process();return{tag:"svg",attrs:{width:S,height:x,fill:r},content:[{tag:"path",attrs:{d:a.result()},style:{transform:_}}]}}if((0,r.lJ)(o)){const t=d.Z.colorParser(o.color,e),n=this.rgba(t,m),r=[],i=.005*T.height*o.height,s=.01*(T.height-2*i)*(100-o.yOffset),a=u.Z.getRadiusByBend(b,y),h=w.textWidth.map((e=>360*e/(2*a*Math.PI))),v=(0,p.sum)(h)*(b>=0?1:-1),N=f?360*i/(2*a*Math.PI)*(b>=0?1:-1):0,S=v-2*N,x=new c.E9(l/2,(b>=0?T.y:g-T.height-T.y)+s),P=new c.E9(l/2,b>=0?T.height/2+a:g-T.height/2-a),I=x.rotate(-S/2,P);for(const e of z){if(e.spanData.every((e=>""===e.text)))continue;const t=e.rect,n=f?i:.005*t.height*o.height,s=.01*(t.height-2*n)*(100-o.yOffset),a=f?new c.y$(I):new c.y$(new c.E9(t.x+n,t.y+s));switch(f?a.largeArc(S,P):a.h(t.width-2*n),o.endpoint){case"triangle":f?a.largeArc(N,P):a.l(new c.E9(n,0)),a.l(new c.E9(-n,2*n).rotate((v-N)/2));break;case"rounded":a.a(new c.E9(0,2*n).rotate(S/2));break;case"square":f?a.largeArc(N,P):a.l(new c.E9(n,0)),a.l(new c.E9(0,2*n).rotate(v/2)),f?a.largeArc(-N,P):a.l(new c.E9(-n,0));break}switch(f?a.largeArc(-S,P):a.h(-(t.width-2*n)),o.endpoint){case"triangle":f?a.largeArc(-N,P):a.l(new c.E9(-n,0));break;case"rounded":a.a(new c.E9(0,2*-n).rotate(-S/2));break;case"square":f?a.largeArc(-N,P):a.l(new c.E9(-n,0)),a.l(new c.E9(0,2*-n).rotate(-v/2)),f&&a.largeArc(N,P);break}if(r.push({tag:"path",attrs:{d:a.result()},style:{transform:_}}),f)break}return{tag:"svg",attrs:{width:l,height:g,fill:n},content:r}}if((0,r.fy)(o)||(0,r.Sr)(o)){const t=(0,r.Sr)(o)?["bottom","left"].includes(o.tailPosition)?1-.01*o.tailOffset:.01*o.tailOffset:0,n=d.Z.colorParser(o.pColor,e),i=(0,r.fy)(o)?d.Z.colorParser(o.bColor,e):"",s=((0,r.fy)(o)?o.bStroke:0)*y/60,a=o.pStrokeY*y/60,u=o.pStrokeX*y/60;let p=l+s,h=g+s,f=-s,b=-s;N?(p+=2*a,h+=2*u,f-=u,b-=a):(p+=2*u,h+=2*a,f-=a,b-=u);const v=Math.max(...z.map((e=>e.rect.height))),w=(0,r.Sr)(o)?v*(o.bRadius/100)/2:Math.min(p/2,h/2)*o.bRadius*.01,S=new c.y$(new c.E9(s/2,s/2+w));for(const[e,l]of r.eg.entries()){const n=(0,c.g7)({top:{x:1,y:-1},right:{x:1,y:1},bottom:{x:-1,y:1},left:{x:-1,y:-1}}[l]),r=e%2?new c.E9(0,n.y):new c.E9(n.x),i=r.mul(w);if("speech-bubble"===o.name&&l===o.tailPosition){const e=(new c.E9).rotate(60*t,i),r=e.rotate(30,i);let o=e.middle(r);o=o.add(o.sub(i).mul(.7));const s=r.rotate(60*(1-t),i);S.a(e,{radius:w}),S.q(o.middle(e).sub(e).add(n.mul(.1*w*n.y)),o.sub(e)),S.q(r.middle(o).sub(o).add(n.mul(.1*w*n.y)),r.sub(o)),S.a(s.sub(r),{radius:w})}else S.a(n.mul(w),{radius:w});const s=(["top","bottom"].includes(l)?p:h)-2*w,a=r.mul(s);if("speech-bubble-triangle"===o.name&&l===o.tailPosition){const e=Math.max(Math.min(.25*v,s),0),n=r.mul((s-e)*t),i=n.add(r.mul(e)),o=n.middle(i).add(r.rotate(-90).mul(1.5*e));S.l(n),S.l(o.sub(n)),S.l(i.sub(o)),S.l(a.sub(i))}else S.l(a)}return{tag:"svg",attrs:{width:p+s,height:h+s},style:{left:`${b}px`,top:`${f}px`},content:[{tag:"path",attrs:{"stroke-width":s,d:S.result()},style:{fill:n,stroke:i,opacity:m}}]}}if((0,r.EE)(o)){const e=o.size/100,t=a.Z.bgNeedRotate(o.name),r=u.Z.convertTextShape(w.textWidth,b,y);let{xOffset200:i,yOffset200:s}=o;N&&([i,s]=[s,i]);const c=[];let[d,p]=[0,0];return z.forEach((e=>{e.spanData.forEach(((t,n)=>{const{x:r,y:i,width:s,height:u,text:h}=t;" "!==h||a.Z.fixedHeadTail(o.name)?c.push(I(P(P({},a.Z.getLetterBgSetting(o,d-p,0===n,n===e.spanData.length-1)),f?{x:(l-u)/2,y:(b>=0?T.y:g-T.height-T.y)+(T.height-u)/2}:{x:r-(u-s)/2-(o.fixedWidth?0:t.letterSpacing/2),y:i}),{width:s,height:u,i:d})):p+=1,d+=1}))})),{tag:"svg",attrs:{width:S,height:x},style:{opacity:m},content:c.map((o=>{let l=o.x-(e-1)*o.height/2,c=o.y-(e-1)*o.height/2;const d=N&&!t?`translate(${o.height*s/100}px, ${o.width*i/100}px)`:`translate(${o.width*i/100}px, ${o.height*s/100}px)`;N&&!t&&([l,c]=[c,l]);const u=a.Z.isColorChangeable(o.href);return{tag:u?"use":"image",attrs:P({href:u?`#${o.href}`:n(16692)(`./${o.href}.svg`),width:o.height*e,height:o.height*e},!f&&{x:l,y:c}),style:P({color:o.color},f?{transform:`translate(${l}px, ${c}px) `+r[o.i]+d,transformOrigin:`${o.height*e/2}px ${o.height*e/2}px 0`}:t?{transform:_+d}:{transform:d})}}))}}return null}))}setColorKey(e){this.currColorKey=e}setColor(e){const t=d.Z.getCurrentLayer().styles.textBg.name;this.setTextBg(t,{[this.currColorKey]:e})}get currColor(){return d.Z.getCurrentLayer().styles.textBg[this.currColorKey]}getEffectMainColor(e){return(0,r.fy)(e)&&["square-hollow","rounded-hollow"].includes(e.name)?["bColor",e.bColor]:(0,r.fy)(e)||(0,r.Sr)(e)?["pColor",e.pColor]:(0,r.Q)(e)||(0,r.lJ)(e)?["color",e.color]:["color",e.color||""]}syncShareAttrs(e,t){var n,i;if(Object.assign(e,{name:e.name||t}),"none"===e.name)return;const o=null!=(n=l.Z.get("textEffectSetting","textBgShare"))?n:{},s={opacity:e.opacity},a={opacity:o.opacity};if((0,r.fy)(e)&&["square-hollow","rounded-hollow","square-both","rounded-both"].includes(e.name)&&(Object.assign(s,{bStroke:e.bStroke}),Object.assign(a,{bStroke:o.bStroke})),t){let e=null!=(i=l.Z.get("textEffectSetting",t))?i:{};Object.assign(e,a),e=h().omit(e,["color","pColor","bColor"]),l.Z.set("textEffectSetting",t,e)}else Object.assign(o,s),l.Z.set("textEffectSetting","textBgShare",o)}setTextBg(e,t){return k(this,null,(function*(){const{index:n,pageIndex:o}=i.Z.getters.getCurrSelectedInfo,c=i.Z.getters.getLayer(o,n),d=c.layers?c.layers:[c],u=s.ZP.subLayerIdx,g=this.effectDefaultOptions[e];for(const s in d){if(-1!==u&&+s!==u)continue;const h=d[s];if("text"!==h.type)continue;const m=c.layers?+s:u,f=h.styles.textBg,b={};for(const[e,n]of Object.entries(null!=t?t:{}))["lineHeight","fontSpacing"].includes(e)&&(yield y.Z.setParagraphProp(e,n));if(t=(0,p.omit)(t,["lineHeight","fontSpacing"]),f&&f.name===e)Object.assign(b,f,t),l.Z.set("textEffectSetting",e,b),this.syncShareAttrs(b,null);else{this.syncShareAttrs(b,e);const n=l.Z.get("textEffectSetting",e);Object.assign(b,g,n,t,{name:e}),yield a.Z.setExtraDefaultAttrs(e);const i=this.getEffectMainColor(f)[1],o=this.getEffectMainColor(b)[0];!i.startsWith("#")||(0,r.EE)(b)||(0,r.EE)(f)||Object.assign(b,{[o]:i}),(0,r.EE)(b)&&(0,r.EE)(f)&&b.name!==f.name&&["rainbow","rainbow-dark","circle"].includes(b.name)&&["rainbow","rainbow-dark","circle"].includes(f.name)&&Object.assign(b,f,{name:b.name,color:b.color})}i.Z.commit("UPDATE_specLayerData",{pageIndex:o,layerIndex:n,subLayerIndex:+s,styles:{textBg:b}});const v=this.isSplitSpan(I(P({},h.styles),{textBg:f})),w=this.isSplitSpan(I(P({},h.styles),{textBg:b}));this.splitOrMergeSpan(v,w,h,o,n,m);const N=(0,r.EE)(f)&&f.fixedWidth,S=(0,r.EE)(b)&&b.fixedWidth;N!==S&&y.Z.updateTextLayerSizeByShape(o,n,m),(0,r.EE)(f)&&!(0,r.EE)(b)&&(yield y.Z.setParagraphProp("lineHeight",1.4),yield y.Z.setParagraphProp("fontSpacing",0))}}))}splitOrMergeSpan(e,t,n,r,i,o){if(e===t)return;const a=(0,p.cloneDeep)(n.paragraphs);t?a.forEach((e=>{const t=e.spans.flatMap((e=>y.Z.splitter.splitGraphemes(e.text).map((t=>({text:t,styles:(0,p.cloneDeep)(e.styles)})))));e.spans=0!==t.length?t:e.spans})):a.forEach((e=>{for(let t=0;t+1<e.spans.length;){const n=e.spans[t],r=e.spans[t+1];(0,p.isEqual)(n.styles,r.styles)?(n.text+=r.text,e.spans.splice(t+1,1)):t++}})),s.ZP.updateLayerProps(r,i,{paragraphs:a},o),g.Z.updateHtml(),document.querySelector(".ProseMirror")&&!t&&g.Z.agent((e=>{e.commands.selectAll(),e.chain().updateAttributes("textStyle",{spanIndex:-1}).run()}))}resetCurrTextEffect(){return k(this,null,(function*(){const e=d.Z.getCurrentLayer().styles.textBg.name;yield this.setTextBg(e,this.effectDefaultOptions[e]),yield a.Z.setExtraDefaultAttrs(e)}))}}const T=new z;t["Z"]=T},90272:function(e,t,n){"use strict";n.d(t,{c:function(){return S}});var r=n(89497),i=n(89995),o=n(75231),s=n(33466),a=n(35426),l=n(60410),c=n(1890),d=n(16290),u=Object.defineProperty,g=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&f(e,n,t[n]);if(h)for(var n of h(t))y.call(t,n)&&f(e,n,t[n]);return e},v=(e,t)=>g(e,p(t)),w=(e,t,n)=>(f(e,"symbol"!==typeof t?t+"":t,n),n);const N=["none","shadow","shape","bg","fill"];function S(e){return!!e&&N.includes(e)}class x{constructor(){w(this,"shadowScale",.2),w(this,"strokeScale",.1),w(this,"currColorKey",""),w(this,"effectDefaultOptions",{}),w(this,"focus","none"),w(this,"setFocus",(0,l.debounce)(this._setFocus,100)),this.effectDefaultOptions=this.getDefaultEffects()}getDefaultEffects(){return{none:{},shadow:{distance:50,angle:45,blur:20,opacity:60,color:"fontColor"},lift:{spread:50},hollow:{stroke:17,color:"fontColor"},splice:{distance:50,angle:45,stroke:17,color:"fontColor"},echo:{distance:50,angle:45,color:"fontColor"},funky3d:{distance:10,distanceInverse:0,angle:45,opacity:100,color:"fontColorL+-40/BC/00"},bold3d:{distance:20,angle:0,opacity:100,textStrokeColor:"fontColorL+-40/BC/00",shadowStrokeColor:"fontColor",color:"fontColorL+-40/BC/00"},outline:{strokeOut:20,strokeIn:20,opacity:100,colorOut:"fontColor",colorIn:"fontColorL+-40/BC/00"}}}getCurrentLayer(){const{index:e,pageIndex:t}=r.Z.getters.getCurrSelectedInfo,n=o.ZP.subLayerIdx,i=r.Z.getters.getLayer(t,e),s=i&&i.layers;if(s){if(-1!==n)return s[n];for(const e in s)if("text"===s[e].type)return s[e]}return i||{}}getSpecSubTextLayer(e){const t=o.ZP.getCurrLayer,n=t&&t.layers;return n&&n[e]}getLayerFontSize(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n].spans.map((e=>e.styles.size||0));t=Math.max(t,...r)}return t}getLayerMainColor(e){const t={};if(!e)return"#000000";for(const n in e){const r=e[n].spans;for(const e in r){const{styles:n,text:i=""}=r[e];n.color&&(t[n.color]=t[n.color]||0+i.length)}}return Object.keys(t).reduce(((e,n)=>t[e]>t[n]?e:n),"#000000")}convertColor2rgba(e,t){if("transparent"===e)return"transparent";if(e.startsWith("#"))return this.convertHex2rgba(e,t);if(e.startsWith("rgb")){const[n,r,i,o=1]=e.match(/[.\d]+/g)||[];return`rgba(${n}, ${r}, ${i}, ${null!=t?t:o})`}return this.convertHex2rgba("#000000",.6)}convertHex2rgba(e,t){const n=e.match(/\w\w/g)||["0","0","0"],r="number"===typeof t?t:1;return`rgba(${n.map((e=>parseInt(e,16))).join(",")}, ${r})`}colorParser(e,t){const n=this.getLayerMainColor(t.paragraphs),r=(0,i.Rw)(n);r[0]=r[0]<=50?r[0]+40:r[0]-40;const o=(0,i.p3)(r);switch(e){case"fontColor":return n;case"fontColorL+-40/BC/00":return"#000000"===n?"#BCBCBC":"#FFFFFF"===n?"#000000":o;case"fontColorL+-40/F1D289":return["#000000","#FFFFFF"].includes(n)?"#F1D289":o;default:return e}}funky3d(e,t,n,r){const i=[];for(let o=.06*-t;o<1.5*e;o+=.5){const{x:e,y:t}=a.ZP.getRotatedPoint(-n,{x:0,y:0},{x:0,y:o});i.push(`${r} ${e}px ${t}px`)}return{textShadow:i.join(",")}}convertTextEffect(e){const t=e.styles.textEffect;let{name:n,distance:r,angle:i,opacity:o,color:s,blur:c,spread:d,stroke:u,fontSize:g,ver:p}=t||{};const h=this.shadowScale*g;let m=this.strokeScale*g;p&&"v1"===p&&(m=.5*Math.ceil(Math.max(u,.1)/9)*this.strokeScale*g);const y=.01*r*h,f=.01*c*h,w=.6*d*.01,N=1.6*d*.01*h,S=.01*o,x=.01*Math.max(u,.1)+.1;s=this.colorParser(s,e);const P=s?this.convertColor2rgba(s,S):"",I=(0,l.max)(e.paragraphs.flatMap((e=>e.spans.map((e=>e.styles.size))))),_={backgroundImage:"none",backgroundColor:"transparent",webkitBackgroundClip:"initial",maskImage:"none"};switch(n){case"shadow":return{"--base-stroke":"0px",filter:`drop-shadow(\n            ${P} \n            ${y*Math.cos(i*Math.PI/180)}px\n            ${y*Math.sin(i*Math.PI/180)}px\n            ${f/2}px)`};case"lift":return{"--base-stroke":"0px",filter:`drop-shadow(\n            ${this.convertColor2rgba("#000000",Math.max(.05,w))} \n            0px\n            ${.3*h}px\n            ${(.3*h+N)/2}px)`};case"hollow":return{"--base-stroke":x*m+"px",webkitTextStrokeColor:this.convertColor2rgba(s,1),webkitTextFillColor:"transparent"};case"splice":{const t=this.colorParser("fontColor",e);return{"--base-stroke":x*m+"px",webkitTextStrokeColor:`${this.convertColor2rgba(t,1)}`,webkitTextFillColor:"transparent",duplicatedTexts:[{extraBodyStyle:b({left:y*Math.cos(i*Math.PI/180)-I+"px",top:y*Math.sin(i*Math.PI/180)-I+"px"},_),extraSpanStyle:{color:s,"text-decoration-color":s,webkitTextStroke:"initial",webkitTextFillColor:"initial"}}]}}case"echo":return{"--base-stroke":"0px",duplicatedTexts:[.5,.2].map(((e,t)=>({extraBodyStyle:{left:y*Math.cos(i*Math.PI/180)*(t+1)-I+"px",top:y*Math.sin(i*Math.PI/180)*(t+1)-I+"px",opacity:e},extraSpanStyle:{color:s,"text-decoration-color":s}})))};case"funky3d":return{"--base-stroke":"0px",duplicatedTexts:[{extraBodyStyle:b(v(b({},this.funky3d(r*g/60,t.distanceInverse*g/60,t.angle,s)),{opacity:S}),_)}]};case"bold3d":{const{x:e,y:n}=a.ZP.getRotatedPoint(i,{x:0,y:0},{x:.2*t.distance*g/60,y:0});return{"--base-stroke":"1px",webkitTextStrokeColor:`${this.convertColor2rgba(t.textStrokeColor,S)}`,duplicatedTexts:[{extraBodyStyle:{left:e-I+"px",top:n-I+"px"},extraSpanStyle:{color:P,"text-decoration-color":P,webkitTextStrokeColor:`${this.convertColor2rgba(t.shadowStrokeColor,S)}`}}]}}case"outline":{const n=this.colorParser(t.colorOut,e),r=this.colorParser(t.colorIn,e);return{duplicatedTexts:[{extraBodyStyle:v(b({"--base-stroke":(t.strokeOut+t.strokeIn)*this.strokeScale*2*(g/60)+"px",webkitTextStrokeColor:this.convertColor2rgba(n,S)},_),{filter:"opacity(1)"})},{extraBodyStyle:v(b({"--base-stroke":t.strokeIn*this.strokeScale*2*(g/60)+"px",webkitTextStrokeColor:this.convertColor2rgba(r,S)},_),{filter:"opacity(1)"})}]}}default:return{"--base-stroke":"0px"}}}setColorKey(e){this.currColorKey=e}setColor(e){const t=this.getCurrentLayer().styles.textEffect.name;this.setTextEffect(t,{[this.currColorKey]:e})}get currColor(){return this.getCurrentLayer().styles.textEffect[this.currColorKey]}resetCurrTextEffect(){const e=this.getCurrentLayer().styles.textEffect.name;this.setTextEffect(e,this.effectDefaultOptions[e])}setTextEffect(e,t={}){const{index:n,pageIndex:i}=r.Z.getters.getCurrSelectedInfo,a=r.Z.getters.getLayer(i,n),l=a.layers?a.layers:[a],c=o.ZP.subLayerIdx,u=this.effectDefaultOptions[e];for(const o in l){if(-1!==c&&+o!==c)continue;const a=l[o];if("text"!==a.type)continue;const g=a.paragraphs,p=a.styles.textEffect,h={};if(p&&p.name===e)Object.assign(h,p,t),s.Z.set("textEffectSetting",e,h);else{const n=s.Z.get("textEffectSetting",e);Object.assign(h,u,n,t,{name:e})}const m=this.getLayerMainColor(g),y=this.getLayerFontSize(g);Object.assign(h,{color:h.color||m,strokeColor:h.strokeColor||m,fontSize:y}),r.Z.commit("UPDATE_specLayerData",{pageIndex:i,layerIndex:n,subLayerIndex:+o,styles:{textEffect:h}}),d.Z.updateHtml()}}_setFocus(e){this.focus=e}refreshSize(){const{index:e,pageIndex:t}=r.Z.getters.getCurrSelectedInfo,n=r.Z.getters.getLayer(t,e),i=n.layers?n.layers:[n];for(const o in i){const{type:n,styles:{textEffect:s},paragraphs:a}=i[o],l=s;if("text"===n){const n=this.getLayerFontSize(a);Object.assign(l,{fontSize:n}),r.Z.commit("UPDATE_specLayerData",{pageIndex:t,layerIndex:e,subLayerIndex:+o,styles:{textEffect:l}})}}}}t["Z"]=(0,c.qj)(new x)},86914:function(e,t,n){"use strict";n.d(t,{Z:function(){return L},v:function(){return E}});var r=n(50719),i=n(71684);class o{addTextFill(e,t){const n=JSON.stringify(t);return r.Z.request({url:"/put-text-effect",method:"POST",data:{token:(0,i.Z)().token,key_id:e,param:n,update:0}})}updateTextFill(e,t){const n=JSON.stringify(t);return r.Z.request({url:"/put-text-effect",method:"POST",data:{token:(0,i.Z)().token,key_id:e,param:n,update:1}})}}var s=new o,a=n(23931),l=n(3806),c=n(28253),d=n(52495),u=n(89497),g=n(20083),p=n(78871),h=n(3162),m=n(75231),y=n(33466),f=n(90272),b=n(50559),v=n(60410),w=Object.defineProperty,N=Object.defineProperties,S=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,_=(e,t,n)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k=(e,t)=>{for(var n in t||(t={}))P.call(t,n)&&_(e,n,t[n]);if(x)for(var n of x(t))I.call(t,n)&&_(e,n,t[n]);return e},Z=(e,t)=>N(e,S(t)),C=(e,t,n)=>(_(e,"symbol"!==typeof t?t+"":t,n),n),z=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class T{constructor(){C(this,"normalFills",[]),C(this,"adminFills",[])}get fillCategories(){const e=u.Z.getters["user/isAdmin"],t=[...e?[{id:0,list:this.adminFills,plan:1,title_jp:"管理員測試用",title_tw:"管理員測試用",title_us:"管理員測試用"}]:[],...this.normalFills];return t.map((e=>{var t;const r=null==(t=e.list[0])?void 0:t.param.img;return{key:`${e.id}`,label:e[`title_${a.Z.global.locale}`],plan:e.plan,img:r?`https://template.vivipic.com/admin/${r.teamId}/asset/image/${r.id}/tiny`:n(75230),options:[{type:"select",key:"img",label:a.Z.global.t("NN0870"),select:e.list.map((e=>({key:e.id,plan:e.plan,img:`https://template.vivipic.com/admin/${e.param.img.teamId}/asset/image/${e.param.img.id}/tiny`,label:"",preset:Z(k({},(0,v.omit)(e.param,["opacity"])),{img:Z(k({},e.param.img),{preview:{width:e.param.img.width,height:e.param.img.height},urls:["prev","tiny","smal","midd","full","larg","xtra"].reduce(((t,n)=>Z(k({},t),{[n]:`https://template.vivipic.com/admin/${e.param.img.teamId}/asset/image/${e.param.img.id}/${n}`})),{}),key:e.id})})})))},...g.Z.toOptions(["xOffset200","yOffset200","size","opacity"])]}}))}updateFillCategory(e,t){this.normalFills=e,this.adminFills=t}getDefaultEffects(e){const t={xOffset200:0,yOffset200:0,size:100};return"custom-fill-img"===e?t:{customImg:null}}getTextFillImg(e){var t,n;return null!=(n=null!=(t=e.img)?t:e.customImg)?n:null}getTextFillImgSrc(e,{ratio:t=1,finalSize:n}){const r=e.styles.textFill,i=this.getTextFillImg(r),{divHeight:o,divWidth:s,scaleByWidth:a}=this.calcTextFillVar(e);if(!i||!o)return"";let c=a?s:o;a!==i.width>i.height&&(c=c/Math.min(i.width,i.height)*Math.max(i.width,i.height));const g=.01*u.Z.getters.getPageScaleRatio,p=null!=n?n:c*g*t*(.01*r.size),m=(0,l.F)(i)?i.id?{type:"public",userId:h.Z.getUserId(i.urls.full,"public"),assetId:i.id}:{type:"private",userId:"",assetId:i.assetIndex}:{type:"unsplash",userId:"",assetId:i.id};let y=h.Z.getSrc(m,h.Z.getSrcSize(m,p));return"Preview"===d.Z.currentRoute.value.name&&(y=h.Z.appendCompQueryForVivipic(y)),y}calcTextFillVar(e){const t=e.styles.textFill,n=this.getTextFillImg(t);if(!n)return{};const r=e.styles.scale,i=e.styles.width/r,o=e.styles.height/r,s=n.width/i,a=n.height/o,l=s<a,c=t.size/100/(l?s:a),d=n.width*c,u=n.height*c;return{divHeight:o,divWidth:i,imgHeight:u,imgWidth:d,scaleByWidth:l}}convertTextEffect(e,t){const{textFill:r,textShape:i}=e.styles;if("none"===r.name||"none"!==i.name)return{};const o=this.getTextFillImgSrc(e,{ratio:t}),{divHeight:s,divWidth:a,imgHeight:l,imgWidth:c,scaleByWidth:d}=this.calcTextFillVar(e);if(!o||!s)return{};const g=c-a<0?1:-1,p=l-s<0?-1:1;return k({backgroundImage:`url("${o}")`,backgroundColor:f.Z.getLayerMainColor(e.paragraphs),backgroundSize:d?`${r.size}% auto`:`auto ${r.size}%`,backgroundPosition:`${r.xOffset200*g/2+50}% ${r.yOffset200*p/2+50}%`,backgroundOrigin:"content-box",backgroundRepeat:"no-repeat",webkitBackgroundClip:"text",webkitTextFillColor:"transparent",webkitTextStrokeColor:"transparent",textDecorationColor:"transparent",maskImage:`url(${n(14444)})`,maskSize:"100% 100%"},"backendRendering"===u.Z.getters["user/getUserId"]?{filter:"opacity(1)"}:{})}drawTextFill(e,t){const{textFill:n,textShape:r}=e.styles;if("none"===n.name||"none"!==r.name||"fill"!==f.Z.focus)return null;const i=this.getTextFillImgSrc(e,{ratio:t}),{divHeight:o,divWidth:s,imgHeight:a,imgWidth:l,scaleByWidth:c}=this.calcTextFillVar(e);if(!i||!o)return null;const d=l-s<0?-1:1,u=a-o<0?-1:1;return{tag:"img",attrs:{src:i},style:{[c?"width":"height"]:`${n.size}%`,left:(l-s)*(.5-n.xOffset200*d/200)*-1+"px",top:(a-o)*(.5+n.yOffset200*u/200)*-1+"px",opacity:.5}}}setTextFill(e,t,n=!1){var r,i,o;const{index:s,pageIndex:a}=u.Z.getters.getCurrSelectedInfo,l=u.Z.getters.getLayer(a,s),d=l.layers?l.layers:[l],g=m.ZP.subLayerIdx,p=this.getDefaultEffects(e);for(const h in d){if(-1!==g&&+h!==g)continue;const l=d[h];if("text"!==l.type)continue;const f=l.styles.textFill,b={};for(const[e,n]of Object.entries(null!=t?t:{}))if("opacity"===e)return void m.ZP.updateLayerOpacity(n);if(f&&f.name===e){const e=!n&&t&&Object.keys(t).includes("img")?y.Z.get("textEffectSetting",`fill.${t.img.key}`):null;Object.assign(b,f,t,e),(0,c.LB)(b)&&"0"!==b.name&&b.img&&y.Z.set("textEffectSetting",`fill.${b.img.key}`,(0,v.omit)(b,["customImg","name"]))}else{const t=(0,v.find)(this.fillCategories,["key",e]),n=null==(i=null==(r=null==t?void 0:t.options[0])?void 0:r.select[0])?void 0:i.preset,s=(null==(o=null==n?void 0:n.img)?void 0:o.key)?y.Z.get("textEffectSetting",`fill.${n.img.key}`):null;Object.assign(b,p,n,s,{name:e,customImg:f.customImg})}u.Z.commit("UPDATE_specLayerData",{pageIndex:a,layerIndex:s,subLayerIndex:+h,styles:{textFill:b},props:{contentEditable:!1}})}}resetCurrTextEffect(){return z(this,null,(function*(){var e;const t=f.Z.getCurrentLayer().styles.textFill,n=t.name;if("none"===n)return;if("custom-fill-img"===n)return void this.setTextFill(n,this.getDefaultEffects(n),!0);const r=(0,v.find)(this.fillCategories,["key",n]),i=(0,v.find)(null==(e=null==r?void 0:r.options[0])?void 0:e.select,["key",t.img.key]),o=null==i?void 0:i.preset;this.setTextFill(n,o,!0)}))}uploadTextFill(){return z(this,null,(function*(){var e;const t=m.ZP.getCurrLayer;if("text"!==t.type)return void(0,b.h4)({group:"error",text:"當前layer並非text"});const n=t.styles.textFill;if("none"===n.name)return void(0,b.h4)({group:"error",text:"當前layer不含有文字填滿"});let r;const i=(0,v.pick)(n,["xOffset200","yOffset200","size"]);if("custom-fill-img"===n.name){if(!(0,l.F)(n.customImg)||!n.customImg.assetIndex)return void(0,b.h4)({group:"error",text:"當前文字填滿沒有圖片，或是圖片不是來自管理員上傳。"});i.img={assetIndex:n.customImg.assetIndex,teamId:u.Z.getters["user/getUserId"],id:n.customImg.id,width:n.customImg.width,height:n.customImg.height},r=yield s.addTextFill(p.Z.generateRandomString(20),i)}else{const t=(0,v.find)(this.fillCategories,["key",n.name]),o=(0,v.find)(null==(e=null==t?void 0:t.options[0])?void 0:e.select,["key",n.img.key]);if(!o)return void(0,b.h4)({group:"error",text:"找不到文字填滿id"});i.img=(0,v.pick)(n.img,["assetIndex","teamId","id","width","height"]),r=yield s.updateTextFill(o.key,i)}r.data.flag?(0,b.h4)({group:"error",text:r.data.msg}):0===r.data.flag&&(0,b.h4)({group:"copy",text:"文字填滿上傳/更新成功。"})}))}}var L=new T;const E=Symbol("replaceImg")},74041:function(e,t,n){"use strict";n.d(t,{Y:function(){return I}});var r=n(23931),i=n(89497),o=n(23579),s=n(6400),a=n(40881),l=n(53074),c=n(60410),d=n.n(c),u=n(29651),g=n(78871),p=n(75231),h=n(90272),m=n(89456),y=n(16290),f=Object.defineProperty,b=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,N=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>{for(var n in t||(t={}))v.call(t,n)&&N(e,n,t[n]);if(b)for(var n of b(t))w.call(t,n)&&N(e,n,t[n]);return e};const x={fontSize:"size",fontFamily:"font",bold:"weight",italic:"style",underline:"decoration",color:"color",lineHeight:"lineHeight",fontSpacing:"fontSpacing",textAlign:"align",type:"type",assetId:"assetId",userId:"userId"};class P{get pageIndex(){return i.Z.getters.getCurrSelectedPageIndex}get layerIndex(){return i.Z.getters.getCurrSelectedIndex}get currSelectedInfo(){return i.Z.getters.getCurrSelectedInfo}get getCurrTextProps(){return o.Z.state.props}get getCurrSel(){return o.Z.state.sel}get getTextState(){return o.Z.state}get getCurrLayer(){return i.Z.getters.getLayer(this.pageIndex,this.layerIndex)}propTypeSorter(e){return e.includes("vertical")?2:e.includes("text-align")||e.includes("height")?0:1}onPropertyClick(e,t,n=this.getCurrSel.start,r=this.getCurrSel.end){const i=this.getCurrLayer;if(!i)return;const{layerIndex:o,subLayerIdx:s}=p.ZP;if("group"===i.type||"tmp"===i.type)switch(this.propTypeSorter(e)){case 2:{const n=i;if(-1===s)for(let r=0;r<n.layers.length;r++)"text"===n.layers[r].type&&(this.blockPropertyHandler(e,t,r),m.Z.updateGroupLayerSize(p.ZP.pageIndex,o,r,{keepCorner:!0}));else this.blockPropertyHandler(e,t,s),m.Z.updateGroupLayerSize(p.ZP.pageIndex,o,s,{keepCorner:!0});break}case 1:this.groupHandler(e,t,n,r,o,s)}if("text"===i.type)switch(this.propTypeSorter(e)){case 2:this.blockPropertyHandler(e,t);break;case 1:{const s=this.propIndicator(n,r,e,t||""),a=this.spanPropertyHandler(e,s,n,r,i);p.ZP.updateLayerProps(p.ZP.pageIndex,o,{paragraphs:a.paragraphs}),m.Z.isSel(r)?(0,u.Y3)((()=>m.Z.focus(this.getCurrSel.start,this.getCurrSel.end))):setTimeout((()=>m.Z.focus(this.getCurrSel.start,this.getCurrSel.end)),0)}}}blockPropertyHandler(e,t,n){const r=e=>{p.ZP.updateLayerStyles(this.pageIndex,this.layerIndex,e)},i=e=>{p.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{paragraphs:e})},o=e=>{this.updateSelectedLayersStyles(e,null!=n?n:NaN)},s=e=>{this.updateSelectedLayersParagraphs(e,null!=n?n:NaN)},l="undefined"===typeof n?r:o,c="undefined"===typeof n?i:s;switch(e){case"font-vertical":{const e=!!t,r=e?"vertical":"initial",i="undefined"===typeof n?this.getCurrLayer:this.getCurrLayer.layers[n],o=i.styles.writingMode.includes("vertical")?"vertical":"initial";if(e){const t=g.Z.deepCopy(i.paragraphs);this.removeInvalidStyles(t,e,i.isCompensated),c(t)}if(l({writingMode:r}),"undefined"===typeof n&&o!==r){const{x:e,y:t,width:n,height:o,rotate:s}=i.styles,l=m.Z.getTextHW(i,i.widthLimit),c={xSign:r?-1:1,ySign:1,x:e,y:t,angle:s*Math.PI/180},d={width:r?l.width-n:0,height:r?0:l.height-o},u=a.Z.getTranslateCompensation(c,d);p.ZP.updateLayerStyles(this.pageIndex,this.layerIndex,{x:u.x,y:u.y,width:l.width,height:l.height}),p.ZP.updateLayerProps(this.pageIndex,this.layerIndex,{spanDataList:l.spanDataList})}this.updateTextPropsState({isVertical:e,decoration:"none",style:"normal"}),y.Z.updateHtml()}}}removeInvalidStyles(e,t,n,{pHandler:r,spanHandler:i,pPostHandler:o,spanPostHandler:s}={}){const a=this.getMinimumFontSize();e.forEach((e=>{if(r&&r(e),t&&e.spanStyle){const t=y.Z.generateSpanStyle(e.spanStyle);"italic"===t.style&&(t.style="normal"),"underline"===t.decoration&&(t.decoration="none"),"string"===typeof t.size&&(t.size=parseFloat(t.size)),t.size<a&&!n&&(t.size=a),e.spanStyle=y.Z.textStyles(t)}const l=e.styles;"string"===typeof l.size&&(l.size=parseFloat(l.size)),l.size<a&&!n&&(l.size=a);for(const r of e.spans)i&&i(r),t&&"italic"===r.styles.style&&(r.styles.style="normal"),t&&"underline"===r.styles.decoration&&(r.styles.decoration="none"),r.styles.font=l.font,r.styles.type=l.type,r.styles.userId=l.userId,r.styles.assetId=l.assetId,r.styles.fontUrl=l.fontUrl,"string"===typeof r.styles.size&&(r.styles.size=parseFloat(r.styles.size)),r.styles.size<a&&!n&&(r.styles.size=a),s&&s(r);o&&o(e)}))}groupHandler(e,t,n=m.Z.getNullSel(),r=m.Z.getNullSel(),i,o){let s,a=!1;const l=this.getCurrLayer;i=null!=i?i:p.ZP.layerIndex;const c=e=>m.Z.isSel(n)?{start:S({},n),end:S({},r)}:m.Z.selectAll(e);if("undefined"===typeof o){for(let i=0;i<l.layers.length&&!a;i++)if("text"===l.layers[i].type){const n=l.layers[i],r=this.propIndicator({pIndex:0,sIndex:0},{pIndex:n.paragraphs.length-1,sIndex:n.paragraphs[n.paragraphs.length-1].spans.length-1},e,null!=t?t:"",n);switch(e){case"bold":s="normal","bold"===r.weight&&(s="bold",a=!0);break;case"italic":s="normal","italic"===r.style&&(s="italic",a=!0);break;case"underline":s="none","underline"===r.decoration&&(s="underline",a=!0);break;case"fontSize":s=t;break;case"fontFamily":s=t;break;case"color":s=t,a=!0;break}}const n=Object.keys(x).indexOf(e),r=Object.values(x)[n],o={[r]:s};for(let t=0;t<l.layers.length;t++){const n=l.layers[t];if("text"===n.type){const{start:r,end:s}=m.Z.selectAll(n),a=this.spanPropertyHandler(e,o,r,s,n);p.ZP.updateSubLayerProps(p.ZP.pageIndex,i,t,{paragraphs:a.paragraphs})}}}if("number"===typeof o){const n=p.ZP.getLayer(this.pageIndex,i).layers[o],{start:r,end:s}=c(n),a=this.propIndicator(r,s,e,null!=t?t:"",n),l=this.spanPropertyHandler(e,a,r,s,n);p.ZP.updateSubLayerProps(p.ZP.pageIndex,i,o,{paragraphs:l.paragraphs}),m.Z.focus(this.getCurrSel.start,this.getCurrSel.end,o)}}spanPropertyHandler(e,t,n,r,i){const o=g.Z.deepCopy(i);if(m.Z.isSel(r)&&(this.rangedSelHandler(n,r,o,t),"fontFamily"===e))for(let s=n.pIndex;s<=r.pIndex;s++)o.paragraphs[s].styles.font=o.paragraphs[s].spans[0].styles.font,o.paragraphs[s].styles.type=o.paragraphs[s].spans[0].styles.type,o.paragraphs[s].styles.userId=o.paragraphs[s].spans[0].styles.userId,o.paragraphs[s].styles.assetId=o.paragraphs[s].spans[0].styles.assetId,o.paragraphs[s].styles.fontUrl=o.paragraphs[s].spans[0].styles.fontUrl;if(!m.Z.isSel(r)){const e=o.paragraphs[n.pIndex].spans[n.sIndex].styles;Object.assign(e,t)}if("fontSize"===e)for(const s of o.paragraphs){let e=0;for(const t of s.spans)t.styles.size>e&&(e=t.styles.size);s.styles.size=e}return o}spanParagraphPropertyHandler(e,t,n,r,i){const o=g.Z.deepCopy(i),s=n.pIndex,a=r.pIndex;for(let l=s;l<=a;l++){const e=o.paragraphs[l];if(Object.assign(e.styles,t),e.spanStyle){const n=y.Z.generateSpanStyle(e.spanStyle);Object.assign(n,t),e.spanStyle=y.Z.textStyles(n)}for(const n of e.spans)Object.assign(n.styles,t)}return o}rangedSelHandler(e,t,n,r){let i=!0;for(let o=e.pIndex;o<n.paragraphs.length;o++){const s=n.paragraphs[o];for(let a=0;a<s.spans.length;a++){const l=s.spans[a],c=l.text;if(!(o===e.pIndex&&a<e.sIndex))if(o===e.pIndex&&a===e.sIndex){l.text=c.substr(0,e.offset);const s={text:"",styles:this.spanStylesTransformer(void 0,{})};if(s.text=c.substr(e.offset,c.length),Object.assign(s.styles,this.spanStylesTransformer(l,r)),n.paragraphs[o].spans.splice(a+1,0,s),""===l.text&&(n.paragraphs[o].spans.splice(a,1),i=!1),e.pIndex===t.pIndex&&e.sIndex===t.sIndex){s.text=c.substring(e.offset,t.offset);const r={text:"",styles:this.spanStylesTransformer(void 0,{})};r.text=c.substr(t.offset),Object.assign(r.styles,this.spanStylesTransformer(l,{})),""!==r.text&&n.paragraphs[o].spans.splice(i?a+2:a+1,0,r),t.offset-=e.offset;break}e.pIndex===t.pIndex&&i&&(a++,t.sIndex++)}else{if(o===t.pIndex&&a===t.sIndex){l.text=c.substr(t.offset);const e={text:"",styles:this.spanStylesTransformer(void 0,{})};e.text=c.substr(0,t.offset),Object.assign(e.styles,this.spanStylesTransformer(l,r)),""===l.text?n.paragraphs[o].spans.splice(a,1,e):n.paragraphs[o].spans.splice(a,0,e);break}(o<t.pIndex||o===t.pIndex&&a<t.sIndex)&&Object.assign(l.styles,this.spanStylesTransformer(l,r))}}}return i}isSameSpanStyles(e,t){let n=!0;for(const r of Object.keys(e))if(e[r]!==t[r]&&""!==e[r]&&!Number.isNaN(e[r])){n=!1;break}return n}propCompare(e,t,n){return"fontSize"===e&&"number"===typeof t&&"number"===typeof n?d().round(t,2)===d().round(n,2):t===n}propReader(e){const{subLayerIdx:t,getCurrLayer:n}=p.ZP;switch(n.type){case"text":return this.propReadOfLayer(e,n);case"group":{const i=n.styles.scale;try{if(-1===t){let t="init";for(let r=0;r<n.layers.length;r++)if("text"===n.layers[r].type){const i=n.layers[r];if(["italic","underline"].includes(e)&&i.styles.writingMode.includes("vertical"))continue;const o=this.propReadOfLayer(e,i,!0);if("init"===t)t=o;else if(!this.propCompare(e,t,o))return}return"fontSize"===e&&"number"===typeof t?t*i:t}{const r=n.layers[t],o=this.propReadOfLayer(e,r);return"fontSize"===e&&"number"===typeof o?o*i:o}}catch(r){l.Z.setLogForError(r)}break}case"tmp":{const t=this.getCurrLayer,n=t.styles.scale;let r;for(let i=0;i<t.layers.length;i++)if("text"===t.layers[i].type){const n=t.layers[i];if(["italic","underline"].includes(e)&&n.styles.writingMode.includes("vertical"))continue;const o=this.propReadOfLayer(e,n,!0);if("undefined"===typeof r)r=o;else if(!this.propCompare(e,r,o))return}return"fontSize"===e&&"number"===typeof r?r*n:r}}}propReadOfLayer(e,t,n=!1){let r;const i=x[e],o=t.styles.scale,s="size"===i;return n?this.noEditorRead(e,t):(y.Z.agent((t=>{var n,o,s,a,l,c,d,u,g,p,h;let m=!1;const f=t.view.state.selection,b=f.$from,v=f.$to,w=b.index(0);let N=b.index(1);const S=v.index(0);let x=v.index(1);const P=t.getJSON(),I=null!=(n=P.content)?n:[];let _;if(f.empty?0===b.textOffset&&0!==N&&N--:0===v.textOffset&&0!==x&&x--,["fontSpacing","lineHeight","align"].includes(i))_=(null!=(o=I[w].attrs)?o:{})[i];else{let e={};const n=I[w].content;if(n){let t=N;t>=n.length&&(t=n.length-1),e=null!=(l=null==(a=null==(s=n[t].marks)?void 0:s[0])?void 0:a.attrs)?l:{}}0===Object.keys(e).length&&(e=t.getAttributes("paragraph").spanStyle?y.Z.makeSpanStyle(t.getAttributes("paragraph")):y.Z.generateSpanStyle(t.storage.nuTextStyle.spanStyle)),_=e[i]}if(f.empty)return void(r=_);let k,Z=N;for(let r=w;r<=S;r++){if(["fontSpacing","lineHeight","align"].includes(i)){if(!this.propCompare(e,_,(null!=(c=I[r].attrs)?c:{})[i])){m=!0;break}continue}const t=null!=(d=I[r].content)?d:[];if(k=r===S?x:t.length-1,t.length>0){for(let n=Z;n<=k&&n<t.length;n++)if(!this.propCompare(e,_,(null!=(p=null==(g=null==(u=t[n].marks)?void 0:u[0])?void 0:g.attrs)?p:{})[i])){m=!0;break}}else if(!this.propCompare(e,_,(null!=(h=I[r].attrs)?h:{})[i])){m=!0;break}if(m)break;Z=0}r=m?void 0:_})),s&&void 0!==r&&(r*=o),r)}noEditorRead(e,t){const n=g.Z.deepCopy(null!=t?t:this.getCurrLayer),r=n.styles.scale,i="fontSize"===e,o={pIndex:0,sIndex:0,offset:0},s=n.paragraphs.length,a=n.paragraphs[s-1].spans.length,l={pIndex:s-1,sIndex:a-1,offset:n.paragraphs[s-1].spans[a-1].text.length};let c=!1,d="";switch(e){case"fontSpacing":d=n.paragraphs[o.pIndex].styles.fontSpacing;break;case"lineHeight":d=n.paragraphs[o.pIndex].styles.lineHeight;break;case"textAlign":d=n.paragraphs[o.pIndex].styles.align;break;default:if(Object.keys(x).includes(e)){const t=Object.keys(x).indexOf(e),r=Object.values(x)[t];d=n.paragraphs[o.pIndex].spans[o.sIndex].styles[r]}}for(let u=o.pIndex;u<=l.pIndex&&n.paragraphs[u];u++){const t=n.paragraphs[u];if("lineHeight"!==e&&"fontSpacing"!==e&&"textAlign"!==e){for(let n=0;n<t.spans.length;n++){const r=t.spans[n];if(!(u===o.pIndex&&n<o.sIndex||u===l.pIndex&&n>l.sIndex)&&Object.keys(x).includes(e)){const t=Object.keys(x).indexOf(e),n=Object.values(x)[t];if(d!==r.styles[n]){c=!0;break}}}if(c)break}else{const n={lineHeight:"lineHeight",fontSpacing:"fontSpacing",textAlign:"align"};if(t.styles[n[e]]!==d){c=!0;break}}}return c?void 0:i&&"number"===typeof d?d*r:d}fontSizeAllModifier(e){const t=p.ZP.getCurrLayer;"text"===t.type||["tmp","group"].includes(t.type)&&-1!==p.ZP.subLayerIdx?y.Z.agent((n=>{var r,i,o,s,a,l,c,d,u,h,m;const f=n.view.state.selection;if(f.empty){let r=t.styles.scale;-1!==p.ZP.subLayerIdx&&(r*=t.layers[p.ZP.subLayerIdx].styles.scale);const i=y.Z.generateSpanStyle(n.storage.nuTextStyle.spanStyle);i.size=e(i.size),n.storage.nuTextStyle.spanStyle=y.Z.textStyles(i),n.chain().focus().setMark("textStyle",i).run(),this.updateTextPropsState({fontSize:i.size*r})}else{const t=f.$from,p=f.$to,b=t.index(0),v=t.index(1),w=p.index(0);let N=p.index(1);0===p.textOffset&&0!==N&&N--;const S=n.getJSON(),x=null!=(r=S.content)?r:[];let P,I=v;for(let n=b;n<=w;n++){let r=!1;const y=null!=(i=x[n].content)?i:[];if(P=n===w?N:y.length-1,y.length>0){const i=g.Z.deepCopy(y);for(let m=I;m<=P&&m<y.length;m++){let f=!1,S=0;if(n===b&&m===v&&0!==t.textOffset){r=!0;const n=g.Z.deepCopy(y[m]),a=g.Z.deepCopy(n),l=n.text,c=l.substring(0,t.textOffset);n.text=c,S=c.length;const d=l.substring(t.textOffset);a.text=d;const u=null==(s=null==(o=a.marks)?void 0:o[0])?void 0:s.attrs;u&&(u.size=e(u.size)),i.splice(m,1,n,a),f=!0}if(n===w&&m===N&&0!==p.textOffset){const t=r?m+1:m,n=g.Z.deepCopy(i[t]),o=g.Z.deepCopy(n),s=n.text,u=s.substring(0,p.textOffset-S);n.text=u;const h=null==(l=null==(a=n.marks)?void 0:a[0])?void 0:l.attrs;!h||r&&N===v||(h.size=e(h.size));const y=s.substring(p.textOffset-S);o.text=y;const b=null==(d=null==(c=o.marks)?void 0:c[0])?void 0:d.attrs;b&&r&&N===v&&(b.size=e(b.size,!0)),i.splice(t,1,n,o),f=!0}if(!f){const t=r?m+1:m,n=null==(h=null==(u=i[t].marks)?void 0:u[0])?void 0:h.attrs;n&&(n.size=e(n.size))}}I=0,x[n].content=i}else{const t=null!=(m=x[n].attrs)?m:{};t.size=e(t.size)}}n.chain().setContent(y.Z.toJSON(y.Z.toIParagraph(S).paragraphs)).focus().selectPrevious().run(),y.Z.forceUpdate(),this.updateTextPropsState()}})):["group","tmp"].includes(t.type)&&(t.layers.forEach(((t,n)=>{"text"===t.type&&this.propAppliedAllText(p.ZP.layerIndex,n,"size",0,e),"text"===t.type&&m.Z.updateGroupLayerSizeByShape(p.ZP.pageIndex,this.layerIndex,n)})),this.updateTextPropsState())}fontSizeSteppingCore(e,t=!1,n=this.layerIndex,r=-1){const i=(t,n=!1)=>n?t-e:t+e;t?(this.propAppliedAllText(n,r,"size",0,i),y.Z.updateHtml()):this.fontSizeAllModifier(i)}fontSizeStepping(e){const{getCurrLayer:t,pageIndex:n,layerIndex:r,subLayerIdx:i}=p.ZP;if(t.type===s.F5.text||-1!==i){let o=t.styles.scale;-1!==i&&(o*=t.layers[i].styles.scale);let s=e/o;if(e<0){const e=this.getBaseFontSizeOfSelection(),o=this.getScaleCompensation(e+s);o.needCompensation&&(this.fontSizeGaining(1/o.scale,!0,r,i),this.applyScaleCompensation(o.scale,t,n,r,i),s/=o.scale)}this.fontSizeSteppingCore(s)}else if(t.type===s.F5.group||t.type===s.F5.tmp){const i=t.styles.scale;for(const[o,a]of t.layers.entries())if(a.type===s.F5.text){const s=i*a.styles.scale;let l=e/s;if(e<0){const e=this.getBaseFontSizeOfLayer(a),i=this.getScaleCompensation(e+l);i.needCompensation&&(this.fontSizeGaining(1/i.scale,!0,r,o),this.applyScaleCompensation(i.scale,t,n,r,o),l/=i.scale)}this.fontSizeSteppingCore(l,!0,r,o),m.Z.updateTextLayerSizeByShape(p.ZP.pageIndex,r,o)}m.Z.updateGroupLayerSize(p.ZP.pageIndex,r),this.updateTextPropsState()}}fontSizeGaining(e,t=!1,n=this.layerIndex,r=-1){const i=(t,n=!1)=>n?t/e:t*e;t?(this.propAppliedAllText(n,r,"size",0,i),y.Z.updateHtml()):this.fontSizeAllModifier(i)}getBaseFontSizeOfSelection(){let e=Number.MAX_SAFE_INTEGER;return y.Z.agent((t=>{var n,r,i,o,s,a;const l=t.view.state.selection;if(l.empty){const n=y.Z.generateSpanStyle(t.storage.nuTextStyle.spanStyle);e=n.size}else{const c=l.$from,d=l.$to,u=c.index(0),g=c.index(1),p=d.index(0);let h=d.index(1);0===d.textOffset&&0!==h&&h--;const m=t.getJSON(),y=null!=(n=m.content)?n:[];let f,b=g;for(let t=u;t<=p;t++){const n=null!=(r=y[t].content)?r:[];if(f=t===p?h:n.length-1,n.length>0){for(let t=b;t<=f&&t<n.length;t++){const r=null!=(s=null==(o=null==(i=n[t].marks)?void 0:i[0])?void 0:o.attrs)?s:{};r.size<e&&(e=r.size)}b=0}else{const n=null!=(a=y[t].attrs)?a:{};n.size<e&&(e=n.size)}}}})),e}getBaseFontSizeOfParagraphs(e){let t=Number.MAX_SAFE_INTEGER;for(const n of e)for(const e of n.spans)e.styles.size<t&&(t=e.styles.size);return t}getBaseFontSizeOfLayer(e){return this.getBaseFontSizeOfParagraphs(e.paragraphs)}propAppliedParagraphs(e,t,n,r){e=g.Z.deepCopy(e);const i=e=>r?r(e):n,o=e=>{Object.prototype.hasOwnProperty.call(e,t)&&"number"===typeof e[t]&&(e[t]=i(e[t]))};return e.forEach((e=>{if(e.spanStyle){const t=y.Z.generateSpanStyle(e.spanStyle);t.size=i(t.size),e.spanStyle=y.Z.textStyles(t)}o(e.styles),e.spans.forEach((e=>{o(e.styles)}))})),e}propAppliedAllText(e,t,n,r,i){const o=p.ZP.getLayer(p.ZP.pageIndex,e);let s;if(-1===t&&"text"===o.type)s=o;else{if("group"!==o.type&&"tmp"!==o.type||"text"!==o.layers[t].type)return;s=o.layers[t]}const a=this.propAppliedParagraphs(s.paragraphs,n,r,i);p.ZP.updateLayerProps(p.ZP.pageIndex,e,{paragraphs:a},t)}propIndicator(e,t,n,r,i){const o={},s=g.Z.deepCopy(null!=i?i:this.getCurrLayer);if(!m.Z.isSel(t)){const t=s.paragraphs[e.pIndex].spans[e.sIndex].styles;switch(n){case"bold":o.weight="normal"===t.weight?"bold":"normal";break;case"underline":o.decoration="none"===t.decoration?"underline":"none";break;case"italic":o.style="italic"===t.style?"normal":"italic";break;default:break}return o}let a=!1;for(let l=e.pIndex;l<=t.pIndex;l++){const i=s.paragraphs[l];for(let s=0;s<i.spans.length;s++){const c=i.spans[s];if(!(l===e.pIndex&&s<e.sIndex||l===t.pIndex&&s>t.sIndex)){switch(n){case"bold":o.weight="normal","normal"===c.styles.weight&&(o.weight="bold",a=!0);break;case"underline":o.decoration="none","none"===c.styles.decoration&&(o.decoration="underline",a=!0);break;case"italic":o.style="normal","normal"===c.styles.style&&(o.style="italic",a=!0);break;case"fontFamily":"string"===typeof r&&(o.font=r,a=!0);break;case"fontSize":o.size=r,a=!0;break;case"color":o.color=r,a=!0;break}if(a)break}}if(a)break}return o}spanStylesTransformer(e,t){const n={font:e?e.styles.font:"",type:e?e.styles.type:"public",userId:e?e.styles.userId:"",assetId:e?e.styles.assetId:"",fontUrl:e?e.styles.fontUrl:"",weight:e?e.styles.weight:"",size:e?e.styles.size:NaN,decoration:e?e.styles.decoration:"",style:e?e.styles.style:"",color:e?e.styles.color:""};return Object.assign(n,t)}updateTextPropsState(e){if("undefined"!==typeof e)return void i.Z.commit("text/UPDATE_props",e);const t=["textAlign","fontSize","fontSpacing","lineHeight","font","type","assetId","userId","color","weight","style","decoration","isVertical"],n={};t.forEach((e=>{const t=this.updateTextPropState(e);n[e]=t})),i.Z.commit("text/UPDATE_props",n)}updateTextPropState(e,t=!1){const n=p.ZP.subLayerIdx,o=this.getCurrLayer;if(!p.ZP.isOfLayerType(o,s.F5.text,n,!0))return;let a;switch(e){case"textAlign":a=this.propReader("textAlign");break;case"fontSize":{const e=this.propReader("fontSize");a="number"===typeof e?e.toString():"--";break}case"fontSpacing":{const e=this.propReader("fontSpacing");a="number"===typeof e?(1e3*e).toString():"--";break}case"lineHeight":{const e=this.propReader("lineHeight");a="number"===typeof e&&-1!==e?e.toString():"--";break}case"font":{const e=this.propReader("fontFamily");a="string"===typeof e?e:`_${r.Z.global.t("NN0341")}`;break}case"type":{const e=this.propReader("type");a="string"===typeof e?e:"--";break}case"assetId":{const e=this.propReader("assetId");a=null!=e?e:"";break}case"userId":{const e=this.propReader("userId");a=null!=e?e:"";break}case"color":a="string"===typeof this.propReader("color")?this.propReader("color").toUpperCase():"--";break;case"decoration":a=this.propReader("underline");break;case"weight":a=this.propReader("bold");break;case"style":a=this.propReader("italic");break;case"isVertical":if("text"===o.type)a=o.styles.writingMode.includes("vertical");else if(-1!==n&&"text"===o.layers[n].type)a=o.layers[n].styles.writingMode.includes("vertical");else{a=!0;for(let e=0;e<o.layers.length;e++)if("text"===o.layers[e].type){const t=o.layers[e];a=a&&t.styles.writingMode.includes("vertical")}}break}if(!t)return a;i.Z.commit("text/UPDATE_props",{[e]:a})}updateSelectedLayersStyles(e,t){i.Z.commit("UPDATE_selectedLayersStyles",{styles:e,layerIndex:t})}updateSelectedLayersParagraphs(e,t){i.Z.commit("UPDATE_selectedTextParagraphs",{paragraphs:e,tmpLayerIndex:t})}updateParagraphStyles(e,t,n,r){i.Z.commit("UPDATE_paragraphStyles",{pageIndex:e,layerIndex:t,pIndex:n,styles:r})}applyPropsToAll(e="span",t,n=p.ZP.layerIndex,r=p.ZP.subLayerIdx){const i=n=>{n.forEach((n=>{if(e.includes("paragraph")&&(Object.assign(n.styles,t),n.spanStyle)){const e=y.Z.generateSpanStyle(n.spanStyle);Object.assign(e,t),n.spanStyle=y.Z.textStyles(e)}e.includes("span")&&n.spans.forEach((e=>{Object.assign(e.styles,t)}))}))},o=p.ZP.getLayer(p.ZP.pageIndex,n);if(-1!==r&&"group"===o.type){const e=g.Z.deepCopy(o.layers[r].paragraphs);return i(e),void p.ZP.updateSubLayerProps(p.ZP.pageIndex,n,r,{paragraphs:e})}if(["tmp","group"].includes(o.type))o.layers.forEach(((e,t)=>{if("text"===e.type){const r=g.Z.deepCopy(e.paragraphs);i(r),p.ZP.updateSubLayerProps(p.ZP.pageIndex,n,t,{paragraphs:r})}}));else if("text"===o.type){const e=g.Z.deepCopy(o.paragraphs);i(e),p.ZP.updateLayerProps(p.ZP.pageIndex,n,{paragraphs:e})}}getMinimumFontSize(){const e=document.createElement("span");e.style.fontSize="1px",e.style.position="fixed",e.style.top="100%",e.style.left="100%",document.body.appendChild(e);const t=parseInt(getComputedStyle(e).fontSize.replace("px",""));return document.body.removeChild(e),t/1.333333}getScaleCompensation(e){const t=this.getMinimumFontSize();return e<t?{size:t,scale:e/t,needCompensation:!0}:{size:e,scale:1,needCompensation:!1}}applyScaleCompensation(e,t,n,r,i=-1){var o;if(t.type===s.F5.text){const i=t.styles.scale;p.ZP.updateLayerStyles(n,r,{scale:e*i})}else if(t.type===s.F5.group||t.type===s.F5.tmp){if(-1===i||t.layers[i].type!==s.F5.text)throw new Error(`Only text layer is valid for applyScaleCompensation. subLayerIdx: ${i}, currLayer.layers[subLayerIdx]?.type: ${null==(o=t.layers[i])?void 0:o.type}`);const a=t.layers[i].styles.scale;p.ZP.updateLayerStyles(n,r,{scale:e*a},i)}}fontSizeHandler(e,t=!0){const{getCurrLayer:n,pageIndex:r,layerIndex:i,subLayerIdx:o}=p.ZP;if(n.type===s.F5.text||-1!==o){let t=n,s=n.styles.scale;-1!==o&&(t=n.layers[o],s*=t.styles.scale);const a=this.getScaleCompensation(e/s);a.needCompensation&&(t.contentEditable&&this.fontSizeGaining(1/a.scale,!0,i,o),this.applyScaleCompensation(a.scale,n,r,i,o)),y.Z.applySpanStyle("size",a.size,void 0,{},!0)}else if(n.type===s.F5.group||n.type===s.F5.tmp){const t=n.styles.scale;for(const[o,a]of n.layers.entries())if(a.type===s.F5.text){const s=t*a.styles.scale,l=this.getScaleCompensation(e/s);l.needCompensation&&this.applyScaleCompensation(l.scale,n,r,i,o),this.applyPropsToAll("span,paragraph",{size:l.size},i,o),m.Z.updateTextLayerSizeByShape(p.ZP.pageIndex,i,o)}m.Z.updateGroupLayerSize(p.ZP.pageIndex,i)}y.Z.forceUpdate(t),this.updateTextPropsState({fontSize:e.toString()}),h.Z.refreshSize(),y.Z.updateHtml()}}t["Z"]=new P;const I=[6,8,10,12,14,16,18,20,23,26,30,34,38,44,50,58,66,74,82,90,98,114,138,162]},23917:function(e,t,n){"use strict";var r=n(89497),i=n(78871),o=n(75231),s=n(33466),a=n(35426),l=n(32490),c=n(90272),d=n(74041),u=n(89456),g=n(16290),p=Object.defineProperty,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&f(e,n,t[n]);if(h)for(var n of h(t))y.call(t,n)&&f(e,n,t[n]);return e},v=(e,t,n)=>(f(e,"symbol"!==typeof t?t+"":t,n),n),w=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class N{constructor(){v(this,"shapes",{}),v(this,"observer"),v(this,"observerCallbackMap"),v(this,"trashDivs",[]),this.observerCallbackMap={},this.observer=new IntersectionObserver(this.intersectionHandler.bind(this)),this.shapes=this.getDefaultShapes(),setInterval((()=>{const e=this.trashDivs.length,t=this.trashDivs.slice(0,e);this.trashDivs=this.trashDivs.slice(e);while(t.length){const e=t.pop();if(!e)break;document.body.removeChild(e)}}),5e3)}intersectionHandler(e){for(const t of e){const e=t.target.id;this.observerCallbackMap[e]&&(this.observerCallbackMap[e](),this.trashDivs.push(t.target))}}getDefaultShapes(){return{none:{},curve:{bend:4}}}getSpecSubTextLayer(e){return c.Z.getSpecSubTextLayer(e)}getRadiusByBend(e,t){return 0===e?1e4:1e3/Math.pow(Math.abs(e),.6)*t/60}getTextShapeStyles(e,t,n,r){const{textShape:i,width:o,height:a,x:l,y:c}=e.styles,d={},g=this.shapes[t],p={textShape:{},writingMode:"initial"};if(i&&i.name===t)Object.assign(p.textShape,i,r),s.Z.set("textEffectSetting",t,p.textShape);else{const e=s.Z.get("textEffectSetting",t);Object.assign(p.textShape,g,e,r,{name:t})}if("none"===t){const{bend:t}=i,r=u.Z.getTextHW(e,-1);Object.assign(p,{width:r.width,height:r.height,x:l+(o-r.width)/2,y:+t<0?c+a-r.height:c}),d.widthLimit=n?r.width:-1,d.spanDataList=r.spanDataList}else{const{bend:t}=p.textShape;Object.assign(p,this.getCurveTextProps(e,+t)),d.widthLimit=-1,d.spanDataList=void 0}return{styles:p,props:d}}cast2number(e){return"string"===typeof e?parseInt(e,10):e}isCurvedText(e){return"curve"===(null==e?void 0:e.name)}resetCurrTextEffect(){const e=c.Z.getCurrentLayer().styles.textShape.name;this.setTextShape(e,this.shapes[e])}setTextShape(e,t){const{index:n,pageIndex:i}=r.Z.getters.getCurrSelectedInfo,s=r.Z.getters.getLayer(i,n),a=s.layers?s.layers:[s],l=o.ZP.subLayerIdx;if(-1===l||"text"===s.type){for(const o in a){const{type:l}=a[o];if("text"===l){const l=a[o].styles.height,{styles:c,props:d}=this.getTextShapeStyles(a[o],e,"text"!==s.type,t);r.Z.commit("UPDATE_specLayerData",{pageIndex:i,layerIndex:n,subLayerIndex:+o,styles:c,props:d}),u.Z.asSubLayerSizeRefresh(i,n,+o,c.height,l,!0)}}u.Z.fixGroupCoordinates(i,n)}else{const o=a[l].styles.height,{styles:s,props:c}=this.getTextShapeStyles(a[l],e,!0,t);r.Z.commit("UPDATE_specLayerData",{pageIndex:i,layerIndex:n,subLayerIndex:l,styles:s,props:c}),u.Z.asSubLayerSizeRefresh(i,n,l,s.height,o,!0),u.Z.fixGroupCoordinates(i,n)}d.Z.updateTextPropState("isVertical",!0)}convertTextShape(e,t,n){if(0===e.length)return[];const r=t>=0?90:270,i=t>=0?1:-1,o=this.getRadiusByBend(t,n),s=e.map((e=>360*e/(2*o*Math.PI))),a=s.reduce(((e,t)=>e+t)),l=o*Math.sin(r*(Math.PI/180));return s.map(((e,t)=>{const n=r+i*(a/2-s.slice(0,t).reduce(((e,t)=>e+t),0)-e/2),c=o*Math.cos(n*(Math.PI/180)),d=o*Math.sin(n*(Math.PI/180));return`translate(${c}px, ${Math.abs(d-l)*i}px) rotate(${r-n}deg)`}))}flattenSpans(e){return e.paragraphs.flatMap((e=>e.spans.flatMap((t=>u.Z.splitter.splitGraphemes(t.text).map((n=>({text:n,styles:b(b({},e.styles),t.styles)})))))))}getTextHWs(e){const{body:t,p:n}=this.genTextDivP(e);document.body.appendChild(t);const r=this.getHWsByOffset(n);return document.body.removeChild(t),r}getTextHWsAsync(e){return w(this,null,(function*(){const t=i.Z.generateRandomString(12),{body:n,p:r}=this.genTextDivP(e);return n.setAttribute("id",t),new Promise((e=>{this.observerCallbackMap[t]=()=>{const t=this.getHWsByOffset(r);this.observer.unobserve(n),e(t)},document.body.appendChild(n),this.observer.observe(n)}))}))}genTextDivP(e){const t=document.createElement("div"),n=document.createElement("p"),r=this.flattenSpans(e);r.forEach((t=>{const r=document.createElement("span");r.textContent=t.text;const i=g.Z.textStylesRaw(t.styles);i.textIndent=i["letter-spacing"]||"initial";const o=l.Z.fixedWidthStyle(t.styles,e.paragraphs[0].styles,e);Object.assign(r.style,i,o),r.classList.add("nu-curve-text__span"),n.appendChild(r)}));const i={margin:0};return Object.assign(n.style,i),n.classList.add("nu-curve-text__p"),t.appendChild(n),t.style.width="max-content",t.style.height="max-content",t.style.writingMode="initial",t.style.position="fixed",t.style.top="100%",t.style.left="100%",t.style.opacity="0",t.classList.add("nu-text"),t.classList.add("curve"),{body:t,p:n}}getHWsByOffset(e){const t=e.querySelectorAll("span.nu-curve-text__span"),n=[],r=[];let i=0;for(const o of t){const{offsetWidth:e,offsetHeight:t}=o;n.push(e),r.push(t),i=Math.max(i,t)}return{textWidth:n,textHeight:r,minHeight:i}}calcArea(e,t,n,r){if(e.length<2){const e=u.Z.getTextHW(r,-1);return{areaWidth:e.width,areaHeight:e.height}}return this.calcAreaCore(e,t,n)}calcAreaAsync(e,t,n,r){return w(this,null,(function*(){if(e.length<2){const e=yield u.Z.getTextHWAsync(r,-1);return{areaWidth:e.width,areaHeight:e.height}}return this.calcAreaCore(e,t,n)}))}calcAreaCore(e,t,n){const r=e.map((e=>e.match(/[.\d]+/g)||[])),i=Math.floor(r.length/2),o=Math.min.apply(null,r.map((e=>e[1]))),s=Math.max.apply(null,r.map((e=>e[1]))),a=Math.max(Math.max.apply(null,r.slice(0,i).map((e=>e[0]))),0),l=Math.max.apply(null,r.slice(i).map((e=>e[0])));return{areaWidth:1.3*Math.abs(l+a)*n,areaHeight:(Math.abs(s-o)+t)*n}}getAnchors(e,t){const{x:n,y:r,width:i,height:o}=e.styles,s=n+i/2;if(this.isCurvedText(e.styles.textShape)){const n=+e.styles.textShape.bend;return{top:n>=0?r:r+o-t,bottom:n>=0?r+t:r+o,center:s}}return{top:r,bottom:r+t,center:s}}getCurveTextHW(e,t){var n,r;t=null!=t?t:+(null!=(r=null==(n=e.styles.textShape)?void 0:n.bend)?r:0);const i=e.styles.scale,{textWidth:o,minHeight:s}=this.getTextHWs(e),a=c.Z.getLayerFontSize(e.paragraphs),l=this.convertTextShape(o,t,a),{areaWidth:d,areaHeight:u}=this.calcArea(l,s,i,e);return{areaWidth:d,areaHeight:u,minHeight:s}}getCurveTextHWAsync(e,t){return w(this,null,(function*(){var n,r;t=null!=t?t:+(null!=(r=null==(n=e.styles.textShape)?void 0:n.bend)?r:0);const i=e.styles.scale,{textWidth:o,minHeight:s}=yield this.getTextHWsAsync(e),a=c.Z.getLayerFontSize(e.paragraphs),l=this.convertTextShape(o,t,a),{areaWidth:d,areaHeight:u}=yield this.calcAreaAsync(l,s,i,e);return{areaWidth:d,areaHeight:u,minHeight:s}}))}getCurveTextPropsByHW(e,t,n){var r,i;const{areaWidth:o,areaHeight:s,minHeight:a}=t;n=null!=n?n:+(null!=(i=null==(r=e.styles.textShape)?void 0:r.bend)?i:0);const{top:l}=this.getAnchors(e,a),{x:c,y:d,width:u,height:g,rotate:p,scale:h}=e.styles,m=l!==d?(g-a*h)/2:(a*h-g)/2,y=+n<0?(a*h-s)/2:(s-a*h)/2;return b({width:o,height:s},this.getNewAnchoredPosition({hDiff1:m,hDiff2:y,rotate:p,oldPos:{x:c,y:d},oldSize:{width:u,height:g},newSize:{width:o,height:s}}))}getPreParams(e){var t,n;const r=+(null!=(n=null==(t=e.styles.textShape)?void 0:t.bend)?n:0),{scale:i,height:o}=e.styles,s=this.isCurvedText(e.styles.textShape);let a=o*i,l=(a-o)/2;return s&&(a=this.getCurveTextHW(e).minHeight*i,l=r<0?(o-a)/2:(a-o)/2),{wasCurveText:s,bendOri:r,hDiff1:l,minHeight:a}}getPostParams(e,t,n){var r;const{wasCurveText:i,bendOri:o,hDiff1:s,minHeight:a}=t,{x:l,y:c,width:d,height:u,rotate:g}=e.styles;if(this.isCurvedText(e.styles.textShape)){const t=+(null==(r=e.styles.textShape)?void 0:r.bend),i=t<0?(a-n.height)/2:(n.height-a)/2;return{hDiff1:s,hDiff2:i,rotate:g,oldPos:{x:l,y:c},oldSize:{width:d,height:u},newSize:n}}{let e;return e=i&&+o<0?(a-n.height)/2:(n.height-a)/2,{hDiff1:s,hDiff2:e,rotate:g,oldPos:{x:l,y:c},oldSize:{width:d,height:u},newSize:n}}}getNewAnchoredPosition(e){const{hDiff1:t,hDiff2:n,rotate:r,oldPos:i,oldSize:o,newSize:s}=e;return{x:i.x+o.width/2-(t+n)*a.ZP.sin(r)-s.width/2,y:i.y+o.height/2+(t+n)*a.ZP.cos(r)-s.height/2}}getCurveTextProps(e,t){return this.getCurveTextPropsByHW(e,this.getCurveTextHW(e,t),t)}getCurveTextPropsAsync(e,t){return w(this,null,(function*(){return this.getCurveTextPropsByHW(e,yield this.getCurveTextHWAsync(e,t),t)}))}}t["Z"]=new N},89456:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=n(52495),i=n(89497),o=n(6400),s=n(53074),a=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(d)for(var n of d(t))g.call(t,n)&&p(e,n,t[n]);return e},m=(e,t)=>l(e,c(t)),y=(e,t,n)=>(p(e,"symbol"!==typeof t?t+"":t,n),n),f=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const b=!1,v=!1,w=(e,t)=>!0;class N{constructor(e,t){y(this,"config"),y(this,"initSize"),y(this,"widthLimit"),y(this,"autoSize"),y(this,"runResult"),y(this,"isDebugMode",!1),y(this,"identity",""),this.config=e,this.initSize=t,this.widthLimit=t.widthLimit,this.autoSize={width:0,height:0,spanDataList:[]},this.identity=ie.getFirstPText(e)}log(...e){if(!w(this.BY,this.identity))return;const t=[this.BY,this.identity.substring(0,50),"::",...e];this.isDebugMode?console.log(...t):s.Z.setLog(t.join(" "))}updateSize(){return f(this,null,(function*(){this.autoSize=yield ie.getTextHWAsync(this.config,this.widthLimit)}))}updateSizeSync(){this.autoSize=ie.getTextHW(this.config,this.widthLimit)}}class S extends N{constructor(e,t){super(e,t),y(this,"BY","height"),y(this,"MAX_LOOP",200),y(this,"TOLERANCE",5),y(this,"isVertical"),y(this,"dimension"),y(this,"scale"),y(this,"direction"),y(this,"offset"),y(this,"prevOffset"),y(this,"shouldContinue"),y(this,"autoDimension"),y(this,"originDimension"),y(this,"prevDiff"),y(this,"minDiff"),y(this,"minDiffWidLimit"),y(this,"minDiffDimension"),y(this,"isDebugMode",b),this.isVertical=e.styles.writingMode.includes("vertical"),this.dimension=this.isVertical?"width":"height",this.scale=e.styles.scale,this.direction=0,this.offset=0,this.prevOffset=0,this.shouldContinue=!0,this.autoDimension=-1,this.originDimension=t[this.dimension],this.prevDiff=Number.MAX_VALUE,this.minDiff=Number.MAX_VALUE,this.minDiffWidLimit=-1,this.minDiffDimension=-1}static getDiff(e,t,n){const r=e.styles.writingMode.includes("vertical"),i=r?"width":"height";return Math.abs(t.otherDimension-n[i])}updateDiff(e){e<this.minDiff&&(this.minDiff=e,this.minDiffWidLimit=this.widthLimit,this.minDiffDimension=this.autoDimension),this.prevDiff=e}checkDiff(e){return e>this.prevDiff?(this.runResult=this.bestResult(),!0):(this.updateDiff(e),!1)}checkLoop(){return Math.abs(this.direction)>=this.MAX_LOOP&&(this.runResult=this.bestResult(),!0)}checkDirection(){return this.prevOffset*this.offset<0&&(this.runResult=this.bestResult(),!0)}applyOffset(){this.widthLimit+=this.offset*this.scale,this.direction+=this.offset,this.prevOffset=this.offset}undoToMinDiff(){if(-1===this.minDiffWidLimit)this.widthLimit=this.initSize.widthLimit,this.direction=0,this.prevOffset=0;else{const e=Math.round((this.widthLimit-this.minDiffWidLimit)/this.scale);this.widthLimit=this.minDiffWidLimit,this.direction=e,this.prevOffset=0===this.direction?0:this.direction>0?1:-1}}compareByHeight(){return this.shouldContinue=!1,this.originDimension-this.autoDimension>this.TOLERANCE*this.scale&&(this.shouldContinue=!0,this.offset=-1),this.autoDimension-this.originDimension>this.TOLERANCE*this.scale&&(this.shouldContinue=!0,this.offset=1),!this.shouldContinue}loopPrevCondition(){this.log("loopPrevCondision"),this.autoDimension=this.autoSize[this.dimension];const e=Math.abs(this.autoDimension-this.originDimension);return this.log(this.autoDimension,this.originDimension,e,this.widthLimit,this.config.widthLimit),!!this.checkDiff(e)}loopComparison(){return this.log("loopComparison"),!!this.checkLoop()||(!!this.compareByHeight()||(!!this.checkDirection()||(this.applyOffset(),!1)))}currentResult(){return{widthLimit:this.widthLimit,otherDimension:-1===this.autoDimension?this.originDimension:this.autoDimension,loops:Math.abs(this.direction)}}bestResult(){return-1!==this.minDiffWidLimit?{widthLimit:this.minDiffWidLimit,otherDimension:this.minDiffDimension,loops:Math.abs(this.direction)}:{widthLimit:this.initSize.widthLimit,otherDimension:this.originDimension,loops:Math.abs(this.direction)}}finalResult(){var e;return null!=(e=this.runResult)?e:this.currentResult()}run(){return f(this,null,(function*(){this.log("run start"),yield this.updateSize();while(this.shouldContinue){if(this.loopPrevCondition())return this.finalResult();if(this.loopComparison())return this.finalResult();yield this.updateSize()}return this.currentResult()}))}runSync(){this.log("runSync start"),this.updateSizeSync();while(this.shouldContinue){if(this.loopPrevCondition())return this.finalResult();if(this.loopComparison())return this.finalResult();this.updateSizeSync()}return this.currentResult()}}class x extends S{constructor(e,t,n){super(e,t),y(this,"BY","spanDataList"),y(this,"MAX_LOOP",100),y(this,"pIndex",0),y(this,"sIndex",0),y(this,"lineOffset",0),y(this,"bound"),y(this,"isDebugMode",v),this.bound=n}resetParamsForStep(){this.MAX_LOOP+=Math.abs(this.direction),this.prevDiff=Number.MAX_VALUE,this.minDiff=Number.MAX_VALUE}checkStructMatch(e,t){if(void 0===t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(r.length!==i.length)return!1}return!0}checkBound(){return Math.abs(this.autoDimension-this.originDimension)>this.bound}compareByLineCount(e,t){return this.log("lineCount:",e,t),e<t?(this.offset=-1,!1):!(e>t)||(this.offset=1,!1)}compareByLineSize(e,t){this.log("lineSize:",e,t);const n=Math.abs(e-t);return this.log(n,this.prevDiff,this.minDiff,this.minDiffWidLimit,this.minDiffDimension),this.checkDiff(n)?(this.undoToMinDiff(),!0):t-e>this.TOLERANCE?(this.offset=-1,!1):!(e-t>this.TOLERANCE)||(this.offset=1,!1)}nextStep(e,t,n){if(this.log("go on to next step"),this.lineOffset>=n-1)if(this.lineOffset=0,this.sIndex===t-1){if(this.sIndex=0,this.pIndex===e-1)return this.log("all done"),!0;this.log("next p"),this.pIndex++}else this.log("next span"),this.sIndex++;else this.log("next line"),this.lineOffset++;return this.resetParamsForStep(),!1}loopPrevCondition(){return this.log("loopPrevCondision"),this.autoDimension=this.autoSize[this.dimension],!this.checkStructMatch(this.autoSize.spanDataList,this.initSize.spanDataList)&&(this.log("spanData do not match"),!0)}loopComparison(){this.log("loopComparison");const e=this.autoSize.spanDataList,t=this.initSize.spanDataList,n=e[this.pIndex],r=t[this.pIndex],i=n[this.sIndex],o=r[this.sIndex];if(this.log("i, j, offset:",this.pIndex,this.sIndex,this.lineOffset),this.checkLoop())return this.log("MAX_LOOP reached"),this.undoToMinDiff(),this.nextStep(t.length,r.length,o.length);if(this.checkBound())return this.log("bound from previous result exceeded"),this.undoToMinDiff(),this.nextStep(t.length,r.length,o.length);const s=this.compareByLineCount(i.length,o.length);if(s){this.TOLERANCE=this.config.paragraphs[this.pIndex].spans[this.sIndex].styles.size/10;const e=this.isVertical?"height":"width";if(this.lineOffset>i.length-1)return this.nextStep(t.length,r.length,o.length);const n=i[i.length-1-this.lineOffset][e],s=o[o.length-1-this.lineOffset][e],a=this.compareByLineSize(n,s);if(a)return this.nextStep(t.length,r.length,o.length)}return this.log(this.offset,this.direction,this.prevOffset,this.MAX_LOOP,this.TOLERANCE),this.checkDirection()?(this.log("different direction encountered"),this.undoToMinDiff(),this.nextStep(t.length,r.length,o.length)):(this.applyOffset(),!1)}}class P extends x{constructor(){super(...arguments),y(this,"BY","spanDataList2"),y(this,"MAX_LOOP",200),y(this,"TOLERANCE",.1)}initDirection(){const e=this.initSize.widthLimit-this.config.widthLimit;if(0!==e)this.offset=e>0?1:-1;else{if(!this.checkStructMatch(this.autoSize.spanDataList,this.initSize.spanDataList))return this.bestResult();this.setDirectionBySpanDataList()}}setDirectionBySpanDataList(){const e=this.autoSize.spanDataList,t=this.initSize.spanDataList;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];for(let e=0;e<r.length;e++){const t=r[e],o=i[e],s=this.compareByLineCount(t.length,o.length);if(s)for(let r=0;r<t.length;r++){const i=this.config.paragraphs[n].spans[e].styles.size/10,s=this.isVertical?"height":"width",a=t[t.length-1-r][s],l=o[o.length-1-r][s];if(l-a>i)return void(this.offset=-1);if(a-l>i)return void(this.offset=1)}}}}calcDiff(){if(!this.checkStructMatch(this.autoSize.spanDataList,this.initSize.spanDataList))return!0;const e=this.autoSize.spanDataList,t=this.initSize.spanDataList;let n=0,r=0;for(let o=0;o<e.length;o++){const i=e[o],s=t[o];for(let e=0;e<i.length;e++){const t=i[e],a=s[e],l=this.config.paragraphs[o].spans[e].styles.size;if(t.length!==a.length)return!0;for(let e=0;e<t.length;e++){const i=this.isVertical?"height":"width";n+=Math.abs(t[e][i]-a[e][i])/l,r++}}}const i=n/r;return this.updateDiff(i),!1}run(){return f(this,null,(function*(){if(this.log("run start"),void 0===this.initSize.spanDataList)return this.bestResult();if(yield this.updateSize(),this.initDirection(),0===this.offset)return this.bestResult();while(this.shouldContinue){if(this.autoDimension=this.autoSize[this.dimension],this.checkLoop())return this.bestResult();if(this.checkBound())return this.bestResult();const e=this.calcDiff();if(this.prevDiff<this.TOLERANCE)return this.bestResult();this.log(`line count of all spans matched: ${e}`),this.applyOffset(),yield this.updateSize()}return this.finalResult()}))}runSync(){if(this.log("runSync start"),void 0===this.initSize.spanDataList)return this.bestResult();if(this.updateSizeSync(),this.initDirection(),0===this.offset)return this.bestResult();while(this.shouldContinue){if(this.autoDimension=this.autoSize[this.dimension],this.checkLoop())return this.bestResult();if(this.checkBound())return this.bestResult();const e=this.calcDiff();if(this.prevDiff<this.TOLERANCE)return this.bestResult();this.log(`line count of all spans matched: ${e}`),this.applyOffset(),this.updateSizeSync()}return this.finalResult()}}function I(e,t,n,r){switch(n){case"height":return new S(e,t);case"spanDataList":return new x(e,t,S.getDiff(e,r,t));case"spanDataList2":return new P(e,t,S.getDiff(e,r,t))}}function _(e,t){const n=[],r=e.styles.writingMode.includes("vertical")?"width":"height",i={widthLimit:t.widthLimit,otherDimension:t[r],loops:0},o=t.widthLimit;return{stageLoops:n,dimension:r,res:i,widthLimit:o}}function k(e,t){e.res=t,e.stageLoops.push(t.loops),e.widthLimit=t.widthLimit}function Z(e){return{widthLimit:e.widthLimit,otherDimension:e.res.otherDimension,stageLoops:e.stageLoops}}function C(e,t,n){const r=_(e,t);for(const i of n)k(r,I(e,m(h({},t),{widthLimit:r.widthLimit}),i,r.res).runSync());return Z(r)}function z(e,t,n){return f(this,null,(function*(){const r=_(e,t);for(const i of n)k(r,yield I(e,m(h({},t),{widthLimit:r.widthLimit}),i,r.res).run());return Z(r)}))}var T=n(40881),L=n(70118),E=n(65144),D=n(90272),O=n(74041),M=n(77013),A=n.n(M),$=n(60410),F=n.n($),j=n(71446),B=n(78871),R=n(75231),H=n(35426),U=n(32905),W=n(52632),V=n(32490),G=n(23917),q=n(16290),K=Object.defineProperty,Y=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,J=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ee=(e,t)=>{for(var n in t||(t={}))X.call(t,n)&&J(e,n,t[n]);if(Y)for(var n of Y(t))Q.call(t,n)&&J(e,n,t[n]);return e},te=(e,t,n)=>(J(e,"symbol"!==typeof t?t+"":t,n),n),ne=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class re{constructor(){te(this,"observer"),te(this,"observerCallbackMap"),te(this,"trashDivs",[]),te(this,"toRecordId"),te(this,"toSetFlagId"),te(this,"splitter",new(A())),this.observerCallbackMap={},this.observer=new IntersectionObserver(this.intersectionHandler.bind(this)),this.toRecordId="",this.toSetFlagId="",setInterval((()=>{const e=this.trashDivs.length,t=this.trashDivs.slice(0,e);this.trashDivs=this.trashDivs.slice(e);while(t.length){const e=t.pop();if(!e)break;document.body.contains(e)&&document.body.removeChild(e)}}),5e3)}get currSelectedInfo(){return i.Z.getters.getCurrSelectedInfo}get getCurrTextProps(){return i.Z.state.text.props}get getCurrSel(){return i.Z.state.text.sel}get isFontLoading(){return i.Z.state.text.isFontLoading}get fieldRange(){return{fontSize:E.Z.mappingMinMax("fontSize"),lineHeight:E.Z.mappingMinMax("lineHeight"),fontSpacing:E.Z.mappingMinMax("letterSpacing"),opacity:E.Z.mappingMinMax("opacity")}}intersectionHandler(e){for(const t of e){const e=t.target.id;this.observerCallbackMap[e]&&(this.observerCallbackMap[e](t.boundingClientRect),this.trashDivs.push(t.target))}}getSelection(){var e,t,n,r;const i=window.getSelection();if(!i||0===i.rangeCount)return{div:void 0,start:this.getNullSel(),end:this.getNullSel()};const o=null==i?void 0:i.getRangeAt(0);if(o){let i=o.commonAncestorContainer;const s=e=>{try{return e instanceof HTMLElement&&e.id.match("text")}catch(t){throw new Error("select range with wrong element!")}};while(i.parentNode&&("DIV"!==i.nodeName||!s(i)))i=i.parentNode;s(i)||(i=void 0);let a={pIndex:parseInt(null==(n=null==(t=null==(e=o.startContainer)?void 0:e.parentElement)?void 0:t.parentElement)?void 0:n.dataset.pindex)},l=o.startContainer;while("P"!==l.nodeName&&l.parentElement)l=l.parentElement;let c=o.startContainer;while("SPAN"!==c.nodeName&&c.parentElement)c=c.parentElement;if(!l.firstChild||!c)return console.log(new Error("wrong type node of the start container of p.firstChild")),{div:void 0,start:this.getNullSel(),end:this.getNullSel()};{const e=l.firstChild;switch(e.nodeName){case"SPAN":a={pIndex:+l.dataset.pindex,sIndex:+c.dataset.sindex,offset:o.startOffset};break;default:return{div:i,start:ee({},this.getCurrSel.start),end:ee({},this.getCurrSel.end)}}}const d=""!==(null==(r=window.getSelection())?void 0:r.toString());let u=o.endContainer,g=o.endContainer;if("P"===o.endContainer.nodeName)g=g.firstChild;else{while("P"!==u.nodeName&&u.parentElement)u=u.parentElement;while("SPAN"!==g.nodeName&&g.parentElement)g=g.parentElement}let p=this.getNullSel();if(!u||!g)throw new Error("wrong type node of the end container");return p={pIndex:d?+u.dataset.pindex:NaN,sIndex:d?+g.dataset.sindex:NaN,offset:d?null==o?void 0:o.endOffset:NaN},this.startEqualEnd(a,p)&&(p=this.getNullSel()),{div:i,start:a,end:p}}return{div:void 0,start:this.getNullSel(),end:this.getNullSel()}}selectAll(e){const t=e.paragraphs.length-1,n=e.paragraphs[t].spans.length-1,r=e.paragraphs[t].spans[n].text.length;return{start:{pIndex:0,sIndex:0,offset:0},end:{pIndex:t,sIndex:n,offset:r}}}startEqualEnd(e,t){return Object.keys(e).every((n=>e[n]===t[n]))}focus(e,t,n,r=R.ZP.layerIndex){let i;const o=new Range;if(i="undefined"!==typeof n?document.getElementById(`text-sub-${r}-${n}`):document.getElementById(`text-${r}`),e&&this.isSel(e)||!this.getCurrSel||!this.isSel(this.getCurrSel.start)){if(!this.isSel(this.getCurrSel.start))return}else e={},Object.assign(e,this.getCurrSel.start);i.childNodes[e.pIndex].childNodes[e.sIndex].firstChild?o.setStart(i.childNodes[e.pIndex].childNodes[e.sIndex].firstChild,e.offset):o.setStart(i.childNodes[e.pIndex].firstChild,0),t&&this.isSel(t)&&(i.childNodes[t.pIndex].childNodes[t.sIndex].firstChild?o.setEnd(i.childNodes[t.pIndex].childNodes[t.sIndex].firstChild,t.offset):o.setEnd(i.childNodes[t.pIndex].firstChild,0));const s=window.getSelection();s&&(s.removeAllRanges(),s.addRange(o))}isEmptyText(e){return 1===e.paragraphs.length&&1===e.paragraphs[0].spans.length&&""===e.paragraphs[0].spans[0].text}isSel(e){const t=null!==(null==e?void 0:e.pIndex)&&null!==(null==e?void 0:e.sIndex);return"undefined"!==typeof e&&!Number.isNaN(e.pIndex)&&!Number.isNaN(e.sIndex)&&!Number.isNaN(e.offset)&&t}getNullSel(){return{pIndex:NaN,sIndex:NaN,offset:NaN}}getTextHW(e,t=-1){var n;const r=this.genTextDiv(e,t),i=null!=(n=e.styles.scale)?n:1;document.body.appendChild(r);const o=this.getHWByRect(r,i,t);return document.body.removeChild(r),o}getTextHWAsync(e,t=-1){return ne(this,null,(function*(){var n;const r=B.Z.generateRandomString(12),i=this.genTextDiv(e,t);i.setAttribute("id",r);const o=null!=(n=e.styles.scale)?n:1;return new Promise((e=>{this.observerCallbackMap[r]=n=>{const r=this.getHWBySize(n,i,o,t);this.observer.unobserve(i),e(r)},document.body.appendChild(i),this.observer.observe(i)}))}))}genTextDiv(e,t=-1){const n=document.createElement("div"),r=B.Z.deepCopy(e);return r.paragraphs.forEach((e=>{const t=document.createElement("p");let i=0;e.spans.forEach(((n,o)=>{const s=document.createElement("span");s.textContent=n.text;const a=q.Z.textStylesRaw(n.styles),l=ee(ee({},o===e.spans.length-1&&n.text.match(/^ +$/)?{whiteSpace:"pre"}:{}),V.Z.fixedWidthStyle(n.styles,e.styles,r));Object.assign(s.style,a,l);for(const[e,t]of Object.entries(a))e.startsWith("--")&&s.style.setProperty(e,t);s.classList.add("nu-text__span"),t.appendChild(n.text||1!==e.spans.length?s:document.createElement("br")),n.styles.size>i&&(i=n.styles.size)}));const o={};q.Z.textStyles(e.styles).split(";").forEach((e=>{Object.assign(o,{[e.split(":")[0].trim()]:e.split(":")[1].trim()})})),Object.assign(t.style,o),t.classList.add("nu-text__p"),n.appendChild(t)})),r.styles.writingMode.includes("vertical")?(n.style.height=-1===t?"max-content":t/r.styles.scale+"px",n.style.width="max-content"):(n.style.width=-1===t?"max-content":t/r.styles.scale+"px",n.style.height="max-content"),n.classList.add("nu-text"),n.style.writingMode=j.Z.convertVerticalStyle(r.styles.writingMode).writingMode,n.style.position="fixed",n.style.top="100%",n.style.left="100%",n.style.opacity="0",n}getHWByRect(e,t,n=-1){return this.getHWBySize(e.getBoundingClientRect(),e,t,n)}getHWBySize(e,t,n,r=-1){const i=Array.from(t.children).map((e=>Array.from(e.children).map((e=>Array.from(e.getClientRects()).map((e=>e.toJSON()))))));return this.mergeLines(i),{width:"max-content"!==t.style.width?r:e.width*n,height:"max-content"!==t.style.height?r:e.height*n,spanDataList:i}}mergeLines(e){e.forEach((e=>{e.forEach((e=>{e.forEach(((t,n)=>{const r=n+1;while(r<e.length){const n=t,i=e[r],o=n.y,s=n.y+n.height,a=i.y,l=i.y+i.height;if(!(a<=o&&o<=l&&a<=s&&s<=l||o<=a&&a<=s&&o<=l&&l<=s))break;n.y=Math.min(n.y,i.y),n.width+=i.width,n.height=Math.max(n.height,i.height),e.splice(r,1)}}))}))}))}updateGroupLayerSize(e,t,n=-1,{noPush:r=!1,keepCorner:i=!1}={}){const o=R.ZP.getLayer(e,t);if(!o.layers)return;if(-1!==n){const s=o.layers[n];if("text"!==s.type)throw new Error("updateGroupLayerSize with subLayerIndex argument only accepts text subLayer");const a={width:s.styles.width,height:s.styles.height};let l;if(G.Z.isCurvedText(s.styles.textShape))l=a;else{l=this.getTextHW(s,s.widthLimit),R.ZP.updateSubLayerStyles(e,t,n,{width:l.width,height:l.height}),R.ZP.updateSubLayerProps(e,t,n,{spanDataList:l.spanDataList});const r=s.styles.writingMode.includes("vertical"),o={xSign:r||i?-1:1,ySign:1,x:s.styles.x,y:s.styles.y,angle:s.styles.rotate*Math.PI/180},c={width:r||i?l.width-a.width:0,height:r||i?0:l.height-a.height},d=T.Z.getTranslateCompensation(o,c);R.ZP.updateSubLayerStyles(e,t,n,{x:d.x,y:d.y})}if(!r){const e=!o.layers.some((e=>"text"===e.type&&(e.styles.writingMode.includes("vertical")||0!==e.styles.rotate)));if(e){const e=s.styles.y+a.height,n=l.height-a.height,r=[];o.layers.forEach(((t,n)=>{t.styles.y>=e&&r.push([n,t.styles.y])})),r.forEach((e=>{R.ZP.updateSubLayerStyles(R.ZP.pageIndex,t,e[0],{y:e[1]+n})}))}}}let{width:s,height:a}=(0,L.O)(o.layers);s*=o.styles.scale,a*=o.styles.scale,R.ZP.updateLayerStyles(e,t,{width:s,height:a}),this.fixGroupCoordinates(e,t)}asSubLayerSizeRefresh(e,t,n,r,i,o=!1){const s=R.ZP.getLayer(e,t);if(!s.layers)return;const a=[],l=s.layers[n];if("text"!==l.type)throw new Error("asSubLayerSizeRefresh only accepts text subLayer");if(!o){const{y:o,textShape:{bend:c=0}={}}=l.styles;if(+c>=0){const l=o+i;s.layers.forEach(((e,t)=>{e.styles.y>=l&&t!==n&&a.push([t,e.styles.y])})),a.forEach((n=>{R.ZP.updateSubLayerStyles(e,t,n[0],{y:n[1]+(r-i)})}))}else{const l=o;s.layers.forEach(((e,t)=>{e.styles.y<=l&&t!==n&&a.push([t,e.styles.y])})),a.forEach((n=>{R.ZP.updateSubLayerStyles(e,t,n[0],{y:n[1]-(r-i)})}))}}this.updateGroupLayerSize(e,t)}updateGroupLayerSizeByShape(e,t,n,{noPush:r=!1,keepCorner:i=!1}={}){const o=R.ZP.getLayer(e,t);if(!o.layers)return;const s=o.layers[n];if("text"!==s.type)throw new Error("updateGroupLayerSizeByShape only accepts text subLayer");if(G.Z.isCurvedText(s.styles.textShape)){const i=s.styles.height,o=G.Z.getCurveTextProps(s);R.ZP.updateSubLayerStyles(e,t,n,o),this.asSubLayerSizeRefresh(e,t,n,o.height,i,r),this.fixGroupCoordinates(e,t)}else this.updateGroupLayerSize(e,t,n,{noPush:r,keepCorner:i})}updateTextLayerSizeByShape(e,t,n){const r=R.ZP.getLayer(e,t);if(-1===n){const n=r;if(G.Z.isCurvedText(n.styles.textShape))R.ZP.updateLayerStyles(e,t,G.Z.getCurveTextProps(n));else{const r=n.widthLimit,i=this.getTextHW(n,r),o=n.styles.writingMode.includes("vertical");let s=n.styles.x,a=n.styles.y;if(-1===n.widthLimit&&0===n.styles.rotate)o?(s=n.styles.x-(i.width-n.styles.width),a=n.styles.y-(i.height-n.styles.height)/2):s=n.styles.x-(i.width-n.styles.width)/2;else{const e={xSign:o?-1:1,ySign:1,x:s,y:a,angle:n.styles.rotate*Math.PI/180},t={width:o?i.width-n.styles.width:0,height:o?0:i.height-n.styles.height},r=T.Z.getTranslateCompensation(e,t);s=r.x,a=r.y}R.ZP.updateLayerStyles(e,t,{x:s,y:a,width:i.width,height:i.height}),R.ZP.updateLayerProps(e,t,{spanDataList:i.spanDataList})}}else{const i=r,o=i.layers[n];if(G.Z.isCurvedText(o.styles.textShape))R.ZP.updateSubLayerStyles(e,t,n,G.Z.getCurveTextProps(o)),this.updateGroupLayerSize(e,t);else{const r=o.widthLimit,s=this.getTextHW(o,r);R.ZP.updateSubLayerStyles(e,t,n,{width:s.width,height:s.height}),R.ZP.updateSubLayerProps(e,t,n,{spanDataList:s.spanDataList});const{width:a,height:l}=(0,L.O)(i.layers,i.styles.scale);R.ZP.updateLayerStyles(e,t,{width:a,height:l})}}}fixGroupXCoordinates(e,t){const n=R.ZP.getLayer(e,t);let r=Number.MAX_SAFE_INTEGER;if(n.layers&&(n.layers.forEach((e=>{r=Math.min(r,H.ZP.getBounding(e.styles).x)})),0!==r)){for(const[i,o]of Object.entries(n.layers))R.ZP.updateSubLayerStyles(e,t,+i,{x:o.styles.x-r});R.ZP.updateLayerStyles(e,t,{x:n.styles.x+r*n.styles.scale})}}fixGroupYCoordinates(e,t){const n=R.ZP.getLayer(e,t);let r=Number.MAX_SAFE_INTEGER;if(n.layers&&(n.layers.forEach((e=>{r=Math.min(r,H.ZP.getBounding(e.styles).y)})),0!==r)){for(const[i,o]of Object.entries(n.layers))R.ZP.updateSubLayerStyles(e,t,+i,{y:o.styles.y-r});R.ZP.updateLayerStyles(e,t,{y:n.styles.y+r*n.styles.scale})}}fixGroupCoordinates(e,t){this.fixGroupXCoordinates(e,t),this.fixGroupYCoordinates(e,t)}getAddPosition(e,t,n){const r=n||U.Z.currFocusPageIndex,i=R.ZP.getPage(r),o=(i.width-e)/2,s=(i.height-t)/2;if(r===U.Z.currFocusPageIndex){const n=R.ZP.getLayer(r,R.ZP.layerIndex);if(n.styles){const r=n.styles.x+(n.styles.width-e)/2,o=n.styles.y+n.styles.height;if(o+t<i.height)return{x:r,y:o}}}return{x:o,y:s}}resetTextField(e,t,n){const r=R.ZP.getPage(t),i=this.getParagraphSize(e);for(const l in e.paragraphs)e.paragraphs[l].styles.size=i[l];const o=this.getTextHW(e),s=(0,$.pick)(o,["width","height"]),a={};e.spanDataList=o.spanDataList,e.styles&&"undefined"!==typeof e.styles.x&&"undefined"!==typeof e.styles.y?Object.assign(a,{x:e.styles.x,y:e.styles.y}):Object.assign(a,this.getAddPosition(s.width,s.height,t)),Object.assign(e.styles,a,s),n&&(r.layers.find((e=>"text"===e.type&&e[n]))?Object.assign(e,{[n]:!1}):Object.assign(e,{[n]:!0}))}getParagraphSize(e){const t=[];for(const n of e.paragraphs){let e=-1;for(const t of n.spans)t.styles.size>e&&(e=t.styles.size);t.push(e)}return t}updateTextParagraphs(e,t,n){i.Z.commit("UPDATE_textProps",{pageIndex:e,layerIndex:t,paragraphs:n})}updateSelectedParagraphs(e,t){i.Z.commit("UPDATE_selectedTextParagraphs",{tmpLayerIndex:e,paragraphs:t})}updateSelection(e,t){this.startEqualEnd(e,t)&&(t=this.getNullSel()),i.Z.commit("text/UPDATE_selection",{start:e,end:t})}loadDefaultFonts(e=[]){for(const t of i.Z.getters["text/getDefaultFontsList"])i.Z.dispatch("text/addFont",t).catch((e=>console.error(e)));for(const t of e)i.Z.dispatch("text/addFont",t).catch((e=>console.error(e)))}loadAllFonts(e){for(const t of i.Z.getters["text/getDefaultFontsList"])i.Z.dispatch("text/addFont",t).catch((e=>console.error(e)));for(const t of e.paragraphs){i.Z.dispatch("text/addFont",{type:t.styles.type,face:t.styles.font,url:t.styles.fontUrl,assetId:t.styles.assetId,userId:t.styles.userId,ver:i.Z.getters["user/getVerUni"]}).catch((e=>console.error(e)));for(const e of t.spans)i.Z.dispatch("text/addFont",{type:e.styles.type,face:e.styles.font,url:e.styles.fontUrl,assetId:e.styles.assetId,userId:e.styles.userId,ver:i.Z.getters["user/getVerUni"]}).catch((e=>console.error(e)))}}getFirstPText(e){return e.paragraphs[0].spans.map((e=>e.text)).join("")}autoResize(e,t){return ne(this,null,(function*(){var n;if(-1===e.widthLimit)return e.widthLimit;const{widthLimit:i,otherDimension:o,stageLoops:s}=yield this.autoResizeCore(e,t),a=e.styles.writingMode.includes("vertical")?"width":"height",l=Math.abs(i-t.widthLimit),c=this.getFirstPText(e);if("Preview"===r.Z.currentRoute.value.name){const r=e.styles.writingMode.includes("vertical")?"hw":"wh";console.log(`TEXT RESIZE DONE: id-${null!=(n=e.id)?n:""} ${t.widthLimit} ${t[a]} ${i} ${o} ${r} ${c} loops: ${s}`)}return l/t.widthLimit>.2?t.widthLimit:i}))}autoResizeCoreSync(e,t){return C(e,t,["height","spanDataList2"])}autoResizeCore(e,t){return ne(this,null,(function*(){return yield z(e,t,["height","spanDataList2"])}))}setParagraphProp(e,t){return ne(this,null,(function*(){return new Promise((n=>{if(B.Z.isValidFloat(t.toString())){let r;switch(t=B.Z.boundValue(t,this.fieldRange[e].min,this.fieldRange[e].max),e){case"lineHeight":r=F().toNumber(t.toFixed(2));break;case"fontSpacing":r=t/1e3}const{layerIndex:i,subLayerIdx:o,getCurrLayer:s}=R.ZP;window.requestAnimationFrame((()=>{["group","tmp"].includes(s.type)&&-1===o?(s.layers.forEach(((t,n)=>{"text"===t.type&&O.Z.propAppliedAllText(i,n,e,r),"text"===t.type&&this.updateGroupLayerSizeByShape(R.ZP.pageIndex,i,n)})),O.Z.updateTextPropsState({[e]:t})):(q.Z.applyParagraphStyle(e,r,!1),O.Z.updateTextPropsState({[e]:t})),n()}))}}))}))}untilFontLoadedForPage(e,t=!1){return ne(this,null,(function*(){const n=B.Z.generateRandomString(12);t&&(this.toSetFlagId=n,this.setIsFontLoading(!0));const r=[];for(const t of e.layers)"text"===t.type&&r.push(t),["tmp","group"].includes(t.type)&&r.push(...t.layers.filter((e=>"text"===e.type)));let i=!1;try{i=!0===(yield Promise.race([Promise.all(r.map((e=>this.untilFontLoaded(e.paragraphs)))),new Promise((e=>{setTimeout((()=>{e(!0)}),4e4)}))]))}catch(o){s.Z.setLogForError(o),i=!0}finally{!0===i&&s.Z.setLogAndConsoleLog("Font loading exceeds timeout 40s or error occurs, run callback anyways"),t&&this.toSetFlagId===n&&this.setIsFontLoading(!1)}}))}untilFontLoaded(e,t=!1){return ne(this,null,(function*(){const n=B.Z.generateRandomString(12);t&&(this.toSetFlagId=n,this.setIsFontLoading(!0));let r=!1;try{r=!0===(yield Promise.race([Promise.all(e.map((e=>this.untilFontLoadedForP(e)))),new Promise((e=>{setTimeout((()=>{e(!0)}),4e4)}))]))}catch(i){s.Z.setLogForError(i),r=!0}finally{!0===r&&s.Z.setLogAndConsoleLog("Font loading exceeds timeout 40s or error occurs, run callback anyways"),t&&this.toSetFlagId===n&&this.setIsFontLoading(!1)}}))}untilFontLoadedForP(e){return ne(this,null,(function*(){const t=j.Z.getFontFamily(e.styles.font).replace(/\s+/g,"").split(",").filter((e=>"-apple-system"!==e));yield Promise.all([(()=>ne(this,null,(function*(){const e=yield i.Z.dispatch("text/checkFontLoaded",t[0]);if(!e)throw new Error(`Font ${t[0]} not added by 'addFont' before timeout`)})))(),...t.slice(1).map((e=>i.Z.dispatch("text/checkFontLoaded",e)))]);const n=e.spans.flatMap((e=>this.splitter.splitGraphemes(e.text)));yield Promise.all(n.map((e=>this.untilFontLoadedForChar(e,t))))}))}untilFontLoadedForChar(e,t){return ne(this,null,(function*(){try{for(const n of t){const t=yield window.document.fonts.load(`14px ${n}`,e);if(0!==t.length)return}}catch(n){throw s.Z.setLogForError(n),n}}))}setIsFontLoading(e){i.Z.commit("text/SET_isFontLoading",e)}waitFontLoadingAndRecord(e,t){const n=B.Z.generateRandomString(12);this.toRecordId=n,this.toSetFlagId=n,this.setIsFontLoading(!0);const r=e=>{!0===e&&s.Z.setLogAndConsoleLog("Font loading exceeds timeout 40s or error occurs, run callback anyways"),setTimeout((()=>{t&&t(),this.toRecordId===n&&W.Z.record(),this.toSetFlagId===n&&this.setIsFontLoading(!1)}),100)};Promise.race([this.untilFontLoaded(e),new Promise((e=>{setTimeout((()=>{e(!0)}),4e4)}))]).then(r).catch((e=>{s.Z.setLogForError(e),r(!0)}))}waitGroupFontLoadingAndRecord(e,t){const n=B.Z.generateRandomString(12);this.toRecordId=n,this.toSetFlagId=n,this.setIsFontLoading(!0);const r=e=>{!0===e&&s.Z.setLogAndConsoleLog("Font loading exceeds timeout 40s or error occurs, run callback anyways"),setTimeout((()=>{t&&t(),this.toRecordId===n&&W.Z.record(),this.toSetFlagId===n&&this.setIsFontLoading(!1)}),100)};Promise.race([Promise.all(e.layers.filter((e=>"text"===e.type)).map((e=>this.untilFontLoaded(e.paragraphs)))),new Promise((e=>{setTimeout((()=>{e(!0)}),4e4)}))]).then(r).catch((e=>{s.Z.setLogForError(e),r(!0)}))}resetScaleForLayer(e,t=!1){e=B.Z.deepCopy(e);let n,r,i,s,a=1,l={};switch(e.type){case o.F5.text:if(l=(0,$.pick)(e.styles,["scale"]),e.styles.scale<1){const t=O.Z.getBaseFontSizeOfLayer(e),{scale:n}=O.Z.getScaleCompensation(t*e.styles.scale);a=n}e.styles.scale=a,e.paragraphs=O.Z.propAppliedParagraphs(e.paragraphs,"size",0,(e=>e*l.scale/a)),t||(i={width:e.styles.width,height:e.styles.height,x:e.styles.x,y:e.styles.y},G.Z.isCurvedText(e.styles.textShape)?(s=G.Z.getCurveTextProps(e),Object.assign(e.styles,s)):(-1!==e.widthLimit&&(e.widthLimit=this.autoResizeCoreSync(e,{width:i.width,height:i.height,widthLimit:e.widthLimit}).widthLimit),s=this.getTextHW(e,e.widthLimit),Object.assign(e.styles,{width:s.width,height:s.height,x:i.x+(s.width-i.width)/2,y:i.y+(s.height-i.height)/2}),e.spanDataList=s.spanDataList)),void 0!==e.styles.textEffect.fontSize&&(e.styles.textEffect.fontSize=D.Z.getLayerFontSize(e.paragraphs));break;case o.F5.tmp:case o.F5.group:l=(0,$.pick)(e.styles,["opacity","rotate","horizontalFlip","verticalFlip"]),e.type===o.F5.group&&e.layers.forEach(((t,n)=>{t.styles.zindex=e.styles.zindex+n})),e.styles.opacity=100,e.styles.rotate=0,e.styles.horizontalFlip=!1,e.styles.verticalFlip=!1,e.layers.forEach((t=>{t.type===o.F5.image&&(t.styles.scale*=e.styles.scale),t.parentLayerStyles=void 0})),n=L.Z.mapLayersToPage(e.layers,e).map((e=>this.resetScaleForLayer(e,t))),r=(0,L.O)(n),n=L.Z.mapLayersToTmp(n,r),Object.assign(e.styles,r),Object.assign(e.styles,l),e.styles.scale=1,e.layers=n;break}return e}resetScale(e,t=!1){e.layers=e.layers.map((e=>this.resetScaleForLayer(e,t)))}}var ie=new re},4821:function(e,t,n){"use strict";var r=n(72625),i=n(23931),o=n(89497),s=n(32905),a=n(60410),l=n.n(a),c=n(78871),d=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class u{get themes(){return o.Z.state.themes}get themesMainHidden(){return l().filter(o.Z.state.themes,["mainHidden",0])}get groupType(){return o.Z.state.groupType}get getPageSize(){return o.Z.getters.getPageSize}getFocusPageSize(e=s.Z.currFocusPageIndex){return this.getPageSize(-1===e?s.Z.middlemostPageIndex:e)}setTemplateThemes(e){o.Z.commit("templates/SET_STATE",{theme:e.map((e=>e.id)).join(",")})}checkAllThemes(){const e=o.Z.getters.getEditThemes.map((e=>e.id)).sort(((e,t)=>e-t)).join(",");o.Z.commit("templates/SET_STATE",{theme:e})}fetchTemplateContent(){return d(this,null,(function*(){c.Z.panelInit("template",(e=>d(this,null,(function*(){yield o.Z.dispatch("templates/getTagContent",{keyword:e})}))),((e,t)=>d(this,null,(function*(){yield o.Z.dispatch("templates/getContent",{keyword:e,locale:t})}))),(e=>d(this,[e],(function*({reset:e}){o.Z.dispatch("templates/getRecAndCate",{reset:e})}))))}))}refreshTemplateState(){return this.setTemplateThemes([]),this.checkThemeState().then((()=>{this.setPageThemes()}))}checkThemeState(){return d(this,null,(function*(){const{themes:e}=this;if(!e.length)try{const e=yield r.Z.getTheme({locale:i.Z.global.locale}),{data:t}=e.data;console.log(t),o.Z.commit("SET_themes",t.content),0===o.Z.getters.getHomeTags.length&&(o.Z.commit("SET_homeTags",t.tags),o.Z.commit("SET_shuffledThemesIds",t.theme_ids))}catch(t){}}))}setPageThemes(){const e=new URLSearchParams(window.location.search),t=e.get("themeId");if(t)o.Z.commit("templates/SET_STATE",{theme:t});else{const e=this.getFocusPageSize(),t=this.getThemesBySize(e.width,e.height);this.setTemplateThemes(t)}}sortedThemes(e,t){const{themes:n}=this,r=e/t;return l().sortBy(n,[e=>this.themeRatioDifference(e,r),t=>Math.abs(t.width-e)]).reverse()}getThemesBySize(e,t){const{themes:n,groupType:r}=this;if(1===r)return n.filter((e=>7===e.id));const i=e/t;let o=this.sortedThemes(e,t);o=o.filter((e=>this.themeRatioDifference(e,i)<.2));const s=new URLSearchParams(window.location.search),a=s.get("themeId"),l=a?parseInt(a):null;return l&&(o=o.filter((e=>e.id!==l)).concat(o.filter((e=>e.id===l)))),o.length?o:n}sortSelectedTheme(e){const t=e.split(",").map(Number),n=this.getFocusPageSize(),r=this.sortedThemes(n.width,n.height);return[...r.filter((e=>!t.includes(e.id))),...r.filter((e=>t.includes(e.id)))].map((e=>e.id)).join(",")}compareThemesWithPage(e,t){const n=this.getFocusPageSize(t),r=this.getThemesBySize(n.width,n.height);return r.some((t=>e.includes(`${t.id}`)))}getThemeTitleById(e){const t=this.themes.find((t=>t.id===parseInt(e)));return t?t.title:""}isSameDirection(e,t){return 1===e||Math.floor(e)===Math.floor(t)}isSimilarSize(e,t,n){return e*(1+n)>=t&&e*(1-n)<=t}themeRatioDifference(e,t){const n=e.width/e.height;return Math.abs(n-t)/t}}const g=new u;t["Z"]=g},16290:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var r=n(89995),i=n(71446),o=n(78871),s=n(75231),a=n(28253),l=n(46979),c=n(60410),d=n(47335),u=n(29651);class g extends Selection{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return g.valid(n)?new g(n):Selection.near(n)}content(){return Slice.empty}eq(e){return e instanceof g&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new g(e.resolve(t.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!p(e)||!h(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&g.valid(e))return e;let r=e.pos,i=null;for(let n=e.depth;;n--){let o=e.node(n);if(t>0?e.indexAfter(n)<o.childCount:e.index(n)>0){i=o.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let s=e.doc.resolve(r);if(g.valid(s))return s}for(;;){let o=t>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!NodeSelection.isSelectable(i)){e=e.doc.resolve(r+i.nodeSize*t),n=!1;continue e}break}i=o,r+=t;let s=e.doc.resolve(r);if(g.valid(s))return s}return null}}}function p(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function h(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}g.prototype.visible=!1,g.findFrom=g.findGapCursorFrom;var m=n(77804),y=n(52632),f=n(74041);function b(e,t,n){var r,i,o;if(["right","left"].includes(e))return null;const s=[];let a=0,l=1;for(const c of n.children){for(let e=0;e<c.children.length;e++){const t=c.children[e],n=t.getClientRects()[0],i=null==(r=c.children[e-1])?void 0:r.getClientRects()[0];0===e&&n.width&&(s.push({line:a,index:l,x:n.x}),l++),i&&i.y<n.y&&a++,s.push({line:a,index:l,x:n.x+n.width}),l++}a++,l++}const d=(0,c.find)(s,["index",t]);if(!d)return null;if(0===d.line&&"up"===e)return 1;if(d.line===a-1&&"down"===e)return s[s.length-1].index;const u=d.line+("up"===e?-1:1),g=(0,c.filter)(s,["line",u]),p="up"===e?1:-1,h=null!=(o=null==(i=(0,c.minBy)(g,(e=>Math.abs(e.x-(d.x+p)))))?void 0:i.index)?o:null;return h}function v(e,t){const n="vert"===e?t>0?"down":"up":t>0?"right":"left";return function({editor:e}){const r=e.view.state,i=e.view.dispatch,o=e.view,l=s.ZP.getCurrLayer.styles.textBg,c=(0,a.EE)(l)&&l.fixedWidth;if(c){const t=b(n,e.state.selection.anchor,o.dom);if(t&&e.chain().focus().setTextSelection(t).run(),t)return!0}const u=r.selection;let p=t>0?u.$to:u.$from,h=u.empty;if(u instanceof d.Bs){if(!o.endOfTextblock(n)||0===p.depth)return!1;h=!1,p=r.doc.resolve(t>0?p.after():p.before())}const m=g.findGapCursorFrom(p,t,h);return!!m&&(i&&i(r.tr.setSelection(new g(m))),!0)}}var w=l.hj.create({name:"nuTextStyle",addStorage(){return{spanStyle:void 0,from:void 0,to:void 0,pasting:!1}},onSelectionUpdate(){const e=this.editor.getAttributes("textStyle");if(Object.keys(e).length&&"undefined"!==e.font)this.storage.spanStyle=B.textStyles(e);else{const e=this.editor.getAttributes("paragraph").spanStyle;e&&(this.storage.spanStyle=B.textStyles(B.makeSpanStyle(this.editor.getAttributes("paragraph"))))}f.Z.pageIndex>=0&&f.Z.layerIndex>=0&&f.Z.updateTextPropsState();const t=this.editor.view.state.selection.ranges;if(t.length>0){const e=t[0].$from.pos,n=t[0].$to.pos;this.storage.from=e,this.storage.to=n,s.ZP.updateLayerProps(s.ZP.pageIndex,s.ZP.layerIndex,{selection:{from:e,to:n}}),B.getText(this.editor.getJSON())!==B.prevText||this.editor.view.composing||y.Z.updateHead(s.ZP.pageIndex,s.ZP.layerIndex,{selection:{from:e,to:n}})}},addGlobalAttributes(){function e(e){return{default:void 0,parseHTML:t=>{const n=t.style,r=n.getPropertyValue(e);return r},renderHTML:()=>({})}}return[{types:["textStyle"],attributes:{font:{default:"undefined",parseHTML:e=>{const t=e.style,n=t.fontFamily;if(!n.includes(","))return null;const r=n.split(",")[0];return 20===r.length&&r.match(/^[A-Za-z0-9]+$/)?r:null},renderHTML:()=>({})},weight:{default:"normal",parseHTML:e=>{const t=e.style,n=t.getPropertyValue("-webkit-text-stroke-width");return t.fontWeight?"bold"===t.fontWeight?"bold":"normal":""===n?null:n.includes("+")?"bold":"normal"},renderHTML:()=>({})},size:{default:20,parseHTML:e=>{const t=e.style;return t.fontSize.includes("px")?Math.round(parseFloat(t.fontSize.split("px")[0])/1.333333*100)/100:null},renderHTML:()=>({})},decoration:{default:"none",parseHTML:e=>{const t=e.style,n=t.textDecorationLine?t.textDecorationLine:t.getPropertyValue("-webkit-text-decoration-line");return"underline"===n?"underline":"none"},renderHTML:()=>({})},style:{default:"normal",parseHTML:e=>{const t=e.style;return"italic"===t.fontStyle?"italic":"normal"},renderHTML:()=>({})},color:{default:"#000000",parseHTML:e=>{const t=e.style;return""===t.color?null:(0,r.pK)(t.color)},renderHTML:e=>({style:B.textStyles(e)})},type:{default:"public",parseHTML:e=>e.getAttribute("data-font-type"),renderHTML:e=>e.type?{"data-font-type":e.type}:{}},userId:{default:"",parseHTML:e=>e.getAttribute("data-font-userId"),renderHTML:e=>e.userId?{"data-font-userId":e.userId}:{}},assetId:{default:"",parseHTML:e=>e.getAttribute("data-font-assetId"),renderHTML:e=>e.assetId?{"data-font-assetId":e.assetId}:{}},fontUrl:{default:"",parseHTML:e=>e.getAttribute("data-font-fontUrl"),renderHTML:e=>e.fontUrl?{"data-font-fontUrl":e.fontUrl}:{}},pre:{default:void 0,parseHTML:e=>{const t=e.style,n=t.getPropertyValue("white-space");return"pre"===n},renderHTML:e=>e.pre?{style:"white-space: pre"}:{}},spanIndex:{default:void 0,parseHTML:e=>e.getAttribute("random-id"),renderHTML:e=>e.spanIndex?{spanIndex:e.spanIndex}:{}},"min-width":e("min-width"),"min-height":e("min-height"),backgroundImage:e("backgroundImage"),backgroundSize:e("backgroundSize"),backgroundPosition:e("backgroundPosition"),webkitBackgroundClip:e("-webkit-background-clip"),opacity:e("opacity"),filter:e("filter"),willChange:e("will-change"),"--base-stroke":e("--base-stroke"),webkitTextFillColor:e("-webkit-text-fill-color"),webkitTextStrokeColor:e("-webkit-text-stroke-color"),textShadow:e("text-shadow")}},{types:["paragraph"],attributes:{spanStyle:{default:!1,parseHTML:e=>{const t=e.getAttribute("data-span-style");return"true"===t},renderHTML:e=>e.spanStyle?{"data-span-style":e.spanStyle.toString()}:{}},font:{default:"undefined",parseHTML:e=>{const t=e.style,n=t.fontFamily;if(!n.includes(","))return null;const r=n.split(",")[0];return 20===r.length&&r.match(/^[A-Za-z0-9]+$/)?r:null},renderHTML:()=>({})},lineHeight:{default:1.4,parseHTML:e=>{const t=e.style,n=/[+-]?\d+(\.\d+)?/;return null!==t.lineHeight.match(n)?parseFloat(t.lineHeight.match(n)[0]):null},renderHTML:()=>({})},fontSpacing:{default:0,parseHTML:e=>{const t=e.style,n=/[+-]?\d+(\.\d+)?/;return null!==t.letterSpacing.match(n)?parseFloat(t.letterSpacing.match(n)[0]):null},renderHTML:()=>({})},size:{default:20,parseHTML:e=>{const t=e.style;return t.fontSize.includes("px")?Math.round(parseFloat(t.fontSize.split("px")[0])/1.333333*100)/100:null},renderHTML:()=>({})},align:{default:"center",parseHTML:e=>{const t=e.style,n=t.textAlign;return n.match(/^left|center|right|justify$/)?n:null},renderHTML:e=>{const t=e.spanStyle?e:B.makeParagraphStyle(e);return{style:B.textStyles(t)+"; margin: 0;"}}},weight:{default:"normal",parseHTML:e=>e.getAttribute("data-weight"),renderHTML:e=>({"data-weight":e.weight})},decoration:{default:"none",parseHTML:e=>e.getAttribute("data-decoration"),renderHTML:e=>({"data-decoration":e.decoration})},style:{default:"normal",parseHTML:e=>e.getAttribute("data-style"),renderHTML:e=>({"data-style":e.style})},color:{default:"#000000",parseHTML:e=>e.getAttribute("data-color"),renderHTML:e=>({"data-color":e.color})},type:{default:"public",parseHTML:e=>e.getAttribute("data-font-type"),renderHTML:e=>e.type?{"data-font-type":e.type}:{}},userId:{default:"",parseHTML:e=>e.getAttribute("data-font-userId"),renderHTML:e=>e.userId?{"data-font-userId":e.userId}:{}},assetId:{default:"",parseHTML:e=>e.getAttribute("data-font-assetId"),renderHTML:e=>e.assetId?{"data-font-assetId":e.assetId}:{}},fontUrl:{default:"",parseHTML:e=>e.getAttribute("data-font-fontUrl"),renderHTML:e=>e.fontUrl?{"data-font-fontUrl":e.fontUrl}:{}}}}]},addKeyboardShortcuts(){return{"Mod-z":({editor:e})=>(y.Z.undo().then((()=>{(0,u.Y3)((()=>{const t=s.ZP.getCurrLayer;t.active&&(e.commands.sync(),B.updatePrevData(e),f.Z.updateTextPropsState())}))})),!0),"Shift-Mod-z":({editor:e})=>(y.Z.redo().then((()=>{(0,u.Y3)((()=>{const t=s.ZP.getCurrLayer;t.active&&(e.commands.sync(),B.updatePrevData(e),f.Z.updateTextPropsState())}))})),!0),"Mod-я":({editor:e})=>e.commands.keyboardShortcut("Mod-z"),"Shift-Mod-я":({editor:e})=>e.commands.keyboardShortcut("Shift-Mod-z"),"Shift-Enter":({editor:e})=>e.commands.keyboardShortcut("Enter"),"Mod-c":()=>(m.Z.textCopy(),!0),"Mod-x":()=>(m.Z.textCut(),!0),"Mod--":()=>(m.Z.zoomOut(),!0),"Mod-=":()=>(m.Z.zoomIn(),!0),"Mod-s":()=>(m.Z.save(),!0),ArrowUp:v("vert",-1),ArrowDown:v("vert",1)}},addCommands(){return{selectPrevious:()=>({commands:e})=>{var t,n;const r=null!=(t=this.storage.from)?t:0,i=null!=(n=this.storage.to)?n:0;return e.setTextSelection({from:r,to:i})},sync:()=>({chain:e})=>{const t=s.ZP.getCurrLayer,n=s.ZP.subLayerIdx;let r;if("group"===t.type){if(-1===n)return!1;const e=t.layers[n];if("text"!==e.type)return!1;r=e}else{if("text"!==t.type)return!1;r=t}const i=r.paragraphs,o=r.selection;return e().setContent(B.toJSON(i)).setTextSelection(o).run()},insertPlainText:e=>({commands:t})=>t.command((({tr:t})=>(t.insertText(e),!0)))}}}),N=n(90272),S=n(56889),x=n(51184),P=n(29792),I=n(56746),_=n(39685),k=n(53650),Z=n(32490),C=n(89456),z=Object.defineProperty,T=Object.defineProperties,L=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,M=(e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))D.call(t,n)&&M(e,n,t[n]);if(E)for(var n of E(t))O.call(t,n)&&M(e,n,t[n]);return e},$=(e,t)=>T(e,L(t)),F=(e,t,n)=>(M(e,"symbol"!==typeof t?t+"":t,n),n);class j{constructor(){F(this,"event"),F(this,"eventHandler"),F(this,"editor"),F(this,"prevText"),F(this,"prevJSON"),this.event=new k.EventEmitter,this.eventHandler=void 0}init(e,t){this.editor=new _.ML({content:null!=e?e:"",extensions:[S.Z,x.Z,P.Z,I.Z,w],editorProps:{attributes:{class:"non-selectable"},handleScrollToSelection:()=>{var e;return null==(e=this.editor)?void 0:e.storage.nuTextStyle.pasting},handlePaste:(e,t,n)=>{if(!t.clipboardData)return!1;const r=t.clipboardData.items;for(let i=r.length-1;i>=0;i--)"string"===r[i].kind&&"text/plain"===r[i].type&&r[i].getAsString((e=>{m.Z.textPasteWith(e)}));return!0}},parseOptions:{preserveWhitespace:"full"},editable:t,onCreate:({editor:e})=>{this.updatePrevData(e),e.commands.selectAll()}})}agent(e){this.editor&&e(this.editor)}destroy(){this.agent((e=>{e.destroy(),this.editor=void 0}))}on(e,t){this.agent((n=>n.on(e,t)))}onForceUpdate(e){const t=t=>{this.agent((n=>e(n,t)))};this.eventHandler&&this.event.off("update",this.eventHandler),this.eventHandler=t,this.event.on("update",t)}forceUpdate(e=!1){this.event.emit("update",e)}textStylesRaw(e){const t=i.Z.convertFontStyle(e);return Object.assign(t,{"-webkit-text-decoration-line":t["text-decoration-line"]})}textStyles(e){return Object.entries(this.textStylesRaw(e)).map((([e,t])=>`${e}: ${t}`)).join("; ")}toJSON(e){return{type:"doc",content:e.map((e=>{const t={type:"paragraph"},n=this.makeParagraphStyle(e.styles);if(e.spanStyle){n.spanStyle=!0;const t=this.generateSpanStyle(e.spanStyle);Object.assign(n,this.extractSpanStyleForParagraph(t))}if(t.attrs=n,e.spans.length>1||""!==e.spans[0].text){const n=this.splitLastWhiteSpaces(e.spans),r=s.ZP.getCurrConfig,i=Z.Z.isSplitSpan(r.styles),o=N.Z.convertTextEffect(r);t.content=n.map(((t,n)=>({type:"text",text:t.text,marks:[{type:"textStyle",attrs:Object.assign(this.makeSpanStyle(t.styles),o,i?A({spanIndex:n},Z.Z.fixedWidthStyle(t.styles,e.styles,r)):{})}]})))}return t}))}}splitLastWhiteSpaces(e){var t,n;const r=e[e.length-1];if(!r.text.endsWith(" "))return e;const i=o.Z.deepCopy(e),s=null!=(n=null==(t=r.text.match(/ +$/))?void 0:t[0])?n:"",a=r.text.substring(0,r.text.length-s.length);return""===a?(i[i.length-1].styles.pre=!0,i):(i[i.length-1].text=a,i.push({text:s,styles:$(A({},r.styles),{pre:!0})}),i)}makeParagraphStyle(e){const{font:t,lineHeight:n,fontSpacing:r,size:i,align:o,type:s,userId:a,assetId:l}=e;return{font:t,lineHeight:n,fontSpacing:r,size:i,align:o,type:s,userId:a,assetId:l}}generateSpanStyle(e){const t=this.str2css(e),n=this.extractFontProps(e);return A({font:t.fontFamily.split(",")[0],weight:t.getPropertyValue("-webkit-text-stroke-width").includes("+")?"bold":"normal",size:Math.round(parseFloat(t.fontSize.split("px")[0])/1.333333*100)/100,decoration:t.textDecorationLine?t.textDecorationLine:t.getPropertyValue("-webkit-text-decoration-line"),style:t.fontStyle,color:(0,r.pK)(t.color)},n)}makeSpanStyle(e){const{font:t,weight:n,size:r,decoration:i,style:o,color:s,type:a,userId:l,assetId:c,fontUrl:d,pre:u}=e;return{font:t,weight:n,size:r,decoration:i,style:o,color:s,type:a,userId:l,assetId:c,fontUrl:d,pre:u}}extractSpanStyleForParagraph(e){const{weight:t,decoration:n,style:r,color:i,font:o,size:s,type:a,userId:l,assetId:c}=e;return{weight:t,decoration:n,style:r,color:i,font:o,size:s,type:a,userId:l,assetId:c}}str2css(e){const t=document.createElement("div");return t.style.cssText=e,t.style}extractFontProps(e){var t;const n={type:"public",userId:"",assetId:"",fontUrl:""},r=null!=(t=e.match(/[a-z-]+\s*:\s*[^;]*;/g))?t:[];for(const i of r){const e=i.match(/([a-z-]+)\s*:\s*([^;]*);/);if(e)switch(e[1]){case"font-type":n.type=e[2];break;case"user-id":n.userId=e[2];break;case"asset-id":n.assetId=e[2];break;case"font-url":n.fontUrl=e[2];break}}return n}toIParagraph(e){var t;const n=e;if(!this.editor)return{paragraphs:[],isSetContentRequired:!1};let r=!1;const i=null==(t=n.content)?void 0:t.some((e=>{var t;return null==(t=e.content)?void 0:t.some((e=>{var t,n;return![-1,void 0].includes(null==(n=null==(t=e.marks)?void 0:t[0].attrs)?void 0:n.spanIndex)}))}));i&&n.content.forEach((e=>{e.content&&e.content.forEach((t=>{if(t.text.length>1&&(r=!0),!t.marks||0===t.marks.length)return;const n=parseFloat(t.marks[0].attrs.width);n!==1.333333*t.marks[0].attrs.size*(e.attrs.fontSpacing+1)&&(r=!0)}))}));const o=this.editor.storage.nuTextStyle.spanStyle,s=[];for(const a of n.content){const e=this.makeParagraphStyle(a.attrs);let t=0;const n=[],l=i&&a.content&&!this.editor.view.composing?a.content.flatMap((e=>C.Z.splitter.splitGraphemes(e.text).map((t=>Object.assign({},e,{text:t}))))):a.content;for(const i of null!=l?l:[])if(i.marks&&i.marks.length>0&&"undefined"!==i.marks[0].attrs.font){const e=this.makeSpanStyle(i.marks[0].attrs);e.size>t&&(t=e.size),e.pre&&!i.text.match(/^ +$/)&&(e.pre=void 0,r=!0),(i.text.includes("︎")||i.text.includes("️"))&&(r=!0),n.push({text:i.text.replace(/[\ufe0e\ufe0f]/g,""),styles:e})}else{let e;r=!0,e=a.attrs.spanStyle?this.makeSpanStyle(a.attrs):this.generateSpanStyle(o),e.size>t&&(t=e.size),e.pre&&!i.text.match(/^ +$/)&&(e.pre=void 0,r=!0),n.push({text:i.text.replace(/[\ufe0e\ufe0f]/g,""),styles:e})}if(0===n.length)if(a.attrs.spanStyle){const t=this.makeSpanStyle(a.attrs);n.push({text:"",styles:t}),e.size=t.size,e.font=t.font,e.type=t.type,e.userId=t.userId,e.assetId=t.assetId,e.fontUrl=t.fontUrl,s.push({spans:n,styles:e,spanStyle:this.textStyles(t)})}else{r=!0;const t=this.generateSpanStyle(o);n.push({text:"",styles:t}),e.size=t.size,e.font=t.font,e.type=t.type,e.userId=t.userId,e.assetId=t.assetId,e.fontUrl=t.fontUrl,s.push({spans:n,styles:e,spanStyle:o})}else{if(e.size!==t&&(e.size=t,r=!0),"undefined"===e.font){const t=n[0].styles;e.font=t.font,e.type=t.type,e.userId=t.userId,e.assetId=t.assetId,e.fontUrl=t.fontUrl,r=!0}a.attrs.spanStyle&&(r=!0);const i=n[n.length-1].text;i.endsWith(" ")&&!i.match(/^ +$/)&&(r=!0),s.push({spans:n,styles:e})}}return{paragraphs:s,isSetContentRequired:r}}getText(e){var t,n,r;const i=[],o=null!=(t=e.content)?t:[];for(const s of o){const e=null!=(n=s.content)?n:[];if(e.length>0){const t=[];for(const n of e)t.push(null!=(r=n.text)?r:"");i.push(t.join(""))}else i.push("")}return i.join("\n")}updatePrevData(e){const t=e.getJSON();this.prevJSON=t,this.prevText=this.getText(t)}toText(e){var t;const n=[],r=e.paragraphs;for(const i of r){const e=i.spans;if(e.length>0){const r=[];for(const n of e)r.push(null!=(t=n.text)?t:"");n.push(r.join(""))}else n.push("")}return n.join("\n")}applySpanStyle(e,t,n,r={},i=!0){const o={[e]:t};Object.assign(o,r);const{subLayerIdx:a,getCurrLayer:l}=s.ZP,c=-1===a?l.contentEditable:l.layers[a].contentEditable;this.agent((s=>{if(c&&!1!==n){const n=s.state.selection.ranges;if(n.length>0)if(n[0].$from.pos===n[0].$to.pos){const n=this.generateSpanStyle(s.storage.nuTextStyle.spanStyle);n[e]=t,Object.assign(n,r),s.storage.nuTextStyle.spanStyle=this.textStyles(n),s.chain().setMark("textStyle",n).run(),i&&setTimeout((()=>{s.commands.focus()}),10)}else s.chain().updateAttributes("textStyle",o).updateAttributes("paragraph",o).run(),setTimeout((()=>{i?s.chain().focus().selectPrevious().run():s.chain().selectPrevious().run()}),10)}else f.Z.applyPropsToAll("span,paragraph",o),this.updateHtml()}))}spanStyleHandler(e,t,n=!0){const r={[e]:t},{subLayerIdx:i,getCurrLayer:o,layerIndex:a}=s.ZP;switch(o.type){case"text":this.applySpanStyle(e,t,void 0,{},n);break;case"tmp":case"group":if(-1!==i&&o.layers[i].contentEditable)this.applySpanStyle(e,t,void 0,{},n);else{if(f.Z.applyPropsToAll("span,paragraph",r,a,i),-1!==i)this.updateHtml(),C.Z.updateTextLayerSizeByShape(s.ZP.pageIndex,a,i);else for(const[e,t]of o.layers.entries())"text"===t.type&&C.Z.updateTextLayerSizeByShape(s.ZP.pageIndex,a,e);C.Z.updateGroupLayerSize(s.ZP.pageIndex,a)}}f.Z.updateTextPropsState(r)}applyParagraphStyle(e,t,n=!0){const r={};r[e]=t,this.agent((e=>{if(this.isCurrLayerContenteditable()){e.chain().updateAttributes("paragraph",r).run();const t=e.state.selection.ranges;if(t.length>0)if(t[0].$from.pos===t[0].$to.pos){const t=this.generateSpanStyle(e.storage.nuTextStyle.spanStyle);e.chain().setMark("textStyle",t).run(),n&&setTimeout((()=>{e.commands.focus()}),10)}else n&&setTimeout((()=>{e.chain().focus().selectPrevious().run()}),10)}else e.chain().updateAttributes("paragraph",r).run()}))}applyDivStyle(){const e=Object.entries({}).map((([e,t])=>`${e}: ${t}`)).join("; ");this.agent((t=>{t.setOptions({editorProps:{attributes:{style:e}}})}))}focus(e={},t){this.editor&&this.editor.commands.focus(t,e)}getParagraphs(){const{subLayerIdx:e,getCurrLayer:t}=s.ZP;return"text"===t.type?t.paragraphs:-1!==e?t.layers[e].paragraphs:void 0}updateHtml(e){if(this.editor){if(!e){const t=this.getParagraphs();if(void 0===t)return;e=t}this.editor.chain().setContent(this.toJSON(e)).selectPrevious().run()}}getSelection(){if(this.editor){const e=this.editor.view.state.selection,t=e.$from,n=e.$to;return{start:{pIndex:t.index(0),sIndex:t.index(1),offset:t.textOffset},end:{pIndex:n.index(0),sIndex:n.index(1),offset:n.textOffset}}}}isCurrLayerContenteditable(){const{subLayerIdx:e,getCurrLayer:t}=s.ZP,n=-1===e?t:t.layers[e];return"text"===n.type&&n.contentEditable}}var B=new j},46921:function(e,t,n){"use strict";n.d(t,{cB:function(){return a},kI:function(){return o}});var r=n(89497),i=n(60410);const o=["px","cm","mm","in"],s=Object.fromEntries(o.map(((e,t)=>[e,t]))),a=3;function l(e=96){return[[1,2.54/e,25.4/e,1/e],[e/2.54,1,10,1/2.54],[e/25.4,.1,1,1/25.4],[e,2.54,25.4,1]]}class c{get dimensionMap(){var e,t;return null!=(t=null==(e=r.Z)?void 0:e.getters["user/getDimensionMap"])?t:{}}convert(e,t,n,r){var i,o;return void 0===r&&void 0!==(null==(o=null==(i=this.dimensionMap[t])?void 0:i[e])?void 0:o[n])?this.dimensionMap[t][e][n]:e*l(r)[s[t]][s[n]]}convertAll(e,t,n){return Object.fromEntries(l(n)[s[t]].map(((r,s)=>{var a,l;return void 0===n&&void 0!==(null==(l=null==(a=this.dimensionMap[t])?void 0:a[e])?void 0:l[o[s]])?"px"===o[s]?(0,i.round)(this.dimensionMap[t][e][o[s]]):this.dimensionMap[t][e][o[s]]:"px"===o[s]?[o[s],(0,i.round)(e*r)]:[o[s],e*r]})))}convertSize(e,t,n,r){var o,s,a,l;if(n===r)return{width:e,height:t};const c=e/t||1,d=null==(s=null==(o=this.dimensionMap[n])?void 0:o[e])?void 0:s[r],u=null==(l=null==(a=this.dimensionMap[n])?void 0:a[t])?void 0:l[r];if(void 0!==d||void 0!==u)return"px"===r?{width:null!=d?d:(0,i.round)(u*c),height:null!=u?u:(0,i.round)(d/c)}:{width:null!=d?d:u*c,height:null!=u?u:d/c};if("px"!==n&&"px"!==r)return{width:this.convert(e,n,r,96),height:this.convert(t,n,r,96)};let g=Math.max(e,t);return"px"===r&&"px"!==n&&(g=this.convert(g,n,"in",96),g=g<=6?this.convert(g,"in","px",300):g<=2200/96?1800+this.convert(g-6,"in","px",400/(2200/96-6)):this.convert(g,"in","px",96)),"px"!==r&&"px"===n&&(g=g<=1800?this.convert(g,"px",r,300):g<=2200?this.convert(6,"in",r,96)+this.convert(g-1800,"px",r,400/(2200/96-6)):this.convert(g,"px",r,96)),e>t?(e=g,t=g/c):(t=g,e=g*c),"px"===r?{width:(0,i.round)(e),height:(0,i.round)(t)}:{width:e,height:t}}convertAllSize(e,t,n){return Object.fromEntries(o.map((r=>[r,this.convertSize(e,t,n,r)])))}getConvertDpi(e){const{physicalWidth:t,physicalHeight:n,unit:r}=e,i=this.convertSize(t,n,r,"px"),o=this.convertSize(t,n,r,"in");return{width:i.width/o.width,height:i.height/o.height}}}t["ZP"]=new c},44306:function(e,t,n){"use strict";var r=n(90469),i=n(16122),o=n(72625),s=n(23931),a=n(94733),l=n(52495),c=n(89497),d=n(6400),u=n(3162),g=n(58559),p=n(46921),h=n(50559),m=n(53650),y=n(60410),f=n.n(y),b=n(86052),v=n(77891),w=n(20951),N=n(93261),S=n(78871),x=n(70118),P=n(75231),I=n(53074),_=n(98824),k=n(50707),Z=n(32905),C=n(15820),z=n(52632),T=n(4821),L=Object.defineProperty,E=Object.defineProperties,D=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,$=(e,t,n)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F=(e,t)=>{for(var n in t||(t={}))M.call(t,n)&&$(e,n,t[n]);if(O)for(var n of O(t))A.call(t,n)&&$(e,n,t[n]);return e},j=(e,t)=>E(e,D(t)),B=(e,t,n)=>($(e,"symbol"!==typeof t?t+"":t,n),n),R=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),H=(e=>(e[e["UPDATE_DB"]=0]="UPDATE_DB",e[e["UPDATE_PREV"]=1]="UPDATE_PREV",e[e["UPDATE_BOTH"]=2]="UPDATE_BOTH",e))(H||{}),U=(e=>(e[e["UPLOAD"]=0]="UPLOAD",e[e["UPDATE_GROUP"]=1]="UPDATE_GROUP",e[e["UPDATE_COVER"]=2]="UPDATE_COVER",e))(U||{}),W=(e=>(e["TEMPLATE"]="template",e["TEXT"]="text",e["ASSET_DESIGN"]="design",e["NEW_DESIGN_TEMPLATE"]="new-design-template",e["PRODUCT_PAGE_TEMPLATE"]="product-page-template",e))(W||{});const V=class{constructor(){B(this,"PutAssetDesignType",V.PutAssetDesignType),B(this,"GroupDesignUpdateFlag",V.GroupDesignUpdateFlag),B(this,"GetDesignType",V.GetDesignType),B(this,"loginOutput"),B(this,"getDesignInfo"),B(this,"event"),B(this,"eventHash"),B(this,"designStatusTimer"),B(this,"DEFAULT_POLLING_RETRY_LIMIT",15),this.getDesignInfo={flag:0,type:"design",id:"",teamId:""},this.event=new m.EventEmitter,this.eventHash={},this.designStatusTimer=-1}get token(){return c.Z.getters["user/getToken"]}get userId(){return c.Z.getters["user/getUserId"]}get teamId(){return c.Z.getters["user/getTeamId"]||this.userId}get groupId(){return c.Z.getters.getGroupId}get assetId(){return c.Z.getters.getAssetId}get exportIds(){return c.Z.state.exportIds}get images(){return c.Z.getters["file/getImages"]}get isAdmin(){return c.Z.getters["user/isAdmin"]}get isOutsourcer(){return c.Z.getters["user/isOutsourcer"]}get isLogin(){return c.Z.getters["user/isLogin"]}setLoginOutput(e){this.loginOutput=e,this.getDesignInfo.flag&&this.getDesign(this.getDesignInfo.type,{designId:this.getDesignInfo.id,teamId:this.getDesignInfo.teamId})}onFontUploadStatus(e){this.eventHash.fontUploadStatus&&delete this.eventHash.fontUploadStatus,this.eventHash.fontUploadStatus=e,this.event.on("fontUploadStatus",e)}emitFontUploadEvent(e){this.event.emit("fontUploadStatus",e)}offFontUploadStatus(){this.event.off("fontUploadStatus",this.eventHash.fontUploadStatus)}onDesignUploadStatus(e){this.eventHash.designUploadStatus&&delete this.eventHash.designUploadStatus,this.event.on("designUploadStatus",e),this.eventHash.designUploadStatus=e,this.event.on("designUploadStatus",e)}emitDesignUploadEvent(e){this.event.emit("designUploadStatus",e)}offDesignUploadStatus(){this.event.off("designUploadStatus",this.eventHash.designUploadStatus)}chooseAssets(e,t=!1){const n={image:".jpg,.jpeg,.png,.webp,.gif,.svg,.tiff,.tif,.heic",font:".ttf,.ttc,.otf,.woff2",avatar:".jpg,.jpeg,.png,.webp,.gif,.svg,.tiff,.tif,.heic",logo:".jpg,.jpeg,.png,.webp,.gif,.svg,.tiff,.tif,.heic"},r=document.createElement("input");document.body.appendChild(r),r.setAttribute("class","inputNode"),r.setAttribute("type","file"),r.setAttribute("accept",n[e]),r.setAttribute("multiple",`${"image"===e}`),r.id="upload",r.click(),r.addEventListener("change",(n=>{const i=r.files,o={};"logo"===e&&(o.brandId=c.Z.getters["brandkit/getCurrentBrandId"]),this.uploadAsset(e,i,Object.assign(o,{addToPage:t})),document.body.removeChild(r)}),!1)}uploadScreenShotImage(e){c.Z.commit("SET_currSidebarPanelType",d.iI.file);const t=new FileReader,n=S.Z.generateAssetId(),r=`${S.Z.generateRandomString(8)}.png`,i=new FormData;Object.keys(this.loginOutput.upload_map.fields).forEach((e=>{i.append(e,this.loginOutput.upload_map.fields[e])})),i.append("key",`${this.loginOutput.upload_map.path}asset/image/${n}/original`),i.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent(`${r}`)}`),i.append("x-amz-meta-tn",this.userId);const o=new XMLHttpRequest,s=new File([e],r,{lastModified:Date.now()});i.has("file")?i.set("file",s):i.append("file",s),t.onload=e=>{var t;const r=new Image;r.src=null==(t=e.target)?void 0:t.result,r.onload=e=>{let t;c.Z.commit("file/SET_UPLOADING_IMGS",{id:n,adding:!0}),c.Z.commit("file/ADD_PREVIEW",{width:r.width,height:r.height,src:r.src,assetId:n}),b.ZP.addImage(r.src,r.width/r.height,{pageIndex:Z.Z.currFocusPageIndex,isPreview:!0,assetId:n}),o.open("POST",this.loginOutput.upload_map.url,!0),o.upload.onprogress=e=>{const r=Math.floor(e.loaded/e.total*100);c.Z.commit("file/UPDATE_PROGRESS",{assetId:n,progress:r/2}),100===r&&(t=window.setInterval((()=>{const e=this.images.findIndex((e=>e.id===n)),t=this.images[e].progress,r=.05*(90-t);this.images[e].progress=t+r}),10))},o.send(i),o.onerror=k.Z.notifyNetworkError,o.onload=()=>{const e=window.setInterval((()=>{const r=`https://template.vivipic.com/export/${this.teamId}/${n}/result.json?ver=${S.Z.generateRandomString(6)}`;fetch(r).then((r=>{200===r.status&&(clearInterval(e),clearInterval(t),r.json().then((e=>{if(0===e.flag){const{width:t,height:r,asset_index:i}=e.data;console.log("Successfully upload the file"),c.Z.commit("file/UPDATE_PROGRESS",{assetId:n,progress:100}),c.Z.commit("file/UPDATE_IMAGE_URLS",{assetId:n,urls:e.url,assetIndex:i,width:t,height:r}),c.Z.commit("DELETE_previewSrc",{type:this.isAdmin?"public":"private",userId:this.userId,assetId:n,assetIndex:e.data.asset_index}),c.Z.commit("file/SET_UPLOADING_IMGS",{id:n,adding:!1}),this.uploadDesign()}else 1===e.flag&&(c.Z.commit("file/DEL_PREVIEW",{assetId:n}),P.ZP.deleteLayerByAssetId(n),g.Z.errorHandler(e.msg))})))}))}),2e3)}}},t.readAsDataURL(e)}uploadAsset(e,t,{addToPage:r=!1,id:i,pollingCallback:o,needCompressed:a=!0,brandId:l,isShadow:d=!1,pollingJsonName:u="result.json"}={}){"font"===e&&this.emitFontUploadEvent("uploading");for(const n of t){const t=("string"===typeof n?n.length/4*3:n.size)/1024/1024,r="string"===typeof n||"font"===e?50:this.isAdmin&&"image/svg+xml"===n.type?1.3:25,i="string"===typeof n?s.Z.global.t("NN0705",{size:r}):s.Z.global.t("NN0696",{file:n.name,size:r});if(t>r)return void _.Z.setModalInfo(s.Z.global.t("NN0137"),i)}const p="string"!==typeof t[0];for(let m=0;m<t.length;m++){const y=new FileReader,f=null!=i?i:S.Z.generateAssetId(),w=new FormData;if(Object.keys(this.loginOutput.upload_map.fields).forEach((e=>{w.append(e,this.loginOutput.upload_map.fields[e])})),"avatar"===e)w.append("key",`${this.loginOutput.upload_map.path}asset/${e}/original`);else if("font"===e)w.append("key",`${this.loginOutput.upload_map.path}asset/${e}/${f}/${s.Z.global.locale}_original`);else if("logo"===e){if(!l)return;w.append("key",`${this.loginOutput.upload_map.path}asset/${e}/${l}/${f}/original`)}else w.append("key",`${this.loginOutput.upload_map.path}asset/${e}/${f}/original`);w.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent(p?t[m].name:"original")}`),w.append("x-amz-meta-tn",a?this.userId:d?`${this.userId},2`:`${this.userId},1`);const N=new XMLHttpRequest,x=p?t[m]:S.Z.dataURLtoBlob(t[m]);w.has("file")?w.set("file",x):w.append("file",x);const I=(t,i)=>{if("image"===e){const s=new Image;s.src=t;const a="unknown"===i,l=t=>{let n;c.Z.commit("file/SET_UPLOADING_IMGS",{id:f,adding:!0,pageIndex:Z.Z.currFocusPageIndex}),r&&b.ZP.addImage(t,a?1:s.width/s.height,{pageIndex:Z.Z.currFocusPageIndex,isPreview:!0,previewSrc:t,assetId:f}),N.open("POST",this.loginOutput.upload_map.url,!0),d||(c.Z.commit("file/ADD_PREVIEW",{width:a?250:s.width,height:a?250:s.height,src:t,assetId:f}),N.upload.onprogress=e=>{const t=Math.floor(e.loaded/e.total*100);c.Z.commit("file/UPDATE_PROGRESS",{assetId:f,progress:t/2}),100===t&&(n=window.setInterval((()=>{const e=this.images.findIndex((e=>e.id===f)),t=this.images[e].progress,n=.05*(90-t);this.images[e].progress=t+n}),10))}),N.send(w),N.onerror=k.Z.notifyNetworkError,N.onload=()=>{const t=window.setInterval((()=>{const r=`https://template.vivipic.com/export/${this.teamId}/${f}/${u}?ver=${S.Z.generateRandomString(6)}`;fetch(r).then((r=>{200===r.status&&(clearInterval(t),clearInterval(n),r.json().then((t=>{if(0===t.flag){const{width:n,height:r,asset_index:i}=t.data;"image"===e&&(d||(c.Z.commit("file/UPDATE_PROGRESS",{assetId:f,progress:100}),c.Z.commit("file/UPDATE_IMAGE_URLS",F({assetId:f,urls:t.url,assetIndex:i},a&&{width:n,height:r}))),c.Z.commit("DELETE_previewSrc",{type:this.isAdmin?"public":"private",userId:this.userId,assetId:f,assetIndex:t.data.asset_index}),c.Z.commit("file/SET_UPLOADING_IMGS",{id:f,adding:!1}),o&&o(t))}else c.Z.commit("file/DEL_PREVIEW",{assetId:f}),P.ZP.deleteLayerByAssetId(f),g.Z.errorHandler(t.msg)})))}))}),2e3)}};a?l(n(75230)):s.onload=e=>{l(s.src)}}else if("font"===e){const e=v.Z.createTempFont(f);N.open("POST",this.loginOutput.upload_map.url,!0),N.send(w),N.onerror=k.Z.notifyNetworkError,N.onload=()=>{const t=window.setInterval((()=>{const n=`https://template.vivipic.com/export/${this.teamId}/${f}/${u}?ver=${S.Z.generateRandomString(6)}`;fetch(n).then((n=>{200===n.status&&(clearInterval(t),n.json().then((t=>{0===t.flag?(this.emitFontUploadEvent("success"),console.log("Successfully upload the file"),v.Z.replaceFont(e,t.data),setTimeout((()=>{this.emitFontUploadEvent("none")}),2e3)):(g.Z.errorHandler(t.msg),v.Z.deleteFont(e))})))}))}),2e3)}}else if("avatar"===e)N.open("POST",this.loginOutput.upload_map.url,!0),N.send(w),_.Z.setIsPending(!0),_.Z.setModalInfo(`${s.Z.global.t("NN0136")}`,[]),N.onerror=k.Z.notifyNetworkError,N.onload=()=>{const e=window.setInterval((()=>{const t=`https://template.vivipic.com/export/${this.teamId}/avatar/${u}?ver=${S.Z.generateRandomString(6)}`;fetch(t).then((t=>{200===t.status&&(clearInterval(e),t.json().then((e=>{if(0===e.flag){console.log("Successfully upload the file");const t=this.isAdmin?{prev:`https://template.vivipic.com/admin/${this.teamId||this.userId}/asset/avatar/prev`,prev_2x:`https://template.vivipic.com/admin/${this.teamId||this.userId}/asset/avatar/prev_2x`,prev_4x:`https://template.vivipic.com/admin/${this.teamId||this.userId}/asset/avatar/prev_4x`}:e.url;c.Z.commit("user/SET_STATE",{avatar:t}),_.Z.setModalInfo(`${s.Z.global.t("NN0224")}`,[])}else _.Z.setModalInfo(`${s.Z.global.t("NN0223")}`,[]);_.Z.setIsPending(!1)})))}))}),2e3)};else if("logo"===e){if(!l)return;const e=v.Z.createTempLogo(l,f);N.open("POST",this.loginOutput.upload_map.url,!0),N.send(w),N.onerror=k.Z.notifyNetworkError,N.onload=()=>{const t=window.setInterval((()=>{const n=`https://template.vivipic.com/export/${this.teamId}/${f}/${u}?ver=${S.Z.generateRandomString(6)}`;fetch(n).then((n=>{200===n.status&&(clearInterval(t),n.json().then((t=>{0===t.flag?((0,h.h4)({group:"copy",text:`${s.Z.global.t("NN0135")}`}),console.log("Successfully upload the file"),v.Z.replaceLogo(e,t.data,l)):(g.Z.errorHandler(t.msg),v.Z.deleteLogo(l,e))})))}))}),2e3)}}};p?S.Z.getFileImageTypeByByte(t[m]).then((e=>{y.onload=t=>{var n;I(null==(n=t.target)?void 0:n.result,e)},y.readAsDataURL(t[m])})):I(t[m])}}uploadLog(e){return R(this,null,(function*(){yield this.checkIfUrlExpires();const t=new FormData;Object.keys(this.loginOutput.upload_log_map.fields).forEach((e=>{t.append(e,this.loginOutput.upload_log_map.fields[e])}));const n=`log-${S.Z.generateTimeStamp()}.txt`;t.append("key",`${this.loginOutput.upload_log_map.path}${this.userId}/${n}`),t.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent(n)}`),t.append("x-amz-meta-tn",this.userId);const r=new XMLHttpRequest,i=new Blob([e],{type:"text/plain;charset=utf-8"});t.append("file",i),yield new Promise(((e,n)=>{r.open("POST",this.loginOutput.upload_log_map.url,!0),r.send(t),r.onerror=()=>{k.Z.notifyNetworkError(),n(new Error("upload to s3 failed"))},r.onload=()=>{e()}}))}))}uploadDesign(e,t){return R(this,null,(function*(){const n=["UPDATE_DB","UPDATE_PREV","UPDATE_BOTH"];let i=l.Z.currentRoute.value.query.type,o=l.Z.currentRoute.value.query.design_id,a=l.Z.currentRoute.value.query.team_id,d=!1;const u=0!==this.assetId.length?this.assetId:S.Z.generateAssetId();if(c.Z.state.isGettingDesign)return;I.Z.setLog(`Query Info:\n      type: ${i},\n      designId: ${o},\n      teamId: ${a},\n      needAppendQuery: ${!i||!o||!a}`),i&&o&&a||(I.Z.setLog(`Append Query & Upload BOTH:\n      AssetId: ${u},\n      TeamId: ${a}`),e=2,i="design",o=u,a=this.teamId,l.Z.replace({query:Object.assign({},l.Z.currentRoute.value.query,{type:i,design_id:o,team_id:a})}),d=!0),c.Z.commit("SET_assetId",u);const{clonedPages:g}=t||{},m=null!=g?g:S.Z.deepCopy(Z.Z.getPages);I.Z.setLog(`Upload Design:\n      Type: ${e?n[e]:"UPLOAD JSON"},\n      AssetId: ${u},\n      TeamId: ${a},\n      PageNum: ${m.length},\n      SessionId: ${c.Z.state.sessionId}`);const y=m.map((e=>{const t=this.default(e,!1);for(const[r,i]of t.layers.entries())"shape"!==i.type||!i.designId&&"D"!==i.category&&"E"!==i.category?"shape"!==i.type&&(t.layers[r]=this.layerInfoFilter(i)):t.layers[r]=this.layerInfoFilter(i);t.backgroundImage.config=this.layerInfoFilter(t.backgroundImage.config),t.width=f().round(t.width),t.height=f().round(t.height),t.bleeds&&Object.keys(t.bleeds).forEach((e=>{t.bleeds[e]=f().round(t.bleeds[e])}));const n="px"===t.unit?0:p.cB;return t.physicalWidth&&(t.physicalWidth=f().round(t.physicalWidth,n)),t.physicalHeight&&(t.physicalHeight=f().round(t.physicalHeight,n)),t.physicalBleeds&&Object.keys(t.physicalBleeds).forEach((e=>{t.physicalBleeds[e]=f().round(t.physicalBleeds[e],n)})),t})),b={pages:y,groupId:c.Z.state.groupId,groupType:c.Z.state.groupType,exportIds:this.exportIds},v=new FormData;Object.keys(this.loginOutput.upload_map.fields).forEach((e=>{v.append(e,this.loginOutput.upload_map.fields[e])})),v.append("key",`${this.loginOutput.upload_map.path}asset/design/${u}/config.json`),v.append("Content-Disposition","inline"),v.append("x-amz-meta-tn",this.userId);const N=new Blob([JSON.stringify(b)],{type:"application/json"});v.has("file")?v.set("file",N):v.append("file",N),this.emitDesignUploadEvent("uploading"),yield this.makeXhrRequest("POST",this.loginOutput.upload_map.url,v).then((()=>R(this,null,(function*(){var t;if(-1!==this.designStatusTimer&&clearTimeout(this.designStatusTimer),this.designStatusTimer=window.setTimeout((()=>{this.emitDesignUploadEvent("success")}),300),void 0!==e){I.Z.setLog(`Put asset design (Type: ${n[e]})`);const i=yield c.Z.dispatch("user/putAssetDesign",{assetId:u,type:e,wait:1}),{flag:o}=i;if(0!==o)return void(0,h.h4)({group:"error",text:`${s.Z.global.t("NN0360")}`});const g=l.Z.currentRoute.value.query.path;if(d){if(g){const e=null==(t=(yield c.Z.dispatch("design/fetchDesign",{teamId:a,assetId:u})).asset_index)?void 0:t.toString();if(!e)return void(0,h.h4)({group:"error",text:`${s.Z.global.t("NN0360")}`});yield r.Z.updateDesigns(r.Z.getToken(),r.Z.getLocale(),r.Z.getUserId(),"move",e,null,g).catch((t=>R(this,null,(function*(){console.error(t),yield r.Z.updateDesigns(r.Z.getToken(),r.Z.getLocale(),r.Z.getUserId(),"delete",e,null,"2").catch((e=>{console.error(e)})),(0,h.h4)({group:"error",text:`${s.Z.global.t("NN0360")}`})})))),w.ZP.fetchDesign(a,u)}const e=Object.assign({},l.Z.currentRoute.value.query);delete e.width,delete e.height,delete e.unit,delete e.path,delete e.folderName,delete e.bleeds,l.Z.replace({query:e})}(0,h.h4)({group:"copy",text:`${s.Z.global.t("NN0357")}`})}})))).catch((e=>R(this,null,(function*(){I.Z.setLog("uploadDesign failed:"),I.Z.setLogForError(e),yield c.Z.dispatch("user/login",{token:this.token})}))))}))}uploadTmpJSON(){S.Z.generateAssetId();const e=new FormData;Object.keys(this.loginOutput.upload_map.fields).forEach((t=>{e.append(t,this.loginOutput.upload_map.fields[t])})),e.append("key",`${this.loginOutput.upload_map.path}edit/temp.json`),e.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent("temp.json")}`),e.append("x-amz-meta-tn",this.userId);const t=new XMLHttpRequest,n=c.Z.getters.getPages,r=new Blob([JSON.stringify(n)],{type:"application/json"});e.has("file")?e.set("file",r):e.append("file",r),t.open("POST",this.loginOutput.upload_map.url,!0),t.send(e),t.onerror=k.Z.notifyNetworkError,t.onload=function(){console.log(this)}}getTmpJSON(){return R(this,null,(function*(){const e=`https://template.vivipic.com/admin/${this.teamId}/edit/temp.json`,t=yield fetch(`${e}?ver=${S.Z.generateRandomString(6)}`);z.Z.reset(),t.json().then((e=>{c.Z.commit("SET_pages",e);e.some(((e,t)=>e.layers.some(((e,n)=>!!e.active&&("tmp"===e.type?x.Z.set(t,n,e.layers):x.Z.set(t,n,[e]),!0)))));z.Z.record()}))}))}uploadLayer(e,t){const n="shape"===e?"svg":e,r=null!=t?t:S.Z.generateRandomString(20),i=c.Z.getters.getCurrSelectedInfo;P.ZP.updateLayerProps(i.pageIndex,i.index,{designId:r});const o=new FormData;Object.keys(this.loginOutput.upload_map.fields).forEach((e=>{o.append(e,this.loginOutput.upload_admin_map.fields[e])})),o.append("key",`${this.loginOutput.upload_admin_map.path}${n}/${r}/config.json`),o.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent("config.json")}`),o.append("x-amz-meta-tn",this.userId);const s=new XMLHttpRequest,a=this.layerInfoFilter(S.Z.deepCopy(i.layers[0])),l=new Blob([JSON.stringify(a)],{type:"application/json"});o.has("file")?o.set("file",l):o.append("file",l),s.open("POST",this.loginOutput.upload_admin_map.url,!0),s.send(o),s.onerror=k.Z.notifyNetworkError,s.onload=()=>{const e=c.Z.getters.getCurrSelectedInfo,t=S.Z.deepCopy(c.Z.getters.getPage(e.pageIndex)),i=this.layerInfoFilter(t.layers.slice(e.index,e.index+1)[0]);t.layers=[i],t.backgroundColor="transparent",t.backgroundImage.config.srcObj={type:"",userId:"",assetId:""};const o=new FormData;Object.keys(this.loginOutput.upload_admin_map.fields).forEach((e=>{o.append(e,this.loginOutput.upload_admin_map.fields[e])})),o.append("key",`${this.loginOutput.upload_admin_map.path}${n}/${r}/page.json`),o.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent("page.json")}`),o.append("x-amz-meta-tn",this.userId);const a=new XMLHttpRequest,l=new Blob([JSON.stringify(t)],{type:"application/json"});o.append("file",l),a.open("POST",this.loginOutput.upload_admin_map.url,!0),a.send(o),a.onload=()=>{navigator.clipboard.writeText(r),_.Z.setModalInfo("上傳成功",[`Design ID: ${r}`,`Status code: ${s.status}`,"已複製 Design ID 到剪貼簿"])}}}updateLayer(e){const t="shape"===e?"svg":e,n=c.Z.getters.getCurrSelectedInfo,r=n.layers[0].designId,i=new FormData;Object.keys(this.loginOutput.upload_map.fields).forEach((e=>{i.append(e,this.loginOutput.upload_admin_map.fields[e])})),i.append("key",`${this.loginOutput.upload_admin_map.path}${t}/${r}/config.json`),i.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent("config.json")}`),i.append("x-amz-meta-tn",this.userId);const o=new XMLHttpRequest,s=this.layerInfoFilter(S.Z.deepCopy(n.layers[0])),a=new Blob([JSON.stringify(s)],{type:"application/json"});i.has("file")?i.set("file",a):i.append("file",a),o.open("POST",this.loginOutput.upload_admin_map.url,!0),o.send(i),o.onerror=k.Z.notifyNetworkError,o.onload=()=>{const e=c.Z.getters.getCurrSelectedInfo,n=S.Z.deepCopy(c.Z.getters.getPage(e.pageIndex)),i=this.layerInfoFilter(n.layers.slice(e.index,e.index+1)[0]);n.layers=[i],n.backgroundColor="transparent",n.backgroundImage.config.srcObj={type:"",userId:"",assetId:""};const s=new FormData;Object.keys(this.loginOutput.upload_admin_map.fields).forEach((e=>{s.append(e,this.loginOutput.upload_admin_map.fields[e])})),s.append("key",`${this.loginOutput.upload_admin_map.path}${t}/${r}/page.json`),s.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent("page.json")}`),s.append("x-amz-meta-tn",this.userId);const a=new XMLHttpRequest,l=new Blob([JSON.stringify(n)],{type:"application/json"});s.append("file",l),a.open("POST",this.loginOutput.upload_admin_map.url,!0),a.send(s),a.onload=()=>{navigator.clipboard.writeText(r),_.Z.setModalInfo("更新成功",[`Design ID: ${r}`,`Status code: ${o.status}`,"已複製 Design ID 到剪貼簿"])}}}uploadGroupDesign(e,t,n=!1,r){const i=e===this.GroupDesignUpdateFlag.UPLOAD?"":this.groupId,o=Z.Z.getPages;if(0===e||1===e){const r=n&&1===e?"":o.map((e=>e.designId)).join(",");if(t&&!Z.Z.isAllPageSizeEqual())return void _.Z.setModalInfo("上傳 or 更新詳情頁失敗",["Page 寬度不一致"]);c.Z.dispatch("user/groupDesign",{token:this.token,update:e,list:r,group_id:i,ecomm:t})}if(2===e){const t="Idontknow",n=`${t}:${r}`;c.Z.dispatch("user/groupDesign",{token:this.token,update:e,group_id:i,cover:n}).then((()=>{}))}}uploadTemplate(e){var t;const n=S.Z.generateRandomString(20),r=(c.Z.getters.getCurrSelectedInfo,Z.Z.currFocusPageIndex),i=c.Z.getters.getPage(r),o=null!=(t=i.designId)?t:"";c.Z.commit("SET_pageDesignId",{pageIndex:r,designId:n});const s=this.default(i);s.parentId=o;for(const[c,u]of s.layers.entries())"shape"!==u.type||!u.designId&&"D"!==u.category&&"E"!==u.category?"shape"!==u.type&&(s.layers[c]=this.layerInfoFilter(u)):s.layers[c]=this.layerInfoFilter(u);s.width=parseInt(s.width.toString(),10),s.height=parseInt(s.height.toString(),10);const a=new FormData;Object.keys(this.loginOutput.upload_admin_map.fields).forEach((e=>{a.append(e,this.loginOutput.upload_admin_map.fields[e])})),a.append("key",`${this.loginOutput.upload_admin_map.path}template/${n}/config.json`),a.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent("config.json")}`),a.append("x-amz-meta-tn",e?`${this.userId},bypass`:this.userId);const l=new XMLHttpRequest,d=new Blob([JSON.stringify(s)],{type:"application/json"});a.has("file")?a.set("file",d):a.append("file",d),l.open("POST",this.loginOutput.upload_admin_map.url,!0),l.send(a),_.Z.setIsPending(!0),_.Z.setModalInfo("上傳中",[]),l.onerror=k.Z.notifyNetworkError,l.onload=()=>{navigator.clipboard.writeText(n),_.Z.setIsPending(!1),_.Z.setModalInfo("上傳成功",[`Design ID: ${n}`,`Status code: ${l.status}`,"已複製 Design ID 到剪貼簿"])}}updateTemplate(){return R(this,null,(function*(){const e=Z.Z.currFocusPageIndex,t=c.Z.getters.getPage(e).designId;if(this.isOutsourcer){const e=yield i.Z.getDesignInfo(this.token,"template",t,"select",JSON.stringify({})),{creator_id:n}=e.data;if(n!==this.userId)return void _.Z.setModalInfo("更新失敗",["無法更新他人模板"])}const n=this.default(c.Z.getters.getPage(e));for(const[i,a]of n.layers.entries())"shape"!==a.type||!a.designId&&"D"!==a.category&&"E"!==a.category?"shape"!==a.type&&(n.layers[i]=this.layerInfoFilter(a)):n.layers[i]=this.layerInfoFilter(a);n.width=parseInt(n.width.toString(),10),n.height=parseInt(n.height.toString(),10);const r=new FormData;Object.keys(this.loginOutput.upload_map.fields).forEach((e=>{r.append(e,this.loginOutput.upload_admin_map.fields[e])})),r.append("key",`${this.loginOutput.upload_admin_map.path}template/${t}/config.json`),r.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent("config.json")}`),r.append("x-amz-meta-tn",this.userId);const o=new XMLHttpRequest,s=new Blob([JSON.stringify(n)],{type:"application/json"});r.has("file")?r.set("file",s):r.append("file",s),o.open("POST",this.loginOutput.upload_admin_map.url,!0),o.send(r),_.Z.setIsPending(!0),_.Z.setModalInfo("更新模板中",[]),o.onerror=k.Z.notifyNetworkError,o.onload=()=>{_.Z.setIsPending(!1);const e=o.status;e>=200&&e<300?_.Z.setModalInfo("更新成功",[`Design ID: ${t}`,`Status code: ${o.status}`]):e>=400&&e<500&&(_.Z.setModalInfo("更新失敗",[`Design ID: ${t}`,`Status code: ${o.status}`,`Status Text: ${o.statusText}`,`Response Text: ${o.responseText}`,"已複製錯誤訊息至剪貼簿，麻煩將錯誤訊息貼至群組"]),navigator.clipboard.writeText([`Design ID: ${t}`,`Status code: ${o.status}`,`Status Text: ${o.statusText}`,`Response Text: ${o.responseText}`].join("\n")))}}))}checkIfUrlExpires(){return R(this,null,(function*(){const e=new Date(Date.parse(this.loginOutput.upload_log_map.expire+"Z"));new Date>=e&&(yield c.Z.dispatch("user/login",{token:c.Z.getters["user/getToken"]}))}))}default(e,t=!0){e=t?S.Z.deepCopy(e):e;const n=e=>{e.moved=!1,e.shown=!1,e.dragging=!1,e.active=!1};if(e.id&&delete e.id,e.backgroundImage.config.src){const t=e.backgroundImage.config.src,n=u.Z.getSrcType(e.backgroundImage.config.src);e.backgroundImage.config.srcObj={type:n,userId:u.Z.getUserId(t,n),assetId:u.Z.getAssetId(t,n),brandId:u.Z.getBrandId(t,n)},delete e.backgroundImage.config.src}e.designId||S.Z.objHasOwnProperty(e,"modified")&&delete e.modified;for(const[r,i]of e.layers.entries()){switch(i.type){case"image":i.imgControl=!1;break;case"tmp":e.layers.splice(r,1,...x.Z.mapLayersToPage(i.layers,i))}n(i)}return e.appVer_origin||(e.appVer_origin=e.appVer||(new Date).toISOString()),e.jsonVer_origin||(e.jsonVer_origin=e.jsonVer||a.Z),e.appVer=(new Date).toISOString(),e.jsonVer=a.Z,e}getDesign(e,t){return R(this,arguments,(function*(e,t,n={}){var r,i;let a="",d="";const u=null!=(r=t.designId)?r:"",g=null!=(i=t.teamId)?i:this.teamId;switch(c.Z.commit("SET_isGettingDesign",!0),I.Z.setLog(`Get Design\n      Type: ${e}\n      DesignId: ${u}\n      TeamId: ${g}`),e){case"template":case"text":a="template"===e?"config.json":"page.json",d=`https://template.vivipic.com/${e}/${u}/${a}?ver=${S.Z.generateRandomString(6)}`;break;case"design":if(!this.isLogin)return this.getDesignInfo.flag=1,this.getDesignInfo.id=u,this.getDesignInfo.teamId=g,void(this.getDesignInfo.type="design");if(!t.fetchTarget)throw new Error("design url is not provided");d=`${t.fetchTarget}&ver=${S.Z.generateRandomString(6)}`;break;case"product-page-template":return o.Z.getList({type:"group",groupId:u,cache:!0}).then((e=>{const{content:t}=e.data.data;return new Promise((e=>{b.ZP.addTemplateToRecentlyUsedPure(t[0].list[0].id).then((()=>e(t)))}))})).then((e=>(c.Z.commit("SET_groupType",1),b.ZP.addGroupTemplate({id:"",type:6,ver:0,content_ids:e[0].list,group_id:u})))).then((()=>{c.Z.commit("SET_assetId",S.Z.generateAssetId());const e=f().omit(l.Z.currentRoute.value.query,["width","height"]);e.type="design",e.design_id=q.assetId,e.team_id=q.teamId,l.Z.replace({query:e}).then((()=>{q.uploadDesign(q.PutAssetDesignType.UPDATE_BOTH)})),T.Z.refreshTemplateState(),z.Z.reset(),c.Z.commit("SET_isGettingDesign",!1)}));case"new-design-template":d=`https://template.vivipic.com/template/${u}/config.json?ver=${S.Z.generateRandomString(6)}`;break}yield fetch(d).then((t=>{if(t.ok)return t.json().then((t=>R(this,null,(function*(){switch(e){case"template":b.ZP.addTemplate(t),I.Z.setLog("Successfully get template design");break;case"text":yield C.Z.addComputableInfo(t.layers[0]),c.Z.commit("SET_pages",[t]),I.Z.setLog("Successfully get text design");break;case"design":{const e=S.Z.deepCopy(l.Z.currentRoute.value.query);if(e.team_id===this.teamId)c.Z.commit("SET_assetId",u);else{const t=S.Z.generateAssetId();c.Z.commit("SET_assetId",t),l.Z.replace({query:Object.assign(e,{design_id:t,team_id:this.teamId})})}l.Z.replace({query:Object.assign(e,{export_ids:t.exportIds})}),P.ZP.setAutoResizeNeededForLayersInPages(t.pages,!0),c.Z.commit("SET_pages",Object.assign(t,{loadDesign:!0})),z.Z.reset(),c.Z.commit("file/SET_setLayersDone"),I.Z.setLog(`Successfully get asset design (pageNum: ${t.pages.length})`),T.Z.refreshTemplateState();break}case"new-design-template":w.ZP.newDesignWithTemplate(Number(n.width),Number(n.height),t,u,n.unit,n.bleeds),I.Z.setLog("Successfully get new design template");break}})))).then((()=>{c.Z.commit("SET_isGettingDesign",!1);const e=document.querySelector(".editor-view");N.Z&&(Z.Z.fitPage(),S.Z.scrollToCenter(e,!1))}));console.log("failed to get design"),I.Z.setLog("Fail to get design"),T.Z.refreshTemplateState(),l.Z.replace({query:Object.assign({})}),c.Z.commit("SET_isGettingDesign",!1)})).catch((t=>{l.Z.replace({query:Object.assign({})}),c.Z.commit("SET_isGettingDesign",!1),"design"===e&&((0,h.h4)({group:"error",text:s.Z.global.t("SKT0019")}),c.Z.commit("SET_assetId",""),c.Z.commit("file/SET_setLayersDone"),T.Z.refreshTemplateState()),I.Z.setLog(`Fetch error: ${t}`),console.error("fetch failed",t)}))}))}getExport(e){return R(this,null,(function*(){const t=e.get("design_id"),n=e.get("team_id")||"",r=e.get("background")||"0",i=e.get("index")?`_${e.get("index")}`:"",o="0"===r?`page${i}.json`:`page_trans${i}.json`;if(![t,n].every(Boolean))return;const s=yield fetch(`https://template.vivipic.com/admin/${n}/export/${t}/${o}`);s.json().then((e=>R(this,null,(function*(){const t=Array.isArray(e)?e:e.pages;c.Z.commit("SET_pages",t)}))))}))}removeComputableInfo(e){if("shape"===e.type)switch(e.category){case"D":delete e.markerTransArray,delete e.markerWidth,delete e.trimWidth,delete e.trimOffset,delete e.styleArray,delete e.svg,delete e.pDiff,delete e.pSize,delete e.cSize,delete e.vSize,delete e.className;break;case"E":delete e.styleArray,delete e.svg,delete e.pDiff,delete e.pSize,delete e.cSize,delete e.className;break}}styleFilter(e,t="general"){const n={x:e.x,y:e.y,width:e.width,height:e.height,initWidth:e.initWidth,initHeight:e.initHeight,scale:e.scale,scaleX:e.scaleX,scaleY:e.scaleY,rotate:e.rotate,zindex:e.zindex,opacity:e.opacity,horizontalFlip:e.horizontalFlip,verticalFlip:e.verticalFlip};switch(t){case"image":return delete e.shadow.old,F(j(F({},n),{imgX:e.imgX,imgY:e.imgY,imgWidth:e.imgWidth,imgHeight:e.imgHeight,shadow:e.shadow}),Object.prototype.hasOwnProperty.call(e,"adjust")&&{adjust:F({},e.adjust)});case"text":return j(F({},n),{writingMode:e.writingMode,align:e.align,textEffect:e.textEffect,textBg:e.textBg,textFill:e.textFill,textShape:e.textShape,type:e.type,userId:e.userId});case"frame":return F(F(F({},n),Object.prototype.hasOwnProperty.call(e,"adjust")&&{adjust:F({},e.adjust)}),Object.prototype.hasOwnProperty.call(e,"shadow")&&{shadow:F({},e.shadow)});case"shape":return j(F({},n),{blendMode:e.blendMode});default:return n}}layerInfoFilter(e){const{type:t,jsonVer:n,jsonVer_origin:r,locked:i}=e,o={type:t,locked:i,jsonVer:n,jsonVer_origin:r};switch(e.type){case"image":{const t=e,{srcObj:n,styles:r,trace:i,overlay:s}=t;return j(F({},o),{srcObj:n,trace:i,overlay:s,styles:this.styleFilter(r,"image")})}case"shape":{const t=e,{designId:n,ratio:r,color:i,styles:s,category:a}=t;switch(t.category){case"D":return j(F({},o),{color:i,ratio:r,category:a,designId:n,size:t.size,markerId:t.markerId,dasharray:t.dasharray,linecap:t.linecap,point:t.point,styles:this.styleFilter(s)});case"E":return s.scale=1,s.initWidth=s.width,s.initHeight=s.height,t.vSize=[s.initWidth,s.initHeight],j(F({},o),{color:i,ratio:r,category:a,designId:n,size:t.size,scaleType:t.scaleType,shapeType:t.shapeType,vSize:t.vSize,filled:t.filled,styles:this.styleFilter(s)});default:return n?j(F({},o),{category:a,designId:n,ratio:r,color:i,pDiff:t.pDiff,styles:this.styleFilter(s)}):F(F({},o),t)}}case"frame":{const t=e,{designId:n,clips:r,decoration:i,decorationTop:s,styles:a,blendLayers:l}=t;return j(F(F(F(j(F({},o),{designId:n,clips:[...r.map((e=>{const{isFrameImg:t}=e;return j(F({},this.layerInfoFilter(e)),{isFrameImg:t,styles:this.styleFilter(e.styles,"image")})}))]}),i&&{decoration:{color:i.color}}),s&&{decorationTop:{color:s.color}}),l&&{blendLayers:l.map((function(e){return{color:e.color}}))}),{styles:this.styleFilter(a,"frame")})}case"text":{const t=e,{widthLimit:n,isEdited:r,paragraphs:i,styles:s,isCompensated:a,spanDataList:l}=t;return j(F({},o),{widthLimit:n,isEdited:r,isCompensated:a,paragraphs:i,spanDataList:l,styles:this.styleFilter(s,"text")})}case"group":{const t=e,{layers:n,styles:r,designId:i,db:s}=t,a=n.map((e=>this.layerInfoFilter(e)));return j(F({},o),{designId:i,db:s,layers:a,styles:this.styleFilter(r)})}case"tmp":{const t=e,{layers:n,styles:r}=t,i=n.map((e=>this.layerInfoFilter(e)));return j(F({},o),{type:"group",layers:i,styles:this.styleFilter(r)})}}}uploadExportJSON(e,t){return new Promise((n=>{const r=new FormData;Object.keys(this.loginOutput.upload_map.fields).forEach((e=>{r.append(e,this.loginOutput.upload_map.fields[e])})),r.append("key",`${this.loginOutput.upload_map.path}export/${e}/page.json`),r.append("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent("page.json")}`),r.append("x-amz-meta-tn",this.userId);const i=new XMLHttpRequest;I.Z.setLog(`Export Design:\n        ExportId: ${e},\n        ExportIds: ${this.exportIds},\n        UserId: ${this.userId}\n        Url: ${this.loginOutput.upload_map.path}export/${e}/page.json`);const o=this.getPageJson(t),s={pages:o,groupId:c.Z.state.groupId,groupType:c.Z.state.groupType},a=new Blob([JSON.stringify(s)],{type:"application/json"});r.has("file")?r.set("file",a):r.append("file",a),i.onloadend=n,i.open("POST",this.loginOutput.upload_map.url,!0),i.send(r)}))}getPageJson(e){const t=S.Z.deepCopy(e||c.Z.getters.getPages).map((e=>{const t=this.default(e);for(const[r,i]of t.layers.entries())"shape"!==i.type||!i.designId&&"D"!==i.category&&"E"!==i.category?"shape"!==i.type&&(t.layers[r]=this.layerInfoFilter(i)):t.layers[r]=this.layerInfoFilter(i);t.backgroundImage.config.imgControl=!1,t.width=f().round(t.width),t.height=f().round(t.height),Object.keys(t.bleeds).forEach((e=>{t.bleeds[e]=f().round(t.bleeds[e])}));const n="px"===t.unit?0:p.cB;return t.physicalWidth=f().round(t.physicalWidth,n),t.physicalHeight=f().round(t.physicalHeight,n),Object.keys(t.physicalBleeds).forEach((e=>{t.physicalBleeds[e]=f().round(t.physicalBleeds[e],n)})),t}));return t}makeXhrRequest(e,t,n){return new Promise((function(r,i){const o=new XMLHttpRequest;o.open(e,t,!0),o.onload=function(){this.status>=200&&this.status<300?r(o.response):i(new Error(`${this.status}: ${this.statusText}`))},o.onerror=function(){i(new Error(`${this.status}: ${this.statusText}`))},o.send(n)}))}polling(e,t,n=this.DEFAULT_POLLING_RETRY_LIMIT,r=0){const i=window.setInterval((()=>{if(r===n)return clearInterval(i),void console.log("Polling failed");r+=1,fetch(`${e}?ver=${S.Z.generateRandomString(6)}`).then((e=>{200===e.status&&e.json().then((e=>{t(e)&&clearInterval(i)}))}))}),2e3)}resetControlStates(e){for(const t of e)for(const e of t.layers)switch(e.type){case"text":e.editing=!1;break;case"tmp":case"group":for(const t of e.layers)"text"===t.type&&(t.editing=!1);break}}};let G=V;B(G,"PutAssetDesignType",H),B(G,"GroupDesignUpdateFlag",U),B(G,"GetDesignType",W);const q=new G;t["Z"]=q},56556:function(e,t,n){"use strict";var r=n(89497),i=n(75231);class o{reassignZindex(e){const t=r.Z.getters.getLayers(e);t.forEach(((t,n)=>{i.ZP.updateLayerStyles(e,n,{zindex:n+1}),"tmp"===t.type&&r.Z.commit("UPDATE_tmpLayersZindex")}))}assignTemplateZidx(e){return e.forEach(((e,t)=>{e.styles.zindex=t+1})),e}}const s=new o;t["Z"]=s},1840:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(29651),i=n(819);const o={class:"animation"},s=["src","width","height"];function a(e,t,a,l,c,d){return(0,r.wg)(),(0,r.iD)("div",o,[e.isJSON?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"lottie",style:(0,i.j5)(e.lottieStyle),ref:"lavContainer"},null,4)):(0,r.kq)("",!0),e.isMp4?((0,r.wg)(),(0,r.iD)("video",{key:1,class:"video",src:n(47188)(`./${e.mp4FileName}`),width:e.width,height:e.height,type:"video/mp4",autoplay:"",muted:"",loop:"",playsinline:""},null,8,s)):(0,r.kq)("",!0)])}var l=n(36830),c=n.n(l),d=n(66449),u=n.n(d),g=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),p=(0,r.aZ)({props:{path:{type:String,required:!0},width:{type:Number,default:-1},height:{type:Number,default:-1},lottieName:{type:String},speed:{type:Number,default:1},loop:{type:Boolean,default:!0},autoPlay:{type:Boolean,default:!0},loopDelayMin:{type:Number,default:0},loopDelayMax:{type:Number,default:0}},emits:["AnimControl"],data(){return{rendererSettings:{scaleMode:"centerCrop",clearCanvas:!0,progressiveLoad:!1,hideOnTransparent:!0},anim:null}},computed:{isJSON(){return this.path.endsWith(".json")},isMp4(){return this.path.endsWith(".mp4")},lottieStyle(){return{width:-1!==this.width?`${this.width}px`:"100%",height:-1!==this.height?`${this.height}px`:"100%",overflow:"hidden",margin:"0 auto"}},mp4FileName(){const e=this.path.split("/"),t=e.length;return`${e[t-2]}/${e[t-1]}`}},mounted(){this.init()},unmounted(){this.anim&&this.anim.destroy()},methods:{loadJsonData(e){return g(this,null,(function*(){return e.startsWith("@/")?yield n(47188)(`./${this.mp4FileName}`):yield c().get(e).then((e=>e.data))}))},init(){return g(this,null,(function*(){if(!this.isJSON)return;const e=yield this.loadJsonData(this.path);this.anim&&this.anim.destroy(),this.anim=u().loadAnimation({container:this.$refs.lavContainer,renderer:"svg",loop:this.loop,autoplay:this.autoPlay,animationData:e,rendererSettings:this.rendererSettings,assetsPath:`/lottie/${this.$i18n.locale}/${this.lottieName}/images/`}),this.$emit("AnimControl",this.anim),this.anim.setSpeed(this.speed),this.loopDelayMin>0&&(this.anim.loop=!1,this.anim.autoplay=!1,this.executeLoop())}))},getRandomInt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},executeLoop(){this.anim.play(),setTimeout((()=>{this.anim.stop(),this.executeLoop()}),this.getRandomInt(this.loopDelayMin,0===this.loopDelayMax?this.loopDelayMin:this.loopDelayMax))}},watch:{src:function(){this.init()}}}),h=n(53372);const m=(0,h.Z)(p,[["render",a],["__file","Animation.vue"]]);var y=m},18941:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(29651),i=n(819);const o={key:0,class:"avatar__shortname text-white"};function s(e,t,n,s,a,l){return(0,r.wg)(),(0,r.iD)("div",{class:"avatar",style:(0,i.j5)(e.avatarStyle())},[e.hasAvatar?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",o,(0,i.zw)(e.shortName),1))],4)}var a=n(38058),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))g.call(t,n)&&h(e,n,t[n]);if(u)for(var n of u(t))p.call(t,n)&&h(e,n,t[n]);return e},y=(e,t)=>c(e,d(t)),f=(0,r.aZ)({emits:[],props:{textSize:{type:Number,default:16},avatarSize:{type:Number,default:30},fitWidth:{type:Boolean,default:!1},fitHeight:{type:Boolean,default:!1}},data(){return{}},computed:m(m({},(0,a.rn)("user",["shortName","uname"])),(0,a.Se)({avatar:"user/getAvatar",hasAvatar:"user/hasAvatar"})),methods:{avatarStyle(){return y(m({},this.avatar.prev_2x&&{backgroundImage:`url(${this.avatar.prev_2x})`}),{fontSize:`${this.textSize}px`,width:this.fitWidth?"100%":`${this.avatarSize}px`,height:this.fitHeight?"100%":`${this.avatarSize}px`})}}}),b=n(53372);const v=(0,b.Z)(f,[["render",s],["__scopeId","data-v-e17ed58e"],["__file","Avatar.vue"]]);var w=v},35359:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ge}});var r=n(29651),i=n(819),o=n(41463);const s=e=>((0,r.dD)("data-v-5e1225c4"),e=e(),(0,r.Cn)(),e),a={key:0},l={class:"color-picker__mobile__hex"},c=s((()=>(0,r._)("span",{class:"body-1"},"Hex",-1))),d={class:"color-picker__mobile__input"},u={key:1,class:"px-10"},g={class:"color-picker__hex"},p=s((()=>(0,r._)("span",{class:"body-1"},"Hex",-1))),h={class:"color-picker__input"};function m(e,t,n,s,m,y){const f=(0,r.up)("chrome-picker"),b=(0,r.up)("svg-icon"),v=(0,r.Q2)("hint");return(0,r.wg)(),(0,r.iD)("div",{class:"color-picker",ref:"colorPicker",style:(0,i.j5)({"box-shadow":e.isMobile?"none":"0 0 2px rgba(0, 0, 0, 0.3), 0 4px 8px rgba(0, 0, 0, 0.3)"})},[e.$isTouchDevice()?((0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",l,[c,(0,r._)("div",d,[(0,r._)("div",{style:(0,i.j5)({"background-color":e.convertedHex})},null,4),(0,r.wy)((0,r._)("input",{ref:"input",type:"text",spellcheck:"false","onUpdate:modelValue":t[0]||(t[0]=t=>e.color=t),maxlength:"7"},null,512),[[o.nr,e.color]])])])])):(0,r.kq)("",!0),(0,r.Wm)(f,{class:"color-picker__picker",value:e.convertedHex,onInput:e.updateHex,onPaste:e.onPaste,onMouseup:e.onmouseup,disableFields:!0,disableAlpha:!0,isMobile:e.isMobile,fullWidth:e.isMobile,aspectRatio:e.aspectRatio},null,8,["value","onInput","onPaste","onMouseup","isMobile","fullWidth","aspectRatio"]),e.$isTouchDevice()?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",g,[(0,r.wy)((0,r.Wm)(b,{class:"pointer",iconName:"eye-dropper",iconWidth:"20px",iconColor:"gray-2",onClick:e.eyeDropper},null,8,["onClick"]),[[v,e.$t("NN0407")]]),p,(0,r._)("div",h,[(0,r._)("div",{style:(0,i.j5)({"background-color":e.convertedHex})},null,4),(0,r.wy)((0,r._)("input",{ref:"input",type:"text",spellcheck:"false","onUpdate:modelValue":t[1]||(t[1]=t=>e.color=t),maxlength:"7"},null,512),[[o.nr,e.color]])])])]))],4)}const y={class:"vc-chrome-controls"},f=["aria-label"],b={class:"vc-chrome-sliders"},v={class:"vc-chrome-hue-wrap"},w={key:0,class:"vc-chrome-alpha-wrap"},N={key:0,class:"vc-chrome-fields-wrap"},S={class:"vc-chrome-fields"},x={class:"vc-chrome-field"},P={class:"vc-chrome-fields"},I={class:"vc-chrome-field"},_={class:"vc-chrome-field"},k={class:"vc-chrome-field"},Z={key:0,class:"vc-chrome-field"},C={class:"vc-chrome-fields"},z={class:"vc-chrome-field"},T={class:"vc-chrome-field"},L={class:"vc-chrome-field"},E={key:0,class:"vc-chrome-field"},D={class:"vc-chrome-toggle-icon"},O=(0,r._)("path",{fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"},null,-1),M=[O],A={class:"vc-chrome-toggle-icon-highlight"};function $(e,t,n,s,a,l){const c=(0,r.up)("saturation"),d=(0,r.up)("checkboard"),u=(0,r.up)("hue"),g=(0,r.up)("alpha"),p=(0,r.up)("ed-in");return(0,r.wg)(),(0,r.iD)("div",{role:"application","aria-label":"Chrome color picker",class:(0,i.C_)(["vc-chrome",e.disableAlpha?"vc-chrome__disable-alpha":""]),style:(0,i.j5)(e.pickerStyles)},[(0,r._)("div",{class:"vc-chrome-saturation-wrap",style:(0,i.j5)(e.saturationWrapStyles)},[(0,r.Wm)(c,{value:e.colors,onChange:e.childChange},null,8,["value","onChange"])],4),(0,r._)("div",{class:"vc-chrome-body",style:(0,i.j5)(e.bodyPadding)},[(0,r._)("div",y,[(0,r._)("div",{class:"vc-chrome-color-wrap",style:(0,i.j5)(e.colorWrapStyles)},[e.isMobile?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:0,"aria-label":`current color is ${e.colors.hex}`,class:"vc-chrome-active-color",style:(0,i.j5)({background:e.activeColor})},null,12,f)),e.disableAlpha?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(d,{key:1}))],4),(0,r._)("div",b,[(0,r._)("div",v,[(0,r.Wm)(u,{value:e.colors,onChange:e.childChange},null,8,["value","onChange"])]),e.disableAlpha?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",w,[(0,r.Wm)(g,{value:e.colors,onChange:e.childChange},null,8,["value","onChange"])]))])]),e.disableFields?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",N,[(0,r.wy)((0,r._)("div",S,[(0,r._)("div",x,[e.hasAlpha?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(p,{key:0,label:"hex",value:e.colors.hex,onChange:e.inputChange},null,8,["value","onChange"])),e.hasAlpha?((0,r.wg)(),(0,r.j4)(p,{key:1,label:"hex",value:e.colors.hex8,onChange:e.inputChange},null,8,["value","onChange"])):(0,r.kq)("",!0)])],512),[[o.F8,0===e.fieldsIndex]]),(0,r.wy)((0,r._)("div",P,[(0,r._)("div",I,[(0,r.Wm)(p,{label:"r",value:e.colors.rgba.r,onChange:e.inputChange},null,8,["value","onChange"])]),(0,r._)("div",_,[(0,r.Wm)(p,{label:"g",value:e.colors.rgba.g,onChange:e.inputChange},null,8,["value","onChange"])]),(0,r._)("div",k,[(0,r.Wm)(p,{label:"b",value:e.colors.rgba.b,onChange:e.inputChange},null,8,["value","onChange"])]),e.disableAlpha?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Z,[(0,r.Wm)(p,{label:"a",value:e.colors.a,"arrow-offset":.01,max:1,onChange:e.inputChange},null,8,["value","arrow-offset","onChange"])]))],512),[[o.F8,1===e.fieldsIndex]]),(0,r.wy)((0,r._)("div",C,[(0,r._)("div",z,[(0,r.Wm)(p,{label:"h",value:e.hsl.h,onChange:e.inputChange},null,8,["value","onChange"])]),(0,r._)("div",T,[(0,r.Wm)(p,{label:"s",value:e.hsl.s,onChange:e.inputChange},null,8,["value","onChange"])]),(0,r._)("div",L,[(0,r.Wm)(p,{label:"l",value:e.hsl.l,onChange:e.inputChange},null,8,["value","onChange"])]),e.disableAlpha?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",E,[(0,r.Wm)(p,{label:"a",value:e.colors.a,"arrow-offset":.01,max:1,onChange:e.inputChange},null,8,["value","arrow-offset","onChange"])]))],512),[[o.F8,2===e.fieldsIndex]]),(0,r._)("div",{class:"vc-chrome-toggle-btn",role:"button","aria-label":"Change another color definition",onClick:t[3]||(t[3]=(...t)=>e.toggleViews&&e.toggleViews(...t))},[(0,r._)("div",D,[((0,r.wg)(),(0,r.iD)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24",onMouseover:t[0]||(t[0]=(...t)=>e.showHighlight&&e.showHighlight(...t)),onMouseenter:t[1]||(t[1]=(...t)=>e.showHighlight&&e.showHighlight(...t)),onMouseout:t[2]||(t[2]=(...t)=>e.hideHighlight&&e.hideHighlight(...t))},M,32))]),(0,r.wy)((0,r._)("div",A,null,512),[[o.F8,e.highlight]])])]))],4)],6)}const F={class:"vc-editable-input"},j=["aria-labelledby"],B=["for","id"],R={class:"vc-input__desc"};function H(e,t,n,s,a,l){return(0,r.wg)(),(0,r.iD)("div",F,[(0,r.wy)((0,r._)("input",{"aria-labelledby":e.labelId,class:"vc-input__input","onUpdate:modelValue":t[0]||(t[0]=t=>e.val=t),onKeydown:t[1]||(t[1]=(...t)=>e.handleKeyDown&&e.handleKeyDown(...t)),onInput:t[2]||(t[2]=(...t)=>e.update&&e.update(...t)),ref:"input"},null,40,j),[[o.nr,e.val]]),(0,r._)("span",{for:e.label,class:"vc-input__label",id:e.labelId},(0,i.zw)(e.labelSpanText),9,B),(0,r._)("span",R,(0,i.zw)(e.desc),1)])}var U=(0,r.aZ)({name:"editableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.value},set(e){if(!(void 0!==this.max&&+e>this.max))return e;this.$refs.input.value=this.max}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(e){this.handleChange(e.target.value)},handleChange(e){const t={};t[this.label]=e,(void 0===t.hex&&void 0===t["#"]||e.length>5)&&this.$emit("change",t)},handleKeyDown(e){let t=this.val;const n=Number(t);if(n){const r=this.arrowOffset||1;38===e.keyCode&&(t=n+r,this.handleChange(t),e.preventDefault()),40===e.keyCode&&(t=n-r,this.handleChange(t),e.preventDefault())}}}}),W=n(53372);const V=(0,W.Z)(U,[["render",H],["__file","EditableInput.vue"]]);var G=V;const q=(0,r._)("div",{class:"vc-saturation--white"},null,-1),K=(0,r._)("div",{class:"vc-saturation--black"},null,-1),Y=(0,r._)("div",{class:"vc-saturation-circle"},null,-1),X=[Y];function Q(e,t,n,o,s,a){return(0,r.wg)(),(0,r.iD)("div",{class:"vc-saturation",style:(0,i.j5)({background:e.bgColor}),ref:"container",onMousedown:t[0]||(t[0]=(...t)=>e.handleMouseDown&&e.handleMouseDown(...t)),onTouchmove:t[1]||(t[1]=(...t)=>e.handleChange&&e.handleChange(...t)),onTouchstart:t[2]||(t[2]=(...t)=>e.handleChange&&e.handleChange(...t))},[q,K,(0,r._)("div",{class:"vc-saturation-pointer",style:(0,i.j5)({top:e.pointerTop,left:e.pointerLeft})},X,4)],36)}var J=n(60410),ee=(0,r.aZ)({name:"Saturation",props:{value:Object},computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return-100*this.colors.hsv.v+1+100+"%"},pointerLeft(){return 100*this.colors.hsv.s+"%"}},methods:{throttle:(0,J.throttle)(((e,t)=>{e(t)}),20,{leading:!0,trailing:!1}),handleChange(e,t){!t&&e.preventDefault();const n=this.$refs.container;if(!n)return;const r=n.clientWidth,i=n.clientHeight,o=n.getBoundingClientRect().left+window.pageXOffset,s=n.getBoundingClientRect().top+window.pageYOffset,a=e.pageX||(e.touches?e.touches[0].pageX:0),l=e.pageY||(e.touches?e.touches[0].pageY:0),c=(0,J.clamp)(a-o,0,r),d=(0,J.clamp)(l-s,0,i),u=c/r,g=(0,J.clamp)(-d/i+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:u,v:g,a:this.colors.hsv.a,source:"hsva"})},onChange(e){this.$emit("change",e)},handleMouseDown(e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}});const te=(0,W.Z)(ee,[["render",Q],["__file","Saturation.vue"]]);var ne=te;const re=["aria-valuenow"],ie=(0,r._)("div",{class:"vc-hue-picker"},null,-1),oe=[ie];function se(e,t,n,o,s,a){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["vc-hue",e.directionClass])},[(0,r._)("div",{class:"vc-hue-container",role:"slider","aria-valuenow":e.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",ref:"container",onMousedown:t[0]||(t[0]=(...t)=>e.handleMouseDown&&e.handleMouseDown(...t)),onTouchmove:t[1]||(t[1]=(...t)=>e.handleChange&&e.handleChange(...t)),onTouchstart:t[2]||(t[2]=(...t)=>e.handleChange&&e.handleChange(...t))},[(0,r._)("div",{class:"vc-hue-pointer",style:(0,i.j5)({top:e.pointerTop,left:e.pointerLeft}),role:"presentation"},oe,4)],40,re)],2)}var ae=(0,r.aZ)({name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){const e=this.value.hsl.h;return 0!==e&&e-this.oldHue>0&&(this.pullDirection="right"),0!==e&&e-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=e,this.value},directionClass(){return{"vc-hue--horizontal":"horizontal"===this.direction,"vc-hue--vertical":"vertical"===this.direction}},pointerTop(){return"vertical"===this.direction?0===this.colors.hsl.h&&"right"===this.pullDirection?0:-100*this.colors.hsl.h/360+100+"%":0},pointerLeft(){return"vertical"===this.direction?0:0===this.colors.hsl.h&&"right"===this.pullDirection?"100%":100*this.colors.hsl.h/360+"%"}},methods:{handleChange(e,t){!t&&e.preventDefault();const n=this.$refs.container;if(!n)return;const r=n.clientWidth,i=n.clientHeight,o=n.getBoundingClientRect().left+window.pageXOffset,s=n.getBoundingClientRect().top+window.pageYOffset,a=e.pageX||(e.touches?e.touches[0].pageX:0),l=e.pageY||(e.touches?e.touches[0].pageY:0),c=a-o,d=l-s;let u,g;"vertical"===this.direction?(d<0?u=360:d>i?u=0:(g=-100*d/i+100,u=360*g/100),this.colors.hsl.h!==u&&this.$emit("change",{h:u,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(c<0?u=0:c>r?u=360:(g=100*c/r,u=360*g/100),this.colors.hsl.h!==u&&this.$emit("change",{h:u,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}});const le=(0,W.Z)(ae,[["render",se],["__file","Hue.vue"]]);var ce=le;const de={class:"vc-alpha"},ue={class:"vc-alpha-checkboard-wrap"},ge=(0,r._)("div",{class:"vc-alpha-picker"},null,-1),pe=[ge];function he(e,t,n,o,s,a){const l=(0,r.up)("checkboard");return(0,r.wg)(),(0,r.iD)("div",de,[(0,r._)("div",ue,[(0,r.Wm)(l)]),(0,r._)("div",{class:"vc-alpha-gradient",style:(0,i.j5)({background:e.gradientColor})},null,4),(0,r._)("div",{class:"vc-alpha-container",ref:"container",onMousedown:t[0]||(t[0]=(...t)=>e.handleMouseDown&&e.handleMouseDown(...t)),onTouchmove:t[1]||(t[1]=(...t)=>e.handleChange&&e.handleChange(...t)),onTouchstart:t[2]||(t[2]=(...t)=>e.handleChange&&e.handleChange(...t))},[(0,r._)("div",{class:"vc-alpha-pointer",style:(0,i.j5)({left:100*e.colors.a+"%"})},pe,4)],544)])}function me(e,t,n,o,s,a){return(0,r.wg)(),(0,r.iD)("div",{class:"vc-checkerboard",style:(0,i.j5)(e.bgStyle)},null,4)}const ye={};var fe=(0,r.aZ)({name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":"url("+ve(this.white,this.grey,this.size)+")"}}}});function be(e,t,n){if("undefined"===typeof document)return null;const r=document.createElement("canvas");r.width=r.height=2*n;const i=r.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,r.width,r.height),i.fillStyle=t,i.fillRect(0,0,n,n),i.translate(n,n),i.fillRect(0,0,n,n),r.toDataURL()):null}function ve(e,t,n){const r=e+","+t+","+n;if(ye[r])return ye[r];{const i=be(e,t,n);return ye[r]=i,i}}const we=(0,W.Z)(fe,[["render",me],["__file","Checkboard.vue"]]);var Ne=we,Se=(0,r.aZ)({name:"Alpha",props:{value:Object},components:{checkboard:Ne},computed:{colors(){return this.value},gradientColor(){const e=this.colors.rgba,t=[e.r,e.g,e.b].join(",");return"linear-gradient(to right, rgba("+t+", 0) 0%, rgba("+t+", 1) 100%)"}},methods:{handleChange(e,t){!t&&e.preventDefault();const n=this.$refs.container;if(!n)return;const r=n.clientWidth,i=n.getBoundingClientRect().left+window.pageXOffset,o=e.pageX||(e.touches?e.touches[0].pageX:0),s=o-i;let a;a=s<0?0:s>r?1:Math.round(100*s/r)/100,this.colors.a!==a&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:a,source:"rgba"})},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}});const xe=(0,W.Z)(Se,[["render",he],["__file","Alpha.vue"]]);var Pe=xe,Ie=n(64912);function _e(...e){return new Ie.C(...e)}function ke(e,t){const n=e&&e.a;let r;r=e&&e.hsl?_e(e.hsl):e&&e.hex&&e.hex.length>0?_e(e.hex):e&&e.hsv?_e(e.hsv):e&&e.rgba?_e(e.rgba):e&&e.rgb?_e(e.rgb):_e(e),!r||void 0!==r._a&&null!==r._a||r.setAlpha(n||1);const i=r.toHsl(),o=r.toHsv();return 0===i.s&&(o.h=i.h=e.h||e.hsl&&e.hsl.h||t||0),{hsl:i,hex:r.toHexString().toUpperCase(),hex8:r.toHex8String().toUpperCase(),rgba:r.toRgb(),hsv:o,oldHue:e.h||t||i.h,source:e.source,a:e.a||r.getAlpha()}}var Ze=(0,r.aZ)({name:"Chrome",props:{value:{required:!0},pickerWidth:{type:Number,default:225},fullWidth:{type:Boolean,default:!1},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1},aspectRatio:{type:Number,default:56.25}},components:{saturation:ne,hue:ce,alpha:Pe,checkboard:Ne,"ed-in":G},data(){return{fieldsIndex:0,highlight:!1,val:ke(this.value)}},computed:{colors:{get(){return this.val},set(e){this.val=e,this.$emit("input",e)}},hsl(){const{h:e,s:t,l:n}=this.colors.hsl;return{h:e.toFixed(),s:`${(100*t).toFixed()}%`,l:`${(100*n).toFixed()}%`}},activeColor(){const e=this.colors.rgba;return"rgba("+[e.r,e.g,e.b,e.a].join(",")+")"},hasAlpha(){return this.colors.a<1},pickerStyles(){return{width:this.fullWidth?"100%":`${this.pickerWidth}px`}},bodyPadding(){return this.isMobile?{padding:"12px 0px 0px"}:{padding:"12px 12px 12px"}},colorWrapStyles(){return this.isMobile?{width:"0px"}:{}},saturationWrapStyles(){return this.isMobile?{paddingBottom:`${this.aspectRatio}%`,borderRadius:"5px"}:{paddingBottom:`${this.aspectRatio}%`,borderRadius:"2px 2px 0 0"}}},watch:{value:{handler(e){this.val=ke(e)},deep:!0}},methods:{colorChange(e,t){this.oldHue=this.colors.hsl.h,this.colors=ke(e,t||this.oldHue)},isValidHex(e){return _e(e).isValid()},simpleCheckForValidColor(e){const t=["r","g","b","a","h","s","l","v"];let n=0,r=0;for(let i=0;i<t.length;i++){const o=t[i];e[o]&&(n++,isNaN(e[o])||r++)}if(n===r)return e},paletteUpperCase(e){return e.map((e=>e.toUpperCase()))},isTransparent(e){return 0===_e(e).getAlpha()},childChange(e){this.colorChange(e)},inputChange(e){if(e)if(e.hex)this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"});else if(e.r||e.g||e.b||e.a)this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"});else if(e.h||e.s||e.l){const t=e.s?e.s.replace("%","")/100:this.colors.hsl.s,n=e.l?e.l.replace("%","")/100:this.colors.hsl.l;this.colorChange({h:e.h||this.colors.hsl.h,s:t,l:n,source:"hsl"})}},toggleViews(){this.fieldsIndex>=2?this.fieldsIndex=0:this.fieldsIndex++},showHighlight(){this.highlight=!0},hideHighlight(){this.highlight=!1}}});const Ce=(0,W.Z)(Ze,[["render",$],["__file","Chrome.vue"]]);var ze=Ce,Te=n(23931),Le=n(89995),Ee=n(75231),De=n(50559),Oe=n(38058),Me=Object.defineProperty,Ae=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,Re=(e,t,n)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,He=(e,t)=>{for(var n in t||(t={}))je.call(t,n)&&Re(e,n,t[n]);if(Fe)for(var n of Fe(t))Be.call(t,n)&&Re(e,n,t[n]);return e},Ue=(e,t)=>Ae(e,$e(t)),We=(0,r.aZ)({props:{currentColor:{type:String,required:!0},isMobile:{type:Boolean,default:!1},aspectRatio:{type:Number,default:56.25}},emits:["update","final"],components:{"chrome-picker":ze},data(){return{color:this.currentColor||"#194d33",finalizeTimer:-1}},mounted(){const e=this.$refs.colorPicker,t=this.$refs.input;this.$isTouchDevice()||(e.focus(),t.select())},computed:Ue(He({},(0,Oe.Se)({documentColors:"color/getDocumentColors",defaultColors:"color/getDefaultColors"})),{convertedHex(){const e=this.convertHex(this.color);return this.$emit("update",e),e}}),watch:{color(){this.color="#"+this.color.replaceAll(/[^a-fA-F0-9]/g,""),this.color=this.color.toUpperCase(),-1===this.color.indexOf("#")&&(this.color=`#${this.color}`),0===this.color.length&&(this.color="#"),this.delayedFinalize(this.convertHex(this.color))}},methods:Ue(He({},(0,Oe.OI)({updateDocumentColors:"UPDATE_documentColors"})),{paddingRight(e,t){let n=e.length;while(n<t)e+="0",n++;return e},updateHex(e){this.color=e.hex},onPaste(e){console.log(e.clipboardData)},onmouseup(){this.updateDocumentColors({pageIndex:Ee.ZP.pageIndex,color:this.color})},eyeDropper(){if(!window.EyeDropper)return void(0,De.h4)({group:"error",text:`${Te.Z.global.t("NN0406")}`});const e=new window.EyeDropper;void 0!==e&&e.open().then((e=>{this.color=(0,Le.pK)(e.sRGBHex)}))},convertHex(e){let t=e.slice(1).split(""),n="";const r=t.length;switch(r){case 0:n="000000";break;case 1:case 2:case 3:t=t.map((e=>e+e)),n=this.paddingRight(t.join(""),6);break;case 4:case 5:case 6:n=this.paddingRight(t.join(""),6);break}return`#${n}`},delayedFinalize(e){clearTimeout(this.finalizeTimer),this.finalizeTimer=window.setTimeout((()=>{this.$emit("final",e)}),500)}})});const Ve=(0,W.Z)(We,[["render",m],["__scopeId","data-v-5e1225c4"],["__file","ColorPicker.vue"]]);var Ge=Ve},55187:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var r=n(29651),i=n(819),o=n(41463);const s=["src"],a={key:3,class:"gallery-photo__progress"};function l(e,t,n,l,c,d){const u=(0,r.up)("svg-icon"),g=(0,r.up)("circle-checkbox");return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["gallery-photo",{border:e.deletable}])},[e.deletable?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"gallery-photo__delete",onClick:t[0]||(t[0]=(0,o.iM)(((...t)=>e.handleDeletePhoto&&e.handleDeletePhoto(...t)),["stop","prevent"]))},[(0,r.Wm)(u,{iconName:"close",iconColor:"gray-2",iconWidth:"24px"})])):(0,r.kq)("",!0),"off"!==e.multiSelectMode?((0,r.wg)(),(0,r.j4)(g,{key:1,class:(0,i.C_)(["gallery-photo__checkbox",{show:e.hasCheckedAssets||"on"===e.multiSelectMode}]),value:e.photo.assetIndex,checkedValues:e.checkedAssets,disabled:e.isUploading,onUpdate:e.handleCheck},null,8,["class","value","checkedValues","disabled","onUpdate"])):(0,r.kq)("",!0),e.showMoreBtn?((0,r.wg)(),(0,r.j4)(u,{key:2,class:"pointer gallery-photo__more",onClick:e.showPhotoInfo,iconName:"more_vertical",iconColor:"gray-2",iconWidth:"20px"},null,8,["onClick"])):(0,r.kq)("",!0),(0,r._)("img",{class:"gallery-photo__img pointer",ref:"img",draggable:"true",crossorigin:"anonymous",onDragstart:t[1]||(t[1]=t=>e.dragStart(t,e.photo)),onDragend:t[2]||(t[2]=(...t)=>e.dragEnd&&e.dragEnd(...t)),onClick:t[3]||(t[3]=t=>e.onClick(t,e.photo)),src:e.previewSrc},null,40,s),e.isUploading?((0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",{class:"gallery-photo__progress-bar",style:(0,i.j5)({width:`${e.photo.progress}%`})},null,4)])):(0,r.kq)("",!0)],2)}const c=e=>((0,r.dD)("data-v-7d9ce760"),e=e(),(0,r.Cn)(),e),d={class:"circle-checkbox"},u=["id","value","disabled"],g=["for"],p=c((()=>(0,r._)("svg",{fill:"none",viewBox:"0 0 12 12"},[(0,r._)("circle",{class:"box",cx:"6",cy:"6",r:"5.5",fill:"#4EABE6",stroke:"#fff"}),(0,r._)("path",{class:"check",stroke:"#fff","stroke-linecap":"round",d:"M4 5.333l1.087 1.933a.5.5 0 00.86.02L8 4"})],-1))),h=[p];function m(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("div",d,[(0,r.wy)((0,r._)("input",{id:`${e.value}`,type:"checkbox",name:"cb",value:e.value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.myVm=t),disabled:e.disabled},null,8,u),[[o.e8,e.myVm]]),(0,r._)("label",{for:`${e.value}`},h,8,g)])}var y=(0,r.aZ)({props:{value:{type:[Number,String],required:!0},checkedValues:{type:Array,required:!0},disabled:{type:Boolean,default:!1}},emits:["update"],data(){return{checked:!1}},computed:{myVm:{get:function(){return void 0!==this.checkedValues?this.checkedValues:this.checked},set(e){this.checkedValues&&(this.disabled||this.$emit("update",e))}}}}),f=n(53372);const b=(0,f.Z)(y,[["render",m],["__scopeId","data-v-7d9ce760"],["__file","CircleCheckbox.vue"]]);var v=b,w=n(6400),N=n(86052),S=n(77891),x=n(49901),P=n(2531),I=n(62013),_=n(3162),k=n(75231),Z=n(50543),C=n(50707),z=n(32905),T=n(52632),L=n(86914),E=n(38058),D=Object.defineProperty,O=Object.defineProperties,M=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,j=(e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))$.call(t,n)&&j(e,n,t[n]);if(A)for(var n of A(t))F.call(t,n)&&j(e,n,t[n]);return e},R=(e,t)=>O(e,M(t)),H=(0,r.aZ)({emits:[],name:"GalleryPhoto",props:{photo:{type:Object,required:!0},vendor:{type:String,required:!0},inFilePanel:{type:Boolean,default:!1},inLogoPanel:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},multiSelectMode:{type:String,default:"off"}},components:{CircleCheckbox:v},data(){return{dragUtils:new x.Z,replaceImgInject:(0,r.f3)(L.v,null)}},computed:R(B(B(B({},(0,E.rn)({closeMobilePanelFlag:"mobileEditor/closeMobilePanelFlag"})),(0,E.rn)("mobileEditor",{mobilePanel:"currActivePanel"})),(0,E.Se)({scaleRatio:"getPageScaleRatio",getPageSize:"getPageSize",checkedAssets:"file/getCheckedAssets",getCurrFunctionPanelType:"getCurrFunctionPanelType",isAdmin:"user/isAdmin"})),{isUploading(){return"undefined"!==typeof this.photo.progress&&100!==this.photo.progress},hasCheckedAssets(){return 0!==this.checkedAssets.length},previewSrc(){var e;const{inFilePanel:t,inLogoPanel:n,photo:r,vendor:i}=this;if(t||n||r.urls){const e=r.urls.tiny||r.urls.thumb;return e.includes("data:image/")?e:_.Z.appendRefreshAppver(e)}const o={srcObj:{type:i,userId:"",assetId:r.id},styles:{imgWidth:r.width,imgHeight:r.height}},s=this.$store.state.user.imgSizeMap,a=(null==(e=s.find((e=>"tiny"===e.key)))?void 0:e.size)||320;return _.Z.getSrc(o,a)},fullSrc(){const{inFilePanel:e,inLogoPanel:t,photo:n,vendor:r}=this;if(e||t||n.urls)return n.urls.full;const i={srcObj:{type:r,userId:"",assetId:n.id}};return _.Z.getSrc(i,n.width)},showMoreBtn(){return!this.inFilePanel&&!this.inLogoPanel&&!this.$isTouchDevice()}}),methods:R(B({},(0,E.OI)({_setCurrSelectedResInfo:"SET_currSelectedResInfo",addCheckedAssets:"file/ADD_CHECKED_ASSETS",deleteCheckedAssets:"file/DELETE_CHECKED_ASSETS",updateCheckedAssets:"file/UPDATE_CHECKED_ASSETS",setCurrDraggedPhoto:"SET_currDraggedPhoto",setCloseMobilePanelFlag:"mobileEditor/SET_closeMobilePanelFlag"})),{pageSize(){return this.getPageSize(z.Z.currFocusPageIndex)},dragStart(e,t){if(C.Z.check())if(this.getCurrFunctionPanelType===w.UJ.photoShadow&&P.ZP.emit(P.rZ.showPhotoShadow,""),this.isUploading)e.preventDefault();else{const n=this.getPageSize(k.ZP.pageIndex),r=N.RU,i=n.width/n.height,o=t.width/t.height,s=o>i?n.width*r:n.height*r*o,a=o>i?n.width*r/o:n.height*r,l=this.fullSrc,c=_.Z.getSrcType(this.fullSrc),d={type:c,userId:_.Z.getUserId(l,c),assetId:!this.isAdmin&&t.assetIndex?t.assetIndex:_.Z.getAssetId(l,c),brandId:_.Z.getBrandId(l,c)},u=this.$refs.img;this.dragUtils.itemDragStart(e,"image",{type:"image",srcObj:d},this.previewSrc,{width:s,height:a,offsetX:10,offsetY:15,aspectRatio:u.naturalWidth/u.naturalHeight});const g=_.Z.getSignificantDimension(this.photo.preview.width,this.photo.preview.height),p=new Image;p.crossOrigin="anonymous",p.src=_.Z.getSrc({srcObj:d},_.Z.getSrcSize(d,g)),p.onload=()=>{const e=_.Z.getSignificantDimension(s,a),t=new Image;t.crossOrigin="anonymous",t.src=_.Z.getSrc({srcObj:d},_.Z.getSrcSize(d,e))},this.setCurrDraggedPhoto({srcObj:B({},d),styles:{width:s,height:a},isPreview:this.isUploading,previewsrc:this.previewSrc})}else C.Z.notifyNetworkError()},dragEnd(){this.setCurrDraggedPhoto({srcObj:{type:"",assetId:"",userId:""},styles:{width:0,height:0},previewsrc:""})},onClick(e,t){this.replaceImgInject?this.replaceImgInject(t):this.$isTouchDevice()&&"replace"===this.mobilePanel?this.replaceImg(t):"on"===this.multiSelectMode||this.hasCheckedAssets?this.modifyCheckedAssets(t.assetIndex):this.addImage(t)},replaceImg(e){var t;const{getCurrLayer:n,getCurrConfig:r,pageIndex:i,layerIndex:o,subLayerIdx:s}=k.ZP;if(r.type!==w.F5.image&&r.type!==w.F5.frame)return;const a=this.isUploading?e.urls.prev:this.fullSrc,l=_.Z.getSrcType(a),c=!this.inFilePanel&&!this.inLogoPanel||e.id?void 0:e.assetIndex,d={type:l,userId:_.Z.getUserId(a,l),assetId:null!=c?c:_.Z.getAssetId(a,l),brandId:_.Z.getBrandId(a,l)},u=N.RU,g=this.pageSize(),p=g.width/g.height,h=e.width/e.height,m=h>p?g.width*u:g.height*u*h,y=h>p?g.width*u/h:g.height*u,f=n.type===w.F5.frame,b=f?null!=(t=n.clips.find((e=>e.active)))?t:n.clips[0]:r,{imgWidth:v,imgHeight:S}=b.styles,x=`path('M0,0h${v}v${S}h${-v}z`,P=B(B(B({},b.styles),Z.Z.clipperHandler({styles:{width:m,height:y}},x,b.styles).styles),{initWidth:b.styles.initWidth,initHeight:b.styles.initHeight});f?(I.Z.updateFrameLayerStyles(i,o,Math.max(s,0),P),I.Z.updateFrameClipSrc(i,o,Math.max(s,0),d),I.Z.updateFrameLayerProps(i,o,Math.max(s,0),{previewSrc:this.previewSrc})):(k.ZP.updateLayerStyles(i,o,P,s),k.ZP.updateLayerProps(i,o,{srcObj:d,previewSrc:this.previewSrc},s)),this.setCloseMobilePanelFlag(!0),T.Z.record()},addImage(e){if(this.getCurrFunctionPanelType===w.UJ.photoShadow&&P.ZP.emit(P.rZ.showPhotoShadow,""),!C.Z.check())return void C.Z.notifyNetworkError();const t=this.isUploading?e.urls.prev:this.fullSrc,n=e.width/e.height;N.ZP.addImage(t,n,B(B(B({previewSrc:this.previewSrc},(this.inFilePanel||this.inLogoPanel)&&!e.id&&{assetIndex:e.assetIndex}),(this.inFilePanel||this.inLogoPanel)&&e.id&&{assetId:e.id}),this.isUploading&&{isPreview:!0,assetId:e.id})),this.$isTouchDevice()&&this.setCloseMobilePanelFlag(!0)},showPhotoInfo(e){var t,n,r,i;const{vendor:o}=this,{info:s={},tags:a}=this.photo;this._setCurrSelectedResInfo({type:"photo",userName:null!=(n=null==(t=s.user)?void 0:t.name)?n:"",userLink:null!=(i=null==(r=s.user)?void 0:r.link)?i:"",vendor:o,tags:a}),this.$nextTick((()=>{const t=document.querySelector(".res-info"),{top:n,left:r,height:i}=e.target.getBoundingClientRect();t.style.transform=`translate(${r}px, ${n+i+5}px)`,t.focus()}))},handleCheck(e){this.updateCheckedAssets(e)},modifyCheckedAssets(e){this.isUploading||(this.checkedAssets.includes(e)?this.deleteCheckedAssets(e):this.addCheckedAssets(e))},handleDeletePhoto(){S.Z.setMobileDeleteItemFromPhoto(this.photo.assetIndex)}})});const U=(0,f.Z)(H,[["render",l],["__scopeId","data-v-140b2994"],["__file","GalleryPhoto.vue"]]);var W=U},37934:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(29651),i=n(819),o=n(41463);function s(e,t,n,s,a,l){return(0,r.wg)(),(0,r.iD)("div",{class:"lazy-load",style:(0,i.j5)(e.styles),ref:"observer"},[(0,r.Wm)(o.uT,{name:e.anamationEnabled&&!e.forceRender?"fade-in":"",mode:"out-in"},{default:(0,r.w5)((()=>[e.forceRender||e.shoudBeRendered?(0,r.WI)(e.$slots,"default",{key:0},void 0,!0):(0,r.WI)(e.$slots,"placeholder",{key:1},void 0,!0)])),_:3},8,["name"])],4)}var a=n(78871),l=n(60575),c=n(60410),d=Object.defineProperty,u=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))g.call(t,n)&&h(e,n,t[n]);if(u)for(var n of u(t))p.call(t,n)&&h(e,n,t[n]);return e},y=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),f=(0,r.aZ)({name:"LazyLoad",props:{target:{type:String,default:"body"},rootMargin:{type:String,default:"0px"},minHeight:{default:0,type:Number},maxHeight:{type:Number},minWidth:{type:Number},threshold:{type:Array,default:()=>[0,1]},handleUnrender:{type:Boolean,default:!0},unrenderDelay:{type:Number,default:2e3},pageIndex:{type:Number,default:-1},anamationEnabled:{type:Boolean,default:!1},forceRender:{type:Boolean,default:!1}},emits:["loaded","intersecting"],data(){return{intersectionObserver:null,shoudBeRendered:!1,unrenderTimer:-1,renderTimer:-1,unrenderEventId:"",renderEventId:""}},mounted(){if(this.forceRender)return void this.$emit("loaded");const e={root:document.querySelector(this.target),rootMargin:this.rootMargin,threshold:this.threshold};this.intersectionObserver=new IntersectionObserver((e=>{(0,c.some)(e,["isIntersecting",!0])?(""!==this.unrenderEventId&&l.u.deleteEvent(this.unrenderEventId,this.pageIndex),-1!==this.unrenderTimer&&clearTimeout(this.unrenderTimer),this.renderTimer=window.setTimeout((()=>{this.renderEventId=a.Z.generateRandomString(3),l.u.push(this.renderEventId,(()=>y(this,null,(function*(){this.shoudBeRendered=!0,this.handleLoaded(!0,e),this.renderEventId=""}))),this.pageIndex)}),this.handleUnrender?200:0),this.handleUnrender||this.intersectionObserver&&this.intersectionObserver.disconnect(),this.handleIntersecting(e)):(""!==this.renderEventId&&l.u.deleteEvent(this.renderEventId,this.pageIndex),-1!==this.renderTimer&&clearTimeout(this.renderTimer),this.unrenderTimer=window.setTimeout((()=>{this.unrenderEventId=a.Z.generateRandomString(3),l.u.push(this.unrenderEventId,(()=>y(this,null,(function*(){this.shoudBeRendered=!1,this.handleLoaded(!1,e),this.unrenderEventId=""}))),this.pageIndex)}),this.unrenderDelay))}),e),this.intersectionObserver.observe(this.$refs.observer)},computed:{styles(){return m(m({minHeight:`${this.minHeight}px`},this.maxHeight&&{maxHeight:`${this.maxHeight}px`}),this.minWidth&&{minWidth:`${this.minWidth}px`})}},methods:{handleLoaded(e,t){this.$emit("loaded",e,t)},handleIntersecting(e){this.$emit("intersecting",e)}},unmounted(){this.intersectionObserver&&this.intersectionObserver.disconnect()}}),b=n(53372);const v=(0,b.Z)(f,[["render",s],["__scopeId","data-v-0d7cf3c4"],["__file","LazyLoad.vue"]]);var w=v},35670:function(e,t,n){"use strict";n.d(t,{Z:function(){return se}});var r=n(29651),i=n(819),o=n(41463);const s={class:"nu-header__container"},a={class:"body-2 full-height",key:"navigation"},l={key:1,class:"nu-header__container-link__single-layer"},c={key:2,class:"nu-header__container-link__more"},d={class:"body-2",key:"no-navigation"},u={class:"body-2"},g={key:3},p={class:"nu-header__container-mobile"},h={class:"flex-center"},m={style:{height:"25px"}},y={key:0,class:"nu-header__search-mobile"};function f(e,t,n,f,b,v){const w=(0,r.up)("svg-icon"),N=(0,r.up)("router-link"),S=(0,r.up)("url"),x=(0,r.up)("search-bar"),P=(0,r.up)("avatar"),I=(0,r.up)("popup-account");return(0,r.wg)(),(0,r.iD)("div",{class:"nu-header",style:(0,i.j5)(e.rootStyles)},[(0,r._)("div",s,[(0,r._)("div",null,[(0,r.Wm)(N,{class:"nu-header__container-link",to:"/",style:{height:"50px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{class:"pointer",iconName:"logo",iconWidth:"100px",style:{height:"50px"}})])),_:1})]),(0,r.Wm)(o.uT,{name:"fade",mode:"out-in"},{default:(0,r.w5)((()=>[e.noNavigation?((0,r.wg)(),(0,r.iD)("div",d)):((0,r.wg)(),(0,r.iD)("div",a,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.navItems,(t=>((0,r.wg)(),(0,r.iD)(r.HY,{key:t.name},[t.hidden?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,i.C_)(["nu-header__container-link",{"text-blue-1":e.currentPage===t.name}])},[(0,r.Wm)(S,{url:t.url},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(t.label),1)])),_:2},1032,["url"]),t.content?((0,r.wg)(),(0,r.j4)(w,{key:0,iconName:"chevron-down",iconColor:"gray-1",iconWidth:"16px"})):(0,r.kq)("",!0),t.singleLayer?((0,r.wg)(),(0,r.iD)("div",l,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.content,(e=>((0,r.wg)(),(0,r.j4)(S,{key:e.label,url:e.url},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["url"])))),128))])):t.content?((0,r.wg)(),(0,r.iD)("div",c,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.content,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"nu-header__container-link__more-col",key:e.label},[(0,r.Wm)(S,{url:e.url},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["url"]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.content,(e=>((0,r.wg)(),(0,r.j4)(S,{key:e.label,url:e.url,newTab:e.newTab},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["url","newTab"])))),128))])))),128))])):(0,r.kq)("",!0)],2))],64)))),128))]))])),_:1}),(0,r._)("div",u,[e.noSearchbar?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(x,{key:0,class:"nu-header__search",placeholder:e.$t("NN0037"),color:{search:"gray-1",close:"gray-1"},onSearch:e.handleSearch},null,8,["placeholder","onSearch"])),e.isLogin?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:1,class:"nu-header__btn-login py-5 px-30 text-bold pointer text-blue-1",style:{"white-space":"nowrap"},onClick:t[0]||(t[0]=t=>e.goToPage("Login"))},(0,i.zw)(e.$tc("NN0168",2)),1)),e.isLogin?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:2,class:"nu-header__btn text-bold",onClick:t[1]||(t[1]=t=>e.goToPage("SignUp"))},(0,i.zw)(e.$tc("NN0169",2)),1)),e.isLogin?((0,r.wg)(),(0,r.iD)("div",g,[(0,r.Wm)(P,{class:"pointer",textSize:14,avatarSize:35,onClick:t[2]||(t[2]=t=>e.isAccountPopup=!0)}),e.isAccountPopup?((0,r.wg)(),(0,r.j4)(I,{key:0,class:"nu-header__account",onClose:t[3]||(t[3]=()=>e.isAccountPopup=!1)})):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])]),(0,r._)("div",p,[(0,r._)("div",h,[(0,r.Wm)(w,{class:"pointer",iconName:"logo",iconWidth:"143px",style:{height:"45px"},onClick:t[4]||(t[4]=t=>e.goToPage("Home"))})]),(0,r._)("div",m,[e.noSearchbar?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[e.isShowSearchPage?((0,r.wg)(),(0,r.j4)(w,{key:1,iconName:"close",iconColor:"gray-3",iconWidth:"25px",onClick:e.closeSearchPage},null,8,["onClick"])):((0,r.wg)(),(0,r.j4)(w,{key:0,iconName:"search",iconColor:"gray-3",iconWidth:"25px",onClick:t[5]||(t[5]=()=>{e.isShowSearchPage=!0})})),e.showCloseIcon?((0,r.wg)(),(0,r.j4)(w,{key:2,iconName:"close",iconColor:"gray-3",iconWidth:"25px",onClick:t[6]||(t[6]=()=>e.$emit("close"))})):(0,r.kq)("",!0)],64))])]),(0,r.WI)(e.$slots,"default",{},void 0,!0),e.isShowSearchPage?((0,r.wg)(),(0,r.iD)("div",y,[(0,r.Wm)(x,{class:"search",placeholder:e.$t("NN0092",{target:e.$t("NN0145")}),onSearch:e.handleSearch},null,8,["placeholder","onSearch"])])):(0,r.kq)("",!0)],4)}var b=n(18941),v=n(46986);const w=e=>((0,r.dD)("data-v-53660608"),e=e(),(0,r.Cn)(),e),N={class:"popup-account text-left"},S={class:"popup-account__profile"},x={class:"profile-text text-body-2"},P={class:"text-gray-3 body-3"},I=w((()=>(0,r._)("div",{class:"popup-account__hr"},null,-1))),_={key:0,class:"popup-account__hr"},k=w((()=>(0,r._)("div",{class:"popup-account__hr"},null,-1)));function Z(e,t,n,o,s,a){const l=(0,r.up)("avatar"),c=(0,r.up)("svg-icon"),d=(0,r.up)("router-link"),u=(0,r.Q2)("click-outside");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",N,[(0,r._)("div",S,[(0,r.Wm)(l,{class:"mr-10",textSize:14,avatarSize:35}),(0,r._)("div",x,[(0,r._)("div",null,(0,i.zw)(e.showUname),1),(0,r._)("div",P,(0,i.zw)(e.showAccount),1)])]),I,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.settingsItems,(n=>((0,r.wg)(),(0,r.iD)(r.HY,{key:n.name},["hr"===n.name?((0,r.wg)(),(0,r.iD)("div",_)):((0,r.wg)(),(0,r.iD)("div",{key:1,class:"popup-account__option",onClick:t[0]||(t[0]=(...t)=>e.closePopup&&e.closePopup(...t))},[(0,r.Wm)(d,{class:"popup-account__option__link",to:`/settings/${n.name}`},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{class:"pr-10",iconName:n.icon,iconWidth:"15px",iconColor:"gray-2"},null,8,["iconName"]),(0,r._)("span",null,(0,i.zw)(n.label),1)])),_:2},1032,["to"])]))],64)))),128)),k,(0,r._)("div",{class:"popup-account__option",onClick:t[1]||(t[1]=t=>e.onLogoutClicked())},[(0,r.Wm)(c,{class:"pr-10",iconName:"logout",iconWidth:"15px",iconColor:"gray-2"}),(0,r._)("span",null,(0,i.zw)(e.$tc("NN0167",2)),1)])])),[[u,e.closePopup]])}var C=n(20083),z=n(3665),T=n(10298),L=n.n(T),E=n(38058),D=Object.defineProperty,O=Object.defineProperties,M=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,j=(e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))$.call(t,n)&&j(e,n,t[n]);if(A)for(var n of A(t))F.call(t,n)&&j(e,n,t[n]);return e},R=(e,t)=>O(e,M(t)),H=(0,r.aZ)({directives:{clickOutside:L().directive},components:{Avatar:b.Z},emits:["close"],data(){return{settingsItems:C.Z.settingsItems()}},computed:R(B(B({},(0,E.rn)("user",["uname"])),(0,E.Se)("user",{account:"getAccount"})),{showUname(){return this.uname.length>10?this.uname.substring(0,10).concat("..."):this.uname},showAccount(){return this.account.length>25?this.account.substring(0,25).concat("..."):this.account}}),methods:{onLogoutClicked(){z.Z.logout()},closePopup(){this.$emit("close")}}}),U=n(53372);const W=(0,U.Z)(H,[["render",Z],["__scopeId","data-v-53660608"],["__file","PopupAccount.vue"]]);var V=W,G=n(68514),q=n(89497),K=Object.defineProperty,Y=Object.defineProperties,X=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,te=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ne=(e,t)=>{for(var n in t||(t={}))J.call(t,n)&&te(e,n,t[n]);if(Q)for(var n of Q(t))ee.call(t,n)&&te(e,n,t[n]);return e},re=(e,t)=>Y(e,X(t)),ie=(0,r.aZ)({components:{SearchBar:G.Z,PopupAccount:V,Avatar:b.Z,Url:v.Z},directives:{clickOutside:L().directive},props:{noSearchbar:{type:Boolean},noNavigation:{type:Boolean},showCloseIcon:{type:Boolean,default:!0}},emits:["search","close"],data(){return{isAccountPopup:!1,isShowSearchPage:!1}},computed:re(ne({},(0,E.Se)({userInfo:"webView/getUserInfo"})),{navItems(){return C.Z.headerItems()},currentPage(){return String(this.$router.currentRoute.value.name)||""},isLogin(){return q.Z.getters["user/isLogin"]},rootStyles(){return{paddingTop:`${this.userInfo.statusBarHeight}px`}}}),methods:{goToPage(e="",t=""){e===this.currentPage||("Login"===e||"SignUp"===e?this.$router.push({name:e,query:{redirect:this.$route.path}}):["Home","Pricing","MyDesign","BrandKit"].includes(e)?this.$router.push({name:e}):"TemplateCenter"===e?t.length>0?this.$router.push({name:e,query:{q:t}}):this.$router.push({name:e}):this.$router.push({name:"Home"}))},handleSearch(e){e&&(this.isShowSearchPage=!1,"TemplateCenter"===this.currentPage&&this.$emit("search",e),this.goToPage("TemplateCenter",e))},closeSearchPage(){this.isShowSearchPage=!1}}});const oe=(0,U.Z)(ie,[["render",f],["__scopeId","data-v-8638beb8"],["__file","NuHeader.vue"]]);var se=oe},51543:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(29651);const i={class:"observer-sentinel",ref:"sentinel"};function o(e,t,n,o,s,a){return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.WI)(e.$slots,"default",{},void 0,!0)],512)}var s=n(60410),a=(0,r.aZ)({props:{target:{type:String,default:"body"},rootMargin:{type:String,default:"0px"}},emits:["callback"],data(){return{intersectionObserver:null}},mounted(){const e={root:document.querySelector(this.target),rootMargin:this.rootMargin};this.intersectionObserver=new IntersectionObserver((e=>{(0,s.some)(e,["isIntersecting",!0])&&this.handleCallback()}),e),this.intersectionObserver.observe(this.$refs.sentinel)},methods:{handleCallback:(0,s.throttle)((function(){this.$emit("callback")}),500)},unmounted(){this.intersectionObserver&&this.intersectionObserver.disconnect()}}),l=n(53372);const c=(0,l.Z)(a,[["render",o],["__scopeId","data-v-968c8214"],["__file","ObserverSentinel.vue"]]);var d=c},68514:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(29651),i=n(819),o=n(41463);const s=["placeholder"];function a(e,t,n,a,l,c){const d=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("form",{class:"search-bar bg-gray-6",action:"",onSubmit:t[2]||(t[2]=(...t)=>e.onSearch&&e.onSearch(...t))},[(0,r.Wm)(d,{class:"pointer",iconName:"search",iconColor:e.color.search||"gray-3",iconWidth:"20px"},null,8,["iconColor"]),(0,r.wy)((0,r._)("input",{class:"search-bar__input body-2",ref:"searchbar",type:"search","onUpdate:modelValue":t[0]||(t[0]=t=>e.keyword=t),onInput:t[1]||(t[1]=(...t)=>e.onUpdate&&e.onUpdate(...t)),placeholder:e.placeholder,style:(0,i.j5)(e.inputStyles())},null,44,s),[[o.nr,e.keyword]]),e.clear&&e.keyword?((0,r.wg)(),(0,r.j4)(d,{key:0,class:"pointer",iconName:"close",iconColor:e.color.close||"gray-3",iconWidth:"20px",onClick:e.onClear},null,8,["iconColor","onClick"])):(0,r.kq)("",!0),(0,r.WI)(e.$slots,"default",{},void 0,!0)],32)}var l=(0,r.aZ)({components:{},props:{placeholder:{type:String,required:!0},clear:{type:Boolean},defaultKeyword:{type:String,default:""},fontFamily:{type:String,default:""},color:{type:Object,default:()=>({close:"gray-3",search:"gray-3"})}},emits:["search","update"],data(){return{keyword:this.defaultKeyword}},watch:{defaultKeyword(e){this.keyword=e}},methods:{inputStyles(){return{fontFamily:this.fontFamily}},onSearch(e){e.preventDefault(),this.$refs.searchbar.blur(),this.$emit("search",this.keyword)},onClear(){this.keyword="",this.$emit("search","")},onUpdate(){this.$emit("update",this.keyword)}}}),c=n(53372);const d=(0,c.Z)(l,[["render",a],["__scopeId","data-v-f0461838"],["__file","SearchBar.vue"]]);var u=d},58617:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(29651),i=n(819);const o=["onClick"],s={key:0,class:"tabs__underline"};function a(e,t,n,a,l,c){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(`tabs ${e.themeColor} ${e.themeType}`)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.tabs,((t,n)=>((0,r.wg)(),(0,r.iD)("div",{class:"tabs__item",key:t,style:(0,i.j5)(e.tabStyle(n)),onClick:t=>e.switchTab(n)},[(0,r._)("span",null,(0,i.zw)(t),1),["default","narrow"].includes(e.themeType)?((0,r.wg)(),(0,r.iD)("div",s)):(0,r.kq)("",!0)],12,o)))),128))],2)}var l=(0,r.aZ)({props:{tabs:{type:Array,default:[]},modelValue:{type:Number,required:!0},theme:{type:String,default:"dark"}},emits:["update:modelValue"],computed:{tabIndex(){return this.modelValue},themeColor(){return this.theme.split("-")[0]},themeType(){var e;return null!=(e=this.theme.split("-")[1])?e:"default"},colors(){switch(this.theme){case"light":return{active:"#4EABE6",inactive:"#969BAB"};case"dark-rect":return{active:"#18191F",activeBG:"#E8E8E8",inactive:"#9C9C9C",inactiveBG:"#2E2E2E"};case"light-narrow":return{active:"#474A57",inactive:"#969BAB"};case"dark-narrow":return{active:"#FFFFFF",inactive:"#969BAB"};case"dark":default:return{active:"white",inactive:"#9C9C9C"}}}},methods:{tabStyle(e){const t=e===this.tabIndex,n=t?"active":"inactive";switch(this.themeType){case"rect":return{display:"flex",justifyContent:"center",alignItems:"center",margin:"0 8px 0 8px",width:`calc(100% / ${this.tabs.length} - 16px)`,height:"36px",borderRadius:"10px",color:this.colors[n],backgroundColor:this.colors[`${n}BG`]};case"narrow":return{color:this.colors[n],"--border-color":t?this.colors[n]:"transparent"};default:return{color:this.colors[n],"--border-color":t?this.colors[n]:"transparent",width:100/this.tabs.length/2+"%"}}},switchTab(e){this.$emit("update:modelValue",e)}}}),c=n(53372);const d=(0,c.Z)(l,[["render",a],["__scopeId","data-v-717505a7"],["__file","Tabs.vue"]]);var u=d},32329:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(29651),i=n(819);const o={class:"value-selector"},s={class:"value-selector__wrapper"},a=["onClick"],l={class:"value-selector__value"};function c(e,t,n,c,d,u){return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",s,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.valueArray,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t,style:(0,i.j5)(e.liStyles(t))},[(0,r._)("button",{onClick:n=>e.setValue(t)},[(0,r._)("div",l,[(0,r._)("span",null,(0,i.zw)(t),1)])],8,a)],4)))),128))])])])}var d=n(38058),u=Object.defineProperty,g=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t)=>{for(var n in t||(t={}))p.call(t,n)&&m(e,n,t[n]);if(g)for(var n of g(t))h.call(t,n)&&m(e,n,t[n]);return e},f=(0,r.aZ)({props:{valueArray:{type:Array,required:!0}},emits:["update"],data(){return{currentValue:NaN}},computed:y({},(0,d.rn)("text",["sel","props"])),mounted(){var e;this.props.fontSize&&(this.currentValue=null!=(e=parseInt(this.props.fontSize))?e:NaN)},methods:{liStyles(e){if(this.currentValue===e)return{"background-color":"rgba(15, 40, 71, 0.14)"}},setValue(e){this.currentValue=e,this.$emit("update",e)}}}),b=n(53372);const v=(0,b.Z)(f,[["render",c],["__scopeId","data-v-b7552364"],["__file","ValueSelector.vue"]]);var w=v},86876:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(29651),i=n(819);function o(e,t,n,o,s,a){const l=(0,r.up)("nubtn");return(0,r.wg)(),(0,r.j4)(l,{theme:"icon_text",size:"mid",icon:"plus-origin"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.text),1)])),_:1})}var s=(0,r.aZ)({emits:[],props:{text:{type:String,required:!0}}}),a=n(53372);const l=(0,a.Z)(s,[["render",o],["__file","BrandKitAddBtn.vue"]]);var c=l},69250:function(e,t,n){"use strict";n.d(t,{Z:function(){return ho}});var r=n(29651),i=n(819),o=n(41463);const s=["onClick"],a=["src"];function l(e,t,l,c,d,u){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["brand-kit-tab",`${e.theme}-theme`])},[(0,r._)("div",{class:(0,i.C_)(["brand-kit-tab__header",`${e.theme}-theme`])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.tabs,(t=>((0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["brand-kit-tab__tab-block pointer",[{selected:e.checkSelected(t)},`${e.theme}-theme`]]),key:t,onClick:n=>e.handleSelectTab(t)},[(0,r._)("div",{class:(0,i.C_)(["brand-kit-tab__tab-name",`${e.theme}-theme`])},[(0,r._)("span",{class:(0,i.C_)(["brand-kit-tab__tab-name-text",`${e.theme}-theme`])},(0,i.zw)(e.$t(e.tabNames[t])),3)],2)],10,s)))),128))],2),e.notNullBrand&&e.isThemeMobile&&e.settingmode?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"brand-kit-tab__action",style:(0,i.j5)(e.marginStyles()),onClick:t[0]||(t[0]=(0,o.iM)(((...t)=>e.tabActions[e.selectedTab].action&&e.tabActions[e.selectedTab].action(...t)),["stop","prevent"]))},(0,i.zw)(e.tabActions[e.selectedTab].text),5)):(0,r.kq)("",!0),e.notNullBrand?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,i.C_)(["brand-kit-tab__content",`${e.theme}-theme`])},[((0,r.wg)(),(0,r.j4)((0,r.LL)(`brand-kit-tab-${e.selectedTab}${e.isThemeEditorLike?"-sidebar":""}${e.isThemeMobile?"-mobile":""}`),{maxheight:e.maxheight,settingmode:e.settingmode,onDeleteItem:e.handleDeleteItem},null,40,["maxheight","settingmode","onDeleteItem"]))],2)):((0,r.wg)(),(0,r.iD)("div",{key:2,class:"brand-kit-tab__content brand-kit-tab__disconnect",style:(0,i.j5)(e.minHeightStyles())},[(0,r._)("div",null,[(0,r._)("img",{class:(0,i.C_)(["brand-kit-tab__disconnect-image",`${e.theme}-theme`]),src:n(11781)},null,10,a)]),(0,r._)("span",{class:(0,i.C_)(["brand-kit-tab__disconnect-title",`${e.theme}-theme`])},(0,i.zw)(e.$t("NN0456")),3),(0,r._)("span",{class:(0,i.C_)(["brand-kit-tab__disconnect-description1",`${e.theme}-theme`])},(0,i.zw)(e.$t("NN0457")),3),(0,r._)("span",{class:(0,i.C_)(["brand-kit-tab__disconnect-description2",`${e.theme}-theme`])},(0,i.zw)(e.$t("NN0458")),3)],4))],2)}const c={class:"brand-kit-tab-color"},d={class:"no-trans",key:"loading"};function u(e,t,n,i,s,a){const l=(0,r.up)("brand-kit-add-btn"),u=(0,r.up)("svg-icon"),g=(0,r.up)("brand-kit-color-palette");return(0,r.wg)(),(0,r.iD)("div",c,[(0,r.Wm)(l,{text:`${e.$t("NN0404")}`,onClick:e.handleCreatePalette},null,8,["text","onClick"]),(0,r.Wm)(o.W3,{class:"brand-kit-tab-color__palettes",name:"list",tag:"div"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.renderedColorPalettes,(t=>((0,r.wg)(),(0,r.iD)(r.HY,{key:t.id||t},["loading"===t?((0,r.wg)(),(0,r.iD)("div",d,[(0,r.Wm)(u,{iconName:"loading",iconWidth:"50px",iconColor:"gray-3"})])):((0,r.wg)(),(0,r.j4)(g,{key:t.id,colorPalette:t,selectedColor:e.selectedColor,onSelectColor:e.handleSelectColor,onDeleteItem:e.handleDeleteItem},null,8,["colorPalette","selectedColor","onSelectColor","onDeleteItem"]))],64)))),128))])),_:1})])}var g=n(86876);const p={class:"brand-kit-color-palette"},h={class:"brand-kit-color-palette__header"},m={class:"brand-kit-color-palette__name"},y=["title"],f={class:"brand-kit-color-palette__right"},b={class:"brand-kit-color-palette__colors__color-add"},v=["onClick"],w=["onClick"];function N(e,t,n,s,a,l){const c=(0,r.up)("nubtn"),d=(0,r.up)("svg-icon"),u=(0,r.up)("color-picker"),g=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)("div",p,[(0,r._)("div",h,[(0,r._)("div",m,[e.isNameEditing?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,ref:"paletteName","onUpdate:modelValue":t[0]||(t[0]=t=>e.editableName=t),onChange:t[1]||(t[1]=(...t)=>e.handleNameEditEnd&&e.handleNameEditEnd(...t)),onKeyup:t[2]||(t[2]=(...t)=>e.checkNameEnter&&e.checkNameEnter(...t))},null,544)),[[o.nr,e.editableName],[g,e.handleNameEditEnd]]):((0,r.wg)(),(0,r.iD)("span",{key:1,title:e.paletteName,onClick:t[3]||(t[3]=(...t)=>e.handleNameClick&&e.handleNameClick(...t))},(0,i.zw)(e.paletteName),9,y))]),(0,r._)("div",f,[(0,r.Wm)(c,{theme:"icon",icon:"trash",onClick:t[4]||(t[4]=t=>e.handleDeletePalette(e.colorPalette))})])]),(0,r.Wm)(o.W3,{class:"brand-kit-color-palette__colors",name:"color-list",tag:"div"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.colors,(n=>((0,r.wg)(),(0,r.iD)(r.HY,{key:n},["add"===n?((0,r.wg)(),(0,r.iD)("div",{class:"brand-kit-color-palette__colors__color-wrapper pointer",key:"default",onClick:t[5]||(t[5]=t=>e.handleAddColor(e.colorPalette.id))},[(0,r._)("div",b,[(0,r.Wm)(d,{iconName:"plus-origin",iconWidth:"16px",iconColor:"gray-3"})])])):"string"!==typeof n?((0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["brand-kit-color-palette__colors__color-wrapper",{selected:e.checkSelected(e.colorPalette.id,n)}]),key:n.id},[(0,r._)("div",{class:"brand-kit-color-palette__colors__color pointer",style:(0,i.j5)(e.backgroundColorStyles(n.color)),onClick:t=>e.handleSelectColor(e.colorPalette.id,n)},null,12,v),(0,r._)("div",{class:(0,i.C_)(["brand-kit-color-palette__colors__color-close pointer",{selected:e.checkSelected(e.colorPalette.id,n)}]),onClick:(0,o.iM)((t=>e.handleDeleteColor(e.colorPalette.id,n)),["stop"])},[(0,r.Wm)(d,{iconName:"close",iconWidth:"16px",iconColor:"gray-2"})],10,w),e.checkSelected(e.colorPalette.id,n)?(0,r.wy)(((0,r.wg)(),(0,r.j4)(u,{key:0,class:"color-picker",currentColor:n.color,onUpdate:e.handleDragUpdate,onFinal:e.handleColorChangeEnd},null,8,["currentColor","onUpdate","onFinal"])),[[g,e.handleDeSelectColor]]):(0,r.kq)("",!0)],2)):(0,r.kq)("",!0)],64)))),128))])),_:1})])}var S=n(35359),x=n(77891),P=n(78871),I=n(10298),_=n.n(I),k=(0,r.aZ)({data(){return{isNameEditing:!1,editableName:"",colorBuffer:"#000000"}},props:{colorPalette:{type:Object,required:!0},selectedColor:{type:Object,required:!0}},emits:["deleteItem","selectColor"],directives:{clickOutside:_().directive},components:{ColorPicker:S.Z},computed:{paletteName(){return this.getDisplayedPaletteName(this.colorPalette)},colors(){return[...this.colorPalette.colors,"add"]}},methods:{backgroundColorStyles(e){return{backgroundColor:e}},getDisplayedPaletteName(e){return x.Z.getDisplayedPaletteName(e)},checkSelected(e,t){return this.selectedColor.paletteId===e&&this.selectedColor.colorId===t.id},handleDeletePalette(e){this.colorBuffer="#000000",this.$emit("deleteItem",{type:"palette",content:e})},handleSelectColor(e,t){this.checkSelected(e,t)?this.handleDeSelectColor():(this.colorBuffer=t.color,this.$emit("selectColor",{paletteId:e,colorId:t.id}))},handleDeSelectColor(){this.$emit("selectColor",{paletteId:"",colorId:""})},handleDeleteColor(e,t){this.handleDeSelectColor(),x.Z.removeColor(e,t)},handleDragUpdate(e){x.Z.updateColorTemp(this.selectedColor.paletteId,this.selectedColor.colorId,e)},handleColorChangeEnd(e){const t=P.Z.deepCopy(this.selectedColor),n=this.colorBuffer;x.Z.updateColor(this.selectedColor.colorId,e).then((r=>{r?this.selectedColor.colorId===t.colorId&&this.selectedColor.paletteId===t.paletteId&&(this.colorBuffer=e):(this.selectedColor.colorId===t.colorId&&this.selectedColor.paletteId===t.paletteId&&this.handleDeSelectColor(),x.Z.updateColorTemp(t.paletteId,t.colorId,n))}))},handleAddColor(e){x.Z.createColor(e),this.$nextTick((()=>{this.$emit("selectColor",{paletteId:e,colorId:this.colorPalette.colors[this.colorPalette.colors.length-1].id})}))},handleNameClick(){this.editableName=this.paletteName,this.isNameEditing=!0,this.$nextTick((()=>{const e=this.$refs.paletteName;e.focus()}))},handleNameEditEnd(){this.isNameEditing=!1,""!==this.editableName&&this.editableName!==this.paletteName&&x.Z.setPaletteName(this.colorPalette,this.editableName)},checkNameEnter(e){"Enter"===e.key&&this.editableName===this.paletteName&&this.handleNameEditEnd()}}}),Z=n(53372);const C=(0,Z.Z)(k,[["render",N],["__scopeId","data-v-54dbaa22"],["__file","BrandKitColorPalette.vue"]]);var z=C,T=n(38058),L=Object.defineProperty,E=Object.defineProperties,D=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,$=(e,t,n)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F=(e,t)=>{for(var n in t||(t={}))M.call(t,n)&&$(e,n,t[n]);if(O)for(var n of O(t))A.call(t,n)&&$(e,n,t[n]);return e},j=(e,t)=>E(e,D(t)),B=(0,r.aZ)({emits:["deleteItem"],data(){return{selectedColor:{paletteId:"",colorId:""}}},components:{BrandKitAddBtn:g.Z,BrandKitColorPalette:z},mounted(){x.Z.fetchPalettes(this.fetchPalettes)},watch:{currentBrand(){x.Z.fetchPalettes(this.fetchPalettes)}},computed:j(F({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",isPalettesLoading:"getIsPalettesLoading"})),{colorPalettes(){return this.currentBrand.colorPalettes},renderedColorPalettes(){const e=[...this.colorPalettes];return this.isPalettesLoading&&e.push("loading"),e}}),methods:j(F({},(0,T.nv)("brandkit",{fetchPalettes:"fetchPalettes"})),{handleCreatePalette(){x.Z.createPalette().then((e=>{this.$nextTick((()=>{const t=x.Z.getColorPalette(this.colorPalettes,e);t&&(this.selectedColor={paletteId:e,colorId:t.colors[0].id})}))}))},handleDeleteItem(e){this.$emit("deleteItem",e)},handleSelectColor(e){this.selectedColor=e}})});const R=(0,Z.Z)(B,[["render",u],["__scopeId","data-v-48eaa3c3"],["__file","BrandKitTabColor.vue"]]);var H=R;const U={class:"brand-kit-tab-color__palettes"},W={key:0,class:"loading"};function V(e,t,n,o,s,a){const l=(0,r.up)("no-items-hint"),c=(0,r.up)("svg-icon"),d=(0,r.up)("brand-kit-color-palette-sidebar-mobile");return 0!==e.colorPalettes.length||e.isPalettesLoading?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"brand-kit-tab-color",style:(0,i.j5)(e.minHeightStyles())},[(0,r._)("div",U,[e.isPalettesLoading?((0,r.wg)(),(0,r.iD)("div",W,[(0,r.Wm)(c,{iconName:"loading",iconWidth:"24px",iconColor:"gray-3"})])):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(e.colorPalettes,(t=>((0,r.wg)(),(0,r.j4)(d,{key:t.id,colorPalette:t,settingmode:e.settingmode},null,8,["colorPalette","settingmode"])))),128))])],4)):((0,r.wg)(),(0,r.iD)("div",{key:0,class:"hint",style:(0,i.j5)(e.minHeightStyles())},[(0,r.Wm)(l,{type:"color",mobile:!0})],4))}const G={class:"brand-kit-color-palette"},q={class:"brand-kit-color-palette__header"},K={class:"brand-kit-color-palette__name"},Y=["title"],X={class:"brand-kit-color-palette__colors"};function Q(e,t,n,o,s,a){const l=(0,r.up)("color-btn");return(0,r.wg)(),(0,r.iD)("div",G,[(0,r._)("div",q,[(0,r._)("div",K,[(0,r._)("span",{title:e.paletteName},(0,i.zw)(e.paletteName),9,Y)])]),(0,r._)("div",X,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.colorPalette.colors,(t=>((0,r.wg)(),(0,r.j4)(l,{key:t.id,color:t.color,onClick:n=>e.handleSetColor(t.color)},null,8,["color","onClick"])))),128))])])}var J=n(38917),ee=(0,r.aZ)({emits:[],components:{ColorBtn:J.Z},data(){return{}},props:{colorPalette:{type:Object,required:!0},settingmode:{default:!1,type:Boolean}},computed:{paletteName(){return this.getDisplayedPaletteName(this.colorPalette)}},methods:{getDisplayedPaletteName(e){return x.Z.getDisplayedPaletteName(e)},handleSetColor(e){this.settingmode&&console.log("change color for",`${this.colorPalette.id}::${e}`)}}});const te=(0,Z.Z)(ee,[["render",Q],["__scopeId","data-v-6f8495fa"],["__file","BrandKitColorPaletteSidebarMobile.vue"]]);var ne=te;const re={key:0,class:"no-items-hint__icon"};function ie(e,t,n,o,s,a){const l=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["no-items-hint",{mobile:e.mobile}])},[e.mobile?((0,r.wg)(),(0,r.iD)("div",re,[(0,r.Wm)(l,{iconName:e.hints[e.type].icon,iconColor:"white",iconWidth:"42px"},null,8,["iconName"])])):(0,r.kq)("",!0),(0,r._)("span",{class:(0,i.C_)(["no-items-hint__title",{mobile:e.mobile}])},(0,i.zw)(e.$t("NN0659",{items:e.hints[e.type].items})),3),(0,r._)("p",{class:(0,i.C_)(["no-items-hint__description",{mobile:e.mobile}])},[(0,r._)("span",null,(0,i.zw)(e.$t("NN0662")),1),(0,r.Wm)(l,{iconName:"settings",iconColor:e.mobile?"gray-3":"white",iconWidth:"16px"},null,8,["iconColor"])],2),(0,r._)("span",{class:(0,i.C_)(["no-items-hint__description",{mobile:e.mobile}])},[(0,r._)("span",null,(0,i.zw)(e.hints[e.type].action),1)],2)],2)}var oe=(0,r.aZ)({emits:[],props:{type:{type:String,required:!0},mobile:{type:Boolean,default:!1}},data(){return{hints:{logo:{items:this.$t("NN0660"),action:this.$t("NN0663"),icon:"cloud-upload"},color:{items:this.$t("NN0661"),action:this.$t("NN0664"),icon:"color"}}}}});const se=(0,Z.Z)(oe,[["render",ie],["__scopeId","data-v-10b1b45e"],["__file","NoItemsHint.vue"]]);var ae=se,le=Object.defineProperty,ce=Object.defineProperties,de=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,he=(e,t,n)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,me=(e,t)=>{for(var n in t||(t={}))ge.call(t,n)&&he(e,n,t[n]);if(ue)for(var n of ue(t))pe.call(t,n)&&he(e,n,t[n]);return e},ye=(e,t)=>ce(e,de(t)),fe=(0,r.aZ)({emits:[],data(){return{}},props:{maxheight:{default:.9*window.innerHeight,type:Number},settingmode:{default:!1,type:Boolean}},components:{BrandKitColorPaletteSidebarMobile:ne,NoItemsHint:ae},mounted(){this.isSettingsOpen||x.Z.fetchPalettes(this.fetchPalettes)},watch:{currentBrand(){this.isSettingsOpen||x.Z.fetchPalettes(this.fetchPalettes)}},computed:ye(me({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",isPalettesLoading:"getIsPalettesLoading",isSettingsOpen:"getIsSettingsOpen"})),{colorPalettes(){return this.currentBrand.colorPalettes}}),methods:ye(me({},(0,T.nv)("brandkit",{fetchPalettes:"fetchPalettes"})),{minHeightStyles(){return{minHeight:`${this.maxheight}px`}}})});const be=(0,Z.Z)(fe,[["render",V],["__scopeId","data-v-0f56361a"],["__file","BrandKitTabColorSidebar.vue"]]);var ve=be;const we=e=>((0,r.dD)("data-v-64fadf72"),e=e(),(0,r.Cn)(),e),Ne={class:"primary"},Se=["innerHTML"],xe={class:"brand-kit-tab-logo-loading no-trans",key:"loading"},Pe=["src"],Ie=["onClick"],_e={class:"brand-kit-tab-logo__item__more-container relative"},ke={key:0,class:"brand-kit-tab-logo__item__menu"},Ze={class:"brand-kit-tab-logo__item__menu__name"},Ce=we((()=>(0,r._)("div",{class:"brand-kit-tab-logo__item__menu__hr"},null,-1))),ze=["onClick"],Te=["onClick"];function Le(e,t,n,s,a,l){const c=(0,r.up)("svg-icon"),d=(0,r.up)("observer-sentinel"),u=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.j4)(o.W3,{class:"brand-kit-tab-logo",name:"logo-list",tag:"div"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.renderedLogos,(n=>((0,r.wg)(),(0,r.iD)(r.HY,{key:n},["add"===n?((0,r.wg)(),(0,r.iD)("div",{class:"brand-kit-tab-logo__item add pointer relative",key:"add",onClick:t[0]||(t[0]=(...t)=>e.handleUploadLogo&&e.handleUploadLogo(...t))},[(0,r._)("span",Ne,(0,i.zw)(e.$t("NN0411")),1),(0,r._)("span",{class:"secondary",innerHTML:e.$t("NN0412")},null,8,Se),(0,r.Wm)(c,{class:"hover",iconName:"plus-origin",iconWidth:"16px",iconColor:"gray-2"})])):"loading"===n?((0,r.wg)(),(0,r.iD)("div",xe,[(0,r.Wm)(c,{iconName:"loading",iconWidth:"50px",iconColor:"gray-3"})])):"sentinel"===n?((0,r.wg)(),(0,r.j4)(d,{class:"no-trans",key:"sentinel",target:"Editor"===e.$route.name?".popup-brand-settings__window":void 0,onCallback:e.handleLoadMore},null,8,["target","onCallback"])):((0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["brand-kit-tab-logo__item relative",{hovered:e.checkMenuOpen(n)}]),key:n.id.replace("new_","")},[e.checkUploading(n)?((0,r.wg)(),(0,r.j4)(c,{key:0,iconName:"loading",iconWidth:"24px",iconColor:"gray-3"})):((0,r.wg)(),(0,r.iD)("img",{key:1,class:"brand-kit-tab-logo__item__img",src:e.getUrl(n)},null,8,Pe)),e.checkUploading(n)?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:2,class:"brand-kit-tab-logo__item__more pointer",onClick:t=>e.handleOpenMenu(n)},[(0,r._)("div",_e,[(0,r.Wm)(c,{iconName:"more_vertical",iconWidth:"24px",iconColor:"gray-2"}),e.checkMenuOpen(n)?(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",ke,[(0,r._)("div",Ze,[(0,r._)("span",null,(0,i.zw)(n.name),1)]),Ce,(0,r._)("div",{class:"brand-kit-tab-logo__item__menu__row pointer",onClick:t=>e.handleDownload(n)},[(0,r.Wm)(c,{iconName:"download",iconWidth:"24px",iconColor:"gray-2"}),(0,r._)("span",null,(0,i.zw)(e.$t("NN0010")),1)],8,ze),(0,r._)("div",{class:"brand-kit-tab-logo__item__menu__row pointer",onClick:t=>e.handleDeleteLogo(n)},[(0,r.Wm)(c,{iconName:"trash",iconWidth:"24px",iconColor:"gray-2"}),(0,r._)("span",null,(0,i.zw)(e.$t("NN0034")),1)],8,Te)])),[[u,()=>{e.menuOpenLogoId=""}]]):(0,r.kq)("",!0)])],8,Ie))],2))],64)))),128))])),_:1})}var Ee=n(51543),De=n(44306),Oe=Object.defineProperty,Me=Object.defineProperties,Ae=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,Be=(e,t,n)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Re=(e,t)=>{for(var n in t||(t={}))Fe.call(t,n)&&Be(e,n,t[n]);if($e)for(var n of $e(t))je.call(t,n)&&Be(e,n,t[n]);return e},He=(e,t)=>Me(e,Ae(t)),Ue=(0,r.aZ)({emits:["deleteItem"],data(){return{menuOpenLogoId:""}},mounted(){x.Z.fetchLogos(this.fetchLogos)},components:{ObserverSentinel:Ee.Z},directives:{clickOutside:_().directive},watch:{logos(){this.menuOpenLogoId=""},currentBrand(){x.Z.fetchLogos(this.fetchLogos)}},computed:He(Re({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",isLogosLoading:"getIsLogosLoading",logosPageIndex:"getLogosPageIndex"})),{logos(){return this.currentBrand.logos},renderedLogos(){const e=["add",...this.logos];return this.isLogosLoading?e.push("loading"):this.logosPageIndex>=0&&e.push("sentinel"),e}}),methods:He(Re({},(0,T.nv)("brandkit",{fetchLogos:"fetchLogos",fetchMoreLogos:"fetchMoreLogos",refreshLogoAsset:"refreshLogoAsset"})),{getUrl(e){return x.Z.getLogoUrl(e,this.currentBrand.id,"tiny")},checkMenuOpen(e){return this.menuOpenLogoId===e.id},checkUploading(e){return e.id.startsWith("new_")},handleOpenMenu(e){this.checkMenuOpen(e)?this.menuOpenLogoId="":this.menuOpenLogoId=e.id},handleUploadLogo(){De.Z.chooseAssets("logo")},handleDownload(e){const t=this.currentBrand,n=e.name,r=x.Z.getLogoUrl(e,t.id,"original");if(e.signed_url){const i=new Image;i.onload=()=>{this.startDownloading(r,n)},i.onerror=()=>{this.refreshLogoAsset({brand:t,logoAssetIndex:e.asset_index}).then((e=>{this.startDownloading(e.original,n)}))},i.src=r}else this.startDownloading(r,n)},handleDeleteLogo(e){this.menuOpenLogoId="",this.$emit("deleteItem",{type:"logo",content:e})},handleLoadMore(){x.Z.fetchLogos(this.fetchMoreLogos,!1)},startDownloading(e,t){const n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.click()}})});const We=(0,Z.Z)(Ue,[["render",Le],["__scopeId","data-v-64fadf72"],["__file","BrandKitTabLogo.vue"]]);var Ve=We;const Ge={key:0,class:"brand-kit-tab-logo-loading"};function qe(e,t,n,o,s,a){const l=(0,r.up)("no-items-hint"),c=(0,r.up)("observer-sentinel"),d=(0,r.up)("svg-icon"),u=(0,r.up)("gallery-photo"),g=(0,r.up)("recycle-scroller");return 0!==e.logos.length||e.isLogosLoading?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"brand-kit-tab-logo",style:(0,i.j5)(e.minHeightStyles())},[(0,r.Wm)(g,{items:e.rows},{default:(0,r.w5)((({item:t})=>[t.sentinel?((0,r.wg)(),(0,r.j4)(c,{key:0,target:".brand-kit-tab-logo",onCallback:n=>e.handleLoadMore(t)},null,8,["onCallback"])):(0,r.kq)("",!0),(0,r._)("div",{class:"brand-kit-tab-logo__row",style:(0,i.j5)(e.settingmode?" margin-top: 11px; margin-right: 11px":"")},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.list,(n=>((0,r.wg)(),(0,r.iD)(r.HY,{key:n.id},[e.checkUploading(n)?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"brand-kit-tab-logo__item pointer relative",style:(0,i.j5)(e.imageStyle(n.preview))},[(0,r.Wm)(d,{iconName:"loading",iconWidth:"24px",iconColor:"gray-3"})],4)):((0,r.wg)(),(0,r.j4)(u,{key:1,style:(0,i.j5)(e.imageStyle(n.preview)),photo:e.addPerviewUrl(t.brandId,n),vendor:"logo",inLogoPanel:!0,deletable:e.settingmode},null,8,["style","photo","deletable"]))],64)))),128))],4)])),after:(0,r.w5)((()=>[e.isLogosLoading?((0,r.wg)(),(0,r.iD)("div",Ge,[(0,r.Wm)(d,{iconName:"loading",iconWidth:"24px",iconColor:"gray-3"})])):(0,r.kq)("",!0)])),_:1},8,["items"])],4)):((0,r.wg)(),(0,r.iD)("div",{key:0,class:"hint",style:(0,i.j5)(e.minHeightStyles())},[(0,r.Wm)(l,{type:"logo",mobile:!0})],4))}var Ke=n(55187),Ye=n(45157),Xe=Object.defineProperty,Qe=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,rt=(e,t,n)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,it=(e,t)=>{for(var n in t||(t={}))tt.call(t,n)&&rt(e,n,t[n]);if(et)for(var n of et(t))nt.call(t,n)&&rt(e,n,t[n]);return e},ot=(e,t)=>Qe(e,Je(t)),st=(0,r.aZ)({emits:[],data(){return{rows:[],galleryUtils:new Ye.Z(window.innerWidth-34,95,16)}},props:{maxheight:{default:.9*window.innerHeight,type:Number},settingmode:{default:!1,type:Boolean}},mounted(){this.isSettingsOpen||x.Z.fetchLogos(this.fetchLogos)},directives:{clickOutside:_().directive},components:{ObserverSentinel:Ee.Z,GalleryPhoto:Ke.Z,NoItemsHint:ae},watch:{logos(){this.logosUpdate()},currentBrand(){this.isSettingsOpen||x.Z.fetchLogos(this.fetchLogos)}},computed:ot(it(it({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",isLogosLoading:"getIsLogosLoading",isSettingsOpen:"getIsSettingsOpen"})),(0,T.Se)("user",{isAdmin:"isAdmin"})),{logos(){return this.currentBrand.logos}}),methods:ot(it({},(0,T.nv)("brandkit",{fetchLogos:"fetchLogos",fetchMoreLogos:"fetchMoreLogos",refreshLogoAsset:"refreshLogoAsset"})),{minHeightStyles(){return{minHeight:`${this.maxheight}px`}},checkUploading(e){return e.id.startsWith("new_")},logosUpdate(){this.rows=this.galleryUtils.generateForLogo(this.logos).map(((e,t)=>{var n,r;return{list:e,id:`row_${t}`,sentinel:!1,index:t,size:(null!=(r=null==(n=e[0].preview)?void 0:n.height)?r:0)+this.galleryUtils.margin,brandId:this.currentBrand.id}})),this.rows.length&&(this.rows[Math.max(this.rows.length-10,0)].sentinel=!0)},imageStyle(e){return{width:`${e.width}px`,height:`${e.height}px`}},addPerviewUrl(e,t){const{isAdmin:n}=this;return{id:n?t.id:void 0,assetIndex:t.asset_index,type:n?"logo-public":"logo-private",ver:t.ver,width:t.width,height:t.height,preview:t.preview,urls:{prev:x.Z.getLogoUrl(t,e,"prev"),full:x.Z.getLogoUrl(t,e,"full"),larg:x.Z.getLogoUrl(t,e,"larg"),original:x.Z.getLogoUrl(t,e,"original"),midd:x.Z.getLogoUrl(t,e,"midd"),smal:x.Z.getLogoUrl(t,e,"smal"),tiny:x.Z.getLogoUrl(t,e,"tiny")}}},handleLoadMore(e){this.isSettingsOpen||(e.sentinel=!1,x.Z.fetchLogos(this.fetchMoreLogos,!1))}})});const at=(0,Z.Z)(st,[["render",qe],["__scopeId","data-v-48cb8d13"],["__file","BrandKitTabLogoSidebar.vue"]]);var lt=at;const ct={class:"brand-kit-tab-text"},dt={class:"brand-kit-tab-text__font-column__item add pointer",key:"add"},ut={class:"brand-kit-tab-text__font-column__upload-icon"},gt={class:"brand-kit-tab-text__font-column__loading no-trans",key:"loading"},pt={key:0,class:"brand-kit-tab-text__font-column__item-uploading"},ht={class:"brand-kit-tab-text__font-column__item-uploading-imgs"},mt={class:"brand-kit-tab-text__font-column__font-img loading"},yt={class:"brand-kit-tab-text__font-column__font-img loading"},ft={class:"brand-kit-tab-text__font-column__item-uploading-text"},bt={key:1,class:"brand-kit-tab-text__font-column__item pointer relative"},vt={class:"brand-kit-tab-text__font-column__font-img"},wt=["src","onError"],Nt={class:"brand-kit-tab-text__font-column__font-img"},St=["src"],xt={class:"brand-kit-tab-text__style-column"};function Pt(e,t,n,s,a,l){const c=(0,r.up)("svg-icon"),d=(0,r.up)("observer-sentinel"),u=(0,r.up)("brand-kit-text-setting");return(0,r.wg)(),(0,r.iD)("div",ct,[(0,r.Wm)(o.W3,{class:"brand-kit-tab-text__font-column",name:"font-list",tag:"div"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.renderedFonts,(n=>((0,r.wg)(),(0,r.iD)(r.HY,{key:n.id||n},["add"===n?((0,r.wg)(),(0,r.iD)("div",dt,[(0,r._)("div",ut,[(0,r.Wm)(c,{iconName:"cloud-upload",iconWidth:"32px",iconColor:"gray-1"})]),(0,r._)("div",{class:"brand-kit-tab-text__font-column__upload-hint",onClick:t[0]||(t[0]=(...t)=>e.handleUploadFont&&e.handleUploadFont(...t))},[(0,r._)("span",null,(0,i.zw)(e.$t("NN0402")),1)])])):"loading"===n?((0,r.wg)(),(0,r.iD)("div",gt,[(0,r.Wm)(c,{iconName:"loading",iconWidth:"50px",iconColor:"gray-3"})])):"sentinel"===n?((0,r.wg)(),(0,r.j4)(d,{class:"no-trans",key:"sentinel",onCallback:e.handleLoadMore},null,8,["onCallback"])):((0,r.wg)(),(0,r.iD)(r.HY,{key:3},[e.checkUploading(n)?((0,r.wg)(),(0,r.iD)("div",pt,[(0,r._)("div",ht,[(0,r._)("div",mt,[(0,r.Wm)(c,{iconName:"loading",iconWidth:"34px",iconColor:"gray-3"})]),(0,r._)("div",yt,[(0,r.Wm)(c,{iconName:"loading",iconWidth:"34px",iconColor:"gray-3"})])]),(0,r._)("div",ft,[(0,r._)("span",null,(0,i.zw)(e.$t("NN0503")),1)])])):((0,r.wg)(),(0,r.iD)("div",bt,[(0,r._)("div",vt,[(0,r._)("img",{src:n.namePrevUrl,onError:t=>e.onError(n)},null,40,wt)]),(0,r._)("div",Nt,[(0,r._)("img",{src:n.textPrevUrl},null,8,St)]),(0,r.Wm)(c,{class:"brand-kit-tab-text__font-column__trash-icon",iconName:"trash",iconWidth:"24px",iconColor:"gray-2",onClick:t=>e.handleDeleteFont(n)},null,8,["onClick"])]))],64))],64)))),128))])),_:1}),(0,r._)("div",xt,[(0,r.Wm)(u,{class:"brand-kit-tab-text__style-column__item",type:"heading",textStyleSetting:e.textStyleSetting},null,8,["textStyleSetting"]),(0,r.Wm)(u,{class:"brand-kit-tab-text__style-column__item",type:"subheading",textStyleSetting:e.textStyleSetting},null,8,["textStyleSetting"]),(0,r.Wm)(u,{class:"brand-kit-tab-text__style-column__item",type:"body",textStyleSetting:e.textStyleSetting},null,8,["textStyleSetting"])])])}const It={class:"brand-kit-text-setting relative"},_t={key:0,class:"brand-kit-text-setting__config"},kt={class:"brand-kit-text-setting__config__title"},Zt={class:"brand-kit-text-setting__config__family-size"},Ct=["src"],zt={class:"brand-kit-text-setting__config__size size-bar relative"},Tt=["value"],Lt={class:"action-bar flex-evenly brand-kit-text-setting__config__style"};function Et(e,t,n,o,s,a){const l=(0,r.up)("svg-icon"),c=(0,r.up)("property-bar"),d=(0,r.up)("value-selector"),u=(0,r.up)("panel-fonts"),g=(0,r.Q2)("click-outside"),p=(0,r.Q2)("hint");return(0,r.wg)(),(0,r.iD)("div",It,[(0,r._)("div",{class:(0,i.C_)(["brand-kit-text-setting__inner pointer",e.type]),onClick:t[0]||(t[0]=(...t)=>e.handleToggleConfig&&e.handleToggleConfig(...t))},[(0,r._)("span",{style:(0,i.j5)(e.getFontStyles())},(0,i.zw)(e.getDisplayedText()),5)],2),e.isConfigOpen?(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",_t,[(0,r._)("span",kt,(0,i.zw)(e.$t("NN0062")),1),(0,r._)("div",Zt,[(0,r.Wm)(c,{class:"pointer",onClick:e.openFontsPanel},{default:(0,r.w5)((()=>[(0,r._)("img",{src:e.fontPrevUrl,onError:t[1]||(t[1]=(...t)=>e.onError&&e.onError(...t))},null,40,Ct),(0,r.Wm)(l,{class:"pointer",iconName:"caret-down",iconWidth:"10px",iconColor:"gray-2"})])),_:1},8,["onClick"]),(0,r._)("div",zt,[(0,r._)("div",{class:"pointer",onMousedown:t[2]||(t[2]=t=>e.fontSizeStepping(-1))},[(0,r.Wm)(l,{iconName:"minus-small",iconWidth:"24px",iconColor:"gray-2"})],32),(0,r._)("button",{class:"brand-kit-text-setting__config__range-input-button",onClick:t[4]||(t[4]=(...t)=>e.handleValueModal&&e.handleValueModal(...t))},[(0,r._)("input",{class:"body-2 text-gray-2 center",type:"text",ref:"input-fontSize",onChange:t[3]||(t[3]=(...t)=>e.setSize&&e.setSize(...t)),value:e.fontSizeBuffer},null,40,Tt)]),(0,r._)("div",{class:"pointer",onMousedown:t[5]||(t[5]=t=>e.fontSizeStepping(1))},[(0,r.Wm)(l,{iconName:"plus-small",iconWidth:"24px",iconColor:"gray-2"})],32),e.isValueSelectorOpen?(0,r.wy)(((0,r.wg)(),(0,r.j4)(d,{key:0,class:"brand-kit-text-setting__config__value-selector",valueArray:e.fontSelectValue,onUpdate:e.handleValueUpdate},null,8,["valueArray","onUpdate"])),[[g,e.handleValueModal]]):(0,r.kq)("",!0)])]),(0,r._)("div",Lt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.fontIcons,((t,n)=>(0,r.wy)(((0,r.wg)(),(0,r.j4)(l,{class:(0,i.C_)(["feature-button pointer",{active:e.styleHit(t)}]),key:`${t}-${n}`,id:`icon-${t}`,iconName:t,iconWidth:"24px",iconColor:"gray-2",onMousedown:n=>e.onPropertyClick(t)},null,8,["class","id","iconName","onMousedown"])),[[p,e.hintMap[t]]]))),128))]),e.isFontsPanelOpen?(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,i.C_)(["brand-kit-text-setting__panel-fonts",{"dim-background":e.showMore}])},[(0,r.Wm)(u,{noTitle:!0,textStyleType:e.type},null,8,["textStyleType"])],2)),[[g,()=>{e.isFontsPanelOpen=!1}]]):(0,r.kq)("",!0)])),[[g,()=>{e.isConfigOpen=!1}]]):(0,r.kq)("",!0)])}var Dt=n(87669),Ot=n(32329),Mt=n(53074),At=n(74041),$t=n(16290),Ft=n(60410),jt=n.n(Ft),Bt=Object.defineProperty,Rt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,Ut=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable,Gt=(e,t,n)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qt=(e,t)=>{for(var n in t||(t={}))Wt.call(t,n)&&Gt(e,n,t[n]);if(Ut)for(var n of Ut(t))Vt.call(t,n)&&Gt(e,n,t[n]);return e},Kt=(e,t)=>Rt(e,Ht(t)),Yt=(0,r.aZ)({emits:[],props:{type:{type:String,required:!0},textStyleSetting:{type:Object,required:!0}},components:{ValueSelector:Ot.Z,PanelFonts:Dt.Z},directives:{clickOutside:_().directive},data(){return{MAPPING:{heading:`${this.$t("NN0408")}`,subheading:`${this.$t("NN0409")}`,body:`${this.$t("NN0410")}`},isConfigOpen:!1,isFontsPanelOpen:!1,isValueSelectorOpen:!1,fontSizeBuffer:0,fontSelectValue:At.Y,fontIcons:["bold","underline","italic"],hintMap:{bold:`${this.$t("NN0101")}`,underline:`${this.$t("NN0102")}`,italic:`${this.$t("NN0103")}`},fontPrevUrl:""}},mounted(){this.getFontPrev()},computed:Kt(qt({},(0,T.rn)("fontTag",["showMore"])),{textStyle(){return this.textStyleSetting[this.type+"Style"]},fontSize(){return this.textStyle.size}}),watch:{"textStyle.fontId":function(){this.getFontPrev()}},methods:Kt(qt({},(0,T.nv)("brandkit",{refreshFontAsset:"refreshFontAsset"})),{styleHit(e){switch(e){case"bold":return this.textStyle.bold;case"underline":return this.textStyle.underline;case"italic":return this.textStyle.italic}},getDisplayedText(){var e;const t=null!=(e=this.MAPPING[this.type])?e:"";return this.textStyle.isDefault?`${this.$t("NN0403",{textType:t})}`:x.Z.composeSettingText(this.textStyle,t)},getFontStyles(){const{textStyle:e}=this,t=$t.Z.textStylesRaw({weight:e.bold?"bold":"normal",style:e.italic?"italic":"normal",decoration:e.underline?"underline":"none",size:e.size});return delete t["font-size"],t.fontFamily=e.isDefault?x.Z.getDefaultFontId(this.$i18n.locale):e.fontId,t},getFontPrev(){const e=x.Z.getFontPrevUrlByFontFamily(x.Z.fillFontVer(this.textStyle.isDefault?{fontFamily:x.Z.getDefaultFontId(this.$i18n.locale),type:"public",userId:"",assetId:""}:{fontFamily:this.textStyle.fontId,type:this.textStyle.fontType,userId:this.textStyle.fontUserId,assetId:this.textStyle.fontAssetId}),"prev-name");"private"===this.textStyle.fontType&&""===e&&this.refreshFont(this.textStyle.fontAssetId),this.fontPrevUrl=e},refreshFont(e){const t=parseInt(e);this.refreshFontAsset({id:e,asset_index:t}).then((e=>{e["prev-name"]&&(this.fontPrevUrl=e["prev-name"])}))},onError(){"private"===this.textStyle.fontType&&this.refreshFont(this.textStyle.fontAssetId)},handleToggleConfig(){this.isConfigOpen||(this.isConfigOpen=!0,this.refreshFontSizeBuffer())},openFontsPanel(){this.isFontsPanelOpen=!0},handleValueModal(){if(this.isValueSelectorOpen=!this.isValueSelectorOpen,this.isValueSelectorOpen){const e=this.$refs["input-fontSize"];e.focus(),e.select()}},handleValueUpdate(e){this.fontSizeBuffer=e,x.Z.updateTextStyle(this.type,{size:e}).then((()=>{this.refreshFontSizeBuffer()}))},setSize(e){const{value:t}=e.target;if(P.Z.isValidFloat(t)){const e=P.Z.boundValue(parseFloat(t),6,800);this.fontSizeBuffer=jt().round(e,2),x.Z.updateTextStyle(this.type,{size:this.fontSizeBuffer}).then((()=>{this.refreshFontSizeBuffer()}))}},fontSizeStepping(e,t=100){const n=(new Date).getTime(),r=window.setInterval((()=>{if((new Date).getTime()-n>500)try{this.fontSizeBuffer+=e}catch(t){Mt.Z.setLogForError(t),window.removeEventListener("mouseup",i),clearInterval(r)}}),t),i=()=>{window.removeEventListener("mouseup",i),(new Date).getTime()-n<500&&(this.fontSizeBuffer+=e),x.Z.updateTextStyle(this.type,{size:this.fontSizeBuffer}).then((()=>{this.refreshFontSizeBuffer()})),clearInterval(r)};window.addEventListener("mouseup",i)},onPropertyClick(e){switch(e){case"bold":x.Z.updateTextStyle(this.type,{bold:!this.textStyle.bold});break;case"underline":x.Z.updateTextStyle(this.type,{underline:!this.textStyle.underline});break;case"italic":x.Z.updateTextStyle(this.type,{italic:!this.textStyle.italic});break}},refreshFontSizeBuffer(){this.fontSizeBuffer=this.fontSize}})});const Xt=(0,Z.Z)(Yt,[["render",Et],["__scopeId","data-v-70248a6f"],["__file","BrandKitTextSetting.vue"]]);var Qt=Xt,Jt=n(89456),en=n(50559),tn=Object.defineProperty,nn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,on=Object.getOwnPropertySymbols,sn=Object.prototype.hasOwnProperty,an=Object.prototype.propertyIsEnumerable,ln=(e,t,n)=>t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cn=(e,t)=>{for(var n in t||(t={}))sn.call(t,n)&&ln(e,n,t[n]);if(on)for(var n of on(t))an.call(t,n)&&ln(e,n,t[n]);return e},dn=(e,t)=>nn(e,rn(t)),un=(0,r.aZ)({emits:["deleteItem"],data(){return{fonts:[]}},created(){Jt.Z.loadDefaultFonts(x.Z.extractFonts(this.textStyleSetting))},mounted(){this.refreshFontUrls(),De.Z.onFontUploadStatus((e=>{"success"===e&&(0,en.h4)({group:"copy",text:`${this.$t("NN0135")}`}),"fail"===e&&(0,en.h4)({group:"error",text:`${this.$t("NN0137")}`})}))},unmounted(){De.Z.offFontUploadStatus()},components:{BrandKitTextSetting:Qt,ObserverSentinel:Ee.Z},computed:dn(cn(cn({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",rawFonts:"getFonts",isFontsLoading:"getIsFontsLoading",fontsPageIndex:"getFontsPageIndex"})),(0,T.Se)("user",{isAdmin:"isAdmin"})),{textStyleSetting(){return this.currentBrand.textStyleSetting},renderedFonts(){const e=["add",...this.fonts];return this.isFontsLoading?e.push("loading"):this.fontsPageIndex>=0&&e.push("sentinel"),e}}),watch:{rawFonts(){this.refreshFontUrls()},currentBrand(){Jt.Z.loadDefaultFonts(x.Z.extractFonts(this.textStyleSetting))}},methods:dn(cn({},(0,T.nv)("brandkit",{fetchMoreFonts:"fetchMoreFonts",refreshFontAsset:"refreshFontAsset"})),{handleUploadFont(){De.Z.chooseAssets("font")},handleDeleteFont(e){this.$emit("deleteItem",{type:"font",content:e})},handleLoadMore(){x.Z.fetchFonts(this.fetchMoreFonts,!1)},checkUploading(e){return e.id.startsWith("new_")},refreshFontUrls(){this.fonts=this.rawFonts,this.fonts=this.fonts.map((e=>{var t,n,r,i;return this.isAdmin?dn(cn({},e),{namePrevUrl:`https://template.vivipic.com/admin/${e.team_id}/asset/font/${e.id}/prev-name`,textPrevUrl:`https://template.vivipic.com/admin/${e.team_id}/asset/font/${e.id}/prev-sample`}):dn(cn({},e),{namePrevUrl:null!=(n=null==(t=e.signed_url)?void 0:t["prev-name"])?n:"",textPrevUrl:null!=(i=null==(r=e.signed_url)?void 0:r["prev-sample"])?i:""})}))},onError(e){this.refreshFontAsset(e).then(this.refreshFontUrls)}})});const gn=(0,Z.Z)(un,[["render",Pt],["__scopeId","data-v-41d3c93d"],["__file","BrandKitTabText.vue"]]);var pn=gn;const hn=e=>((0,r.dD)("data-v-b45cfd30"),e=e(),(0,r.Cn)(),e),mn={class:"brand-kit-tab-text__styles"},yn=["onClick"],fn=hn((()=>(0,r._)("br",null,null,-1))),bn={class:"brand-kit-tab-text__description"},vn={style:{display:"none"}};function wn(e,t,n,o,s,a){return(0,r.wg)(),(0,r.iD)("div",{class:"brand-kit-tab-text",style:(0,i.j5)(e.minHeightStyles())},[(0,r._)("div",mn,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Object.keys(e.MAPPING),(t=>((0,r.wg)(),(0,r.iD)("div",{class:"brand-kit-tab-text__setting pointer",key:t,onClick:n=>e.handleAddText(t)},[(0,r._)("span",{class:(0,i.C_)(["brand-kit-tab-text__title",t]),style:(0,i.j5)(e.getFontStyles(t))},(0,i.zw)(e.MAPPING[t]),7),fn,(0,r._)("span",bn,(0,i.zw)(`${e.getFontFamilyName(t)} / ${e.getFontSize(t)}px`),1),(0,r._)("span",vn,(0,i.zw)(e.MAPPING[t]),1)],8,yn)))),128))])],4)}var Nn=n(86052),Sn=Object.defineProperty,xn=Object.defineProperties,Pn=Object.getOwnPropertyDescriptors,In=Object.getOwnPropertySymbols,_n=Object.prototype.hasOwnProperty,kn=Object.prototype.propertyIsEnumerable,Zn=(e,t,n)=>t in e?Sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cn=(e,t)=>{for(var n in t||(t={}))_n.call(t,n)&&Zn(e,n,t[n]);if(In)for(var n of In(t))kn.call(t,n)&&Zn(e,n,t[n]);return e},zn=(e,t)=>xn(e,Pn(t)),Tn=(0,r.aZ)({emits:[],data(){return{MAPPING:{heading:`${this.$t("NN0408")}`,subheading:`${this.$t("NN0409")}`,body:`${this.$t("NN0410")}`}}},props:{maxheight:{default:.9*window.innerHeight,type:Number}},created(){Jt.Z.loadDefaultFonts(x.Z.extractFonts(this.textStyleSetting))},computed:zn(Cn({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand"})),{textStyleSetting(){return this.currentBrand.textStyleSetting}}),watch:{currentBrand(){Jt.Z.loadDefaultFonts(x.Z.extractFonts(this.textStyleSetting))}},methods:{minHeightStyles(){return{minHeight:`${this.maxheight}px`}},getTextStyle(e){return this.textStyleSetting[`${e}Style`]},getFontStyles(e){const t=this.getTextStyle(e),n=$t.Z.textStylesRaw({weight:t.bold?"bold":"normal",style:t.italic?"italic":"normal",decoration:t.underline?"underline":"none",size:t.size});return delete n["font-size"],n.fontFamily=t.isDefault?x.Z.getDefaultFontId(this.$i18n.locale):t.fontId,n},getFontFamilyName(e){const t=this.getTextStyle(e);return t.isDefault?x.Z.getDefaultFontName(this.$i18n.locale):t.fontName},getFontSize(e){const t=this.getTextStyle(e);return t.size},getSpanStyles(e){var t,n,r;let i={};const o=this.getTextStyle(e);return i={weight:o.bold?"bold":"normal",style:o.italic?"italic":"normal",decoration:o.underline?"underline":"none",size:o.size},o.isDefault||Object.assign(i,{font:o.fontId,type:null!=(t=o.fontType)?t:"public",userId:null!=(n=o.fontUserId)?n:"",assetId:null!=(r=o.fontAssetId)?r:""}),i},handleAddText(e){Nn.ZP.addStandardText(e,this.MAPPING[e],this.$i18n.locale,void 0,void 0,this.getSpanStyles(e))}}});const Ln=(0,Z.Z)(Tn,[["render",wn],["__scopeId","data-v-b45cfd30"],["__file","BrandKitTabTextSidebar.vue"]]);var En=Ln;const Dn={class:"brand-kit-tab-color"},On={class:"no-trans",key:"loading"};function Mn(e,t,n,i,s,a){const l=(0,r.up)("brand-kit-add-btn"),c=(0,r.up)("svg-icon"),d=(0,r.up)("brand-kit-color-palette");return(0,r.wg)(),(0,r.iD)("div",Dn,[(0,r.Wm)(l,{text:`${e.$t("NN0404")}`,onClick:e.handleCreatePalette},null,8,["text","onClick"]),(0,r.Wm)(o.W3,{class:"brand-kit-tab-color__palettes",name:"list",tag:"div"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.renderedColorPalettes,(t=>((0,r.wg)(),(0,r.iD)(r.HY,{key:t.id||t},["loading"===t?((0,r.wg)(),(0,r.iD)("div",On,[(0,r.Wm)(c,{iconName:"loading",iconWidth:"50px",iconColor:"gray-3"})])):"string"!==typeof t?((0,r.wg)(),(0,r.j4)(d,{key:t.id,colorPalette:t,selectedColor:e.selectedColor,onSelectColor:e.handleSelectColor,onDeleteItem:e.handleDeleteItem},null,8,["colorPalette","selectedColor","onSelectColor","onDeleteItem"])):(0,r.kq)("",!0)],64)))),128))])),_:1})])}var An=Object.defineProperty,$n=Object.defineProperties,Fn=Object.getOwnPropertyDescriptors,jn=Object.getOwnPropertySymbols,Bn=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,Hn=(e,t,n)=>t in e?An(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Un=(e,t)=>{for(var n in t||(t={}))Bn.call(t,n)&&Hn(e,n,t[n]);if(jn)for(var n of jn(t))Rn.call(t,n)&&Hn(e,n,t[n]);return e},Wn=(e,t)=>$n(e,Fn(t)),Vn=(0,r.aZ)({emits:["deleteItem"],data(){return{selectedColor:{paletteId:"",colorId:""}}},components:{BrandKitAddBtn:g.Z,BrandKitColorPalette:z},mounted(){x.Z.fetchPalettes(this.fetchPalettes)},watch:{currentBrand(){x.Z.fetchPalettes(this.fetchPalettes)}},computed:Wn(Un({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",isPalettesLoading:"getIsPalettesLoading"})),{colorPalettes(){return this.currentBrand.colorPalettes},renderedColorPalettes(){const e=[...this.colorPalettes];return this.isPalettesLoading&&e.push("loading"),e}}),methods:Wn(Un({},(0,T.nv)("brandkit",{fetchPalettes:"fetchPalettes"})),{handleCreatePalette(){x.Z.createPalette().then((e=>{this.$nextTick((()=>{const t=x.Z.getColorPalette(this.colorPalettes,e);t&&(this.selectedColor={paletteId:e,colorId:t.colors[0].id})}))}))},handleDeleteItem(e){this.$emit("deleteItem",e)},handleSelectColor(e){this.selectedColor=e}})});const Gn=(0,Z.Z)(Vn,[["render",Mn],["__scopeId","data-v-70c5a951"],["__file","BrandKitTabColor.vue"]]);var qn=Gn;const Kn={key:0,class:"hint"},Yn={key:1,class:"brand-kit-tab-color"},Xn={key:0,class:"loading"};function Qn(e,t,n,i,o,s){const a=(0,r.up)("no-items-hint"),l=(0,r.up)("svg-icon"),c=(0,r.up)("brand-kit-color-palette-sidebar");return 0!==e.colorPalettes.length||e.isPalettesLoading?((0,r.wg)(),(0,r.iD)("div",Yn,[e.isPalettesLoading?((0,r.wg)(),(0,r.iD)("div",Xn,[(0,r.Wm)(l,{iconName:"loading",iconWidth:"24px",iconColor:"gray-3"})])):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(e.colorPalettes,(e=>((0,r.wg)(),(0,r.j4)(c,{key:e.id,colorPalette:e},null,8,["colorPalette"])))),128))])):((0,r.wg)(),(0,r.iD)("div",Kn,[(0,r.Wm)(a,{type:"color"})]))}const Jn={class:"brand-kit-color-palette"},er={class:"brand-kit-color-palette__header"},tr={class:"brand-kit-color-palette__name"},nr=["title"],rr={class:"brand-kit-color-palette__colors"};function ir(e,t,n,o,s,a){const l=(0,r.up)("color-btn");return(0,r.wg)(),(0,r.iD)("div",Jn,[(0,r._)("div",er,[(0,r._)("div",tr,[(0,r._)("span",{title:e.paletteName},(0,i.zw)(e.paletteName),9,nr)])]),(0,r._)("div",rr,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.colorPalette.colors,(t=>((0,r.wg)(),(0,r.j4)(l,{color:t.color,key:t.id,style:(0,i.j5)(e.backgroundColorStyles),onClick:n=>e.handleSetColor(t.color)},null,8,["color","style","onClick"])))),128))])])}var or=n(89995),sr=n(75231),ar=n(52632),lr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,gr=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,hr=(e,t,n)=>t in e?lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mr=(e,t)=>{for(var n in t||(t={}))gr.call(t,n)&&hr(e,n,t[n]);if(ur)for(var n of ur(t))pr.call(t,n)&&hr(e,n,t[n]);return e},yr=(e,t)=>cr(e,dr(t)),fr=(0,r.aZ)({emits:[],components:{ColorBtn:J.Z},data(){return{}},props:{colorPalette:{type:Object,required:!0}},computed:{paletteName(){return this.getDisplayedPaletteName(this.colorPalette)},applicable(){var e,t,n,r;const{getCurrLayer:i,subLayerIdx:o}=sr.ZP;let s;switch(i.type){case"text":return"text";case"shape":return 1===(null!=(t=null==(e=i.color)?void 0:e.length)?t:0)?"shape":"";case"group":return-1===o?"":(s=i.layers[o],"text"===s.type?"text":"shape"===s.type&&1===(null!=(r=null==(n=s.color)?void 0:n.length)?r:0)?"shape":"");default:return""}},backgroundColorStyles(){return{cursor:""!==this.applicable?"pointer":"not-allowed"}}},methods:yr(mr({},(0,T.OI)({updateDocumentColors:"UPDATE_documentColors"})),{getDisplayedPaletteName(e){return x.Z.getDisplayedPaletteName(e)},handleSetColor(e){const t=this.applicable;let n=0;switch(t){case"text":n=this.handleSetTextColor(e);break;case"shape":n=this.handleSetShapeColor(e);break;default:return}ar.Z.record(),or.ZP.setCurrColor(e),this.updateDocumentColors({pageIndex:n,color:e})},handleSetTextColor(e){const{layerIndex:t,pageIndex:n,subLayerIdx:r}=sr.ZP;return At.Z.applyPropsToAll("span,paragraph",{color:e},t,r),$t.Z.updateHtml(),At.Z.updateTextPropsState({color:e}),n},handleSetShapeColor(e){const{getCurrLayer:t,layerIndex:n,pageIndex:r,subLayerIdx:i}=sr.ZP;if(-1===i){const i=[...t.color];i[0]=e,sr.ZP.updateLayerProps(r,n,{color:i})}else{const n=[...t.layers[i].color];n[0]=e,sr.ZP.updateSelectedLayerProps(r,i,{color:n})}return r}})});const br=(0,Z.Z)(fr,[["render",ir],["__scopeId","data-v-72df21ef"],["__file","BrandKitColorPaletteSidebar.vue"]]);var vr=br,wr=Object.defineProperty,Nr=Object.defineProperties,Sr=Object.getOwnPropertyDescriptors,xr=Object.getOwnPropertySymbols,Pr=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,_r=(e,t,n)=>t in e?wr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kr=(e,t)=>{for(var n in t||(t={}))Pr.call(t,n)&&_r(e,n,t[n]);if(xr)for(var n of xr(t))Ir.call(t,n)&&_r(e,n,t[n]);return e},Zr=(e,t)=>Nr(e,Sr(t)),Cr=(0,r.aZ)({emits:[],data(){return{}},components:{BrandKitColorPaletteSidebar:vr,NoItemsHint:ae},mounted(){this.isSettingsOpen||x.Z.fetchPalettes(this.fetchPalettes)},watch:{currentBrand(){this.isSettingsOpen||x.Z.fetchPalettes(this.fetchPalettes)}},computed:Zr(kr({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",isPalettesLoading:"getIsPalettesLoading",isSettingsOpen:"getIsSettingsOpen"})),{colorPalettes(){return this.currentBrand.colorPalettes}}),methods:kr({},(0,T.nv)("brandkit",{fetchPalettes:"fetchPalettes"}))});const zr=(0,Z.Z)(Cr,[["render",Qn],["__scopeId","data-v-ce6faf34"],["__file","BrandKitTabColorSidebar.vue"]]);var Tr=zr;const Lr={class:"brand-kit-tab-logo"};function Er(e,t,n,i,o,s){const a=(0,r.up)("image-list");return(0,r.wg)(),(0,r.iD)("div",Lr,[(0,r.Wm)(a,{images:e.renderedLogos,showMore:!0,showUploadArea:!0,loading:e.isLogosLoading,sentinel:!e.isLogosLoading&&e.logosPageIndex>=0,onAddImage:e.handleUploadLogo,onHandleDownload:e.handleDownload,onHandleDelete:e.handleDeleteLogo,onHandleOpenMenu:e.handleOpenMenu,onHandleCloseMenu:e.handleCloseMenu,onLoadMore:e.handleLoadMore},null,8,["images","loading","sentinel","onAddImage","onHandleDownload","onHandleDelete","onHandleOpenMenu","onHandleCloseMenu","onLoadMore"])])}var Dr=n(76109),Or=Object.defineProperty,Mr=Object.defineProperties,Ar=Object.getOwnPropertyDescriptors,$r=Object.getOwnPropertySymbols,Fr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Br=(e,t,n)=>t in e?Or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rr=(e,t)=>{for(var n in t||(t={}))Fr.call(t,n)&&Br(e,n,t[n]);if($r)for(var n of $r(t))jr.call(t,n)&&Br(e,n,t[n]);return e},Hr=(e,t)=>Mr(e,Ar(t)),Ur=(0,r.aZ)({emits:["deleteItem"],data(){return{menuOpenLogoId:""}},mounted(){x.Z.fetchLogos(this.fetchLogos)},components:{ImageList:Dr.Z},directives:{clickOutside:_().directive},watch:{logos(){this.menuOpenLogoId=""},currentBrand(){x.Z.fetchLogos(this.fetchLogos)}},computed:Hr(Rr({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",isLogosLoading:"getIsLogosLoading",logosPageIndex:"getLogosPageIndex"})),{logos(){return this.currentBrand.logos},renderedLogos(){const e=this.logos.map((e=>({type:"",key:e.id,label:e.name,src:x.Z.getLogoUrl(e,this.currentBrand.id,"tiny"),uploading:e.id.startsWith("new_"),menuopen:this.menuOpenLogoId===e.id,logo:e})));return e}}),methods:Hr(Rr({},(0,T.nv)("brandkit",{fetchLogos:"fetchLogos",fetchMoreLogos:"fetchMoreLogos",refreshLogoAsset:"refreshLogoAsset"})),{checkMenuOpen(e){return this.menuOpenLogoId===e.id},handleOpenMenu({logo:e}){e&&(this.checkMenuOpen(e)?this.menuOpenLogoId="":this.menuOpenLogoId=e.id)},handleCloseMenu(){this.menuOpenLogoId=""},handleUploadLogo(){De.Z.chooseAssets("logo")},handleDownload({logo:e}){if(!e)return;const t=this.currentBrand,n=e.name,r=x.Z.getLogoUrl(e,t.id,"original");if(e.signed_url){const i=new Image;i.onload=()=>{this.startDownloading(r,n)},i.onerror=()=>{this.refreshLogoAsset({brand:t,logoAssetIndex:e.asset_index}).then((e=>{this.startDownloading(e.original,n)}))},i.src=r}else this.startDownloading(r,n)},handleDeleteLogo({logo:e}){e&&(this.menuOpenLogoId="",this.$emit("deleteItem",{type:"logo",content:e}))},handleLoadMore(){x.Z.fetchLogos(this.fetchMoreLogos,!1)},startDownloading(e,t){const n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.click()}})});const Wr=(0,Z.Z)(Ur,[["render",Er],["__scopeId","data-v-fdd12400"],["__file","BrandKitTabLogo.vue"]]);var Vr=Wr;const Gr={key:0,class:"hint"},qr={key:1,class:"brand-kit-tab-logo"},Kr={class:"brand-kit-tab-logo__row"},Yr={key:0,class:"brand-kit-tab-logo-loading"};function Xr(e,t,n,o,s,a){const l=(0,r.up)("no-items-hint"),c=(0,r.up)("observer-sentinel"),d=(0,r.up)("svg-icon"),u=(0,r.up)("gallery-photo"),g=(0,r.up)("recycle-scroller");return 0!==e.logos.length||e.isLogosLoading?((0,r.wg)(),(0,r.iD)("div",qr,[(0,r.Wm)(g,{class:"brand-kit-tab-logo__content",items:e.rows},{default:(0,r.w5)((({item:t})=>[t.sentinel?((0,r.wg)(),(0,r.j4)(c,{key:0,target:".brand-kit-tab-logo",onCallback:n=>e.handleLoadMore(t)},null,8,["onCallback"])):(0,r.kq)("",!0),(0,r._)("div",Kr,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.list,(n=>((0,r.wg)(),(0,r.iD)(r.HY,{key:n.id},[e.checkUploading(n)?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"brand-kit-tab-logo__item pointer relative",style:(0,i.j5)(e.imageStyle(n.preview))},[(0,r.Wm)(d,{iconName:"loading",iconWidth:"24px",iconColor:"gray-3"})],4)):((0,r.wg)(),(0,r.j4)(u,{key:1,style:(0,i.j5)(e.imageStyle(n.preview)),photo:e.addPerviewUrl(t.brandId,n),vendor:"logo",inLogoPanel:!0},null,8,["style","photo"]))],64)))),128))])])),after:(0,r.w5)((()=>[e.isLogosLoading?((0,r.wg)(),(0,r.iD)("div",Yr,[(0,r.Wm)(d,{iconName:"loading",iconWidth:"24px",iconColor:"gray-3"})])):(0,r.kq)("",!0)])),_:1},8,["items"])])):((0,r.wg)(),(0,r.iD)("div",Gr,[(0,r.Wm)(l,{type:"logo"})]))}var Qr=Object.defineProperty,Jr=Object.defineProperties,ei=Object.getOwnPropertyDescriptors,ti=Object.getOwnPropertySymbols,ni=Object.prototype.hasOwnProperty,ri=Object.prototype.propertyIsEnumerable,ii=(e,t,n)=>t in e?Qr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oi=(e,t)=>{for(var n in t||(t={}))ni.call(t,n)&&ii(e,n,t[n]);if(ti)for(var n of ti(t))ri.call(t,n)&&ii(e,n,t[n]);return e},si=(e,t)=>Jr(e,ei(t)),ai=(0,r.aZ)({emits:[],data(){return{rows:[],galleryUtils:new Ye.Z(300,100,5)}},mounted(){this.isSettingsOpen||x.Z.fetchLogos(this.fetchLogos)},directives:{clickOutside:_().directive},components:{ObserverSentinel:Ee.Z,GalleryPhoto:Ke.Z,NoItemsHint:ae},watch:{logos(){this.logosUpdate()},currentBrand(){this.isSettingsOpen||x.Z.fetchLogos(this.fetchLogos)}},computed:si(oi(oi({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",isLogosLoading:"getIsLogosLoading",isSettingsOpen:"getIsSettingsOpen"})),(0,T.Se)("user",{isAdmin:"isAdmin"})),{logos(){return this.currentBrand.logos}}),methods:si(oi({},(0,T.nv)("brandkit",{fetchLogos:"fetchLogos",fetchMoreLogos:"fetchMoreLogos",refreshLogoAsset:"refreshLogoAsset"})),{checkUploading(e){return e.id.startsWith("new_")},logosUpdate(){this.rows=this.galleryUtils.generateForLogo(this.logos).map(((e,t)=>{var n,r;return{list:e,id:`row_${t}`,sentinel:!1,index:t,size:(null!=(r=null==(n=e[0].preview)?void 0:n.height)?r:0)+this.galleryUtils.margin,brandId:this.currentBrand.id}})),this.rows.length&&(this.rows[Math.max(this.rows.length-10,0)].sentinel=!0)},imageStyle(e){return{width:`${e.width}px`,height:`${e.height}px`}},addPerviewUrl(e,t){const{isAdmin:n}=this;return{id:n?t.id:void 0,assetIndex:t.asset_index,type:n?"logo-public":"logo-private",ver:t.ver,width:t.width,height:t.height,preview:t.preview,urls:{prev:x.Z.getLogoUrl(t,e,"prev"),full:x.Z.getLogoUrl(t,e,"full"),larg:x.Z.getLogoUrl(t,e,"larg"),original:x.Z.getLogoUrl(t,e,"original"),midd:x.Z.getLogoUrl(t,e,"midd"),smal:x.Z.getLogoUrl(t,e,"smal"),tiny:x.Z.getLogoUrl(t,e,"tiny")}}},handleLoadMore(e){this.isSettingsOpen||(e.sentinel=!1,x.Z.fetchLogos(this.fetchMoreLogos,!1))}})});const li=(0,Z.Z)(ai,[["render",Xr],["__scopeId","data-v-c8346932"],["__file","BrandKitTabLogoSidebar.vue"]]);var ci=li;const di={class:"brand-kit-tab-text"},ui={class:"brand-kit-tab-text__font-column__item add pointer",key:"add"},gi={class:"brand-kit-tab-text__font-column__upload-icon"},pi={class:"brand-kit-tab-text__font-column__loading no-trans",key:"loading"},hi={class:"brand-kit-tab-text__font-column__item-uploading-imgs"},mi={class:"brand-kit-tab-text__font-column__font-img loading"},yi={class:"brand-kit-tab-text__font-column__font-img loading"},fi={class:"brand-kit-tab-text__font-column__item-uploading-text"},bi={class:"brand-kit-tab-text__font-column__font-img"},vi=["src","onError"],wi={class:"brand-kit-tab-text__font-column__font-img"},Ni=["src"],Si={class:"brand-kit-tab-text__style-column"};function xi(e,t,n,s,a,l){const c=(0,r.up)("svg-icon"),d=(0,r.up)("observer-sentinel"),u=(0,r.up)("brand-kit-text-setting");return(0,r.wg)(),(0,r.iD)("div",di,[(0,r.Wm)(o.W3,{class:"brand-kit-tab-text__font-column",name:"font-list",tag:"div"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.renderedFonts,(n=>((0,r.wg)(),(0,r.iD)(r.HY,{key:n.id||n},["add"===n?((0,r.wg)(),(0,r.iD)("div",ui,[(0,r._)("div",gi,[(0,r.Wm)(c,{iconName:"cloud-upload",iconWidth:"32px",iconColor:"gray-1"})]),(0,r._)("div",{class:"brand-kit-tab-text__font-column__upload-hint",onClick:t[0]||(t[0]=(...t)=>e.handleUploadFont&&e.handleUploadFont(...t))},[(0,r._)("span",null,(0,i.zw)(e.$t("NN0402")),1)])])):"loading"===n?((0,r.wg)(),(0,r.iD)("div",pi,[(0,r.Wm)(c,{iconName:"loading",iconWidth:"50px",iconColor:"gray-3"})])):"sentinel"===n?((0,r.wg)(),(0,r.j4)(d,{class:"no-trans",key:"sentinel",onCallback:e.handleLoadMore},null,8,["onCallback"])):"string"!==typeof n?((0,r.wg)(),(0,r.iD)(r.HY,{key:3},[e.checkUploading(n)?((0,r.wg)(),(0,r.iD)("div",{class:"brand-kit-tab-text__font-column__item-uploading",key:n.id.replace("new_","")},[(0,r._)("div",hi,[(0,r._)("div",mi,[(0,r.Wm)(c,{iconName:"loading",iconWidth:"34px",iconColor:"gray-3"})]),(0,r._)("div",yi,[(0,r.Wm)(c,{iconName:"loading",iconWidth:"34px",iconColor:"gray-3"})])]),(0,r._)("div",fi,[(0,r._)("span",null,(0,i.zw)(e.$t("NN0503")),1)])])):((0,r.wg)(),(0,r.iD)("div",{class:"brand-kit-tab-text__font-column__item pointer relative",key:n.id},[(0,r._)("div",bi,[(0,r._)("img",{src:n.namePrevUrl,onError:t=>e.onError(n)},null,40,vi)]),(0,r._)("div",wi,[(0,r._)("img",{src:n.textPrevUrl},null,8,Ni)]),(0,r.Wm)(c,{class:"brand-kit-tab-text__font-column__trash-icon",iconName:"trash",iconWidth:"24px",iconColor:"gray-2",onClick:t=>e.handleDeleteFont(n)},null,8,["onClick"])]))],64)):(0,r.kq)("",!0)],64)))),128))])),_:1}),(0,r._)("div",Si,[(0,r.Wm)(u,{class:"brand-kit-tab-text__style-column__item",type:"heading",textStyleSetting:e.textStyleSetting},null,8,["textStyleSetting"]),(0,r.Wm)(u,{class:"brand-kit-tab-text__style-column__item",type:"subheading",textStyleSetting:e.textStyleSetting},null,8,["textStyleSetting"]),(0,r.Wm)(u,{class:"brand-kit-tab-text__style-column__item",type:"body",textStyleSetting:e.textStyleSetting},null,8,["textStyleSetting"])])])}var Pi=Object.defineProperty,Ii=Object.defineProperties,_i=Object.getOwnPropertyDescriptors,ki=Object.getOwnPropertySymbols,Zi=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable,zi=(e,t,n)=>t in e?Pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ti=(e,t)=>{for(var n in t||(t={}))Zi.call(t,n)&&zi(e,n,t[n]);if(ki)for(var n of ki(t))Ci.call(t,n)&&zi(e,n,t[n]);return e},Li=(e,t)=>Ii(e,_i(t)),Ei=(0,r.aZ)({emits:["deleteItem"],data(){return{fonts:[]}},created(){Jt.Z.loadDefaultFonts(x.Z.extractFonts(this.textStyleSetting))},mounted(){this.refreshFontUrls(),De.Z.onFontUploadStatus((e=>{"success"===e&&(0,en.h4)({group:"copy",text:`${this.$t("NN0135")}`}),"fail"===e&&(0,en.h4)({group:"error",text:`${this.$t("NN0137")}`})}))},unmounted(){De.Z.offFontUploadStatus()},components:{BrandKitTextSetting:Qt,ObserverSentinel:Ee.Z},computed:Li(Ti(Ti({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",rawFonts:"getFonts",isFontsLoading:"getIsFontsLoading",fontsPageIndex:"getFontsPageIndex"})),(0,T.Se)("user",{isAdmin:"isAdmin"})),{textStyleSetting(){return this.currentBrand.textStyleSetting},renderedFonts(){const e=["add",...this.fonts];return this.isFontsLoading?e.push("loading"):this.fontsPageIndex>=0&&e.push("sentinel"),e}}),watch:{rawFonts(){this.refreshFontUrls()},currentBrand(){Jt.Z.loadDefaultFonts(x.Z.extractFonts(this.textStyleSetting))}},methods:Li(Ti({},(0,T.nv)("brandkit",{fetchMoreFonts:"fetchMoreFonts",refreshFontAsset:"refreshFontAsset"})),{handleUploadFont(){De.Z.chooseAssets("font")},handleDeleteFont(e){this.$emit("deleteItem",{type:"font",content:e})},handleLoadMore(){x.Z.fetchFonts(this.fetchMoreFonts,!1)},checkUploading(e){return e.id.startsWith("new_")},refreshFontUrls(){this.fonts=this.rawFonts,this.fonts=this.fonts.map((e=>{var t,n,r,i;return this.isAdmin?Li(Ti({},e),{namePrevUrl:`https://template.vivipic.com/admin/${e.team_id}/asset/font/${e.id}/prev-name`,textPrevUrl:`https://template.vivipic.com/admin/${e.team_id}/asset/font/${e.id}/prev-sample`}):Li(Ti({},e),{namePrevUrl:null!=(n=null==(t=e.signed_url)?void 0:t["prev-name"])?n:"",textPrevUrl:null!=(i=null==(r=e.signed_url)?void 0:r["prev-sample"])?i:""})}))},onError(e){this.refreshFontAsset(e).then(this.refreshFontUrls)}})});const Di=(0,Z.Z)(Ei,[["render",xi],["__scopeId","data-v-4f4be63c"],["__file","BrandKitTabText.vue"]]);var Oi=Di;const Mi=e=>((0,r.dD)("data-v-aaae84e4"),e=e(),(0,r.Cn)(),e),Ai={class:"brand-kit-tab-text"},$i=["onDragstart","onClick"],Fi=Mi((()=>(0,r._)("br",null,null,-1))),ji={class:"brand-kit-tab-text__description"},Bi={style:{display:"none"}};function Ri(e,t,n,o,s,a){return(0,r.wg)(),(0,r.iD)("div",Ai,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Object.keys(e.MAPPING),(t=>((0,r.wg)(),(0,r.iD)("div",{class:"brand-kit-tab-text__setting pointer",key:t,draggable:"true",onDragstart:n=>e.standardTextDrag(n,t),onClick:n=>e.handleAddText(t)},[(0,r._)("span",{class:(0,i.C_)(["brand-kit-tab-text__title",t]),style:(0,i.j5)(e.getFontStyles(t))},(0,i.zw)(e.MAPPING[t]),7),Fi,(0,r._)("span",ji,(0,i.zw)(`${e.getFontFamilyName(t)} / ${e.getFontSize(t)}px`),1),(0,r._)("span",Bi,(0,i.zw)(e.MAPPING[t]),1)],40,$i)))),128))])}var Hi=n(49901),Ui=Object.defineProperty,Wi=Object.defineProperties,Vi=Object.getOwnPropertyDescriptors,Gi=Object.getOwnPropertySymbols,qi=Object.prototype.hasOwnProperty,Ki=Object.prototype.propertyIsEnumerable,Yi=(e,t,n)=>t in e?Ui(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xi=(e,t)=>{for(var n in t||(t={}))qi.call(t,n)&&Yi(e,n,t[n]);if(Gi)for(var n of Gi(t))Ki.call(t,n)&&Yi(e,n,t[n]);return e},Qi=(e,t)=>Wi(e,Vi(t)),Ji=(0,r.aZ)({emits:[],data(){return{MAPPING:{heading:`${this.$t("NN0408")}`,subheading:`${this.$t("NN0409")}`,body:`${this.$t("NN0410")}`},dragUtils:new Hi.Z}},created(){Jt.Z.loadDefaultFonts(x.Z.extractFonts(this.textStyleSetting))},computed:Qi(Xi({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand"})),{textStyleSetting(){return this.currentBrand.textStyleSetting}}),watch:{currentBrand(){Jt.Z.loadDefaultFonts(x.Z.extractFonts(this.textStyleSetting))}},methods:{getTextStyle(e){return this.textStyleSetting[`${e}Style`]},getFontStyles(e){const t=this.getTextStyle(e),n=$t.Z.textStylesRaw({weight:t.bold?"bold":"normal",style:t.italic?"italic":"normal",decoration:t.underline?"underline":"none",size:t.size});return delete n["font-size"],n.fontFamily=t.isDefault?x.Z.getDefaultFontId(this.$i18n.locale):t.fontId,n},getFontFamilyName(e){const t=this.getTextStyle(e);return t.isDefault?x.Z.getDefaultFontName(this.$i18n.locale):t.fontName},getFontSize(e){const t=this.getTextStyle(e);return t.size},getSpanStyles(e){var t,n,r;let i={};const o=this.getTextStyle(e);return i={weight:o.bold?"bold":"normal",style:o.italic?"italic":"normal",decoration:o.underline?"underline":"none",size:o.size},o.isDefault||Object.assign(i,{font:o.fontId,type:null!=(t=o.fontType)?t:"public",userId:null!=(n=o.fontUserId)?n:"",assetId:null!=(r=o.fontAssetId)?r:""}),i},handleAddText(e){Nn.ZP.addStandardText(e,this.MAPPING[e],this.$i18n.locale,void 0,void 0,this.getSpanStyles(e))},standardTextDrag(e,t){this.dragUtils.textItemDragStart(e,"standardText",{textType:t,text:this.MAPPING[t],locale:this.$i18n.locale,spanStyles:this.getSpanStyles(t)},{offsetX:20,offsetY:30})}}});const eo=(0,Z.Z)(Ji,[["render",Ri],["__scopeId","data-v-aaae84e4"],["__file","BrandKitTabTextSidebar.vue"]]);var to=eo,no=Object.defineProperty,ro=Object.defineProperties,io=Object.getOwnPropertyDescriptors,oo=Object.getOwnPropertySymbols,so=Object.prototype.hasOwnProperty,ao=Object.prototype.propertyIsEnumerable,lo=(e,t,n)=>t in e?no(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,co=(e,t)=>{for(var n in t||(t={}))so.call(t,n)&&lo(e,n,t[n]);if(oo)for(var n of oo(t))ao.call(t,n)&&lo(e,n,t[n]);return e},uo=(e,t)=>ro(e,io(t)),go=(0,r.aZ)({props:{theme:{type:String,default:"brandkit"},maxheight:{default:.9*window.innerHeight,type:Number},settingmode:{default:!1,type:Boolean}},emits:["deleteItem"],components:{BrandKitTabLogo:Vr,BrandKitTabText:Oi,BrandKitTabColor:qn,BrandKitTabLogoSidebar:ci,BrandKitTabTextSidebar:to,BrandKitTabColorSidebar:Tr,BrandKitTabLogoMobile:Ve,BrandKitTabTextMobile:pn,BrandKitTabColorMobile:H,BrandKitTabLogoSidebarMobile:lt,BrandKitTabTextSidebarMobile:En,BrandKitTabColorSidebarMobile:ve},data(){const e=x.Z.getTabKeys();return{tabs:e,tabNames:x.Z.getTabNames(this.theme),tabActions:{logo:{text:this.$t("NN0014"),action:()=>{console.log("logo")},margin:24},color:{text:this.$t("NN0404"),action:()=>{console.log("color")},margin:16},text:{text:this.$t("NN0712"),action:()=>{console.log("text")},margin:16}}}},computed:uo(co({},(0,T.Se)("brandkit",{currentBrand:"getCurrentBrand",selectedTab:"getSelectedTab"})),{notNullBrand(){return!x.Z.checkIsNullBrand(this.currentBrand)},isThemeEditorLike(){return this.theme.includes("editor")},isThemeMobile(){return this.theme.includes("mobile")}}),methods:uo(co({},(0,T.OI)("brandkit",{setSelectedTab:"SET_selectedTab"})),{marginStyles(){return{marginBottom:`${this.tabActions[this.selectedTab].margin}px`}},minHeightStyles(){return"mobile-editor"===this.theme?{minHeight:`${this.maxheight}px`}:{}},checkSelected(e){return this.selectedTab===e},handleSelectTab(e){this.setSelectedTab(e)},handleDeleteItem(e){this.$emit("deleteItem",e)}})});const po=(0,Z.Z)(go,[["render",l],["__scopeId","data-v-7e5d78c4"],["__file","BrandKitTab.vue"]]);var ho=po},68707:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var r=n(29651),i=n(819),o=n(41463);const s=e=>((0,r.dD)("data-v-3e8454b3"),e=e(),(0,r.Cn)(),e),a=["title"],l={key:0,class:"brand-selector__brand-list"},c=["onMouseenter","onClick"],d=["title"],u=["onClick"],g={key:0,class:"brand-selector__brand-list__item-menu-bridge"},p={key:1,class:"brand-selector__brand-list__item-menu"},h=["onClick"],m=["onClick"],y=s((()=>(0,r._)("div",{class:"horizontal-rule"},null,-1)));function f(e,t,n,s,f,b){const v=(0,r.up)("svg-icon"),w=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["brand-selector relative",`${e.theme}-theme`])},[e.defaultOption&&e.isDefaultSelected?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,i.C_)(["brand-selector__brand-name",`${e.theme}-theme`])},[(0,r._)("span",null,(0,i.zw)(e.$t("NN0089")),1)],2)):((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,i.C_)(["brand-selector__brand-name",[`${e.theme}-theme`,{hover:!e.$isTouchDevice()}]])},[e.isNameEditing?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,ref:"brandName","onUpdate:modelValue":t[0]||(t[0]=t=>e.editableName=t),onChange:t[1]||(t[1]=(...t)=>e.handleNameEditEnd&&e.handleNameEditEnd(...t)),onKeyup:t[2]||(t[2]=(...t)=>e.checkNameEnter&&e.checkNameEnter(...t))},null,544)),[[o.nr,e.editableName],[w,e.handleNameEditEnd]]):((0,r.wg)(),(0,r.iD)("span",{key:1,title:e.brandName,onClick:t[3]||(t[3]=(...t)=>e.handleNameClick&&e.handleNameClick(...t))},(0,i.zw)(e.brandName),9,a))],2)),(0,r._)("div",{class:(0,i.C_)(["brand-selector__dropdown pointer",[`${e.theme}-theme`,{mobile:e.$isTouchDevice()}]]),onClick:t[4]||(t[4]=(...t)=>e.handleOpenMenu&&e.handleOpenMenu(...t))},[(0,r.Wm)(v,{class:(0,i.C_)(`${e.theme}-theme`),style:(0,i.j5)(e.dropdownStyles()),iconName:"chevron-down",iconWidth:"24px"},null,8,["class","style"])],2),(0,r.Wm)(o.uT,{name:"fade-slide"},{default:(0,r.w5)((()=>[e.isBrandListOpen?(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",l,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.brands,(n=>((0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["feature-button brand-selector__brand-list__item pointer relative",{active:e.checkSelected(n),disabled:e.checkTemp(n)}]),key:n.id,onMouseenter:t=>e.handleMouseEnter(n),onMouseleave:t[5]||(t[5]=t=>e.handleMouseLeave()),onClick:t=>e.handleSetCurrentBrand(n)},[(0,r._)("span",{title:e.getDisplayedBrandName(n)},(0,i.zw)(e.getDisplayedBrandName(n)),9,d),"brandkit"===e.theme?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("div",{class:"brand-selector__brand-list__item-menu-icon pointer",onClick:(0,o.iM)((t=>e.handleBrandMenu(n)),["stop"])},[(0,r.Wm)(v,{iconName:"more_vertical",iconWidth:"24px",iconColor:"gray-2"})],8,u),e.checkBrandMenuShowing(n)?((0,r.wg)(),(0,r.iD)("div",g)):(0,r.kq)("",!0),e.checkBrandMenuShowing(n)?((0,r.wg)(),(0,r.iD)("div",p,[(0,r._)("div",{class:"brand-selector__brand-list__item-menu-row pointer",onClick:t=>e.handleCopyBrand(n)},[(0,r.Wm)(v,{iconName:"copy",iconWidth:"24px",iconColor:"gray-2"}),(0,r._)("span",null,(0,i.zw)(e.$t("NN0251")),1)],8,h),(0,r._)("div",{class:"brand-selector__brand-list__item-menu-row pointer",onClick:t=>e.handleDeleteBrand(n)},[(0,r.Wm)(v,{iconName:"trash",iconWidth:"24px",iconColor:"gray-2"}),(0,r._)("span",null,(0,i.zw)(e.$t("NN0034")),1)],8,m)])):(0,r.kq)("",!0)],64)):(0,r.kq)("",!0)],42,c)))),128)),e.defaultOption?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[y,(0,r._)("div",{class:(0,i.C_)(["feature-button brand-selector__brand-list__item pointer",{active:e.isDefaultSelected}]),onClick:t[6]||(t[6]=(...t)=>e.handleSelectDefault&&e.handleSelectDefault(...t))},[(0,r._)("span",null,(0,i.zw)(e.$t("NN0089")),1)],2)],64)):(0,r.kq)("",!0)])),[[w,()=>{e.isBrandListOpen=!1}]]):(0,r.kq)("",!0)])),_:1})],2)}var b=n(77891),v=n(93261),w=n(10298),N=n.n(w),S=n(38058),x=Object.defineProperty,P=Object.defineProperties,I=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,C=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||(t={}))k.call(t,n)&&C(e,n,t[n]);if(_)for(var n of _(t))Z.call(t,n)&&C(e,n,t[n]);return e},T=(e,t)=>P(e,I(t)),L=(0,r.aZ)({props:{theme:{type:String,default:"brandkit"},defaultOption:{type:Boolean,default:!1}},emits:["deleteItem"],data(){return{isNameEditing:!1,editableName:"",isBrandListOpen:!1,currentHoverBrandId:"",currentBrandMenuId:""}},directives:{clickOutside:N().directive},computed:T(z({},(0,S.Se)("brandkit",{brands:"getBrands",currentBrand:"getCurrentBrand",isDefaultSelected:"getIsDefaultSelected"})),{brandName(){return b.Z.getDisplayedBrandName(this.currentBrand)}}),watch:{currentHoverBrandId(e){""!==this.currentBrandMenuId&&this.currentBrandMenuId!==e&&(this.currentBrandMenuId="")},isBrandListOpen(e){e||(this.currentHoverBrandId="",this.currentBrandMenuId="")}},methods:T(z({},(0,S.OI)("brandkit",{setCurrentBrand:"SET_currentBrand",setIsDefaultSelected:"SET_isDefaultSelected"})),{dropdownStyles(){return this.isBrandListOpen?{transform:"rotate(-180deg)"}:{}},handleNameClick(){this.$isTouchDevice()||(this.editableName=this.brandName,this.isNameEditing=!0,this.$nextTick((()=>{const e=this.$refs.brandName;e.focus()})))},handleNameEditEnd(){this.isNameEditing=!1,""!==this.editableName&&this.editableName!==this.brandName&&b.Z.setBrandName(this.currentBrand,this.editableName)},handleSetCurrentBrand(e){this.isBrandListOpen=!1,this.setCurrentBrand(e),this.defaultOption&&this.setIsDefaultSelected(!1)},handleSelectDefault(){this.isBrandListOpen=!1,this.setIsDefaultSelected(!0)},handleBrandMenu(e){this.currentBrandMenuId=e.id},handleMouseEnter(e){this.currentHoverBrandId=e.id},handleMouseLeave(){this.currentHoverBrandId=""},handleCopyBrand(e){b.Z.copyBrand(e)},handleDeleteBrand(e){this.$emit("deleteItem",{type:"brand",content:e})},handleOpenMenu(){this.$isTouchDevice()?v.Z.setCurrActiveSubPanel("brand-list"):this.isBrandListOpen=!0},checkNameEnter(e){"Enter"===e.key&&this.editableName===this.brandName&&this.handleNameEditEnd()},checkSelected(e){return this.currentBrand.id===e.id&&(!this.defaultOption||!this.isDefaultSelected)},checkTemp(e){return e.id.startsWith("new_")},checkBrandMenuShowing(e){return this.currentBrandMenuId===e.id},getDisplayedBrandName(e){return b.Z.getDisplayedBrandName(e)}})}),E=n(53372);const D=(0,E.Z)(L,[["render",f],["__scopeId","data-v-3e8454b3"],["__file","BrandSelector.vue"]]);var O=D},9811:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(29651);function i(e,t,n,i,o,s){const a=(0,r.up)("observer-sentinel"),l=(0,r.up)("recycle-scroller");return(0,r.wg)(),(0,r.j4)(l,{class:"category-list",id:"recycle",items:e.list},{default:(0,r.w5)((({item:t})=>[t.sentinel?((0,r.wg)(),(0,r.j4)(a,{key:`sentinel_${t.id}`,target:`.category-list_${t.type}`,onCallback:n=>e.onLoadMore(t.moreType)},null,8,["target","onCallback"])):(0,r.kq)("",!0),(0,r.WI)(e.$slots,t.type,{key:t.id,list:t.list,title:t.title},void 0,!0)])),before:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"before",{},void 0,!0)])),after:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"after",{},void 0,!0)])),_:3},8,["items"])}var o=n(51543);const s=(0,r.aZ)({emits:["loadMore"],props:{list:{type:Array,default:()=>[]}},components:{ObserverSentinel:o.Z},methods:{onLoadMore(e){this.$emit("loadMore",e)}}});var a=s,l=n(53372);const c=(0,l.Z)(a,[["render",i],["__scopeId","data-v-30c1a2ec"],["__file","CategoryList.vue"]]);var d=c},43550:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(29651),i=n(819);const o={class:"download-type-option__name"},s={key:0,class:"download-type-option__tag"},a={key:1,class:"download-type-option__label"};function l(e,t,n,l,c,d){const u=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("span",null,(0,i.zw)(e.name),1),!e.tag||"pro"===e.tag&&e.inReviewMode?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",s,["pro"===e.tag?((0,r.wg)(),(0,r.j4)(u,{key:0,class:"download-type-option__tag__pro",iconName:"pro",iconWidth:"20px",iconColor:"alarm"})):((0,r.wg)(),(0,r.iD)("span",a,(0,i.zw)(e.tag),1))]))])}var c=n(47147),d=(0,r.aZ)({emits:[],props:{name:{type:String,required:!0},tag:{type:String}},computed:{inReviewMode(){return c.Z.inReviewMode}}}),u=n(53372);const g=(0,u.Z)(d,[["render",l],["__scopeId","data-v-237a2898"],["__file","DownloadTypeOption.vue"]]);var p=g},94621:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(29651);const i=["viewBox","width","height"],o=["id"],s=["xlink:href","filter"];function a(e,t,n,a,l,c){return(0,r.wg)(),(0,r.iD)("svg",{viewBox:e.svgViewBox,width:e.svgImageWidth,height:e.svgImageHeight,preserveAspectRatio:"none",role:"image"},[(0,r._)("defs",null,[(0,r._)("filter",{id:e.filterId,"color-interpolation-filters":"sRGB"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.svgFilterElms,((e,t)=>((0,r.wg)(),(0,r.j4)((0,r.LL)(e.tag),(0,r.dG)({key:`svgFilter${t}`},e.attrs),{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.child,(e=>((0,r.wg)(),(0,r.j4)((0,r.LL)(e.tag),(0,r.dG)({key:e.tag},e.attrs),null,16)))),128))])),_:2},1040)))),128))],8,o)]),(0,r._)("image",(0,r.dG)({"xlink:href":e.src},e.style,{filter:e.imageFilter}),null,16,s)],8,i)}var l=n(78871),c=n(83122),d=(0,r.aZ)({emits:[],props:{src:{type:String,required:!0},styles:{type:Object,required:!0}},computed:{svgImageWidth(){const{imgWidth:e}=this.styles;return e},svgImageHeight(){const{imgHeight:e}=this.styles;return e},svgViewBox(){return`0 0 ${this.svgImageWidth} ${this.svgImageHeight}`},svgFilterElms(){const{adjust:e}=this.styles;return c.Z.convertAdjustToSvgFilter(e||{},{styles:this.styles})},filterId(){const e=l.Z.generateRandomString(5);return`filter__${e}`},imageFilter(){return this.svgFilterElms.length?`url(#${this.filterId})`:""},style(){const{svgImageWidth:e,svgImageHeight:t}=this;return e>=t?{width:`${e}px`}:{height:`${t}px`}}}}),u=n(53372);const g=(0,u.Z)(d,[["render",a],["__file","NuAdjustImage.vue"]]);var p=g},16646:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(29651),i=n(819);const o={class:"mobile-type-selector flex flex-between items-center py-5"},s={class:"full-width flex flex-between items-center"};function a(e,t,n,a,l,c){const d=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",s,[e.title?((0,r.wg)(),(0,r.iD)("span",{key:0,class:(0,i.C_)(`${e.textColor} ${e.textSize}`)},(0,i.zw)(e.title),3)):(0,r.kq)("",!0),e.description?((0,r.wg)(),(0,r.iD)("span",{key:1,class:(0,i.C_)(["text-gray-3 mr-10",e.textSize])},(0,i.zw)(e.description),3)):(0,r.kq)("",!0),(0,r.WI)(e.$slots,"default")]),(0,r.Wm)(d,{iconName:e.iconName,iconWidth:"18px",iconColor:"gray-2"},null,8,["iconName"])])}var l=(0,r.aZ)({props:{iconName:{type:String,default:"chevron-right"},title:{type:String},description:{type:String},textColor:{type:String,default:"text-gray-1"},textSize:{type:String,default:"body-MD"}}}),c=n(53372);const d=(0,c.Z)(l,[["render",a],["__file","MobileJumpBtn.vue"]]);var u=d},26072:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(29651),i=n(819);const o={class:"mobile-props-toggle flex flex-between items-center full-width body-MD"};function s(e,t,n,s,a,l){const c=(0,r.up)("toggle-btn");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("span",null,(0,i.zw)(e.title),1),(0,r.Wm)(c,{modelValue:e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:modelValue",t)),width:40},null,8,["modelValue"])])}function a(e,t,n,o,s,a){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["toggle",[e.modelValue?"bg-blue-1":"bg-gray-4"]]),style:(0,i.j5)(e.toggleStyles),onClick:t[0]||(t[0]=(...t)=>e.toggle&&e.toggle(...t))},[(0,r._)("div",{class:"toggle__btn",style:(0,i.j5)(e.toggleBtnStyle)},null,4)],6)}var l=(0,r.aZ)({props:{width:{type:Number,default:60},modelValue:[Number,String,Boolean]},emits:["update:modelValue"],computed:{toggleStyles(){return{width:`${this.width}px`,height:this.width/2+"px"}},toggleBtnStyle(){return{transform:`translateX(${this.modelValue?this.width/2:0}px) scale(0.8)`}}},methods:{toggle(){this.$emit("update:modelValue",!this.modelValue)}}}),c=n(53372);const d=(0,c.Z)(l,[["render",a],["__scopeId","data-v-0cb12576"],["__file","ToggleBtn.vue"]]);var u=d,g=(0,r.aZ)({components:{ToggleBtn:u},props:{title:{type:String,default:""},modelValue:[String,Number,Boolean]}});const p=(0,c.Z)(g,[["render",s],["__file","MobilePropsToggle.vue"]]);var h=p},69243:function(e,t,n){"use strict";n.d(t,{Z:function(){return ae}});var r=n(29651),i=n(819),o=n(41463);const s={key:1,class:"trim"},a={key:1,class:"pages-loading"};function l(e,t,n,l,c,d){const u=(0,r.up)("nu-bg-image"),g=(0,r.up)("nu-layer");return(0,r.wg)(),(0,r.iD)("div",{class:"overflow-container",style:(0,i.j5)(e.pageStyles)},[(0,r._)("div",{class:"full-size",style:(0,i.j5)(e.stylesWith3DPreserve)},[e.imgLoaded?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,i.C_)(["full-size","page-content"]),style:(0,i.j5)(e.pageContentStyles),ref:"page-content",onDrop:t[1]||(t[1]=(0,o.iM)(((...t)=>e.onDrop&&e.onDrop(...t)),["prevent"])),onDragover:t[2]||(t[2]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:t[3]||(t[3]=(0,o.iM)((()=>{}),["prevent"])),onContextmenu:[t[4]||(t[4]=(0,o.iM)((()=>{}),["prevent"])),t[5]||(t[5]=(0,o.iM)(((...t)=>e.onRightClick&&e.onRightClick(...t)),["right","stop"]))],onDblclick:t[6]||(t[6]=t=>e.pageDblClickHandler()),onTap:t[7]||(t[7]=(...t)=>e.tapPageContent&&e.tapPageContent(...t))},[(0,r._)("div",{class:(0,i.C_)(["content full-size",`nu-page-content-${e.pageIndex}`]),style:(0,i.j5)(e.contentStyles)},[((0,r.wg)(),(0,r.j4)(u,{image:e.config.backgroundImage,pageIndex:e.pageIndex,page:e.config,color:e.config.backgroundColor,key:e.config.backgroundImage.config.id,onMousedown:t[0]||(t[0]=(0,o.iM)((t=>e.pageClickHandler()),["left"])),contentScaleRatio:e.contentScaleRatio,padding:e.contentStyles.margin},null,8,["image","pageIndex","page","color","contentScaleRatio","padding"])),(0,r._)("div",{class:(0,i.C_)(["layers-wrapper",{preserve3D:!e.isTouchDevice&&e.isMultipleSelect}])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.config.layers,((t,n)=>((0,r.wg)(),(0,r.j4)(g,{key:t.id,dataIndex:`${n}`,dataPindex:`${e.pageIndex}`,snapUtils:e.snapUtils,layerIndex:n,pageIndex:e.pageIndex,page:e.config,config:t,contentScaleRatio:e.contentScaleRatio,forceRender:e.forceRender,lazyLoadTarget:e.lazyLoadTarget,inPreview:e.inPreview},null,8,["dataIndex","dataPindex","snapUtils","layerIndex","pageIndex","page","config","contentScaleRatio","forceRender","lazyLoadTarget","inPreview"])))),128))],2)],6),e.isShowBleed?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"bleed-line",style:(0,i.j5)(e.bleedLineStyles)},null,4)):(0,r.kq)("",!0),"backendRendering"===e.userId&&e.backendRenderParams.isTrim?((0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",{class:"trim__tl",style:(0,i.j5)(e.trimStyles.tl)},null,4),(0,r._)("div",{class:"trim__tr",style:(0,i.j5)(e.trimStyles.tr)},null,4),(0,r._)("div",{class:"trim__bl",style:(0,i.j5)(e.trimStyles.bl)},null,4),(0,r._)("div",{class:"trim__br",style:(0,i.j5)(e.trimStyles.br)},null,4)])):(0,r.kq)("",!0)],36)):((0,r.wg)(),(0,r.iD)("div",a))],4)],4)}const c=["src"],d=["viewBox"],u=["id"],g=["filter","width","height","xlink:href"];function p(e,t,n,s,a,l){return e.isBgCtrlImgLoaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:0,class:"nu-background-image",draggable:"false",style:(0,i.j5)(e.mainStyles),onClick:t[4]||(t[4]=(...t)=>e.setInBgSettingMode&&e.setInBgSettingMode(...t)),onTap:t[5]||(t[5]=(...t)=>e.dblTap&&e.dblTap(...t))},[(0,r.wy)((0,r._)("div",{class:"nu-background-image__image",style:(0,i.j5)(e.imgStyles)},[(0,r.wy)((0,r._)("img",{ref:"img",crossorigin:"anonymous",draggable:"false",onError:t[0]||(t[0]=(...t)=>e.onError&&e.onError(...t)),onLoad:t[1]||(t[1]=(...t)=>e.onLoad&&e.onLoad(...t)),src:e.finalSrc},null,40,c),[[o.F8,!e.isAdjustImage]]),e.isAdjustImage?((0,r.wg)(),(0,r.iD)("svg",{key:0,class:"nu-background-image__svg",viewBox:`0 0 ${e.imgNaturalSize.width} ${e.imgNaturalSize.height}`,preserveAspectRatio:"none",role:"image"},[(0,r._)("defs",null,[(0,r._)("filter",{id:e.filterId,"color-interpolation-filters":"sRGB"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.svgFilterElms,((t,n)=>((0,r.wg)(),(0,r.j4)((0,r.LL)(t.tag),(0,r.dG)({key:`${e.filterId+n}`},t.attrs),{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.child,(e=>((0,r.wg)(),(0,r.j4)((0,r.LL)(e.tag),(0,r.dG)({key:e.tag},e.attrs),null,16)))),128))])),_:2},1040)))),128))],8,u)]),(0,r._)("image",{class:"nu-background-image__adjust-image",ref:"adjust-img",crossorigin:"anonymous",filter:`url(#${e.filterId})`,width:e.imgNaturalSize.width,height:e.imgNaturalSize.height,onError:t[2]||(t[2]=(...t)=>e.onError&&e.onError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.onAdjustImgLoad&&e.onAdjustImgLoad(...t)),"xlink:href":e.finalSrc},null,40,g)],8,d)):(0,r.kq)("",!0)],4),[[o.F8,!e.isColorBackground]]),(0,r._)("div",{class:"filter-container",style:(0,i.j5)(e.filterContainerStyles())},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.cssFilterElms,((e,t)=>((0,r.wg)(),(0,r.j4)((0,r.LL)(e.tag),(0,r.dG)({key:`cssFilter${t}`},e.attrs),null,16)))),128))],4)],36))}var h=n(71446),m=n(3716),y=n(93261),f=n(78871),b=n(70118),v=n(83122),w=n(67579),N=n(3162),S=n(53074),x=n(32905),P=n(38058),I=n(94621),_=Object.defineProperty,k=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,L=(e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E=(e,t)=>{for(var n in t||(t={}))z.call(t,n)&&L(e,n,t[n]);if(C)for(var n of C(t))T.call(t,n)&&L(e,n,t[n]);return e},D=(e,t)=>k(e,Z(t)),O=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),M=(0,r.aZ)({emits:[],props:{image:{type:Object,required:!0},color:{type:String,required:!0},pageIndex:{type:Number,required:!0},page:{type:Object,required:!0},contentScaleRatio:{default:1,type:Number},padding:{type:String,default:"0"}},data(){return{src:"",imgNaturalSize:{width:0,height:0},errorSrcIdentifier:{identifier:"",retry:0}}},watch:{srcObj:{deep:!0,handler:function(){this.isColorBackground?this.src="":this.previewAsLoading().then((()=>this.handleIsTransparent()))}},getImgDimension(e,t){this.handleDimensionUpdate(e,t)},"image.config.imgControl"(e){e?this.setBgImgConfig(this.pageIndex):this.setBgImgConfig(void 0)},isBlurImg(e){const{imgWidth:t,imgHeight:n}=this.image.config.styles,r=N.Z.getSrc(this.image.config,e?N.Z.getSrcSize(this.image.config.srcObj,Math.max(t,n)):this.getImgDimension);N.Z.imgLoadHandler(r,(()=>{this.isBlurImg===e&&(this.src=r)}),{crossOrigin:!0})}},created(){return O(this,null,(function*(){const{srcObj:e}=this;if(!e||!e.type)return;const{assetId:t}=this.image.config.srcObj;if("private"===e.type){const e=this.getEditorViewImages;if(!e(t)){yield this.updateImages({assetSet:new Set([t])});const{imgWidth:e,imgHeight:n}=this.image.config.styles,r=N.Z.getSrc(this.image.config,this.isBlurImg?N.Z.getSrcSize(this.image.config.srcObj,Math.max(e,n)):this.getImgDimension);N.Z.imgLoadHandler(r,(()=>{this.src=r}),{crossOrigin:!0})}}if("backendRendering"!==this.userId)this.previewAsLoading().then((()=>this.handleIsTransparent()));else{const{imgWidth:e,imgHeight:t}=this.image.config.styles;this.src=N.Z.getSrc(this.image.config,this.isBlurImg?N.Z.getSrcSize(this.image.config.srcObj,Math.max(e,t)):this.getImgDimension),this.isAdjustImage&&N.Z.imgLoadHandler(this.src,(e=>{this.handleIsTransparent(e)}))}}))},components:{NuAdjustImage:I.Z},computed:D(E(E(E({},(0,P.Se)({scaleRatio:"getPageScaleRatio",getEditorViewImages:"file/getEditorViewImages",imgControlPageIdx:"imgControl/imgControlPageIdx",isBgImgCtrl:"imgControl/isBgImgCtrl",isBgCtrlImgLoaded:"imgControl/isBgCtrlImgLoaded"})),(0,P.rn)("mobileEditor",{inAllPagesMode:"mobileAllPageMode"})),(0,P.rn)("user",["imgSizeMap","userId"])),{imgStyles(){return this.stylesConverter()},finalSrc(){return"Preview"===this.$route.name?N.Z.appendCompQueryForVivipic(this.src):this.src},isColorBackground(){const{srcObj:e}=this.image.config;return!e||""===e.assetId},getImgDimension(){const{srcObj:e,styles:{imgWidth:t,imgHeight:n}}=this.image.config;let r=t,i=n;const o=x.Z.getImageDpiRatio(this.page);return r*=o,i*=o,N.Z.getSrcSize(e,Math.max(r,i)*(this.scaleRatio/100))},pageSize(){return x.Z.removeBleedsFromPageSize(this.page)},srcObj(){return this.image.config.srcObj},flipStyles(){const{horizontalFlip:e,verticalFlip:t}=this.image.config.styles;return h.Z.convertFlipStyle(e,t)},imageSize(){const{image:e}=this,t=1,n=e.config.styles.imgWidth/e.config.styles.imgHeight,r=e.config.styles.imgWidth+(n<1?2*t:2*t*n),i=e.config.styles.imgHeight+(n>1?2*t:2*t/n),o=e.posX-(n<1?t:t*n),s=e.posY-(n>1?t:t/n),a=this.contentScaleRatio*(this.$isTouchDevice()?.01*this.scaleRatio:1);return{width:r*a,height:i*a,x:o*a,y:s*a}},mainStyles(){return D(E({},this.isAdjustImage&&!this.inAllPagesMode&&{transform:"translateZ(0)"}),{margin:this.padding.split(" ").map((e=>"-"+e)).join(" "),padding:this.padding,opacity:this.image.config.styles.opacity/100,backgroundColor:this.color})},isAdjustImage(){const{styles:e}=this.image.config,t=Object.entries(e.adjust||{}).filter((([,e])=>"number"===typeof e&&0!==e));return t.length>1||1===t.length&&"halation"!==t[0][0]},cssFilterElms(){const{adjust:e}=this.image.config.styles,{width:t,height:n}=this.pageSize;if(!e)return[];const r=[];if(e.halation){const i=this.contentScaleRatio*(this.$isTouchDevice()?.01*this.scaleRatio:1),o={width:t/2*i,x:t/2*i,y:n/2*i};r.push(...v.Z.getHalation(e.halation,o))}return r},svgFilterElms(){const{adjust:e}=this.image.config.styles;return v.Z.convertAdjustToSvgFilter(e||{},{styles:this.image.config.styles})},filterId(){const e=this.$store.getters["user/getBrowserInfo"],t="Safari"===e.name&&"16.3"!==e.version&&f.Z.versionCheck({greaterThan:"16.0",lessThan:"16.3"}),n="iOS"===e.os.family&&"16.3"!==e.os.version&&f.Z.versionCheck({greaterThan:"16.0",lessThan:"16.3",version:e.os.version});if(t||n){const{styles:{adjust:e},id:t}=this.image.config,{blur:n=0,brightness:r=0,contrast:i=0,halation:o=0,hue:s=0,saturate:a=0,warm:l=0}=e,c=t+n.toString()+r.toString()+i.toString()+o.toString()+s.toString()+a.toString()+l.toString();return`filter__${c}`}{const e=f.Z.generateRandomString(5);return`filter__${e}`}},isBlurImg(){var e;return!!(null==(e=this.image.config.styles.adjust)?void 0:e.blur)}}),methods:D(E(E(E({},(0,P.nv)("file",["updateImages"])),(0,P.nv)("brandkit",["updateLogos"])),(0,P.OI)({setBgImageSrc:"SET_backgroundImageSrc",setBgImgConfig:"imgControl/SET_BG_CONFIG",setBgImageControl:"SET_backgroundImageControl"})),{getErrorSrcIdentifier(e){const{srcObj:t,styles:n}=e;return t.type+t.assetId+t.userId+(n.adjust.blur>0?"_blur":"")},onError(){this._onError()},_onError(e=!1){if(!this.src&&!e)return;if(this.errorSrcIdentifier.identifier===this.getErrorSrcIdentifier(this.image.config)){if(3===this.errorSrcIdentifier.retry)return;this.errorSrcIdentifier.retry++}else this.errorSrcIdentifier.identifier=this.getErrorSrcIdentifier(this.image.config),this.errorSrcIdentifier.retry=1;const t=this.image.config.srcObj;let n;switch(t.type){case"private":n=()=>O(this,null,(function*(){return yield this.updateImages({assetSet:new Set([this.image.config.srcObj.assetId])})}));break;case"logo-private":n=()=>O(this,null,(function*(){return yield this.updateLogos({assetSet:new Set([this.image.config.srcObj.assetId])})}));break}if(void 0!==n)try{n().then((()=>{const{imgWidth:e,imgHeight:t}=this.image.config.styles,n=N.Z.appendOriginQuery(N.Z.getSrc(this.image.config,this.isBlurImg?Math.max(e,t):this.getImgDimension));N.Z.imgLoadHandler(n,(()=>{this.src=n}),{crossOrigin:!0})}))}catch(r){0!==this.src.indexOf("data:image/png;base64")&&fetch(this.src).then((e=>{const{status:t,statusText:n}=e;this.logImgError(r,"fetch result: "+t+n)})).catch((e=>{this.logImgError(r,"fetch result: "+e)}))}},dblTap(e){m.Z.click(e,{doubleClickCallback:()=>{this.image.config.srcObj.type&&(this.setBgImageControl({pageIndex:this.pageIndex,imgControl:!0}),y.Z.setCurrActivePanel("crop"))}})},handleIsTransparent(e){this.$refs.img&&this.$store.commit("SET_backgroundImageStyles",{pageIndex:this.pageIndex,styles:{shadow:{isTransparent:w.ZP.isTransparentBg(null!=e?e:this.$refs.img)}}})},filterContainerStyles(){return{margin:this.padding}},previewAsLoading(){return O(this,null,(function*(){let e=!1;const t=this.image.config,n=N.Z.getImgIdentifier(this.image.config.srcObj);if(t.previewSrc){const r=t.previewSrc;N.Z.imgLoadHandler(r,(()=>{N.Z.getImgIdentifier(this.image.config.srcObj)!==n||e||(this.src=r)}),{crossOrigin:!0}).catch((()=>{o===t.previewSrc&&this._onError(!0),console.warn("bg-img preview cannot be loaded!")}))}const{imgWidth:r,imgHeight:i}=this.image.config.styles,o=N.Z.appendOriginQuery(N.Z.getSrc(this.image.config,this.isBlurImg?N.Z.getSrcSize(this.image.config.srcObj,Math.max(r,i)):this.getImgDimension));if(o&&o!==t.previewSrc)return new Promise(((t,r)=>{N.Z.imgLoadHandler(o,(()=>{N.Z.getImgIdentifier(this.image.config.srcObj)===n&&(e=!0,this.src=o,this.isBlurImg||(this.preLoadImg("pre",this.getImgDimension),this.preLoadImg("next",this.getImgDimension)),t())}),{error:()=>{r(new Error(`cannot load the current image, src: ${o}`)),this._onError(!0)},crossOrigin:!0})}))}))},stylesConverter(){return{width:`${this.imageSize.width}px`,height:`${this.imageSize.height}px`,transform:`translate(${this.imageSize.x}px, ${this.imageSize.y}px) ${this.flipStyles.transform}`}},setInBgSettingMode(){y.Z.setInBgSettingMode(!0),b.Z.deselect()},handleDimensionUpdate(e,t){if(this.isBlurImg)return;const n=N.Z.appendOriginQuery(N.Z.getSrc(this.image.config,e));if(n){const r=N.Z.getImgIdentifier(this.image.config.srcObj);N.Z.imgLoadHandler(n,(()=>O(this,null,(function*(){N.Z.getImgIdentifier(this.image.config.srcObj)===r&&(this.src=n,e>t?(yield this.preLoadImg("next",e),this.preLoadImg("pre",e)):(yield this.preLoadImg("pre",e),this.preLoadImg("next",e)))}))),{crossOrigin:!0})}},logImgError(e,...t){if(0!==this.src.indexOf("data:image/png;base64"))return;const{srcObj:{type:n,assetId:r,userId:i}}=this.image.config;let o=`bg-image errorsrcObj: { type: ${n}, assetId: ${r}, userId: ${i} }\nError config src: ${this.src}`;t.forEach((e=>{o+=`\n${e}`})),console.warn(o),S.Z.setLog(o)},preLoadImg(e,t){return O(this,null,(function*(){return new Promise(((n,r)=>{var i,o,s;const a=N.Z.getSrcSize((null==(o=null==(i=this.image.config.adjustSrcObj)?void 0:i.srcObj)?void 0:o.type)?null==(s=this.image.config.adjustSrcObj)?void 0:s.srcObj:this.image.config.srcObj,t,e),l=N.Z.appendOriginQuery(N.Z.getSrc(this.image.config,a));N.Z.imgLoadHandler(l,(()=>n()),{error:()=>{r(new Error(`cannot preLoad the ${e}-image`)),fetch(l).then((e=>{const{status:t,statusText:n}=e;this.logImgError("img src:",l,"fetch result: "+t+n)})).catch((e=>{this.logImgError("img src:",l,"fetch result: "+e)}))},crossOrigin:!0})}))}))},onAdjustImgLoad(e){N.Z.imgLoadHandler(this.src,(e=>{this.imgNaturalSize.width===e.width&&this.imgNaturalSize.height===e.height||(this.imgNaturalSize.width=e.width,this.imgNaturalSize.height=e.height)}),{crossOrigin:!0})},onLoad(e){const t=e.target;this.imgNaturalSize.width===t.width&&this.imgNaturalSize.height===t.height||(this.imgNaturalSize.width=t.width,this.imgNaturalSize.height=t.height)}})}),A=n(53372);const $=(0,A.Z)(M,[["render",p],["__scopeId","data-v-0e0e2b7e"],["__file","NuBgImage.vue"]]);var F=$,j=n(23931),B=n(6400),R=n(49901),H=n(75231),U=n(98824),W=n(50707),V=n(53556),G=n(44306),q=n(50559),K=Object.defineProperty,Y=Object.defineProperties,X=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,te=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ne=(e,t)=>{for(var n in t||(t={}))J.call(t,n)&&te(e,n,t[n]);if(Q)for(var n of Q(t))ee.call(t,n)&&te(e,n,t[n]);return e},re=(e,t)=>Y(e,X(t)),ie=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),oe=(0,r.aZ)({emits:[],components:{NuBgImage:F},props:{snapUtils:Object,config:{type:Object,required:!0},pageIndex:{type:Number,required:!0},contentScaleRatio:{default:1,type:Number},forceRender:{default:!1,type:Boolean},lazyLoadTarget:{type:String,default:".editor-view"},inPreview:{default:!1,type:Boolean}},data(){return{imgLoaded:!1,imgLoading:!1,dragUtils:new R.Z}},computed:re(ne(ne(ne(ne({},(0,P.Se)({setLayersDone:"file/getSetLayersDone",isProcessImgShadow:"shadow/isProcessing",isUploadImgShadow:"shadow/isUploading",currSelectedInfo:"getCurrSelectedInfo",scaleRatio:"getPageScaleRatio",getCurrFunctionPanelType:"getCurrFunctionPanelType",isUploadingShadowImg:"shadow/isUploading",isHandling:"shadow/isHandling",isShowPagePanel:"page/getShowPagePanel",currSelectedPageIndex:"getCurrSelectedPageIndex"})),(0,P.Se)("imgControl",{isImgCtrl:"isImgCtrl"})),(0,P.rn)("user",["imgSizeMap","userId","verUni","backendRenderParams"])),(0,P.rn)("shadow",["uploadId","handleId","uploadShadowImgs"])),{isHandleShadow(){return this.isProcessImgShadow||this.isUploadImgShadow},pageStyles(){const e=this.contentScaleRatio*(this.inPreview||!this.$isTouchDevice()?1:.01*this.scaleRatio);return{width:`${this.config.width*e+this.margin.right}px`,height:`${this.config.height*e+this.margin.bottom}px`,transformStyle:x.Z._3dEnabledPageIndex===this.pageIndex?"preserve-3d":""}},pageContentStyles(){return{transformStyle:x.Z._3dEnabledPageIndex===this.pageIndex?"preserve-3d":""}},stylesWith3DPreserve(){return{transformStyle:x.Z._3dEnabledPageIndex===this.pageIndex?"preserve-3d":""}},isShowBleed(){return"backendRendering"!==this.userId&&this.config.isEnableBleed},contentStyles(){return this.config.isEnableBleed?{width:(this.config.width-this.config.bleeds.left-this.config.bleeds.right)*this.contentScaleRatio+"px",height:(this.config.height-this.config.bleeds.top-this.config.bleeds.bottom)*this.contentScaleRatio+"px",margin:[this.config.bleeds.top*this.contentScaleRatio+"px",this.config.bleeds.right*this.contentScaleRatio+this.margin.right+"px",this.config.bleeds.bottom*this.contentScaleRatio+this.margin.bottom+"px",this.config.bleeds.left*this.contentScaleRatio+"px"].join(" ")}:{padding:["0px",this.margin.right+"px",this.margin.bottom+"px","0px"].join(" ")}},bleedLineStyles(){return{top:(this.config.bleeds.top-1)*this.contentScaleRatio+"px",bottom:(this.config.bleeds.bottom-1)*this.contentScaleRatio+this.margin.bottom+"px",left:(this.config.bleeds.left-1)*this.contentScaleRatio+"px",right:(this.config.bleeds.right-1)*this.contentScaleRatio+this.margin.right+"px",border:"backendRendering"===this.userId?`${this.contentScaleRatio}px solid white`:`${this.config.isEnableBleed?this.contentScaleRatio:0}px dashed white`,boxShadow:"backendRendering"===this.userId?"none":"0 0 3px 1px rgba(0, 0, 0, 0.15)"}},trimStyles(){return{tl:{top:"-2px",bottom:`${(this.config.height-this.config.bleeds.top)*this.contentScaleRatio+this.margin.bottom}px`,left:"-2px",right:`${(this.config.width-this.config.bleeds.left)*this.contentScaleRatio+this.margin.right}px`,borderWidth:`${this.contentScaleRatio}px`},tr:{top:"-2px",bottom:`${(this.config.height-this.config.bleeds.top)*this.contentScaleRatio+this.margin.bottom}px`,left:(this.config.width-this.config.bleeds.right)*this.contentScaleRatio+"px",right:"-2px",borderWidth:`${this.contentScaleRatio}px`},bl:{top:(this.config.height-this.config.bleeds.bottom)*this.contentScaleRatio+"px",bottom:"-2px",left:"-2px",right:`${(this.config.width-this.config.bleeds.left)*this.contentScaleRatio+this.margin.right}px`,borderWidth:`${this.contentScaleRatio}px`},br:{top:(this.config.height-this.config.bleeds.bottom)*this.contentScaleRatio+"px",bottom:"-2px",left:(this.config.width-this.config.bleeds.right)*this.contentScaleRatio+"px",right:"-2px",borderWidth:`${this.contentScaleRatio}px`}}},margin(){return"backendRendering"===this.userId?this.backendRenderParams.margin:{bottom:0,right:0}},isTouchDevice(){return f.Z.isTouchDevice()},isMultipleSelect(){return this.currSelectedInfo.layers.length>1}}),mounted(){this.setLayersDone&&this.loadLayerImg()},watch:{setLayersDone(e){e&&this.loadLayerImg()}},methods:re(ne(ne({},(0,P.OI)({ADD_newLayers:"ADD_newLayers",setCurrActivePageIndex:"SET_currActivePageIndex",setCurrSidebarPanel:"SET_currSidebarPanelType",setDropdown:"popup/SET_STATE",updatePageProps:"UPDATE_pageProps"})),(0,P.nv)({updatePageImages:"file/updatePageImages",updatePageFonts:"brandkit/updatePageFonts",updatePageLogos:"brandkit/updatePageLogos"})),{loadLayerImg(){return ie(this,null,(function*(){!this.setLayersDone||this.imgLoaded||this.imgLoading||(this.imgLoading=!0,yield Promise.all([this.updatePageImages({pageIndex:this.pageIndex}),this.updatePageFonts({pageIndex:this.pageIndex}),this.updatePageLogos({pageIndex:this.pageIndex})]),this.imgLoaded=!0,this.imgLoading=!1)}))},onDrop(e){var t;if(!navigator.onLine)return void W.Z.notifyNetworkError();const n=e.dataTransfer;if(null==(t=e.dataTransfer)?void 0:t.getData("data"))this.dragUtils.itemOnDrop(e,this.pageIndex);else if(n&&0!==n.files.length){const e=n.files;this.setCurrSidebarPanel(B.iI.file),G.Z.isLogin?G.Z.uploadAsset("image",e,{addToPage:!0}):U.Z.setModalInfo(`${this.$t("NN0350")}`,[])}},pageClickHandler(){if(this.isImgCtrl)N.Z.setImgControlDefault(),y.Z.setShowMobilePanel(!1);else{b.Z.deselect(),y.Z.setInMultiSelectionMode(!1),H.ZP.pageIndex!==this.pageIndex&&(x.Z.setBackgroundImageControlDefault(),this.setCurrActivePageIndex(this.pageIndex));const e=window.getSelection();e&&(e.empty(),e.removeAllRanges())}},onRightClick(e){this.$isTouchDevice()||(this.setCurrActivePageIndex(this.pageIndex),this.isHandleShadow||b.Z.deselect(),V.Z.openPopup("page",{event:e}))},tapPageContent(e){const t=e.target;t.matches(".nu-background-image img")&&m.Z.click(e,{doubleClickCallback:this.pageDblClickHandler})},pageDblClickHandler(){var e,t;if(this.isHandleShadow)return;const{srcObj:n,locked:r}=this.config.backgroundImage.config;""===(null!=(e=null==n?void 0:n.assetId)?e:"")||r||(x.Z.startBackgroundImageControl(this.pageIndex),y.Z.setCurrActivePanel("crop")),""!==(null!=(t=null==n?void 0:n.assetId)?t:"")&&r&&(0,q.h4)({group:"copy",text:j.Z.global.tc("NN0804")})}})});const se=(0,A.Z)(oe,[["render",l],["__scopeId","data-v-431353c8"],["__file","PageContent.vue"]]);var ae=se},87669:function(e,t,n){"use strict";n.d(t,{Z:function(){return be}});var r=n(29651),i=n(819),o=n(41463);const s={class:"panel-fonts"},a={key:0,class:"panel-fonts__title"},l={key:0,class:"text-blue-1 label-lg"},c={key:1,class:"text-gray-3"},d={class:"text-center"},u={class:"panel-fonts__category-title"},g={key:3,class:"cover-background"};function p(e,t,n,p,h,m){const y=(0,r.up)("svg-icon"),f=(0,r.up)("search-bar"),b=(0,r.up)("font-tag"),v=(0,r.up)("category-font-item"),w=(0,r.up)("category-list");return(0,r.wg)(),(0,r.iD)("div",s,[e.noTitle||e.$isTouchDevice()?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",a,[e.$isTouchDevice()?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",l,(0,i.zw)(e.capitalize(e.$tc("NN0353",2))),1)),e.$isTouchDevice()?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(y,{key:1,class:"panel-fonts__close pointer",iconName:"close",iconWidth:"30px",iconColor:"gray-2",onClick:e.closeFontsPanel},null,8,["onClick"]))])),(0,r.Wm)(f,{placeholder:"Search font",clear:"",defaultKeyword:e.keywordLabel,onSearch:e.handleSearch},null,8,["defaultKeyword","onSearch"]),e.emptyResultMessage?((0,r.wg)(),(0,r.iD)("div",c,(0,i.zw)(e.emptyResultMessage),1)):(0,r.kq)("",!0),e.keyword?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(b,{key:2,tags:e.tags,onSearch:e.handleSearch,onShowMore:e.setShowMore},null,8,["tags","onSearch","onShowMore"])),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.categoryListArray,(t=>(0,r.wy)(((0,r.wg)(),(0,r.j4)(w,{ref_for:!0,ref:t.key,key:t.key,list:t.content,onLoadMore:e.handleLoadMore},(0,r.Nv)({title:(0,r.w5)((({title:e})=>[(0,r._)("div",u,(0,i.zw)(e),1)])),"category-font-item":(0,r.w5)((({list:t})=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t,(t=>((0,r.wg)(),(0,r.j4)(v,{key:t.id,item:t,textStyleType:e.textStyleType||""},null,8,["item","textStyleType"])))),128))])),_:2},[e.pending?{name:"after",fn:(0,r.w5)((()=>[(0,r._)("div",d,[(0,r.Wm)(y,{iconName:"loading",iconColor:"gray-1",iconWidth:"20px"})])])),key:"0"}:void 0]),1032,["list","onLoadMore"])),[[o.F8,t.show]]))),128)),e.showMore?((0,r.wg)(),(0,r.iD)("div",g)):(0,r.kq)("",!0)])}const h={class:"category-fonts__item-wrapper"},m=["src"],y={class:"category-fonts__item-wrapper"},f=["src"],b={class:"category-fonts__icon"};function v(e,t,n,o,s,a){const l=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["category-fonts pointer feature-button",{active:e.props.font===e.item.id}]),draggable:"false",onClick:t[2]||(t[2]=t=>e.setFont())},[(0,r._)("div",h,[(0,r._)("img",{class:"category-fonts__item",src:e.fallbackSrc||`${e.getPreview}`,onError:t[0]||(t[0]=(...t)=>e.handleNotFound&&e.handleNotFound(...t))},null,40,m)]),(0,r._)("div",y,[(0,r._)("img",{class:"category-fonts__item",src:e.fallbackSrc||`${e.getPreview2}`,onError:t[1]||(t[1]=(...t)=>e.handleNotFound&&e.handleNotFound(...t))},null,40,f)]),(0,r._)("div",b,[e.props.font===e.item.id?((0,r.wg)(),(0,r.j4)(l,{key:0,iconName:"done",iconColor:"gray-2",iconWidth:"25px"})):e.pending&&e.pending===e.item.id?((0,r.wg)(),(0,r.j4)(l,{key:1,iconName:"loading",iconColor:"gray-1",iconWidth:"20px"})):(0,r.kq)("",!0)])],2)}var w=n(86052),N=n(77891),S=n(75231),x=n(53074),P=n(74041),I=n(89456),_=n(16290),k=n(50559),Z=n(38058),C=Object.defineProperty,z=Object.defineProperties,T=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,O=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t)=>{for(var n in t||(t={}))E.call(t,n)&&O(e,n,t[n]);if(L)for(var n of L(t))D.call(t,n)&&O(e,n,t[n]);return e},A=(e,t)=>z(e,T(t)),$=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),F=(0,r.aZ)({emits:[],props:{item:{type:Object,required:!0},textStyleType:{type:String,required:!0}},data(){return{fallbackSrc:""}},computed:A(M(M({},(0,Z.rn)("text",["sel","props","fontStore","pending"])),(0,Z.Se)("brandkit",{isSettingsOpen:"getIsSettingsOpen"})),{getPreview(){return N.Z.getFontPrevUrlByFontFamily({fontFamily:this.item.id,type:this.itemFontType,userId:this.item.userId,assetId:this.item.assetId,ver:this.item.ver},"prev-name")},getPreview2(){return N.Z.getFontPrevUrlByFontFamily({fontFamily:this.item.id,type:this.itemFontType,userId:this.item.userId,assetId:this.item.assetId,ver:this.item.ver},"prev-sample")},itemFontType(){return this.item.src||this.item.fontType}}),methods:A(M(M({},(0,Z.nv)("brandkit",{refreshFontAsset:"refreshFontAsset"})),(0,Z.OI)("text",{updateTextState:"UPDATE_STATE"})),{handleNotFound(){"private"!==this.itemFontType?(this.fallbackSrc=n(75230),console.warn(this.item)):this.refreshFontAsset({id:this.item.assetId,asset_index:this.item.asset_index})},setFont(){"BrandKit"===this.$route.name||"Editor"===this.$route.name&&this.isSettingsOpen?this.setBrandkitFont():this.setEditorFont()},setBrandkitFont(){return $(this,null,(function*(){yield this.$store.dispatch("text/addFont",{type:this.itemFontType,url:this.item.fontUrl,userId:this.item.userId,assetId:this.item.assetId,face:this.item.id,ver:this.item.ver}),N.Z.updateTextStyle(this.textStyleType,{fontId:this.item.id,fontUserId:this.item.userId,fontAssetId:this.item.assetId,fontType:this.itemFontType,fontName:this.item.name}),w.ZP.addAssetToRecentlyUsed({id:this.item.id,type:0,user_id:this.item.userId,asset_id:this.item.assetId,asset_index:this.item.asset_index,src:this.itemFontType,ver:this.item.ver,signed_url:this.item.signed_url,urls:{prev:"",full:"",larg:"",original:"",json:""}})}))},setEditorFont(){return $(this,null,(function*(){var e,t,n;if(this.pending)return;_.Z.agent((e=>e.setEditable(!1)));const r=this.isRanged(),i=r?_.Z.getSelection():void 0,o=(null==i?void 0:i.start)||I.Z.getNullSel(),s=(null==i?void 0:i.end)||I.Z.getNullSel();try{const r=S.ZP.getCurrPage.id,{id:i,type:a}=S.ZP.getCurrLayer,l=S.ZP.layerIndex,c=S.ZP.subLayerIdx,d=-1===c?"":S.ZP.getCurrLayer.layers[c].id;let u=!1;u="text"===a?S.ZP.getCurrLayer.contentEditable:-1!==c&&S.ZP.getCurrLayer.layers[c].contentEditable,this.updateLayerProps(l,c,{loadFontEdited:!1});const g={type:this.itemFontType,fontUrl:null!=(e=this.item.fontUrl)?e:"",userId:null!=(t=this.item.userId)?t:"",assetId:null!=(n=this.item.assetId)?n:"",font:this.item.id};yield this.$store.dispatch("text/addFont",{type:this.itemFontType,url:this.item.fontUrl,userId:this.item.userId,assetId:this.item.assetId,face:this.item.id,ver:this.item.ver});const p=S.ZP.getCurrPage.layers.findIndex((e=>e.id===i)),h=-1===c?S.ZP.getLayer(S.ZP.pageIndex,p):S.ZP.getLayer(S.ZP.pageIndex,p).layers[c];if(-1===p||h.loadFontEdited)return void console.warn("The selected text layer is unaviliable");if(["tmp","group"].includes(a)&&!u&&-1!==p){if(P.Z.applyPropsToAll("span,paragraph",g,p,c),_.Z.updateHtml(),S.ZP.updateLayerProps(S.ZP.pageIndex,S.ZP.layerIndex,{active:!1}),this.$nextTick((()=>{S.ZP.updateLayerProps(S.ZP.pageIndex,S.ZP.layerIndex,{active:!0}),-1===c?S.ZP.getLayer(S.ZP.pageIndex,p).layers.forEach(((e,t)=>{"text"===e.type&&I.Z.updateGroupLayerSizeByShape(S.ZP.pageIndex,p,t,{noPush:!0})})):I.Z.updateGroupLayerSizeByShape(S.ZP.pageIndex,p,c,{noPush:!0})})),w.ZP.addAssetToRecentlyUsed({id:this.item.id,type:0,user_id:this.item.userId,asset_id:this.item.assetId,asset_index:this.item.asset_index,src:this.itemFontType,ver:this.item.ver,signed_url:this.item.signed_url,urls:{prev:"",full:"",larg:"",original:"",json:""}}),-1===c){const e=S.ZP.getLayer(S.ZP.pageIndex,p),t=e.layers.filter((e=>"text"===e.type)).map((e=>e.id));I.Z.waitGroupFontLoadingAndRecord(e,(()=>{for(const e of t){const{pageIndex:t,layerIndex:n,subLayerIdx:o}=S.ZP.getLayerInfoById(r,i,e);if(-1===n)return console.log("the layer to update size doesn't exist anymore.");I.Z.updateTextLayerSizeByShape(t,n,o)}}))}else I.Z.waitFontLoadingAndRecord(h.paragraphs,(()=>{const{pageIndex:e,layerIndex:t,subLayerIdx:n}=S.ZP.getLayerInfoById(r,i,d);if(-1===t)return console.log("the layer to update size doesn't exist anymore.");I.Z.updateTextLayerSizeByShape(e,t,n)}));return void P.Z.updateTextPropsState({font:this.item.id,type:this.itemFontType,assetId:this.item.assetId,userId:this.item.userId})}const m=S.ZP.getCurrLayer;if(!m.active||m.id!==i||"group"===m.type&&!m.layers[c].active){const e=P.Z.spanParagraphPropertyHandler("fontFamily",g,o,s,h);this.updateLayerProps(p,c,{paragraphs:e.paragraphs}),m.active&&_.Z.updateHtml(e.paragraphs),-1===c?S.ZP.updateLayerProps(S.ZP.pageIndex,S.ZP.layerIndex,{active:!1}):-1!==S.ZP.subLayerIdx&&S.ZP.updateSubLayerProps(S.ZP.pageIndex,S.ZP.layerIndex,S.ZP.subLayerIdx,{active:!1})}else{const{start:e,end:t}=_.Z.getSelection(),n=P.Z.spanParagraphPropertyHandler("fontFamily",g,e,t,h);this.updateLayerProps(S.ZP.layerIndex,c,{paragraphs:n.paragraphs}),_.Z.updateHtml(n.paragraphs),!this.$isTouchDevice()&&_.Z.focus()}w.ZP.addAssetToRecentlyUsed({id:this.item.id,type:0,user_id:this.item.userId,asset_id:this.item.assetId,asset_index:this.item.asset_index,src:this.itemFontType,ver:this.item.ver,signed_url:this.item.signed_url,urls:{prev:"",full:"",larg:"",original:"",json:""}}),I.Z.waitFontLoadingAndRecord(h.paragraphs,(()=>{const{pageIndex:e,layerIndex:t,subLayerIdx:n}=S.ZP.getLayerInfoById(r,i,d);if(-1===t)return console.log("the layer to update size doesn't exist anymore.");I.Z.updateTextLayerSizeByShape(e,t,n)})),P.Z.updateTextPropsState({font:this.item.id,type:this.itemFontType,assetId:this.item.assetId,userId:this.item.userId})}catch(a){const e="timeout"===a.message?"timeout":a.code;x.Z.setLogForError(a),(0,k.h4)({group:"error",text:`${this.$t("NN0248")} (ErrorCode: ${e})`})}finally{_.Z.agent((e=>e.setEditable(!0)));const e=window.getSelection();e&&e.removeAllRanges()}}))},updateLayerProps(e,t,n){-1===t?S.ZP.updateLayerProps(S.ZP.pageIndex,e,n):S.ZP.updateSubLayerProps(S.ZP.pageIndex,e,t,n)},isRanged(){const e=window.getSelection();return!!(null==e?void 0:e.rangeCount)&&e.getRangeAt(0).toString()}})}),j=n(53372);const B=(0,j.Z)(F,[["render",v],["__scopeId","data-v-3fb21516"],["__file","CategoryFontItem.vue"]]);var R=B,H=n(9811);const U={class:"tags"},W=["onClick"],V={class:"tags__tag"},G={key:0,class:"tags__more-wrapper"},q={class:"tags__tag"},K={key:1,class:"tags__container-mobile"},Y={class:"tags__flex-container-mobile"},X=["active","onClick"],Q={class:"tags__tag"};function J(e,t,n,o,s,a){const l=(0,r.Q2)("click-outside");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",U,[e.$isTouchDevice()?((0,r.wg)(),(0,r.iD)("div",K,[(0,r._)("div",Y,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.tags,(t=>((0,r.wg)(),(0,r.iD)("div",{active:t.active||void 0,key:t.label,class:(0,i.C_)(`tags__tag-wrapper ${e.theme}`),onClick:n=>e.onClick(t.value)},[(0,r._)("div",Q,(0,i.zw)(t.label),1)],10,X)))),128))])])):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("div",{class:"tags__flex-container",style:(0,i.j5)(e.containerStyle)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.tags,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.label,class:(0,i.C_)(`tags__tag-wrapper ${e.theme}`),onClick:n=>e.onClick(t.value)},[(0,r._)("div",V,(0,i.zw)(t.label),1)],10,W)))),128))],4),e.showMore?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",G,[(0,r._)("div",{class:"tags__tag-wrapper",onClick:t[0]||(t[0]=(...t)=>e.onClickMore&&e.onClickMore(...t))},[(0,r._)("div",q,(0,i.zw)(`${e.$t("NN0082")}...`),1)])]))],64))])),[[l,e.clickOutsideHandler]])}var ee=n(10298),te=n.n(ee),ne=(0,r.aZ)({directives:{clickOutside:te().directive},props:{tags:{type:Array,required:!0},theme:{type:String,default:"light"}},data(){return{showMore:!1}},emits:["search","showMore"],computed:{containerStyle(){return this.showMore?{position:"absolute",background:"white",padding:"5px",borderRadius:"5px",zIndex:1}:{overflow:"hidden",maxHeight:"43px",margin:"0 -5px 0 -5px"}}},methods:{onClick(e){this.$emit("search",e)},setShowMore(e){this.showMore=e,this.$emit("showMore",e)},onClickMore(){this.setShowMore(!0)},clickOutsideHandler(){this.showMore&&this.setShowMore(!1)}}});const re=(0,j.Z)(ne,[["render",J],["__scopeId","data-v-afe2ebbe"],["__file","Tags.vue"]]);var ie=re,oe=n(68514),se=n(78871),ae=Object.defineProperty,le=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,pe=(e,t,n)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,he=(e,t)=>{for(var n in t||(t={}))ue.call(t,n)&&pe(e,n,t[n]);if(de)for(var n of de(t))ge.call(t,n)&&pe(e,n,t[n]);return e},me=(e,t)=>le(e,ce(t)),ye=(0,r.aZ)({components:{SearchBar:oe.Z,CategoryList:H.Z,CategoryFontItem:R,FontTag:ie},props:{noTitle:{type:Boolean,default:!1},textStyleType:{type:String}},emits:["closeFontsPanel"],data(){return{}},mounted(){this.getRecently(),0===this.privateFonts.length&&this.isBrandkitAvailable&&this.fetchFonts(),0===this.tags.length&&this.addFontTags()},unmounted(){this.setShowMore(!1)},computed:me(he(he(he(he(he(he(he({},(0,Z.rn)("font",{categories:"categories",rawContent:"content",rawSearchResult:"searchResult",pending:"pending",keyword:"keyword"})),(0,Z.rn)("fontTag",{_tags:"tags",showMore:"showMore"})),(0,Z.rn)("text",["sel","props","fontPreset"])),(0,Z.Se)("font",["hasNextPage"])),(0,Z.Se)("brandkit",{privateFonts:"getFonts",fontsPageIndex:"getFontsPageIndex"})),(0,Z.Se)("user",{isAdmin:"isAdmin"})),(0,Z.Se)({currSelectedInfo:"getCurrSelectedInfo",currSelectedIndex:"getCurrSelectedIndex",assetFonts:"user/getAssetFonts"})),{tags(){return this._tags.map((e=>({label:e,value:e,active:!1})))},keywordLabel(){return this.keyword?this.keyword.replace("tag::",""):this.keyword},isBrandkitAvailable(){return N.Z.isBrandkitAvailable},listCategories(){const{hasNextPage:e}=this,{categories:t}=this;let n=[];return t.forEach((e=>{e.list.length&&(n=n.concat([{size:36,id:e.title,type:"title",title:e.title},...e.list.map(((t,n)=>{var r;return{id:`${e.title}_${n}`,size:32,type:"category-font-item",list:[me(he({},t),{fontType:"public",userId:t.user_id,assetId:"admin"===t.src?t.asset_id:null==(r=t.asset_index)?void 0:r.toString()})]}}))])),1===e.is_recent&&this.isBrandkitAvailable&&(n=n.concat(this.listAssets))})),n.length&&(n[n.length-1].sentinel=e),n},listResult(){return this.processListResult(this.rawContent.list,!1)},listAssets(){const{isAdmin:e,fontsPageIndex:t,privateFonts:n,keyword:r}=this;let i=[];return r||(i=[{size:36,id:"uploaded_font",type:"title",title:`${this.$t("NN0463")}`}],i=i.concat(n.filter((e=>!e.id.startsWith("new_"))).map((t=>({id:`${t.id}`,size:32,type:"category-font-item",moreType:"asset",list:[{id:t.font_family,src:e?"admin":"private",userId:t.team_id,assetId:e?t.id:t.asset_index.toString(),asset_index:t.asset_index,signed_url:t.signed_url,name:t.name}]})))),i.length&&(i[i.length-1].sentinel=t>=0)),i},searchResult(){const e=this.processListResult(this.rawSearchResult.list,!0);return 0!==e.length&&Object.assign(e[e.length-1],{sentinel:this.hasNextPage}),e},mainContent(){const e=this.listCategories.concat(this.listResult);return 0!==e.length&&Object.assign(e[e.length-1],{sentinel:this.hasNextPage}),e},categoryListArray(){return[{content:this.searchResult,show:this.keyword,key:"searchResult"},{content:this.mainContent,show:!this.keyword,key:"mainContent"}]},emptyResultMessage(){const{keyword:e,pending:t}=this;return t||!e||this.searchResult.length>0?"":`${this.$t("NN0393",{keyword:this.keywordLabel,target:this.$tc("NN0353",1)})}`}}),methods:me(he(he(he(he({},(0,Z.nv)("fontTag",{addFontTags:"ADD_FONT_TAGS"})),(0,Z.OI)("fontTag",{setShowMore:"SET_SHOW_MORE"})),(0,Z.nv)("font",["resetContent","getTagContent","getRecently","getMoreContent","getMoreCategory","resetSearch"])),(0,Z.nv)("brandkit",["fetchFonts","fetchMoreFonts"])),{closeFontsPanel(){this.$emit("closeFontsPanel"),this.setShowMore(!1)},handleLoadMore(e){if("asset"===e)return void this.fetchMoreFonts();const{keyword:t}=this;t?this.getMoreContent():this.getMoreCategory()},handleSearch(e){this.resetSearch(),e&&(this.setShowMore(!1),this.getTagContent({keyword:e}))},capitalize(e){return se.Z.capitalize(e)},processListResult(e=[],t){return new Array(e.length).fill("").map(((t,n)=>{const r=e.slice(n,n+1);return{id:`${r.map((e=>e.id)).join("_")}`,size:32,type:"category-font-item",list:r.map((e=>{var t;return me(he({},e),{fontType:"public",userId:e.user_id,assetId:"admin"===e.src?e.asset_id:null==(t=e.asset_index)?void 0:t.toString()})})),sentinel:!1}}))}})});const fe=(0,j.Z)(ye,[["render",p],["__scopeId","data-v-5ccbae4a"],["__file","PanelFonts.vue"]]);var be=fe},15924:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(29651);function i(e,t,n,i,o,s){const a=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",{class:"checkbox",onClick:t[0]||(t[0]=t=>e.$emit("update:modelValue",!e.modelValue))},[(0,r.Wm)(a,{iconColor:e.modelValue?"blue-1":"light-gray",iconName:e.modelValue?"checkbox-checked":"checkbox",iconWidth:e.iconSize},null,8,["iconColor","iconName","iconWidth"]),(0,r.WI)(e.$slots,"default",{},void 0,!0)])}var o=(0,r.aZ)({name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},iconSize:{type:String,default:"16px"}},emits:["update:modelValue"]}),s=n(53372);const a=(0,s.Z)(o,[["render",i],["__scopeId","data-v-e40c9532"],["__file","Checkbox.vue"]]);var l=a},45411:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(29651),i=n(819);function o(e,t,n,o,s,a){const l=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("span",{class:(0,i.C_)(["collapse-title",{active:e.active}])},[(0,r.WI)(e.$slots,"default",{},void 0,!0),(0,r.Wm)(l,{iconName:"chevron-down",iconColor:"gray-2",iconWidth:"24px"})],2)}var s=(0,r.aZ)({name:"CollapseTitle",props:{active:{type:Boolean,required:!0}}}),a=n(53372);const l=(0,a.Z)(s,[["render",o],["__scopeId","data-v-7b0442ff"],["__file","CollapseTitle.vue"]]);var c=l},38917:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(29651),i=n(819);const o={key:0,class:"color-btn__add-color"},s={key:1,class:"color-btn__multi-color"};function a(e,t,n,a,l,c){const d=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",{class:"color-btn",style:(0,i.j5)(e.wrapperStyle)},[(0,r._)("div",{class:(0,i.C_)(["color-btn__wrapper",{active:e.active||e.focus,mobile:e.$isTouchDevice()}])},["add"===e.color?((0,r.wg)(),(0,r.iD)("div",o)):"multi"===e.color?((0,r.wg)(),(0,r.iD)("div",s)):e.disable?((0,r.wg)(),(0,r.j4)(d,{key:2,iconName:"disable",iconWidth:"16px"})):((0,r.wg)(),(0,r.iD)("div",{key:3,style:(0,i.j5)({backgroundColor:e.color}),class:(0,i.C_)(`color-btn__color color-${e.color.replace("#","")}`)},null,6)),e.focus?((0,r.wg)(),(0,r.j4)(d,{key:4,iconName:"item-check",iconWidth:"40%"})):(0,r.kq)("",!0)],2)],4)}var l=Object.defineProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,g=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))d.call(t,n)&&g(e,n,t[n]);if(c)for(var n of c(t))u.call(t,n)&&g(e,n,t[n]);return e},h=(0,r.aZ)({name:"ColorBtn",props:{color:{type:String,required:!0},size:{type:String,default:""},active:{type:Boolean},disable:{type:Boolean,default:!1},focus:{type:Boolean}},computed:{wrapperStyle(){return this.size?p({width:this.size,height:this.size,paddingTop:0},this.disable?{pointerEvents:"none"}:{}):{}}}}),m=n(53372);const y=(0,m.Z)(h,[["render",a],["__scopeId","data-v-70ce9e70"],["__file","ColorBtn.vue"]]);var f=y},83608:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(29651),i=n(41463);const o={class:"image-carousel"},s={class:"image-carousel__overflow"};function a(e,t,n,a,l,c){return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",s,[(0,r.Wm)(i.W3,{class:"image-carousel__inner",tag:"div","leave-active-class":"image-carousel__item--active"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.range,((t,n)=>((0,r.wg)(),(0,r.iD)("div",{class:"image-carousel__item",key:`${e.current}_${n}_${t}`},[(0,r.WI)(e.$slots,"default",{url:t},void 0,!0)])))),128))])),_:3})])])}var l=(0,r.aZ)({props:{speed:{type:Number,default:1e3},imgs:{type:Array,required:!0}},emits:["change"],data(){return{handler:0,current:0,range:this.imgs.slice(0,2)}},mounted(){this.handler=window.setInterval((()=>{this.handleNext()}),this.speed)},beforeUnmount(){clearInterval(this.handler),this.$emit("change",0)},methods:{handleNext(){const{current:e,imgs:t}=this;this.current=(e+1)%t.length;const n=t.concat(t.slice(0,1));this.range=n.slice(this.current,this.current+2),this.$emit("change",this.current)}}}),c=n(53372);const d=(0,c.Z)(l,[["render",a],["__scopeId","data-v-d4674bec"],["__file","ImageCarousel.vue"]]);var u=d},89006:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(29651),i=n(819);const o=["value"],s={key:0,value:"",disabled:"",hidden:"",selected:""},a=["value"];function l(e,t,n,l,c,d){return(0,r.wg)(),(0,r.iD)("select",{class:"select",value:e.modelValue,autofocus:"",required:"",onInput:t[0]||(t[0]=(...t)=>e.input&&e.input(...t))},[e.ph?((0,r.wg)(),(0,r.iD)("option",s,(0,i.zw)(e.ph),1)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(e=>((0,r.wg)(),(0,r.iD)("option",{key:"string"===typeof e?e:e.value,value:"string"===typeof e?e:e.value},(0,i.zw)("string"===typeof e?e:e.label),9,a)))),128))],40,o)}var c=(0,r.aZ)({name:"Options",props:{options:{type:Array,required:!0},modelValue:{type:String,default:""},ph:{type:String}},emits:["update:modelValue"],methods:{input(e){this.$emit("update:modelValue",e.target.value)}}}),d=n(53372);const u=(0,d.Z)(c,[["render",l],["__scopeId","data-v-1ba1f194"],["__file","Options.vue"]]);var g=u},44554:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(29651);const i={key:2,class:"radio-btn__hover-effect"};function o(e,t,n,o,s,a){const l=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",{class:"radio-btn relative pointer",onClick:t[0]||(t[0]=(...t)=>e.select&&e.select(...t)),onMouseenter:t[1]||(t[1]=t=>e.setHovered(!0)),onMouseleave:t[2]||(t[2]=t=>e.setHovered(!1))},[e.isSelected?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"radio-btn__svg",iconName:"radio-checked",iconWidth:"12px",iconColor:"blue-1"})):((0,r.wg)(),(0,r.j4)(l,{key:1,class:"radio-btn__svg",iconName:"radio",iconWidth:"12px",iconColor:e.circleColor||"white"},null,8,["iconColor"])),e.isHovered?((0,r.wg)(),(0,r.iD)("div",i)):(0,r.kq)("",!0)],32)}var s=(0,r.aZ)({props:{isSelected:{type:Boolean,required:!0},formatKey:{type:String,required:!0},circleColor:{type:String,required:!0}},emits:["select"],data(){return{isHovered:!1}},methods:{setHovered(e){this.isHovered=e},select(){this.$emit("select",this.formatKey)}},computed:{}}),a=n(53372);const l=(0,a.Z)(s,[["render",o],["__scopeId","data-v-7c09f1f0"],["__file","RadioBtn.vue"]]);var c=l},64094:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(29651),i=n(819);const o=["onClick"];function s(e,t,n,s,a,l){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["toggle",`bg-${e.bgColor}`]),style:(0,i.j5)(e.outsideStyle)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,((t,n)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["toggle-text",e.textSize]),key:t.label,style:(0,i.j5)(e.textStyle(n)),onClick:t=>e.setValue(n)},(0,i.zw)(t.label),15,o)))),128)),(0,r._)("div",{class:(0,i.C_)(["toggle-inside",`bg-${e.switchColor}`]),style:(0,i.j5)(e.insideStyle)},null,6)],6)}var a=n(60410),l=n.n(a),c=(0,r.aZ)({name:"SlideToggle",props:{options:{type:Array,required:!0},modelValue:{type:String,required:!0},optionWidth:{type:String,default:"90px"},optionHeight:{type:String,default:"32px"},margin:{type:String,default:"4px"},bgColor:{type:String,default:"blue-1"},switchColor:{type:String,default:"white"},textSize:{type:String,default:"body-XS"}},emits:["update:modelValue"],computed:{insideIndex(){return l().findIndex(this.options,["value",this.modelValue])},outsideStyle(){return{width:`calc(${this.optionWidth} * ${this.options.length})`,height:this.optionHeight}},insideStyle(){return{width:`calc(${this.optionWidth} - ${this.margin} * 2)`,height:`calc(${this.optionHeight} - ${this.margin} * 2)`,margin:this.margin,left:`calc(${this.optionWidth} * ${this.insideIndex})`}}},mounted(){-1===this.insideIndex&&this.setValue(0)},methods:{setValue(e){this.$emit("update:modelValue",this.options[e].value)},textStyle(e){return{color:this.insideIndex===e?"#4EABE6":"#474A57",width:`calc(${this.optionWidth} - ${this.margin} * 2)`,height:`calc(${this.optionHeight} - ${this.margin} * 2)`,margin:this.margin}}}}),d=n(53372);const u=(0,d.Z)(c,[["render",s],["__scopeId","data-v-e7d5c680"],["__file","SlideToggle.vue"]]);var g=u},46986:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(29651),i=n(819);const o={key:0},s=["href","target"];function a(e,t,n,a,l,c){const d=(0,r.up)("router-link"),u=(0,r.Q2)("click-outside");return e.url?e.url.startsWith("http")?(0,r.wy)(((0,r.wg)(),(0,r.iD)("a",{key:1,style:(0,i.j5)(e.styles),href:e.url,target:e.newTab?"_blank":"_self",onClick:t[0]||(t[0]=t=>e.setActive(!0))},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],12,s)),[[u,()=>e.setActive(!1)]]):(0,r.wy)(((0,r.wg)(),(0,r.j4)(d,{key:2,to:e.url,style:(0,i.j5)(e.styles),onClick:t[1]||(t[1]=t=>e.setActive(!0))},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["to","style"])),[[u,()=>e.setActive(!1)]]):((0,r.wg)(),(0,r.iD)("span",o,[(0,r.WI)(e.$slots,"default",{},void 0,!0)]))}var l=n(10298),c=n.n(l),d=(0,r.aZ)({emits:[],directives:{clickOutside:c().directive},props:{url:{type:String},newTab:{type:Boolean,default:!1}},computed:{styles(){return this.active?{color:"#2DB3FF"}:{}}},data(){return{active:!1}},methods:{setActive(e){this.active=e}}}),u=n(53372);const g=(0,u.Z)(d,[["render",a],["__scopeId","data-v-2b49ac4d"],["__file","Url.vue"]]);var p=g},13017:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(29651),i=n(819);const o={class:"dim-background",style:{pointerEvents:"none"}},s={class:"upload-large"},a={class:"upload-small"};function l(e,t,n,l,c,d){const u=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",s,[(0,r.Wm)(u,{iconName:"cloud-upload",iconWidth:"78px",iconColor:"white"}),(0,r._)("span",null,(0,i.zw)(e.text.hintText),1)]),(0,r._)("div",a,[(0,r._)("span",null,(0,i.zw)(`・${e.$t("NN0414",{element:e.text.elementType})}： ${e.text.fileTypes}`),1)])])}var c=n(23931),d=(0,r.aZ)({name:"DargHover",props:{text:{type:Object,default:()=>({hintText:c.Z.global.t("NN0413"),elementType:c.Z.global.t("NN0416"),fileTypes:["jpg","png"].join("、")})}}}),u=n(53372);const g=(0,u.Z)(d,[["render",l],["__scopeId","data-v-0ab23f7a"],["__file","DragHover.vue"]]);var p=g},76109:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(29651),i=n(819);const o=e=>((0,r.dD)("data-v-34844c18"),e=e(),(0,r.Cn)(),e),s={class:"image-list__row"},a={key:0,class:"image-list__placeholder"},l=["src","onClick"],c=["onClick"],d={class:"image-list__item__more-container relative"},u={key:0,class:"image-list__item__menu"},g={class:"image-list__item__menu__name"},p=o((()=>(0,r._)("div",{class:"image-list__item__menu__hr"},null,-1))),h=["onClick"],m=["onClick"],y={key:0,class:"flex-center"};function f(e,t,n,o,f,b){const v=(0,r.up)("nubtn"),w=(0,r.up)("i18n-t"),N=(0,r.up)("svg-icon"),S=(0,r.up)("observer-sentinel"),x=(0,r.up)("recycle-scroller"),P=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)(r.HY,null,[e.showUploadArea?((0,r.wg)(),(0,r.j4)(w,{key:0,class:"upload-area",keypath:"NN0873",tag:"div"},{upload:(0,r.w5)((()=>[(0,r.Wm)(v,{theme:"text",onClick:t[0]||(t[0]=t=>e.$emit("addImage"))},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0014")),1)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(x,{class:"image-list",items:e.images2d,itemSize:140,ref:"recycle"},{default:(0,r.w5)((({item:t})=>[(0,r._)("div",s,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.item,(t=>((0,r.wg)(),(0,r.iD)(r.HY,{key:t.id},["placeholder"===t.type?((0,r.wg)(),(0,r.iD)("div",a)):((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,i.C_)(["image-list__item relative",{hovered:t.menuopen}])},[t.uploading?((0,r.wg)(),(0,r.j4)(N,{key:0,iconName:"loading",iconWidth:"24px",iconColor:"gray-3"})):((0,r.wg)(),(0,r.iD)("img",{key:1,class:"image-list__item__img",src:t.src,onClick:n=>e.$emit("clickImage",t)},null,8,l)),e.showMore&&!t.uploading?((0,r.wg)(),(0,r.iD)("div",{key:2,class:"image-list__item__more pointer",onClick:n=>e.$emit("handleOpenMenu",t)},[(0,r._)("div",d,[(0,r.Wm)(N,{iconName:"more_vertical",iconWidth:"24px",iconColor:"gray-2"}),t.menuopen?(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",g,[(0,r._)("span",null,(0,i.zw)(t.label),1)]),p,(0,r._)("div",{class:"image-list__item__menu__row pointer",onClick:n=>e.$emit("handleDownload",t)},[(0,r.Wm)(N,{iconName:"download",iconWidth:"24px",iconColor:"gray-2"}),(0,r._)("span",null,(0,i.zw)(e.$t("NN0010")),1)],8,h),(0,r._)("div",{class:"image-list__item__menu__row pointer",onClick:n=>e.$emit("handleDelete",t)},[(0,r.Wm)(N,{iconName:"trash",iconWidth:"24px",iconColor:"gray-2"}),(0,r._)("span",null,(0,i.zw)(e.$t("NN0034")),1)],8,m)])),[[P,()=>e.$emit("handleCloseMenu",t)]]):(0,r.kq)("",!0)])],8,c)):(0,r.kq)("",!0)],2))],64)))),128))])])),after:(0,r.w5)((()=>[e.loading?((0,r.wg)(),(0,r.iD)("div",y,[(0,r.Wm)(N,{iconName:"loading",iconWidth:"50px",iconColor:"gray-3"})])):e.sentinel?((0,r.wg)(),(0,r.j4)(S,{key:1,target:"Editor"===e.$route.name?".popup-brand-settings__window":void 0,onCallback:t[1]||(t[1]=t=>e.$emit("loadMore"))},null,8,["target"])):(0,r.kq)("",!0)])),_:1},8,["items"])],64)}var b=n(51543),v=n(10298),w=n.n(v);const N=e=>({type:e,key:e,label:"",src:"",uploading:!1,menuopen:!1});var S=(0,r.aZ)({emits:["addImage","clickImage","handleDownload","handleDelete","handleOpenMenu","handleCloseMenu","loadMore"],components:{ObserverSentinel:b.Z},directives:{clickOutside:w().directive},props:{images:{type:Array,required:!0},showMore:{type:Boolean},showUploadArea:{type:Boolean},loading:{type:Boolean},sentinel:{type:Boolean}},data(){return{images2d:[]}},mounted(){this.updateImg()},watch:{images(){this.updateImg()}},methods:{updateImg(){const e=this.$refs.recycle.$el;if(!e)return void(this.images2d=[]);const t=e.clientWidth,n=Math.floor((t-120)/140)+1,r=[];this.images.forEach((e=>{(0===r.length||r[r.length-1].item.length>=n)&&r.push({id:`row${r.length}`,item:[]}),r[r.length-1].item.push(e)}));while(r.length&&r[r.length-1].item.length<n)r[r.length-1].item.push(N("placeholder"));this.images2d=r}}}),x=n(53372);const P=(0,x.Z)(S,[["render",f],["__scopeId","data-v-34844c18"],["__file","ImageList.vue"]]);var I=P},9897:function(e,t,n){"use strict";n.d(t,{Z:function(){return Q}});var r=n(29651),i=n(819),o=n(41463);const s={class:"btn-new-design"},a={class:"header-sort"},l={key:0,class:"popup-window"};function c(e,t,n,c,d,u){const g=(0,r.up)("popup-size"),p=(0,r.up)("panel-size");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r.WI)(e.$slots,"default",{openPopup:e.openPopup},(()=>[(0,r._)("button",{class:"btn-primary-sm pointer",onClick:t[0]||(t[0]=t=>e.openPopup())},[(0,r._)("span",a,(0,i.zw)(e.$tc("NN0072")),1)])]),!0),e.isMobile<0&&e.isShowPopup?((0,r.wg)(),(0,r.iD)("div",l,[(0,r.Wm)(g,{onClose:t[1]||(t[1]=t=>e.closePopup())})])):(0,r.kq)("",!0),(0,r.Wm)(o.uT,{name:"panel-up"},{default:(0,r.w5)((()=>[e.isMobile>0&&e.isShowPopup?((0,r.wg)(),(0,r.j4)(p,{key:0,onClose:t[2]||(t[2]=t=>e.closePopup())})):(0,r.kq)("",!0)])),_:1})])}const d=e=>((0,r.dD)("data-v-0e4a46c7"),e=e(),(0,r.Cn)(),e),u={class:"mobile-panel__top-section self-padding"},g=d((()=>(0,r._)("div",null,null,-1))),p=[g],h={class:"mobile-panel__btn mobile-panel__left-btn"},m=d((()=>(0,r._)("div",{class:"mobile-panel__btn mobile-panel__right-btn"},null,-1))),y={class:"mobile-panel__bottom-section"};function f(e,t,n,o,s,a){const l=(0,r.up)("svg-icon"),c=(0,r.up)("PageSizeSelector"),d=(0,r.Q2)("click-outside");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{class:"mobile-panel p-15",style:(0,i.j5)(e.panelStyle),ref:"panel",onTouchmove:t[4]||(t[4]=(...t)=>e.handleTouchMove&&e.handleTouchMove(...t))},[(0,r._)("div",u,[(0,r._)("div",{class:"mobile-panel__drag-bar",onPointerdown:t[0]||(t[0]=(...t)=>e.dragPanelStart&&e.dragPanelStart(...t)),onTouchstart:t[1]||(t[1]=(...t)=>e.disableTouchEvent&&e.disableTouchEvent(...t))},p,32),(0,r._)("div",null,[(0,r._)("div",h,[(0,r.Wm)(l,{class:"click-disabled",iconName:e.leftBtnName,iconColor:"white",iconWidth:"20px"},null,8,["iconName"]),(0,r._)("div",{class:"mobile-panel__btn-click-zone",onPointerdown:t[2]||(t[2]=(...t)=>e.leftButtonAction&&e.leftButtonAction(...t)),onTouchstart:t[3]||(t[3]=(...t)=>e.disableTouchEvent&&e.disableTouchEvent(...t))},null,32)]),m])]),(0,r._)("div",y,[(0,r.Wm)(c,{isMobile:!0,isValidate:e.isConfirmClicked,defaultFormat:"custom",ref:"pageSizeSelector"},null,8,["isValidate"])])],36)),[[d,e.closeMobilePanel]])}var b=n(6990),v=n(2531),w=n(10298),N=n.n(w),S=n(38058),x=Object.defineProperty,P=Object.defineProperties,I=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,C=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||(t={}))k.call(t,n)&&C(e,n,t[n]);if(_)for(var n of _(t))Z.call(t,n)&&C(e,n,t[n]);return e},T=(e,t)=>P(e,I(t)),L=(0,r.aZ)({name:"panel-size",directives:{clickOutside:N().directive},components:{PageSizeSelector:b.Z},emits:["close"],data(){return{panelTop:0,panelPaddingBottom:window.innerHeight-window.visualViewport.height,lastPointerY:0,isDraggingPanel:!1,isConfirmClicked:!1,isFullScreen:!0,innerHeight:window.innerHeight,visualViewportHeight:window.visualViewport.height}},computed:T(z(z({},(0,S.rn)("design",["currLocation","folders"])),(0,S.Se)({userInfo:"webView/getUserInfo"})),{panelStyle(){return Object.assign({"row-gap":"10px",backgroundColor:"white",top:this.panelTop+this.userInfo.statusBarHeight+"px",paddingBottom:this.panelPaddingBottom+this.userInfo.homeIndicatorHeight+this.userInfo.statusBarHeight+15+"px"})},leftBtnName(){return"close-circle"},leftButtonAction(){return()=>{this.closeMobilePanel()}}}),mounted(){window.addEventListener("resize",this.handleResize),window.visualViewport.addEventListener("resize",this.handleVisualViewportResize),window.visualViewport.addEventListener("scroll",this.handleVisualViewportScroll)},beforeUnmount(){window.removeEventListener("resize",this.handleResize),window.visualViewport.removeEventListener("resize",this.handleVisualViewportResize),window.visualViewport.removeEventListener("scroll",this.handleVisualViewportScroll)},methods:{closeMobilePanel(){this.$emit("close")},dragPanelStart(e){this.isDraggingPanel=!0,this.lastPointerY=e.clientY,v.ZP.addPointerEvent("pointermove",this.dragingPanel),v.ZP.addPointerEvent("pointerup",this.dragPanelEnd)},dragingPanel(e){this.panelTop+=e.clientY-this.lastPointerY,this.panelPaddingBottom+=e.clientY-this.lastPointerY,this.lastPointerY=e.clientY},dragPanelEnd(){this.isDraggingPanel=!1;const e=window.visualViewport.offsetTop;this.panelTop>.75*this.visualViewportHeight+e?this.closeMobilePanel():this.panelTop<=.25*this.visualViewportHeight+e?(this.panelTop=e,this.panelPaddingBottom=this.innerHeight-this.visualViewportHeight,this.isFullScreen=!0):(this.panelTop=.5*this.visualViewportHeight+e,this.panelPaddingBottom=this.innerHeight-.5*this.visualViewportHeight,this.isFullScreen=!1),v.ZP.removePointerEvent("pointermove",this.dragingPanel),v.ZP.removePointerEvent("pointerup",this.dragPanelEnd)},disableTouchEvent(e){this.$isTouchDevice()&&(e.preventDefault(),e.stopPropagation())},handleVisualViewportScroll(){this.panelPaddingBottom=this.innerHeight-this.visualViewportHeight+this.panelTop-window.visualViewport.offsetTop},handleResize(){this.innerHeight=window.innerHeight},handleVisualViewportResize(){const e=window.visualViewport.height-this.visualViewportHeight;if(e>0&&(this.panelPaddingBottom=Math.max(this.panelTop,this.panelPaddingBottom-e)),this.visualViewportHeight=window.visualViewport.height,this.panelTop<window.visualViewport.offsetTop||this.isFullScreen)this.panelTop=window.visualViewport.offsetTop,this.panelPaddingBottom=this.innerHeight-this.visualViewportHeight,this.isFullScreen=!0;else{const e=this.visualViewportHeight-this.panelTop-this.panelPaddingBottom;e<.25*this.visualViewportHeight&&(this.panelTop=.5*this.visualViewportHeight+window.visualViewport.offsetTop,this.panelPaddingBottom=this.innerHeight-.5*this.visualViewportHeight)}},handleTouchMove(e){e.preventDefault()}}}),E=n(53372);const D=(0,E.Z)(L,[["render",f],["__scopeId","data-v-0e4a46c7"],["__file","PanelSize.vue"]]);var O=D;const M={class:"popup-size"},A={class:"popup-size__close"},$={class:"popup-size__title label-mid"};function F(e,t,n,o,s,a){const l=(0,r.up)("svg-icon"),c=(0,r.up)("PageSizeSelector"),d=(0,r.Q2)("click-outside");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",M,[(0,r._)("div",A,[(0,r.Wm)(l,{class:"pointer",iconName:"page-close",iconWidth:"10px",iconColor:"gray-2",onClick:t[0]||(t[0]=t=>e.closePopup())})]),(0,r._)("div",$,[(0,r._)("span",null,(0,i.zw)(e.$tc("NN0072",2)),1)]),(0,r.Wm)(c,{isValidate:e.isConfirmClicked,defaultFormat:"custom",ref:"pageSizeSelector",onSelect:e.selectFormat},null,8,["isValidate","onSelect"])])),[[d,e.closePopup]])}var j=Object.defineProperty,B=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,U=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W=(e,t)=>{for(var n in t||(t={}))R.call(t,n)&&U(e,n,t[n]);if(B)for(var n of B(t))H.call(t,n)&&U(e,n,t[n]);return e},V=(0,r.aZ)({components:{PageSizeSelector:b.Z},directives:{clickOutside:N().directive},emits:["close"],data(){return{selectedFormat:{},isConfirmClicked:!1}},computed:W({},(0,S.rn)("design",["currLocation","folders"])),methods:{selectFormat(e){this.selectedFormat=e},closePopup(){this.$emit("close")}}});const G=(0,E.Z)(V,[["render",F],["__scopeId","data-v-36d5eb54"],["__file","PopupSize.vue"]]);var q=G,K=n(78871),Y=(0,r.aZ)({emits:[],components:{PopupSize:q,PanelSize:O},data(){return{isMobile:0,isShowPopup:!1}},mounted(){window.addEventListener("resize",this.handleResize),this.handleResize()},unmounted(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize(){this.isMobile=K.Z.getWidth()<=540?1:-1},openPopup(){this.isShowPopup=!0},closePopup(){this.isShowPopup=!1}}});const X=(0,E.Z)(Y,[["render",c],["__scopeId","data-v-a42e75c6"],["__file","BtnNewDesign.vue"]]);var Q=X},6990:function(e,t,n){"use strict";n.d(t,{Z:function(){return de}});var r=n(29651),i=n(819);const o=e=>((0,r.dD)("data-v-99aff684"),e=e(),(0,r.Cn)(),e),s={class:"page-size-selector"},a={key:0,class:"page-size-selector__body-row first-row"},l={class:"page-size-selector__body__title caption-LG text-black"},c={class:"page-size-selector__body-row"},d={class:"page-size-selector__body__custom"},u=["value","placeholder"],g=["value","placeholder"],p=["value","placeholder"],h=["value","placeholder"],m={key:0,class:"page-size-selector__body__custom__unit__option bg-white"},y=["onClick"],f={class:"body-MD text-black"},b={key:0,class:"page-size-selector__body__custom__err body-MD text-red"},v=o((()=>(0,r._)("div",{class:"page-size-selector__body__hr horizontal-rule bg-gray-4"},null,-1))),w={key:0,class:"page-size-selector__body-row-center"},N={key:1,class:"page-size-selector__body-row first-row"},S={class:"page-size-selector__body__title caption-LG text-black"},x=["onClick"],P=["src"],I={class:"page-size-selector__body-row__content"},_={key:2,class:"page-size-selector__body-row first-row"},k={class:"page-size-selector__body__title caption-LG text-black"},Z=["onClick"],C=["src"],z={class:"page-size-selector__body-row__content"},T=o((()=>(0,r._)("div",{class:"page-size-selector__hr bg-gray-4"},null,-1))),L={class:"page-size-selector__submit"},E={class:"page-size-selector__submit__option body-SM mb-10"};function D(e,t,o,D,O,M){const A=(0,r.up)("property-bar"),$=(0,r.up)("svg-icon"),F=(0,r.up)("nubtn"),j=(0,r.up)("checkbox"),B=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)("div",s,[e.isMobile||e.forEditor?((0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("span",l,(0,i.zw)(e.$t("NN0023")),1)])):(0,r.kq)("",!0),(0,r._)("div",c,[(0,r._)("div",d,[(0,r.Wm)(A,{class:(0,i.C_)(["page-size-selector__body__custom__box","custom"===e.selectedFormatKey&&e.isValidate?e.widthValid?"":" input-invalid":""]),borderColor:"custom"===e.selectedFormatKey?"blue-1":""+(e.isDarkTheme?"white":"gray-4")},{default:(0,r.w5)((()=>[(0,r._)("input",{class:(0,i.C_)(["body-MD page-size-selector__body__custom__box__input","custom"===e.selectedFormatKey?e.isValidate&&!e.widthValid?"text-red-1":"text-blue-1 input-focused":"text-gray-3"]),type:"number",min:"0",ref:"inputWidth",style:(0,i.j5)({position:e.isInputFocused?"static":"fixed"}),value:e.valPageSize.width,placeholder:e.isMobile?e.$t("NN0320"):e.$t("NN0163",{term:e.$t("NN0320")}),onClick:t[0]||(t[0]=t=>e.selectFormat("custom")),onInput:t[1]||(t[1]=(...t)=>e.setPageWidth&&e.setPageWidth(...t)),onFocus:t[2]||(t[2]=t=>e.lastFocusedInput="width"),onBlur:t[3]||(t[3]=t=>e.handleInputBlur("width"))},null,46,u),e.isInputFocused?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("input",{key:0,class:(0,i.C_)(["body-MD page-size-selector__body__custom__box__input dummy","custom"===e.selectedFormatKey?"text-blue-1 input-focused":"text-gray-3"]),type:"number",min:"0",readonly:"",value:e.valPageSize.width,placeholder:e.isMobile?e.$t("NN0320"):e.$t("NN0163",{term:e.$t("NN0320")}),onClick:t[4]||(t[4]=t=>e.handleDummyClick(t,e.$refs.inputWidth,"width"))},null,10,g)),(0,r._)("span",{class:(0,i.C_)(["body-MD page-size-selector__body__custom__box__input-label","custom"===e.selectedFormatKey?e.isValidate&&!e.widthValid?"text-red-1":"text-blue-1 input-focused":"text-gray-3"])},"W",2)])),_:1},8,["class","borderColor"]),(0,r.Wm)($,{class:"pointer",iconName:e.isLocked?"lock":"unlock",iconWidth:"20px",iconColor:"custom"===e.selectedFormatKey?"blue-1":e.isDarkTheme?"white":"gray-4",onClick:t[5]||(t[5]=t=>e.toggleLock())},null,8,["iconName","iconColor"]),(0,r.Wm)(A,{class:(0,i.C_)(["page-size-selector__body__custom__box","custom"===e.selectedFormatKey&&e.isValidate?e.heightValid?"":" input-invalid":""]),borderColor:"custom"===e.selectedFormatKey?"blue-1":""+(e.isDarkTheme?"white":"gray-4")},{default:(0,r.w5)((()=>[(0,r._)("input",{class:(0,i.C_)(["body-MD page-size-selector__body__custom__box__input","custom"===e.selectedFormatKey?e.isValidate&&!e.widthValid?"text-red-1":"text-blue-1 input-focused":"text-gray-3"]),type:"number",min:"0",ref:"inputHeight",style:(0,i.j5)({position:e.isInputFocused?"static":"fixed"}),value:e.valPageSize.height,placeholder:e.isMobile?e.$t("NN0319"):e.$t("NN0163",{term:e.$t("NN0319")}),onClick:t[6]||(t[6]=t=>e.selectFormat("custom")),onInput:t[7]||(t[7]=(...t)=>e.setPageHeight&&e.setPageHeight(...t)),onFocus:t[8]||(t[8]=t=>e.lastFocusedInput="height"),onBlur:t[9]||(t[9]=t=>e.handleInputBlur("height"))},null,46,p),e.isInputFocused?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("input",{key:0,class:(0,i.C_)(["body-MD page-size-selector__body__custom__box__input dummy","custom"===e.selectedFormatKey?"text-blue-1 input-focused":"text-gray-3"]),type:"number",min:"0",readonly:"",value:e.valPageSize.height,placeholder:e.isMobile?e.$t("NN0319"):e.$t("NN0163",{term:e.$t("NN0319")}),onClick:t[10]||(t[10]=t=>e.handleDummyClick(t,e.$refs.inputHeight,"height"))},null,10,h)),(0,r._)("span",{class:(0,i.C_)(["body-MD page-size-selector__body__custom__box__input-label","custom"===e.selectedFormatKey?e.isValidate&&!e.widthValid?"text-red-1":"text-blue-1 input-focused":"text-gray-3"])},"H",2)])),_:1},8,["class","borderColor"]),(0,r.wy)(((0,r.wg)(),(0,r.j4)(A,{class:"page-size-selector__body__custom__box page-size-selector__body__custom__unit pointer",borderColor:"custom"===e.selectedFormatKey?"blue-1":""+(e.isDarkTheme?"white":"gray-4"),onClick:t[11]||(t[11]=t=>e.showUnitOptions=!e.showUnitOptions)},{default:(0,r.w5)((()=>[(0,r._)("span",{class:(0,i.C_)(["page-size-selector__body__custom__unit__label body-MD","custom"===e.selectedFormatKey?"text-blue-1":"text-gray-3"])},(0,i.zw)(e.selectedUnit),3),(0,r.Wm)($,{class:"page-size-selector__body__custom__unit__icon",iconName:"chevron-down",iconWidth:"16px",iconColor:"custom"===e.selectedFormatKey?"blue-1":"gray-3"},null,8,["iconColor"]),e.showUnitOptions?((0,r.wg)(),(0,r.iD)("div",m,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.unitOptions,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"page-size-selector__body__custom__unit__option__item text-black",key:t,onClick:n=>e.selectUnit(n,t)},[(0,r._)("span",f,(0,i.zw)(t),1)],8,y)))),128))])):(0,r.kq)("",!0)])),_:1},8,["borderColor"])),[[B,()=>{e.showUnitOptions=!1}]]),"custom"===e.selectedFormatKey&&e.isValidate&&!e.isCustomValid?((0,r.wg)(),(0,r.iD)("div",b,[(0,r.Uk)((0,i.zw)(e.errMsg),1)," "===e.errMsg.slice(-1)?((0,r.wg)(),(0,r.iD)("span",{key:0,class:"pointer",onClick:t[12]||(t[12]=t=>e.fixSize())},(0,i.zw)(e.$t("NN0787")),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])]),e.forEditor?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(F,{key:1,class:"mt-15",size:"sm-full",onClick:e.createCustomDesign},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0867")),1)])),_:1},8,["onClick"])),v,(0,r._)("div",{class:"page-size-selector__container",onTouchmove:t[13]||(t[13]=(...t)=>e.handleTouchMove&&e.handleTouchMove(...t))},[e.isLayoutReady?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",w,[(0,r.Wm)($,{iconName:"loading",iconWidth:"25px",iconHeight:"10px",iconColor:"text-gray-3"})])),e.isLayoutReady&&e.recentlyUsed.length>0?((0,r.wg)(),(0,r.iD)("div",N,[(0,r._)("span",S,(0,i.zw)(e.$t("NN0024")),1)])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.recentlyUsed,((t,o)=>((0,r.wg)(),(0,r.iD)("div",{class:"page-size-selector__body-row item pointer",key:t.id,onClick:t=>e.selectFormat(`recent-${o}`)},[(0,r._)("img",{class:"page-size-selector__body-row__icon",src:n(89088)(`./${""===t.title?"custom":t.icon}.svg`)},null,8,P),(0,r._)("div",I,[(0,r._)("span",{class:(0,i.C_)(["page-size-selector__body__recently body-SM pointer",e.selectedFormatKey===`recent-${o}`?"text-blue-1":"text-gray-2"])},(0,i.zw)(""===t.title||"custom"===t.icon?e.$t("NN0023"):t.title),3),(0,r._)("span",{class:(0,i.C_)(["page-size-selector__body__recently body-SM pointer",e.selectedFormatKey===`recent-${o}`?"text-blue-1":"text-gray-3"])},(0,i.zw)(e.makeFormatDescription(t)),3)])],8,x)))),128)),e.isLayoutReady&&e.formatList.length>0?((0,r.wg)(),(0,r.iD)("div",_,[(0,r._)("span",k,(0,i.zw)(e.$t("NN0025")),1)])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.formatList,((t,o)=>((0,r.wg)(),(0,r.iD)("div",{class:"page-size-selector__body-row item pointer",key:t.id,onClick:t=>e.selectFormat(`preset-${o}`)},[(0,r._)("img",{class:"page-size-selector__body-row__icon",src:n(89088)(`./${t.icon}.svg`)},null,8,C),(0,r._)("div",z,[(0,r._)("span",{class:(0,i.C_)(["page-size-selector__body__recently body-SM pointer",e.selectedFormatKey===`preset-${o}`?"text-blue-1":"text-gray-2"])},(0,i.zw)(t.title),3),(0,r._)("span",{class:(0,i.C_)(["page-size-selector__body__recently body-SM pointer",e.selectedFormatKey===`preset-${o}`?"text-blue-1":"text-gray-3"])},(0,i.zw)(e.makeFormatDescription(t)),3)])],8,Z)))),128))],32),e.forEditor?((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[T,(0,r._)("div",L,[(0,r._)("div",E,[(0,r.Wm)(j,{class:"pointer",modelValue:e.copyBeforeApply,"onUpdate:modelValue":t[14]||(t[14]=t=>e.copyBeforeApply=t)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0211")),1)])),_:1},8,["modelValue"])]),(0,r.Wm)(F,{size:"mid-full",theme:e.inReviewMode?"primary":"icon_text",icon:["pro","alarm"],disabled:!e.isFormatApplicable,onClick:e.submit},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0022")),1)])),_:1},8,["theme","disabled","onClick"])])],64)):(0,r.kq)("",!0)])}var O=n(72625),M=n(15924),A=n(20951),$=n(93261),F=n(78871),j=n(70118),B=n(32905),R=n(58559),H=n(47147),U=n(53089),W=n(52632),V=n(46921),G=n(10298),q=n.n(G),K=n(60410),Y=n(38058),X=Object.defineProperty,Q=Object.defineProperties,J=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,re=(e,t,n)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ie=(e,t)=>{for(var n in t||(t={}))te.call(t,n)&&re(e,n,t[n]);if(ee)for(var n of ee(t))ne.call(t,n)&&re(e,n,t[n]);return e},oe=(e,t)=>Q(e,J(t));const se=(0,r.aZ)({props:{isDarkTheme:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1},forEditor:{type:Boolean,default:!1}},components:{Checkbox:M.Z},directives:{clickOutside:q().directive},emits:["select"],created(){this.pageSizes=V.ZP.convertAllSize(0,0,this.selectedUnit)},mounted(){document.addEventListener("scroll",this.handleScroll),this.fetchLayouts();const e=this.$refs.inputWidth;this.isMobile?setTimeout((()=>{this.isInputFocused=!0}),100):(e.focus({preventScroll:!0}),this.isInputFocused=!0),this.copyBeforeApply="false"!==localStorage.getItem("copyBeforeApply"),this.handleCurrFocusPageIndexChange()},beforeUnmount(){document.removeEventListener("scroll",this.handleScroll)},data(){return{selectedFormatKey:"custom",valPageSize:{width:"",height:""},pageWidth:0,pageHeight:0,pageSizes:{},aspectRatio:1,isLocked:!1,unitOptions:V.kI,selectedUnit:"px",showUnitOptions:!1,formatList:new Array,recentlyUsed:new Array,isLayoutReady:!1,isInputFocused:!1,lastFocusedInput:"width",isValidate:!1,copyBeforeApply:!0}},watch:{selectedFormat(e){this.$emit("select",e)},copyBeforeApply(e){localStorage.setItem("copyBeforeApply",String(e))}},computed:oe(ie(ie(ie({},(0,Y.rn)("layouts",["categories"])),(0,Y.rn)("design",["currLocation","folders"])),(0,Y.Se)({getPage:"getPage",token:"user/getToken",getAsset:"getAsset",groupId:"getGroupId",groupType:"getGroupType",pagesLength:"getPagesLength",getPageSize:"getPageSize"})),{inReviewMode(){return H.Z.inReviewMode},isCustomValid(){return this.widthValid&&this.heightValid&&!this.isOverArea()},widthValid(){if(!this.pageWidth)return!1;if(this.pageWidth<0)return!1;const e=V.ZP.convert(this.pageWidth,this.selectedUnit,"px");return!this.isOverSize(e)&&!this.isUnderSize(e)&&(!this.isOverArea()||!this.isLocked&&"width"!==this.lastFocusedInput)},heightValid(){if(!this.pageHeight)return!1;if(this.pageHeight<0)return!1;const e=V.ZP.convert(this.pageHeight,this.selectedUnit,"px");return!this.isOverSize(e)&&!this.isUnderSize(e)&&(!this.isOverArea()||!this.isLocked&&"height"!==this.lastFocusedInput)},fixedSize(){const e={width:this.pageWidth,height:this.pageHeight};if(!this.isOverArea())return e;{const t=this.pageSizes.px;this.isLocked?(e.height=Math.sqrt(B.Z.MAX_AREA/t.width*t.height),e.width=e.height/t.height*t.width):(e.height=B.Z.MAX_AREA/t.width,e.width=B.Z.MAX_AREA/t.height)}return V.ZP.convertSize((0,K.floor)(e.width),(0,K.floor)(e.height),"px",this.selectedUnit)},errMsg(){const e={width:V.ZP.convert(this.pageWidth,this.selectedUnit,"px"),height:V.ZP.convert(this.pageHeight,this.selectedUnit,"px")};if(this.isOverSize(e.width)||this.isUnderSize(e.width)||this.isOverSize(e.height)||this.isUnderSize(e.height)){if("px"===this.selectedUnit)return this.$t("NN0785",{size1:B.Z.MIN_SIZE+"px",size2:B.Z.MAX_SIZE+"px"}).toString();const e={width:V.ZP.convert(B.Z.MIN_SIZE,"px",this.selectedUnit),height:V.ZP.convert(B.Z.MIN_SIZE,"px",this.selectedUnit)},t={width:V.ZP.convert(B.Z.MAX_SIZE,"px",this.selectedUnit),height:V.ZP.convert(B.Z.MAX_SIZE,"px",this.selectedUnit)};return this.$t("NN0785",{size1:`${(0,K.ceil)(e[this.lastFocusedInput],V.cB)}${this.selectedUnit}`,size2:`${(0,K.floor)(t[this.lastFocusedInput],V.cB)}${this.selectedUnit}`}).toString()}return this.isOverArea()?this.$t("NN0786",{size:`${this.isLocked?`${(0,K.floor)(this.fixedSize.width,V.cB)} x ${(0,K.floor)(this.fixedSize.height,V.cB)}`:(0,K.floor)(this.fixedSize[this.lastFocusedInput],V.cB)} ${this.selectedUnit}`}).toString()+" ":""},isFormatApplicable(){return"custom"===this.selectedFormatKey?this.isCustomValid:""!==this.selectedFormatKey}}),methods:oe(ie(ie({},(0,Y.OI)({updateRecentlyUsed:"layouts/UPDATE_RECENTLY_PAGE",setCurrActivePageIndex:"SET_currActivePageIndex"})),(0,Y.nv)("layouts",["getRecently"])),{isOverArea(){return this.pageSizes.px.width*this.pageSizes.px.height>B.Z.MAX_AREA},isOverSize(e){return e>B.Z.MAX_SIZE},isUnderSize(e){return e<B.Z.MIN_SIZE},toggleLock(){this.selectedFormatKey="custom",this.isLocked=!this.isLocked,this.isLocked&&(this.aspectRatio=this.pageWidth*this.pageHeight<=0?1:this.pageWidth/this.pageHeight)},makeFormatDescription(e){var t,n;return e.description.includes(" ")?e.description.replace(" ",` ${null!=(t=e.unit)?t:"px"} `):`${""===e.description?e.title:e.description} ${null!=(n=e.unit)?n:"px"}`},handleCurrFocusPageIndexChange(){var e,t;const{width:n,height:r,physicalWidth:i,physicalHeight:o,unit:s}=B.Z.currFocusPageSize;this.selectedUnit=null!=s?s:"px",this.pageWidth=null!=(e=null!=i?i:n)?e:0,this.pageHeight=null!=(t=null!=o?o:r)?t:0,this.pageSizes=V.ZP.convertAllSize(this.pageWidth,this.pageHeight,this.selectedUnit),this.aspectRatio=this.pageWidth/this.pageHeight,this.valPageSize.width=(0,K.round)(this.pageWidth,"px"===this.selectedUnit?0:V.cB).toString(),this.valPageSize.height=(0,K.round)(this.pageHeight,"px"===this.selectedUnit?0:V.cB).toString()},setPageWidth(e){const t=e.target.value;this.valPageSize.width=t;const n="string"===typeof t?parseFloat(t):t,r=n.toString()!==t,i=(0,K.round)(n,"px"===this.selectedUnit?0:V.cB),o=this.pageWidth!==i;this.pageWidth=i,r&&!o||(this.valPageSize.width=this.pageWidth.toString()),this.selectFormat("custom"),this.isLocked&&(""===t?(this.pageWidth=NaN,this.pageHeight=NaN):(this.pageHeight=this.pageWidth/this.aspectRatio,"px"===this.selectedUnit&&(this.pageHeight=(0,K.round)(this.pageHeight)),this.valPageSize.height=(0,K.round)(this.pageHeight,V.cB).toString()))},setPageHeight(e){const t=e.target.value;this.valPageSize.height=t;const n="string"===typeof t?parseFloat(t):t,r=n.toString()!==t,i=(0,K.round)(n,"px"===this.selectedUnit?0:V.cB),o=this.pageHeight!==i;this.pageHeight=i,r&&!o||(this.valPageSize.height=this.pageHeight.toString()),this.selectFormat("custom"),this.isLocked&&(""===t?(this.pageWidth=NaN,this.pageHeight=NaN):(this.pageWidth=this.pageHeight*this.aspectRatio,"px"===this.selectedUnit&&(this.pageWidth=(0,K.round)(this.pageWidth)),this.valPageSize.width=(0,K.round)(this.pageWidth,V.cB).toString())),this.pageSizes=V.ZP.convertAllSize(this.pageWidth,this.pageHeight,this.selectedUnit)},selectFormat(e){this.selectedFormatKey=e;const t={};if("custom"!==this.selectedFormatKey&&!this.forEditor){if(e.startsWith("recent")){const[n,r]=e.split("-");Object.assign(t,this.recentlyUsed[parseInt(r)])}else{if(!e.startsWith("preset"))return;{const[n,r]=e.split("-");Object.assign(t,this.formatList[parseInt(r)])}}""!==e&&this.newDesign(t)}},selectUnit(e,t){e.stopPropagation(),this.selectFormat("custom"),this.showUnitOptions=!1,this.selectedUnit!==t&&(this.pageWidth=this.pageSizes[t].width,this.pageHeight=this.pageSizes[t].height,"px"===t&&(this.pageWidth=(0,K.round)(this.pageWidth),this.pageHeight=(0,K.round)(this.pageHeight)),this.valPageSize.width=(0,K.round)(this.pageWidth,V.cB).toString(),this.valPageSize.height=(0,K.round)(this.pageHeight,V.cB).toString(),this.selectedUnit=t)},fetchLayouts(){this.isLayoutReady=!1,this.formatList=[],this.recentlyUsed=[],this.getRecently().then((()=>{for(const e of this.categories)e.title===`${this.$t("NN0025")}`&&(this.formatList=e.list.map((e=>{var t,n,r,i,o,s;return{id:e.id,width:null!=(t=e.width)?t:0,height:null!=(n=e.height)?n:0,title:null!=(r=e.title)?r:"",description:null!=(i=e.description)?i:"",unit:null!=(o=e.unit)?o:"px",icon:null!=(s=e.icon)?s:"",bleed:e.bleed}}))),e.title===`${this.$t("NN0024")}`&&(this.recentlyUsed=e.list.map((e=>{var t,n,r,i,o,s;return{id:e.id,width:null!=(t=e.width)?t:0,height:null!=(n=e.height)?n:0,title:null!=(r=e.title)?r:"",description:null!=(i=e.description)?i:"",unit:null!=(o=e.unit)?o:"px",icon:null!=(s=e.icon)?s:""}})).filter((e=>{const t=V.ZP.convertSize(e.width,e.height,e.unit,"px");return!(t.width*t.height>B.Z.MAX_AREA)})));this.formatList.length>0&&(this.isLayoutReady=!0)}))},handleTouchMove(e){e.stopPropagation()},handleScroll(){this.$refs.inputWidth.blur(),this.$refs.inputHeight.blur()},handleDummyClick(e,t,n){e.preventDefault(),this.selectFormat("custom"),t.focus({preventScroll:!0}),this.lastFocusedInput=n,setTimeout((()=>{this.isInputFocused=!0}),100)},handleInputBlur(e){("width"===e||this.isLocked)&&isNaN(this.pageWidth)&&(this.pageWidth=0,this.valPageSize.width=""),("height"===e||this.isLocked)&&isNaN(this.pageHeight)&&(this.pageHeight=0,this.valPageSize.height=""),this.pageSizes=V.ZP.convertAllSize(this.pageWidth,this.pageHeight,this.selectedUnit),this.isMobile&&setTimeout((()=>{document.activeElement!==this.$refs.inputWidth&&document.activeElement!==this.$refs.inputHeight&&(this.isInputFocused=!1)}),0)},fixSize(e=!0){const t=this.fixedSize;("width"===this.lastFocusedInput||this.isLocked)&&(this.pageWidth=(0,K.floor)(t.width,V.cB),this.valPageSize.width=this.pageWidth.toString()),("height"===this.lastFocusedInput||this.isLocked)&&(this.pageHeight=(0,K.floor)(t.height,V.cB),this.valPageSize.height=this.pageHeight.toString()),e&&(this.pageSizes=V.ZP.convertAllSize(this.pageWidth,this.pageHeight,this.selectedUnit))},newDesign(e){var t;const n="MyDesign"===this.$route.name?this.currLocation.split("/").slice(1).join(","):void 0,r="MyDesign"===this.$route.name?null==(t=A.ZP.search(this.folders,A.ZP.makePath(this.currLocation)))?void 0:t.name:void 0,i="px"!==e.unit?e.bleed:void 0;A.ZP.newDesignWithLoginRedirect(e.width,e.height,e.unit,void 0,n,r,i)},createCustomDesign(){this.selectedFormatKey="custom",this.isFormatApplicable?this.newDesign({id:"",width:this.pageWidth,height:this.pageHeight,title:"",description:"",unit:this.selectedUnit,icon:""}):this.isValidate=!0},copyAndApplySelectedFormat(){if(!this.isFormatApplicable)return;const e=B.Z.currFocusPageIndex,t=F.Z.deepCopy(this.getPage(e));t.designId="",t.id=F.Z.generateRandomString(8),B.Z.addPageToPos(t,e+1),j.Z.deselect(),this.setCurrActivePageIndex(e+1),this.applySelectedFormat(!1,e+1),W.Z.record(),this.$nextTick((()=>{B.Z.scrollIntoPage(e+1)}))},applySelectedFormat(e=!0,t=-1){if(!this.isFormatApplicable)return;const n=this.getSelectedFormat();if(!n)return;const r="px"!==n.unit&&n.bleed?F.Z.deepCopy(n.bleed):null;if(r){const e=(0,K.floor)(V.ZP.convert(B.Z.MAX_BLEED.mm,"mm",n.unit),V.cB);Object.keys(r).forEach((t=>{r[t]=Math.min(r[t],e)}))}if(1!==this.groupType){const{width:e,height:i}=this.pageSizes.px;t=-1===t?B.Z.currFocusPageIndex:t,this.resizePage({width:e,height:i,physicalWidth:n.width,physicalHeight:n.height,unit:n.unit},t),r&&B.Z.setBleeds(t,r)}else{const{pagesLength:e,getPageSize:t}=this,i=B.Z.getPage(B.Z.currFocusPageIndex);for(let o=0;o<e;o++){const s="px"===n.unit;if(o===B.Z.currFocusPageIndex)this.resizePage({width:s?n.width:i.width,height:s?n.height:(0,K.round)(i.width/n.width*n.height),physicalWidth:n.width,physicalHeight:n.height,unit:n.unit});else{const{width:e,height:r,physicalWidth:i,physicalHeight:a}=t(o),l=n.width,c=(0,K.round)(l/i*a,s?0:V.cB);U.Z.resizePage(o,this.getPage(o),{width:s?l:e,height:s?c:r,physicalWidth:l,physicalHeight:c,unit:n.unit})}if(r){const t=oe(ie({},r),{top:0!==o?0:r.top,bottom:o!==e-1?0:r.bottom});B.Z.setBleeds(o,t)}}}const i="px"===n.unit?0:V.cB;n.width=(0,K.round)(n.width,i),n.height=(0,K.round)(n.height,i),O.Z.addDesign(n.id,"layout",n);const o=this.recentlyUsed.findIndex((e=>n.id===e.id&&n.width===e.width&&n.height===e.height&&n.unit===e.unit));this.updateRecentlyUsed({index:o,format:n}),this.$isTouchDevice()&&B.Z.fitPage(),e&&W.Z.record()},getSelectedFormat(){if("custom"===this.selectedFormatKey){if(!this.isCustomValid)return;return{id:"",width:this.pageWidth,height:this.pageHeight,title:"",description:"",unit:this.selectedUnit,icon:""}}if(this.selectedFormatKey.startsWith("recent")){const[e,t]=this.selectedFormatKey.split("-"),n=this.recentlyUsed[parseInt(t)];return this.pageSizes=V.ZP.convertAllSize(n.width,n.height,n.unit),n}if(this.selectedFormatKey.startsWith("preset")){const[e,t]=this.selectedFormatKey.split("-"),n=this.formatList[parseInt(t)];return this.pageSizes=V.ZP.convertAllSize(n.width,n.height,n.unit),n}},resizePage(e,t=B.Z.currFocusPageIndex){U.Z.resizePage(t,this.getPage(t),e)},submit:(0,K.throttle)((function(){R.Z.checkPro({plan:1},"page-resize")&&this.isFormatApplicable&&(this.copyBeforeApply?this.copyAndApplySelectedFormat():this.applySelectedFormat(),$.Z.setShowMobilePanel(!1),this.$emit("close"))}),2e3,{trailing:!1})})});var ae=se,le=n(53372);const ce=(0,le.Z)(ae,[["render",D],["__scopeId","data-v-99aff684"],["__file","PageSizeSelector.vue"]]);var de=ce},99090:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(29651),i=n(819);const o={class:"card"},s=["src"],a={key:1,class:"popup-window"},l={class:"card-popup"},c={class:"text-H6"},d={class:"overline-LG"},u={class:"card-popup-button"};function g(e,t,g,p,h,m){const y=(0,r.up)("svg-icon"),f=(0,r.up)("i18n-t"),b=(0,r.up)("nubtn"),v=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("img",{src:n(20752)(`./${e.card.issuer}.svg`)},null,8,s),(0,r._)("span",null,(0,i.zw)(`**** ${e.card.last4}`),1),(0,r._)("span",null,(0,i.zw)(`Expires ${e.card.date}`),1),e.canDelete?((0,r.wg)(),(0,r.j4)(y,{key:0,class:"pointer",iconName:"trash",iconColor:"gray-2",iconWidth:"20px",onClick:t[0]||(t[0]=t=>e.openPopup())})):(0,r.kq)("",!0),e.showPopup?((0,r.wg)(),(0,r.iD)("div",a,[(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",c,(0,i.zw)(e.$t("NN0622")),1),(0,r.Wm)(f,{class:"body-XS my-30",keypath:"NN0623",tag:"div"},{paymentMethod:(0,r.w5)((()=>[(0,r._)("span",d,(0,i.zw)(e.$t("NN0624")),1)])),_:1}),(0,r._)("div",u,[(0,r.Wm)(b,{theme:"secondary",onClick:t[1]||(t[1]=t=>e.closePopup())},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0203")),1)])),_:1}),(0,r.Wm)(b,{theme:"danger",onClick:t[2]||(t[2]=t=>e.deleteCard())},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0625")),1)])),_:1})])])),[[v,e.closePopup]])])):(0,r.kq)("",!0)])}var p=n(10298),h=n.n(p),m=n(38058),y=Object.defineProperty,f=Object.defineProperties,b=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,S=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||(t={}))w.call(t,n)&&S(e,n,t[n]);if(v)for(var n of v(t))N.call(t,n)&&S(e,n,t[n]);return e},P=(e,t)=>f(e,b(t)),I=(0,r.aZ)({emits:[],name:"CardInfo",directives:{clickOutside:h().directive},props:{card:{type:Object,required:!0},canDelete:{type:Boolean,default:!1}},data(){return{showPopup:!1}},methods:P(x({},(0,m.nv)({deleteCard:"payment/deleteCard"})),{openPopup(){this.showPopup=!0},closePopup(){this.showPopup=!1}})}),_=n(53372);const k=(0,_.Z)(I,[["render",g],["__scopeId","data-v-7461223b"],["__file","CardInfo.vue"]]);var Z=k},97738:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(29651),i=n(819);const o={key:0,class:"warning"},s={class:"warning-small-title"},a={class:"caption-SM"},l={class:"warning-small-title-disk-total"},c={class:"caption-LG"},d={class:"warning-large-desc"},u={class:"warning-large-btn"};function g(e,t,n,g,p,h){const m=(0,r.up)("svg-icon"),y=(0,r.up)("i18n-t"),f=(0,r.up)("btn");return e.cur.hidden||e.isAdmin?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",o,["small"!==e.size||e.dismissed?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:0,class:"warning-small",style:(0,i.j5)(e.bgcolor)},[(0,r.Wm)(m,{iconName:"error",iconColor:"white",iconWidth:"24px"}),(0,r._)("div",s,[(0,r._)("span",a,(0,i.zw)(e.cur.title),1),(0,r._)("div",l,[(0,r._)("div",{class:"warning-small-title-disk-used",style:(0,i.j5)(e.diskStyle)},null,4)]),(0,r.Wm)(y,{class:"warning-small-desc",keypath:e.cur.small.desc,tag:"div"},null,8,["keypath"])]),(0,r.Wm)(m,{iconName:"close",iconColor:"white",iconWidth:"24px",onClick:t[0]||(t[0]=t=>e.close())})],4)),"large"===e.size?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"warning-large",style:(0,i.j5)(e.bgcolor)},[(0,r._)("div",c,(0,i.zw)(e.cur.title),1),(0,r._)("div",d,(0,i.zw)(e.cur.large.desc),1),(0,r._)("div",u,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.cur.large.buttons,(e=>((0,r.wg)(),(0,r.j4)(f,{key:e.label,type:e.type||"light-mid",disabled:e.disabled,onClick:t=>e.func()},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["type","disabled","onClick"])))),128))])],4)):(0,r.kq)("",!0)]))}var p=n(58559),h=n(38058),m=Object.defineProperty,y=Object.defineProperties,f=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,N=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>{for(var n in t||(t={}))v.call(t,n)&&N(e,n,t[n]);if(b)for(var n of b(t))w.call(t,n)&&N(e,n,t[n]);return e},x=(e,t)=>y(e,f(t)),P=(0,r.aZ)({emits:[],name:"DiskWarning",props:{size:{type:String,required:!0}},data(){return{skiped:"1"===localStorage.skipDiskWarning,dismissed:!1}},computed:x(S(S({},(0,h.rn)("payment",{isPro:"isPro",usage:"usage"})),(0,h.Se)({_diskPercent:"payment/getDiskPercent",isAdmin:"user/isAdmin"})),{diskPercent(){return(100*this._diskPercent).toFixed(0)},recalc(){return this.usage.diskLoading?this.$t("NN0454"):this.$t("NN0641")},preset(){return{pro:{0:{hidden:!0},80:{hidden:!0},100:{hidden:!1,title:this.$t("NN0635",{disk:this.diskPercent}),bgcolor:"#4EABE6",large:{desc:this.$t("NN0639"),buttons:[{label:this.recalc,func:this.reload,disabled:this.usage.diskLoading,type:"transparent-mid"},{label:this.$tc("NN0642",1),func:this.contact}]},small:{desc:"NN0640",buttonLabel:this.$tc("NN0642",1),func:this.contact}}},free:{0:{hidden:!0},80:{hidden:!1,title:this.$t("NN0635",{disk:this.diskPercent}),bgcolor:"#FFBA49",large:{desc:this.$t("NN0636",{button:this.$t("NN0561")}),buttons:[{label:this.$t("NN0271"),func:this.skip,type:"transparent-mid"},{label:this.$t("NN0561"),func:this.openPaymentPopup}]},small:{desc:"NN0636",buttonLabel:this.$tc("NN0507",1),func:this.openPaymentPopup}},100:{hidden:!1,title:this.$t("NN0635",{disk:this.diskPercent}),bgcolor:"#4EABE6",large:{desc:this.$t("NN0637"),buttons:[{label:this.recalc,func:this.reload,disabled:this.usage.diskLoading,type:"transparent-mid"},{label:this.$t("NN0561"),func:this.openPaymentPopup}]},small:{desc:"NN0638",buttonLabel:this.$tc("NN0507",1),func:this.openPaymentPopup}}}}},type(){return this._diskPercent>1?100:this._diskPercent>=.8?80:0},cur(){const e=this.isPro?"pro":"free",t=this.skiped&&!this.isPro&&80===this.type&&"large"===this.size?0:this.type;return this.preset[e][t]},bgcolor(){return this.cur.hidden?{}:{"background-color":this.cur.bgcolor}},diskStyle(){return{width:100*Math.min(1,this._diskPercent)+"%"}}}),methods:x(S({},(0,h.nv)({reload:"payment/reloadDiskCapacity"})),{skip(){localStorage.setItem("skipDiskWarning","1"),this.skiped=!0},close(){this.dismissed=!0},contact(){p.Z.contactUs()},openPaymentPopup(){p.Z.openPayment("step1")}})}),I=n(53372);const _=(0,I.Z)(P,[["render",g],["__scopeId","data-v-37437bf8"],["__file","DiskWarning.vue"]]);var k=_},76229:function(e,t,n){"use strict";n.d(t,{Z:function(){return H}});var r=n(29651),i=n(819),o=n(41463);const s=e=>((0,r.dD)("data-v-e3f13562"),e=e(),(0,r.Cn)(),e),a={class:"field"},l={class:"text-H6 text-gray-2 mb-40"},c={class:"field-card"},d=s((()=>(0,r._)("div",{id:"card-number"},null,-1))),u=s((()=>(0,r._)("div",{id:"card-date"},null,-1))),g=s((()=>(0,r._)("div",{id:"card-ccv"},null,-1))),p=[d,u,g],h={key:0,class:"field-card__info"},m={key:1,class:"field-card__info text-green-1"},y={class:"field-card__info overline-LG"},f={key:1,class:"field-invoice"},b={class:"text-H4 mb-25"},v=["placeholder","invalid","onUpdate:modelValue"],w={key:0,class:"text-red"};function N(e,t,n,s,d,u){const g=(0,r.up)("svg-icon"),N=(0,r.up)("options"),S=(0,r.up)("nubtn");return(0,r.wg)(),(0,r.iD)("div",a,[e.isChange?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.Wm)(g,{class:"field__close pointer",iconName:"page-close",iconWidth:"10px",iconColor:"gray-0",onClick:t[0]||(t[0]=t=>e.close())}),(0,r._)("span",l,(0,i.zw)(e.$t("NN0600")),1)],64)):(0,r.kq)("",!0),(0,r._)("div",c,[e.isChange?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(N,{key:0,class:"mb-10",options:e.countryData,modelValue:e.userCountryUi,"onUpdate:modelValue":t[1]||(t[1]=t=>e.userCountryUi=t)},null,8,["options","modelValue"])),(0,r._)("div",{class:(0,i.C_)(["field-card-tappay",{hidden:!e.useTappay}])},p,2),(0,r._)("div",{class:(0,i.C_)(["field-card-stripe",{hidden:e.useTappay}]),id:"stripe"},[(0,r.Wm)(g,{iconName:"loading",iconColor:"gray-1"})],2),e.isChange?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[e.PaidDate?((0,r.wg)(),(0,r.iD)("div",h,[(0,r._)("span",null,(0,i.zw)(e.$t("NN0552",{date:e.PaidDate})),1),(0,r._)("span",null,(0,i.zw)("$"+(e.plans[e.planSelected][e.periodUi].nextPaid-e.coupon.discount)),1)])):(0,r.kq)("",!0),0!==e.coupon.discount?((0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("span",null,(0,i.zw)(e.$t("NN0699")),1),(0,r._)("span",null,(0,i.zw)(`-$${e.coupon.discount}`),1)])):(0,r.kq)("",!0),(0,r._)("div",y,[(0,r._)("span",null,(0,i.zw)(e.$t("NN0553")),1),(0,r._)("span",null,(0,i.zw)(e.priceToday),1)])],64))]),e.isChange?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("div",b,(0,i.zw)(e.$t("NN0554")),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.invoiceInput,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"field-invoice__input",key:t.key},[(0,r.wy)((0,r._)("input",{placeholder:t.ph,invalid:e.biv[t.key],"onUpdate:modelValue":n=>e.bi[t.key]=n},null,8,v),[[o.nr,e.bi[t.key]]]),e.biv[t.key]?((0,r.wg)(),(0,r.iD)("span",w,(0,i.zw)(t.error),1)):(0,r.kq)("",!0)])))),128))])),(0,r.Wm)(S,{class:"mt-10",size:"mid-full",disabled:e.disableSubmit,onClick:t[2]||(t[2]=t=>e.submit())},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.submitText),1)])),_:1},8,["disabled"])])}var S=n(89006),x=n(20083),P=n(65144),I=n(50559),_=n(82636),k=n(38058),Z=n(53813),C=Object.defineProperty,z=Object.defineProperties,T=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,O=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t)=>{for(var n in t||(t={}))E.call(t,n)&&O(e,n,t[n]);if(L)for(var n of L(t))D.call(t,n)&&O(e,n,t[n]);return e},A=(e,t)=>z(e,T(t)),$=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(t){i(t)}},s=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const{mapFields:F}=(0,Z.gU)({getterType:"payment/getField",mutationType:"payment/updateField"});var j=(0,r.aZ)({name:"PaymentField",props:{isChange:{type:Boolean,default:!1}},components:{Options:S.Z},emits:["next"],data(){return{countryData:x.Z.countryList(),stripePayReady:!1,stripe:null,stripeElement:null,tappayPayReady:!1}},watch:{userCountryUi(){this.getPrice(this.userCountryUi)}},computed:A(M(M(M({},(0,k.Se)("payment",{PaidDate:"getPaidDate"})),F({userCountryUi:"userCountryUi",bi:"billingInfo",isLoading:"isLoading"})),(0,k.rn)("payment",{plans:"plans",planSelected:"planSelected",periodUi:"periodUi",userCountryInfo:"userCountryInfo",clientSecret:"stripeClientSecret",biv:"billingInfoInvalid",trialStatus:"trialStatus",coupon:"coupon"})),{useTappay(){return this.isChange?"tw"===this.userCountryInfo:"tw"===this.userCountryUi},priceToday(){return this.PaidDate?"tw"===this.userCountryUi?"$0":"$0.00":"$"+this.plans[this.planSelected][this.periodUi].nextPaid},submitText(){return this.isLoading?this.$t("NN0454"):this.isChange?this.$tc("NN0133",2):"not used"===this.trialStatus?this.$t("NN0560"):this.$t("NN0561")},invoiceReady(){for(const e of this.invoiceInput)if(!e.optional&&!this.bi[e.key])return!1;return!0},payReady(){return this.useTappay?this.tappayPayReady&&this.invoiceReady:this.stripePayReady&&this.invoiceReady},disableSubmit(){return!this.payReady||this.isLoading},invoiceInput(){switch(this.userCountryUi){case"tw":return[...x.Z.gerneral(),...x.Z.TWonly()];default:return x.Z.gerneral()}}}),mounted(){this.tappayInit(),this.stripeInit(),this.getPrice(this.userCountryUi)},methods:A(M(M({},(0,k.nv)({tappayAdd:"payment/tappayAdd",stripeAdd:"payment/stripeAdd",tappayUpdate:"payment/tappayUpdate",stripeUpdate:"payment/stripeUpdate",checkBillingInfo:"payment/checkBillingInfo",getPrice:"payment/getPrice"})),(0,k.OI)({setPrime:"payment/SET_prime"})),{tappayInit(){window.TPDirect.setupSDK(122890,"app_vCknZsetHXn07bficr2XQdp7o373nyvvxNoBEm6yIcqgQGFQA96WYtUTDu60","production"),window.TPDirect.card.setup(x.Z.tappayConfig()),window.TPDirect.card.onUpdate((e=>{this.tappayPayReady=e.canGetPrime}))},stripeInit(){return $(this,null,(function*(){yield this.clientSecret,this.stripe=yield(0,_.loadStripe)("pk_live_51HPpbIJuHmbesNZIbXTLIiElWHqRqS9xLnCkoJ9LynKfQO2G9JIVpeEdogBdBU7aiqvXrTjjJQPUVVGQBdSxwmoc00bJcj9VG2",{locale:P.Z.mappingLocales(this.$i18n.locale)}),this.stripeElement=this.stripe.elements({clientSecret:this.clientSecret,loader:"always"});const e=this.stripeElement.create("payment",x.Z.stripeOption());e.mount("#stripe"),e.on("change",(e=>{this.stripePayReady=e.complete}))}))},checkInvoiceInput(){return $(this,null,(function*(){for(const e of this.invoiceInput)if(e.error&&(yield this.checkBillingInfo(e.key)))return!1;return!0}))},tappaySubmit(){return $(this,null,(function*(){(yield this.checkInvoiceInput())&&(this.isLoading=!0,window.TPDirect.card.getPrime((e=>new Promise((t=>{if(0!==e.status)throw Error(e.msg);this.setPrime(e.card.prime),t()})).then((()=>this.isChange?this.tappayUpdate():this.tappayAdd())).then((({data:e})=>{if(e.flag)throw Error(e.msg);this.close()})).catch((e=>{(0,I.h4)({group:"error",text:e}),this.isLoading=!1})))))}))},stripeSubmit(){return $(this,null,(function*(){(yield this.checkInvoiceInput())&&(this.isLoading=!0,this.stripe.confirmSetup({elements:this.stripeElement,confirmParams:{payment_method_data:{billing_details:{address:{country:this.userCountryUi}}}},redirect:"if_required"}).then((e=>{if(e.error)throw Error(e.error.message)})).then((()=>this.isChange?this.stripeUpdate():this.stripeAdd())).then((({data:e})=>{if(e.flag)throw Error(e.msg);this.close()})).catch((e=>{(0,I.h4)({group:"error",text:e}),this.isLoading=!1})))}))},submit(){this.useTappay?this.tappaySubmit():this.stripeSubmit()},close(){this.$emit("next")}})}),B=n(53372);const R=(0,B.Z)(j,[["render",N],["__scopeId","data-v-e3f13562"],["__file","PaymentField.vue"]]);var H=R},63788:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(29651),i=n(819);const o=["src"];function s(e,t,s,a,l,c){return e.inReviewMode?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("img",{key:0,class:(0,i.C_)(`pro ${e.theme}`),loading:"lazy",draggable:"false",src:n(97554)(`./${e.iconFileName}`)},null,10,o))}var a=n(47147),l=(0,r.aZ)({emits:[],name:"ProItem",props:{theme:{type:String,default:"default"}},computed:{iconFileName(){switch(this.theme){case"roundedRect":return"pro-rounded-rect.svg";default:return"pro.svg"}},inReviewMode(){return a.Z.inReviewMode}}}),c=n(53372);const d=(0,c.Z)(l,[["render",s],["__scopeId","data-v-4684e4cc"],["__file","ProItem.vue"]]);var u=d},52403:function(e,t,n){"use strict";n.d(t,{Z:function(){return ve}});var r=n(29651),i=n(819),o=n(41463);const s=e=>((0,r.dD)("data-v-4e9dc412"),e=e(),(0,r.Cn)(),e),a={key:0,class:"popup-download__form popup-download__form--polling"},l={class:"body-3 text-gray-3"},c={class:"flex flex-between text-gray-2 items-center"},d={class:"body-2"},u={class:"popup-download__progress mt-5"},g={key:1,class:"popup-download__form"},p={class:"body-3 mb-10"},h={class:"popup-download__type"},m={class:"popup-download__type-desc"},y={class:"body-3"},f={key:0},b={key:1,class:"flex items-center mb-10"},v={key:2,class:"flex flex-column items-center mb-10"},w={class:"flex items-center full-width mb-5"},N={key:3},S={key:4},x={key:5},P={key:6},I={key:7,class:"flex items-center mb-10"},_={key:1,class:"popup-download__color-format fixed"},k={class:"body-XS"},Z={key:8,class:"mb-10 pt-5"},C={key:0,class:"mt-10"},z={class:"flex items-center"},T=["disabled"],L=s((()=>(0,r._)("span",null,"px",-1))),E={class:"mb-10 pt-5"},D={class:"flex items-center"},O=s((()=>(0,r._)("hr",{class:"popup-download__hr my-15"},null,-1))),M={class:"dev-selector mb-10"},A=s((()=>(0,r._)("hr",{class:"popup-download__hr my-15"},null,-1)));function $(e,t,n,s,$,F){const j=(0,r.up)("svg-icon"),B=(0,r.up)("download-type-option"),R=(0,r.up)("dropdown"),H=(0,r.up)("download-check-button"),U=(0,r.up)("property-bar"),W=(0,r.up)("download-page-selection"),V=(0,r.up)("nubtn"),G=(0,r.Q2)("progress"),q=(0,r.Q2)("ratio-change"),K=(0,r.Q2)("click-outside");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{class:"popup-download text-left",style:(0,i.j5)(e.containerStyles)},[e.polling?((0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",l,(0,i.zw)(e.name||`${e.$t("NN0079")}`),1),(0,r._)("div",c,[(0,r._)("span",d,(0,i.zw)(e.$t("NN0216")),1),(0,r.Wm)(j,{class:"pointer",iconName:"close",iconWidth:"16px",iconColor:"gray-2",onClick:t[0]||(t[0]=t=>e.$emit("close"))})]),(0,r._)("div",u,[(0,r._)("div",{class:"popup-download__progress-value",style:(0,i.j5)({width:`${e.progress}%`})},null,4)])])):((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",p,(0,i.zw)(e.$t("NN0121")),1),(0,r.Wm)(R,{class:"mb-10",options:e.typeOptions,onSelect:e.handleSelectType},{option:(0,r.w5)((({data:e})=>[(0,r._)("div",h,[(0,r.Wm)(B,{name:e.name,tag:e.tag},null,8,["name","tag"]),(0,r._)("div",m,(0,i.zw)(e.desc),1)])])),default:(0,r.w5)((()=>[(0,r.Wm)(B,{name:e.selectedType.name,tag:e.selectedType.tag},null,8,["name","tag"])])),_:1},8,["options","onSelect"]),(0,r._)("div",y,["omitBackground"in e.selected?((0,r.wg)(),(0,r.iD)("div",f,[(0,r.Wm)(H,{class:"mb-10",type:"checkbox",label:`${e.$t("NN0215")}`,"default-checked":1===e.selected.omitBackground,onChange:t[1]||(t[1]=({checked:t})=>e.handleUpdate("omitBackground",t?1:0))},null,8,["label","default-checked"])])):(0,r.kq)("",!0),"scale"in e.selected?((0,r.wg)(),(0,r.iD)("div",b,[(0,r._)("span",null,(0,i.zw)(`${e.$t("NN0122")} x`),1),(0,r.Wm)(R,{class:"mx-5 popup-download__size-scale",options:e.scaleOptions,onSelect:t[2]||(t[2]=t=>e.handleUpdate("scale",t))},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.selected.scale),1)])),_:1},8,["options"]),(0,r._)("span",null,(0,i.zw)(e.$t("NN0123")),1)])):(0,r.kq)("",!0),"quality"in e.selected?((0,r.wg)(),(0,r.iD)("div",v,[(0,r._)("div",w,[(0,r._)("span",null,(0,i.zw)(e.$t("NN0132")),1),(0,r.Wm)(U,{class:"popup-download__size-scale ml-15"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r._)("input",{class:"px-0",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedTypeQuality=t)},null,512),[[o.nr,e.selectedTypeQuality,void 0,{number:!0}]])])),_:1})]),(0,r.wy)((0,r._)("input",{class:"popup-download__range-input input__slider--range","onUpdate:modelValue":t[4]||(t[4]=t=>e.selected.quality=t),max:"100",min:"1",type:"range"},null,512),[[G],[o.nr,e.selected.quality,void 0,{number:!0}],[q]])])):(0,r.kq)("",!0),"pdf_print"===e.selectedTypeVal&&"bleed"in e.selected?((0,r.wg)(),(0,r.iD)("div",N,[(0,r.Wm)(H,{class:"mb-10",type:"checkbox",label:`${e.$t("NN0774")}`,"default-checked":2===e.selected.bleed,onChange:t[5]||(t[5]=({checked:t})=>e.handleUpdate("bleed",t?2:1))},null,8,["label","default-checked"])])):(0,r.kq)("",!0),"bleed"in e.selected?((0,r.wg)(),(0,r.iD)("div",S,[(0,r.Wm)(H,{class:"mb-10",type:"checkbox",label:`${e.$t("NN0775")}`,"default-checked":e.selected.bleed>0,onChange:t[6]||(t[6]=({checked:t})=>e.handleUpdate("bleed",t?1:0))},null,8,["label","default-checked"])])):(0,r.kq)("",!0),"pdf_print"===e.selectedTypeVal&&"outline"in e.selected?((0,r.wg)(),(0,r.iD)("div",x,[(0,r.Wm)(H,{class:"mb-10",type:"checkbox",label:`${e.$t("NN0794")}`,"default-checked":1===e.selected.outline,info:`${e.$t("NN0799")}`,infoUrl:`${e.$t("NN0802")}`,onChange:t[7]||(t[7]=({checked:t})=>e.handleUpdate("outline",t?1:0))},null,8,["label","default-checked","info","infoUrl"])])):(0,r.kq)("",!0),"outline"in e.selected?((0,r.wg)(),(0,r.iD)("div",P,[(0,r.Wm)(H,{class:"mb-10",type:"checkbox",label:`${e.$t("NN0776")}`,"default-checked":2===e.selected.outline,info:`${e.$t("NN0800")}`,infoUrl:`${e.$t("NN0803")}`,onChange:t[8]||(t[8]=({checked:t})=>e.handleUpdate("outline",t?2:0))},null,8,["label","default-checked","info","infoUrl"])])):(0,r.kq)("",!0),"jpg"!==e.selectedTypeVal&&"png"!==e.selectedTypeVal?((0,r.wg)(),(0,r.iD)("div",I,[(0,r._)("span",null,(0,i.zw)(e.$t("NN0777")),1),e.colorFormats[e.selectedTypeVal].length>1?((0,r.wg)(),(0,r.j4)(R,{key:0,class:"mx-5 popup-download__color-format",current:e.colorFormats[e.selectedTypeVal][e.selected.cmyk?1:0].label,placeholder:e.colorFormats[e.selectedTypeVal][0].label,options:e.colorFormats[e.selectedTypeVal],onSelect:e.handleColorModeSelect},null,8,["current","placeholder","options","onSelect"])):1===e.colorFormats[e.selectedTypeVal].length?((0,r.wg)(),(0,r.iD)("div",_,[(0,r._)("span",k,(0,i.zw)(e.colorFormats[e.selectedTypeVal][e.selected.cmyk?1:0].label),1)])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),e.isDetailPage?((0,r.wg)(),(0,r.iD)("div",Z,[(0,r.Uk)((0,i.zw)(e.$t("NN0344")),1),(0,r.Wm)(R,{class:"mt-5",options:e.detailPageDownloadOptions,onSelect:e.handleDetailPageOption},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.detailPageOptionLabel),1)])),_:1},8,["options","onSelect"]),"splice"!==e.selectedDetailPage.option||e.selectedTypeVal.includes("pdf")?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",C,[(0,r.Wm)(H,{class:"mb-10",type:"radio","group-name":"product_page",label:e.$t("NN0345"),"default-checked":e.selectedDetailPage.noLimit,onChange:e.handleDetailPageIsLimited,value:"no-limit"},null,8,["label","default-checked","onChange"]),(0,r._)("div",null,[(0,r.Wm)(H,{class:"mb-5",type:"radio","group-name":"product_page",label:e.$t("NN0346"),"default-checked":!e.selectedDetailPage.noLimit,onChange:e.handleDetailPageIsLimited,value:"height-limit"},null,8,["label","default-checked","onChange"]),(0,r._)("div",z,[(0,r.Wm)(U,{class:"popup-download__size-scale ml-20 mr-5"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=t=>e.selectedDetailPage.height=t),disabled:e.selectedDetailPage.noLimit,onBlur:t[10]||(t[10]=(...t)=>e.handleMaxHeight&&e.handleMaxHeight(...t))},null,40,T),[[o.nr,e.selectedDetailPage.height,void 0,{number:!0}]])])),_:1}),L])])]))])):(0,r.kq)("",!0),(0,r._)("div",E,(0,i.zw)(e.$t("NN0124")),1),(0,r._)("div",null,[(0,r.Wm)(H,{class:"mb-10",type:"radio","group-name":"range",label:`${e.$t("NN0125")}（${e.$t("NN0134",{num:`${e.currentPageIndex+1}`})}）`,value:"current","default-checked":"current"===e.rangeType,onChange:e.handleRangeType},null,8,["label","default-checked","onChange"]),(0,r.Wm)(H,{class:"mb-10",type:"radio","group-name":"range",label:`${e.$t("NN0126")}`,value:"all","default-checked":"all"===e.rangeType,onChange:e.handleRangeType},null,8,["label","default-checked","onChange"]),(0,r._)("div",D,[(0,r.Wm)(H,{type:"radio","group-name":"range",value:"spec",label:`${e.$t("NN0127")}`,"default-checked":"spec"===e.rangeType,onChange:e.handleRangeType},null,8,["label","default-checked","onChange"]),(0,r.Wm)(W,{class:"ml-5 w-75",defaultSelected:e.pageRange,onConfirm:e.handleRangeConfirm},null,8,["defaultSelected","onConfirm"])])]),e.isAdmin||e.onDev?((0,r.wg)(),(0,r.iD)(r.HY,{key:9},[O,(0,r._)("div",M,[(0,r.Wm)(R,{class:"body-3 full-width",options:e.devs,onSelect:e.handleDevSelect},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.selectedDevLabel),1)])),_:1},8,["options","onSelect"])]),(0,r._)("div",null,[(0,r.Wm)(V,{size:"sm-full",disabled:e.isButtonDisabled,onClick:t[11]||(t[11]=t=>e.handleSubmit(!0))},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(`${e.$t("NN0010")} (${e.$t("NN0460")})`),1)])),_:1},8,["disabled"])])],64)):(0,r.kq)("",!0),A,(0,r.Wm)(H,{class:"mb-20",type:"checkbox",label:`${e.$t("NN0129")}`,"default-checked":e.saveSubmission,onChange:t[12]||(t[12]=({checked:t})=>e.handleSubmission(t))},null,8,["label","default-checked"])]),(0,r._)("div",null,[(0,r.Wm)(V,{theme:"pdf_print"!==e.selectedTypeVal||e.inReviewMode?"primary":"icon_text",size:"sm-full",icon:["pro","alarm"],disabled:e.isButtonDisabled,onClick:t[13]||(t[13]=t=>e.handleSubmit())},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("NN0010")),1)])),_:1},8,["theme","disabled"])])]))],4)),[[K,e.handleClose]])}const F={class:"download-check-button"},j={class:"download-check-button__label"},B={key:0},R={key:1},H={class:"no-wrap"},U={key:0},W=["href"],V=["type","value","name","checked"];function G(e,t,n,o,s,a){const l=(0,r.up)("svg-icon"),c=(0,r.up)("v-tooltip");return(0,r.wg)(),(0,r.iD)("label",F,["checkbox"===e.type?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"mr-5",iconColor:e.checked?"blue-1":"light-gray",iconName:e.checked?"checkbox-checked":"checkbox",iconWidth:e.iconSize},null,8,["iconColor","iconName","iconWidth"])):((0,r.wg)(),(0,r.j4)(l,{key:1,class:"mr-5",iconColor:e.checked?"blue-1":"light-gray",iconName:e.checked?"radio-checked":"radio",iconWidth:e.iconSize},null,8,["iconColor","iconName","iconWidth"])),(0,r.WI)(e.$slots,"default",{},(()=>[(0,r._)("div",j,[1===e.label.split(" ").length?((0,r.wg)(),(0,r.iD)("span",B,(0,i.zw)(e.label),1)):((0,r.wg)(),(0,r.iD)("span",R,(0,i.zw)(e.label.split(" ").slice(0,-1).join(" ")),1)),(0,r._)("span",H,[e.label.split(" ").length>1?((0,r.wg)(),(0,r.iD)("span",U,(0,i.zw)(" "+e.label.split(" ").at(-1)),1)):(0,r.kq)("",!0),e.info?((0,r.wg)(),(0,r.j4)(c,{key:1,class:"download-check-button__label__icon-info",theme:"hint-menu"},{popper:(0,r.w5)((()=>[(0,r._)("span",null,[(0,r.Uk)((0,i.zw)(e.info),1),e.infoUrl?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"text-white",href:e.infoUrl,target:"_blank"},(0,i.zw)(`${e.$t("NN0801")}`),9,W)):(0,r.kq)("",!0)])])),default:(0,r.w5)((()=>[(0,r.Wm)(l,{iconName:"info",iconWidth:"16px",iconColor:"gray-2"})])),_:1})):(0,r.kq)("",!0)])])]),!0),(0,r._)("input",{class:"download-check-button__input",type:e.type,value:e.value,name:e.groupName,checked:!!e.checked,onChange:t[0]||(t[0]=(...t)=>e.handleChange&&e.handleChange(...t))},null,40,V)])}var q=(0,r.aZ)({emits:["change"],props:{defaultChecked:{type:Boolean,default:!1},iconSize:{type:String,default:"16px"},info:{type:String,default:""},infoUrl:{type:String,default:""},groupName:String,type:String,label:{type:String,required:!0},value:[Number,String]},data(){return{checked:this.defaultChecked?"checked":""}},watch:{defaultChecked:{handler(e){this.checked=e},deep:!0}},methods:{handleChange(e){const{value:t,checked:n}=e.target;this.checked=n?"checked":"",this.$emit("change",{value:t,checked:n})}}}),K=n(53372);const Y=(0,K.Z)(q,[["render",G],["__scopeId","data-v-3b9e0610"],["__file","DownloadCheckButton.vue"]]);var X=Y;const Q={class:"download-page-selection"},J={class:"download-page-selection__label"},ee={class:"download-page-selection__options py-10 px-15 flex"};function te(e,t,n,s,a,l){const c=(0,r.up)("checkbox"),d=(0,r.up)("nubtn"),u=(0,r.up)("dropdown");return(0,r.wg)(),(0,r.iD)("div",Q,[(0,r.Wm)(u,{ref:"dropdown",isCustomOptions:"",onOpen:e.handleReset},{custom:(0,r.w5)((()=>[(0,r._)("div",ee,[(0,r._)("div",{class:"mb-10 pointer",onClick:t[0]||(t[0]=(0,o.iM)(((...t)=>e.handleCancel&&e.handleCancel(...t)),["self"]))},(0,i.zw)(e.$t("NN0130")),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.preSelected,((t,n)=>((0,r.wg)(),(0,r.j4)(c,{class:"mb-10",key:n,modelValue:e.preSelected[n],"onUpdate:modelValue":t=>e.preSelected[n]=t},{default:(0,r.w5)((()=>[(0,r._)("span",null,(0,i.zw)(e.$t("NN0134",{num:`${n+1}`})),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),128)),(0,r._)("div",null,[(0,r.Wm)(d,{size:"sm-full",onClick:e.handleSubmit},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$tc("NN0133",2)),1)])),_:1},8,["onClick"])])])])),default:(0,r.w5)((()=>[(0,r._)("span",J,(0,i.zw)(e.rangeLabel)+" "+(0,i.zw)(e.$t("NN0128")),1)])),_:1},8,["onOpen"])])}var ne=n(15924),re=n(38058),ie=Object.defineProperty,oe=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,le=(e,t,n)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ce=(e,t)=>{for(var n in t||(t={}))se.call(t,n)&&le(e,n,t[n]);if(oe)for(var n of oe(t))ae.call(t,n)&&le(e,n,t[n]);return e},de=(0,r.aZ)({emits:["confirm"],props:{defaultSelected:{type:Array,required:!0}},data(){return{selected:[],preSelected:[],rangeLabel:""}},mounted(){const{pages:e,defaultSelected:t=[]}=this,n=new Array(e.length).fill(!1).map(((e,n)=>t.includes(n)));this.preSelected=[...n],this.handleLabel()},components:{Checkbox:ne.Z},computed:ce({},(0,re.Se)({pages:"getPages"})),methods:{handleCancel(){this.preSelected=this.preSelected.map((()=>!1))},handleReset(){this.preSelected=[...this.selected]},handleSubmit(){this.$refs.dropdown.handleClose(),this.handleLabel(),this.$emit("confirm",this.preSelected)},handleLabel(){const{preSelected:e}=this,t=e.reduce(((e,t,n)=>{const r=e.length-1;return t?e[r].push(n+1):e.push([]),e}),[[]]),n=t.filter((e=>e.length)).map((e=>e.length>1?`${e[0]}-${e.pop()}`:e[0])).join(",");this.rangeLabel=n||"--",this.selected=[...this.preSelected]}}});const ue=(0,K.Z)(de,[["render",te],["__scopeId","data-v-d022b6b2"],["__file","DownloadPageSelection.vue"]]);var ge=ue,pe=n(43550),he=n(16080),me=n(10298),ye=n.n(me),fe=(0,r.aZ)({components:{DownloadCheckButton:X,DownloadTypeOption:pe.Z,DownloadPageSelection:ge},directives:{clickOutside:ye().directive},props:{useExternelJSON:{type:Boolean,default:!1},pageIndex:{type:Number,required:!0},hideContainer:{default:!1,type:Boolean}},emits:["close","inprogress"],mixins:[he.Z],computed:{containerStyles(){return this.hideContainer?{}:{padding:"18px","border-radius":"5px","box-shadow":"0px 4px 13px rgba(0, 0, 0, 0.25)","background-color":"white"}}}});const be=(0,K.Z)(fe,[["render",$],["__scopeId","data-v-4e9dc412"],["__file","PopupDownload.vue"]]);var ve=be},86545:function(e,t,n){var r={"./add-image.svg":37189,"./add-page.svg":36466,"./addColor.svg":96777,"./adjust-order.svg":7229,"./advanced-active.svg":16293,"./advanced.svg":49634,"./all-file.svg":65318,"./all-pages.svg":23228,"./all.svg":91610,"./angle.svg":17984,"./arrow-left.svg":46004,"./arrow-right.svg":46336,"./arrow-up.svg":42958,"./arrow.svg":16169,"./back-circle.svg":58312,"./bg-separate.svg":25559,"./bg.svg":53349,"./bleed.svg":48610,"./bold.svg":53250,"./bottom-align.svg":57455,"./brand.svg":74564,"./brandkit.svg":7380,"./brush.svg":73398,"./butt.svg":14770,"./cameraroll.svg":88259,"./caret-down.svg":34350,"./caret-up.svg":93065,"./center-horizontal.svg":96175,"./center-horizontally.svg":22328,"./center-vertical.svg":80988,"./center-vertically.svg":32461,"./check-circle.svg":69174,"./check-mobile-circle.svg":20628,"./check.svg":92609,"./checkbox-checked.svg":48940,"./checkbox.svg":94479,"./chevron-down.svg":37381,"./chevron-duo-left.svg":13342,"./chevron-duo-right.svg":94361,"./chevron-left.svg":92306,"./chevron-right.svg":95542,"./chevron-up.svg":77144,"./clear.svg":9326,"./clock.svg":13498,"./close-circle.svg":67060,"./close-large.svg":15579,"./close.svg":13852,"./cloud-upload.svg":23605,"./color.svg":35610,"./confirm-circle.svg":15552,"./control-points/move.svg":54882,"./control-points/move2.svg":85284,"./control-points/rotate.svg":63029,"./control-points/rotate2.svg":56873,"./control-points/scale.svg":70864,"./copy-styles.svg":84489,"./copy.svg":43949,"./crop.svg":96383,"./dash-1.svg":15951,"./delete.svg":39528,"./disable.svg":60466,"./distribute-horizontally.svg":96965,"./distribute-vertically.svg":69616,"./done.svg":37295,"./download.svg":47199,"./drag-page.svg":34264,"./drop-down.svg":17232,"./duplicate-page.svg":96146,"./duplicate.svg":20347,"./edit.svg":57483,"./effect.svg":75118,"./email-black.svg":10634,"./end-marker.svg":57033,"./error.svg":46361,"./eye-dropper.svg":81363,"./eye-slash.svg":21782,"./eye.svg":71935,"./facebook-black.svg":21573,"./facebook-circle.svg":92264,"./favorites-fill.svg":43641,"./favorites.svg":77506,"./feature-icon-us4-s.svg":3430,"./feature-icon-us4.svg":27001,"./feature-icon1-s.svg":27610,"./feature-icon1.svg":69026,"./feature-icon2-s.svg":96498,"./feature-icon2.svg":30589,"./feature-icon3-s.svg":10187,"./feature-icon3.svg":84934,"./feature-icon4-s.svg":36646,"./feature-icon4.svg":88805,"./feature-icon5-s.svg":6080,"./feature-icon5.svg":80583,"./feature-true.svg":55023,"./file.svg":91935,"./filled.svg":66076,"./flip-h.svg":62715,"./flip-v.svg":95857,"./flip.svg":9323,"./folder-tap.svg":65835,"./folder.svg":51866,"./folder_minus.svg":91357,"./folder_plus.svg":47468,"./font-height.svg":44369,"./font-size.svg":58470,"./font-spacing.svg":29532,"./font-vertical.svg":19603,"./font.svg":65961,"./forbid.svg":62685,"./free.svg":74948,"./grid-selected.svg":4264,"./grid.svg":59403,"./group.svg":31588,"./heart.svg":54357,"./home-tap.svg":36317,"./home.svg":63372,"./horizontal.svg":34190,"./image-preview-large.svg":25998,"./info-mobile.svg":48753,"./info.svg":99371,"./insert-cross.svg":56239,"./insert.svg":51031,"./instagram-black.svg":48978,"./instagram-circle.svg":50481,"./invoice.svg":78009,"./italic.svg":78432,"./item-check.svg":14289,"./layers-alt.svg":11306,"./layers-back.svg":98539,"./layers-backward.svg":75837,"./layers-forward.svg":76993,"./layers-front.svg":80909,"./left-align.svg":48759,"./left-arrow.svg":23415,"./line-dash.svg":45880,"./line-template-1.svg":75120,"./line-template-10.svg":45753,"./line-template-11.svg":67303,"./line-template-2.svg":9099,"./line-template-3.svg":12009,"./line-template-4.svg":61769,"./line-template-5.svg":1740,"./line-template-6.svg":47871,"./line-template-7.svg":96409,"./line-template-8.svg":10064,"./line-template-9.svg":92786,"./line-template-fb-cover.svg":49464,"./line-template-new.svg":90224,"./line-template.svg":42954,"./line-width.svg":94531,"./link.svg":91806,"./lock.svg":53598,"./logo-icon.svg":53669,"./logo.svg":32256,"./logout.svg":78137,"./mail-circle.svg":52304,"./main-menu.svg":58469,"./menu.svg":88382,"./minus-origin.svg":37020,"./minus-small.svg":19969,"./minus-square.svg":26209,"./minus.svg":59098,"./mobile-photo-shadow-blur.svg":75060,"./mobile-photo-shadow-floating.svg":67556,"./mobile-photo-shadow-frame.svg":92367,"./mobile-photo-shadow-imageMatched.svg":35010,"./mobile-photo-shadow-none.svg":36498,"./mobile-photo-shadow-shadow.svg":87376,"./more.svg":18717,"./more_horizontal.svg":85656,"./more_vertical.svg":7458,"./move-vertical.svg":76093,"./multi-color.svg":71633,"./multiple-file.svg":93169,"./multiple-select.svg":92573,"./navPage.svg":58970,"./new-page.svg":51795,"./no-dash.svg":10928,"./non-filled.svg":63485,"./notification-on.svg":66812,"./notify.svg":64245,"./nudge.svg":50962,"./objects.svg":54370,"./overlay.svg":58408,"./page-back.svg":71054,"./page-close.svg":90099,"./paste.svg":36724,"./pen.svg":20971,"./photo-shadow-blur.svg":56620,"./photo-shadow-floating.svg":46693,"./photo-shadow-frame.svg":19873,"./photo-shadow-imageMatched.svg":60088,"./photo-shadow-none.svg":89380,"./photo-shadow-shadow.svg":33491,"./photo.svg":90512,"./picker.svg":86053,"./play-circle.svg":8770,"./plus-origin.svg":87247,"./plus-small.svg":17132,"./plus-square.svg":90398,"./plus.svg":23e3,"./position.svg":97095,"./preserve.svg":48235,"./pro.svg":34841,"./question.svg":5928,"./radio-checked.svg":29316,"./radio.svg":77082,"./rainbow.svg":80428,"./redo.svg":76820,"./reduction.svg":97759,"./remove-bg.svg":34705,"./remover-minus.svg":10206,"./remover-plus.svg":29215,"./replace.svg":19839,"./reset.svg":8860,"./resize.svg":98380,"./right-align.svg":99156,"./right-arrow.svg":54374,"./round.svg":87403,"./rounded-corner.svg":12342,"./ruler-h.svg":48789,"./ruler-v.svg":32670,"./search.svg":29551,"./select-page.svg":96359,"./send.svg":7049,"./sequence.svg":1490,"./set-as-frame.svg":97048,"./setting.svg":98401,"./settings.svg":68060,"./shape.svg":25417,"./share-alt.svg":96635,"./sliders.svg":57695,"./spacing.svg":29511,"./spiner.svg":73723,"./start-marker.svg":99086,"./template-tap.svg":93232,"./template.svg":76068,"./test.svg":94576,"./text-align-center.svg":57787,"./text-align-justify.svg":68176,"./text-align-left.svg":91054,"./text-align-right.svg":51557,"./text-color-mobile.svg":17964,"./text-effect-echo.svg":55149,"./text-effect-hollow.svg":19785,"./text-effect-lift.svg":70455,"./text-effect-none.svg":19216,"./text-effect-shadow.svg":8196,"./text-effect-splice.svg":34372,"./text-effect/LetterBG/bear-custom.svg":51428,"./text-effect/LetterBG/butter-flower0.svg":84671,"./text-effect/LetterBG/butter-flower1.svg":94928,"./text-effect/LetterBG/butter-flower2.svg":64811,"./text-effect/LetterBG/butter-flower3.svg":51713,"./text-effect/LetterBG/butter-flower4.svg":84309,"./text-effect/LetterBG/cat-custom.svg":81181,"./text-effect/LetterBG/cloud0.svg":85426,"./text-effect/LetterBG/cloud1.svg":81988,"./text-effect/LetterBG/cloud2.svg":26482,"./text-effect/LetterBG/cloud3.svg":49923,"./text-effect/LetterBG/dog-custom.svg":97693,"./text-effect/LetterBG/flower-frame0.svg":508,"./text-effect/LetterBG/flower-frame1.svg":98322,"./text-effect/LetterBG/flower-frame2.svg":77526,"./text-effect/LetterBG/flower-frame3.svg":73512,"./text-effect/LetterBG/flower-frame4.svg":75031,"./text-effect/LetterBG/paper-tap-grid-head.svg":8556,"./text-effect/LetterBG/paper-tap-grid-tail.svg":97050,"./text-effect/LetterBG/paper-tap-grid0.svg":50620,"./text-effect/LetterBG/paper-tap-head.svg":33111,"./text-effect/LetterBG/paper-tap-point-head.svg":67347,"./text-effect/LetterBG/paper-tap-point-tail.svg":11186,"./text-effect/LetterBG/paper-tap-point0.svg":73514,"./text-effect/LetterBG/paper-tap-stripe-head.svg":638,"./text-effect/LetterBG/paper-tap-stripe-tail.svg":35733,"./text-effect/LetterBG/paper-tap-stripe0.svg":11058,"./text-effect/LetterBG/paper-tap-tail.svg":54790,"./text-effect/LetterBG/paper-tap0.svg":22353,"./text-effect/LetterBG/rabbit-custom.svg":74417,"./text-effect/LetterBG/rainbow-circle.svg":73237,"./text-effect/LetterBG/rectangle-flag-custom.svg":89824,"./text-effect/LetterBG/solid-heart.svg":28864,"./text-effect/LetterBG/star0.svg":60552,"./text-effect/LetterBG/star1.svg":71262,"./text-effect/LetterBG/star2.svg":77242,"./text-effect/LetterBG/text-book.svg":81104,"./text-effect/LetterBG/triangle-flag-custom.svg":89648,"./text-effect/LetterBG/vintage-flower-custom.svg":51111,"./text-effect/LetterBG/vintage-flower.svg":31968,"./text-effect/curve-center.svg":10947,"./text-effect/text-color.svg":60171,"./text-format.svg":86741,"./text.svg":94572,"./to-top.svg":233,"./top-align.svg":55144,"./transparency.svg":23935,"./transparent.svg":35425,"./trash.svg":31369,"./uncheck.svg":42505,"./underline.svg":15001,"./undo.svg":15455,"./unfold-more.svg":18073,"./unfold.svg":85593,"./ungroup.svg":19301,"./unlock.svg":90968,"./update.svg":93510,"./upload-cloud.svg":90435,"./upload.svg":61806,"./user-admin-disable.svg":26548,"./user-admin.svg":19200,"./vertical.svg":88733,"./vivisticker_logo.svg":59338};function i(e){return o(e).then(n)}function o(e){return n.e(846).then((function(){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}))}i.keys=function(){return Object.keys(r)},i.resolve=o,i.id=86545,e.exports=i},25286:function(e,t,n){var r={"./jp/brandkit.jpg":67301,"./jp/cb.jpg":84504,"./jp/export-pdf-print.jpg":90860,"./jp/page-resize.jpg":87640,"./jp/pro-bg.jpg":87375,"./jp/pro-object.jpg":70537,"./jp/pro-template1.jpg":14635,"./jp/pro-template2.jpg":35658,"./jp/pro-text.jpg":83730,"./jp/remover.jpg":85609,"./tw/brandkit.jpg":36122,"./tw/cb.jpg":22675,"./tw/export-pdf-print.jpg":65408,"./tw/page-resize.jpg":39177,"./tw/pro-bg.jpg":40125,"./tw/pro-object.jpg":76482,"./tw/pro-template1.jpg":85554,"./tw/pro-template2.jpg":39362,"./tw/pro-text.jpg":64241,"./tw/remover.jpg":55891,"./tw/template-cb.jpg":3375,"./us/brandkit.jpg":3496,"./us/cb.jpg":72074,"./us/export-pdf-print.jpg":84930,"./us/page-resize.jpg":34675,"./us/pro-bg.jpg":36026,"./us/pro-object.jpg":53769,"./us/pro-template1.jpg":81434,"./us/pro-template2.jpg":79506,"./us/pro-text.jpg":13243,"./us/remover.jpg":30035};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=25286},20752:function(e,t,n){var r={"./AMEX.svg":87349,"./DinersClub.svg":84717,"./Discover.svg":89708,"./JCB.svg":27006,"./MasterCard.svg":31814,"./UnionPay.svg":79862,"./Unknown.svg":44038,"./VISA.svg":48432};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=20752},47188:function(e,t,n){var r={"./Amazon.svg":7009,"./Facebook.svg":60047,"./Feature 1_jp.svg":56716,"./Feature 1_tw.svg":44685,"./Feature 1_us.svg":47460,"./Feature 2_jp.png":66934,"./Feature 2_tw.png":61697,"./Feature 2_us.png":26268,"./Feature 3_jp.svg":70275,"./Feature 3_tw.svg":75396,"./Feature 3_us.svg":93676,"./Google.svg":95521,"./Instagram.svg":54827,"./Line.svg":30534,"./Youtube.svg":77275,"./header_img_jp.png":40909,"./header_img_tw.png":68744,"./header_img_us.png":794,"./jp/remover.mp4":94102,"./jp/storytelling.mp4":22401,"./tw/remover.mp4":99936,"./tw/storytelling.mp4":93252,"./us/remover.mp4":70701,"./us/storytelling.mp4":58079};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=47188},89088:function(e,t,n){var r={"./avatar.svg":64751,"./custom-white.svg":60831,"./custom.svg":57371,"./ecommerce.svg":60936,"./facebook.svg":92040,"./flyer.svg":1250,"./google_ad.svg":95488,"./instagram.svg":52808,"./invitation.svg":18524,"./line.svg":69080,"./logo.svg":25343,"./menu.svg":26583,"./momo.svg":92575,"./presentation.svg":88624,"./resume.svg":34618,"./youtube.svg":67540};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=89088},97554:function(e,t,n){var r={"./25off.svg":91865,"./26off.svg":36959,"./E-payment.svg":12208,"./pro-rounded-rect.svg":17707,"./pro.svg":53060};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=97554},92431:function(e,t,n){var r={"./btn-pack-hr-white.svg":34938,"./btn-pack-hr.svg":10091};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=92431},16692:function(e,t,n){var r={"./baby0.svg":82538,"./baby1.svg":20884,"./baby2.svg":26578,"./baby3.svg":58958,"./baby4.svg":68621,"./bear0.svg":7129,"./bear1.svg":7884,"./bear2.svg":58940,"./bread0.svg":57594,"./bread1.svg":55219,"./bread2.svg":17260,"./bread3.svg":47524,"./bread4.svg":17473,"./cat-paw0.svg":47725,"./cat-paw1.svg":43717,"./cat-paw2.svg":46481,"./cat-paw3.svg":69234,"./cat-paw4.svg":18087,"./cat0.svg":22493,"./cat1.svg":11996,"./cat2.svg":86388,"./cat3.svg":54836,"./cat4.svg":58990,"./dog0.svg":64164,"./dog1.svg":55208,"./dog2.svg":72154,"./gummybear0.svg":93274,"./gummybear1.svg":70310,"./gummybear2.svg":50134,"./gummybear3.svg":94214,"./gummybear4.svg":88625,"./leaf0.svg":82102,"./leaf1.svg":86069,"./leaf2.svg":75852,"./leaf3.svg":6997,"./leaf4.svg":49851,"./penguin0.svg":1324,"./penguin1.svg":59284,"./penguin2.svg":85017,"./penguin3.svg":3416,"./penguin4.svg":96650,"./planet0.svg":70115,"./planet1.svg":20437,"./planet2.svg":47259,"./planet3.svg":16402,"./planet4.svg":5408,"./rabbit0.svg":10373,"./rabbit1.svg":42459,"./rabbit2.svg":39447,"./rectangle-flag0.svg":23453,"./rectangle-flag1.svg":47498,"./rectangle-flag2.svg":10651,"./rectangle-flag3.svg":42423,"./rectangle-flag4.svg":13652,"./triangle-flag0.svg":21751,"./triangle-flag1.svg":55563,"./triangle-flag2.svg":27466,"./triangle-flag3.svg":85985};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=16692},69072:function(e,t,n){var r={"./bg-bear-custom.png":20857,"./bg-butter-flower.png":17634,"./bg-cat-custom.png":82308,"./bg-cat-paw.png":98077,"./bg-dog-custom.png":1152,"./bg-flower-frame-custom.png":89702,"./bg-flower-frame.png":72617,"./bg-heart-custom.png":83753,"./bg-heart-warm.png":57405,"./bg-paper-tap-grid.png":65906,"./bg-paper-tap-point.png":3071,"./bg-paper-tap-stripe.png":16076,"./bg-paper-tap.png":2314,"./bg-rabbit-custom.png":96198,"./bg-rainbow-dark.png":48256,"./bg-rectangle-flag-custom.png":43330,"./bg-rectangle-flag.png":18871,"./bg-rounded-borderless.png":50900,"./bg-rounded-both.png":16064,"./bg-rounded-hollow.png":2404,"./bg-speech-bubble-triangle.png":37812,"./bg-speech-bubble.png":99559,"./bg-square-borderless.png":30430,"./bg-square-both.png":97067,"./bg-square-hollow.png":85774,"./bg-text-book-jp.png":93807,"./bg-text-book-tw.png":35796,"./bg-text-book-us.png":69233,"./bg-triangle-flag-custom.png":57265,"./bg-triangle-flag.png":23707,"./bg-vintage-flower-custom.png":67715,"./bg-vintage-flower.png":4632};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=69072},36362:function(e,t,n){var r={"./bg-baby.png":18415,"./bg-bear-custom.png":20857,"./bg-bear.png":32821,"./bg-bread.png":74004,"./bg-butter-flower.png":17634,"./bg-cat-custom.png":82308,"./bg-cat-paw.png":98077,"./bg-cat.png":98409,"./bg-circle.png":14082,"./bg-cloud.png":22993,"./bg-dog-custom.png":1152,"./bg-dog.png":64733,"./bg-flower-frame-custom.png":89702,"./bg-flower-frame.png":72617,"./bg-gooey.png":36471,"./bg-gummybear.png":52072,"./bg-heart-custom.png":83753,"./bg-heart-warm.png":57405,"./bg-heart.png":23065,"./bg-leaf.png":19287,"./bg-none.png":48452,"./bg-paper-tap-grid.png":65906,"./bg-paper-tap-point.png":3071,"./bg-paper-tap-stripe.png":16076,"./bg-paper-tap.png":2314,"./bg-penguin.png":81980,"./bg-planet.png":87620,"./bg-rabbit-custom.png":96198,"./bg-rabbit.png":55319,"./bg-rainbow-dark.png":48256,"./bg-rainbow.png":3206,"./bg-rectangle-flag-custom.png":43330,"./bg-rectangle-flag.png":18871,"./bg-rounded-borderless.png":50900,"./bg-rounded-both.png":16064,"./bg-rounded-hollow.png":2404,"./bg-speech-bubble-triangle.png":37812,"./bg-speech-bubble.png":99559,"./bg-square-borderless.png":30430,"./bg-square-both.png":97067,"./bg-square-hollow.png":85774,"./bg-star.png":39982,"./bg-text-book-jp.png":93807,"./bg-text-book-tw.png":35796,"./bg-text-book-us.png":69233,"./bg-triangle-flag-custom.png":57265,"./bg-triangle-flag.png":23707,"./bg-underline.png":79201,"./bg-vintage-flower-custom.png":67715,"./bg-vintage-flower.png":4632,"./fill-doodle1.png":95653,"./fill-none.png":69610,"./shadow-bold3d.png":25763,"./shadow-echo.png":5342,"./shadow-funky3d.png":41499,"./shadow-hollow.png":77622,"./shadow-lift.png":49559,"./shadow-none.png":85127,"./shadow-outline.png":13455,"./shadow-shadow.png":61378,"./shadow-splice.png":71759,"./shape-curve.png":45221,"./shape-none.png":96781};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=36362},79127:function(e,t,n){var r={"./endpoint-rounded.svg":15494,"./endpoint-square.svg":23614,"./endpoint-triangle.svg":99665};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=79127},10564:function(e,t,n){var r={"./tail-bottom.png":78551,"./tail-left.png":11737,"./tail-right.png":82728,"./tail-top.png":3436,"./tail-triangle-bottom.png":97333,"./tail-triangle-left.png":64487,"./tail-triangle-right.png":79035,"./tail-triangle-top.png":72372};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=10564},59450:function(e,t,n){var r={"./Img_clip.json":[90858,858],"./app.json":[85210],"./body.json":[82501,501],"./editor.json":[3029,29],"./fram_test.json":[96815,815],"./frame.json":[30714,714],"./heading.json":[12817,308],"./loginData.json":[9036,36],"./subheading.json":[94414,414]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(i,19)}))}i.keys=function(){return Object.keys(r)},i.id=59450,e.exports=i},67301:function(e,t,n){"use strict";e.exports=n.p+"img/brandkit.ae6c1c06.jpg"},84504:function(e,t,n){"use strict";e.exports=n.p+"img/cb.34417b39.jpg"},90860:function(e,t,n){"use strict";e.exports=n.p+"img/export-pdf-print.82fd4f29.jpg"},87640:function(e,t,n){"use strict";e.exports=n.p+"img/page-resize.08f9d049.jpg"},87375:function(e,t,n){"use strict";e.exports=n.p+"img/pro-bg.51f748b1.jpg"},70537:function(e,t,n){"use strict";e.exports=n.p+"img/pro-object.ac248910.jpg"},14635:function(e,t,n){"use strict";e.exports=n.p+"img/pro-template1.c203c6af.jpg"},35658:function(e,t,n){"use strict";e.exports=n.p+"img/pro-template2.5fd0ba0e.jpg"},83730:function(e,t,n){"use strict";e.exports=n.p+"img/pro-text.6028e242.jpg"},85609:function(e,t,n){"use strict";e.exports=n.p+"img/remover.c2529e80.jpg"},36122:function(e,t,n){"use strict";e.exports=n.p+"img/brandkit.2731a8d3.jpg"},22675:function(e,t,n){"use strict";e.exports=n.p+"img/cb.34417b39.jpg"},65408:function(e,t,n){"use strict";e.exports=n.p+"img/export-pdf-print.0750459f.jpg"},39177:function(e,t,n){"use strict";e.exports=n.p+"img/page-resize.ed4fc3cf.jpg"},40125:function(e,t,n){"use strict";e.exports=n.p+"img/pro-bg.ded4b5e5.jpg"},76482:function(e,t,n){"use strict";e.exports=n.p+"img/pro-object.222bff0b.jpg"},85554:function(e,t,n){"use strict";e.exports=n.p+"img/pro-template1.a673c28d.jpg"},39362:function(e,t,n){"use strict";e.exports=n.p+"img/pro-template2.4e636e5d.jpg"},64241:function(e,t,n){"use strict";e.exports=n.p+"img/pro-text.62efd684.jpg"},55891:function(e,t,n){"use strict";e.exports=n.p+"img/remover.b290713f.jpg"},3375:function(e,t,n){"use strict";e.exports=n.p+"img/template-cb.34417b39.jpg"},3496:function(e,t,n){"use strict";e.exports=n.p+"img/brandkit.b5e3b5f4.jpg"},72074:function(e,t,n){"use strict";e.exports=n.p+"img/cb.34417b39.jpg"},84930:function(e,t,n){"use strict";e.exports=n.p+"img/export-pdf-print.a242956f.jpg"},34675:function(e,t,n){"use strict";e.exports=n.p+"img/page-resize.2bcd1029.jpg"},36026:function(e,t,n){"use strict";e.exports=n.p+"img/pro-bg.5a37ab96.jpg"},53769:function(e,t,n){"use strict";e.exports=n.p+"img/pro-object.bed19ed5.jpg"},81434:function(e,t,n){"use strict";e.exports=n.p+"img/pro-template1.c0e30e01.jpg"},79506:function(e,t,n){"use strict";e.exports=n.p+"img/pro-template2.82cac161.jpg"},13243:function(e,t,n){"use strict";e.exports=n.p+"img/pro-text.cf8079b7.jpg"},30035:function(e,t,n){"use strict";e.exports=n.p+"img/remover.5f301640.jpg"},11781:function(e,t,n){"use strict";e.exports=n.p+"img/disconnect.f8947b4b.png"},17076:function(e,t,n){"use strict";e.exports=n.p+"img/logo-horizontal.8d25f82e.png"},26182:function(e,t,n){"use strict";e.exports=n.p+"img/logo-square.0a40766c.png"},80142:function(e,t,n){"use strict";e.exports=n.p+"img/logo-vertical.5a05f6ff.png"},91183:function(e,t,n){"use strict";e.exports=n.p+"be4521629c0ae5c6.svg"},34938:function(e,t,n){"use strict";e.exports=n.p+"b9dd2ad152bf72f4.svg"},10091:function(e,t,n){"use strict";e.exports=n.p+"5864eeac0869528b.svg"},87349:function(e,t,n){"use strict";e.exports=n.p+"f0be3465bba91bce.svg"},84717:function(e,t,n){"use strict";e.exports=n.p+"c390739a9cd1ddf0.svg"},89708:function(e,t,n){"use strict";e.exports=n.p+"7f069ab6b4471de9.svg"},27006:function(e,t,n){"use strict";e.exports=n.p+"309492a344336457.svg"},31814:function(e,t,n){"use strict";e.exports=n.p+"2bc3be2c9c69bc18.svg"},79862:function(e,t,n){"use strict";e.exports=n.p+"f9a6c2c5e9c70f1a.svg"},44038:function(e,t,n){"use strict";e.exports=n.p+"a2679b478f863817.svg"},48432:function(e,t,n){"use strict";e.exports=n.p+"79ba8c75a1edc4c9.svg"},70865:function(e,t,n){"use strict";e.exports=n.p+"16505840749ce040.svg"},7009:function(e,t,n){"use strict";e.exports=n.p+"3be97a01b0b4730c.svg"},60047:function(e,t,n){"use strict";e.exports=n.p+"624805ebdd36f8db.svg"},56716:function(e,t,n){"use strict";e.exports=n.p+"d82d846721433c08.svg"},44685:function(e,t,n){"use strict";e.exports=n.p+"a633d12a94cd4aa5.svg"},47460:function(e,t,n){"use strict";e.exports=n.p+"59246a07158a54c8.svg"},66934:function(e,t,n){"use strict";e.exports=n.p+"img/Feature 2_jp.ab03fe55.png"},61697:function(e,t,n){"use strict";e.exports=n.p+"img/Feature 2_tw.d0e30206.png"},26268:function(e,t,n){"use strict";e.exports=n.p+"img/Feature 2_us.96f1d990.png"},70275:function(e,t,n){"use strict";e.exports=n.p+"978c35e498f521af.svg"},75396:function(e,t,n){"use strict";e.exports=n.p+"81a86ba1fbfd1163.svg"},93676:function(e,t,n){"use strict";e.exports=n.p+"aad8761f723273f9.svg"},95521:function(e,t,n){"use strict";e.exports=n.p+"11e7ffe92a1601aa.svg"},54827:function(e,t,n){"use strict";e.exports=n.p+"17653c8633802847.svg"},30534:function(e,t,n){"use strict";e.exports=n.p+"9c4f62c9dcaddd0a.svg"},77275:function(e,t,n){"use strict";e.exports=n.p+"138cee2f8914e23c.svg"},40909:function(e,t,n){"use strict";e.exports=n.p+"img/header_img_jp.1d271c4d.png"},68744:function(e,t,n){"use strict";e.exports=n.p+"img/header_img_tw.1518689a.png"},794:function(e,t,n){"use strict";e.exports=n.p+"img/header_img_us.3a359476.png"},94102:function(e,t,n){"use strict";e.exports=n.p+"media/remover.0ab0c767.mp4"},22401:function(e,t,n){"use strict";e.exports=n.p+"media/storytelling.60c184be.mp4"},99936:function(e,t,n){"use strict";e.exports=n.p+"media/remover.8c27699c.mp4"},93252:function(e,t,n){"use strict";e.exports=n.p+"media/storytelling.d03180b0.mp4"},70701:function(e,t,n){"use strict";e.exports=n.p+"media/remover.7a6099d3.mp4"},58079:function(e,t,n){"use strict";e.exports=n.p+"media/storytelling.644b3844.mp4"},75230:function(e,t,n){"use strict";e.exports=n.p+"6c42c110700c1d4f.svg"},64751:function(e,t,n){"use strict";e.exports=n.p+"bd899f4c3d2b8832.svg"},60831:function(e,t,n){"use strict";e.exports=n.p+"8bde6af19645666f.svg"},57371:function(e,t,n){"use strict";e.exports=n.p+"5a80dce1d929bdee.svg"},60936:function(e,t,n){"use strict";e.exports=n.p+"7fd0b61411a581c6.svg"},92040:function(e,t,n){"use strict";e.exports=n.p+"a1f785782c1ddf69.svg"},1250:function(e,t,n){"use strict";e.exports=n.p+"484283875c6f1546.svg"},95488:function(e,t,n){"use strict";e.exports=n.p+"c3cceaecaddb2de9.svg"},52808:function(e,t,n){"use strict";e.exports=n.p+"f8ba690a3707ced6.svg"},18524:function(e,t,n){"use strict";e.exports=n.p+"25b44bfd1b8708cc.svg"},69080:function(e,t,n){"use strict";e.exports=n.p+"b012a1d0a40c5461.svg"},25343:function(e,t,n){"use strict";e.exports=n.p+"1ea8b14c87b70c09.svg"},26583:function(e,t,n){"use strict";e.exports=n.p+"0d5989871573a0e7.svg"},92575:function(e,t,n){"use strict";e.exports=n.p+"b9f3713e50421d3b.svg"},88624:function(e,t,n){"use strict";e.exports=n.p+"df0c930d4b1801a4.svg"},34618:function(e,t,n){"use strict";e.exports=n.p+"18836a5ffec1335b.svg"},67540:function(e,t,n){"use strict";e.exports=n.p+"0e4ee28e55eda855.svg"},91865:function(e,t,n){"use strict";e.exports=n.p+"4e0e8e051a20a4d3.svg"},36959:function(e,t,n){"use strict";e.exports=n.p+"db9b4b8cc2b8c1d5.svg"},12208:function(e,t,n){"use strict";e.exports=n.p+"f623f84b5b671952.svg"},17707:function(e,t,n){"use strict";e.exports=n.p+"aa563d3528d8844e.svg"},53060:function(e,t,n){"use strict";e.exports=n.p+"b232d2c196568d63.svg"},24517:function(e,t,n){"use strict";e.exports=n.p+"24d1f2080282415c.svg"},49239:function(e,t,n){"use strict";e.exports=n.p+"37fc3f8ad382696b.svg"},82538:function(e,t,n){"use strict";e.exports=n.p+"5e36aa5b9de2862d.svg"},20884:function(e,t,n){"use strict";e.exports=n.p+"0a39c4c9f4ff40e6.svg"},26578:function(e,t,n){"use strict";e.exports=n.p+"183cda70e26c8245.svg"},58958:function(e,t,n){"use strict";e.exports=n.p+"9ea8dfc388688c19.svg"},68621:function(e,t,n){"use strict";e.exports=n.p+"78f783f47273ec4d.svg"},7129:function(e,t,n){"use strict";e.exports=n.p+"2686528477a6abfb.svg"},7884:function(e,t,n){"use strict";e.exports=n.p+"3deaa273b94e5e79.svg"},58940:function(e,t,n){"use strict";e.exports=n.p+"5fa2467e1aa90513.svg"},57594:function(e,t,n){"use strict";e.exports=n.p+"ce7f71f5465cb7fe.svg"},55219:function(e,t,n){"use strict";e.exports=n.p+"505b96a074dd6df5.svg"},17260:function(e,t,n){"use strict";e.exports=n.p+"80b42a9ecdb2109f.svg"},47524:function(e,t,n){"use strict";e.exports=n.p+"7831baaade7c8de1.svg"},17473:function(e,t,n){"use strict";e.exports=n.p+"410461507d1fa655.svg"},47725:function(e,t,n){"use strict";e.exports=n.p+"69bc51d22a880770.svg"},43717:function(e,t,n){"use strict";e.exports=n.p+"128d0de245fef4b2.svg"},46481:function(e,t,n){"use strict";e.exports=n.p+"f97f6f041101e184.svg"},69234:function(e,t,n){"use strict";e.exports=n.p+"f3189e6dc8d70dc9.svg"},18087:function(e,t,n){"use strict";e.exports=n.p+"b78fe67a4ff24bc2.svg"},22493:function(e,t,n){"use strict";e.exports=n.p+"1b4ab07e1b8189dc.svg"},11996:function(e,t,n){"use strict";e.exports=n.p+"2133fea9a3cc70f5.svg"},86388:function(e,t,n){"use strict";e.exports=n.p+"0584531f3142aa2f.svg"},54836:function(e,t,n){"use strict";e.exports=n.p+"21ed1248822393f9.svg"},58990:function(e,t,n){"use strict";e.exports=n.p+"81092cea03f9f9cf.svg"},64164:function(e,t,n){"use strict";e.exports=n.p+"1f9b9e6a20e905e3.svg"},55208:function(e,t,n){"use strict";e.exports=n.p+"fdd45cba2088f6af.svg"},72154:function(e,t,n){"use strict";e.exports=n.p+"20222ec4e26a830b.svg"},93274:function(e,t,n){"use strict";e.exports=n.p+"b66109c2bc13aa03.svg"},70310:function(e,t,n){"use strict";e.exports=n.p+"b982b99f3581840a.svg"},50134:function(e,t,n){"use strict";e.exports=n.p+"027c23eeb0b7165c.svg"},94214:function(e,t,n){"use strict";e.exports=n.p+"84cfcbdace0cb89d.svg"},88625:function(e,t,n){"use strict";e.exports=n.p+"10c68b3a6b2afe9e.svg"},82102:function(e,t,n){"use strict";e.exports=n.p+"8fb33cae911cf003.svg"},86069:function(e,t,n){"use strict";e.exports=n.p+"7534dcfb05c3baff.svg"},75852:function(e,t,n){"use strict";e.exports=n.p+"3f8595fc58e06e15.svg"},6997:function(e,t,n){"use strict";e.exports=n.p+"ce54f5d01ade94d0.svg"},49851:function(e,t,n){"use strict";e.exports=n.p+"7aa4b6855ede9b18.svg"},1324:function(e,t,n){"use strict";e.exports=n.p+"4808a9cd3c9d2ec7.svg"},59284:function(e,t,n){"use strict";e.exports=n.p+"ca2645e7c9a8cade.svg"},85017:function(e,t,n){"use strict";e.exports=n.p+"451cce905c242b0c.svg"},3416:function(e,t,n){"use strict";e.exports=n.p+"9113d550ea3065ed.svg"},96650:function(e,t,n){"use strict";e.exports=n.p+"2a41e4e1e6951576.svg"},70115:function(e,t,n){"use strict";e.exports=n.p+"a632b9b8c1d827c1.svg"},20437:function(e,t,n){"use strict";e.exports=n.p+"c9a94f7e69a4ddb9.svg"},47259:function(e,t,n){"use strict";e.exports=n.p+"7a5afe39b52c4a72.svg"},16402:function(e,t,n){"use strict";e.exports=n.p+"8fd9886a632a1b88.svg"},5408:function(e,t,n){"use strict";e.exports=n.p+"c09a970031016f23.svg"},10373:function(e,t,n){"use strict";e.exports=n.p+"348b23038a14aa9d.svg"},42459:function(e,t,n){"use strict";e.exports=n.p+"0d6ec2650cb38b4e.svg"},39447:function(e,t,n){"use strict";e.exports=n.p+"c58e0936adcbbfd7.svg"},23453:function(e,t,n){"use strict";e.exports=n.p+"ab2622c7a67a8508.svg"},47498:function(e,t,n){"use strict";e.exports=n.p+"37d796efb892f1ad.svg"},10651:function(e,t,n){"use strict";e.exports=n.p+"a2ebe2c6d051fb7e.svg"},42423:function(e,t,n){"use strict";e.exports=n.p+"643b836a8a3460e6.svg"},13652:function(e,t,n){"use strict";e.exports=n.p+"294428344ffb32d6.svg"},21751:function(e,t,n){"use strict";e.exports=n.p+"fe5bbbd33697ccb5.svg"},55563:function(e,t,n){"use strict";e.exports=n.p+"5f5c2c63b35f009d.svg"},27466:function(e,t,n){"use strict";e.exports=n.p+"8cabeac55bc335f1.svg"},85985:function(e,t,n){"use strict";e.exports=n.p+"3e3673a05622bba7.svg"},18415:function(e,t,n){"use strict";e.exports=n.p+"img/bg-baby.059b305f.png"},20857:function(e,t,n){"use strict";e.exports=n.p+"img/bg-bear-custom.86048aa1.png"},32821:function(e,t,n){"use strict";e.exports=n.p+"img/bg-bear.430c3a8c.png"},74004:function(e,t,n){"use strict";e.exports=n.p+"img/bg-bread.129f09b7.png"},17634:function(e,t,n){"use strict";e.exports=n.p+"img/bg-butter-flower.3c3a0400.png"},82308:function(e,t,n){"use strict";e.exports=n.p+"img/bg-cat-custom.6899e80c.png"},98077:function(e,t,n){"use strict";e.exports=n.p+"img/bg-cat-paw.2a190c12.png"},98409:function(e,t,n){"use strict";e.exports=n.p+"img/bg-cat.7ed4a580.png"},14082:function(e,t,n){"use strict";e.exports=n.p+"img/bg-circle.4bb720fe.png"},22993:function(e,t,n){"use strict";e.exports=n.p+"img/bg-cloud.fd121ee9.png"},1152:function(e,t,n){"use strict";e.exports=n.p+"img/bg-dog-custom.44c660df.png"},64733:function(e,t,n){"use strict";e.exports=n.p+"img/bg-dog.45dd0058.png"},89702:function(e,t,n){"use strict";e.exports=n.p+"img/bg-flower-frame-custom.8a19dbff.png"},72617:function(e,t,n){"use strict";e.exports=n.p+"img/bg-flower-frame.27dbf5f5.png"},36471:function(e,t,n){"use strict";e.exports=n.p+"img/bg-gooey.d5ec5dd4.png"},52072:function(e,t,n){"use strict";e.exports=n.p+"img/bg-gummybear.73719723.png"},83753:function(e,t,n){"use strict";e.exports=n.p+"img/bg-heart-custom.8e4ca2bb.png"},57405:function(e,t,n){"use strict";e.exports=n.p+"img/bg-heart-warm.0ad78f43.png"},23065:function(e,t,n){"use strict";e.exports=n.p+"img/bg-heart.15487583.png"},19287:function(e,t,n){"use strict";e.exports=n.p+"img/bg-leaf.874ec2e5.png"},48452:function(e,t,n){"use strict";e.exports=n.p+"img/bg-none.223a988c.png"},65906:function(e,t,n){"use strict";e.exports=n.p+"img/bg-paper-tap-grid.4bd60b6a.png"},3071:function(e,t,n){"use strict";e.exports=n.p+"img/bg-paper-tap-point.4a09f78a.png"},16076:function(e,t,n){"use strict";e.exports=n.p+"img/bg-paper-tap-stripe.1c55133f.png"},2314:function(e,t,n){"use strict";e.exports=n.p+"img/bg-paper-tap.1c09c147.png"},81980:function(e,t,n){"use strict";e.exports=n.p+"img/bg-penguin.4fe84ceb.png"},87620:function(e,t,n){"use strict";e.exports=n.p+"img/bg-planet.eb953cf1.png"},96198:function(e,t,n){"use strict";e.exports=n.p+"img/bg-rabbit-custom.347e29d2.png"},55319:function(e,t,n){"use strict";e.exports=n.p+"img/bg-rabbit.9de9db3a.png"},48256:function(e,t,n){"use strict";e.exports=n.p+"img/bg-rainbow-dark.60f79394.png"},3206:function(e,t,n){"use strict";e.exports=n.p+"img/bg-rainbow.a50590d3.png"},43330:function(e,t,n){"use strict";e.exports=n.p+"img/bg-rectangle-flag-custom.c89ac3a5.png"},18871:function(e,t,n){"use strict";e.exports=n.p+"img/bg-rectangle-flag.ebbc3acb.png"},50900:function(e,t,n){"use strict";e.exports=n.p+"img/bg-rounded-borderless.66d2c962.png"},16064:function(e,t,n){"use strict";e.exports=n.p+"img/bg-rounded-both.63ca078f.png"},2404:function(e,t,n){"use strict";e.exports=n.p+"img/bg-rounded-hollow.670dd04a.png"},37812:function(e,t,n){"use strict";e.exports=n.p+"img/bg-speech-bubble-triangle.d440819d.png"},99559:function(e,t,n){"use strict";e.exports=n.p+"img/bg-speech-bubble.d6a09f48.png"},30430:function(e,t,n){"use strict";e.exports=n.p+"img/bg-square-borderless.6a798d6d.png"},97067:function(e,t,n){"use strict";e.exports=n.p+"img/bg-square-both.34cdf0b8.png"},85774:function(e,t,n){"use strict";e.exports=n.p+"img/bg-square-hollow.d68118ea.png"},39982:function(e,t,n){"use strict";e.exports=n.p+"img/bg-star.eaabeabd.png"},93807:function(e,t,n){"use strict";e.exports=n.p+"img/bg-text-book-jp.8d7a5c3f.png"},35796:function(e,t,n){"use strict";e.exports=n.p+"img/bg-text-book-tw.a378b22f.png"},69233:function(e,t,n){"use strict";e.exports=n.p+"img/bg-text-book-us.b1c421e6.png"},57265:function(e,t,n){"use strict";e.exports=n.p+"img/bg-triangle-flag-custom.b63a6dc5.png"},23707:function(e,t,n){"use strict";e.exports=n.p+"img/bg-triangle-flag.4fbcd42c.png"},79201:function(e,t,n){"use strict";e.exports=n.p+"img/bg-underline.c9bb506d.png"},67715:function(e,t,n){"use strict";e.exports=n.p+"img/bg-vintage-flower-custom.4c4ba8f7.png"},4632:function(e,t,n){"use strict";e.exports=n.p+"img/bg-vintage-flower.c62fa7d7.png"},95653:function(e,t,n){"use strict";e.exports=n.p+"img/fill-doodle1.223a988c.png"},69610:function(e,t,n){"use strict";e.exports=n.p+"img/fill-none.223a988c.png"},25763:function(e,t,n){"use strict";e.exports=n.p+"img/shadow-bold3d.e73cb0fe.png"},5342:function(e,t,n){"use strict";e.exports=n.p+"img/shadow-echo.3a8b1f15.png"},41499:function(e,t,n){"use strict";e.exports=n.p+"img/shadow-funky3d.3e815aa8.png"},77622:function(e,t,n){"use strict";e.exports=n.p+"img/shadow-hollow.b99b173e.png"},49559:function(e,t,n){"use strict";e.exports=n.p+"img/shadow-lift.db74d37b.png"},85127:function(e,t,n){"use strict";e.exports=n.p+"img/shadow-none.4649fe9e.png"},13455:function(e,t,n){"use strict";e.exports=n.p+"img/shadow-outline.df19e9cf.png"},61378:function(e,t,n){"use strict";e.exports=n.p+"img/shadow-shadow.6a3f0971.png"},71759:function(e,t,n){"use strict";e.exports=n.p+"img/shadow-splice.a94174c7.png"},45221:function(e,t,n){"use strict";e.exports=n.p+"img/shape-curve.eab6af54.png"},96781:function(e,t,n){"use strict";e.exports=n.p+"img/shape-none.229e3140.png"},15494:function(e,t,n){"use strict";e.exports=n.p+"9a496ebf68ba90d9.svg"},23614:function(e,t,n){"use strict";e.exports=n.p+"59e2d7d5f22df302.svg"},99665:function(e,t,n){"use strict";e.exports=n.p+"f55a08480d0bf074.svg"},78551:function(e,t,n){"use strict";e.exports=n.p+"img/tail-bottom.2f55695f.png"},11737:function(e,t,n){"use strict";e.exports=n.p+"img/tail-left.a431f1b5.png"},82728:function(e,t,n){"use strict";e.exports=n.p+"img/tail-right.946b4826.png"},3436:function(e,t,n){"use strict";e.exports=n.p+"img/tail-top.5b41237e.png"},97333:function(e,t,n){"use strict";e.exports=n.p+"img/tail-triangle-bottom.21d168c3.png"},64487:function(e,t,n){"use strict";e.exports=n.p+"img/tail-triangle-left.d204fcc9.png"},79035:function(e,t,n){"use strict";e.exports=n.p+"img/tail-triangle-right.614c0783.png"},72372:function(e,t,n){"use strict";e.exports=n.p+"img/tail-triangle-top.5642fe06.png"},14444:function(e,t,n){"use strict";e.exports=n.p+"1f0da17ffde003fe.svg"},85210:function(e){"use strict";e.exports=JSON.parse('{"design_type_map":{"0":"font","1":"img_background","2":"img_photo","3":"img_unsplash","4":"img_pexels","5":"svg","6":"template","7":"group","8":"frame","9":"marker","10":"line","11":"shape","12":"font_emoji","13":"layout"},"ver_uni":101,"ver_api":1234,"default_font":[{"id":"gkNYxJEe72MBxp0Ay9Dv","ver":1},{"id":"OOcHgnEpk9RHYBOiWllz","ver":3},{"id":"cRgaSK5ZVXnLDpWTL8MN","ver":2},{"id":"zVUjQ0MaGOm7HOJXv5gB","ver":5},{"id":"gXgHEvSNTPg2mhrpNOUb","ver":1}],"glyph":{"id":"gXgHEvSNTPg2mhrpNOUb","ver":1,"priority":4},"emoji":{"id":"zVUjQ0MaGOm7HOJXv5gB","ver":5,"priority":3},"us_default":{"id":"cRgaSK5ZVXnLDpWTL8MN","ver":2,"priority":2},"tw_default":{"id":"OOcHgnEpk9RHYBOiWllz","ver":3,"priority":1},"jp_default":{"id":"gkNYxJEe72MBxp0Ay9Dv","ver":1,"priority":0},"image_size_map":[{"key":"larg","size":1600},{"key":"full","size":1200},{"key":"midd","size":766},{"key":"smal","size":510},{"key":"tiny","size":320},{"key":"prev","size":150}]}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,r,i,o){if(!r){var s=1/0;for(d=0;d<e.length;d++){r=e[d][0],i=e[d][1],o=e[d][2];for(var a=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(a=!1,o<s&&(s=o));if(a){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,i,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){s[e]=function(){return r[e]}}));return s["default"]=function(){return r},n.d(o,s),o}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+(368===e?"global-component":e)+"."+{29:"b948b721",36:"ec4e713f",65:"564f2a4a",108:"6b411f3d",141:"2f0f979d",161:"4ba3cb10",193:"9659a490",267:"ad8b3acb",282:"7d6dd18e",291:"3a2e181d",308:"8ef7e79b",309:"e9db15f5",368:"82e5e5cc",382:"8641122f",414:"c692ae8d",484:"1c9b4f3f",501:"66759953",620:"66f7c336",625:"6c043149",664:"7805710a",671:"7569dc9d",714:"f4795957",815:"8ee3531b",817:"41b4173e",821:"82f8085c",825:"d45a06a6",846:"0b4948d1",858:"dec0508e",968:"413c53a5",972:"a2d35407",987:"7867b829"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+(368===e?"global-component":e)+"."+{65:"1817208a",108:"6dbcd5f5",161:"1528c204",193:"5b74ce06",267:"88064877",282:"4b6cfa9c",291:"f8303c61",309:"da886e7f",368:"c1c42c96",382:"ad6302de",484:"8eed768d",625:"efd5b76c",664:"cc2f2eac",671:"bb58f45e",817:"832f2849",821:"46e75a1c",825:"40480fe9",968:"9a4bd35d",972:"fca76852",987:"a055ba50"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="nueditor:";n.l=function(r,i,o,s){if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var g=function(t,n){a.onerror=a.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=g.bind(null,a.onerror),a.onload=g.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,r,i){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var s=function(n){if(o.onerror=o.onload=null,"load"===n.type)r();else{var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=a,o.parentNode.removeChild(o),i(l)}};return o.onerror=o.onload=s,o.href=t,n?n.parentNode.insertBefore(o,n.nextSibling):document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=n[r],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){i=s[r],o=i.getAttribute("data-href");if(o===e||o===t)return i}},r=function(r){return new Promise((function(i,o){var s=n.miniCssF(r),a=n.p+s;if(t(s,a))return i();e(r,a,null,i,o)}))},i={143:0};n.f.miniCss=function(e,t){var n={65:1,108:1,161:1,193:1,267:1,282:1,291:1,309:1,368:1,382:1,484:1,625:1,664:1,671:1,817:1,821:1,825:1,968:1,972:1,987:1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=r(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error,l=function(r){if(n.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}};n.l(s,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)var d=l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},r=self["webpackChunknueditor"]=self["webpackChunknueditor"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(35319)}));r=n.O(r)})();
//# sourceMappingURL=app.b9f98c85.js.map